function PF(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in e)){const y=Object.getOwnPropertyDescriptor(o,h);y&&Object.defineProperty(e,h,y.get?y:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const y of h)if(y.type==="childList")for(const w of y.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&o(w)}).observe(document,{childList:!0,subtree:!0});function n(h){const y={};return h.integrity&&(y.integrity=h.integrity),h.referrerPolicy&&(y.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?y.credentials="include":h.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function o(h){if(h.ep)return;h.ep=!0;const y=n(h);fetch(h.href,y)}})();var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zC={exports:{}},D9={},BC={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c6=Symbol.for("react.element"),MF=Symbol.for("react.portal"),CF=Symbol.for("react.fragment"),IF=Symbol.for("react.strict_mode"),OF=Symbol.for("react.profiler"),RF=Symbol.for("react.provider"),DF=Symbol.for("react.context"),kF=Symbol.for("react.forward_ref"),LF=Symbol.for("react.suspense"),zF=Symbol.for("react.memo"),BF=Symbol.for("react.lazy"),TT=Symbol.iterator;function FF(e){return e===null||typeof e!="object"?null:(e=TT&&e[TT]||e["@@iterator"],typeof e=="function"?e:null)}var FC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NC=Object.assign,jC={};function b2(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||FC}b2.prototype.isReactComponent={};b2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};b2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $C(){}$C.prototype=b2.prototype;function ov(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||FC}var av=ov.prototype=new $C;av.constructor=ov;NC(av,b2.prototype);av.isPureReactComponent=!0;var ST=Array.isArray,UC=Object.prototype.hasOwnProperty,sv={current:null},VC={key:!0,ref:!0,__self:!0,__source:!0};function GC(e,t,n){var o,h={},y=null,w=null;if(t!=null)for(o in t.ref!==void 0&&(w=t.ref),t.key!==void 0&&(y=""+t.key),t)UC.call(t,o)&&!VC.hasOwnProperty(o)&&(h[o]=t[o]);var C=arguments.length-2;if(C===1)h.children=n;else if(1<C){for(var a=Array(C),D=0;D<C;D++)a[D]=arguments[D+2];h.children=a}if(e&&e.defaultProps)for(o in C=e.defaultProps,C)h[o]===void 0&&(h[o]=C[o]);return{$$typeof:c6,type:e,key:y,ref:w,props:h,_owner:sv.current}}function NF(e,t){return{$$typeof:c6,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lv(e){return typeof e=="object"&&e!==null&&e.$$typeof===c6}function jF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ET=/\/+/g;function Lm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jF(""+e.key):t.toString(36)}function Wd(e,t,n,o,h){var y=typeof e;(y==="undefined"||y==="boolean")&&(e=null);var w=!1;if(e===null)w=!0;else switch(y){case"string":case"number":w=!0;break;case"object":switch(e.$$typeof){case c6:case MF:w=!0}}if(w)return w=e,h=h(w),e=o===""?"."+Lm(w,0):o,ST(h)?(n="",e!=null&&(n=e.replace(ET,"$&/")+"/"),Wd(h,t,n,"",function(D){return D})):h!=null&&(lv(h)&&(h=NF(h,n+(!h.key||w&&w.key===h.key?"":(""+h.key).replace(ET,"$&/")+"/")+e)),t.push(h)),1;if(w=0,o=o===""?".":o+":",ST(e))for(var C=0;C<e.length;C++){y=e[C];var a=o+Lm(y,C);w+=Wd(y,t,n,a,h)}else if(a=FF(e),typeof a=="function")for(e=a.call(e),C=0;!(y=e.next()).done;)y=y.value,a=o+Lm(y,C++),w+=Wd(y,t,n,a,h);else if(y==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return w}function md(e,t,n){if(e==null)return e;var o=[],h=0;return Wd(e,o,"","",function(y){return t.call(n,y,h++)}),o}function $F(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ko={current:null},Hd={transition:null},UF={ReactCurrentDispatcher:ko,ReactCurrentBatchConfig:Hd,ReactCurrentOwner:sv};function qC(){throw Error("act(...) is not supported in production builds of React.")}sn.Children={map:md,forEach:function(e,t,n){md(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return md(e,function(){t++}),t},toArray:function(e){return md(e,function(t){return t})||[]},only:function(e){if(!lv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};sn.Component=b2;sn.Fragment=CF;sn.Profiler=OF;sn.PureComponent=ov;sn.StrictMode=IF;sn.Suspense=LF;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UF;sn.act=qC;sn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=NC({},e.props),h=e.key,y=e.ref,w=e._owner;if(t!=null){if(t.ref!==void 0&&(y=t.ref,w=sv.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var C=e.type.defaultProps;for(a in t)UC.call(t,a)&&!VC.hasOwnProperty(a)&&(o[a]=t[a]===void 0&&C!==void 0?C[a]:t[a])}var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){C=Array(a);for(var D=0;D<a;D++)C[D]=arguments[D+2];o.children=C}return{$$typeof:c6,type:e.type,key:h,ref:y,props:o,_owner:w}};sn.createContext=function(e){return e={$$typeof:DF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RF,_context:e},e.Consumer=e};sn.createElement=GC;sn.createFactory=function(e){var t=GC.bind(null,e);return t.type=e,t};sn.createRef=function(){return{current:null}};sn.forwardRef=function(e){return{$$typeof:kF,render:e}};sn.isValidElement=lv;sn.lazy=function(e){return{$$typeof:BF,_payload:{_status:-1,_result:e},_init:$F}};sn.memo=function(e,t){return{$$typeof:zF,type:e,compare:t===void 0?null:t}};sn.startTransition=function(e){var t=Hd.transition;Hd.transition={};try{e()}finally{Hd.transition=t}};sn.unstable_act=qC;sn.useCallback=function(e,t){return ko.current.useCallback(e,t)};sn.useContext=function(e){return ko.current.useContext(e)};sn.useDebugValue=function(){};sn.useDeferredValue=function(e){return ko.current.useDeferredValue(e)};sn.useEffect=function(e,t){return ko.current.useEffect(e,t)};sn.useId=function(){return ko.current.useId()};sn.useImperativeHandle=function(e,t,n){return ko.current.useImperativeHandle(e,t,n)};sn.useInsertionEffect=function(e,t){return ko.current.useInsertionEffect(e,t)};sn.useLayoutEffect=function(e,t){return ko.current.useLayoutEffect(e,t)};sn.useMemo=function(e,t){return ko.current.useMemo(e,t)};sn.useReducer=function(e,t,n){return ko.current.useReducer(e,t,n)};sn.useRef=function(e){return ko.current.useRef(e)};sn.useState=function(e){return ko.current.useState(e)};sn.useSyncExternalStore=function(e,t,n){return ko.current.useSyncExternalStore(e,t,n)};sn.useTransition=function(){return ko.current.useTransition()};sn.version="18.3.1";BC.exports=sn;var ut=BC.exports;const tt=Cn(ut),VF=PF({__proto__:null,default:tt},[ut]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GF=ut,qF=Symbol.for("react.element"),WF=Symbol.for("react.fragment"),HF=Object.prototype.hasOwnProperty,ZF=GF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XF={key:!0,ref:!0,__self:!0,__source:!0};function WC(e,t,n){var o,h={},y=null,w=null;n!==void 0&&(y=""+n),t.key!==void 0&&(y=""+t.key),t.ref!==void 0&&(w=t.ref);for(o in t)HF.call(t,o)&&!XF.hasOwnProperty(o)&&(h[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)h[o]===void 0&&(h[o]=t[o]);return{$$typeof:qF,type:e,key:y,ref:w,props:h,_owner:ZF.current}}D9.Fragment=WF;D9.jsx=WC;D9.jsxs=WC;zC.exports=D9;var Ne=zC.exports,HC={exports:{}},ga={},ZC={exports:{}},XC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(mt,Ct){var _t=mt.length;mt.push(Ct);e:for(;0<_t;){var Qt=_t-1>>>1,qt=mt[Qt];if(0<h(qt,Ct))mt[Qt]=Ct,mt[_t]=qt,_t=Qt;else break e}}function n(mt){return mt.length===0?null:mt[0]}function o(mt){if(mt.length===0)return null;var Ct=mt[0],_t=mt.pop();if(_t!==Ct){mt[0]=_t;e:for(var Qt=0,qt=mt.length,gr=qt>>>1;Qt<gr;){var Gt=2*(Qt+1)-1,vn=mt[Gt],cn=Gt+1,Ln=mt[cn];if(0>h(vn,_t))cn<qt&&0>h(Ln,vn)?(mt[Qt]=Ln,mt[cn]=_t,Qt=cn):(mt[Qt]=vn,mt[Gt]=_t,Qt=Gt);else if(cn<qt&&0>h(Ln,_t))mt[Qt]=Ln,mt[cn]=_t,Qt=cn;else break e}}return Ct}function h(mt,Ct){var _t=mt.sortIndex-Ct.sortIndex;return _t!==0?_t:mt.id-Ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var w=Date,C=w.now();e.unstable_now=function(){return w.now()-C}}var a=[],D=[],j=1,B=null,H=3,X=!1,ie=!1,Q=!1,ne=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(mt){for(var Ct=n(D);Ct!==null;){if(Ct.callback===null)o(D);else if(Ct.startTime<=mt)o(D),Ct.sortIndex=Ct.expirationTime,t(a,Ct);else break;Ct=n(D)}}function ve(mt){if(Q=!1,se(mt),!ie)if(n(a)!==null)ie=!0,ht(le);else{var Ct=n(D);Ct!==null&&kt(ve,Ct.startTime-mt)}}function le(mt,Ct){ie=!1,Q&&(Q=!1,te(Ee),Ee=-1),X=!0;var _t=H;try{for(se(Ct),B=n(a);B!==null&&(!(B.expirationTime>Ct)||mt&&!We());){var Qt=B.callback;if(typeof Qt=="function"){B.callback=null,H=B.priorityLevel;var qt=Qt(B.expirationTime<=Ct);Ct=e.unstable_now(),typeof qt=="function"?B.callback=qt:B===n(a)&&o(a),se(Ct)}else o(a);B=n(a)}if(B!==null)var gr=!0;else{var Gt=n(D);Gt!==null&&kt(ve,Gt.startTime-Ct),gr=!1}return gr}finally{B=null,H=_t,X=!1}}var fe=!1,Te=null,Ee=-1,Ze=5,st=-1;function We(){return!(e.unstable_now()-st<Ze)}function Xe(){if(Te!==null){var mt=e.unstable_now();st=mt;var Ct=!0;try{Ct=Te(!0,mt)}finally{Ct?St():(fe=!1,Te=null)}}else fe=!1}var St;if(typeof K=="function")St=function(){K(Xe)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Pt=Mt.port2;Mt.port1.onmessage=Xe,St=function(){Pt.postMessage(null)}}else St=function(){ne(Xe,0)};function ht(mt){Te=mt,fe||(fe=!0,St())}function kt(mt,Ct){Ee=ne(function(){mt(e.unstable_now())},Ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(mt){mt.callback=null},e.unstable_continueExecution=function(){ie||X||(ie=!0,ht(le))},e.unstable_forceFrameRate=function(mt){0>mt||125<mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ze=0<mt?Math.floor(1e3/mt):5},e.unstable_getCurrentPriorityLevel=function(){return H},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(mt){switch(H){case 1:case 2:case 3:var Ct=3;break;default:Ct=H}var _t=H;H=Ct;try{return mt()}finally{H=_t}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(mt,Ct){switch(mt){case 1:case 2:case 3:case 4:case 5:break;default:mt=3}var _t=H;H=mt;try{return Ct()}finally{H=_t}},e.unstable_scheduleCallback=function(mt,Ct,_t){var Qt=e.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Qt+_t:Qt):_t=Qt,mt){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=_t+qt,mt={id:j++,callback:Ct,priorityLevel:mt,startTime:_t,expirationTime:qt,sortIndex:-1},_t>Qt?(mt.sortIndex=_t,t(D,mt),n(a)===null&&mt===n(D)&&(Q?(te(Ee),Ee=-1):Q=!0,kt(ve,_t-Qt))):(mt.sortIndex=qt,t(a,mt),ie||X||(ie=!0,ht(le))),mt},e.unstable_shouldYield=We,e.unstable_wrapCallback=function(mt){var Ct=H;return function(){var _t=H;H=Ct;try{return mt.apply(this,arguments)}finally{H=_t}}}})(XC);ZC.exports=XC;var YF=ZC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KF=ut,ma=YF;function Ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YC=new Set,c5={};function qu(e,t){V0(e,t),V0(e+"Capture",t)}function V0(e,t){for(c5[e]=t,e=0;e<t.length;e++)YC.add(t[e])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bg=Object.prototype.hasOwnProperty,JF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PT={},MT={};function QF(e){return Bg.call(MT,e)?!0:Bg.call(PT,e)?!1:JF.test(e)?MT[e]=!0:(PT[e]=!0,!1)}function eN(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tN(e,t,n,o){if(t===null||typeof t>"u"||eN(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lo(e,t,n,o,h,y,w){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=y,this.removeEmptyString=w}var no={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){no[e]=new Lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];no[t]=new Lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){no[e]=new Lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){no[e]=new Lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){no[e]=new Lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){no[e]=new Lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){no[e]=new Lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){no[e]=new Lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){no[e]=new Lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var cv=/[\-:]([a-z])/g;function uv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cv,uv);no[t]=new Lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cv,uv);no[t]=new Lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cv,uv);no[t]=new Lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){no[e]=new Lo(e,1,!1,e.toLowerCase(),null,!1,!1)});no.xlinkHref=new Lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){no[e]=new Lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function hv(e,t,n,o){var h=no.hasOwnProperty(t)?no[t]:null;(h!==null?h.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tN(t,n,h,o)&&(n=null),o||h===null?QF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):h.mustUseProperty?e[h.propertyName]=n===null?h.type===3?!1:"":n:(t=h.attributeName,o=h.attributeNamespace,n===null?e.removeAttribute(t):(h=h.type,n=h===3||h===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var Nl=KF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gd=Symbol.for("react.element"),g0=Symbol.for("react.portal"),y0=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),KC=Symbol.for("react.provider"),JC=Symbol.for("react.context"),dv=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),jg=Symbol.for("react.suspense_list"),pv=Symbol.for("react.memo"),V1=Symbol.for("react.lazy"),QC=Symbol.for("react.offscreen"),CT=Symbol.iterator;function Ah(e){return e===null||typeof e!="object"?null:(e=CT&&e[CT]||e["@@iterator"],typeof e=="function"?e:null)}var hi=Object.assign,zm;function Vh(e){if(zm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zm=t&&t[1]||""}return`
`+zm+e}var Bm=!1;function Fm(e,t){if(!e||Bm)return"";Bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(D){var o=D}Reflect.construct(e,[],t)}else{try{t.call()}catch(D){o=D}e.call(t.prototype)}else{try{throw Error()}catch(D){o=D}e()}}catch(D){if(D&&o&&typeof D.stack=="string"){for(var h=D.stack.split(`
`),y=o.stack.split(`
`),w=h.length-1,C=y.length-1;1<=w&&0<=C&&h[w]!==y[C];)C--;for(;1<=w&&0<=C;w--,C--)if(h[w]!==y[C]){if(w!==1||C!==1)do if(w--,C--,0>C||h[w]!==y[C]){var a=`
`+h[w].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=w&&0<=C);break}}}finally{Bm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vh(e):""}function rN(e){switch(e.tag){case 5:return Vh(e.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return e=Fm(e.type,!1),e;case 11:return e=Fm(e.type.render,!1),e;case 1:return e=Fm(e.type,!0),e;default:return""}}function $g(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y0:return"Fragment";case g0:return"Portal";case Fg:return"Profiler";case fv:return"StrictMode";case Ng:return"Suspense";case jg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JC:return(e.displayName||"Context")+".Consumer";case KC:return(e._context.displayName||"Context")+".Provider";case dv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pv:return t=e.displayName||null,t!==null?t:$g(e.type)||"Memo";case V1:t=e._payload,e=e._init;try{return $g(e(t))}catch{}}return null}function nN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $g(t);case 8:return t===fv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iN(e){var t=eI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var h=n.get,y=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yd(e){e._valueTracker||(e._valueTracker=iN(e))}function tI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=eI(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function op(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var n=t.checked;return hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function IT(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=cc(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rI(e,t){t=t.checked,t!=null&&hv(e,"checked",t,!1)}function Vg(e,t){rI(e,t);var n=cc(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gg(e,t.type,cc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OT(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gg(e,t,n){(t!=="number"||op(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gh=Array.isArray;function D0(e,t,n,o){if(e=e.options,t){t={};for(var h=0;h<n.length;h++)t["$"+n[h]]=!0;for(n=0;n<e.length;n++)h=t.hasOwnProperty("$"+e[n].value),e[n].selected!==h&&(e[n].selected=h),h&&o&&(e[n].defaultSelected=!0)}else{for(n=""+cc(n),t=null,h=0;h<e.length;h++){if(e[h].value===n){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function qg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ht(91));return hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function RT(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ht(92));if(Gh(n)){if(1<n.length)throw Error(Ht(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cc(n)}}function nI(e,t){var n=cc(t.value),o=cc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function DT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _d,oI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,h){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_d=_d||document.createElement("div"),_d.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_d.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function u5(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oN=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(e){oN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zh[t]=Zh[e]})});function aI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zh.hasOwnProperty(e)&&Zh[e]?(""+t).trim():t+"px"}function sI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,h=aI(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,h):e[n]=h}}var aN=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(e,t){if(t){if(aN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ht(62))}}function Zg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function mv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yg=null,k0=null,L0=null;function kT(e){if(e=f6(e)){if(typeof Yg!="function")throw Error(Ht(280));var t=e.stateNode;t&&(t=F9(t),Yg(e.stateNode,e.type,t))}}function lI(e){k0?L0?L0.push(e):L0=[e]:k0=e}function cI(){if(k0){var e=k0,t=L0;if(L0=k0=null,kT(e),t)for(e=0;e<t.length;e++)kT(t[e])}}function uI(e,t){return e(t)}function hI(){}var Nm=!1;function fI(e,t,n){if(Nm)return e(t,n);Nm=!0;try{return uI(e,t,n)}finally{Nm=!1,(k0!==null||L0!==null)&&(hI(),cI())}}function h5(e,t){var n=e.stateNode;if(n===null)return null;var o=F9(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ht(231,t,typeof n));return n}var Kg=!1;if(Ol)try{var Th={};Object.defineProperty(Th,"passive",{get:function(){Kg=!0}}),window.addEventListener("test",Th,Th),window.removeEventListener("test",Th,Th)}catch{Kg=!1}function sN(e,t,n,o,h,y,w,C,a){var D=Array.prototype.slice.call(arguments,3);try{t.apply(n,D)}catch(j){this.onError(j)}}var Xh=!1,ap=null,sp=!1,Jg=null,lN={onError:function(e){Xh=!0,ap=e}};function cN(e,t,n,o,h,y,w,C,a){Xh=!1,ap=null,sN.apply(lN,arguments)}function uN(e,t,n,o,h,y,w,C,a){if(cN.apply(this,arguments),Xh){if(Xh){var D=ap;Xh=!1,ap=null}else throw Error(Ht(198));sp||(sp=!0,Jg=D)}}function Wu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LT(e){if(Wu(e)!==e)throw Error(Ht(188))}function hN(e){var t=e.alternate;if(!t){if(t=Wu(e),t===null)throw Error(Ht(188));return t!==e?null:e}for(var n=e,o=t;;){var h=n.return;if(h===null)break;var y=h.alternate;if(y===null){if(o=h.return,o!==null){n=o;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===n)return LT(h),e;if(y===o)return LT(h),t;y=y.sibling}throw Error(Ht(188))}if(n.return!==o.return)n=h,o=y;else{for(var w=!1,C=h.child;C;){if(C===n){w=!0,n=h,o=y;break}if(C===o){w=!0,o=h,n=y;break}C=C.sibling}if(!w){for(C=y.child;C;){if(C===n){w=!0,n=y,o=h;break}if(C===o){w=!0,o=y,n=h;break}C=C.sibling}if(!w)throw Error(Ht(189))}}if(n.alternate!==o)throw Error(Ht(190))}if(n.tag!==3)throw Error(Ht(188));return n.stateNode.current===n?e:t}function pI(e){return e=hN(e),e!==null?mI(e):null}function mI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mI(e);if(t!==null)return t;e=e.sibling}return null}var gI=ma.unstable_scheduleCallback,zT=ma.unstable_cancelCallback,fN=ma.unstable_shouldYield,dN=ma.unstable_requestPaint,bi=ma.unstable_now,pN=ma.unstable_getCurrentPriorityLevel,gv=ma.unstable_ImmediatePriority,yI=ma.unstable_UserBlockingPriority,lp=ma.unstable_NormalPriority,mN=ma.unstable_LowPriority,_I=ma.unstable_IdlePriority,k9=null,Vs=null;function gN(e){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(k9,e,void 0,(e.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:vN,yN=Math.log,_N=Math.LN2;function vN(e){return e>>>=0,e===0?32:31-(yN(e)/_N|0)|0}var vd=64,xd=4194304;function qh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cp(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,h=e.suspendedLanes,y=e.pingedLanes,w=n&268435455;if(w!==0){var C=w&~h;C!==0?o=qh(C):(y&=w,y!==0&&(o=qh(y)))}else w=n&~h,w!==0?o=qh(w):y!==0&&(o=qh(y));if(o===0)return 0;if(t!==0&&t!==o&&!(t&h)&&(h=o&-o,y=t&-t,h>=y||h===16&&(y&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-vs(t),h=1<<n,o|=e[n],t&=~h;return o}function xN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bN(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,y=e.pendingLanes;0<y;){var w=31-vs(y),C=1<<w,a=h[w];a===-1?(!(C&n)||C&o)&&(h[w]=xN(C,t)):a<=t&&(e.expiredLanes|=C),y&=~C}}function Qg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vI(){var e=vd;return vd<<=1,!(vd&4194240)&&(vd=64),e}function jm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function u6(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vs(t),e[t]=n}function wN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var h=31-vs(n),y=1<<h;t[h]=0,o[h]=-1,e[h]=-1,n&=~y}}function yv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-vs(n),h=1<<o;h&t|e[o]&t&&(e[o]|=t),n&=~h}}var Mn=0;function xI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bI,_v,wI,AI,TI,ey=!1,bd=[],Q1=null,ec=null,tc=null,f5=new Map,d5=new Map,H1=[],AN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BT(e,t){switch(e){case"focusin":case"focusout":Q1=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":f5.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":d5.delete(t.pointerId)}}function Sh(e,t,n,o,h,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:y,targetContainers:[h]},t!==null&&(t=f6(t),t!==null&&_v(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function TN(e,t,n,o,h){switch(t){case"focusin":return Q1=Sh(Q1,e,t,n,o,h),!0;case"dragenter":return ec=Sh(ec,e,t,n,o,h),!0;case"mouseover":return tc=Sh(tc,e,t,n,o,h),!0;case"pointerover":var y=h.pointerId;return f5.set(y,Sh(f5.get(y)||null,e,t,n,o,h)),!0;case"gotpointercapture":return y=h.pointerId,d5.set(y,Sh(d5.get(y)||null,e,t,n,o,h)),!0}return!1}function SI(e){var t=Au(e.target);if(t!==null){var n=Wu(t);if(n!==null){if(t=n.tag,t===13){if(t=dI(n),t!==null){e.blockedOn=t,TI(e.priority,function(){wI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ty(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Xg=o,n.target.dispatchEvent(o),Xg=null}else return t=f6(n),t!==null&&_v(t),e.blockedOn=n,!1;t.shift()}return!0}function FT(e,t,n){Zd(e)&&n.delete(t)}function SN(){ey=!1,Q1!==null&&Zd(Q1)&&(Q1=null),ec!==null&&Zd(ec)&&(ec=null),tc!==null&&Zd(tc)&&(tc=null),f5.forEach(FT),d5.forEach(FT)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,ey||(ey=!0,ma.unstable_scheduleCallback(ma.unstable_NormalPriority,SN)))}function p5(e){function t(h){return Eh(h,e)}if(0<bd.length){Eh(bd[0],e);for(var n=1;n<bd.length;n++){var o=bd[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Q1!==null&&Eh(Q1,e),ec!==null&&Eh(ec,e),tc!==null&&Eh(tc,e),f5.forEach(t),d5.forEach(t),n=0;n<H1.length;n++)o=H1[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<H1.length&&(n=H1[0],n.blockedOn===null);)SI(n),n.blockedOn===null&&H1.shift()}var z0=Nl.ReactCurrentBatchConfig,up=!0;function EN(e,t,n,o){var h=Mn,y=z0.transition;z0.transition=null;try{Mn=1,vv(e,t,n,o)}finally{Mn=h,z0.transition=y}}function PN(e,t,n,o){var h=Mn,y=z0.transition;z0.transition=null;try{Mn=4,vv(e,t,n,o)}finally{Mn=h,z0.transition=y}}function vv(e,t,n,o){if(up){var h=ty(e,t,n,o);if(h===null)Ym(e,t,o,hp,n),BT(e,o);else if(TN(h,e,t,n,o))o.stopPropagation();else if(BT(e,o),t&4&&-1<AN.indexOf(e)){for(;h!==null;){var y=f6(h);if(y!==null&&bI(y),y=ty(e,t,n,o),y===null&&Ym(e,t,o,hp,n),y===h)break;h=y}h!==null&&o.stopPropagation()}else Ym(e,t,o,null,n)}}var hp=null;function ty(e,t,n,o){if(hp=null,e=mv(o),e=Au(e),e!==null)if(t=Wu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dI(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hp=e,null}function EI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pN()){case gv:return 1;case yI:return 4;case lp:case mN:return 16;case _I:return 536870912;default:return 16}default:return 16}}var X1=null,xv=null,Xd=null;function PI(){if(Xd)return Xd;var e,t=xv,n=t.length,o,h="value"in X1?X1.value:X1.textContent,y=h.length;for(e=0;e<n&&t[e]===h[e];e++);var w=n-e;for(o=1;o<=w&&t[n-o]===h[y-o];o++);return Xd=h.slice(e,1<o?1-o:void 0)}function Yd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wd(){return!0}function NT(){return!1}function ya(e){function t(n,o,h,y,w){this._reactName=n,this._targetInst=h,this.type=o,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(n=e[C],this[C]=n?n(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wd:NT,this.isPropagationStopped=NT,this}return hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),t}var w2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bv=ya(w2),h6=hi({},w2,{view:0,detail:0}),MN=ya(h6),$m,Um,Ph,L9=hi({},h6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ph&&(Ph&&e.type==="mousemove"?($m=e.screenX-Ph.screenX,Um=e.screenY-Ph.screenY):Um=$m=0,Ph=e),$m)},movementY:function(e){return"movementY"in e?e.movementY:Um}}),jT=ya(L9),CN=hi({},L9,{dataTransfer:0}),IN=ya(CN),ON=hi({},h6,{relatedTarget:0}),Vm=ya(ON),RN=hi({},w2,{animationName:0,elapsedTime:0,pseudoElement:0}),DN=ya(RN),kN=hi({},w2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LN=ya(kN),zN=hi({},w2,{data:0}),$T=ya(zN),BN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=NN[e])?!!t[e]:!1}function wv(){return jN}var $N=hi({},h6,{key:function(e){if(e.key){var t=BN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?FN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wv,charCode:function(e){return e.type==="keypress"?Yd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),UN=ya($N),VN=hi({},L9,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UT=ya(VN),GN=hi({},h6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wv}),qN=ya(GN),WN=hi({},w2,{propertyName:0,elapsedTime:0,pseudoElement:0}),HN=ya(WN),ZN=hi({},L9,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XN=ya(ZN),YN=[9,13,27,32],Av=Ol&&"CompositionEvent"in window,Yh=null;Ol&&"documentMode"in document&&(Yh=document.documentMode);var KN=Ol&&"TextEvent"in window&&!Yh,MI=Ol&&(!Av||Yh&&8<Yh&&11>=Yh),VT=" ",GT=!1;function CI(e,t){switch(e){case"keyup":return YN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function II(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _0=!1;function JN(e,t){switch(e){case"compositionend":return II(t);case"keypress":return t.which!==32?null:(GT=!0,VT);case"textInput":return e=t.data,e===VT&&GT?null:e;default:return null}}function QN(e,t){if(_0)return e==="compositionend"||!Av&&CI(e,t)?(e=PI(),Xd=xv=X1=null,_0=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MI&&t.locale!=="ko"?null:t.data;default:return null}}var ej={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ej[e.type]:t==="textarea"}function OI(e,t,n,o){lI(o),t=fp(t,"onChange"),0<t.length&&(n=new bv("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Kh=null,m5=null;function tj(e){UI(e,0)}function z9(e){var t=b0(e);if(tI(t))return e}function rj(e,t){if(e==="change")return t}var RI=!1;if(Ol){var Gm;if(Ol){var qm="oninput"in document;if(!qm){var WT=document.createElement("div");WT.setAttribute("oninput","return;"),qm=typeof WT.oninput=="function"}Gm=qm}else Gm=!1;RI=Gm&&(!document.documentMode||9<document.documentMode)}function HT(){Kh&&(Kh.detachEvent("onpropertychange",DI),m5=Kh=null)}function DI(e){if(e.propertyName==="value"&&z9(m5)){var t=[];OI(t,m5,e,mv(e)),fI(tj,t)}}function nj(e,t,n){e==="focusin"?(HT(),Kh=t,m5=n,Kh.attachEvent("onpropertychange",DI)):e==="focusout"&&HT()}function ij(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return z9(m5)}function oj(e,t){if(e==="click")return z9(t)}function aj(e,t){if(e==="input"||e==="change")return z9(t)}function sj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bs=typeof Object.is=="function"?Object.is:sj;function g5(e,t){if(bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var h=n[o];if(!Bg.call(t,h)||!bs(e[h],t[h]))return!1}return!0}function ZT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function XT(e,t){var n=ZT(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZT(n)}}function kI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function LI(){for(var e=window,t=op();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=op(e.document)}return t}function Tv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lj(e){var t=LI(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kI(n.ownerDocument.documentElement,n)){if(o!==null&&Tv(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=n.textContent.length,y=Math.min(o.start,h);o=o.end===void 0?y:Math.min(o.end,h),!e.extend&&y>o&&(h=o,o=y,y=h),h=XT(n,y);var w=XT(n,o);h&&w&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),y>o?(e.addRange(t),e.extend(w.node,w.offset)):(t.setEnd(w.node,w.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cj=Ol&&"documentMode"in document&&11>=document.documentMode,v0=null,ry=null,Jh=null,ny=!1;function YT(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ny||v0==null||v0!==op(o)||(o=v0,"selectionStart"in o&&Tv(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Jh&&g5(Jh,o)||(Jh=o,o=fp(ry,"onSelect"),0<o.length&&(t=new bv("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=v0)))}function Ad(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var x0={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},Wm={},zI={};Ol&&(zI=document.createElement("div").style,"AnimationEvent"in window||(delete x0.animationend.animation,delete x0.animationiteration.animation,delete x0.animationstart.animation),"TransitionEvent"in window||delete x0.transitionend.transition);function B9(e){if(Wm[e])return Wm[e];if(!x0[e])return e;var t=x0[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zI)return Wm[e]=t[n];return e}var BI=B9("animationend"),FI=B9("animationiteration"),NI=B9("animationstart"),jI=B9("transitionend"),$I=new Map,KT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(e,t){$I.set(e,t),qu(t,[e])}for(var Hm=0;Hm<KT.length;Hm++){var Zm=KT[Hm],uj=Zm.toLowerCase(),hj=Zm[0].toUpperCase()+Zm.slice(1);hc(uj,"on"+hj)}hc(BI,"onAnimationEnd");hc(FI,"onAnimationIteration");hc(NI,"onAnimationStart");hc("dblclick","onDoubleClick");hc("focusin","onFocus");hc("focusout","onBlur");hc(jI,"onTransitionEnd");V0("onMouseEnter",["mouseout","mouseover"]);V0("onMouseLeave",["mouseout","mouseover"]);V0("onPointerEnter",["pointerout","pointerover"]);V0("onPointerLeave",["pointerout","pointerover"]);qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wh));function JT(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,uN(o,t,void 0,e),e.currentTarget=null}function UI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],h=o.event;o=o.listeners;e:{var y=void 0;if(t)for(var w=o.length-1;0<=w;w--){var C=o[w],a=C.instance,D=C.currentTarget;if(C=C.listener,a!==y&&h.isPropagationStopped())break e;JT(h,C,D),y=a}else for(w=0;w<o.length;w++){if(C=o[w],a=C.instance,D=C.currentTarget,C=C.listener,a!==y&&h.isPropagationStopped())break e;JT(h,C,D),y=a}}}if(sp)throw e=Jg,sp=!1,Jg=null,e}function Yn(e,t){var n=t[ly];n===void 0&&(n=t[ly]=new Set);var o=e+"__bubble";n.has(o)||(VI(t,e,2,!1),n.add(o))}function Xm(e,t,n){var o=0;t&&(o|=4),VI(n,e,o,t)}var Td="_reactListening"+Math.random().toString(36).slice(2);function y5(e){if(!e[Td]){e[Td]=!0,YC.forEach(function(n){n!=="selectionchange"&&(fj.has(n)||Xm(n,!1,e),Xm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Td]||(t[Td]=!0,Xm("selectionchange",!1,t))}}function VI(e,t,n,o){switch(EI(t)){case 1:var h=EN;break;case 4:h=PN;break;default:h=vv}n=h.bind(null,t,n,e),h=void 0,!Kg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(t,n,{capture:!0,passive:h}):e.addEventListener(t,n,!0):h!==void 0?e.addEventListener(t,n,{passive:h}):e.addEventListener(t,n,!1)}function Ym(e,t,n,o,h){var y=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var C=o.stateNode.containerInfo;if(C===h||C.nodeType===8&&C.parentNode===h)break;if(w===4)for(w=o.return;w!==null;){var a=w.tag;if((a===3||a===4)&&(a=w.stateNode.containerInfo,a===h||a.nodeType===8&&a.parentNode===h))return;w=w.return}for(;C!==null;){if(w=Au(C),w===null)return;if(a=w.tag,a===5||a===6){o=y=w;continue e}C=C.parentNode}}o=o.return}fI(function(){var D=y,j=mv(n),B=[];e:{var H=$I.get(e);if(H!==void 0){var X=bv,ie=e;switch(e){case"keypress":if(Yd(n)===0)break e;case"keydown":case"keyup":X=UN;break;case"focusin":ie="focus",X=Vm;break;case"focusout":ie="blur",X=Vm;break;case"beforeblur":case"afterblur":X=Vm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=jT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=IN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=qN;break;case BI:case FI:case NI:X=DN;break;case jI:X=HN;break;case"scroll":X=MN;break;case"wheel":X=XN;break;case"copy":case"cut":case"paste":X=LN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=UT}var Q=(t&4)!==0,ne=!Q&&e==="scroll",te=Q?H!==null?H+"Capture":null:H;Q=[];for(var K=D,se;K!==null;){se=K;var ve=se.stateNode;if(se.tag===5&&ve!==null&&(se=ve,te!==null&&(ve=h5(K,te),ve!=null&&Q.push(_5(K,ve,se)))),ne)break;K=K.return}0<Q.length&&(H=new X(H,ie,null,n,j),B.push({event:H,listeners:Q}))}}if(!(t&7)){e:{if(H=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",H&&n!==Xg&&(ie=n.relatedTarget||n.fromElement)&&(Au(ie)||ie[Rl]))break e;if((X||H)&&(H=j.window===j?j:(H=j.ownerDocument)?H.defaultView||H.parentWindow:window,X?(ie=n.relatedTarget||n.toElement,X=D,ie=ie?Au(ie):null,ie!==null&&(ne=Wu(ie),ie!==ne||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(X=null,ie=D),X!==ie)){if(Q=jT,ve="onMouseLeave",te="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(Q=UT,ve="onPointerLeave",te="onPointerEnter",K="pointer"),ne=X==null?H:b0(X),se=ie==null?H:b0(ie),H=new Q(ve,K+"leave",X,n,j),H.target=ne,H.relatedTarget=se,ve=null,Au(j)===D&&(Q=new Q(te,K+"enter",ie,n,j),Q.target=se,Q.relatedTarget=ne,ve=Q),ne=ve,X&&ie)t:{for(Q=X,te=ie,K=0,se=Q;se;se=f0(se))K++;for(se=0,ve=te;ve;ve=f0(ve))se++;for(;0<K-se;)Q=f0(Q),K--;for(;0<se-K;)te=f0(te),se--;for(;K--;){if(Q===te||te!==null&&Q===te.alternate)break t;Q=f0(Q),te=f0(te)}Q=null}else Q=null;X!==null&&QT(B,H,X,Q,!1),ie!==null&&ne!==null&&QT(B,ne,ie,Q,!0)}}e:{if(H=D?b0(D):window,X=H.nodeName&&H.nodeName.toLowerCase(),X==="select"||X==="input"&&H.type==="file")var le=rj;else if(qT(H))if(RI)le=aj;else{le=ij;var fe=nj}else(X=H.nodeName)&&X.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(le=oj);if(le&&(le=le(e,D))){OI(B,le,n,j);break e}fe&&fe(e,H,D),e==="focusout"&&(fe=H._wrapperState)&&fe.controlled&&H.type==="number"&&Gg(H,"number",H.value)}switch(fe=D?b0(D):window,e){case"focusin":(qT(fe)||fe.contentEditable==="true")&&(v0=fe,ry=D,Jh=null);break;case"focusout":Jh=ry=v0=null;break;case"mousedown":ny=!0;break;case"contextmenu":case"mouseup":case"dragend":ny=!1,YT(B,n,j);break;case"selectionchange":if(cj)break;case"keydown":case"keyup":YT(B,n,j)}var Te;if(Av)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else _0?CI(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(MI&&n.locale!=="ko"&&(_0||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&_0&&(Te=PI()):(X1=j,xv="value"in X1?X1.value:X1.textContent,_0=!0)),fe=fp(D,Ee),0<fe.length&&(Ee=new $T(Ee,e,null,n,j),B.push({event:Ee,listeners:fe}),Te?Ee.data=Te:(Te=II(n),Te!==null&&(Ee.data=Te)))),(Te=KN?JN(e,n):QN(e,n))&&(D=fp(D,"onBeforeInput"),0<D.length&&(j=new $T("onBeforeInput","beforeinput",null,n,j),B.push({event:j,listeners:D}),j.data=Te))}UI(B,t)})}function _5(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fp(e,t){for(var n=t+"Capture",o=[];e!==null;){var h=e,y=h.stateNode;h.tag===5&&y!==null&&(h=y,y=h5(e,n),y!=null&&o.unshift(_5(e,y,h)),y=h5(e,t),y!=null&&o.push(_5(e,y,h))),e=e.return}return o}function f0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function QT(e,t,n,o,h){for(var y=t._reactName,w=[];n!==null&&n!==o;){var C=n,a=C.alternate,D=C.stateNode;if(a!==null&&a===o)break;C.tag===5&&D!==null&&(C=D,h?(a=h5(n,y),a!=null&&w.unshift(_5(n,a,C))):h||(a=h5(n,y),a!=null&&w.push(_5(n,a,C)))),n=n.return}w.length!==0&&e.push({event:t,listeners:w})}var dj=/\r\n?/g,pj=/\u0000|\uFFFD/g;function eS(e){return(typeof e=="string"?e:""+e).replace(dj,`
`).replace(pj,"")}function Sd(e,t,n){if(t=eS(t),eS(e)!==t&&n)throw Error(Ht(425))}function dp(){}var iy=null,oy=null;function ay(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sy=typeof setTimeout=="function"?setTimeout:void 0,mj=typeof clearTimeout=="function"?clearTimeout:void 0,tS=typeof Promise=="function"?Promise:void 0,gj=typeof queueMicrotask=="function"?queueMicrotask:typeof tS<"u"?function(e){return tS.resolve(null).then(e).catch(yj)}:sy;function yj(e){setTimeout(function(){throw e})}function Km(e,t){var n=t,o=0;do{var h=n.nextSibling;if(e.removeChild(n),h&&h.nodeType===8)if(n=h.data,n==="/$"){if(o===0){e.removeChild(h),p5(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=h}while(n);p5(t)}function rc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var A2=Math.random().toString(36).slice(2),$s="__reactFiber$"+A2,v5="__reactProps$"+A2,Rl="__reactContainer$"+A2,ly="__reactEvents$"+A2,_j="__reactListeners$"+A2,vj="__reactHandles$"+A2;function Au(e){var t=e[$s];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rl]||n[$s]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rS(e);e!==null;){if(n=e[$s])return n;e=rS(e)}return t}e=n,n=e.parentNode}return null}function f6(e){return e=e[$s]||e[Rl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function b0(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ht(33))}function F9(e){return e[v5]||null}var cy=[],w0=-1;function fc(e){return{current:e}}function Qn(e){0>w0||(e.current=cy[w0],cy[w0]=null,w0--)}function qn(e,t){w0++,cy[w0]=e.current,e.current=t}var uc={},yo=fc(uc),Ho=fc(!1),Lu=uc;function G0(e,t){var n=e.type.contextTypes;if(!n)return uc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var h={},y;for(y in n)h[y]=t[y];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zo(e){return e=e.childContextTypes,e!=null}function pp(){Qn(Ho),Qn(yo)}function nS(e,t,n){if(yo.current!==uc)throw Error(Ht(168));qn(yo,t),qn(Ho,n)}function GI(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var h in o)if(!(h in t))throw Error(Ht(108,nN(e)||"Unknown",h));return hi({},n,o)}function mp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||uc,Lu=yo.current,qn(yo,e),qn(Ho,Ho.current),!0}function iS(e,t,n){var o=e.stateNode;if(!o)throw Error(Ht(169));n?(e=GI(e,t,Lu),o.__reactInternalMemoizedMergedChildContext=e,Qn(Ho),Qn(yo),qn(yo,e)):Qn(Ho),qn(Ho,n)}var bl=null,N9=!1,Jm=!1;function qI(e){bl===null?bl=[e]:bl.push(e)}function xj(e){N9=!0,qI(e)}function dc(){if(!Jm&&bl!==null){Jm=!0;var e=0,t=Mn;try{var n=bl;for(Mn=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}bl=null,N9=!1}catch(h){throw bl!==null&&(bl=bl.slice(e+1)),gI(gv,dc),h}finally{Mn=t,Jm=!1}}return null}var A0=[],T0=0,gp=null,yp=0,ka=[],La=0,zu=null,wl=1,Al="";function yu(e,t){A0[T0++]=yp,A0[T0++]=gp,gp=e,yp=t}function WI(e,t,n){ka[La++]=wl,ka[La++]=Al,ka[La++]=zu,zu=e;var o=wl;e=Al;var h=32-vs(o)-1;o&=~(1<<h),n+=1;var y=32-vs(t)+h;if(30<y){var w=h-h%5;y=(o&(1<<w)-1).toString(32),o>>=w,h-=w,wl=1<<32-vs(t)+h|n<<h|o,Al=y+e}else wl=1<<y|n<<h|o,Al=e}function Sv(e){e.return!==null&&(yu(e,1),WI(e,1,0))}function Ev(e){for(;e===gp;)gp=A0[--T0],A0[T0]=null,yp=A0[--T0],A0[T0]=null;for(;e===zu;)zu=ka[--La],ka[La]=null,Al=ka[--La],ka[La]=null,wl=ka[--La],ka[La]=null}var da=null,fa=null,ri=!1,ys=null;function HI(e,t){var n=Ba(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,da=e,fa=rc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,da=e,fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zu!==null?{id:wl,overflow:Al}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ba(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,da=e,fa=null,!0):!1;default:return!1}}function uy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hy(e){if(ri){var t=fa;if(t){var n=t;if(!oS(e,t)){if(uy(e))throw Error(Ht(418));t=rc(n.nextSibling);var o=da;t&&oS(e,t)?HI(o,n):(e.flags=e.flags&-4097|2,ri=!1,da=e)}}else{if(uy(e))throw Error(Ht(418));e.flags=e.flags&-4097|2,ri=!1,da=e}}}function aS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;da=e}function Ed(e){if(e!==da)return!1;if(!ri)return aS(e),ri=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ay(e.type,e.memoizedProps)),t&&(t=fa)){if(uy(e))throw ZI(),Error(Ht(418));for(;t;)HI(e,t),t=rc(t.nextSibling)}if(aS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fa=rc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fa=null}}else fa=da?rc(e.stateNode.nextSibling):null;return!0}function ZI(){for(var e=fa;e;)e=rc(e.nextSibling)}function q0(){fa=da=null,ri=!1}function Pv(e){ys===null?ys=[e]:ys.push(e)}var bj=Nl.ReactCurrentBatchConfig;function Mh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ht(309));var o=n.stateNode}if(!o)throw Error(Ht(147,e));var h=o,y=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===y?t.ref:(t=function(w){var C=h.refs;w===null?delete C[y]:C[y]=w},t._stringRef=y,t)}if(typeof e!="string")throw Error(Ht(284));if(!n._owner)throw Error(Ht(290,e))}return e}function Pd(e,t){throw e=Object.prototype.toString.call(t),Error(Ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sS(e){var t=e._init;return t(e._payload)}function XI(e){function t(te,K){if(e){var se=te.deletions;se===null?(te.deletions=[K],te.flags|=16):se.push(K)}}function n(te,K){if(!e)return null;for(;K!==null;)t(te,K),K=K.sibling;return null}function o(te,K){for(te=new Map;K!==null;)K.key!==null?te.set(K.key,K):te.set(K.index,K),K=K.sibling;return te}function h(te,K){return te=ac(te,K),te.index=0,te.sibling=null,te}function y(te,K,se){return te.index=se,e?(se=te.alternate,se!==null?(se=se.index,se<K?(te.flags|=2,K):se):(te.flags|=2,K)):(te.flags|=1048576,K)}function w(te){return e&&te.alternate===null&&(te.flags|=2),te}function C(te,K,se,ve){return K===null||K.tag!==6?(K=og(se,te.mode,ve),K.return=te,K):(K=h(K,se),K.return=te,K)}function a(te,K,se,ve){var le=se.type;return le===y0?j(te,K,se.props.children,ve,se.key):K!==null&&(K.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===V1&&sS(le)===K.type)?(ve=h(K,se.props),ve.ref=Mh(te,K,se),ve.return=te,ve):(ve=np(se.type,se.key,se.props,null,te.mode,ve),ve.ref=Mh(te,K,se),ve.return=te,ve)}function D(te,K,se,ve){return K===null||K.tag!==4||K.stateNode.containerInfo!==se.containerInfo||K.stateNode.implementation!==se.implementation?(K=ag(se,te.mode,ve),K.return=te,K):(K=h(K,se.children||[]),K.return=te,K)}function j(te,K,se,ve,le){return K===null||K.tag!==7?(K=Ru(se,te.mode,ve,le),K.return=te,K):(K=h(K,se),K.return=te,K)}function B(te,K,se){if(typeof K=="string"&&K!==""||typeof K=="number")return K=og(""+K,te.mode,se),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case gd:return se=np(K.type,K.key,K.props,null,te.mode,se),se.ref=Mh(te,null,K),se.return=te,se;case g0:return K=ag(K,te.mode,se),K.return=te,K;case V1:var ve=K._init;return B(te,ve(K._payload),se)}if(Gh(K)||Ah(K))return K=Ru(K,te.mode,se,null),K.return=te,K;Pd(te,K)}return null}function H(te,K,se,ve){var le=K!==null?K.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return le!==null?null:C(te,K,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case gd:return se.key===le?a(te,K,se,ve):null;case g0:return se.key===le?D(te,K,se,ve):null;case V1:return le=se._init,H(te,K,le(se._payload),ve)}if(Gh(se)||Ah(se))return le!==null?null:j(te,K,se,ve,null);Pd(te,se)}return null}function X(te,K,se,ve,le){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return te=te.get(se)||null,C(K,te,""+ve,le);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case gd:return te=te.get(ve.key===null?se:ve.key)||null,a(K,te,ve,le);case g0:return te=te.get(ve.key===null?se:ve.key)||null,D(K,te,ve,le);case V1:var fe=ve._init;return X(te,K,se,fe(ve._payload),le)}if(Gh(ve)||Ah(ve))return te=te.get(se)||null,j(K,te,ve,le,null);Pd(K,ve)}return null}function ie(te,K,se,ve){for(var le=null,fe=null,Te=K,Ee=K=0,Ze=null;Te!==null&&Ee<se.length;Ee++){Te.index>Ee?(Ze=Te,Te=null):Ze=Te.sibling;var st=H(te,Te,se[Ee],ve);if(st===null){Te===null&&(Te=Ze);break}e&&Te&&st.alternate===null&&t(te,Te),K=y(st,K,Ee),fe===null?le=st:fe.sibling=st,fe=st,Te=Ze}if(Ee===se.length)return n(te,Te),ri&&yu(te,Ee),le;if(Te===null){for(;Ee<se.length;Ee++)Te=B(te,se[Ee],ve),Te!==null&&(K=y(Te,K,Ee),fe===null?le=Te:fe.sibling=Te,fe=Te);return ri&&yu(te,Ee),le}for(Te=o(te,Te);Ee<se.length;Ee++)Ze=X(Te,te,Ee,se[Ee],ve),Ze!==null&&(e&&Ze.alternate!==null&&Te.delete(Ze.key===null?Ee:Ze.key),K=y(Ze,K,Ee),fe===null?le=Ze:fe.sibling=Ze,fe=Ze);return e&&Te.forEach(function(We){return t(te,We)}),ri&&yu(te,Ee),le}function Q(te,K,se,ve){var le=Ah(se);if(typeof le!="function")throw Error(Ht(150));if(se=le.call(se),se==null)throw Error(Ht(151));for(var fe=le=null,Te=K,Ee=K=0,Ze=null,st=se.next();Te!==null&&!st.done;Ee++,st=se.next()){Te.index>Ee?(Ze=Te,Te=null):Ze=Te.sibling;var We=H(te,Te,st.value,ve);if(We===null){Te===null&&(Te=Ze);break}e&&Te&&We.alternate===null&&t(te,Te),K=y(We,K,Ee),fe===null?le=We:fe.sibling=We,fe=We,Te=Ze}if(st.done)return n(te,Te),ri&&yu(te,Ee),le;if(Te===null){for(;!st.done;Ee++,st=se.next())st=B(te,st.value,ve),st!==null&&(K=y(st,K,Ee),fe===null?le=st:fe.sibling=st,fe=st);return ri&&yu(te,Ee),le}for(Te=o(te,Te);!st.done;Ee++,st=se.next())st=X(Te,te,Ee,st.value,ve),st!==null&&(e&&st.alternate!==null&&Te.delete(st.key===null?Ee:st.key),K=y(st,K,Ee),fe===null?le=st:fe.sibling=st,fe=st);return e&&Te.forEach(function(Xe){return t(te,Xe)}),ri&&yu(te,Ee),le}function ne(te,K,se,ve){if(typeof se=="object"&&se!==null&&se.type===y0&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case gd:e:{for(var le=se.key,fe=K;fe!==null;){if(fe.key===le){if(le=se.type,le===y0){if(fe.tag===7){n(te,fe.sibling),K=h(fe,se.props.children),K.return=te,te=K;break e}}else if(fe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===V1&&sS(le)===fe.type){n(te,fe.sibling),K=h(fe,se.props),K.ref=Mh(te,fe,se),K.return=te,te=K;break e}n(te,fe);break}else t(te,fe);fe=fe.sibling}se.type===y0?(K=Ru(se.props.children,te.mode,ve,se.key),K.return=te,te=K):(ve=np(se.type,se.key,se.props,null,te.mode,ve),ve.ref=Mh(te,K,se),ve.return=te,te=ve)}return w(te);case g0:e:{for(fe=se.key;K!==null;){if(K.key===fe)if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){n(te,K.sibling),K=h(K,se.children||[]),K.return=te,te=K;break e}else{n(te,K);break}else t(te,K);K=K.sibling}K=ag(se,te.mode,ve),K.return=te,te=K}return w(te);case V1:return fe=se._init,ne(te,K,fe(se._payload),ve)}if(Gh(se))return ie(te,K,se,ve);if(Ah(se))return Q(te,K,se,ve);Pd(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,K!==null&&K.tag===6?(n(te,K.sibling),K=h(K,se),K.return=te,te=K):(n(te,K),K=og(se,te.mode,ve),K.return=te,te=K),w(te)):n(te,K)}return ne}var W0=XI(!0),YI=XI(!1),_p=fc(null),vp=null,S0=null,Mv=null;function Cv(){Mv=S0=vp=null}function Iv(e){var t=_p.current;Qn(_p),e._currentValue=t}function fy(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function B0(e,t){vp=e,Mv=S0=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qo=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(Mv!==e)if(e={context:e,memoizedValue:t,next:null},S0===null){if(vp===null)throw Error(Ht(308));S0=e,vp.dependencies={lanes:0,firstContext:e}}else S0=S0.next=e;return t}var Tu=null;function Ov(e){Tu===null?Tu=[e]:Tu.push(e)}function KI(e,t,n,o){var h=t.interleaved;return h===null?(n.next=n,Ov(t)):(n.next=h.next,h.next=n),t.interleaved=n,Dl(e,o)}function Dl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var G1=!1;function Rv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nc(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,_n&2){var h=o.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),o.pending=t,Dl(e,n)}return h=o.interleaved,h===null?(t.next=t,Ov(o)):(t.next=h.next,h.next=t),o.interleaved=t,Dl(e,n)}function Kd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,yv(e,n)}}function lS(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var h=null,y=null;if(n=n.firstBaseUpdate,n!==null){do{var w={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};y===null?h=y=w:y=y.next=w,n=n.next}while(n!==null);y===null?h=y=t:y=y.next=t}else h=y=t;n={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xp(e,t,n,o){var h=e.updateQueue;G1=!1;var y=h.firstBaseUpdate,w=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var a=C,D=a.next;a.next=null,w===null?y=D:w.next=D,w=a;var j=e.alternate;j!==null&&(j=j.updateQueue,C=j.lastBaseUpdate,C!==w&&(C===null?j.firstBaseUpdate=D:C.next=D,j.lastBaseUpdate=a))}if(y!==null){var B=h.baseState;w=0,j=D=a=null,C=y;do{var H=C.lane,X=C.eventTime;if((o&H)===H){j!==null&&(j=j.next={eventTime:X,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ie=e,Q=C;switch(H=t,X=n,Q.tag){case 1:if(ie=Q.payload,typeof ie=="function"){B=ie.call(X,B,H);break e}B=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=Q.payload,H=typeof ie=="function"?ie.call(X,B,H):ie,H==null)break e;B=hi({},B,H);break e;case 2:G1=!0}}C.callback!==null&&C.lane!==0&&(e.flags|=64,H=h.effects,H===null?h.effects=[C]:H.push(C))}else X={eventTime:X,lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},j===null?(D=j=X,a=B):j=j.next=X,w|=H;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;H=C,C=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);if(j===null&&(a=B),h.baseState=a,h.firstBaseUpdate=D,h.lastBaseUpdate=j,t=h.shared.interleaved,t!==null){h=t;do w|=h.lane,h=h.next;while(h!==t)}else y===null&&(h.shared.lanes=0);Fu|=w,e.lanes=w,e.memoizedState=B}}function cS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],h=o.callback;if(h!==null){if(o.callback=null,o=n,typeof h!="function")throw Error(Ht(191,h));h.call(o)}}}var d6={},Gs=fc(d6),x5=fc(d6),b5=fc(d6);function Su(e){if(e===d6)throw Error(Ht(174));return e}function Dv(e,t){switch(qn(b5,t),qn(x5,e),qn(Gs,d6),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wg(t,e)}Qn(Gs),qn(Gs,t)}function H0(){Qn(Gs),Qn(x5),Qn(b5)}function QI(e){Su(b5.current);var t=Su(Gs.current),n=Wg(t,e.type);t!==n&&(qn(x5,e),qn(Gs,n))}function kv(e){x5.current===e&&(Qn(Gs),Qn(x5))}var ci=fc(0);function bp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qm=[];function Lv(){for(var e=0;e<Qm.length;e++)Qm[e]._workInProgressVersionPrimary=null;Qm.length=0}var Jd=Nl.ReactCurrentDispatcher,eg=Nl.ReactCurrentBatchConfig,Bu=0,ui=null,Ri=null,Ui=null,wp=!1,Qh=!1,w5=0,wj=0;function ho(){throw Error(Ht(321))}function zv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bs(e[n],t[n]))return!1;return!0}function Bv(e,t,n,o,h,y){if(Bu=y,ui=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jd.current=e===null||e.memoizedState===null?Ej:Pj,e=n(o,h),Qh){y=0;do{if(Qh=!1,w5=0,25<=y)throw Error(Ht(301));y+=1,Ui=Ri=null,t.updateQueue=null,Jd.current=Mj,e=n(o,h)}while(Qh)}if(Jd.current=Ap,t=Ri!==null&&Ri.next!==null,Bu=0,Ui=Ri=ui=null,wp=!1,t)throw Error(Ht(300));return e}function Fv(){var e=w5!==0;return w5=0,e}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?ui.memoizedState=Ui=e:Ui=Ui.next=e,Ui}function Ua(){if(Ri===null){var e=ui.alternate;e=e!==null?e.memoizedState:null}else e=Ri.next;var t=Ui===null?ui.memoizedState:Ui.next;if(t!==null)Ui=t,Ri=e;else{if(e===null)throw Error(Ht(310));Ri=e,e={memoizedState:Ri.memoizedState,baseState:Ri.baseState,baseQueue:Ri.baseQueue,queue:Ri.queue,next:null},Ui===null?ui.memoizedState=Ui=e:Ui=Ui.next=e}return Ui}function A5(e,t){return typeof t=="function"?t(e):t}function tg(e){var t=Ua(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var o=Ri,h=o.baseQueue,y=n.pending;if(y!==null){if(h!==null){var w=h.next;h.next=y.next,y.next=w}o.baseQueue=h=y,n.pending=null}if(h!==null){y=h.next,o=o.baseState;var C=w=null,a=null,D=y;do{var j=D.lane;if((Bu&j)===j)a!==null&&(a=a.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),o=D.hasEagerState?D.eagerState:e(o,D.action);else{var B={lane:j,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};a===null?(C=a=B,w=o):a=a.next=B,ui.lanes|=j,Fu|=j}D=D.next}while(D!==null&&D!==y);a===null?w=o:a.next=C,bs(o,t.memoizedState)||(qo=!0),t.memoizedState=o,t.baseState=w,t.baseQueue=a,n.lastRenderedState=o}if(e=n.interleaved,e!==null){h=e;do y=h.lane,ui.lanes|=y,Fu|=y,h=h.next;while(h!==e)}else h===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rg(e){var t=Ua(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var o=n.dispatch,h=n.pending,y=t.memoizedState;if(h!==null){n.pending=null;var w=h=h.next;do y=e(y,w.action),w=w.next;while(w!==h);bs(y,t.memoizedState)||(qo=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),n.lastRenderedState=y}return[y,o]}function eO(){}function tO(e,t){var n=ui,o=Ua(),h=t(),y=!bs(o.memoizedState,h);if(y&&(o.memoizedState=h,qo=!0),o=o.queue,Nv(iO.bind(null,n,o,e),[e]),o.getSnapshot!==t||y||Ui!==null&&Ui.memoizedState.tag&1){if(n.flags|=2048,T5(9,nO.bind(null,n,o,h,t),void 0,null),Gi===null)throw Error(Ht(349));Bu&30||rO(n,t,h)}return h}function rO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nO(e,t,n,o){t.value=n,t.getSnapshot=o,oO(t)&&aO(e)}function iO(e,t,n){return n(function(){oO(t)&&aO(e)})}function oO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bs(e,n)}catch{return!0}}function aO(e){var t=Dl(e,1);t!==null&&xs(t,e,1,-1)}function uS(e){var t=js();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:A5,lastRenderedState:e},t.queue=e,e=e.dispatch=Sj.bind(null,ui,e),[t.memoizedState,e]}function T5(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function sO(){return Ua().memoizedState}function Qd(e,t,n,o){var h=js();ui.flags|=e,h.memoizedState=T5(1|t,n,void 0,o===void 0?null:o)}function j9(e,t,n,o){var h=Ua();o=o===void 0?null:o;var y=void 0;if(Ri!==null){var w=Ri.memoizedState;if(y=w.destroy,o!==null&&zv(o,w.deps)){h.memoizedState=T5(t,n,y,o);return}}ui.flags|=e,h.memoizedState=T5(1|t,n,y,o)}function hS(e,t){return Qd(8390656,8,e,t)}function Nv(e,t){return j9(2048,8,e,t)}function lO(e,t){return j9(4,2,e,t)}function cO(e,t){return j9(4,4,e,t)}function uO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hO(e,t,n){return n=n!=null?n.concat([e]):null,j9(4,4,uO.bind(null,t,e),n)}function jv(){}function fO(e,t){var n=Ua();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&zv(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function dO(e,t){var n=Ua();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&zv(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function pO(e,t,n){return Bu&21?(bs(n,t)||(n=vI(),ui.lanes|=n,Fu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qo=!0),e.memoizedState=n)}function Aj(e,t){var n=Mn;Mn=n!==0&&4>n?n:4,e(!0);var o=eg.transition;eg.transition={};try{e(!1),t()}finally{Mn=n,eg.transition=o}}function mO(){return Ua().memoizedState}function Tj(e,t,n){var o=oc(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},gO(e))yO(t,n);else if(n=KI(e,t,n,o),n!==null){var h=Do();xs(n,e,o,h),_O(n,t,o)}}function Sj(e,t,n){var o=oc(e),h={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(gO(e))yO(t,h);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var w=t.lastRenderedState,C=y(w,n);if(h.hasEagerState=!0,h.eagerState=C,bs(C,w)){var a=t.interleaved;a===null?(h.next=h,Ov(t)):(h.next=a.next,a.next=h),t.interleaved=h;return}}catch{}finally{}n=KI(e,t,h,o),n!==null&&(h=Do(),xs(n,e,o,h),_O(n,t,o))}}function gO(e){var t=e.alternate;return e===ui||t!==null&&t===ui}function yO(e,t){Qh=wp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _O(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,yv(e,n)}}var Ap={readContext:$a,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Ej={readContext:$a,useCallback:function(e,t){return js().memoizedState=[e,t===void 0?null:t],e},useContext:$a,useEffect:hS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qd(4194308,4,uO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qd(4,2,e,t)},useMemo:function(e,t){var n=js();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=js();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Tj.bind(null,ui,e),[o.memoizedState,e]},useRef:function(e){var t=js();return e={current:e},t.memoizedState=e},useState:uS,useDebugValue:jv,useDeferredValue:function(e){return js().memoizedState=e},useTransition:function(){var e=uS(!1),t=e[0];return e=Aj.bind(null,e[1]),js().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ui,h=js();if(ri){if(n===void 0)throw Error(Ht(407));n=n()}else{if(n=t(),Gi===null)throw Error(Ht(349));Bu&30||rO(o,t,n)}h.memoizedState=n;var y={value:n,getSnapshot:t};return h.queue=y,hS(iO.bind(null,o,y,e),[e]),o.flags|=2048,T5(9,nO.bind(null,o,y,n,t),void 0,null),n},useId:function(){var e=js(),t=Gi.identifierPrefix;if(ri){var n=Al,o=wl;n=(o&~(1<<32-vs(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=w5++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pj={readContext:$a,useCallback:fO,useContext:$a,useEffect:Nv,useImperativeHandle:hO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:dO,useReducer:tg,useRef:sO,useState:function(){return tg(A5)},useDebugValue:jv,useDeferredValue:function(e){var t=Ua();return pO(t,Ri.memoizedState,e)},useTransition:function(){var e=tg(A5)[0],t=Ua().memoizedState;return[e,t]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1},Mj={readContext:$a,useCallback:fO,useContext:$a,useEffect:Nv,useImperativeHandle:hO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:dO,useReducer:rg,useRef:sO,useState:function(){return rg(A5)},useDebugValue:jv,useDeferredValue:function(e){var t=Ua();return Ri===null?t.memoizedState=e:pO(t,Ri.memoizedState,e)},useTransition:function(){var e=rg(A5)[0],t=Ua().memoizedState;return[e,t]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1};function ps(e,t){if(e&&e.defaultProps){t=hi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function dy(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:hi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $9={isMounted:function(e){return(e=e._reactInternals)?Wu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Do(),h=oc(e),y=El(o,h);y.payload=t,n!=null&&(y.callback=n),t=nc(e,y,h),t!==null&&(xs(t,e,h,o),Kd(t,e,h))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Do(),h=oc(e),y=El(o,h);y.tag=1,y.payload=t,n!=null&&(y.callback=n),t=nc(e,y,h),t!==null&&(xs(t,e,h,o),Kd(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Do(),o=oc(e),h=El(n,o);h.tag=2,t!=null&&(h.callback=t),t=nc(e,h,o),t!==null&&(xs(t,e,o,n),Kd(t,e,o))}};function fS(e,t,n,o,h,y,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,y,w):t.prototype&&t.prototype.isPureReactComponent?!g5(n,o)||!g5(h,y):!0}function vO(e,t,n){var o=!1,h=uc,y=t.contextType;return typeof y=="object"&&y!==null?y=$a(y):(h=Zo(t)?Lu:yo.current,o=t.contextTypes,y=(o=o!=null)?G0(e,h):uc),t=new t(n,y),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$9,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=y),t}function dS(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&$9.enqueueReplaceState(t,t.state,null)}function py(e,t,n,o){var h=e.stateNode;h.props=n,h.state=e.memoizedState,h.refs={},Rv(e);var y=t.contextType;typeof y=="object"&&y!==null?h.context=$a(y):(y=Zo(t)?Lu:yo.current,h.context=G0(e,y)),h.state=e.memoizedState,y=t.getDerivedStateFromProps,typeof y=="function"&&(dy(e,t,y,n),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&$9.enqueueReplaceState(h,h.state,null),xp(e,n,h,o),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Z0(e,t){try{var n="",o=t;do n+=rN(o),o=o.return;while(o);var h=n}catch(y){h=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:t,stack:h,digest:null}}function ng(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function my(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Cj=typeof WeakMap=="function"?WeakMap:Map;function xO(e,t,n){n=El(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Sp||(Sp=!0,Sy=o),my(e,t)},n}function bO(e,t,n){n=El(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var h=t.value;n.payload=function(){return o(h)},n.callback=function(){my(e,t)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(n.callback=function(){my(e,t),typeof o!="function"&&(ic===null?ic=new Set([this]):ic.add(this));var w=t.stack;this.componentDidCatch(t.value,{componentStack:w!==null?w:""})}),n}function pS(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Cj;var h=new Set;o.set(t,h)}else h=o.get(t),h===void 0&&(h=new Set,o.set(t,h));h.has(n)||(h.add(n),e=Vj.bind(null,e,t,n),t.then(e,e))}function mS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gS(e,t,n,o,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=El(-1,1),t.tag=2,nc(n,t,1))),n.lanes|=1),e)}var Ij=Nl.ReactCurrentOwner,qo=!1;function Co(e,t,n,o){t.child=e===null?YI(t,null,n,o):W0(t,e.child,n,o)}function yS(e,t,n,o,h){n=n.render;var y=t.ref;return B0(t,h),o=Bv(e,t,n,o,y,h),n=Fv(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,kl(e,t,h)):(ri&&n&&Sv(t),t.flags|=1,Co(e,t,o,h),t.child)}function _S(e,t,n,o,h){if(e===null){var y=n.type;return typeof y=="function"&&!Zv(y)&&y.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=y,wO(e,t,y,o,h)):(e=np(n.type,null,o,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,!(e.lanes&h)){var w=y.memoizedProps;if(n=n.compare,n=n!==null?n:g5,n(w,o)&&e.ref===t.ref)return kl(e,t,h)}return t.flags|=1,e=ac(y,o),e.ref=t.ref,e.return=t,t.child=e}function wO(e,t,n,o,h){if(e!==null){var y=e.memoizedProps;if(g5(y,o)&&e.ref===t.ref)if(qo=!1,t.pendingProps=o=y,(e.lanes&h)!==0)e.flags&131072&&(qo=!0);else return t.lanes=e.lanes,kl(e,t,h)}return gy(e,t,n,o,h)}function AO(e,t,n){var o=t.pendingProps,h=o.children,y=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qn(P0,ca),ca|=n;else{if(!(n&1073741824))return e=y!==null?y.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qn(P0,ca),ca|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=y!==null?y.baseLanes:n,qn(P0,ca),ca|=o}else y!==null?(o=y.baseLanes|n,t.memoizedState=null):o=n,qn(P0,ca),ca|=o;return Co(e,t,h,n),t.child}function TO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gy(e,t,n,o,h){var y=Zo(n)?Lu:yo.current;return y=G0(t,y),B0(t,h),n=Bv(e,t,n,o,y,h),o=Fv(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,kl(e,t,h)):(ri&&o&&Sv(t),t.flags|=1,Co(e,t,n,h),t.child)}function vS(e,t,n,o,h){if(Zo(n)){var y=!0;mp(t)}else y=!1;if(B0(t,h),t.stateNode===null)ep(e,t),vO(t,n,o),py(t,n,o,h),o=!0;else if(e===null){var w=t.stateNode,C=t.memoizedProps;w.props=C;var a=w.context,D=n.contextType;typeof D=="object"&&D!==null?D=$a(D):(D=Zo(n)?Lu:yo.current,D=G0(t,D));var j=n.getDerivedStateFromProps,B=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function";B||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==o||a!==D)&&dS(t,w,o,D),G1=!1;var H=t.memoizedState;w.state=H,xp(t,o,w,h),a=t.memoizedState,C!==o||H!==a||Ho.current||G1?(typeof j=="function"&&(dy(t,n,j,o),a=t.memoizedState),(C=G1||fS(t,n,C,o,H,a,D))?(B||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(t.flags|=4194308)):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=a),w.props=o,w.state=a,w.context=D,o=C):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{w=t.stateNode,JI(e,t),C=t.memoizedProps,D=t.type===t.elementType?C:ps(t.type,C),w.props=D,B=t.pendingProps,H=w.context,a=n.contextType,typeof a=="object"&&a!==null?a=$a(a):(a=Zo(n)?Lu:yo.current,a=G0(t,a));var X=n.getDerivedStateFromProps;(j=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==B||H!==a)&&dS(t,w,o,a),G1=!1,H=t.memoizedState,w.state=H,xp(t,o,w,h);var ie=t.memoizedState;C!==B||H!==ie||Ho.current||G1?(typeof X=="function"&&(dy(t,n,X,o),ie=t.memoizedState),(D=G1||fS(t,n,D,o,H,ie,a)||!1)?(j||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(o,ie,a),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(o,ie,a)),typeof w.componentDidUpdate=="function"&&(t.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=ie),w.props=o,w.state=ie,w.context=a,o=D):(typeof w.componentDidUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),o=!1)}return yy(e,t,n,o,y,h)}function yy(e,t,n,o,h,y){TO(e,t);var w=(t.flags&128)!==0;if(!o&&!w)return h&&iS(t,n,!1),kl(e,t,y);o=t.stateNode,Ij.current=t;var C=w&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&w?(t.child=W0(t,e.child,null,y),t.child=W0(t,null,C,y)):Co(e,t,C,y),t.memoizedState=o.state,h&&iS(t,n,!0),t.child}function SO(e){var t=e.stateNode;t.pendingContext?nS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nS(e,t.context,!1),Dv(e,t.containerInfo)}function xS(e,t,n,o,h){return q0(),Pv(h),t.flags|=256,Co(e,t,n,o),t.child}var _y={dehydrated:null,treeContext:null,retryLane:0};function vy(e){return{baseLanes:e,cachePool:null,transitions:null}}function EO(e,t,n){var o=t.pendingProps,h=ci.current,y=!1,w=(t.flags&128)!==0,C;if((C=w)||(C=e!==null&&e.memoizedState===null?!1:(h&2)!==0),C?(y=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),qn(ci,h&1),e===null)return hy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(w=o.children,e=o.fallback,y?(o=t.mode,y=t.child,w={mode:"hidden",children:w},!(o&1)&&y!==null?(y.childLanes=0,y.pendingProps=w):y=G9(w,o,0,null),e=Ru(e,o,n,null),y.return=t,e.return=t,y.sibling=e,t.child=y,t.child.memoizedState=vy(n),t.memoizedState=_y,e):$v(t,w));if(h=e.memoizedState,h!==null&&(C=h.dehydrated,C!==null))return Oj(e,t,w,o,C,h,n);if(y){y=o.fallback,w=t.mode,h=e.child,C=h.sibling;var a={mode:"hidden",children:o.children};return!(w&1)&&t.child!==h?(o=t.child,o.childLanes=0,o.pendingProps=a,t.deletions=null):(o=ac(h,a),o.subtreeFlags=h.subtreeFlags&14680064),C!==null?y=ac(C,y):(y=Ru(y,w,n,null),y.flags|=2),y.return=t,o.return=t,o.sibling=y,t.child=o,o=y,y=t.child,w=e.child.memoizedState,w=w===null?vy(n):{baseLanes:w.baseLanes|n,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=e.childLanes&~n,t.memoizedState=_y,o}return y=e.child,e=y.sibling,o=ac(y,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function $v(e,t){return t=G9({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Md(e,t,n,o){return o!==null&&Pv(o),W0(t,e.child,null,n),e=$v(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oj(e,t,n,o,h,y,w){if(n)return t.flags&256?(t.flags&=-257,o=ng(Error(Ht(422))),Md(e,t,w,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(y=o.fallback,h=t.mode,o=G9({mode:"visible",children:o.children},h,0,null),y=Ru(y,h,w,null),y.flags|=2,o.return=t,y.return=t,o.sibling=y,t.child=o,t.mode&1&&W0(t,e.child,null,w),t.child.memoizedState=vy(w),t.memoizedState=_y,y);if(!(t.mode&1))return Md(e,t,w,null);if(h.data==="$!"){if(o=h.nextSibling&&h.nextSibling.dataset,o)var C=o.dgst;return o=C,y=Error(Ht(419)),o=ng(y,o,void 0),Md(e,t,w,o)}if(C=(w&e.childLanes)!==0,qo||C){if(o=Gi,o!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(o.suspendedLanes|w)?0:h,h!==0&&h!==y.retryLane&&(y.retryLane=h,Dl(e,h),xs(o,e,h,-1))}return Hv(),o=ng(Error(Ht(421))),Md(e,t,w,o)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=Gj.bind(null,e),h._reactRetry=t,null):(e=y.treeContext,fa=rc(h.nextSibling),da=t,ri=!0,ys=null,e!==null&&(ka[La++]=wl,ka[La++]=Al,ka[La++]=zu,wl=e.id,Al=e.overflow,zu=t),t=$v(t,o.children),t.flags|=4096,t)}function bS(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),fy(e.return,t,n)}function ig(e,t,n,o,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=n,y.tailMode=h)}function PO(e,t,n){var o=t.pendingProps,h=o.revealOrder,y=o.tail;if(Co(e,t,o.children,n),o=ci.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bS(e,n,t);else if(e.tag===19)bS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(qn(ci,o),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(n=t.child,h=null;n!==null;)e=n.alternate,e!==null&&bp(e)===null&&(h=n),n=n.sibling;n=h,n===null?(h=t.child,t.child=null):(h=n.sibling,n.sibling=null),ig(t,!1,h,n,y);break;case"backwards":for(n=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&bp(e)===null){t.child=h;break}e=h.sibling,h.sibling=n,n=h,h=e}ig(t,!0,n,null,y);break;case"together":ig(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ep(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ht(153));if(t.child!==null){for(e=t.child,n=ac(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ac(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rj(e,t,n){switch(t.tag){case 3:SO(t),q0();break;case 5:QI(t);break;case 1:Zo(t.type)&&mp(t);break;case 4:Dv(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,h=t.memoizedProps.value;qn(_p,o._currentValue),o._currentValue=h;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(qn(ci,ci.current&1),t.flags|=128,null):n&t.child.childLanes?EO(e,t,n):(qn(ci,ci.current&1),e=kl(e,t,n),e!==null?e.sibling:null);qn(ci,ci.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return PO(e,t,n);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qn(ci,ci.current),o)break;return null;case 22:case 23:return t.lanes=0,AO(e,t,n)}return kl(e,t,n)}var MO,xy,CO,IO;MO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xy=function(){};CO=function(e,t,n,o){var h=e.memoizedProps;if(h!==o){e=t.stateNode,Su(Gs.current);var y=null;switch(n){case"input":h=Ug(e,h),o=Ug(e,o),y=[];break;case"select":h=hi({},h,{value:void 0}),o=hi({},o,{value:void 0}),y=[];break;case"textarea":h=qg(e,h),o=qg(e,o),y=[];break;default:typeof h.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=dp)}Hg(n,o);var w;n=null;for(D in h)if(!o.hasOwnProperty(D)&&h.hasOwnProperty(D)&&h[D]!=null)if(D==="style"){var C=h[D];for(w in C)C.hasOwnProperty(w)&&(n||(n={}),n[w]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(c5.hasOwnProperty(D)?y||(y=[]):(y=y||[]).push(D,null));for(D in o){var a=o[D];if(C=h!=null?h[D]:void 0,o.hasOwnProperty(D)&&a!==C&&(a!=null||C!=null))if(D==="style")if(C){for(w in C)!C.hasOwnProperty(w)||a&&a.hasOwnProperty(w)||(n||(n={}),n[w]="");for(w in a)a.hasOwnProperty(w)&&C[w]!==a[w]&&(n||(n={}),n[w]=a[w])}else n||(y||(y=[]),y.push(D,n)),n=a;else D==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,C=C?C.__html:void 0,a!=null&&C!==a&&(y=y||[]).push(D,a)):D==="children"?typeof a!="string"&&typeof a!="number"||(y=y||[]).push(D,""+a):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(c5.hasOwnProperty(D)?(a!=null&&D==="onScroll"&&Yn("scroll",e),y||C===a||(y=[])):(y=y||[]).push(D,a))}n&&(y=y||[]).push("style",n);var D=y;(t.updateQueue=D)&&(t.flags|=4)}};IO=function(e,t,n,o){n!==o&&(t.flags|=4)};function Ch(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function fo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var h=e.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags&14680064,o|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Dj(e,t,n){var o=t.pendingProps;switch(Ev(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fo(t),null;case 1:return Zo(t.type)&&pp(),fo(t),null;case 3:return o=t.stateNode,H0(),Qn(Ho),Qn(yo),Lv(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ed(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ys!==null&&(My(ys),ys=null))),xy(e,t),fo(t),null;case 5:kv(t);var h=Su(b5.current);if(n=t.type,e!==null&&t.stateNode!=null)CO(e,t,n,o,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ht(166));return fo(t),null}if(e=Su(Gs.current),Ed(t)){o=t.stateNode,n=t.type;var y=t.memoizedProps;switch(o[$s]=t,o[v5]=y,e=(t.mode&1)!==0,n){case"dialog":Yn("cancel",o),Yn("close",o);break;case"iframe":case"object":case"embed":Yn("load",o);break;case"video":case"audio":for(h=0;h<Wh.length;h++)Yn(Wh[h],o);break;case"source":Yn("error",o);break;case"img":case"image":case"link":Yn("error",o),Yn("load",o);break;case"details":Yn("toggle",o);break;case"input":IT(o,y),Yn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!y.multiple},Yn("invalid",o);break;case"textarea":RT(o,y),Yn("invalid",o)}Hg(n,y),h=null;for(var w in y)if(y.hasOwnProperty(w)){var C=y[w];w==="children"?typeof C=="string"?o.textContent!==C&&(y.suppressHydrationWarning!==!0&&Sd(o.textContent,C,e),h=["children",C]):typeof C=="number"&&o.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&Sd(o.textContent,C,e),h=["children",""+C]):c5.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Yn("scroll",o)}switch(n){case"input":yd(o),OT(o,y,!0);break;case"textarea":yd(o),DT(o);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(o.onclick=dp)}o=h,t.updateQueue=o,o!==null&&(t.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=w.createElement(n,{is:o.is}):(e=w.createElement(n),n==="select"&&(w=e,o.multiple?w.multiple=!0:o.size&&(w.size=o.size))):e=w.createElementNS(e,n),e[$s]=t,e[v5]=o,MO(e,t,!1,!1),t.stateNode=e;e:{switch(w=Zg(n,o),n){case"dialog":Yn("cancel",e),Yn("close",e),h=o;break;case"iframe":case"object":case"embed":Yn("load",e),h=o;break;case"video":case"audio":for(h=0;h<Wh.length;h++)Yn(Wh[h],e);h=o;break;case"source":Yn("error",e),h=o;break;case"img":case"image":case"link":Yn("error",e),Yn("load",e),h=o;break;case"details":Yn("toggle",e),h=o;break;case"input":IT(e,o),h=Ug(e,o),Yn("invalid",e);break;case"option":h=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},h=hi({},o,{value:void 0}),Yn("invalid",e);break;case"textarea":RT(e,o),h=qg(e,o),Yn("invalid",e);break;default:h=o}Hg(n,h),C=h;for(y in C)if(C.hasOwnProperty(y)){var a=C[y];y==="style"?sI(e,a):y==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&oI(e,a)):y==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&u5(e,a):typeof a=="number"&&u5(e,""+a):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(c5.hasOwnProperty(y)?a!=null&&y==="onScroll"&&Yn("scroll",e):a!=null&&hv(e,y,a,w))}switch(n){case"input":yd(e),OT(e,o,!1);break;case"textarea":yd(e),DT(e);break;case"option":o.value!=null&&e.setAttribute("value",""+cc(o.value));break;case"select":e.multiple=!!o.multiple,y=o.value,y!=null?D0(e,!!o.multiple,y,!1):o.defaultValue!=null&&D0(e,!!o.multiple,o.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=dp)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fo(t),null;case 6:if(e&&t.stateNode!=null)IO(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ht(166));if(n=Su(b5.current),Su(Gs.current),Ed(t)){if(o=t.stateNode,n=t.memoizedProps,o[$s]=t,(y=o.nodeValue!==n)&&(e=da,e!==null))switch(e.tag){case 3:Sd(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sd(o.nodeValue,n,(e.mode&1)!==0)}y&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[$s]=t,t.stateNode=o}return fo(t),null;case 13:if(Qn(ci),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ri&&fa!==null&&t.mode&1&&!(t.flags&128))ZI(),q0(),t.flags|=98560,y=!1;else if(y=Ed(t),o!==null&&o.dehydrated!==null){if(e===null){if(!y)throw Error(Ht(318));if(y=t.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(Ht(317));y[$s]=t}else q0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fo(t),y=!1}else ys!==null&&(My(ys),ys=null),y=!0;if(!y)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||ci.current&1?Di===0&&(Di=3):Hv())),t.updateQueue!==null&&(t.flags|=4),fo(t),null);case 4:return H0(),xy(e,t),e===null&&y5(t.stateNode.containerInfo),fo(t),null;case 10:return Iv(t.type._context),fo(t),null;case 17:return Zo(t.type)&&pp(),fo(t),null;case 19:if(Qn(ci),y=t.memoizedState,y===null)return fo(t),null;if(o=(t.flags&128)!==0,w=y.rendering,w===null)if(o)Ch(y,!1);else{if(Di!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(w=bp(e),w!==null){for(t.flags|=128,Ch(y,!1),o=w.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)y=n,e=o,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,e=w.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return qn(ci,ci.current&1|2),t.child}e=e.sibling}y.tail!==null&&bi()>X0&&(t.flags|=128,o=!0,Ch(y,!1),t.lanes=4194304)}else{if(!o)if(e=bp(w),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ch(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!ri)return fo(t),null}else 2*bi()-y.renderingStartTime>X0&&n!==1073741824&&(t.flags|=128,o=!0,Ch(y,!1),t.lanes=4194304);y.isBackwards?(w.sibling=t.child,t.child=w):(n=y.last,n!==null?n.sibling=w:t.child=w,y.last=w)}return y.tail!==null?(t=y.tail,y.rendering=t,y.tail=t.sibling,y.renderingStartTime=bi(),t.sibling=null,n=ci.current,qn(ci,o?n&1|2:n&1),t):(fo(t),null);case 22:case 23:return Wv(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?ca&1073741824&&(fo(t),t.subtreeFlags&6&&(t.flags|=8192)):fo(t),null;case 24:return null;case 25:return null}throw Error(Ht(156,t.tag))}function kj(e,t){switch(Ev(t),t.tag){case 1:return Zo(t.type)&&pp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return H0(),Qn(Ho),Qn(yo),Lv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kv(t),null;case 13:if(Qn(ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ht(340));q0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qn(ci),null;case 4:return H0(),null;case 10:return Iv(t.type._context),null;case 22:case 23:return Wv(),null;case 24:return null;default:return null}}var Cd=!1,mo=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,fr=null;function E0(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){mi(e,t,o)}else n.current=null}function by(e,t,n){try{n()}catch(o){mi(e,t,o)}}var wS=!1;function zj(e,t){if(iy=up,e=LI(),Tv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var h=o.anchorOffset,y=o.focusNode;o=o.focusOffset;try{n.nodeType,y.nodeType}catch{n=null;break e}var w=0,C=-1,a=-1,D=0,j=0,B=e,H=null;t:for(;;){for(var X;B!==n||h!==0&&B.nodeType!==3||(C=w+h),B!==y||o!==0&&B.nodeType!==3||(a=w+o),B.nodeType===3&&(w+=B.nodeValue.length),(X=B.firstChild)!==null;)H=B,B=X;for(;;){if(B===e)break t;if(H===n&&++D===h&&(C=w),H===y&&++j===o&&(a=w),(X=B.nextSibling)!==null)break;B=H,H=B.parentNode}B=X}n=C===-1||a===-1?null:{start:C,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(oy={focusedElem:e,selectionRange:n},up=!1,fr=t;fr!==null;)if(t=fr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fr=e;else for(;fr!==null;){t=fr;try{var ie=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var Q=ie.memoizedProps,ne=ie.memoizedState,te=t.stateNode,K=te.getSnapshotBeforeUpdate(t.elementType===t.type?Q:ps(t.type,Q),ne);te.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var se=t.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ht(163))}}catch(ve){mi(t,t.return,ve)}if(e=t.sibling,e!==null){e.return=t.return,fr=e;break}fr=t.return}return ie=wS,wS=!1,ie}function e5(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&e)===e){var y=h.destroy;h.destroy=void 0,y!==void 0&&by(t,n,y)}h=h.next}while(h!==o)}}function U9(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function wy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function OO(e){var t=e.alternate;t!==null&&(e.alternate=null,OO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$s],delete t[v5],delete t[ly],delete t[_j],delete t[vj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function RO(e){return e.tag===5||e.tag===3||e.tag===4}function AS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||RO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ay(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dp));else if(o!==4&&(e=e.child,e!==null))for(Ay(e,t,n),e=e.sibling;e!==null;)Ay(e,t,n),e=e.sibling}function Ty(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Ty(e,t,n),e=e.sibling;e!==null;)Ty(e,t,n),e=e.sibling}var to=null,ms=!1;function U1(e,t,n){for(n=n.child;n!==null;)DO(e,t,n),n=n.sibling}function DO(e,t,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(k9,n)}catch{}switch(n.tag){case 5:mo||E0(n,t);case 6:var o=to,h=ms;to=null,U1(e,t,n),to=o,ms=h,to!==null&&(ms?(e=to,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):to.removeChild(n.stateNode));break;case 18:to!==null&&(ms?(e=to,n=n.stateNode,e.nodeType===8?Km(e.parentNode,n):e.nodeType===1&&Km(e,n),p5(e)):Km(to,n.stateNode));break;case 4:o=to,h=ms,to=n.stateNode.containerInfo,ms=!0,U1(e,t,n),to=o,ms=h;break;case 0:case 11:case 14:case 15:if(!mo&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){h=o=o.next;do{var y=h,w=y.destroy;y=y.tag,w!==void 0&&(y&2||y&4)&&by(n,t,w),h=h.next}while(h!==o)}U1(e,t,n);break;case 1:if(!mo&&(E0(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(C){mi(n,t,C)}U1(e,t,n);break;case 21:U1(e,t,n);break;case 22:n.mode&1?(mo=(o=mo)||n.memoizedState!==null,U1(e,t,n),mo=o):U1(e,t,n);break;default:U1(e,t,n)}}function TS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lj),t.forEach(function(o){var h=qj.bind(null,e,o);n.has(o)||(n.add(o),o.then(h,h))})}}function hs(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var h=n[o];try{var y=e,w=t,C=w;e:for(;C!==null;){switch(C.tag){case 5:to=C.stateNode,ms=!1;break e;case 3:to=C.stateNode.containerInfo,ms=!0;break e;case 4:to=C.stateNode.containerInfo,ms=!0;break e}C=C.return}if(to===null)throw Error(Ht(160));DO(y,w,h),to=null,ms=!1;var a=h.alternate;a!==null&&(a.return=null),h.return=null}catch(D){mi(h,t,D)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kO(t,e),t=t.sibling}function kO(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),Ns(e),o&4){try{e5(3,e,e.return),U9(3,e)}catch(Q){mi(e,e.return,Q)}try{e5(5,e,e.return)}catch(Q){mi(e,e.return,Q)}}break;case 1:hs(t,e),Ns(e),o&512&&n!==null&&E0(n,n.return);break;case 5:if(hs(t,e),Ns(e),o&512&&n!==null&&E0(n,n.return),e.flags&32){var h=e.stateNode;try{u5(h,"")}catch(Q){mi(e,e.return,Q)}}if(o&4&&(h=e.stateNode,h!=null)){var y=e.memoizedProps,w=n!==null?n.memoizedProps:y,C=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&rI(h,y),Zg(C,w);var D=Zg(C,y);for(w=0;w<a.length;w+=2){var j=a[w],B=a[w+1];j==="style"?sI(h,B):j==="dangerouslySetInnerHTML"?oI(h,B):j==="children"?u5(h,B):hv(h,j,B,D)}switch(C){case"input":Vg(h,y);break;case"textarea":nI(h,y);break;case"select":var H=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!y.multiple;var X=y.value;X!=null?D0(h,!!y.multiple,X,!1):H!==!!y.multiple&&(y.defaultValue!=null?D0(h,!!y.multiple,y.defaultValue,!0):D0(h,!!y.multiple,y.multiple?[]:"",!1))}h[v5]=y}catch(Q){mi(e,e.return,Q)}}break;case 6:if(hs(t,e),Ns(e),o&4){if(e.stateNode===null)throw Error(Ht(162));h=e.stateNode,y=e.memoizedProps;try{h.nodeValue=y}catch(Q){mi(e,e.return,Q)}}break;case 3:if(hs(t,e),Ns(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{p5(t.containerInfo)}catch(Q){mi(e,e.return,Q)}break;case 4:hs(t,e),Ns(e);break;case 13:hs(t,e),Ns(e),h=e.child,h.flags&8192&&(y=h.memoizedState!==null,h.stateNode.isHidden=y,!y||h.alternate!==null&&h.alternate.memoizedState!==null||(Gv=bi())),o&4&&TS(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(mo=(D=mo)||j,hs(t,e),mo=D):hs(t,e),Ns(e),o&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!j&&e.mode&1)for(fr=e,j=e.child;j!==null;){for(B=fr=j;fr!==null;){switch(H=fr,X=H.child,H.tag){case 0:case 11:case 14:case 15:e5(4,H,H.return);break;case 1:E0(H,H.return);var ie=H.stateNode;if(typeof ie.componentWillUnmount=="function"){o=H,n=H.return;try{t=o,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(Q){mi(o,n,Q)}}break;case 5:E0(H,H.return);break;case 22:if(H.memoizedState!==null){ES(B);continue}}X!==null?(X.return=H,fr=X):ES(B)}j=j.sibling}e:for(j=null,B=e;;){if(B.tag===5){if(j===null){j=B;try{h=B.stateNode,D?(y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=B.stateNode,a=B.memoizedProps.style,w=a!=null&&a.hasOwnProperty("display")?a.display:null,C.style.display=aI("display",w))}catch(Q){mi(e,e.return,Q)}}}else if(B.tag===6){if(j===null)try{B.stateNode.nodeValue=D?"":B.memoizedProps}catch(Q){mi(e,e.return,Q)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;j===B&&(j=null),B=B.return}j===B&&(j=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:hs(t,e),Ns(e),o&4&&TS(e);break;case 21:break;default:hs(t,e),Ns(e)}}function Ns(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(RO(n)){var o=n;break e}n=n.return}throw Error(Ht(160))}switch(o.tag){case 5:var h=o.stateNode;o.flags&32&&(u5(h,""),o.flags&=-33);var y=AS(e);Ty(e,y,h);break;case 3:case 4:var w=o.stateNode.containerInfo,C=AS(e);Ay(e,C,w);break;default:throw Error(Ht(161))}}catch(a){mi(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bj(e,t,n){fr=e,LO(e)}function LO(e,t,n){for(var o=(e.mode&1)!==0;fr!==null;){var h=fr,y=h.child;if(h.tag===22&&o){var w=h.memoizedState!==null||Cd;if(!w){var C=h.alternate,a=C!==null&&C.memoizedState!==null||mo;C=Cd;var D=mo;if(Cd=w,(mo=a)&&!D)for(fr=h;fr!==null;)w=fr,a=w.child,w.tag===22&&w.memoizedState!==null?PS(h):a!==null?(a.return=w,fr=a):PS(h);for(;y!==null;)fr=y,LO(y),y=y.sibling;fr=h,Cd=C,mo=D}SS(e)}else h.subtreeFlags&8772&&y!==null?(y.return=h,fr=y):SS(e)}}function SS(e){for(;fr!==null;){var t=fr;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mo||U9(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!mo)if(n===null)o.componentDidMount();else{var h=t.elementType===t.type?n.memoizedProps:ps(t.type,n.memoizedProps);o.componentDidUpdate(h,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var y=t.updateQueue;y!==null&&cS(t,y,o);break;case 3:var w=t.updateQueue;if(w!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cS(t,w,n)}break;case 5:var C=t.stateNode;if(n===null&&t.flags&4){n=C;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var D=t.alternate;if(D!==null){var j=D.memoizedState;if(j!==null){var B=j.dehydrated;B!==null&&p5(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ht(163))}mo||t.flags&512&&wy(t)}catch(H){mi(t,t.return,H)}}if(t===e){fr=null;break}if(n=t.sibling,n!==null){n.return=t.return,fr=n;break}fr=t.return}}function ES(e){for(;fr!==null;){var t=fr;if(t===e){fr=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fr=n;break}fr=t.return}}function PS(e){for(;fr!==null;){var t=fr;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{U9(4,t)}catch(a){mi(t,n,a)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var h=t.return;try{o.componentDidMount()}catch(a){mi(t,h,a)}}var y=t.return;try{wy(t)}catch(a){mi(t,y,a)}break;case 5:var w=t.return;try{wy(t)}catch(a){mi(t,w,a)}}}catch(a){mi(t,t.return,a)}if(t===e){fr=null;break}var C=t.sibling;if(C!==null){C.return=t.return,fr=C;break}fr=t.return}}var Fj=Math.ceil,Tp=Nl.ReactCurrentDispatcher,Uv=Nl.ReactCurrentOwner,Na=Nl.ReactCurrentBatchConfig,_n=0,Gi=null,Ei=null,ro=0,ca=0,P0=fc(0),Di=0,S5=null,Fu=0,V9=0,Vv=0,t5=null,Go=null,Gv=0,X0=1/0,_l=null,Sp=!1,Sy=null,ic=null,Id=!1,Y1=null,Ep=0,r5=0,Ey=null,tp=-1,rp=0;function Do(){return _n&6?bi():tp!==-1?tp:tp=bi()}function oc(e){return e.mode&1?_n&2&&ro!==0?ro&-ro:bj.transition!==null?(rp===0&&(rp=vI()),rp):(e=Mn,e!==0||(e=window.event,e=e===void 0?16:EI(e.type)),e):1}function xs(e,t,n,o){if(50<r5)throw r5=0,Ey=null,Error(Ht(185));u6(e,n,o),(!(_n&2)||e!==Gi)&&(e===Gi&&(!(_n&2)&&(V9|=n),Di===4&&Z1(e,ro)),Xo(e,o),n===1&&_n===0&&!(t.mode&1)&&(X0=bi()+500,N9&&dc()))}function Xo(e,t){var n=e.callbackNode;bN(e,t);var o=cp(e,e===Gi?ro:0);if(o===0)n!==null&&zT(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&zT(n),t===1)e.tag===0?xj(MS.bind(null,e)):qI(MS.bind(null,e)),gj(function(){!(_n&6)&&dc()}),n=null;else{switch(xI(o)){case 1:n=gv;break;case 4:n=yI;break;case 16:n=lp;break;case 536870912:n=_I;break;default:n=lp}n=VO(n,zO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zO(e,t){if(tp=-1,rp=0,_n&6)throw Error(Ht(327));var n=e.callbackNode;if(F0()&&e.callbackNode!==n)return null;var o=cp(e,e===Gi?ro:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Pp(e,o);else{t=o;var h=_n;_n|=2;var y=FO();(Gi!==e||ro!==t)&&(_l=null,X0=bi()+500,Ou(e,t));do try{$j();break}catch(C){BO(e,C)}while(!0);Cv(),Tp.current=y,_n=h,Ei!==null?t=0:(Gi=null,ro=0,t=Di)}if(t!==0){if(t===2&&(h=Qg(e),h!==0&&(o=h,t=Py(e,h))),t===1)throw n=S5,Ou(e,0),Z1(e,o),Xo(e,bi()),n;if(t===6)Z1(e,o);else{if(h=e.current.alternate,!(o&30)&&!Nj(h)&&(t=Pp(e,o),t===2&&(y=Qg(e),y!==0&&(o=y,t=Py(e,y))),t===1))throw n=S5,Ou(e,0),Z1(e,o),Xo(e,bi()),n;switch(e.finishedWork=h,e.finishedLanes=o,t){case 0:case 1:throw Error(Ht(345));case 2:_u(e,Go,_l);break;case 3:if(Z1(e,o),(o&130023424)===o&&(t=Gv+500-bi(),10<t)){if(cp(e,0)!==0)break;if(h=e.suspendedLanes,(h&o)!==o){Do(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=sy(_u.bind(null,e,Go,_l),t);break}_u(e,Go,_l);break;case 4:if(Z1(e,o),(o&4194240)===o)break;for(t=e.eventTimes,h=-1;0<o;){var w=31-vs(o);y=1<<w,w=t[w],w>h&&(h=w),o&=~y}if(o=h,o=bi()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Fj(o/1960))-o,10<o){e.timeoutHandle=sy(_u.bind(null,e,Go,_l),o);break}_u(e,Go,_l);break;case 5:_u(e,Go,_l);break;default:throw Error(Ht(329))}}}return Xo(e,bi()),e.callbackNode===n?zO.bind(null,e):null}function Py(e,t){var n=t5;return e.current.memoizedState.isDehydrated&&(Ou(e,t).flags|=256),e=Pp(e,t),e!==2&&(t=Go,Go=n,t!==null&&My(t)),e}function My(e){Go===null?Go=e:Go.push.apply(Go,e)}function Nj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var h=n[o],y=h.getSnapshot;h=h.value;try{if(!bs(y(),h))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Z1(e,t){for(t&=~Vv,t&=~V9,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vs(t),o=1<<n;e[n]=-1,t&=~o}}function MS(e){if(_n&6)throw Error(Ht(327));F0();var t=cp(e,0);if(!(t&1))return Xo(e,bi()),null;var n=Pp(e,t);if(e.tag!==0&&n===2){var o=Qg(e);o!==0&&(t=o,n=Py(e,o))}if(n===1)throw n=S5,Ou(e,0),Z1(e,t),Xo(e,bi()),n;if(n===6)throw Error(Ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Go,_l),Xo(e,bi()),null}function qv(e,t){var n=_n;_n|=1;try{return e(t)}finally{_n=n,_n===0&&(X0=bi()+500,N9&&dc())}}function Nu(e){Y1!==null&&Y1.tag===0&&!(_n&6)&&F0();var t=_n;_n|=1;var n=Na.transition,o=Mn;try{if(Na.transition=null,Mn=1,e)return e()}finally{Mn=o,Na.transition=n,_n=t,!(_n&6)&&dc()}}function Wv(){ca=P0.current,Qn(P0)}function Ou(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mj(n)),Ei!==null)for(n=Ei.return;n!==null;){var o=n;switch(Ev(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&pp();break;case 3:H0(),Qn(Ho),Qn(yo),Lv();break;case 5:kv(o);break;case 4:H0();break;case 13:Qn(ci);break;case 19:Qn(ci);break;case 10:Iv(o.type._context);break;case 22:case 23:Wv()}n=n.return}if(Gi=e,Ei=e=ac(e.current,null),ro=ca=t,Di=0,S5=null,Vv=V9=Fu=0,Go=t5=null,Tu!==null){for(t=0;t<Tu.length;t++)if(n=Tu[t],o=n.interleaved,o!==null){n.interleaved=null;var h=o.next,y=n.pending;if(y!==null){var w=y.next;y.next=h,o.next=w}n.pending=o}Tu=null}return e}function BO(e,t){do{var n=Ei;try{if(Cv(),Jd.current=Ap,wp){for(var o=ui.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}wp=!1}if(Bu=0,Ui=Ri=ui=null,Qh=!1,w5=0,Uv.current=null,n===null||n.return===null){Di=1,S5=t,Ei=null;break}e:{var y=e,w=n.return,C=n,a=t;if(t=ro,C.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var D=a,j=C,B=j.tag;if(!(j.mode&1)&&(B===0||B===11||B===15)){var H=j.alternate;H?(j.updateQueue=H.updateQueue,j.memoizedState=H.memoizedState,j.lanes=H.lanes):(j.updateQueue=null,j.memoizedState=null)}var X=mS(w);if(X!==null){X.flags&=-257,gS(X,w,C,y,t),X.mode&1&&pS(y,D,t),t=X,a=D;var ie=t.updateQueue;if(ie===null){var Q=new Set;Q.add(a),t.updateQueue=Q}else ie.add(a);break e}else{if(!(t&1)){pS(y,D,t),Hv();break e}a=Error(Ht(426))}}else if(ri&&C.mode&1){var ne=mS(w);if(ne!==null){!(ne.flags&65536)&&(ne.flags|=256),gS(ne,w,C,y,t),Pv(Z0(a,C));break e}}y=a=Z0(a,C),Di!==4&&(Di=2),t5===null?t5=[y]:t5.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var te=xO(y,a,t);lS(y,te);break e;case 1:C=a;var K=y.type,se=y.stateNode;if(!(y.flags&128)&&(typeof K.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(ic===null||!ic.has(se)))){y.flags|=65536,t&=-t,y.lanes|=t;var ve=bO(y,C,t);lS(y,ve);break e}}y=y.return}while(y!==null)}jO(n)}catch(le){t=le,Ei===n&&n!==null&&(Ei=n=n.return);continue}break}while(!0)}function FO(){var e=Tp.current;return Tp.current=Ap,e===null?Ap:e}function Hv(){(Di===0||Di===3||Di===2)&&(Di=4),Gi===null||!(Fu&268435455)&&!(V9&268435455)||Z1(Gi,ro)}function Pp(e,t){var n=_n;_n|=2;var o=FO();(Gi!==e||ro!==t)&&(_l=null,Ou(e,t));do try{jj();break}catch(h){BO(e,h)}while(!0);if(Cv(),_n=n,Tp.current=o,Ei!==null)throw Error(Ht(261));return Gi=null,ro=0,Di}function jj(){for(;Ei!==null;)NO(Ei)}function $j(){for(;Ei!==null&&!fN();)NO(Ei)}function NO(e){var t=UO(e.alternate,e,ca);e.memoizedProps=e.pendingProps,t===null?jO(e):Ei=t,Uv.current=null}function jO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kj(n,t),n!==null){n.flags&=32767,Ei=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Di=6,Ei=null;return}}else if(n=Dj(n,t,ca),n!==null){Ei=n;return}if(t=t.sibling,t!==null){Ei=t;return}Ei=t=e}while(t!==null);Di===0&&(Di=5)}function _u(e,t,n){var o=Mn,h=Na.transition;try{Na.transition=null,Mn=1,Uj(e,t,n,o)}finally{Na.transition=h,Mn=o}return null}function Uj(e,t,n,o){do F0();while(Y1!==null);if(_n&6)throw Error(Ht(327));n=e.finishedWork;var h=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ht(177));e.callbackNode=null,e.callbackPriority=0;var y=n.lanes|n.childLanes;if(wN(e,y),e===Gi&&(Ei=Gi=null,ro=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Id||(Id=!0,VO(lp,function(){return F0(),null})),y=(n.flags&15990)!==0,n.subtreeFlags&15990||y){y=Na.transition,Na.transition=null;var w=Mn;Mn=1;var C=_n;_n|=4,Uv.current=null,zj(e,n),kO(n,e),lj(oy),up=!!iy,oy=iy=null,e.current=n,Bj(n),dN(),_n=C,Mn=w,Na.transition=y}else e.current=n;if(Id&&(Id=!1,Y1=e,Ep=h),y=e.pendingLanes,y===0&&(ic=null),gN(n.stateNode),Xo(e,bi()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)h=t[n],o(h.value,{componentStack:h.stack,digest:h.digest});if(Sp)throw Sp=!1,e=Sy,Sy=null,e;return Ep&1&&e.tag!==0&&F0(),y=e.pendingLanes,y&1?e===Ey?r5++:(r5=0,Ey=e):r5=0,dc(),null}function F0(){if(Y1!==null){var e=xI(Ep),t=Na.transition,n=Mn;try{if(Na.transition=null,Mn=16>e?16:e,Y1===null)var o=!1;else{if(e=Y1,Y1=null,Ep=0,_n&6)throw Error(Ht(331));var h=_n;for(_n|=4,fr=e.current;fr!==null;){var y=fr,w=y.child;if(fr.flags&16){var C=y.deletions;if(C!==null){for(var a=0;a<C.length;a++){var D=C[a];for(fr=D;fr!==null;){var j=fr;switch(j.tag){case 0:case 11:case 15:e5(8,j,y)}var B=j.child;if(B!==null)B.return=j,fr=B;else for(;fr!==null;){j=fr;var H=j.sibling,X=j.return;if(OO(j),j===D){fr=null;break}if(H!==null){H.return=X,fr=H;break}fr=X}}}var ie=y.alternate;if(ie!==null){var Q=ie.child;if(Q!==null){ie.child=null;do{var ne=Q.sibling;Q.sibling=null,Q=ne}while(Q!==null)}}fr=y}}if(y.subtreeFlags&2064&&w!==null)w.return=y,fr=w;else e:for(;fr!==null;){if(y=fr,y.flags&2048)switch(y.tag){case 0:case 11:case 15:e5(9,y,y.return)}var te=y.sibling;if(te!==null){te.return=y.return,fr=te;break e}fr=y.return}}var K=e.current;for(fr=K;fr!==null;){w=fr;var se=w.child;if(w.subtreeFlags&2064&&se!==null)se.return=w,fr=se;else e:for(w=K;fr!==null;){if(C=fr,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:U9(9,C)}}catch(le){mi(C,C.return,le)}if(C===w){fr=null;break e}var ve=C.sibling;if(ve!==null){ve.return=C.return,fr=ve;break e}fr=C.return}}if(_n=h,dc(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(k9,e)}catch{}o=!0}return o}finally{Mn=n,Na.transition=t}}return!1}function CS(e,t,n){t=Z0(n,t),t=xO(e,t,1),e=nc(e,t,1),t=Do(),e!==null&&(u6(e,1,t),Xo(e,t))}function mi(e,t,n){if(e.tag===3)CS(e,e,n);else for(;t!==null;){if(t.tag===3){CS(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ic===null||!ic.has(o))){e=Z0(n,e),e=bO(t,e,1),t=nc(t,e,1),e=Do(),t!==null&&(u6(t,1,e),Xo(t,e));break}}t=t.return}}function Vj(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Do(),e.pingedLanes|=e.suspendedLanes&n,Gi===e&&(ro&n)===n&&(Di===4||Di===3&&(ro&130023424)===ro&&500>bi()-Gv?Ou(e,0):Vv|=n),Xo(e,t)}function $O(e,t){t===0&&(e.mode&1?(t=xd,xd<<=1,!(xd&130023424)&&(xd=4194304)):t=1);var n=Do();e=Dl(e,t),e!==null&&(u6(e,t,n),Xo(e,n))}function Gj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$O(e,n)}function qj(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(n=h.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ht(314))}o!==null&&o.delete(t),$O(e,n)}var UO;UO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ho.current)qo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return qo=!1,Rj(e,t,n);qo=!!(e.flags&131072)}else qo=!1,ri&&t.flags&1048576&&WI(t,yp,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ep(e,t),e=t.pendingProps;var h=G0(t,yo.current);B0(t,n),h=Bv(null,t,o,e,h,n);var y=Fv();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zo(o)?(y=!0,mp(t)):y=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Rv(t),h.updater=$9,t.stateNode=h,h._reactInternals=t,py(t,o,e,n),t=yy(null,t,o,!0,y,n)):(t.tag=0,ri&&y&&Sv(t),Co(null,t,h,n),t=t.child),t;case 16:o=t.elementType;e:{switch(ep(e,t),e=t.pendingProps,h=o._init,o=h(o._payload),t.type=o,h=t.tag=Hj(o),e=ps(o,e),h){case 0:t=gy(null,t,o,e,n);break e;case 1:t=vS(null,t,o,e,n);break e;case 11:t=yS(null,t,o,e,n);break e;case 14:t=_S(null,t,o,ps(o.type,e),n);break e}throw Error(Ht(306,o,""))}return t;case 0:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:ps(o,h),gy(e,t,o,h,n);case 1:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:ps(o,h),vS(e,t,o,h,n);case 3:e:{if(SO(t),e===null)throw Error(Ht(387));o=t.pendingProps,y=t.memoizedState,h=y.element,JI(e,t),xp(t,o,null,n);var w=t.memoizedState;if(o=w.element,y.isDehydrated)if(y={element:o,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){h=Z0(Error(Ht(423)),t),t=xS(e,t,o,n,h);break e}else if(o!==h){h=Z0(Error(Ht(424)),t),t=xS(e,t,o,n,h);break e}else for(fa=rc(t.stateNode.containerInfo.firstChild),da=t,ri=!0,ys=null,n=YI(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(q0(),o===h){t=kl(e,t,n);break e}Co(e,t,o,n)}t=t.child}return t;case 5:return QI(t),e===null&&hy(t),o=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,w=h.children,ay(o,h)?w=null:y!==null&&ay(o,y)&&(t.flags|=32),TO(e,t),Co(e,t,w,n),t.child;case 6:return e===null&&hy(t),null;case 13:return EO(e,t,n);case 4:return Dv(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=W0(t,null,o,n):Co(e,t,o,n),t.child;case 11:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:ps(o,h),yS(e,t,o,h,n);case 7:return Co(e,t,t.pendingProps,n),t.child;case 8:return Co(e,t,t.pendingProps.children,n),t.child;case 12:return Co(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,h=t.pendingProps,y=t.memoizedProps,w=h.value,qn(_p,o._currentValue),o._currentValue=w,y!==null)if(bs(y.value,w)){if(y.children===h.children&&!Ho.current){t=kl(e,t,n);break e}}else for(y=t.child,y!==null&&(y.return=t);y!==null;){var C=y.dependencies;if(C!==null){w=y.child;for(var a=C.firstContext;a!==null;){if(a.context===o){if(y.tag===1){a=El(-1,n&-n),a.tag=2;var D=y.updateQueue;if(D!==null){D=D.shared;var j=D.pending;j===null?a.next=a:(a.next=j.next,j.next=a),D.pending=a}}y.lanes|=n,a=y.alternate,a!==null&&(a.lanes|=n),fy(y.return,n,t),C.lanes|=n;break}a=a.next}}else if(y.tag===10)w=y.type===t.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(Ht(341));w.lanes|=n,C=w.alternate,C!==null&&(C.lanes|=n),fy(w,n,t),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===t){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Co(e,t,h.children,n),t=t.child}return t;case 9:return h=t.type,o=t.pendingProps.children,B0(t,n),h=$a(h),o=o(h),t.flags|=1,Co(e,t,o,n),t.child;case 14:return o=t.type,h=ps(o,t.pendingProps),h=ps(o.type,h),_S(e,t,o,h,n);case 15:return wO(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,h=t.pendingProps,h=t.elementType===o?h:ps(o,h),ep(e,t),t.tag=1,Zo(o)?(e=!0,mp(t)):e=!1,B0(t,n),vO(t,o,h),py(t,o,h,n),yy(null,t,o,!0,e,n);case 19:return PO(e,t,n);case 22:return AO(e,t,n)}throw Error(Ht(156,t.tag))};function VO(e,t){return gI(e,t)}function Wj(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(e,t,n,o){return new Wj(e,t,n,o)}function Zv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hj(e){if(typeof e=="function")return Zv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dv)return 11;if(e===pv)return 14}return 2}function ac(e,t){var n=e.alternate;return n===null?(n=Ba(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function np(e,t,n,o,h,y){var w=2;if(o=e,typeof e=="function")Zv(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case y0:return Ru(n.children,h,y,t);case fv:w=8,h|=8;break;case Fg:return e=Ba(12,n,t,h|2),e.elementType=Fg,e.lanes=y,e;case Ng:return e=Ba(13,n,t,h),e.elementType=Ng,e.lanes=y,e;case jg:return e=Ba(19,n,t,h),e.elementType=jg,e.lanes=y,e;case QC:return G9(n,h,y,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case KC:w=10;break e;case JC:w=9;break e;case dv:w=11;break e;case pv:w=14;break e;case V1:w=16,o=null;break e}throw Error(Ht(130,e==null?e:typeof e,""))}return t=Ba(w,n,t,h),t.elementType=e,t.type=o,t.lanes=y,t}function Ru(e,t,n,o){return e=Ba(7,e,o,t),e.lanes=n,e}function G9(e,t,n,o){return e=Ba(22,e,o,t),e.elementType=QC,e.lanes=n,e.stateNode={isHidden:!1},e}function og(e,t,n){return e=Ba(6,e,null,t),e.lanes=n,e}function ag(e,t,n){return t=Ba(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zj(e,t,n,o,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=o,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Xv(e,t,n,o,h,y,w,C,a){return e=new Zj(e,t,n,C,a),t===1?(t=1,y===!0&&(t|=8)):t=0,y=Ba(3,null,null,t),e.current=y,y.stateNode=e,y.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(y),e}function Xj(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g0,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function GO(e){if(!e)return uc;e=e._reactInternals;e:{if(Wu(e)!==e||e.tag!==1)throw Error(Ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ht(171))}if(e.tag===1){var n=e.type;if(Zo(n))return GI(e,n,t)}return t}function qO(e,t,n,o,h,y,w,C,a){return e=Xv(n,o,!0,e,h,y,w,C,a),e.context=GO(null),n=e.current,o=Do(),h=oc(n),y=El(o,h),y.callback=t??null,nc(n,y,h),e.current.lanes=h,u6(e,h,o),Xo(e,o),e}function q9(e,t,n,o){var h=t.current,y=Do(),w=oc(h);return n=GO(n),t.context===null?t.context=n:t.pendingContext=n,t=El(y,w),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=nc(h,t,w),e!==null&&(xs(e,h,w,y),Kd(e,h,w)),w}function Mp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function IS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yv(e,t){IS(e,t),(e=e.alternate)&&IS(e,t)}function Yj(){return null}var WO=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kv(e){this._internalRoot=e}W9.prototype.render=Kv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ht(409));q9(e,t,null,null)};W9.prototype.unmount=Kv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nu(function(){q9(null,e,null,null)}),t[Rl]=null}};function W9(e){this._internalRoot=e}W9.prototype.unstable_scheduleHydration=function(e){if(e){var t=AI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<H1.length&&t!==0&&t<H1[n].priority;n++);H1.splice(n,0,e),n===0&&SI(e)}};function Jv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function H9(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function OS(){}function Kj(e,t,n,o,h){if(h){if(typeof o=="function"){var y=o;o=function(){var D=Mp(w);y.call(D)}}var w=qO(t,o,e,0,null,!1,!1,"",OS);return e._reactRootContainer=w,e[Rl]=w.current,y5(e.nodeType===8?e.parentNode:e),Nu(),w}for(;h=e.lastChild;)e.removeChild(h);if(typeof o=="function"){var C=o;o=function(){var D=Mp(a);C.call(D)}}var a=Xv(e,0,!1,null,null,!1,!1,"",OS);return e._reactRootContainer=a,e[Rl]=a.current,y5(e.nodeType===8?e.parentNode:e),Nu(function(){q9(t,a,n,o)}),a}function Z9(e,t,n,o,h){var y=n._reactRootContainer;if(y){var w=y;if(typeof h=="function"){var C=h;h=function(){var a=Mp(w);C.call(a)}}q9(t,w,e,h)}else w=Kj(n,t,e,h,o);return Mp(w)}bI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qh(t.pendingLanes);n!==0&&(yv(t,n|1),Xo(t,bi()),!(_n&6)&&(X0=bi()+500,dc()))}break;case 13:Nu(function(){var o=Dl(e,1);if(o!==null){var h=Do();xs(o,e,1,h)}}),Yv(e,1)}};_v=function(e){if(e.tag===13){var t=Dl(e,134217728);if(t!==null){var n=Do();xs(t,e,134217728,n)}Yv(e,134217728)}};wI=function(e){if(e.tag===13){var t=oc(e),n=Dl(e,t);if(n!==null){var o=Do();xs(n,e,t,o)}Yv(e,t)}};AI=function(){return Mn};TI=function(e,t){var n=Mn;try{return Mn=e,t()}finally{Mn=n}};Yg=function(e,t,n){switch(t){case"input":if(Vg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var h=F9(o);if(!h)throw Error(Ht(90));tI(o),Vg(o,h)}}}break;case"textarea":nI(e,n);break;case"select":t=n.value,t!=null&&D0(e,!!n.multiple,t,!1)}};uI=qv;hI=Nu;var Jj={usingClientEntryPoint:!1,Events:[f6,b0,F9,lI,cI,qv]},Ih={findFiberByHostInstance:Au,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qj={bundleType:Ih.bundleType,version:Ih.version,rendererPackageName:Ih.rendererPackageName,rendererConfig:Ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pI(e),e===null?null:e.stateNode},findFiberByHostInstance:Ih.findFiberByHostInstance||Yj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{k9=Od.inject(Qj),Vs=Od}catch{}}ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jj;ga.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(t))throw Error(Ht(200));return Xj(e,t,null,n)};ga.createRoot=function(e,t){if(!Jv(e))throw Error(Ht(299));var n=!1,o="",h=WO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Xv(e,1,!1,null,null,n,!1,o,h),e[Rl]=t.current,y5(e.nodeType===8?e.parentNode:e),new Kv(t)};ga.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ht(188)):(e=Object.keys(e).join(","),Error(Ht(268,e)));return e=pI(t),e=e===null?null:e.stateNode,e};ga.flushSync=function(e){return Nu(e)};ga.hydrate=function(e,t,n){if(!H9(t))throw Error(Ht(200));return Z9(null,e,t,!0,n)};ga.hydrateRoot=function(e,t,n){if(!Jv(e))throw Error(Ht(405));var o=n!=null&&n.hydratedSources||null,h=!1,y="",w=WO;if(n!=null&&(n.unstable_strictMode===!0&&(h=!0),n.identifierPrefix!==void 0&&(y=n.identifierPrefix),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),t=qO(t,null,e,1,n??null,h,!1,y,w),e[Rl]=t.current,y5(e),o)for(e=0;e<o.length;e++)n=o[e],h=n._getVersion,h=h(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,h]:t.mutableSourceEagerHydrationData.push(n,h);return new W9(t)};ga.render=function(e,t,n){if(!H9(t))throw Error(Ht(200));return Z9(null,e,t,!1,n)};ga.unmountComponentAtNode=function(e){if(!H9(e))throw Error(Ht(40));return e._reactRootContainer?(Nu(function(){Z9(null,null,e,!1,function(){e._reactRootContainer=null,e[Rl]=null})}),!0):!1};ga.unstable_batchedUpdates=qv;ga.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!H9(n))throw Error(Ht(200));if(e==null||e._reactInternals===void 0)throw Error(Ht(38));return Z9(e,t,n,!1,o)};ga.version="18.3.1-next-f1338f8080-20240426";function HO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HO)}catch(e){console.error(e)}}HO(),HC.exports=ga;var e$=HC.exports,ZO,RS=e$;ZO=RS.createRoot,RS.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E5(){return E5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E5.apply(this,arguments)}var K1;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(K1||(K1={}));const DS="popstate";function t$(e){e===void 0&&(e={});function t(o,h){let{pathname:y,search:w,hash:C}=o.location;return Cy("",{pathname:y,search:w,hash:C},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function n(o,h){return typeof h=="string"?h:Cp(h)}return n$(t,n,null,e)}function yi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function r$(){return Math.random().toString(36).substr(2,8)}function kS(e,t){return{usr:e.state,key:e.key,idx:t}}function Cy(e,t,n,o){return n===void 0&&(n=null),E5({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?T2(t):t,{state:n,key:t&&t.key||o||r$()})}function Cp(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function T2(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function n$(e,t,n,o){o===void 0&&(o={});let{window:h=document.defaultView,v5Compat:y=!1}=o,w=h.history,C=K1.Pop,a=null,D=j();D==null&&(D=0,w.replaceState(E5({},w.state,{idx:D}),""));function j(){return(w.state||{idx:null}).idx}function B(){C=K1.Pop;let ne=j(),te=ne==null?null:ne-D;D=ne,a&&a({action:C,location:Q.location,delta:te})}function H(ne,te){C=K1.Push;let K=Cy(Q.location,ne,te);D=j()+1;let se=kS(K,D),ve=Q.createHref(K);try{w.pushState(se,"",ve)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;h.location.assign(ve)}y&&a&&a({action:C,location:Q.location,delta:1})}function X(ne,te){C=K1.Replace;let K=Cy(Q.location,ne,te);D=j();let se=kS(K,D),ve=Q.createHref(K);w.replaceState(se,"",ve),y&&a&&a({action:C,location:Q.location,delta:0})}function ie(ne){let te=h.location.origin!=="null"?h.location.origin:h.location.href,K=typeof ne=="string"?ne:Cp(ne);return K=K.replace(/ $/,"%20"),yi(te,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,te)}let Q={get action(){return C},get location(){return e(h,w)},listen(ne){if(a)throw new Error("A history only accepts one active listener");return h.addEventListener(DS,B),a=ne,()=>{h.removeEventListener(DS,B),a=null}},createHref(ne){return t(h,ne)},createURL:ie,encodeLocation(ne){let te=ie(ne);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:H,replace:X,go(ne){return w.go(ne)}};return Q}var LS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(LS||(LS={}));function i$(e,t,n){return n===void 0&&(n="/"),o$(e,t,n,!1)}function o$(e,t,n,o){let h=typeof t=="string"?T2(t):t,y=Y0(h.pathname||"/",n);if(y==null)return null;let w=YO(e);a$(w);let C=null;for(let a=0;C==null&&a<w.length;++a){let D=y$(y);C=m$(w[a],D,o)}return C}function YO(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let h=(y,w,C)=>{let a={relativePath:C===void 0?y.path||"":C,caseSensitive:y.caseSensitive===!0,childrenIndex:w,route:y};a.relativePath.startsWith("/")&&(yi(a.relativePath.startsWith(o),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(o.length));let D=sc([o,a.relativePath]),j=n.concat(a);y.children&&y.children.length>0&&(yi(y.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+D+'".')),YO(y.children,t,j,D)),!(y.path==null&&!y.index)&&t.push({path:D,score:d$(D,y.index),routesMeta:j})};return e.forEach((y,w)=>{var C;if(y.path===""||!((C=y.path)!=null&&C.includes("?")))h(y,w);else for(let a of KO(y.path))h(y,w,a)}),t}function KO(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,h=n.endsWith("?"),y=n.replace(/\?$/,"");if(o.length===0)return h?[y,""]:[y];let w=KO(o.join("/")),C=[];return C.push(...w.map(a=>a===""?y:[y,a].join("/"))),h&&C.push(...w),C.map(a=>e.startsWith("/")&&a===""?"/":a)}function a$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:p$(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const s$=/^:[\w-]+$/,l$=3,c$=2,u$=1,h$=10,f$=-2,zS=e=>e==="*";function d$(e,t){let n=e.split("/"),o=n.length;return n.some(zS)&&(o+=f$),t&&(o+=c$),n.filter(h=>!zS(h)).reduce((h,y)=>h+(s$.test(y)?l$:y===""?u$:h$),o)}function p$(e,t){return e.length===t.length&&e.slice(0,-1).every((o,h)=>o===t[h])?e[e.length-1]-t[t.length-1]:0}function m$(e,t,n){let{routesMeta:o}=e,h={},y="/",w=[];for(let C=0;C<o.length;++C){let a=o[C],D=C===o.length-1,j=y==="/"?t:t.slice(y.length)||"/",B=Ip({path:a.relativePath,caseSensitive:a.caseSensitive,end:D},j),H=a.route;if(!B&&D&&n&&!o[o.length-1].route.index&&(B=Ip({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},j)),!B)return null;Object.assign(h,B.params),w.push({params:h,pathname:sc([y,B.pathname]),pathnameBase:b$(sc([y,B.pathnameBase])),route:H}),B.pathnameBase!=="/"&&(y=sc([y,B.pathnameBase]))}return w}function Ip(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=g$(e.path,e.caseSensitive,e.end),h=t.match(n);if(!h)return null;let y=h[0],w=y.replace(/(.)\/+$/,"$1"),C=h.slice(1);return{params:o.reduce((D,j,B)=>{let{paramName:H,isOptional:X}=j;if(H==="*"){let Q=C[B]||"";w=y.slice(0,y.length-Q.length).replace(/(.)\/+$/,"$1")}const ie=C[B];return X&&!ie?D[H]=void 0:D[H]=(ie||"").replace(/%2F/g,"/"),D},{}),pathname:y,pathnameBase:w,pattern:e}}function g$(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),XO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,C,a)=>(o.push({paramName:C,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),o]}function y$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return XO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Y0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function _$(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:h=""}=typeof e=="string"?T2(e):e;return{pathname:n?n.startsWith("/")?n:v$(n,t):t,search:w$(o),hash:A$(h)}}function v$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?n.length>1&&n.pop():h!=="."&&n.push(h)}),n.length>1?n.join("/"):"/"}function sg(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function JO(e,t){let n=x$(e);return t?n.map((o,h)=>h===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function QO(e,t,n,o){o===void 0&&(o=!1);let h;typeof e=="string"?h=T2(e):(h=E5({},e),yi(!h.pathname||!h.pathname.includes("?"),sg("?","pathname","search",h)),yi(!h.pathname||!h.pathname.includes("#"),sg("#","pathname","hash",h)),yi(!h.search||!h.search.includes("#"),sg("#","search","hash",h)));let y=e===""||h.pathname==="",w=y?"/":h.pathname,C;if(w==null)C=n;else{let B=t.length-1;if(!o&&w.startsWith("..")){let H=w.split("/");for(;H[0]==="..";)H.shift(),B-=1;h.pathname=H.join("/")}C=B>=0?t[B]:"/"}let a=_$(h,C),D=w&&w!=="/"&&w.endsWith("/"),j=(y||w===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(D||j)&&(a.pathname+="/"),a}const sc=e=>e.join("/").replace(/\/\/+/g,"/"),b$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),w$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,A$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eR=["post","put","patch","delete"];new Set(eR);const S$=["get",...eR];new Set(S$);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function P5(){return P5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},P5.apply(this,arguments)}const X9=ut.createContext(null),tR=ut.createContext(null),pc=ut.createContext(null),Y9=ut.createContext(null),Hu=ut.createContext({outlet:null,matches:[],isDataRoute:!1}),rR=ut.createContext(null);function E$(e,t){let{relative:n}=t===void 0?{}:t;p6()||yi(!1);let{basename:o,navigator:h}=ut.useContext(pc),{hash:y,pathname:w,search:C}=K9(e,{relative:n}),a=w;return o!=="/"&&(a=w==="/"?o:sc([o,w])),h.createHref({pathname:a,search:C,hash:y})}function p6(){return ut.useContext(Y9)!=null}function m6(){return p6()||yi(!1),ut.useContext(Y9).location}function nR(e){ut.useContext(pc).static||ut.useLayoutEffect(e)}function jl(){let{isDataRoute:e}=ut.useContext(Hu);return e?N$():P$()}function P$(){p6()||yi(!1);let e=ut.useContext(X9),{basename:t,future:n,navigator:o}=ut.useContext(pc),{matches:h}=ut.useContext(Hu),{pathname:y}=m6(),w=JSON.stringify(JO(h,n.v7_relativeSplatPath)),C=ut.useRef(!1);return nR(()=>{C.current=!0}),ut.useCallback(function(D,j){if(j===void 0&&(j={}),!C.current)return;if(typeof D=="number"){o.go(D);return}let B=QO(D,JSON.parse(w),y,j.relative==="path");e==null&&t!=="/"&&(B.pathname=B.pathname==="/"?t:sc([t,B.pathname])),(j.replace?o.replace:o.push)(B,j.state,j)},[t,o,w,y,e])}function K9(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=ut.useContext(pc),{matches:h}=ut.useContext(Hu),{pathname:y}=m6(),w=JSON.stringify(JO(h,o.v7_relativeSplatPath));return ut.useMemo(()=>QO(e,JSON.parse(w),y,n==="path"),[e,w,y,n])}function M$(e,t){return C$(e,t)}function C$(e,t,n,o){p6()||yi(!1);let{navigator:h}=ut.useContext(pc),{matches:y}=ut.useContext(Hu),w=y[y.length-1],C=w?w.params:{};w&&w.pathname;let a=w?w.pathnameBase:"/";w&&w.route;let D=m6(),j;if(t){var B;let ne=typeof t=="string"?T2(t):t;a==="/"||(B=ne.pathname)!=null&&B.startsWith(a)||yi(!1),j=ne}else j=D;let H=j.pathname||"/",X=H;if(a!=="/"){let ne=a.replace(/^\//,"").split("/");X="/"+H.replace(/^\//,"").split("/").slice(ne.length).join("/")}let ie=i$(e,{pathname:X}),Q=k$(ie&&ie.map(ne=>Object.assign({},ne,{params:Object.assign({},C,ne.params),pathname:sc([a,h.encodeLocation?h.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?a:sc([a,h.encodeLocation?h.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),y,n,o);return t&&Q?ut.createElement(Y9.Provider,{value:{location:P5({pathname:"/",search:"",hash:"",state:null,key:"default"},j),navigationType:K1.Pop}},Q):Q}function I$(){let e=F$(),t=T$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ut.createElement(ut.Fragment,null,ut.createElement("h2",null,"Unexpected Application Error!"),ut.createElement("h3",{style:{fontStyle:"italic"}},t),n?ut.createElement("pre",{style:h},n):null,null)}const O$=ut.createElement(I$,null);class R$ extends ut.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ut.createElement(Hu.Provider,{value:this.props.routeContext},ut.createElement(rR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D$(e){let{routeContext:t,match:n,children:o}=e,h=ut.useContext(X9);return h&&h.static&&h.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=n.route.id),ut.createElement(Hu.Provider,{value:t},o)}function k$(e,t,n,o){var h;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var y;if(!n)return null;if(n.errors)e=n.matches;else if((y=o)!=null&&y.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let w=e,C=(h=n)==null?void 0:h.errors;if(C!=null){let j=w.findIndex(B=>B.route.id&&(C==null?void 0:C[B.route.id])!==void 0);j>=0||yi(!1),w=w.slice(0,Math.min(w.length,j+1))}let a=!1,D=-1;if(n&&o&&o.v7_partialHydration)for(let j=0;j<w.length;j++){let B=w[j];if((B.route.HydrateFallback||B.route.hydrateFallbackElement)&&(D=j),B.route.id){let{loaderData:H,errors:X}=n,ie=B.route.loader&&H[B.route.id]===void 0&&(!X||X[B.route.id]===void 0);if(B.route.lazy||ie){a=!0,D>=0?w=w.slice(0,D+1):w=[w[0]];break}}}return w.reduceRight((j,B,H)=>{let X,ie=!1,Q=null,ne=null;n&&(X=C&&B.route.id?C[B.route.id]:void 0,Q=B.route.errorElement||O$,a&&(D<0&&H===0?(ie=!0,ne=null):D===H&&(ie=!0,ne=B.route.hydrateFallbackElement||null)));let te=t.concat(w.slice(0,H+1)),K=()=>{let se;return X?se=Q:ie?se=ne:B.route.Component?se=ut.createElement(B.route.Component,null):B.route.element?se=B.route.element:se=j,ut.createElement(D$,{match:B,routeContext:{outlet:j,matches:te,isDataRoute:n!=null},children:se})};return n&&(B.route.ErrorBoundary||B.route.errorElement||H===0)?ut.createElement(R$,{location:n.location,revalidation:n.revalidation,component:Q,error:X,children:K(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):K()},null)}var iR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(iR||{}),Op=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Op||{});function L$(e){let t=ut.useContext(X9);return t||yi(!1),t}function z$(e){let t=ut.useContext(tR);return t||yi(!1),t}function B$(e){let t=ut.useContext(Hu);return t||yi(!1),t}function oR(e){let t=B$(),n=t.matches[t.matches.length-1];return n.route.id||yi(!1),n.route.id}function F$(){var e;let t=ut.useContext(rR),n=z$(Op.UseRouteError),o=oR(Op.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function N$(){let{router:e}=L$(iR.UseNavigateStable),t=oR(Op.UseNavigateStable),n=ut.useRef(!1);return nR(()=>{n.current=!0}),ut.useCallback(function(h,y){y===void 0&&(y={}),n.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,P5({fromRouteId:t},y)))},[e,t])}function ds(e){yi(!1)}function j$(e){let{basename:t="/",children:n=null,location:o,navigationType:h=K1.Pop,navigator:y,static:w=!1,future:C}=e;p6()&&yi(!1);let a=t.replace(/^\/*/,"/"),D=ut.useMemo(()=>({basename:a,navigator:y,static:w,future:P5({v7_relativeSplatPath:!1},C)}),[a,C,y,w]);typeof o=="string"&&(o=T2(o));let{pathname:j="/",search:B="",hash:H="",state:X=null,key:ie="default"}=o,Q=ut.useMemo(()=>{let ne=Y0(j,a);return ne==null?null:{location:{pathname:ne,search:B,hash:H,state:X,key:ie},navigationType:h}},[a,j,B,H,X,ie,h]);return Q==null?null:ut.createElement(pc.Provider,{value:D},ut.createElement(Y9.Provider,{children:n,value:Q}))}function $$(e){let{children:t,location:n}=e;return M$(Iy(t),n)}new Promise(()=>{});function Iy(e,t){t===void 0&&(t=[]);let n=[];return ut.Children.forEach(e,(o,h)=>{if(!ut.isValidElement(o))return;let y=[...t,h];if(o.type===ut.Fragment){n.push.apply(n,Iy(o.props.children,y));return}o.type!==ds&&yi(!1),!o.props.index||!o.props.children||yi(!1);let w={id:o.props.id||y.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(w.children=Iy(o.props.children,y)),n.push(w)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rp.apply(this,arguments)}function aR(e,t){if(e==null)return{};var n={},o=Object.keys(e),h,y;for(y=0;y<o.length;y++)h=o[y],!(t.indexOf(h)>=0)&&(n[h]=e[h]);return n}function U$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function V$(e,t){return e.button===0&&(!t||t==="_self")&&!U$(e)}const G$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],q$=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],W$="6";try{window.__reactRouterVersion=W$}catch{}const H$=ut.createContext({isTransitioning:!1}),Z$="startTransition",BS=VF[Z$];function X$(e){let{basename:t,children:n,future:o,window:h}=e,y=ut.useRef();y.current==null&&(y.current=t$({window:h,v5Compat:!0}));let w=y.current,[C,a]=ut.useState({action:w.action,location:w.location}),{v7_startTransition:D}=o||{},j=ut.useCallback(B=>{D&&BS?BS(()=>a(B)):a(B)},[a,D]);return ut.useLayoutEffect(()=>w.listen(j),[w,j]),ut.createElement(j$,{basename:t,children:n,location:C.location,navigationType:C.action,navigator:w,future:o})}const Y$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J$=ut.forwardRef(function(t,n){let{onClick:o,relative:h,reloadDocument:y,replace:w,state:C,target:a,to:D,preventScrollReset:j,viewTransition:B}=t,H=aR(t,G$),{basename:X}=ut.useContext(pc),ie,Q=!1;if(typeof D=="string"&&K$.test(D)&&(ie=D,Y$))try{let se=new URL(window.location.href),ve=D.startsWith("//")?new URL(se.protocol+D):new URL(D),le=Y0(ve.pathname,X);ve.origin===se.origin&&le!=null?D=le+ve.search+ve.hash:Q=!0}catch{}let ne=E$(D,{relative:h}),te=eU(D,{replace:w,state:C,target:a,preventScrollReset:j,relative:h,viewTransition:B});function K(se){o&&o(se),se.defaultPrevented||te(se)}return ut.createElement("a",Rp({},H,{href:ie||ne,onClick:Q||y?o:K,ref:n,target:a}))}),Oh=ut.forwardRef(function(t,n){let{"aria-current":o="page",caseSensitive:h=!1,className:y="",end:w=!1,style:C,to:a,viewTransition:D,children:j}=t,B=aR(t,q$),H=K9(a,{relative:B.relative}),X=m6(),ie=ut.useContext(tR),{navigator:Q,basename:ne}=ut.useContext(pc),te=ie!=null&&tU(H)&&D===!0,K=Q.encodeLocation?Q.encodeLocation(H).pathname:H.pathname,se=X.pathname,ve=ie&&ie.navigation&&ie.navigation.location?ie.navigation.location.pathname:null;h||(se=se.toLowerCase(),ve=ve?ve.toLowerCase():null,K=K.toLowerCase()),ve&&ne&&(ve=Y0(ve,ne)||ve);const le=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let fe=se===K||!w&&se.startsWith(K)&&se.charAt(le)==="/",Te=ve!=null&&(ve===K||!w&&ve.startsWith(K)&&ve.charAt(K.length)==="/"),Ee={isActive:fe,isPending:Te,isTransitioning:te},Ze=fe?o:void 0,st;typeof y=="function"?st=y(Ee):st=[y,fe?"active":null,Te?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let We=typeof C=="function"?C(Ee):C;return ut.createElement(J$,Rp({},B,{"aria-current":Ze,className:st,ref:n,style:We,to:a,viewTransition:D}),typeof j=="function"?j(Ee):j)});var Oy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oy||(Oy={}));var FS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FS||(FS={}));function Q$(e){let t=ut.useContext(X9);return t||yi(!1),t}function eU(e,t){let{target:n,replace:o,state:h,preventScrollReset:y,relative:w,viewTransition:C}=t===void 0?{}:t,a=jl(),D=m6(),j=K9(e,{relative:w});return ut.useCallback(B=>{if(V$(B,n)){B.preventDefault();let H=o!==void 0?o:Cp(D)===Cp(j);a(e,{replace:H,state:h,preventScrollReset:y,relative:w,viewTransition:C})}},[D,a,j,o,h,n,e,y,w,C])}function tU(e,t){t===void 0&&(t={});let n=ut.useContext(H$);n==null&&yi(!1);let{basename:o}=Q$(Oy.useViewTransitionState),h=K9(e,{relative:t.relative});if(!n.isTransitioning)return!1;let y=Y0(n.currentLocation.pathname,o)||n.currentLocation.pathname,w=Y0(n.nextLocation.pathname,o)||n.nextLocation.pathname;return Ip(h.pathname,w)!=null||Ip(h.pathname,y)!=null}var sR={exports:{}};(function(e,t){var n={};(function(o,h){e.exports=h()})(Uh,function(){var o,h,y;function w(a,D){if(!o)o=D;else if(!h)h=D;else{var j="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+o+")(sharedChunk); ("+h+")(sharedChunk); self.onerror = null;",B={};o(B),y=D(B),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(y.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}w(["exports"],function(a){function D(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var j,B={},H={};function X(){if(j)return H;j=1,Object.defineProperty(H,"__esModule",{value:!0}),H.setMatrixArrayType=function(m){H.ARRAY_TYPE=r=m},H.toRadian=function(m){return m*u},H.equals=function(m,f){return Math.abs(m-f)<=c*Math.max(1,Math.abs(m),Math.abs(f))},H.RANDOM=H.ARRAY_TYPE=H.EPSILON=void 0;var c=1e-6;H.EPSILON=c;var r=typeof Float32Array<"u"?Float32Array:Array;H.ARRAY_TYPE=r;var s=Math.random;H.RANDOM=s;var u=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var m=0,f=arguments.length;f--;)m+=arguments[f]*arguments[f];return Math.sqrt(m)}),H}var ie,Q={};function ne(){if(ie)return Q;function c(f){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(f)}ie=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.create=function(){var f=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},Q.clone=function(f){var g=new r.ARRAY_TYPE(4);return g[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[3],g},Q.copy=function(f,g){return f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3],f},Q.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},Q.fromValues=function(f,g,b,E){var I=new r.ARRAY_TYPE(4);return I[0]=f,I[1]=g,I[2]=b,I[3]=E,I},Q.set=function(f,g,b,E,I){return f[0]=g,f[1]=b,f[2]=E,f[3]=I,f},Q.transpose=function(f,g){if(f===g){var b=g[1];f[1]=g[2],f[2]=b}else f[0]=g[0],f[1]=g[2],f[2]=g[1],f[3]=g[3];return f},Q.invert=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=b*v-I*E;return T?(f[0]=v*(T=1/T),f[1]=-E*T,f[2]=-I*T,f[3]=b*T,f):null},Q.adjoint=function(f,g){var b=g[0];return f[0]=g[3],f[1]=-g[1],f[2]=-g[2],f[3]=b,f},Q.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},Q.multiply=u,Q.rotate=function(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=Math.sin(b),S=Math.cos(b);return f[0]=E*S+v*M,f[1]=I*S+T*M,f[2]=E*-M+v*S,f[3]=I*-M+T*S,f},Q.scale=function(f,g,b){var E=g[1],I=g[2],v=g[3],T=b[0],M=b[1];return f[0]=g[0]*T,f[1]=E*T,f[2]=I*M,f[3]=v*M,f},Q.fromRotation=function(f,g){var b=Math.sin(g),E=Math.cos(g);return f[0]=E,f[1]=b,f[2]=-b,f[3]=E,f},Q.fromScaling=function(f,g){return f[0]=g[0],f[1]=0,f[2]=0,f[3]=g[1],f},Q.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},Q.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},Q.LDU=function(f,g,b,E){return f[2]=E[2]/E[0],b[0]=E[0],b[1]=E[1],b[3]=E[3]-f[2]*b[1],[f,g,b]},Q.add=function(f,g,b){return f[0]=g[0]+b[0],f[1]=g[1]+b[1],f[2]=g[2]+b[2],f[3]=g[3]+b[3],f},Q.subtract=m,Q.exactEquals=function(f,g){return f[0]===g[0]&&f[1]===g[1]&&f[2]===g[2]&&f[3]===g[3]},Q.equals=function(f,g){var b=f[0],E=f[1],I=f[2],v=f[3],T=g[0],M=g[1],S=g[2],P=g[3];return Math.abs(b-T)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(E-M)<=r.EPSILON*Math.max(1,Math.abs(E),Math.abs(M))&&Math.abs(I-S)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(S))&&Math.abs(v-P)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))},Q.multiplyScalar=function(f,g,b){return f[0]=g[0]*b,f[1]=g[1]*b,f[2]=g[2]*b,f[3]=g[3]*b,f},Q.multiplyScalarAndAdd=function(f,g,b,E){return f[0]=g[0]+b[0]*E,f[1]=g[1]+b[1]*E,f[2]=g[2]+b[2]*E,f[3]=g[3]+b[3]*E,f},Q.sub=Q.mul=void 0;var r=function(f,g){if(f&&f.__esModule)return f;if(f===null||c(f)!=="object"&&typeof f!="function")return{default:f};var b=s(void 0);if(b&&b.has(f))return b.get(f);var E={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in f)if(v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)){var T=I?Object.getOwnPropertyDescriptor(f,v):null;T&&(T.get||T.set)?Object.defineProperty(E,v,T):E[v]=f[v]}return E.default=f,b&&b.set(f,E),E}(X());function s(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(s=function(E){return E?b:g})(f)}function u(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=b[0],S=b[1],P=b[2],R=b[3];return f[0]=E*M+v*S,f[1]=I*M+T*S,f[2]=E*P+v*R,f[3]=I*P+T*R,f}function m(f,g,b){return f[0]=g[0]-b[0],f[1]=g[1]-b[1],f[2]=g[2]-b[2],f[3]=g[3]-b[3],f}return Q.mul=u,Q.sub=m,Q}var te,K={};function se(){if(te)return K;function c(f){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(f)}te=1,Object.defineProperty(K,"__esModule",{value:!0}),K.create=function(){var f=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},K.clone=function(f){var g=new r.ARRAY_TYPE(6);return g[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g},K.copy=function(f,g){return f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3],f[4]=g[4],f[5]=g[5],f},K.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},K.fromValues=function(f,g,b,E,I,v){var T=new r.ARRAY_TYPE(6);return T[0]=f,T[1]=g,T[2]=b,T[3]=E,T[4]=I,T[5]=v,T},K.set=function(f,g,b,E,I,v,T){return f[0]=g,f[1]=b,f[2]=E,f[3]=I,f[4]=v,f[5]=T,f},K.invert=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=g[4],M=g[5],S=b*v-E*I;return S?(f[0]=v*(S=1/S),f[1]=-E*S,f[2]=-I*S,f[3]=b*S,f[4]=(I*M-v*T)*S,f[5]=(E*T-b*M)*S,f):null},K.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},K.multiply=u,K.rotate=function(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=Math.sin(b),R=Math.cos(b);return f[0]=E*R+v*P,f[1]=I*R+T*P,f[2]=E*-P+v*R,f[3]=I*-P+T*R,f[4]=M,f[5]=S,f},K.scale=function(f,g,b){var E=g[1],I=g[2],v=g[3],T=g[4],M=g[5],S=b[0],P=b[1];return f[0]=g[0]*S,f[1]=E*S,f[2]=I*P,f[3]=v*P,f[4]=T,f[5]=M,f},K.translate=function(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=b[0],R=b[1];return f[0]=E,f[1]=I,f[2]=v,f[3]=T,f[4]=E*P+v*R+M,f[5]=I*P+T*R+S,f},K.fromRotation=function(f,g){var b=Math.sin(g),E=Math.cos(g);return f[0]=E,f[1]=b,f[2]=-b,f[3]=E,f[4]=0,f[5]=0,f},K.fromScaling=function(f,g){return f[0]=g[0],f[1]=0,f[2]=0,f[3]=g[1],f[4]=0,f[5]=0,f},K.fromTranslation=function(f,g){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=g[0],f[5]=g[1],f},K.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},K.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},K.add=function(f,g,b){return f[0]=g[0]+b[0],f[1]=g[1]+b[1],f[2]=g[2]+b[2],f[3]=g[3]+b[3],f[4]=g[4]+b[4],f[5]=g[5]+b[5],f},K.subtract=m,K.multiplyScalar=function(f,g,b){return f[0]=g[0]*b,f[1]=g[1]*b,f[2]=g[2]*b,f[3]=g[3]*b,f[4]=g[4]*b,f[5]=g[5]*b,f},K.multiplyScalarAndAdd=function(f,g,b,E){return f[0]=g[0]+b[0]*E,f[1]=g[1]+b[1]*E,f[2]=g[2]+b[2]*E,f[3]=g[3]+b[3]*E,f[4]=g[4]+b[4]*E,f[5]=g[5]+b[5]*E,f},K.exactEquals=function(f,g){return f[0]===g[0]&&f[1]===g[1]&&f[2]===g[2]&&f[3]===g[3]&&f[4]===g[4]&&f[5]===g[5]},K.equals=function(f,g){var b=f[0],E=f[1],I=f[2],v=f[3],T=f[4],M=f[5],S=g[0],P=g[1],R=g[2],L=g[3],N=g[4],G=g[5];return Math.abs(b-S)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(S))&&Math.abs(E-P)<=r.EPSILON*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(I-R)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(R))&&Math.abs(v-L)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(T-N)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(N))&&Math.abs(M-G)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(G))},K.sub=K.mul=void 0;var r=function(f,g){if(f&&f.__esModule)return f;if(f===null||c(f)!=="object"&&typeof f!="function")return{default:f};var b=s(void 0);if(b&&b.has(f))return b.get(f);var E={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in f)if(v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)){var T=I?Object.getOwnPropertyDescriptor(f,v):null;T&&(T.get||T.set)?Object.defineProperty(E,v,T):E[v]=f[v]}return E.default=f,b&&b.set(f,E),E}(X());function s(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(s=function(E){return E?b:g})(f)}function u(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=b[0],R=b[1],L=b[2],N=b[3],G=b[4],W=b[5];return f[0]=E*P+v*R,f[1]=I*P+T*R,f[2]=E*L+v*N,f[3]=I*L+T*N,f[4]=E*G+v*W+M,f[5]=I*G+T*W+S,f}function m(f,g,b){return f[0]=g[0]-b[0],f[1]=g[1]-b[1],f[2]=g[2]-b[2],f[3]=g[3]-b[3],f[4]=g[4]-b[4],f[5]=g[5]-b[5],f}return K.mul=u,K.sub=m,K}var ve,le={};function fe(){if(ve)return le;function c(f){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(f)}ve=1,Object.defineProperty(le,"__esModule",{value:!0}),le.create=function(){var f=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},le.fromMat4=function(f,g){return f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[4],f[4]=g[5],f[5]=g[6],f[6]=g[8],f[7]=g[9],f[8]=g[10],f},le.clone=function(f){var g=new r.ARRAY_TYPE(9);return g[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g[6]=f[6],g[7]=f[7],g[8]=f[8],g},le.copy=function(f,g){return f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3],f[4]=g[4],f[5]=g[5],f[6]=g[6],f[7]=g[7],f[8]=g[8],f},le.fromValues=function(f,g,b,E,I,v,T,M,S){var P=new r.ARRAY_TYPE(9);return P[0]=f,P[1]=g,P[2]=b,P[3]=E,P[4]=I,P[5]=v,P[6]=T,P[7]=M,P[8]=S,P},le.set=function(f,g,b,E,I,v,T,M,S,P){return f[0]=g,f[1]=b,f[2]=E,f[3]=I,f[4]=v,f[5]=T,f[6]=M,f[7]=S,f[8]=P,f},le.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},le.transpose=function(f,g){if(f===g){var b=g[1],E=g[2],I=g[5];f[1]=g[3],f[2]=g[6],f[3]=b,f[5]=g[7],f[6]=E,f[7]=I}else f[0]=g[0],f[1]=g[3],f[2]=g[6],f[3]=g[1],f[4]=g[4],f[5]=g[7],f[6]=g[2],f[7]=g[5],f[8]=g[8];return f},le.invert=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=g[4],M=g[5],S=g[6],P=g[7],R=g[8],L=R*T-M*P,N=-R*v+M*S,G=P*v-T*S,W=b*L+E*N+I*G;return W?(f[0]=L*(W=1/W),f[1]=(-R*E+I*P)*W,f[2]=(M*E-I*T)*W,f[3]=N*W,f[4]=(R*b-I*S)*W,f[5]=(-M*b+I*v)*W,f[6]=G*W,f[7]=(-P*b+E*S)*W,f[8]=(T*b-E*v)*W,f):null},le.adjoint=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=g[4],M=g[5],S=g[6],P=g[7],R=g[8];return f[0]=T*R-M*P,f[1]=I*P-E*R,f[2]=E*M-I*T,f[3]=M*S-v*R,f[4]=b*R-I*S,f[5]=I*v-b*M,f[6]=v*P-T*S,f[7]=E*S-b*P,f[8]=b*T-E*v,f},le.determinant=function(f){var g=f[3],b=f[4],E=f[5],I=f[6],v=f[7],T=f[8];return f[0]*(T*b-E*v)+f[1]*(-T*g+E*I)+f[2]*(v*g-b*I)},le.multiply=u,le.translate=function(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=g[6],R=g[7],L=g[8],N=b[0],G=b[1];return f[0]=E,f[1]=I,f[2]=v,f[3]=T,f[4]=M,f[5]=S,f[6]=N*E+G*T+P,f[7]=N*I+G*M+R,f[8]=N*v+G*S+L,f},le.rotate=function(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=g[6],R=g[7],L=g[8],N=Math.sin(b),G=Math.cos(b);return f[0]=G*E+N*T,f[1]=G*I+N*M,f[2]=G*v+N*S,f[3]=G*T-N*E,f[4]=G*M-N*I,f[5]=G*S-N*v,f[6]=P,f[7]=R,f[8]=L,f},le.scale=function(f,g,b){var E=b[0],I=b[1];return f[0]=E*g[0],f[1]=E*g[1],f[2]=E*g[2],f[3]=I*g[3],f[4]=I*g[4],f[5]=I*g[5],f[6]=g[6],f[7]=g[7],f[8]=g[8],f},le.fromTranslation=function(f,g){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=g[0],f[7]=g[1],f[8]=1,f},le.fromRotation=function(f,g){var b=Math.sin(g),E=Math.cos(g);return f[0]=E,f[1]=b,f[2]=0,f[3]=-b,f[4]=E,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},le.fromScaling=function(f,g){return f[0]=g[0],f[1]=0,f[2]=0,f[3]=0,f[4]=g[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},le.fromMat2d=function(f,g){return f[0]=g[0],f[1]=g[1],f[2]=0,f[3]=g[2],f[4]=g[3],f[5]=0,f[6]=g[4],f[7]=g[5],f[8]=1,f},le.fromQuat=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=b+b,M=E+E,S=I+I,P=b*T,R=E*T,L=E*M,N=I*T,G=I*M,W=I*S,$=v*T,Z=v*M,Y=v*S;return f[0]=1-L-W,f[3]=R-Y,f[6]=N+Z,f[1]=R+Y,f[4]=1-P-W,f[7]=G-$,f[2]=N-Z,f[5]=G+$,f[8]=1-P-L,f},le.normalFromMat4=function(f,g){var b=g[0],E=g[1],I=g[2],v=g[3],T=g[4],M=g[5],S=g[6],P=g[7],R=g[8],L=g[9],N=g[10],G=g[11],W=g[12],$=g[13],Z=g[14],Y=g[15],ce=b*M-E*T,pe=b*S-I*T,ge=b*P-v*T,he=E*S-I*M,Ae=E*P-v*M,_e=I*P-v*S,Me=R*$-L*W,Le=R*Z-N*W,Be=R*Y-G*W,Fe=L*Z-N*$,je=L*Y-G*$,Ye=N*Y-G*Z,Ue=ce*Ye-pe*je+ge*Fe+he*Be-Ae*Le+_e*Me;return Ue?(f[0]=(M*Ye-S*je+P*Fe)*(Ue=1/Ue),f[1]=(S*Be-T*Ye-P*Le)*Ue,f[2]=(T*je-M*Be+P*Me)*Ue,f[3]=(I*je-E*Ye-v*Fe)*Ue,f[4]=(b*Ye-I*Be+v*Le)*Ue,f[5]=(E*Be-b*je-v*Me)*Ue,f[6]=($*_e-Z*Ae+Y*he)*Ue,f[7]=(Z*ge-W*_e-Y*pe)*Ue,f[8]=(W*Ae-$*ge+Y*ce)*Ue,f):null},le.projection=function(f,g,b){return f[0]=2/g,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/b,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},le.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},le.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},le.add=function(f,g,b){return f[0]=g[0]+b[0],f[1]=g[1]+b[1],f[2]=g[2]+b[2],f[3]=g[3]+b[3],f[4]=g[4]+b[4],f[5]=g[5]+b[5],f[6]=g[6]+b[6],f[7]=g[7]+b[7],f[8]=g[8]+b[8],f},le.subtract=m,le.multiplyScalar=function(f,g,b){return f[0]=g[0]*b,f[1]=g[1]*b,f[2]=g[2]*b,f[3]=g[3]*b,f[4]=g[4]*b,f[5]=g[5]*b,f[6]=g[6]*b,f[7]=g[7]*b,f[8]=g[8]*b,f},le.multiplyScalarAndAdd=function(f,g,b,E){return f[0]=g[0]+b[0]*E,f[1]=g[1]+b[1]*E,f[2]=g[2]+b[2]*E,f[3]=g[3]+b[3]*E,f[4]=g[4]+b[4]*E,f[5]=g[5]+b[5]*E,f[6]=g[6]+b[6]*E,f[7]=g[7]+b[7]*E,f[8]=g[8]+b[8]*E,f},le.exactEquals=function(f,g){return f[0]===g[0]&&f[1]===g[1]&&f[2]===g[2]&&f[3]===g[3]&&f[4]===g[4]&&f[5]===g[5]&&f[6]===g[6]&&f[7]===g[7]&&f[8]===g[8]},le.equals=function(f,g){var b=f[0],E=f[1],I=f[2],v=f[3],T=f[4],M=f[5],S=f[6],P=f[7],R=f[8],L=g[0],N=g[1],G=g[2],W=g[3],$=g[4],Z=g[5],Y=g[6],ce=g[7],pe=g[8];return Math.abs(b-L)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(E-N)<=r.EPSILON*Math.max(1,Math.abs(E),Math.abs(N))&&Math.abs(I-G)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(G))&&Math.abs(v-W)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(T-$)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs($))&&Math.abs(M-Z)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(Z))&&Math.abs(S-Y)<=r.EPSILON*Math.max(1,Math.abs(S),Math.abs(Y))&&Math.abs(P-ce)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(ce))&&Math.abs(R-pe)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(pe))},le.sub=le.mul=void 0;var r=function(f,g){if(f&&f.__esModule)return f;if(f===null||c(f)!=="object"&&typeof f!="function")return{default:f};var b=s(void 0);if(b&&b.has(f))return b.get(f);var E={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in f)if(v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)){var T=I?Object.getOwnPropertyDescriptor(f,v):null;T&&(T.get||T.set)?Object.defineProperty(E,v,T):E[v]=f[v]}return E.default=f,b&&b.set(f,E),E}(X());function s(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(s=function(E){return E?b:g})(f)}function u(f,g,b){var E=g[0],I=g[1],v=g[2],T=g[3],M=g[4],S=g[5],P=g[6],R=g[7],L=g[8],N=b[0],G=b[1],W=b[2],$=b[3],Z=b[4],Y=b[5],ce=b[6],pe=b[7],ge=b[8];return f[0]=N*E+G*T+W*P,f[1]=N*I+G*M+W*R,f[2]=N*v+G*S+W*L,f[3]=$*E+Z*T+Y*P,f[4]=$*I+Z*M+Y*R,f[5]=$*v+Z*S+Y*L,f[6]=ce*E+pe*T+ge*P,f[7]=ce*I+pe*M+ge*R,f[8]=ce*v+pe*S+ge*L,f}function m(f,g,b){return f[0]=g[0]-b[0],f[1]=g[1]-b[1],f[2]=g[2]-b[2],f[3]=g[3]-b[3],f[4]=g[4]-b[4],f[5]=g[5]-b[5],f[6]=g[6]-b[6],f[7]=g[7]-b[7],f[8]=g[8]-b[8],f}return le.mul=u,le.sub=m,le}var Te,Ee={};function Ze(){if(Te)return Ee;function c(v){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},c(v)}Te=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.create=function(){var v=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0),v[0]=1,v[5]=1,v[10]=1,v[15]=1,v},Ee.clone=function(v){var T=new r.ARRAY_TYPE(16);return T[0]=v[0],T[1]=v[1],T[2]=v[2],T[3]=v[3],T[4]=v[4],T[5]=v[5],T[6]=v[6],T[7]=v[7],T[8]=v[8],T[9]=v[9],T[10]=v[10],T[11]=v[11],T[12]=v[12],T[13]=v[13],T[14]=v[14],T[15]=v[15],T},Ee.copy=function(v,T){return v[0]=T[0],v[1]=T[1],v[2]=T[2],v[3]=T[3],v[4]=T[4],v[5]=T[5],v[6]=T[6],v[7]=T[7],v[8]=T[8],v[9]=T[9],v[10]=T[10],v[11]=T[11],v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15],v},Ee.fromValues=function(v,T,M,S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge){var he=new r.ARRAY_TYPE(16);return he[0]=v,he[1]=T,he[2]=M,he[3]=S,he[4]=P,he[5]=R,he[6]=L,he[7]=N,he[8]=G,he[9]=W,he[10]=$,he[11]=Z,he[12]=Y,he[13]=ce,he[14]=pe,he[15]=ge,he},Ee.set=function(v,T,M,S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge,he){return v[0]=T,v[1]=M,v[2]=S,v[3]=P,v[4]=R,v[5]=L,v[6]=N,v[7]=G,v[8]=W,v[9]=$,v[10]=Z,v[11]=Y,v[12]=ce,v[13]=pe,v[14]=ge,v[15]=he,v},Ee.identity=u,Ee.transpose=function(v,T){if(v===T){var M=T[1],S=T[2],P=T[3],R=T[6],L=T[7],N=T[11];v[1]=T[4],v[2]=T[8],v[3]=T[12],v[4]=M,v[6]=T[9],v[7]=T[13],v[8]=S,v[9]=R,v[11]=T[14],v[12]=P,v[13]=L,v[14]=N}else v[0]=T[0],v[1]=T[4],v[2]=T[8],v[3]=T[12],v[4]=T[1],v[5]=T[5],v[6]=T[9],v[7]=T[13],v[8]=T[2],v[9]=T[6],v[10]=T[10],v[11]=T[14],v[12]=T[3],v[13]=T[7],v[14]=T[11],v[15]=T[15];return v},Ee.invert=function(v,T){var M=T[0],S=T[1],P=T[2],R=T[3],L=T[4],N=T[5],G=T[6],W=T[7],$=T[8],Z=T[9],Y=T[10],ce=T[11],pe=T[12],ge=T[13],he=T[14],Ae=T[15],_e=M*N-S*L,Me=M*G-P*L,Le=M*W-R*L,Be=S*G-P*N,Fe=S*W-R*N,je=P*W-R*G,Ye=$*ge-Z*pe,Ue=$*he-Y*pe,ot=$*Ae-ce*pe,pt=Z*he-Y*ge,et=Z*Ae-ce*ge,zt=Y*Ae-ce*he,Ot=_e*zt-Me*et+Le*pt+Be*ot-Fe*Ue+je*Ye;return Ot?(v[0]=(N*zt-G*et+W*pt)*(Ot=1/Ot),v[1]=(P*et-S*zt-R*pt)*Ot,v[2]=(ge*je-he*Fe+Ae*Be)*Ot,v[3]=(Y*Fe-Z*je-ce*Be)*Ot,v[4]=(G*ot-L*zt-W*Ue)*Ot,v[5]=(M*zt-P*ot+R*Ue)*Ot,v[6]=(he*Le-pe*je-Ae*Me)*Ot,v[7]=($*je-Y*Le+ce*Me)*Ot,v[8]=(L*et-N*ot+W*Ye)*Ot,v[9]=(S*ot-M*et-R*Ye)*Ot,v[10]=(pe*Fe-ge*Le+Ae*_e)*Ot,v[11]=(Z*Le-$*Fe-ce*_e)*Ot,v[12]=(N*Ue-L*pt-G*Ye)*Ot,v[13]=(M*pt-S*Ue+P*Ye)*Ot,v[14]=(ge*Me-pe*Be-he*_e)*Ot,v[15]=($*Be-Z*Me+Y*_e)*Ot,v):null},Ee.adjoint=function(v,T){var M=T[0],S=T[1],P=T[2],R=T[3],L=T[4],N=T[5],G=T[6],W=T[7],$=T[8],Z=T[9],Y=T[10],ce=T[11],pe=T[12],ge=T[13],he=T[14],Ae=T[15];return v[0]=N*(Y*Ae-ce*he)-Z*(G*Ae-W*he)+ge*(G*ce-W*Y),v[1]=-(S*(Y*Ae-ce*he)-Z*(P*Ae-R*he)+ge*(P*ce-R*Y)),v[2]=S*(G*Ae-W*he)-N*(P*Ae-R*he)+ge*(P*W-R*G),v[3]=-(S*(G*ce-W*Y)-N*(P*ce-R*Y)+Z*(P*W-R*G)),v[4]=-(L*(Y*Ae-ce*he)-$*(G*Ae-W*he)+pe*(G*ce-W*Y)),v[5]=M*(Y*Ae-ce*he)-$*(P*Ae-R*he)+pe*(P*ce-R*Y),v[6]=-(M*(G*Ae-W*he)-L*(P*Ae-R*he)+pe*(P*W-R*G)),v[7]=M*(G*ce-W*Y)-L*(P*ce-R*Y)+$*(P*W-R*G),v[8]=L*(Z*Ae-ce*ge)-$*(N*Ae-W*ge)+pe*(N*ce-W*Z),v[9]=-(M*(Z*Ae-ce*ge)-$*(S*Ae-R*ge)+pe*(S*ce-R*Z)),v[10]=M*(N*Ae-W*ge)-L*(S*Ae-R*ge)+pe*(S*W-R*N),v[11]=-(M*(N*ce-W*Z)-L*(S*ce-R*Z)+$*(S*W-R*N)),v[12]=-(L*(Z*he-Y*ge)-$*(N*he-G*ge)+pe*(N*Y-G*Z)),v[13]=M*(Z*he-Y*ge)-$*(S*he-P*ge)+pe*(S*Y-P*Z),v[14]=-(M*(N*he-G*ge)-L*(S*he-P*ge)+pe*(S*G-P*N)),v[15]=M*(N*Y-G*Z)-L*(S*Y-P*Z)+$*(S*G-P*N),v},Ee.determinant=function(v){var T=v[0],M=v[1],S=v[2],P=v[3],R=v[4],L=v[5],N=v[6],G=v[7],W=v[8],$=v[9],Z=v[10],Y=v[11],ce=v[12],pe=v[13],ge=v[14],he=v[15];return(T*L-M*R)*(Z*he-Y*ge)-(T*N-S*R)*($*he-Y*pe)+(T*G-P*R)*($*ge-Z*pe)+(M*N-S*L)*(W*he-Y*ce)-(M*G-P*L)*(W*ge-Z*ce)+(S*G-P*N)*(W*pe-$*ce)},Ee.multiply=m,Ee.translate=function(v,T,M){var S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge=M[0],he=M[1],Ae=M[2];return T===v?(v[12]=T[0]*ge+T[4]*he+T[8]*Ae+T[12],v[13]=T[1]*ge+T[5]*he+T[9]*Ae+T[13],v[14]=T[2]*ge+T[6]*he+T[10]*Ae+T[14],v[15]=T[3]*ge+T[7]*he+T[11]*Ae+T[15]):(P=T[1],R=T[2],L=T[3],N=T[4],G=T[5],W=T[6],$=T[7],Z=T[8],Y=T[9],ce=T[10],pe=T[11],v[0]=S=T[0],v[1]=P,v[2]=R,v[3]=L,v[4]=N,v[5]=G,v[6]=W,v[7]=$,v[8]=Z,v[9]=Y,v[10]=ce,v[11]=pe,v[12]=S*ge+N*he+Z*Ae+T[12],v[13]=P*ge+G*he+Y*Ae+T[13],v[14]=R*ge+W*he+ce*Ae+T[14],v[15]=L*ge+$*he+pe*Ae+T[15]),v},Ee.scale=function(v,T,M){var S=M[0],P=M[1],R=M[2];return v[0]=T[0]*S,v[1]=T[1]*S,v[2]=T[2]*S,v[3]=T[3]*S,v[4]=T[4]*P,v[5]=T[5]*P,v[6]=T[6]*P,v[7]=T[7]*P,v[8]=T[8]*R,v[9]=T[9]*R,v[10]=T[10]*R,v[11]=T[11]*R,v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15],v},Ee.rotate=function(v,T,M,S){var P,R,L,N,G,W,$,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le,Be,Fe,je,Ye,Ue,ot,pt,et=S[0],zt=S[1],Ot=S[2],At=Math.hypot(et,zt,Ot);return At<r.EPSILON?null:(et*=At=1/At,zt*=At,Ot*=At,P=Math.sin(M),R=Math.cos(M),G=T[1],W=T[2],$=T[3],Y=T[5],ce=T[6],pe=T[7],he=T[9],Ae=T[10],_e=T[11],Me=et*et*(L=1-R)+R,Fe=et*zt*L-Ot*P,je=zt*zt*L+R,Ye=Ot*zt*L+et*P,Ue=et*Ot*L+zt*P,ot=zt*Ot*L-et*P,pt=Ot*Ot*L+R,v[0]=(N=T[0])*Me+(Z=T[4])*(Le=zt*et*L+Ot*P)+(ge=T[8])*(Be=Ot*et*L-zt*P),v[1]=G*Me+Y*Le+he*Be,v[2]=W*Me+ce*Le+Ae*Be,v[3]=$*Me+pe*Le+_e*Be,v[4]=N*Fe+Z*je+ge*Ye,v[5]=G*Fe+Y*je+he*Ye,v[6]=W*Fe+ce*je+Ae*Ye,v[7]=$*Fe+pe*je+_e*Ye,v[8]=N*Ue+Z*ot+ge*pt,v[9]=G*Ue+Y*ot+he*pt,v[10]=W*Ue+ce*ot+Ae*pt,v[11]=$*Ue+pe*ot+_e*pt,T!==v&&(v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15]),v)},Ee.rotateX=function(v,T,M){var S=Math.sin(M),P=Math.cos(M),R=T[4],L=T[5],N=T[6],G=T[7],W=T[8],$=T[9],Z=T[10],Y=T[11];return T!==v&&(v[0]=T[0],v[1]=T[1],v[2]=T[2],v[3]=T[3],v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15]),v[4]=R*P+W*S,v[5]=L*P+$*S,v[6]=N*P+Z*S,v[7]=G*P+Y*S,v[8]=W*P-R*S,v[9]=$*P-L*S,v[10]=Z*P-N*S,v[11]=Y*P-G*S,v},Ee.rotateY=function(v,T,M){var S=Math.sin(M),P=Math.cos(M),R=T[0],L=T[1],N=T[2],G=T[3],W=T[8],$=T[9],Z=T[10],Y=T[11];return T!==v&&(v[4]=T[4],v[5]=T[5],v[6]=T[6],v[7]=T[7],v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15]),v[0]=R*P-W*S,v[1]=L*P-$*S,v[2]=N*P-Z*S,v[3]=G*P-Y*S,v[8]=R*S+W*P,v[9]=L*S+$*P,v[10]=N*S+Z*P,v[11]=G*S+Y*P,v},Ee.rotateZ=function(v,T,M){var S=Math.sin(M),P=Math.cos(M),R=T[0],L=T[1],N=T[2],G=T[3],W=T[4],$=T[5],Z=T[6],Y=T[7];return T!==v&&(v[8]=T[8],v[9]=T[9],v[10]=T[10],v[11]=T[11],v[12]=T[12],v[13]=T[13],v[14]=T[14],v[15]=T[15]),v[0]=R*P+W*S,v[1]=L*P+$*S,v[2]=N*P+Z*S,v[3]=G*P+Y*S,v[4]=W*P-R*S,v[5]=$*P-L*S,v[6]=Z*P-N*S,v[7]=Y*P-G*S,v},Ee.fromTranslation=function(v,T){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=T[0],v[13]=T[1],v[14]=T[2],v[15]=1,v},Ee.fromScaling=function(v,T){return v[0]=T[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=T[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=T[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Ee.fromRotation=function(v,T,M){var S,P,R,L=M[0],N=M[1],G=M[2],W=Math.hypot(L,N,G);return W<r.EPSILON?null:(L*=W=1/W,N*=W,G*=W,S=Math.sin(T),P=Math.cos(T),v[0]=L*L*(R=1-P)+P,v[1]=N*L*R+G*S,v[2]=G*L*R-N*S,v[3]=0,v[4]=L*N*R-G*S,v[5]=N*N*R+P,v[6]=G*N*R+L*S,v[7]=0,v[8]=L*G*R+N*S,v[9]=N*G*R-L*S,v[10]=G*G*R+P,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v)},Ee.fromXRotation=function(v,T){var M=Math.sin(T),S=Math.cos(T);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=S,v[6]=M,v[7]=0,v[8]=0,v[9]=-M,v[10]=S,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Ee.fromYRotation=function(v,T){var M=Math.sin(T),S=Math.cos(T);return v[0]=S,v[1]=0,v[2]=-M,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=M,v[9]=0,v[10]=S,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Ee.fromZRotation=function(v,T){var M=Math.sin(T),S=Math.cos(T);return v[0]=S,v[1]=M,v[2]=0,v[3]=0,v[4]=-M,v[5]=S,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Ee.fromRotationTranslation=f,Ee.fromQuat2=function(v,T){var M=new r.ARRAY_TYPE(3),S=-T[0],P=-T[1],R=-T[2],L=T[3],N=T[4],G=T[5],W=T[6],$=T[7],Z=S*S+P*P+R*R+L*L;return Z>0?(M[0]=2*(N*L+$*S+G*R-W*P)/Z,M[1]=2*(G*L+$*P+W*S-N*R)/Z,M[2]=2*(W*L+$*R+N*P-G*S)/Z):(M[0]=2*(N*L+$*S+G*R-W*P),M[1]=2*(G*L+$*P+W*S-N*R),M[2]=2*(W*L+$*R+N*P-G*S)),f(v,T,M),v},Ee.getTranslation=function(v,T){return v[0]=T[12],v[1]=T[13],v[2]=T[14],v},Ee.getScaling=g,Ee.getRotation=function(v,T){var M=new r.ARRAY_TYPE(3);g(M,T);var S=1/M[0],P=1/M[1],R=1/M[2],L=T[0]*S,N=T[1]*P,G=T[2]*R,W=T[4]*S,$=T[5]*P,Z=T[6]*R,Y=T[8]*S,ce=T[9]*P,pe=T[10]*R,ge=L+$+pe,he=0;return ge>0?(he=2*Math.sqrt(ge+1),v[3]=.25*he,v[0]=(Z-ce)/he,v[1]=(Y-G)/he,v[2]=(N-W)/he):L>$&&L>pe?(he=2*Math.sqrt(1+L-$-pe),v[3]=(Z-ce)/he,v[0]=.25*he,v[1]=(N+W)/he,v[2]=(Y+G)/he):$>pe?(he=2*Math.sqrt(1+$-L-pe),v[3]=(Y-G)/he,v[0]=(N+W)/he,v[1]=.25*he,v[2]=(Z+ce)/he):(he=2*Math.sqrt(1+pe-L-$),v[3]=(N-W)/he,v[0]=(Y+G)/he,v[1]=(Z+ce)/he,v[2]=.25*he),v},Ee.fromRotationTranslationScale=function(v,T,M,S){var P=T[0],R=T[1],L=T[2],N=T[3],G=P+P,W=R+R,$=L+L,Z=P*G,Y=P*W,ce=P*$,pe=R*W,ge=R*$,he=L*$,Ae=N*G,_e=N*W,Me=N*$,Le=S[0],Be=S[1],Fe=S[2];return v[0]=(1-(pe+he))*Le,v[1]=(Y+Me)*Le,v[2]=(ce-_e)*Le,v[3]=0,v[4]=(Y-Me)*Be,v[5]=(1-(Z+he))*Be,v[6]=(ge+Ae)*Be,v[7]=0,v[8]=(ce+_e)*Fe,v[9]=(ge-Ae)*Fe,v[10]=(1-(Z+pe))*Fe,v[11]=0,v[12]=M[0],v[13]=M[1],v[14]=M[2],v[15]=1,v},Ee.fromRotationTranslationScaleOrigin=function(v,T,M,S,P){var R=T[0],L=T[1],N=T[2],G=T[3],W=R+R,$=L+L,Z=N+N,Y=R*W,ce=R*$,pe=R*Z,ge=L*$,he=L*Z,Ae=N*Z,_e=G*W,Me=G*$,Le=G*Z,Be=S[0],Fe=S[1],je=S[2],Ye=P[0],Ue=P[1],ot=P[2],pt=(1-(ge+Ae))*Be,et=(ce+Le)*Be,zt=(pe-Me)*Be,Ot=(ce-Le)*Fe,At=(1-(Y+Ae))*Fe,yt=(he+_e)*Fe,Kt=(pe+Me)*je,Lt=(he-_e)*je,$t=(1-(Y+ge))*je;return v[0]=pt,v[1]=et,v[2]=zt,v[3]=0,v[4]=Ot,v[5]=At,v[6]=yt,v[7]=0,v[8]=Kt,v[9]=Lt,v[10]=$t,v[11]=0,v[12]=M[0]+Ye-(pt*Ye+Ot*Ue+Kt*ot),v[13]=M[1]+Ue-(et*Ye+At*Ue+Lt*ot),v[14]=M[2]+ot-(zt*Ye+yt*Ue+$t*ot),v[15]=1,v},Ee.fromQuat=function(v,T){var M=T[0],S=T[1],P=T[2],R=T[3],L=M+M,N=S+S,G=P+P,W=M*L,$=S*L,Z=S*N,Y=P*L,ce=P*N,pe=P*G,ge=R*L,he=R*N,Ae=R*G;return v[0]=1-Z-pe,v[1]=$+Ae,v[2]=Y-he,v[3]=0,v[4]=$-Ae,v[5]=1-W-pe,v[6]=ce+ge,v[7]=0,v[8]=Y+he,v[9]=ce-ge,v[10]=1-W-Z,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Ee.frustum=function(v,T,M,S,P,R,L){var N=1/(M-T),G=1/(P-S),W=1/(R-L);return v[0]=2*R*N,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=2*R*G,v[6]=0,v[7]=0,v[8]=(M+T)*N,v[9]=(P+S)*G,v[10]=(L+R)*W,v[11]=-1,v[12]=0,v[13]=0,v[14]=L*R*2*W,v[15]=0,v},Ee.perspectiveNO=b,Ee.perspectiveZO=function(v,T,M,S,P){var R,L=1/Math.tan(T/2);return v[0]=L/M,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=L,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=-1,v[12]=0,v[13]=0,v[15]=0,P!=null&&P!==1/0?(v[10]=P*(R=1/(S-P)),v[14]=P*S*R):(v[10]=-1,v[14]=-S),v},Ee.perspectiveFromFieldOfView=function(v,T,M,S){var P=Math.tan(T.upDegrees*Math.PI/180),R=Math.tan(T.downDegrees*Math.PI/180),L=Math.tan(T.leftDegrees*Math.PI/180),N=Math.tan(T.rightDegrees*Math.PI/180),G=2/(L+N),W=2/(P+R);return v[0]=G,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=W,v[6]=0,v[7]=0,v[8]=-(L-N)*G*.5,v[9]=(P-R)*W*.5,v[10]=S/(M-S),v[11]=-1,v[12]=0,v[13]=0,v[14]=S*M/(M-S),v[15]=0,v},Ee.orthoNO=E,Ee.orthoZO=function(v,T,M,S,P,R,L){var N=1/(T-M),G=1/(S-P),W=1/(R-L);return v[0]=-2*N,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*G,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=W,v[11]=0,v[12]=(T+M)*N,v[13]=(P+S)*G,v[14]=R*W,v[15]=1,v},Ee.lookAt=function(v,T,M,S){var P,R,L,N,G,W,$,Z,Y,ce,pe=T[0],ge=T[1],he=T[2],Ae=S[0],_e=S[1],Me=S[2],Le=M[0],Be=M[1],Fe=M[2];return Math.abs(pe-Le)<r.EPSILON&&Math.abs(ge-Be)<r.EPSILON&&Math.abs(he-Fe)<r.EPSILON?u(v):($=pe-Le,Z=ge-Be,Y=he-Fe,P=_e*(Y*=ce=1/Math.hypot($,Z,Y))-Me*(Z*=ce),R=Me*($*=ce)-Ae*Y,L=Ae*Z-_e*$,(ce=Math.hypot(P,R,L))?(P*=ce=1/ce,R*=ce,L*=ce):(P=0,R=0,L=0),N=Z*L-Y*R,G=Y*P-$*L,W=$*R-Z*P,(ce=Math.hypot(N,G,W))?(N*=ce=1/ce,G*=ce,W*=ce):(N=0,G=0,W=0),v[0]=P,v[1]=N,v[2]=$,v[3]=0,v[4]=R,v[5]=G,v[6]=Z,v[7]=0,v[8]=L,v[9]=W,v[10]=Y,v[11]=0,v[12]=-(P*pe+R*ge+L*he),v[13]=-(N*pe+G*ge+W*he),v[14]=-($*pe+Z*ge+Y*he),v[15]=1,v)},Ee.targetTo=function(v,T,M,S){var P=T[0],R=T[1],L=T[2],N=S[0],G=S[1],W=S[2],$=P-M[0],Z=R-M[1],Y=L-M[2],ce=$*$+Z*Z+Y*Y;ce>0&&($*=ce=1/Math.sqrt(ce),Z*=ce,Y*=ce);var pe=G*Y-W*Z,ge=W*$-N*Y,he=N*Z-G*$;return(ce=pe*pe+ge*ge+he*he)>0&&(pe*=ce=1/Math.sqrt(ce),ge*=ce,he*=ce),v[0]=pe,v[1]=ge,v[2]=he,v[3]=0,v[4]=Z*he-Y*ge,v[5]=Y*pe-$*he,v[6]=$*ge-Z*pe,v[7]=0,v[8]=$,v[9]=Z,v[10]=Y,v[11]=0,v[12]=P,v[13]=R,v[14]=L,v[15]=1,v},Ee.str=function(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"},Ee.frob=function(v){return Math.hypot(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},Ee.add=function(v,T,M){return v[0]=T[0]+M[0],v[1]=T[1]+M[1],v[2]=T[2]+M[2],v[3]=T[3]+M[3],v[4]=T[4]+M[4],v[5]=T[5]+M[5],v[6]=T[6]+M[6],v[7]=T[7]+M[7],v[8]=T[8]+M[8],v[9]=T[9]+M[9],v[10]=T[10]+M[10],v[11]=T[11]+M[11],v[12]=T[12]+M[12],v[13]=T[13]+M[13],v[14]=T[14]+M[14],v[15]=T[15]+M[15],v},Ee.subtract=I,Ee.multiplyScalar=function(v,T,M){return v[0]=T[0]*M,v[1]=T[1]*M,v[2]=T[2]*M,v[3]=T[3]*M,v[4]=T[4]*M,v[5]=T[5]*M,v[6]=T[6]*M,v[7]=T[7]*M,v[8]=T[8]*M,v[9]=T[9]*M,v[10]=T[10]*M,v[11]=T[11]*M,v[12]=T[12]*M,v[13]=T[13]*M,v[14]=T[14]*M,v[15]=T[15]*M,v},Ee.multiplyScalarAndAdd=function(v,T,M,S){return v[0]=T[0]+M[0]*S,v[1]=T[1]+M[1]*S,v[2]=T[2]+M[2]*S,v[3]=T[3]+M[3]*S,v[4]=T[4]+M[4]*S,v[5]=T[5]+M[5]*S,v[6]=T[6]+M[6]*S,v[7]=T[7]+M[7]*S,v[8]=T[8]+M[8]*S,v[9]=T[9]+M[9]*S,v[10]=T[10]+M[10]*S,v[11]=T[11]+M[11]*S,v[12]=T[12]+M[12]*S,v[13]=T[13]+M[13]*S,v[14]=T[14]+M[14]*S,v[15]=T[15]+M[15]*S,v},Ee.exactEquals=function(v,T){return v[0]===T[0]&&v[1]===T[1]&&v[2]===T[2]&&v[3]===T[3]&&v[4]===T[4]&&v[5]===T[5]&&v[6]===T[6]&&v[7]===T[7]&&v[8]===T[8]&&v[9]===T[9]&&v[10]===T[10]&&v[11]===T[11]&&v[12]===T[12]&&v[13]===T[13]&&v[14]===T[14]&&v[15]===T[15]},Ee.equals=function(v,T){var M=v[0],S=v[1],P=v[2],R=v[3],L=v[4],N=v[5],G=v[6],W=v[7],$=v[8],Z=v[9],Y=v[10],ce=v[11],pe=v[12],ge=v[13],he=v[14],Ae=v[15],_e=T[0],Me=T[1],Le=T[2],Be=T[3],Fe=T[4],je=T[5],Ye=T[6],Ue=T[7],ot=T[8],pt=T[9],et=T[10],zt=T[11],Ot=T[12],At=T[13],yt=T[14],Kt=T[15];return Math.abs(M-_e)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(_e))&&Math.abs(S-Me)<=r.EPSILON*Math.max(1,Math.abs(S),Math.abs(Me))&&Math.abs(P-Le)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(Le))&&Math.abs(R-Be)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(Be))&&Math.abs(L-Fe)<=r.EPSILON*Math.max(1,Math.abs(L),Math.abs(Fe))&&Math.abs(N-je)<=r.EPSILON*Math.max(1,Math.abs(N),Math.abs(je))&&Math.abs(G-Ye)<=r.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ye))&&Math.abs(W-Ue)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ue))&&Math.abs($-ot)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(ot))&&Math.abs(Z-pt)<=r.EPSILON*Math.max(1,Math.abs(Z),Math.abs(pt))&&Math.abs(Y-et)<=r.EPSILON*Math.max(1,Math.abs(Y),Math.abs(et))&&Math.abs(ce-zt)<=r.EPSILON*Math.max(1,Math.abs(ce),Math.abs(zt))&&Math.abs(pe-Ot)<=r.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Ot))&&Math.abs(ge-At)<=r.EPSILON*Math.max(1,Math.abs(ge),Math.abs(At))&&Math.abs(he-yt)<=r.EPSILON*Math.max(1,Math.abs(he),Math.abs(yt))&&Math.abs(Ae-Kt)<=r.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Kt))},Ee.sub=Ee.mul=Ee.ortho=Ee.perspective=void 0;var r=function(v,T){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var M=s(void 0);if(M&&M.has(v))return M.get(v);var S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in v)if(R!=="default"&&Object.prototype.hasOwnProperty.call(v,R)){var L=P?Object.getOwnPropertyDescriptor(v,R):null;L&&(L.get||L.set)?Object.defineProperty(S,R,L):S[R]=v[R]}return S.default=v,M&&M.set(v,S),S}(X());function s(v){if(typeof WeakMap!="function")return null;var T=new WeakMap,M=new WeakMap;return(s=function(S){return S?M:T})(v)}function u(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function m(v,T,M){var S=T[0],P=T[1],R=T[2],L=T[3],N=T[4],G=T[5],W=T[6],$=T[7],Z=T[8],Y=T[9],ce=T[10],pe=T[11],ge=T[12],he=T[13],Ae=T[14],_e=T[15],Me=M[0],Le=M[1],Be=M[2],Fe=M[3];return v[0]=Me*S+Le*N+Be*Z+Fe*ge,v[1]=Me*P+Le*G+Be*Y+Fe*he,v[2]=Me*R+Le*W+Be*ce+Fe*Ae,v[3]=Me*L+Le*$+Be*pe+Fe*_e,v[4]=(Me=M[4])*S+(Le=M[5])*N+(Be=M[6])*Z+(Fe=M[7])*ge,v[5]=Me*P+Le*G+Be*Y+Fe*he,v[6]=Me*R+Le*W+Be*ce+Fe*Ae,v[7]=Me*L+Le*$+Be*pe+Fe*_e,v[8]=(Me=M[8])*S+(Le=M[9])*N+(Be=M[10])*Z+(Fe=M[11])*ge,v[9]=Me*P+Le*G+Be*Y+Fe*he,v[10]=Me*R+Le*W+Be*ce+Fe*Ae,v[11]=Me*L+Le*$+Be*pe+Fe*_e,v[12]=(Me=M[12])*S+(Le=M[13])*N+(Be=M[14])*Z+(Fe=M[15])*ge,v[13]=Me*P+Le*G+Be*Y+Fe*he,v[14]=Me*R+Le*W+Be*ce+Fe*Ae,v[15]=Me*L+Le*$+Be*pe+Fe*_e,v}function f(v,T,M){var S=T[0],P=T[1],R=T[2],L=T[3],N=S+S,G=P+P,W=R+R,$=S*N,Z=S*G,Y=S*W,ce=P*G,pe=P*W,ge=R*W,he=L*N,Ae=L*G,_e=L*W;return v[0]=1-(ce+ge),v[1]=Z+_e,v[2]=Y-Ae,v[3]=0,v[4]=Z-_e,v[5]=1-($+ge),v[6]=pe+he,v[7]=0,v[8]=Y+Ae,v[9]=pe-he,v[10]=1-($+ce),v[11]=0,v[12]=M[0],v[13]=M[1],v[14]=M[2],v[15]=1,v}function g(v,T){var M=T[4],S=T[5],P=T[6],R=T[8],L=T[9],N=T[10];return v[0]=Math.hypot(T[0],T[1],T[2]),v[1]=Math.hypot(M,S,P),v[2]=Math.hypot(R,L,N),v}function b(v,T,M,S,P){var R,L=1/Math.tan(T/2);return v[0]=L/M,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=L,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=-1,v[12]=0,v[13]=0,v[15]=0,P!=null&&P!==1/0?(v[10]=(P+S)*(R=1/(S-P)),v[14]=2*P*S*R):(v[10]=-1,v[14]=-2*S),v}function E(v,T,M,S,P,R,L){var N=1/(T-M),G=1/(S-P),W=1/(R-L);return v[0]=-2*N,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*G,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*W,v[11]=0,v[12]=(T+M)*N,v[13]=(P+S)*G,v[14]=(L+R)*W,v[15]=1,v}function I(v,T,M){return v[0]=T[0]-M[0],v[1]=T[1]-M[1],v[2]=T[2]-M[2],v[3]=T[3]-M[3],v[4]=T[4]-M[4],v[5]=T[5]-M[5],v[6]=T[6]-M[6],v[7]=T[7]-M[7],v[8]=T[8]-M[8],v[9]=T[9]-M[9],v[10]=T[10]-M[10],v[11]=T[11]-M[11],v[12]=T[12]-M[12],v[13]=T[13]-M[13],v[14]=T[14]-M[14],v[15]=T[15]-M[15],v}return Ee.perspective=b,Ee.ortho=E,Ee.mul=m,Ee.sub=I,Ee}var st,We={},Xe={};function St(){if(st)return Xe;function c(P){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},c(P)}st=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.create=u,Xe.clone=function(P){var R=new r.ARRAY_TYPE(3);return R[0]=P[0],R[1]=P[1],R[2]=P[2],R},Xe.length=m,Xe.fromValues=function(P,R,L){var N=new r.ARRAY_TYPE(3);return N[0]=P,N[1]=R,N[2]=L,N},Xe.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P[2]=R[2],P},Xe.set=function(P,R,L,N){return P[0]=R,P[1]=L,P[2]=N,P},Xe.add=function(P,R,L){return P[0]=R[0]+L[0],P[1]=R[1]+L[1],P[2]=R[2]+L[2],P},Xe.subtract=f,Xe.multiply=g,Xe.divide=b,Xe.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P[2]=Math.ceil(R[2]),P},Xe.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P[2]=Math.floor(R[2]),P},Xe.min=function(P,R,L){return P[0]=Math.min(R[0],L[0]),P[1]=Math.min(R[1],L[1]),P[2]=Math.min(R[2],L[2]),P},Xe.max=function(P,R,L){return P[0]=Math.max(R[0],L[0]),P[1]=Math.max(R[1],L[1]),P[2]=Math.max(R[2],L[2]),P},Xe.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P[2]=Math.round(R[2]),P},Xe.scale=function(P,R,L){return P[0]=R[0]*L,P[1]=R[1]*L,P[2]=R[2]*L,P},Xe.scaleAndAdd=function(P,R,L,N){return P[0]=R[0]+L[0]*N,P[1]=R[1]+L[1]*N,P[2]=R[2]+L[2]*N,P},Xe.distance=E,Xe.squaredDistance=I,Xe.squaredLength=v,Xe.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P[2]=-R[2],P},Xe.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P[2]=1/R[2],P},Xe.normalize=function(P,R){var L=R[0],N=R[1],G=R[2],W=L*L+N*N+G*G;return W>0&&(W=1/Math.sqrt(W)),P[0]=R[0]*W,P[1]=R[1]*W,P[2]=R[2]*W,P},Xe.dot=T,Xe.cross=function(P,R,L){var N=R[0],G=R[1],W=R[2],$=L[0],Z=L[1],Y=L[2];return P[0]=G*Y-W*Z,P[1]=W*$-N*Y,P[2]=N*Z-G*$,P},Xe.lerp=function(P,R,L,N){var G=R[0],W=R[1],$=R[2];return P[0]=G+N*(L[0]-G),P[1]=W+N*(L[1]-W),P[2]=$+N*(L[2]-$),P},Xe.hermite=function(P,R,L,N,G,W){var $=W*W,Z=$*(2*W-3)+1,Y=$*(W-2)+W,ce=$*(W-1),pe=$*(3-2*W);return P[0]=R[0]*Z+L[0]*Y+N[0]*ce+G[0]*pe,P[1]=R[1]*Z+L[1]*Y+N[1]*ce+G[1]*pe,P[2]=R[2]*Z+L[2]*Y+N[2]*ce+G[2]*pe,P},Xe.bezier=function(P,R,L,N,G,W){var $=1-W,Z=$*$,Y=W*W,ce=Z*$,pe=3*W*Z,ge=3*Y*$,he=Y*W;return P[0]=R[0]*ce+L[0]*pe+N[0]*ge+G[0]*he,P[1]=R[1]*ce+L[1]*pe+N[1]*ge+G[1]*he,P[2]=R[2]*ce+L[2]*pe+N[2]*ge+G[2]*he,P},Xe.random=function(P,R){R=R||1;var L=2*r.RANDOM()*Math.PI,N=2*r.RANDOM()-1,G=Math.sqrt(1-N*N)*R;return P[0]=Math.cos(L)*G,P[1]=Math.sin(L)*G,P[2]=N*R,P},Xe.transformMat4=function(P,R,L){var N=R[0],G=R[1],W=R[2],$=L[3]*N+L[7]*G+L[11]*W+L[15];return P[0]=(L[0]*N+L[4]*G+L[8]*W+L[12])/($=$||1),P[1]=(L[1]*N+L[5]*G+L[9]*W+L[13])/$,P[2]=(L[2]*N+L[6]*G+L[10]*W+L[14])/$,P},Xe.transformMat3=function(P,R,L){var N=R[0],G=R[1],W=R[2];return P[0]=N*L[0]+G*L[3]+W*L[6],P[1]=N*L[1]+G*L[4]+W*L[7],P[2]=N*L[2]+G*L[5]+W*L[8],P},Xe.transformQuat=function(P,R,L){var N=L[0],G=L[1],W=L[2],$=R[0],Z=R[1],Y=R[2],ce=G*Y-W*Z,pe=W*$-N*Y,ge=N*Z-G*$,he=G*ge-W*pe,Ae=W*ce-N*ge,_e=N*pe-G*ce,Me=2*L[3];return pe*=Me,ge*=Me,Ae*=2,_e*=2,P[0]=$+(ce*=Me)+(he*=2),P[1]=Z+pe+Ae,P[2]=Y+ge+_e,P},Xe.rotateX=function(P,R,L,N){var G=[],W=[];return G[0]=R[0]-L[0],G[1]=R[1]-L[1],G[2]=R[2]-L[2],W[0]=G[0],W[1]=G[1]*Math.cos(N)-G[2]*Math.sin(N),W[2]=G[1]*Math.sin(N)+G[2]*Math.cos(N),P[0]=W[0]+L[0],P[1]=W[1]+L[1],P[2]=W[2]+L[2],P},Xe.rotateY=function(P,R,L,N){var G=[],W=[];return G[0]=R[0]-L[0],G[1]=R[1]-L[1],G[2]=R[2]-L[2],W[0]=G[2]*Math.sin(N)+G[0]*Math.cos(N),W[1]=G[1],W[2]=G[2]*Math.cos(N)-G[0]*Math.sin(N),P[0]=W[0]+L[0],P[1]=W[1]+L[1],P[2]=W[2]+L[2],P},Xe.rotateZ=function(P,R,L,N){var G=[],W=[];return G[0]=R[0]-L[0],G[1]=R[1]-L[1],G[2]=R[2]-L[2],W[0]=G[0]*Math.cos(N)-G[1]*Math.sin(N),W[1]=G[0]*Math.sin(N)+G[1]*Math.cos(N),W[2]=G[2],P[0]=W[0]+L[0],P[1]=W[1]+L[1],P[2]=W[2]+L[2],P},Xe.angle=function(P,R){var L=P[0],N=P[1],G=P[2],W=R[0],$=R[1],Z=R[2],Y=Math.sqrt(L*L+N*N+G*G)*Math.sqrt(W*W+$*$+Z*Z),ce=Y&&T(P,R)/Y;return Math.acos(Math.min(Math.max(ce,-1),1))},Xe.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P},Xe.str=function(P){return"vec3("+P[0]+", "+P[1]+", "+P[2]+")"},Xe.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]&&P[2]===R[2]},Xe.equals=function(P,R){var L=P[0],N=P[1],G=P[2],W=R[0],$=R[1],Z=R[2];return Math.abs(L-W)<=r.EPSILON*Math.max(1,Math.abs(L),Math.abs(W))&&Math.abs(N-$)<=r.EPSILON*Math.max(1,Math.abs(N),Math.abs($))&&Math.abs(G-Z)<=r.EPSILON*Math.max(1,Math.abs(G),Math.abs(Z))},Xe.forEach=Xe.sqrLen=Xe.len=Xe.sqrDist=Xe.dist=Xe.div=Xe.mul=Xe.sub=void 0;var r=function(P,R){if(P&&P.__esModule)return P;if(P===null||c(P)!=="object"&&typeof P!="function")return{default:P};var L=s(void 0);if(L&&L.has(P))return L.get(P);var N={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in P)if(W!=="default"&&Object.prototype.hasOwnProperty.call(P,W)){var $=G?Object.getOwnPropertyDescriptor(P,W):null;$&&($.get||$.set)?Object.defineProperty(N,W,$):N[W]=P[W]}return N.default=P,L&&L.set(P,N),N}(X());function s(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,L=new WeakMap;return(s=function(N){return N?L:R})(P)}function u(){var P=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0),P}function m(P){return Math.hypot(P[0],P[1],P[2])}function f(P,R,L){return P[0]=R[0]-L[0],P[1]=R[1]-L[1],P[2]=R[2]-L[2],P}function g(P,R,L){return P[0]=R[0]*L[0],P[1]=R[1]*L[1],P[2]=R[2]*L[2],P}function b(P,R,L){return P[0]=R[0]/L[0],P[1]=R[1]/L[1],P[2]=R[2]/L[2],P}function E(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1],R[2]-P[2])}function I(P,R){var L=R[0]-P[0],N=R[1]-P[1],G=R[2]-P[2];return L*L+N*N+G*G}function v(P){var R=P[0],L=P[1],N=P[2];return R*R+L*L+N*N}function T(P,R){return P[0]*R[0]+P[1]*R[1]+P[2]*R[2]}Xe.sub=f,Xe.mul=g,Xe.div=b,Xe.dist=E,Xe.sqrDist=I,Xe.len=m,Xe.sqrLen=v;var M,S=(M=u(),function(P,R,L,N,G,W){var $,Z;for(R||(R=3),L||(L=0),Z=N?Math.min(N*R+L,P.length):P.length,$=L;$<Z;$+=R)M[0]=P[$],M[1]=P[$+1],M[2]=P[$+2],G(M,M,W),P[$]=M[0],P[$+1]=M[1],P[$+2]=M[2];return P});return Xe.forEach=S,Xe}var Mt,Pt,ht={};function kt(){if(Mt)return ht;function c(S){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(S)}Mt=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.create=u,ht.clone=function(S){var P=new r.ARRAY_TYPE(4);return P[0]=S[0],P[1]=S[1],P[2]=S[2],P[3]=S[3],P},ht.fromValues=function(S,P,R,L){var N=new r.ARRAY_TYPE(4);return N[0]=S,N[1]=P,N[2]=R,N[3]=L,N},ht.copy=function(S,P){return S[0]=P[0],S[1]=P[1],S[2]=P[2],S[3]=P[3],S},ht.set=function(S,P,R,L,N){return S[0]=P,S[1]=R,S[2]=L,S[3]=N,S},ht.add=function(S,P,R){return S[0]=P[0]+R[0],S[1]=P[1]+R[1],S[2]=P[2]+R[2],S[3]=P[3]+R[3],S},ht.subtract=m,ht.multiply=f,ht.divide=g,ht.ceil=function(S,P){return S[0]=Math.ceil(P[0]),S[1]=Math.ceil(P[1]),S[2]=Math.ceil(P[2]),S[3]=Math.ceil(P[3]),S},ht.floor=function(S,P){return S[0]=Math.floor(P[0]),S[1]=Math.floor(P[1]),S[2]=Math.floor(P[2]),S[3]=Math.floor(P[3]),S},ht.min=function(S,P,R){return S[0]=Math.min(P[0],R[0]),S[1]=Math.min(P[1],R[1]),S[2]=Math.min(P[2],R[2]),S[3]=Math.min(P[3],R[3]),S},ht.max=function(S,P,R){return S[0]=Math.max(P[0],R[0]),S[1]=Math.max(P[1],R[1]),S[2]=Math.max(P[2],R[2]),S[3]=Math.max(P[3],R[3]),S},ht.round=function(S,P){return S[0]=Math.round(P[0]),S[1]=Math.round(P[1]),S[2]=Math.round(P[2]),S[3]=Math.round(P[3]),S},ht.scale=function(S,P,R){return S[0]=P[0]*R,S[1]=P[1]*R,S[2]=P[2]*R,S[3]=P[3]*R,S},ht.scaleAndAdd=function(S,P,R,L){return S[0]=P[0]+R[0]*L,S[1]=P[1]+R[1]*L,S[2]=P[2]+R[2]*L,S[3]=P[3]+R[3]*L,S},ht.distance=b,ht.squaredDistance=E,ht.length=I,ht.squaredLength=v,ht.negate=function(S,P){return S[0]=-P[0],S[1]=-P[1],S[2]=-P[2],S[3]=-P[3],S},ht.inverse=function(S,P){return S[0]=1/P[0],S[1]=1/P[1],S[2]=1/P[2],S[3]=1/P[3],S},ht.normalize=function(S,P){var R=P[0],L=P[1],N=P[2],G=P[3],W=R*R+L*L+N*N+G*G;return W>0&&(W=1/Math.sqrt(W)),S[0]=R*W,S[1]=L*W,S[2]=N*W,S[3]=G*W,S},ht.dot=function(S,P){return S[0]*P[0]+S[1]*P[1]+S[2]*P[2]+S[3]*P[3]},ht.cross=function(S,P,R,L){var N=R[0]*L[1]-R[1]*L[0],G=R[0]*L[2]-R[2]*L[0],W=R[0]*L[3]-R[3]*L[0],$=R[1]*L[2]-R[2]*L[1],Z=R[1]*L[3]-R[3]*L[1],Y=R[2]*L[3]-R[3]*L[2],ce=P[0],pe=P[1],ge=P[2],he=P[3];return S[0]=pe*Y-ge*Z+he*$,S[1]=-ce*Y+ge*W-he*G,S[2]=ce*Z-pe*W+he*N,S[3]=-ce*$+pe*G-ge*N,S},ht.lerp=function(S,P,R,L){var N=P[0],G=P[1],W=P[2],$=P[3];return S[0]=N+L*(R[0]-N),S[1]=G+L*(R[1]-G),S[2]=W+L*(R[2]-W),S[3]=$+L*(R[3]-$),S},ht.random=function(S,P){var R,L,N,G,W,$;P=P||1;do W=(R=2*r.RANDOM()-1)*R+(L=2*r.RANDOM()-1)*L;while(W>=1);do $=(N=2*r.RANDOM()-1)*N+(G=2*r.RANDOM()-1)*G;while($>=1);var Z=Math.sqrt((1-W)/$);return S[0]=P*R,S[1]=P*L,S[2]=P*N*Z,S[3]=P*G*Z,S},ht.transformMat4=function(S,P,R){var L=P[0],N=P[1],G=P[2],W=P[3];return S[0]=R[0]*L+R[4]*N+R[8]*G+R[12]*W,S[1]=R[1]*L+R[5]*N+R[9]*G+R[13]*W,S[2]=R[2]*L+R[6]*N+R[10]*G+R[14]*W,S[3]=R[3]*L+R[7]*N+R[11]*G+R[15]*W,S},ht.transformQuat=function(S,P,R){var L=P[0],N=P[1],G=P[2],W=R[0],$=R[1],Z=R[2],Y=R[3],ce=Y*L+$*G-Z*N,pe=Y*N+Z*L-W*G,ge=Y*G+W*N-$*L,he=-W*L-$*N-Z*G;return S[0]=ce*Y+he*-W+pe*-Z-ge*-$,S[1]=pe*Y+he*-$+ge*-W-ce*-Z,S[2]=ge*Y+he*-Z+ce*-$-pe*-W,S[3]=P[3],S},ht.zero=function(S){return S[0]=0,S[1]=0,S[2]=0,S[3]=0,S},ht.str=function(S){return"vec4("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+")"},ht.exactEquals=function(S,P){return S[0]===P[0]&&S[1]===P[1]&&S[2]===P[2]&&S[3]===P[3]},ht.equals=function(S,P){var R=S[0],L=S[1],N=S[2],G=S[3],W=P[0],$=P[1],Z=P[2],Y=P[3];return Math.abs(R-W)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(W))&&Math.abs(L-$)<=r.EPSILON*Math.max(1,Math.abs(L),Math.abs($))&&Math.abs(N-Z)<=r.EPSILON*Math.max(1,Math.abs(N),Math.abs(Z))&&Math.abs(G-Y)<=r.EPSILON*Math.max(1,Math.abs(G),Math.abs(Y))},ht.forEach=ht.sqrLen=ht.len=ht.sqrDist=ht.dist=ht.div=ht.mul=ht.sub=void 0;var r=function(S,P){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var R=s(void 0);if(R&&R.has(S))return R.get(S);var L={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in S)if(G!=="default"&&Object.prototype.hasOwnProperty.call(S,G)){var W=N?Object.getOwnPropertyDescriptor(S,G):null;W&&(W.get||W.set)?Object.defineProperty(L,G,W):L[G]=S[G]}return L.default=S,R&&R.set(S,L),L}(X());function s(S){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(s=function(L){return L?R:P})(S)}function u(){var S=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(S[0]=0,S[1]=0,S[2]=0,S[3]=0),S}function m(S,P,R){return S[0]=P[0]-R[0],S[1]=P[1]-R[1],S[2]=P[2]-R[2],S[3]=P[3]-R[3],S}function f(S,P,R){return S[0]=P[0]*R[0],S[1]=P[1]*R[1],S[2]=P[2]*R[2],S[3]=P[3]*R[3],S}function g(S,P,R){return S[0]=P[0]/R[0],S[1]=P[1]/R[1],S[2]=P[2]/R[2],S[3]=P[3]/R[3],S}function b(S,P){return Math.hypot(P[0]-S[0],P[1]-S[1],P[2]-S[2],P[3]-S[3])}function E(S,P){var R=P[0]-S[0],L=P[1]-S[1],N=P[2]-S[2],G=P[3]-S[3];return R*R+L*L+N*N+G*G}function I(S){return Math.hypot(S[0],S[1],S[2],S[3])}function v(S){var P=S[0],R=S[1],L=S[2],N=S[3];return P*P+R*R+L*L+N*N}ht.sub=m,ht.mul=f,ht.div=g,ht.dist=b,ht.sqrDist=E,ht.len=I,ht.sqrLen=v;var T,M=(T=u(),function(S,P,R,L,N,G){var W,$;for(P||(P=4),R||(R=0),$=L?Math.min(L*P+R,S.length):S.length,W=R;W<$;W+=P)T[0]=S[W],T[1]=S[W+1],T[2]=S[W+2],T[3]=S[W+3],N(T,T,G),S[W]=T[0],S[W+1]=T[1],S[W+2]=T[2],S[W+3]=T[3];return S});return ht.forEach=M,ht}function mt(){if(Pt)return We;function c(_e){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Me){return typeof Me}:function(Me){return Me&&typeof Symbol=="function"&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me},c(_e)}Pt=1,Object.defineProperty(We,"__esModule",{value:!0}),We.create=b,We.identity=function(_e){return _e[0]=0,_e[1]=0,_e[2]=0,_e[3]=1,_e},We.setAxisAngle=E,We.getAxisAngle=function(_e,Me){var Le=2*Math.acos(Me[3]),Be=Math.sin(Le/2);return Be>r.EPSILON?(_e[0]=Me[0]/Be,_e[1]=Me[1]/Be,_e[2]=Me[2]/Be):(_e[0]=1,_e[1]=0,_e[2]=0),Le},We.getAngle=function(_e,Me){var Le=R(_e,Me);return Math.acos(2*Le*Le-1)},We.multiply=I,We.rotateX=function(_e,Me,Le){Le*=.5;var Be=Me[0],Fe=Me[1],je=Me[2],Ye=Me[3],Ue=Math.sin(Le),ot=Math.cos(Le);return _e[0]=Be*ot+Ye*Ue,_e[1]=Fe*ot+je*Ue,_e[2]=je*ot-Fe*Ue,_e[3]=Ye*ot-Be*Ue,_e},We.rotateY=function(_e,Me,Le){Le*=.5;var Be=Me[0],Fe=Me[1],je=Me[2],Ye=Me[3],Ue=Math.sin(Le),ot=Math.cos(Le);return _e[0]=Be*ot-je*Ue,_e[1]=Fe*ot+Ye*Ue,_e[2]=je*ot+Be*Ue,_e[3]=Ye*ot-Fe*Ue,_e},We.rotateZ=function(_e,Me,Le){Le*=.5;var Be=Me[0],Fe=Me[1],je=Me[2],Ye=Me[3],Ue=Math.sin(Le),ot=Math.cos(Le);return _e[0]=Be*ot+Fe*Ue,_e[1]=Fe*ot-Be*Ue,_e[2]=je*ot+Ye*Ue,_e[3]=Ye*ot-je*Ue,_e},We.calculateW=function(_e,Me){var Le=Me[0],Be=Me[1],Fe=Me[2];return _e[0]=Le,_e[1]=Be,_e[2]=Fe,_e[3]=Math.sqrt(Math.abs(1-Le*Le-Be*Be-Fe*Fe)),_e},We.exp=v,We.ln=T,We.pow=function(_e,Me,Le){return T(_e,Me),P(_e,_e,Le),v(_e,_e),_e},We.slerp=M,We.random=function(_e){var Me=r.RANDOM(),Le=r.RANDOM(),Be=r.RANDOM(),Fe=Math.sqrt(1-Me),je=Math.sqrt(Me);return _e[0]=Fe*Math.sin(2*Math.PI*Le),_e[1]=Fe*Math.cos(2*Math.PI*Le),_e[2]=je*Math.sin(2*Math.PI*Be),_e[3]=je*Math.cos(2*Math.PI*Be),_e},We.invert=function(_e,Me){var Le=Me[0],Be=Me[1],Fe=Me[2],je=Me[3],Ye=Le*Le+Be*Be+Fe*Fe+je*je,Ue=Ye?1/Ye:0;return _e[0]=-Le*Ue,_e[1]=-Be*Ue,_e[2]=-Fe*Ue,_e[3]=je*Ue,_e},We.conjugate=function(_e,Me){return _e[0]=-Me[0],_e[1]=-Me[1],_e[2]=-Me[2],_e[3]=Me[3],_e},We.fromMat3=S,We.fromEuler=function(_e,Me,Le,Be){var Fe=.5*Math.PI/180;Me*=Fe,Le*=Fe,Be*=Fe;var je=Math.sin(Me),Ye=Math.cos(Me),Ue=Math.sin(Le),ot=Math.cos(Le),pt=Math.sin(Be),et=Math.cos(Be);return _e[0]=je*ot*et-Ye*Ue*pt,_e[1]=Ye*Ue*et+je*ot*pt,_e[2]=Ye*ot*pt-je*Ue*et,_e[3]=Ye*ot*et+je*Ue*pt,_e},We.str=function(_e){return"quat("+_e[0]+", "+_e[1]+", "+_e[2]+", "+_e[3]+")"},We.setAxes=We.sqlerp=We.rotationTo=We.equals=We.exactEquals=We.normalize=We.sqrLen=We.squaredLength=We.len=We.length=We.lerp=We.dot=We.scale=We.mul=We.add=We.set=We.copy=We.fromValues=We.clone=void 0;var r=g(X()),s=g(fe()),u=g(St()),m=g(kt());function f(_e){if(typeof WeakMap!="function")return null;var Me=new WeakMap,Le=new WeakMap;return(f=function(Be){return Be?Le:Me})(_e)}function g(_e,Me){if(_e&&_e.__esModule)return _e;if(_e===null||c(_e)!=="object"&&typeof _e!="function")return{default:_e};var Le=f(Me);if(Le&&Le.has(_e))return Le.get(_e);var Be={},Fe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var je in _e)if(je!=="default"&&Object.prototype.hasOwnProperty.call(_e,je)){var Ye=Fe?Object.getOwnPropertyDescriptor(_e,je):null;Ye&&(Ye.get||Ye.set)?Object.defineProperty(Be,je,Ye):Be[je]=_e[je]}return Be.default=_e,Le&&Le.set(_e,Be),Be}function b(){var _e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0),_e[3]=1,_e}function E(_e,Me,Le){Le*=.5;var Be=Math.sin(Le);return _e[0]=Be*Me[0],_e[1]=Be*Me[1],_e[2]=Be*Me[2],_e[3]=Math.cos(Le),_e}function I(_e,Me,Le){var Be=Me[0],Fe=Me[1],je=Me[2],Ye=Me[3],Ue=Le[0],ot=Le[1],pt=Le[2],et=Le[3];return _e[0]=Be*et+Ye*Ue+Fe*pt-je*ot,_e[1]=Fe*et+Ye*ot+je*Ue-Be*pt,_e[2]=je*et+Ye*pt+Be*ot-Fe*Ue,_e[3]=Ye*et-Be*Ue-Fe*ot-je*pt,_e}function v(_e,Me){var Le=Me[0],Be=Me[1],Fe=Me[2],je=Me[3],Ye=Math.sqrt(Le*Le+Be*Be+Fe*Fe),Ue=Math.exp(je),ot=Ye>0?Ue*Math.sin(Ye)/Ye:0;return _e[0]=Le*ot,_e[1]=Be*ot,_e[2]=Fe*ot,_e[3]=Ue*Math.cos(Ye),_e}function T(_e,Me){var Le=Me[0],Be=Me[1],Fe=Me[2],je=Me[3],Ye=Math.sqrt(Le*Le+Be*Be+Fe*Fe),Ue=Ye>0?Math.atan2(Ye,je)/Ye:0;return _e[0]=Le*Ue,_e[1]=Be*Ue,_e[2]=Fe*Ue,_e[3]=.5*Math.log(Le*Le+Be*Be+Fe*Fe+je*je),_e}function M(_e,Me,Le,Be){var Fe,je,Ye,Ue,ot,pt=Me[0],et=Me[1],zt=Me[2],Ot=Me[3],At=Le[0],yt=Le[1],Kt=Le[2],Lt=Le[3];return(je=pt*At+et*yt+zt*Kt+Ot*Lt)<0&&(je=-je,At=-At,yt=-yt,Kt=-Kt,Lt=-Lt),1-je>r.EPSILON?(Fe=Math.acos(je),Ye=Math.sin(Fe),Ue=Math.sin((1-Be)*Fe)/Ye,ot=Math.sin(Be*Fe)/Ye):(Ue=1-Be,ot=Be),_e[0]=Ue*pt+ot*At,_e[1]=Ue*et+ot*yt,_e[2]=Ue*zt+ot*Kt,_e[3]=Ue*Ot+ot*Lt,_e}function S(_e,Me){var Le,Be=Me[0]+Me[4]+Me[8];if(Be>0)Le=Math.sqrt(Be+1),_e[3]=.5*Le,_e[0]=(Me[5]-Me[7])*(Le=.5/Le),_e[1]=(Me[6]-Me[2])*Le,_e[2]=(Me[1]-Me[3])*Le;else{var Fe=0;Me[4]>Me[0]&&(Fe=1),Me[8]>Me[3*Fe+Fe]&&(Fe=2);var je=(Fe+1)%3,Ye=(Fe+2)%3;Le=Math.sqrt(Me[3*Fe+Fe]-Me[3*je+je]-Me[3*Ye+Ye]+1),_e[Fe]=.5*Le,_e[3]=(Me[3*je+Ye]-Me[3*Ye+je])*(Le=.5/Le),_e[je]=(Me[3*je+Fe]+Me[3*Fe+je])*Le,_e[Ye]=(Me[3*Ye+Fe]+Me[3*Fe+Ye])*Le}return _e}We.clone=m.clone,We.fromValues=m.fromValues,We.copy=m.copy,We.set=m.set,We.add=m.add,We.mul=I;var P=m.scale;We.scale=P;var R=m.dot;We.dot=R,We.lerp=m.lerp;var L=m.length;We.length=L,We.len=L;var N=m.squaredLength;We.squaredLength=N,We.sqrLen=N;var G=m.normalize;We.normalize=G,We.exactEquals=m.exactEquals,We.equals=m.equals;var W,$,Z,Y=(W=u.create(),$=u.fromValues(1,0,0),Z=u.fromValues(0,1,0),function(_e,Me,Le){var Be=u.dot(Me,Le);return Be<-.999999?(u.cross(W,$,Me),u.len(W)<1e-6&&u.cross(W,Z,Me),u.normalize(W,W),E(_e,W,Math.PI),_e):Be>.999999?(_e[0]=0,_e[1]=0,_e[2]=0,_e[3]=1,_e):(u.cross(W,Me,Le),_e[0]=W[0],_e[1]=W[1],_e[2]=W[2],_e[3]=1+Be,G(_e,_e))});We.rotationTo=Y;var ce,pe,ge=(ce=b(),pe=b(),function(_e,Me,Le,Be,Fe,je){return M(ce,Me,Fe,je),M(pe,Le,Be,je),M(_e,ce,pe,2*je*(1-je)),_e});We.sqlerp=ge;var he,Ae=(he=s.create(),function(_e,Me,Le,Be){return he[0]=Le[0],he[3]=Le[1],he[6]=Le[2],he[1]=Be[0],he[4]=Be[1],he[7]=Be[2],he[2]=-Me[0],he[5]=-Me[1],he[8]=-Me[2],G(_e,S(_e,he))});return We.setAxes=Ae,We}var Ct,_t={};function Qt(){if(Ct)return _t;function c(M){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},c(M)}Ct=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.create=function(){var M=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[4]=0,M[5]=0,M[6]=0,M[7]=0),M[3]=1,M},_t.clone=function(M){var S=new r.ARRAY_TYPE(8);return S[0]=M[0],S[1]=M[1],S[2]=M[2],S[3]=M[3],S[4]=M[4],S[5]=M[5],S[6]=M[6],S[7]=M[7],S},_t.fromValues=function(M,S,P,R,L,N,G,W){var $=new r.ARRAY_TYPE(8);return $[0]=M,$[1]=S,$[2]=P,$[3]=R,$[4]=L,$[5]=N,$[6]=G,$[7]=W,$},_t.fromRotationTranslationValues=function(M,S,P,R,L,N,G){var W=new r.ARRAY_TYPE(8);W[0]=M,W[1]=S,W[2]=P,W[3]=R;var $=.5*L,Z=.5*N,Y=.5*G;return W[4]=$*R+Z*P-Y*S,W[5]=Z*R+Y*M-$*P,W[6]=Y*R+$*S-Z*M,W[7]=-$*M-Z*S-Y*P,W},_t.fromRotationTranslation=g,_t.fromTranslation=function(M,S){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=.5*S[0],M[5]=.5*S[1],M[6]=.5*S[2],M[7]=0,M},_t.fromRotation=function(M,S){return M[0]=S[0],M[1]=S[1],M[2]=S[2],M[3]=S[3],M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},_t.fromMat4=function(M,S){var P=s.create();u.getRotation(P,S);var R=new r.ARRAY_TYPE(3);return u.getTranslation(R,S),g(M,P,R),M},_t.copy=b,_t.identity=function(M){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},_t.set=function(M,S,P,R,L,N,G,W,$){return M[0]=S,M[1]=P,M[2]=R,M[3]=L,M[4]=N,M[5]=G,M[6]=W,M[7]=$,M},_t.getDual=function(M,S){return M[0]=S[4],M[1]=S[5],M[2]=S[6],M[3]=S[7],M},_t.setDual=function(M,S){return M[4]=S[0],M[5]=S[1],M[6]=S[2],M[7]=S[3],M},_t.getTranslation=function(M,S){var P=S[4],R=S[5],L=S[6],N=S[7],G=-S[0],W=-S[1],$=-S[2],Z=S[3];return M[0]=2*(P*Z+N*G+R*$-L*W),M[1]=2*(R*Z+N*W+L*G-P*$),M[2]=2*(L*Z+N*$+P*W-R*G),M},_t.translate=function(M,S,P){var R=S[0],L=S[1],N=S[2],G=S[3],W=.5*P[0],$=.5*P[1],Z=.5*P[2],Y=S[4],ce=S[5],pe=S[6],ge=S[7];return M[0]=R,M[1]=L,M[2]=N,M[3]=G,M[4]=G*W+L*Z-N*$+Y,M[5]=G*$+N*W-R*Z+ce,M[6]=G*Z+R*$-L*W+pe,M[7]=-R*W-L*$-N*Z+ge,M},_t.rotateX=function(M,S,P){var R=-S[0],L=-S[1],N=-S[2],G=S[3],W=S[4],$=S[5],Z=S[6],Y=S[7],ce=W*G+Y*R+$*N-Z*L,pe=$*G+Y*L+Z*R-W*N,ge=Z*G+Y*N+W*L-$*R,he=Y*G-W*R-$*L-Z*N;return s.rotateX(M,S,P),M[4]=ce*(G=M[3])+he*(R=M[0])+pe*(N=M[2])-ge*(L=M[1]),M[5]=pe*G+he*L+ge*R-ce*N,M[6]=ge*G+he*N+ce*L-pe*R,M[7]=he*G-ce*R-pe*L-ge*N,M},_t.rotateY=function(M,S,P){var R=-S[0],L=-S[1],N=-S[2],G=S[3],W=S[4],$=S[5],Z=S[6],Y=S[7],ce=W*G+Y*R+$*N-Z*L,pe=$*G+Y*L+Z*R-W*N,ge=Z*G+Y*N+W*L-$*R,he=Y*G-W*R-$*L-Z*N;return s.rotateY(M,S,P),M[4]=ce*(G=M[3])+he*(R=M[0])+pe*(N=M[2])-ge*(L=M[1]),M[5]=pe*G+he*L+ge*R-ce*N,M[6]=ge*G+he*N+ce*L-pe*R,M[7]=he*G-ce*R-pe*L-ge*N,M},_t.rotateZ=function(M,S,P){var R=-S[0],L=-S[1],N=-S[2],G=S[3],W=S[4],$=S[5],Z=S[6],Y=S[7],ce=W*G+Y*R+$*N-Z*L,pe=$*G+Y*L+Z*R-W*N,ge=Z*G+Y*N+W*L-$*R,he=Y*G-W*R-$*L-Z*N;return s.rotateZ(M,S,P),M[4]=ce*(G=M[3])+he*(R=M[0])+pe*(N=M[2])-ge*(L=M[1]),M[5]=pe*G+he*L+ge*R-ce*N,M[6]=ge*G+he*N+ce*L-pe*R,M[7]=he*G-ce*R-pe*L-ge*N,M},_t.rotateByQuatAppend=function(M,S,P){var R=P[0],L=P[1],N=P[2],G=P[3],W=S[0],$=S[1],Z=S[2],Y=S[3];return M[0]=W*G+Y*R+$*N-Z*L,M[1]=$*G+Y*L+Z*R-W*N,M[2]=Z*G+Y*N+W*L-$*R,M[3]=Y*G-W*R-$*L-Z*N,M[4]=(W=S[4])*G+(Y=S[7])*R+($=S[5])*N-(Z=S[6])*L,M[5]=$*G+Y*L+Z*R-W*N,M[6]=Z*G+Y*N+W*L-$*R,M[7]=Y*G-W*R-$*L-Z*N,M},_t.rotateByQuatPrepend=function(M,S,P){var R=S[0],L=S[1],N=S[2],G=S[3],W=P[0],$=P[1],Z=P[2],Y=P[3];return M[0]=R*Y+G*W+L*Z-N*$,M[1]=L*Y+G*$+N*W-R*Z,M[2]=N*Y+G*Z+R*$-L*W,M[3]=G*Y-R*W-L*$-N*Z,M[4]=R*(Y=P[7])+G*(W=P[4])+L*(Z=P[6])-N*($=P[5]),M[5]=L*Y+G*$+N*W-R*Z,M[6]=N*Y+G*Z+R*$-L*W,M[7]=G*Y-R*W-L*$-N*Z,M},_t.rotateAroundAxis=function(M,S,P,R){if(Math.abs(R)<r.EPSILON)return b(M,S);var L=Math.hypot(P[0],P[1],P[2]);R*=.5;var N=Math.sin(R),G=N*P[0]/L,W=N*P[1]/L,$=N*P[2]/L,Z=Math.cos(R),Y=S[0],ce=S[1],pe=S[2],ge=S[3];M[0]=Y*Z+ge*G+ce*$-pe*W,M[1]=ce*Z+ge*W+pe*G-Y*$,M[2]=pe*Z+ge*$+Y*W-ce*G,M[3]=ge*Z-Y*G-ce*W-pe*$;var he=S[4],Ae=S[5],_e=S[6],Me=S[7];return M[4]=he*Z+Me*G+Ae*$-_e*W,M[5]=Ae*Z+Me*W+_e*G-he*$,M[6]=_e*Z+Me*$+he*W-Ae*G,M[7]=Me*Z-he*G-Ae*W-_e*$,M},_t.add=function(M,S,P){return M[0]=S[0]+P[0],M[1]=S[1]+P[1],M[2]=S[2]+P[2],M[3]=S[3]+P[3],M[4]=S[4]+P[4],M[5]=S[5]+P[5],M[6]=S[6]+P[6],M[7]=S[7]+P[7],M},_t.multiply=E,_t.scale=function(M,S,P){return M[0]=S[0]*P,M[1]=S[1]*P,M[2]=S[2]*P,M[3]=S[3]*P,M[4]=S[4]*P,M[5]=S[5]*P,M[6]=S[6]*P,M[7]=S[7]*P,M},_t.lerp=function(M,S,P,R){var L=1-R;return I(S,P)<0&&(R=-R),M[0]=S[0]*L+P[0]*R,M[1]=S[1]*L+P[1]*R,M[2]=S[2]*L+P[2]*R,M[3]=S[3]*L+P[3]*R,M[4]=S[4]*L+P[4]*R,M[5]=S[5]*L+P[5]*R,M[6]=S[6]*L+P[6]*R,M[7]=S[7]*L+P[7]*R,M},_t.invert=function(M,S){var P=T(S);return M[0]=-S[0]/P,M[1]=-S[1]/P,M[2]=-S[2]/P,M[3]=S[3]/P,M[4]=-S[4]/P,M[5]=-S[5]/P,M[6]=-S[6]/P,M[7]=S[7]/P,M},_t.conjugate=function(M,S){return M[0]=-S[0],M[1]=-S[1],M[2]=-S[2],M[3]=S[3],M[4]=-S[4],M[5]=-S[5],M[6]=-S[6],M[7]=S[7],M},_t.normalize=function(M,S){var P=T(S);if(P>0){P=Math.sqrt(P);var R=S[0]/P,L=S[1]/P,N=S[2]/P,G=S[3]/P,W=S[4],$=S[5],Z=S[6],Y=S[7],ce=R*W+L*$+N*Z+G*Y;M[0]=R,M[1]=L,M[2]=N,M[3]=G,M[4]=(W-R*ce)/P,M[5]=($-L*ce)/P,M[6]=(Z-N*ce)/P,M[7]=(Y-G*ce)/P}return M},_t.str=function(M){return"quat2("+M[0]+", "+M[1]+", "+M[2]+", "+M[3]+", "+M[4]+", "+M[5]+", "+M[6]+", "+M[7]+")"},_t.exactEquals=function(M,S){return M[0]===S[0]&&M[1]===S[1]&&M[2]===S[2]&&M[3]===S[3]&&M[4]===S[4]&&M[5]===S[5]&&M[6]===S[6]&&M[7]===S[7]},_t.equals=function(M,S){var P=M[0],R=M[1],L=M[2],N=M[3],G=M[4],W=M[5],$=M[6],Z=M[7],Y=S[0],ce=S[1],pe=S[2],ge=S[3],he=S[4],Ae=S[5],_e=S[6],Me=S[7];return Math.abs(P-Y)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(Y))&&Math.abs(R-ce)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(ce))&&Math.abs(L-pe)<=r.EPSILON*Math.max(1,Math.abs(L),Math.abs(pe))&&Math.abs(N-ge)<=r.EPSILON*Math.max(1,Math.abs(N),Math.abs(ge))&&Math.abs(G-he)<=r.EPSILON*Math.max(1,Math.abs(G),Math.abs(he))&&Math.abs(W-Ae)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ae))&&Math.abs($-_e)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(_e))&&Math.abs(Z-Me)<=r.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Me))},_t.sqrLen=_t.squaredLength=_t.len=_t.length=_t.dot=_t.mul=_t.setReal=_t.getReal=void 0;var r=f(X()),s=f(mt()),u=f(Ze());function m(M){if(typeof WeakMap!="function")return null;var S=new WeakMap,P=new WeakMap;return(m=function(R){return R?P:S})(M)}function f(M,S){if(M&&M.__esModule)return M;if(M===null||c(M)!=="object"&&typeof M!="function")return{default:M};var P=m(S);if(P&&P.has(M))return P.get(M);var R={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in M)if(N!=="default"&&Object.prototype.hasOwnProperty.call(M,N)){var G=L?Object.getOwnPropertyDescriptor(M,N):null;G&&(G.get||G.set)?Object.defineProperty(R,N,G):R[N]=M[N]}return R.default=M,P&&P.set(M,R),R}function g(M,S,P){var R=.5*P[0],L=.5*P[1],N=.5*P[2],G=S[0],W=S[1],$=S[2],Z=S[3];return M[0]=G,M[1]=W,M[2]=$,M[3]=Z,M[4]=R*Z+L*$-N*W,M[5]=L*Z+N*G-R*$,M[6]=N*Z+R*W-L*G,M[7]=-R*G-L*W-N*$,M}function b(M,S){return M[0]=S[0],M[1]=S[1],M[2]=S[2],M[3]=S[3],M[4]=S[4],M[5]=S[5],M[6]=S[6],M[7]=S[7],M}function E(M,S,P){var R=S[0],L=S[1],N=S[2],G=S[3],W=P[4],$=P[5],Z=P[6],Y=P[7],ce=S[4],pe=S[5],ge=S[6],he=S[7],Ae=P[0],_e=P[1],Me=P[2],Le=P[3];return M[0]=R*Le+G*Ae+L*Me-N*_e,M[1]=L*Le+G*_e+N*Ae-R*Me,M[2]=N*Le+G*Me+R*_e-L*Ae,M[3]=G*Le-R*Ae-L*_e-N*Me,M[4]=R*Y+G*W+L*Z-N*$+ce*Le+he*Ae+pe*Me-ge*_e,M[5]=L*Y+G*$+N*W-R*Z+pe*Le+he*_e+ge*Ae-ce*Me,M[6]=N*Y+G*Z+R*$-L*W+ge*Le+he*Me+ce*_e-pe*Ae,M[7]=G*Y-R*W-L*$-N*Z+he*Le-ce*Ae-pe*_e-ge*Me,M}_t.getReal=s.copy,_t.setReal=s.copy,_t.mul=E;var I=s.dot;_t.dot=I;var v=s.length;_t.length=v,_t.len=v;var T=s.squaredLength;return _t.squaredLength=T,_t.sqrLen=T,_t}var qt,gr,Gt={};function vn(){if(qt)return Gt;function c(S){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(S)}qt=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.create=u,Gt.clone=function(S){var P=new r.ARRAY_TYPE(2);return P[0]=S[0],P[1]=S[1],P},Gt.fromValues=function(S,P){var R=new r.ARRAY_TYPE(2);return R[0]=S,R[1]=P,R},Gt.copy=function(S,P){return S[0]=P[0],S[1]=P[1],S},Gt.set=function(S,P,R){return S[0]=P,S[1]=R,S},Gt.add=function(S,P,R){return S[0]=P[0]+R[0],S[1]=P[1]+R[1],S},Gt.subtract=m,Gt.multiply=f,Gt.divide=g,Gt.ceil=function(S,P){return S[0]=Math.ceil(P[0]),S[1]=Math.ceil(P[1]),S},Gt.floor=function(S,P){return S[0]=Math.floor(P[0]),S[1]=Math.floor(P[1]),S},Gt.min=function(S,P,R){return S[0]=Math.min(P[0],R[0]),S[1]=Math.min(P[1],R[1]),S},Gt.max=function(S,P,R){return S[0]=Math.max(P[0],R[0]),S[1]=Math.max(P[1],R[1]),S},Gt.round=function(S,P){return S[0]=Math.round(P[0]),S[1]=Math.round(P[1]),S},Gt.scale=function(S,P,R){return S[0]=P[0]*R,S[1]=P[1]*R,S},Gt.scaleAndAdd=function(S,P,R,L){return S[0]=P[0]+R[0]*L,S[1]=P[1]+R[1]*L,S},Gt.distance=b,Gt.squaredDistance=E,Gt.length=I,Gt.squaredLength=v,Gt.negate=function(S,P){return S[0]=-P[0],S[1]=-P[1],S},Gt.inverse=function(S,P){return S[0]=1/P[0],S[1]=1/P[1],S},Gt.normalize=function(S,P){var R=P[0],L=P[1],N=R*R+L*L;return N>0&&(N=1/Math.sqrt(N)),S[0]=P[0]*N,S[1]=P[1]*N,S},Gt.dot=function(S,P){return S[0]*P[0]+S[1]*P[1]},Gt.cross=function(S,P,R){var L=P[0]*R[1]-P[1]*R[0];return S[0]=S[1]=0,S[2]=L,S},Gt.lerp=function(S,P,R,L){var N=P[0],G=P[1];return S[0]=N+L*(R[0]-N),S[1]=G+L*(R[1]-G),S},Gt.random=function(S,P){P=P||1;var R=2*r.RANDOM()*Math.PI;return S[0]=Math.cos(R)*P,S[1]=Math.sin(R)*P,S},Gt.transformMat2=function(S,P,R){var L=P[0],N=P[1];return S[0]=R[0]*L+R[2]*N,S[1]=R[1]*L+R[3]*N,S},Gt.transformMat2d=function(S,P,R){var L=P[0],N=P[1];return S[0]=R[0]*L+R[2]*N+R[4],S[1]=R[1]*L+R[3]*N+R[5],S},Gt.transformMat3=function(S,P,R){var L=P[0],N=P[1];return S[0]=R[0]*L+R[3]*N+R[6],S[1]=R[1]*L+R[4]*N+R[7],S},Gt.transformMat4=function(S,P,R){var L=P[0],N=P[1];return S[0]=R[0]*L+R[4]*N+R[12],S[1]=R[1]*L+R[5]*N+R[13],S},Gt.rotate=function(S,P,R,L){var N=P[0]-R[0],G=P[1]-R[1],W=Math.sin(L),$=Math.cos(L);return S[0]=N*$-G*W+R[0],S[1]=N*W+G*$+R[1],S},Gt.angle=function(S,P){var R=S[0],L=S[1],N=P[0],G=P[1],W=Math.sqrt(R*R+L*L)*Math.sqrt(N*N+G*G);return Math.acos(Math.min(Math.max(W&&(R*N+L*G)/W,-1),1))},Gt.zero=function(S){return S[0]=0,S[1]=0,S},Gt.str=function(S){return"vec2("+S[0]+", "+S[1]+")"},Gt.exactEquals=function(S,P){return S[0]===P[0]&&S[1]===P[1]},Gt.equals=function(S,P){var R=S[0],L=S[1],N=P[0],G=P[1];return Math.abs(R-N)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(N))&&Math.abs(L-G)<=r.EPSILON*Math.max(1,Math.abs(L),Math.abs(G))},Gt.forEach=Gt.sqrLen=Gt.sqrDist=Gt.dist=Gt.div=Gt.mul=Gt.sub=Gt.len=void 0;var r=function(S,P){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var R=s(void 0);if(R&&R.has(S))return R.get(S);var L={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in S)if(G!=="default"&&Object.prototype.hasOwnProperty.call(S,G)){var W=N?Object.getOwnPropertyDescriptor(S,G):null;W&&(W.get||W.set)?Object.defineProperty(L,G,W):L[G]=S[G]}return L.default=S,R&&R.set(S,L),L}(X());function s(S){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(s=function(L){return L?R:P})(S)}function u(){var S=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(S[0]=0,S[1]=0),S}function m(S,P,R){return S[0]=P[0]-R[0],S[1]=P[1]-R[1],S}function f(S,P,R){return S[0]=P[0]*R[0],S[1]=P[1]*R[1],S}function g(S,P,R){return S[0]=P[0]/R[0],S[1]=P[1]/R[1],S}function b(S,P){return Math.hypot(P[0]-S[0],P[1]-S[1])}function E(S,P){var R=P[0]-S[0],L=P[1]-S[1];return R*R+L*L}function I(S){return Math.hypot(S[0],S[1])}function v(S){var P=S[0],R=S[1];return P*P+R*R}Gt.len=I,Gt.sub=m,Gt.mul=f,Gt.div=g,Gt.dist=b,Gt.sqrDist=E,Gt.sqrLen=v;var T,M=(T=u(),function(S,P,R,L,N,G){var W,$;for(P||(P=2),R||(R=0),$=L?Math.min(L*P+R,S.length):S.length,W=R;W<$;W+=P)T[0]=S[W],T[1]=S[W+1],N(T,T,G),S[W]=T[0],S[W+1]=T[1];return S});return Gt.forEach=M,Gt}function cn(){if(gr)return B;function c(S){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(S)}gr=1,Object.defineProperty(B,"__esModule",{value:!0}),B.vec4=B.vec3=B.vec2=B.quat2=B.quat=B.mat4=B.mat3=B.mat2d=B.mat2=B.glMatrix=void 0;var r=M(X());B.glMatrix=r;var s=M(ne());B.mat2=s;var u=M(se());B.mat2d=u;var m=M(fe());B.mat3=m;var f=M(Ze());B.mat4=f;var g=M(mt());B.quat=g;var b=M(Qt());B.quat2=b;var E=M(vn());B.vec2=E;var I=M(St());B.vec3=I;var v=M(kt());function T(S){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(T=function(L){return L?R:P})(S)}function M(S,P){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var R=T(P);if(R&&R.has(S))return R.get(S);var L={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in S)if(G!=="default"&&Object.prototype.hasOwnProperty.call(S,G)){var W=N?Object.getOwnPropertyDescriptor(S,G):null;W&&(W.get||W.set)?Object.defineProperty(L,G,W):L[G]=S[G]}return L.default=S,R&&R.set(S,L),L}return B.vec4=v,B}var Ln,ii,er,Cr,Pe=cn(),Nt=function(){if(ii)return Ln;function c(r,s,u,m){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=s,this.p2x=u,this.p2y=m}return ii=1,Ln=c,c.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,s){if(s===void 0&&(s=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,m=0;m<8;m++){var f=this.sampleCurveX(u)-r;if(Math.abs(f)<s)return u;var g=this.sampleCurveDerivativeX(u);if(Math.abs(g)<1e-6)break;u-=f/g}var b=0,E=1;for(u=r,m=0;m<20&&(f=this.sampleCurveX(u),!(Math.abs(f-r)<s));m++)r>f?b=u:E=u,u=.5*(E-b)+b;return u},solve:function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))}},Ln}(),gn=D(Nt);function Vr(){if(Cr)return er;function c(r,s){this.x=r,this.y=s}return Cr=1,er=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,u=r.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=s,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),u=Math.sin(r),m=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=m,this},_rotateAround:function(r,s){var u=Math.cos(r),m=Math.sin(r),f=s.y+m*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-m*(this.y-s.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(r){return r instanceof c?r:Array.isArray(r)?new c(r[0],r[1]):r},er}var vt=D(Vr());function Tn(c,r){if(Array.isArray(c)){if(!Array.isArray(r)||c.length!==r.length)return!1;for(let s=0;s<c.length;s++)if(!Tn(c[s],r[s]))return!1;return!0}if(typeof c=="object"&&c!==null&&r!==null){if(typeof r!="object"||Object.keys(c).length!==Object.keys(r).length)return!1;for(const s in c)if(!Tn(c[s],r[s]))return!1;return!0}return c===r}const un=Math.PI/180,wi=180/Math.PI;function br(c){return c*un}function jn(c){return c*wi}const _i=[[0,0],[1,0],[1,1],[0,1]];function Wi(c){if(c<=0)return 0;if(c>=1)return 1;const r=c*c,s=r*c;return 4*(c<.5?s:3*(c-r)+s-.75)}function zo(c,r,s,u){const m=new gn(c,r,s,u);return function(f){return m.solve(f)}}const Ha=zo(.25,.1,.25,1);function mr(c,r,s){return Math.min(s,Math.max(r,c))}function Gl(c,r,s){return(s=mr((s-c)/(r-c),0,1))*s*(3-2*s)}function Za(c,r,s){const u=s-r,m=((c-r)%u+u)%u+r;return m===r?s:m}function Ks(c,r,s){if(!c.length)return s(null,[]);let u=c.length;const m=new Array(c.length);let f=null;c.forEach((g,b)=>{r(g,(E,I)=>{E&&(f=E),m[b]=I,--u==0&&s(f,m)})})}function zi(c,...r){for(const s of r)for(const u in s)c[u]=s[u];return c}let _o=1;function bc(){return _o++}function wc(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function ql(c,r){c.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function Xa(c,r){return c.indexOf(r,c.length-r.length)!==-1}function Js(c,r,s){const u={};for(const m in c)u[m]=r.call(this,c[m],m,c);return u}function Wl(c,r,s){const u={};for(const m in c)r.call(this,c[m],m,c)&&(u[m]=c[m]);return u}function Bo(c){return Array.isArray(c)?c.map(Bo):typeof c=="object"&&c?Js(c,Bo):c}const Ac={};function Br(c){Ac[c]||(typeof console<"u"&&console.warn(c),Ac[c]=!0)}function _a(c,r,s){return(s.y-c.y)*(r.x-c.x)>(r.y-c.y)*(s.x-c.x)}function Ku(c){let r=0;for(let s,u,m=0,f=c.length,g=f-1;m<f;g=m++)s=c[m],u=c[g],r+=(u.x-s.x)*(s.y+u.y);return r}function vo([c,r,s]){const u=br(r+90),m=br(s);return{x:c*Math.cos(u)*Math.sin(m),y:c*Math.sin(u)*Math.sin(m),z:c*Math.cos(m),azimuthal:r,polar:s}}function Qs(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Tc(c){const r={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,m,f)=>{const g=m||f;return r[u]=!g||g.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}let Hl,Sc=null;function el(c,r){return[c[4*r],c[4*r+1],c[4*r+2],c[4*r+3]]}function Qe(c,r,s,u){for(;r<s;){const m=r+s>>1;c[m]<u?r=m+1:s=m}return r}function ae(c,r,s,u){for(;r<s;){const m=r+s>>1;c[m]<=u?r=m+1:s=m}return r}function ue(c){return c>0?1/(1.001-c):1+c}function we(c){return c>0?1-1/(1.001-c):-c}const De={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Hl==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Hl=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{Hl=c}}return Hl},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!De.API_URL)return null;try{const c=new URL(De.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Oe(c){return De.API_URL_REGEX.test(c)}function $e(c){return De.API_SPRITE_REGEX.test(c)}let Ke,qe,Je,lt,it,bt;function Bt(){return Ke==null&&(Ke=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ke}const Ft={now:()=>lt!==void 0?lt:performance.now(),setNow(c){lt=c},restoreNow(){lt=void 0},frame(c){const r=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(c,r=0){const{width:s,height:u}=c;it||(it=document.createElement("canvas"));const m=it.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return(s>it.width||u>it.height)&&(it.width=s,it.height=u),m.clearRect(-r,-r,s+2*r,u+2*r),m.drawImage(c,0,0,s,u),m.getImageData(-r,-r,s+2*r,u+2*r)},resolveURL:c=>(qe||(qe=document.createElement("a")),qe.href=c,qe.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Je==null&&(Je=window.matchMedia("(prefers-reduced-motion: reduce)")),Je.matches)},hasCanvasFingerprintNoise(){if(bt!==void 0)return bt;if(!Bt())return bt=!1,!1;const c=new OffscreenCanvas(85,1),r=c.getContext("2d",{willReadFrequently:!0});let s=0;for(let m=0;m<c.width;++m)r.fillStyle=`rgba(${s++},${s++},${s++}, 255)`,r.fillRect(m,0,1,1);const u=r.getImageData(0,0,c.width,c.height);s=0;for(let m=0;m<u.data.length;++m)if(m%4!=3&&s++!==u.data[m])return bt=!0,!0;return bt=!1,!1}};function sr(c,r){const s=c.indexOf("?");if(s<0)return`${c}?${new URLSearchParams(r).toString()}`;const u=new URLSearchParams(c.slice(s));for(const m in r)u.set(m,r[m]);return`${c.slice(0,s)}?${u.toString()}`}function cr(c,r={persistentParams:[]}){const s=c.indexOf("?");if(s<0)return c;const u=new URLSearchParams,m=new URLSearchParams(c.slice(s));for(const g of r.persistentParams){const b=m.get(g);b&&u.set(g,b)}const f=u.toString();return`${c.slice(0,s)}${f.length>0?`?${f}`:""}`}const hr="mapbox-tiles";let ur=500,Gr=50;const Jr=["language","worldview","jobid"];let vr,Yr;function An(){try{return caches}catch{}}function ei(){const c=An();c&&vr==null&&(vr=c.open(hr))}let oi=1/0;const Ai={supported:!1,testSupport:function(c){!Ju&&Ya&&(Ec?Qu(c):Ko=c)}};let Ko,Ya,Ju=!1,Ec=!1;const Zl=typeof self<"u"?self:{};function Qu(c){const r=c.createTexture();c.bindTexture(c.TEXTURE_2D,r);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Ya),c.isContextLost())return;Ai.supported=!0}catch{}c.deleteTexture(r),Ju=!0}Zl.document&&(Ya=Zl.document.createElement("img"),Ya.onload=function(){Ko&&Qu(Ko),Ko=null,Ec=!0},Ya.onerror=function(){Ju=!0,Ko=null},Ya.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Xl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Xl);class B2 extends Error{constructor(r,s,u){s===401&&Oe(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const F2=Qs()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Pc=function(c,r){if(!(/^file:/.test(s=c.url)||/^file:/.test(F2())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(u,m){const f=new AbortController,g=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:F2(),referrerPolicy:u.referrerPolicy,signal:f.signal});let b=!1,E=!1;const I=(v=g.url).indexOf("sku=")>0&&Oe(v);var v;u.type==="json"&&g.headers.set("Accept","application/json");const T=(S,P,R)=>{if(E)return;if(S&&S.message!=="SecurityError"&&Br(S.toString()),P&&R)return M(P);const L=Date.now();fetch(g).then(N=>{if(N.ok){const G=I?N.clone():null;return M(N,G,L)}return m(new B2(N.statusText,N.status,u.url))}).catch(N=>{N.name!=="AbortError"&&m(new Error(`${N.message} ${u.url}`))})},M=(S,P,R)=>{(u.type==="arrayBuffer"?S.arrayBuffer():u.type==="json"?S.json():S.text()).then(L=>{E||(P&&R&&function(N,G,W){if(ei(),vr==null)return;const $=Tc(G.headers.get("Cache-Control")||"");if($["no-store"])return;const Z={status:G.status,statusText:G.statusText,headers:new Headers};G.headers.forEach((pe,ge)=>Z.headers.set(ge,pe)),$["max-age"]&&Z.headers.set("Expires",new Date(W+1e3*$["max-age"]).toUTCString());const Y=Z.headers.get("Expires");if(!Y||new Date(Y).getTime()-W<42e4)return;let ce=cr(N.url,{persistentParams:Jr});if(G.status===206){const pe=N.headers.get("Range");if(!pe)return;Z.status=200,ce=sr(ce,{range:pe})}(function(pe,ge){if(Yr===void 0)try{new Response(new ReadableStream),Yr=!0}catch{Yr=!1}Yr?ge(pe.body):pe.blob().then(ge)})(G,pe=>{const ge=new Response((he=G.status)!==200&&he!==404&&[101,103,204,205,304].includes(he)?null:pe,Z);var he;ei(),vr!=null&&vr.then(Ae=>Ae.put(ce,ge)).catch(Ae=>Br(Ae.message))})}(g,P,R),b=!0,m(null,L,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(L=>{E||m(new Error(L.message))})};return I?function(S,P){if(ei(),vr==null)return P(null);vr.then(R=>{let L=cr(S.url,{persistentParams:Jr});const N=S.headers.get("Range");N&&(L=sr(L,{range:N})),R.match(L).then(G=>{const W=function($){if(!$)return!1;const Z=new Date($.headers.get("Expires")||0),Y=Tc($.headers.get("Cache-Control")||"");return Z>Date.now()&&!Y["no-cache"]}(G);R.delete(L),W&&R.put(L,G.clone()),P(null,G,W)}).catch(P)}).catch(P)}(g,T):T(null,null),{cancel:()=>{E=!0,b||f.abort()}}}(c,r);if(Qs()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,r,void 0,!0)}var s;return function(u,m){const f=new XMLHttpRequest;f.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const g in u.headers)f.setRequestHeader(g,u.headers[g]);return u.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=u.credentials==="include",f.onerror=()=>{m(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let g=f.response;if(u.type==="json")try{g=JSON.parse(f.response)}catch(b){return m(b)}m(null,g,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else m(new B2(f.statusText,f.status,u.url))},f.send(u.body),{cancel:()=>f.abort()}}(c,r)},Yl=function(c,r){return Pc(zi(c,{type:"arrayBuffer"}),r)};function Fo(c){const r=document.createElement("a");return r.href=c,r.protocol===location.protocol&&r.host===location.host}const Jo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Qo,io;Qo=[],io=0;const va=function(c,r){if(Ai.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),io>=De.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:c,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Qo.push(f),f}io++;let s=!1;const u=()=>{if(!s)for(s=!0,io--;Qo.length&&io<De.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Qo.shift(),{requestParameters:g,callback:b,cancelled:E}=f;E||(f.cancel=va(g,b).cancel)}},m=Yl(c,(f,g,b,E)=>{u(),f?r(f):g&&(self.createImageBitmap?function(I,v){const T=new Blob([new Uint8Array(I)],{type:"image/png"});createImageBitmap(T).then(M=>{v(null,M)}).catch(M=>{v(new Error(`Could not load image because of ${M.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(I,v)=>r(I,v,b,E)):function(I,v){const T=new Image;T.onload=()=>{v(null,T),URL.revokeObjectURL(T.src),T.onload=null,requestAnimationFrame(()=>{T.src=Jo})},T.onerror=()=>v(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(I)],{type:"image/png"});T.src=I.byteLength?URL.createObjectURL(M):Jo}(g,(I,v)=>r(I,v,b,E)))});return{cancel:()=>{m.cancel(),u()}}};var Mc,N2,j2,xa={exports:{}},e7={exports:{}},S6={exports:{}},W4=function(){if(j2)return xa.exports;j2=1;var c=(Mc||(Mc=1,e7.exports=function(s,u){var m,f,g,b,E,I,v,T;for(f=s.length-(m=3&s.length),g=u,E=3432918353,I=461845907,T=0;T<f;)v=255&s.charCodeAt(T)|(255&s.charCodeAt(++T))<<8|(255&s.charCodeAt(++T))<<16|(255&s.charCodeAt(++T))<<24,++T,g=27492+(65535&(b=5*(65535&(g=(g^=v=(65535&(v=(v=(65535&v)*E+(((v>>>16)*E&65535)<<16)&4294967295)<<15|v>>>17))*I+(((v>>>16)*I&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(v=0,m){case 3:v^=(255&s.charCodeAt(T+2))<<16;case 2:v^=(255&s.charCodeAt(T+1))<<8;case 1:g^=v=(65535&(v=(v=(65535&(v^=255&s.charCodeAt(T)))*E+(((v>>>16)*E&65535)<<16)&4294967295)<<15|v>>>17))*I+(((v>>>16)*I&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0}),e7.exports),r=(N2||(N2=1,S6.exports=function(s,u){for(var m,f=s.length,g=u^f,b=0;f>=4;)m=1540483477*(65535&(m=255&s.charCodeAt(b)|(255&s.charCodeAt(++b))<<8|(255&s.charCodeAt(++b))<<16|(255&s.charCodeAt(++b))<<24))+((1540483477*(m>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:g^=(255&s.charCodeAt(b+2))<<16;case 2:g^=(255&s.charCodeAt(b+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(b)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0}),S6.exports);return xa.exports=c,xa.exports.murmur3=c,xa.exports.murmur2=r,xa.exports}(),oo=D(W4);class As{constructor(r,...s){zi(this,s[0]||{}),this.type=r}}class Cc extends As{constructor(r,s={}){super("error",zi({error:r},s))}}function Kl(c,r,s){s[c]&&s[c].indexOf(r)!==-1||(s[c]=s[c]||[],s[c].push(r))}function $2(c,r,s){if(s&&s[c]){const u=s[c].indexOf(r);u!==-1&&s[c].splice(u,1)}}class Jl{on(r,s){return this._listeners=this._listeners||{},Kl(r,s,this._listeners),this}off(r,s){return $2(r,s,this._listeners),$2(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Kl(r,s,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,s){const u=typeof r=="string"?new As(r,s):r,m=u.type;if(this.listens(m)){u.target=this;const f=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const E of f)E.call(this,u);const g=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const E of g)$2(m,E,this._oneTimeListeners),E.call(this,u);const b=this._eventedParent;b&&(zi(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(u))}else u instanceof Cc&&console.error(u.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var U2,Fr={},V2=function(){if(U2)return Fr;U2=1;var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(f){return(f=Math.round(f))<0?0:f>255?255:f}function s(f){return r(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function u(f){return(g=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:g>1?1:g;var g}function m(f,g,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?f+(g-f)*b*6:2*b<1?g:3*b<2?f+(g-f)*(2/3-b)*6:f}try{Fr.parseCSSColor=function(f){var g,b=f.replace(/ /g,"").toLowerCase();if(b in c)return c[b].slice();if(b[0]==="#")return b.length===4?(g=parseInt(b.substr(1),16))>=0&&g<=4095?[(3840&g)>>4|(3840&g)>>8,240&g|(240&g)>>4,15&g|(15&g)<<4,1]:null:b.length===7&&(g=parseInt(b.substr(1),16))>=0&&g<=16777215?[(16711680&g)>>16,(65280&g)>>8,255&g,1]:null;var E=b.indexOf("("),I=b.indexOf(")");if(E!==-1&&I+1===b.length){var v=b.substr(0,E),T=b.substr(E+1,I-(E+1)).split(","),M=1;switch(v){case"rgba":if(T.length!==4)return null;M=u(T.pop());case"rgb":return T.length!==3?null:[s(T[0]),s(T[1]),s(T[2]),M];case"hsla":if(T.length!==4)return null;M=u(T.pop());case"hsl":if(T.length!==3)return null;var S=(parseFloat(T[0])%360+360)%360/360,P=u(T[1]),R=u(T[2]),L=R<=.5?R*(P+1):R+P-R*P,N=2*R-L;return[r(255*m(N,L,S+1/3)),r(255*m(N,L,S)),r(255*m(N,L,S-1/3)),M];default:return null}}return null}}catch{}return Fr}();class qr{constructor(r,s,u,m=1){this.r=r,this.g=s,this.b=u,this.a=m}static parse(r){if(!r)return;if(r instanceof qr)return r;if(typeof r!="string")return;const s=V2.parseCSSColor(r);return s?new qr(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[r,s,u,m]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(r)},${Math.round(s)},${Math.round(u)},${m})`}toRenderColor(r){const{r:s,g:u,b:m,a:f}=this;return new H4(r,s,u,m,f)}}class H4{constructor(r,s,u,m,f){if(r){const g=r.image.height,b=g*g;s=f===0?0:s/f*(g-1),u=f===0?0:u/f*(g-1),m=f===0?0:m/f*(g-1);const E=Math.floor(s),I=Math.floor(u),v=Math.floor(m),T=Math.ceil(s),M=Math.ceil(u),S=Math.ceil(m),P=s-E,R=u-I,L=m-v,N=r.image.data,G=4*(E+I*b+v*g),W=4*(E+I*b+S*g),$=4*(E+M*b+v*g),Z=4*(E+M*b+S*g),Y=4*(T+I*b+v*g),ce=4*(T+I*b+S*g),pe=4*(T+M*b+v*g),ge=4*(T+M*b+S*g);if(G<0||ge>=N.length)throw new Error("out of range");this.r=nr(nr(nr(N[G],N[W],L),nr(N[$],N[Z],L),R),nr(nr(N[Y],N[ce],L),nr(N[pe],N[ge],L),R),P)/255*f,this.g=nr(nr(nr(N[G+1],N[W+1],L),nr(N[$+1],N[Z+1],L),R),nr(nr(N[Y+1],N[ce+1],L),nr(N[pe+1],N[ge+1],L),R),P)/255*f,this.b=nr(nr(nr(N[G+2],N[W+2],L),nr(N[$+2],N[Z+2],L),R),nr(nr(N[Y+2],N[ce+2],L),nr(N[pe+2],N[ge+2],L),R),P)/255*f,this.a=f}else this.r=s,this.g=u,this.b=m,this.a=f}toArray(){const{r,g:s,b:u,a:m}=this;return m===0?[0,0,0,0]:[255*r/m,255*s/m,255*u/m,m]}toArray01(){const{r,g:s,b:u,a:m}=this;return m===0?[0,0,0,0]:[r/m,s/m,u/m,m]}toArray01Scaled(r){const{r:s,g:u,b:m,a:f}=this;return f===0?[0,0,0]:[s/f*r,u/f*r,m/f*r]}toArray01PremultipliedAlpha(){const{r,g:s,b:u,a:m}=this;return[r,s,u,m]}toArray01Linear(){const{r,g:s,b:u,a:m}=this;return m===0?[0,0,0,0]:[Math.pow(r/m,2.2),Math.pow(s/m,2.2),Math.pow(u/m,2.2),m]}}function nr(c,r,s){return c*(1-s)+r*s}function Ic(c,r,s){return c.map((u,m)=>nr(u,r[m],s))}qr.black=new qr(0,0,0,1),qr.white=new qr(1,1,1,1),qr.transparent=new qr(0,0,0,0),qr.red=new qr(1,0,0,1),qr.blue=new qr(0,0,1,1);var tl=Object.freeze({__proto__:null,array:Ic,color:function(c,r,s){return new qr(nr(c.r,r.r,s),nr(c.g,r.g,s),nr(c.b,r.b,s),nr(c.a,r.a,s))},number:nr});function Ql(c,...r){for(const s of r)for(const u in s)c[u]=s[u];return c}class ba extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class t7{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[u,m]of s)this.bindings[u]=m}concat(r){return new t7(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const ea={kind:"null"},Vt={kind:"number"},Ir={kind:"string"},Or={kind:"boolean"},ao={kind:"color"},Bi={kind:"object"},Lr={kind:"value"},r7={kind:"collator"},e1={kind:"formatted"},t1={kind:"resolvedImage"};function Hi(c,r){return{kind:"array",itemType:c,N:r}}function zn(c){if(c.kind==="array"){const r=zn(c.itemType);return typeof c.N=="number"?`array<${r}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${r}>`}return c.kind}const E6=[ea,Vt,Ir,Or,ao,e1,Bi,Hi(Lr),t1];function r1(c,r){if(r.kind==="error")return null;if(c.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!r1(c.itemType,r.itemType))&&(typeof c.N!="number"||c.N===r.N))return null}else{if(c.kind===r.kind)return null;if(c.kind==="value"){for(const s of E6)if(!r1(s,r))return null}}return`Expected ${zn(c)} but found ${zn(r)} instead.`}function n1(c,r){return r.some(s=>s.kind===c.kind)}function wa(c,r){return r.some(s=>s==="null"?c===null:s==="array"?Array.isArray(c):s==="object"?c&&!Array.isArray(c)&&typeof c=="object":s===typeof c)}class n7{constructor(r,s,u){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xo{constructor(r,s,u,m,f){this.text=r.normalize?r.normalize():r,this.image=s,this.scale=u,this.fontStack=m,this.textColor=f}}class Fi{constructor(r){this.sections=r}static fromString(r){return new Fi([new xo(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.namePrimary.length!==0)}static factory(r){return r instanceof Fi?r:Fi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const s of this.sections){if(s.image){r.push(["image",s.image.namePrimary]);continue}r.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toRenderColor(null).toArray())),r.push(u)}return r}}class Zi{constructor(r){this.namePrimary=r.namePrimary,r.nameSecondary&&(this.nameSecondary=r.nameSecondary),this.available=r.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(r,s){return r?new Zi({namePrimary:r,nameSecondary:s,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function P6(c,r,s,u){return typeof c=="number"&&c>=0&&c<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[c,r,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[c,r,s,u]:[c,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ts(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof qr||c instanceof n7||c instanceof Fi||c instanceof Zi)return!0;if(Array.isArray(c)){for(const r of c)if(!Ts(r))return!1;return!0}if(typeof c=="object"){for(const r in c)if(!Ts(c[r]))return!1;return!0}return!1}function Hn(c){if(c===null)return ea;if(typeof c=="string")return Ir;if(typeof c=="boolean")return Or;if(typeof c=="number")return Vt;if(c instanceof qr)return ao;if(c instanceof n7)return r7;if(c instanceof Fi)return e1;if(c instanceof Zi)return t1;if(Array.isArray(c)){const r=c.length;let s;for(const u of c){const m=Hn(u);if(s){if(s===m)continue;s=Lr;break}s=m}return Hi(s||Lr,r)}return Bi}function Xi(c){const r=typeof c;return c===null?"":r==="string"||r==="number"||r==="boolean"?String(c):c instanceof qr||c instanceof Fi||c instanceof Zi?c.toString():JSON.stringify(c)}class ta{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ts(r[1]))return s.error("invalid value");const u=r[1];let m=Hn(u);const f=s.expectedType;return m.kind!=="array"||m.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(m=f),new ta(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof qr?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Fi?this.value.serialize():this.value}}class fi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const G2={string:Ir,number:Vt,boolean:Or,object:Bi};class ra{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let u,m=1;const f=r[0];if(f==="array"){let b,E;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in G2)||I==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=G2[I],m++}else b=Lr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=r[2],m++}u=Hi(b,E)}else u=G2[f];const g=[];for(;m<r.length;m++){const b=s.parse(r[m],m,Lr);if(!b)return null;g.push(b)}return new ra(u,g)}evaluate(r){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(r);if(!r1(this.type,Hn(u)))return u;if(s===this.args.length-1)throw new fi(`The expression ${JSON.stringify(this.args[s].serialize())} evaluated to ${zn(Hn(u))} but was expected to be of type ${zn(this.type)}.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,s=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const m=r.N;(typeof m=="number"||this.args.length>1)&&s.push(m)}}return s.concat(this.args.map(u=>u.serialize()))}}class i1{constructor(r){this.type=e1,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const m=[];let f=!1;for(let g=1;g<=r.length-1;++g){const b=r[g];if(f&&typeof b=="object"&&!Array.isArray(b)){f=!1;let E=null;if(b["font-scale"]&&(E=s.parseObjectValue(b["font-scale"],g,"font-scale",Vt),!E))return null;let I=null;if(b["text-font"]&&(I=s.parseObjectValue(b["text-font"],g,"text-font",Hi(Ir)),!I))return null;let v=null;if(b["text-color"]&&(v=s.parseObjectValue(b["text-color"],g,"text-color",ao),!v))return null;const T=m[m.length-1];T.scale=E,T.font=I,T.textColor=v}else{const E=s.parse(r[g],g,Lr);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new i1(m)}evaluate(r){return new Fi(this.sections.map(s=>{const u=s.content.evaluate(r);return Hn(u)===t1?new xo("",u,null,null,null):new xo(Xi(u),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const s of this.sections){r.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),r.push(u)}return r}}class rl{constructor(r,s){this.type=t1,this.inputPrimary=r,this.inputSecondary=s}static parse(r,s){if(r.length<2)return s.error("Expected two or more arguments.");const u=s.parse(r[1],1,Ir);if(!u)return s.error("No image name provided.");if(r.length===2)return new rl(u);const m=s.parse(r[2],1,Ir);return m?new rl(u,m):s.error("Secondary image variant is not a string.")}evaluate(r){const s=Zi.fromString(this.inputPrimary.evaluate(r),this.inputSecondary?this.inputSecondary.evaluate(r):void 0);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(s.namePrimary)>-1,s.nameSecondary&&s.available&&r.availableImages&&(s.available=r.availableImages.indexOf(s.nameSecondary)>-1)),s}eachChild(r){r(this.inputPrimary),this.inputSecondary&&r(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function nl(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}const i7={"to-boolean":Or,"to-color":ao,"to-number":Vt,"to-string":Ir};class Ka{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[0],m=[];let f=ea;if(u==="to-array"){if(!Array.isArray(r[1]))return null;const g=r[1].length;if(s.expectedType){if(s.expectedType.kind!=="array")return s.error(`Expected ${s.expectedType.kind} but found array.`);f=Hi(s.expectedType.itemType,g)}else{if(!(g>0&&Ts(r[1][0])))return null;f=Hi(Hn(r[1][0]),g)}for(let b=0;b<g;b++){const E=r[1][b];let I;if(nl(E)==="array")I=s.parse(E,void 0,f.itemType);else{const v=nl(E);if(v!==f.itemType.kind)return s.error(`Expected ${f.itemType.kind} but found ${v}.`);I=s.registry.literal.parse(["literal",E===void 0?null:E],s)}if(!I)return null;m.push(I)}}else{if((u==="to-boolean"||u==="to-string")&&r.length!==2)return s.error("Expected one argument.");f=i7[u];for(let g=1;g<r.length;g++){const b=s.parse(r[g],g,Lr);if(!b)return null;m.push(b)}}return new Ka(f,m)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let s,u;for(const m of this.args){if(s=m.evaluate(r),u=null,s instanceof qr)return s;if(typeof s=="string"){const f=r.parseColor(s);if(f)return f}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:P6(s[0],s[1],s[2],s[3]),!u))return new qr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new fi(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new fi(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Fi.fromString(Xi(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Zi.fromString(Xi(this.args[0].evaluate(r))):this.type.kind==="array"?this.args.map(s=>s.evaluate(r)):Xi(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new i1([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new rl(this.args[0]).serialize();const r=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(s=>{r.push(s.serialize())}),r}}const Z4=["Unknown","Point","LineString","Polygon"];class M6{constructor(r,s){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=r,this.options=s}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Z4[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(r){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:u,y:m}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*s-r[0])+this.featureDistanceData.bearing[1]*(m*s-r[1])}return 0}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=qr.parse(r)),s}getConfig(r){return this.options?this.options.get(r):null}}class so{constructor(r,s,u,m,f){this.name=r,this.type=s,this._evaluate=u,this.args=m,this._overloadIndex=f}evaluate(r){if(!this._evaluate){const s=so.definitions[this.name];this._evaluate=Array.isArray(s)?s[2]:s.overloads[this._overloadIndex][1]}return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,s){const u=r[0],m=so.definitions[u];if(!m)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(m)?m[0]:m.type,g=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=[];let E=null,I=-1;for(const[v,T]of g){if(Array.isArray(v)&&v.length!==r.length-1)continue;b.push(v),I++,E=new j6(s.registry,s.path,null,s.scope,void 0,s._scope,s.options);const M=[];let S=!1;for(let P=1;P<r.length;P++){const R=r[P],L=Array.isArray(v)?v[P-1]:v.type,N=E.parse(R,1+M.length,L);if(!N){S=!0;break}M.push(N)}if(!S)if(Array.isArray(v)&&v.length!==M.length)E.error(`Expected ${v.length} arguments, but found ${M.length} instead.`);else{for(let P=0;P<M.length;P++){const R=Array.isArray(v)?v[P]:v.type,L=M[P];E.concat(P+1).checkSubtype(R,L.type)}if(E.errors.length===0)return new so(u,f,T,M,I)}}if(b.length===1)s.errors.push(...E.errors);else{const v=(b.length?b:g.map(([M])=>M)).map(X4).join(" | "),T=[];for(let M=1;M<r.length;M++){const S=s.parse(r[M],1+T.length);if(!S)return null;T.push(zn(S.type))}s.error(`Expected arguments of type ${v}, but found (${T.join(", ")}) instead.`)}return null}static register(r,s){so.definitions=s;for(const u in s)r[u]=so}}function X4(c){return Array.isArray(c)?`(${c.map(zn).join(", ")})`:`(${zn(c.type)}...)`}class o7{constructor(r,s,u){this.type=r7,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const m=u["case-sensitive"]===void 0?s.parse(!1,1,Or):s.parseObjectValue(u["case-sensitive"],1,"case-sensitive",Or);if(!m)return null;const f=u["diacritic-sensitive"]===void 0?s.parse(!1,1,Or):s.parseObjectValue(u["diacritic-sensitive"],1,"diacritic-sensitive",Or);if(!f)return null;let g=null;return u.locale&&(g=s.parseObjectValue(u.locale,1,"locale",Ir),!g)?null:new o7(m,f,g)}evaluate(r){return new n7(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}function C6(c,r,s=0,u=c.length-1,m=a1){for(;u>s;){if(u-s>600){const E=u-s+1,I=r-s+1,v=Math.log(E),T=.5*Math.exp(2*v/3),M=.5*Math.sqrt(v*T*(E-T)/E)*(I-E/2<0?-1:1);C6(c,r,Math.max(s,Math.floor(r-I*T/E+M)),Math.min(u,Math.floor(r+(E-I)*T/E+M)),m)}const f=c[r];let g=s,b=u;for(o1(c,s,r),m(c[u],f)>0&&o1(c,s,u);g<b;){for(o1(c,g,b),g++,b--;m(c[g],f)<0;)g++;for(;m(c[b],f)>0;)b--}m(c[s],f)===0?o1(c,s,b):(b++,o1(c,b,u)),b<=r&&(s=b+1),r<=b&&(u=b-1)}}function o1(c,r,s){const u=c[r];c[r]=c[s],c[s]=u}function a1(c,r){return c<r?-1:c>r?1:0}function Y4(c){let r=0;for(let s,u,m=0,f=c.length,g=f-1;m<f;g=m++)s=c[m],u=c[g],r+=(u.x-s.x)*(s.y+u.y);return r}function Oc(c,r){c[0]=Math.min(c[0],r[0]),c[1]=Math.min(c[1],r[1]),c[2]=Math.max(c[2],r[0]),c[3]=Math.max(c[3],r[1])}function il(c,r){return!(c[0]<=r[0]||c[2]>=r[2]||c[1]<=r[1]||c[3]>=r[3])}function K4(c,r,s){const u=c[0]-r[0],m=c[1]-r[1],f=c[0]-s[0],g=c[1]-s[1];return u*g-f*m==0&&u*f<=0&&m*g<=0}function s1(c,r,s=!1){let u=!1;for(let b=0,E=r.length;b<E;b++){const I=r[b];for(let v=0,T=I.length,M=T-1;v<T;M=v++){const S=I[M],P=I[v];if(K4(c,S,P))return s;(f=S)[1]>(m=c)[1]!=(g=P)[1]>m[1]&&m[0]<(g[0]-f[0])*(m[1]-f[1])/(g[1]-f[1])+f[0]&&(u=!u)}}var m,f,g;return u}function I6(c,r,s,u){const m=u[0]-s[0],f=u[1]-s[1],g=(c[0]-s[0])*f-m*(c[1]-s[1]),b=(r[0]-s[0])*f-m*(r[1]-s[1]);return g>0&&b<0||g<0&&b>0}function a7(c,r,s,u){return(m=[u[0]-s[0],u[1]-s[1]])[0]*(f=[r[0]-c[0],r[1]-c[1]])[1]-m[1]*f[0]!=0&&!(!I6(c,r,s,u)||!I6(s,u,c,r));var m,f}const bo=8192;function Pr(c,r){const s=(180+c[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*bo),Math.round(u*m*bo)]}function Jt(c,r){for(let s=0;s<r.length;s++)if(s1(c,r[s]))return!0;return!1}function q2(c,r,s){for(const u of s)for(let m=0,f=u.length,g=f-1;m<f;g=m++)if(a7(c,r,u[g],u[m]))return!0;return!1}function pr(c,r){for(let s=0;s<c.length;++s)if(!s1(c[s],r))return!1;for(let s=0;s<c.length-1;++s)if(q2(c[s],c[s+1],r))return!1;return!0}function W2(c,r){for(let s=0;s<r.length;s++)if(pr(c,r[s]))return!0;return!1}function Rc(c,r,s){const u=[];for(let m=0;m<c.length;m++){const f=[];for(let g=0;g<c[m].length;g++){const b=Pr(c[m][g],s);Oc(r,b),f.push(b)}u.push(f)}return u}function or(c,r,s){const u=[];for(let m=0;m<c.length;m++){const f=Rc(c[m],r,s);u.push(f)}return u}function H2(c,r,s,u){if(c[0]<s[0]||c[0]>s[2]){const m=.5*u;let f=c[0]-s[0]>m?-u:s[0]-c[0]>m?u:0;f===0&&(f=c[0]-s[2]>m?-u:s[2]-c[0]>m?u:0),c[0]+=f}Oc(r,c)}function s7(c,r,s,u){const m=Math.pow(2,u.z)*bo,f=[u.x*bo,u.y*bo],g=[];if(!c)return g;for(const b of c)for(const E of b){const I=[E.x+f[0],E.y+f[1]];H2(I,r,s,m),g.push(I)}return g}function Z2(c,r,s,u){const m=Math.pow(2,u.z)*bo,f=[u.x*bo,u.y*bo],g=[];if(!c)return g;for(const E of c){const I=[];for(const v of E){const T=[v.x+f[0],v.y+f[1]];Oc(r,T),I.push(T)}g.push(I)}if(r[2]-r[0]<=m/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of g)for(const I of E)H2(I,r,s,m)}var b;return g}class Ss{constructor(r,s){this.type=Or,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ts(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let m=0;m<u.features.length;++m){const f=u.features[m].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Ss(u,u.features[m].geometry)}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ss(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Ss(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,u){const m=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=s.canonicalID();if(!g)return!1;if(u.type==="Polygon"){const b=Rc(u.coordinates,f,g),E=s7(s.geometry(),m,f,g);if(!il(m,f))return!1;for(const I of E)if(!s1(I,b))return!1}if(u.type==="MultiPolygon"){const b=or(u.coordinates,f,g),E=s7(s.geometry(),m,f,g);if(!il(m,f))return!1;for(const I of E)if(!Jt(I,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,u){const m=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=s.canonicalID();if(!g)return!1;if(u.type==="Polygon"){const b=Rc(u.coordinates,f,g),E=Z2(s.geometry(),m,f,g);if(!il(m,f))return!1;for(const I of E)if(!pr(I,b))return!1}if(u.type==="MultiPolygon"){const b=or(u.coordinates,f,g),E=Z2(s.geometry(),m,f,g);if(!il(m,f))return!1;for(const I of E)if(!W2(I,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const ol={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Mi=1/298.257223563,l7=Mi*(2-Mi),l1=Math.PI/180;class c1{static fromTile(r,s,u){const m=Math.PI*(1-2*(r+.5)/Math.pow(2,s)),f=Math.atan(.5*(Math.exp(m)-Math.exp(-m)))/l1;return new c1(f,u)}static get units(){return ol}constructor(r,s){if(r===void 0)throw new Error("No latitude given.");if(s&&!ol[s])throw new Error(`Unknown unit ${s}. Use one of: ${Object.keys(ol).join(", ")}`);const u=6378.137*l1*(s?ol[s]:1),m=Math.cos(r*l1),f=1/(1-l7*(1-m*m)),g=Math.sqrt(f);this.kx=u*g*m,this.ky=u*g*f*(1-l7)}distance(r,s){const u=Sn(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(u*u+m*m)}bearing(r,s){const u=Sn(s[0]-r[0])*this.kx;return Math.atan2(u,(s[1]-r[1])*this.ky)/l1}destination(r,s,u){const m=u*l1;return this.offset(r,Math.sin(m)*s,Math.cos(m)*s)}offset(r,s,u){return[r[0]+s/this.kx,r[1]+u/this.ky]}lineDistance(r){let s=0;for(let u=0;u<r.length-1;u++)s+=this.distance(r[u],r[u+1]);return s}area(r){let s=0;for(let u=0;u<r.length;u++){const m=r[u];for(let f=0,g=m.length,b=g-1;f<g;b=f++)s+=Sn(m[f][0]-m[b][0])*(m[f][1]+m[b][1])*(u?-1:1)}return Math.abs(s)/2*this.kx*this.ky}along(r,s){let u=0;if(s<=0)return r[0];for(let m=0;m<r.length-1;m++){const f=r[m],g=r[m+1],b=this.distance(f,g);if(u+=b,u>s)return Ja(f,g,(s-(u-b))/b)}return r[r.length-1]}pointToSegmentDistance(r,s,u){let[m,f]=s,g=Sn(u[0]-m)*this.kx,b=(u[1]-f)*this.ky;if(g!==0||b!==0){const E=(Sn(r[0]-m)*this.kx*g+(r[1]-f)*this.ky*b)/(g*g+b*b);E>1?(m=u[0],f=u[1]):E>0&&(m+=g/this.kx*E,f+=b/this.ky*E)}return g=Sn(r[0]-m)*this.kx,b=(r[1]-f)*this.ky,Math.sqrt(g*g+b*b)}pointOnLine(r,s){let u=1/0,m=r[0][0],f=r[0][1],g=0,b=0;for(let E=0;E<r.length-1;E++){let I=r[E][0],v=r[E][1],T=Sn(r[E+1][0]-I)*this.kx,M=(r[E+1][1]-v)*this.ky,S=0;T===0&&M===0||(S=(Sn(s[0]-I)*this.kx*T+(s[1]-v)*this.ky*M)/(T*T+M*M),S>1?(I=r[E+1][0],v=r[E+1][1]):S>0&&(I+=T/this.kx*S,v+=M/this.ky*S)),T=Sn(s[0]-I)*this.kx,M=(s[1]-v)*this.ky;const P=T*T+M*M;P<u&&(u=P,m=I,f=v,g=E,b=S)}return{point:[m,f],index:g,t:Math.max(0,Math.min(1,b))}}lineSlice(r,s,u){let m=this.pointOnLine(u,r),f=this.pointOnLine(u,s);if(m.index>f.index||m.index===f.index&&m.t>f.t){const I=m;m=f,f=I}const g=[m.point],b=m.index+1,E=f.index;!c7(u[b],g[0])&&b<=E&&g.push(u[b]);for(let I=b+1;I<=E;I++)g.push(u[I]);return c7(u[E],f.point)||g.push(f.point),g}lineSliceAlong(r,s,u){let m=0;const f=[];for(let g=0;g<u.length-1;g++){const b=u[g],E=u[g+1],I=this.distance(b,E);if(m+=I,m>r&&f.length===0&&f.push(Ja(b,E,(r-(m-I))/I)),m>=s)return f.push(Ja(b,E,(s-(m-I))/I)),f;m>r&&f.push(E)}return f}bufferPoint(r,s){const u=s/this.ky,m=s/this.kx;return[r[0]-m,r[1]-u,r[0]+m,r[1]+u]}bufferBBox(r,s){const u=s/this.ky,m=s/this.kx;return[r[0]-m,r[1]-u,r[2]+m,r[3]+u]}insideBBox(r,s){return Sn(r[0]-s[0])>=0&&Sn(r[0]-s[2])<=0&&r[1]>=s[1]&&r[1]<=s[3]}}function c7(c,r){return c[0]===r[0]&&c[1]===r[1]}function Ja(c,r,s){const u=Sn(r[0]-c[0]);return[c[0]+u*s,c[1]+(r[1]-c[1])*s]}function Sn(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}class X2{constructor(r=[],s=(u,m)=>u<m?-1:u>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:u}=this,m=s[r];for(;r>0;){const f=r-1>>1,g=s[f];if(u(m,g)>=0)break;s[r]=g,r=f}s[r]=m}_down(r){const{data:s,compare:u}=this,m=this.length>>1,f=s[r];for(;r<m;){let g=1+(r<<1);const b=g+1;if(b<this.length&&u(s[b],s[g])<0&&(g=b),u(s[g],f)>=0)break;s[r]=s[g],r=g}s[r]=f}}var Dt=8192;function O6(c,r){return r.dist-c.dist}const u1=100,u7=50;function h7(c){const r=[1/0,1/0,-1/0,-1/0];if(r.length!==c.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==c[s])return!1;return!0}function f7(c){return c[1]-c[0]+1}function Qa(c,r){const s=c[1]>=c[0]&&c[1]<r;return s||console.warn("Distance Expression: Index is out of range"),s}function Y2(c,r){if(c[0]>c[1])return[null,null];const s=f7(c);if(r){if(s===2)return[c,null];const u=Math.floor(s/2);return[[c[0],c[0]+u],[c[0]+u,c[1]]]}{if(s===1)return[c,null];const u=Math.floor(s/2)-1;return[[c[0],c[0]+u],[c[0]+u+1,c[1]]]}}function wo(c,r){const s=[1/0,1/0,-1/0,-1/0];if(!Qa(r,c.length))return s;for(let u=r[0];u<=r[1];++u)Oc(s,c[u]);return s}function d7(c){const r=[1/0,1/0,-1/0,-1/0];for(let s=0;s<c.length;++s)for(let u=0;u<c[s].length;++u)Oc(r,c[s][u]);return r}function h1(c,r,s){if(h7(c)||h7(r))return NaN;let u=0,m=0;return c[2]<r[0]&&(u=r[0]-c[2]),c[0]>r[2]&&(u=c[0]-r[2]),c[1]>r[3]&&(m=c[1]-r[3]),c[3]<r[1]&&(m=r[1]-c[3]),s.distance([0,0],[u,m])}function R6(c){return 360*c-180}function D6(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Ao(c,r){const s=Math.pow(2,r.z),u=(c.y/Dt+r.y)/s;return[R6((c.x/Dt+r.x)/s),D6(u)]}function k6(c,r){const s=[];for(let u=0;u<c.length;++u)s.push(Ao(c[u],r));return s}function K2(c,r,s){const u=s.pointOnLine(r,c).point;return s.distance(c,u)}function J2(c,r,s,u,m){const f=s.slice(u[0],u[1]+1);let g=1/0;for(let b=r[0];b<=r[1];++b)if((g=Math.min(g,K2(c[b],f,m)))===0)return 0;return g}function p7(c,r,s,u,m){const f=Math.min(m.pointToSegmentDistance(c,s,u),m.pointToSegmentDistance(r,s,u)),g=Math.min(m.pointToSegmentDistance(s,c,r),m.pointToSegmentDistance(u,c,r));return Math.min(f,g)}function L6(c,r,s,u,m){if(!Qa(r,c.length)||!Qa(u,s.length))return NaN;let f=1/0;for(let g=r[0];g<r[1];++g)for(let b=u[0];b<u[1];++b){if(a7(c[g],c[g+1],s[b],s[b+1]))return 0;f=Math.min(f,p7(c[g],c[g+1],s[b],s[b+1],m))}return f}function z6(c,r,s,u,m){if(!Qa(r,c.length)||!Qa(u,s.length))return NaN;let f=1/0;for(let g=r[0];g<=r[1];++g)for(let b=u[0];b<=u[1];++b)if((f=Math.min(f,m.distance(c[g],s[b])))===0)return f;return f}function B6(c,r,s){if(s1(c,r,!0))return 0;let u=1/0;for(const m of r){const f=m.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(m[0]!==m[f-1]&&(u=Math.min(u,s.pointToSegmentDistance(c,m[f-1],m[0])))===0||(u=Math.min(u,K2(c,m,s)))===0)return u}return u}function F6(c,r,s,u){if(!Qa(r,c.length))return NaN;for(let f=r[0];f<=r[1];++f)if(s1(c[f],s,!0))return 0;let m=1/0;for(let f=r[0];f<r[1];++f)for(const g of s)for(let b=0,E=g.length,I=E-1;b<E;I=b++){if(a7(c[f],c[f+1],g[I],g[b]))return 0;m=Math.min(m,p7(c[f],c[f+1],g[I],g[b],u))}return m}function Q2(c,r){for(const s of c)for(let u=0;u<=s.length-1;++u)if(s1(s[u],r,!0))return!0;return!1}function N6(c,r,s,u=1/0){const m=d7(c),f=d7(r);if(u!==1/0&&h1(m,f,s)>=u)return u;if(il(m,f)){if(Q2(c,r))return 0}else if(Q2(r,c))return 0;let g=u;for(const b of c)for(let E=0,I=b.length,v=I-1;E<I;v=E++)for(const T of r)for(let M=0,S=T.length,P=S-1;M<S;P=M++){if(a7(b[v],b[E],T[P],T[M]))return 0;g=Math.min(g,p7(b[v],b[E],T[P],T[M],s))}return g}function Dc(c,r,s,u,m,f,g){if(f===null||g===null)return;const b=h1(wo(u,f),wo(m,g),s);b<r&&c.push({dist:b,range1:f,range2:g})}function m7(c,r,s,u,m=1/0){let f=Math.min(u.distance(c[0],s[0][0]),m);if(f===0)return f;const g=new X2([{dist:0,range1:[0,c.length-1],range2:[0,0]}],O6),b=r?u7:u1,E=d7(s);for(;g.length;){const I=g.pop();if(I.dist>=f)continue;const v=I.range1;if(f7(v)<=b){if(!Qa(v,c.length))return NaN;if(r){const T=F6(c,v,s,u);if((f=Math.min(f,T))===0)return f}else for(let T=v[0];T<=v[1];++T){const M=B6(c[T],s,u);if((f=Math.min(f,M))===0)return f}}else{const T=Y2(v,r);if(T[0]!==null){const M=h1(wo(c,T[0]),E,u);M<f&&g.push({dist:M,range1:T[0],range2:[0,0]})}if(T[1]!==null){const M=h1(wo(c,T[1]),E,u);M<f&&g.push({dist:M,range1:T[1],range2:[0,0]})}}}return f}function kc(c,r,s,u,m,f=1/0){let g=Math.min(f,m.distance(c[0],s[0]));if(g===0)return g;const b=new X2([{dist:0,range1:[0,c.length-1],range2:[0,s.length-1]}],O6),E=r?u7:u1,I=u?u7:u1;for(;b.length;){const v=b.pop();if(v.dist>=g)continue;const T=v.range1,M=v.range2;if(f7(T)<=E&&f7(M)<=I){if(!Qa(T,c.length)||!Qa(M,s.length))return NaN;if(r&&u?g=Math.min(g,L6(c,T,s,M,m)):r||u?r&&!u?g=Math.min(g,J2(s,M,c,T,m)):!r&&u&&(g=Math.min(g,J2(c,T,s,M,m))):g=Math.min(g,z6(c,T,s,M,m)),g===0)return g}else{const S=Y2(T,r),P=Y2(M,u);Dc(b,g,m,c,s,S[0],P[0]),Dc(b,g,m,c,s,S[0],P[1]),Dc(b,g,m,c,s,S[1],P[0]),Dc(b,g,m,c,s,S[1],P[1])}}return g}function f1(c,r,s,u,m=1/0){let f=m;const g=wo(c,[0,c.length-1]);for(const b of s)if(!(f!==1/0&&h1(g,wo(b,[0,b.length-1]),u)>=f)&&(f=Math.min(f,kc(c,r,b,!0,u,f)),f===0))return f;return f}function Lc(c,r,s,u,m=1/0){let f=m;const g=wo(c,[0,c.length-1]);for(const b of s){if(f!==1/0&&h1(g,d7(b),u)>=f)continue;const E=m7(c,r,b,u,f);if(isNaN(E))return E;if((f=Math.min(f,E))===0)return f}return f}function g7(c){return c==="Point"||c==="MultiPoint"||c==="LineString"||c==="MultiLineString"||c==="Polygon"||c==="MultiPolygon"}class Es{constructor(r,s){this.type=Vt,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires either one argument, but found ' ${r.length-1} instead.`);if(Ts(r[1])){const u=r[1];if(u.type==="FeatureCollection"){for(let m=0;m<u.features.length;++m)if(g7(u.features[m].geometry.type))return new Es(u,u.features[m].geometry)}else if(u.type==="Feature"){if(g7(u.geometry.type))return new Es(u,u.geometry)}else if(g7(u.type))return new Es(u,u)}return s.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(r){const s=r.geometry(),u=r.canonicalID();if(s!=null&&u!=null){if(r.geometryType()==="Point")return function(m,f,g){const b=[];for(const I of m)for(const v of I)b.push(Ao(v,f));const E=new c1(b[0][1],"meters");return g.type==="Point"||g.type==="MultiPoint"||g.type==="LineString"?kc(b,!1,g.type==="Point"?[g.coordinates]:g.coordinates,g.type==="LineString",E):g.type==="MultiLineString"?f1(b,!1,g.coordinates,E):g.type==="Polygon"||g.type==="MultiPolygon"?Lc(b,!1,g.type==="Polygon"?[g.coordinates]:g.coordinates,E):null}(s,u,this.geometries);if(r.geometryType()==="LineString")return function(m,f,g){const b=[];for(const I of m){const v=[];for(const T of I)v.push(Ao(T,f));b.push(v)}const E=new c1(b[0][0][1],"meters");if(g.type==="Point"||g.type==="MultiPoint"||g.type==="LineString")return f1(g.type==="Point"?[g.coordinates]:g.coordinates,g.type==="LineString",b,E);if(g.type==="MultiLineString"){let I=1/0;for(let v=0;v<g.coordinates.length;v++){const T=f1(g.coordinates[v],!0,b,E,I);if(isNaN(T))return T;if((I=Math.min(I,T))===0)return I}return I}if(g.type==="Polygon"||g.type==="MultiPolygon"){let I=1/0;for(let v=0;v<b.length;v++){const T=Lc(b[v],!0,g.type==="Polygon"?[g.coordinates]:g.coordinates,E,I);if(isNaN(T))return T;if((I=Math.min(I,T))===0)return I}return I}return null}(s,u,this.geometries);if(r.geometryType()==="Polygon")return function(m,f,g){const b=[];for(const I of function(v,T){const M=v.length;if(M<=1)return[v];const S=[];let P,R;for(let L=0;L<M;L++){const N=Y4(v[L]);N!==0&&(v[L].area=Math.abs(N),R===void 0&&(R=N<0),R===N<0?(P&&S.push(P),P=[v[L]]):P.push(v[L]))}return P&&S.push(P),S}(m)){const v=[];for(let T=0;T<I.length;++T)v.push(k6(I[T],f));b.push(v)}const E=new c1(b[0][0][0][1],"meters");if(g.type==="Point"||g.type==="MultiPoint"||g.type==="LineString")return Lc(g.type==="Point"?[g.coordinates]:g.coordinates,g.type==="LineString",b,E);if(g.type==="MultiLineString"){let I=1/0;for(let v=0;v<g.coordinates.length;v++){const T=Lc(g.coordinates[v],!0,b,E,I);if(isNaN(T))return T;if((I=Math.min(I,T))===0)return I}return I}return g.type==="Polygon"||g.type==="MultiPolygon"?function(I,v,T){let M=1/0;for(const S of I)for(const P of v){const R=N6(S,P,T,M);if(isNaN(R))return R;if((M=Math.min(M,R))===0)return M}return M}(g.type==="Polygon"?[g.coordinates]:g.coordinates,b,E):null}(s,u,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Ps(c,r){switch(c){case"string":return Xi(r);case"number":return+r;case"boolean":return!!r;case"color":return qr.parse(r);case"formatted":return Fi.fromString(Xi(r));case"resolvedImage":return Zi.fromString(Xi(r))}return r}function Rr(c,r,s,u){return u!==void 0&&(c=u*Math.round(c/u)),r!==void 0&&c<r&&(c=r),s!==void 0&&c>s&&(c=s),c}class d1{constructor(r,s,u){this.type=r,this.key=s,this.scope=u}static parse(r,s){let u=s.expectedType;if(u==null&&(u=Lr),r.length<2||r.length>3)return s.error("Invalid number of arguments for 'config' expression.");const m=s.parse(r[1],1);if(!(m instanceof ta))return s.error("Key name of 'config' expression must be a string literal.");if(r.length>=3){const f=s.parse(r[2],2);return f instanceof ta?new d1(u,Xi(m.value),Xi(f.value)):s.error("Scope of 'config' expression must be a string literal.")}return new d1(u,Xi(m.value))}evaluate(r){const s=[this.key,this.scope,r.scope].filter(Boolean).join(""),u=r.getConfig(s);if(!u)return null;const{type:m,value:f,values:g,minValue:b,maxValue:E,stepValue:I}=u,v=u.default.evaluate(r);let T=v;if(f){const M=r.scope;r.scope=(M||"").split("").slice(1).join(""),T=f.evaluate(r),r.scope=M}return m&&(T=Ps(m,T)),T===void 0||b===void 0&&E===void 0&&I===void 0||(typeof T=="number"?T=Rr(T,b,E,I):Array.isArray(T)&&(T=T.map(M=>typeof M=="number"?Rr(M,b,E,I):M))),f!==void 0&&T!==void 0&&g&&!g.includes(T)&&(T=v,m&&(T=Ps(m,T))),(m&&m!==this.type||T!==void 0&&Hn(T)!==this.type)&&(T=Ps(this.type.kind,T)),T}eachChild(){}outputDefined(){return!1}serialize(){const r=["config",this.key];return this.scope&&r.concat(this.key),r}}function zc(c){if(c instanceof so&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Ss||c instanceof Es)return!1;let r=!0;return c.eachChild(s=>{r&&!zc(s)&&(r=!1)}),r}function y7(c){if(c instanceof so&&c.name==="feature-state")return!1;let r=!0;return c.eachChild(s=>{r&&!y7(s)&&(r=!1)}),r}function _7(c){if(c instanceof d1)return new Set([c.key]);let r=new Set;return c.eachChild(s=>{r=new Set([...r,..._7(s)])}),r}function Bc(c,r){if(c instanceof so&&r.indexOf(c.name)>=0)return!1;let s=!0;return c.eachChild(u=>{s&&!Bc(u,r)&&(s=!1)}),s}class rn{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=r[1];return s.scope.has(u)?new rn(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class e3{constructor(r,s=[],u,m=new t7,f=[],g,b){this.registry=r,this.path=s,this.key=s.map(E=>typeof E=="string"?`['${E}']`:`[${E}]`).join(""),this.scope=m,this.errors=f,this.expectedType=u,this._scope=g,this.options=b}parse(r,s,u,m,f={}){return s||u?this.concat(s,null,u,m)._parse(r,f):this._parse(r,f)}parseObjectValue(r,s,u,m,f,g={}){return this.concat(s,u,m,f)._parse(r,g)}_parse(r,s){function u(m,f,g){return g==="assert"?new ra(f,[m]):g==="coerce"?new Ka(f,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=typeof r[0]=="string"?this.registry[r[0]]:void 0;if(m){let f=m.parse(r,this);if(!f)return null;if(this.expectedType){const g=this.expectedType,b=f.type;if(g.kind!=="string"&&g.kind!=="number"&&g.kind!=="boolean"&&g.kind!=="object"&&g.kind!=="array"||b.kind!=="value")if(g.kind!=="color"&&g.kind!=="formatted"&&g.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(g,b))return null}else f=u(f,g,s.typeAnnotation||"coerce");else f=u(f,g,s.typeAnnotation||"assert")}if(!(f instanceof ta)&&f.type.kind!=="resolvedImage"&&t3(f)){const g=new M6(this._scope,this.options);try{f=new ta(f.type,f.evaluate(g))}catch(b){return this.error(b.message),null}}return f}return Ka.parse(["to-array",r],this)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,u,m){let f=typeof r=="number"?this.path.concat(r):this.path;f=typeof s=="string"?f.concat(s):f;const g=m?this.scope.concat(m):this.scope;return new e3(this.registry,f,u||null,g,this.errors,this._scope,this.options)}error(r,...s){const u=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new ba(u,r))}checkSubtype(r,s){const u=r1(r,s);return u&&this.error(u),u}}var j6=e3;function t3(c){if(c instanceof rn)return t3(c.boundExpression);if(c instanceof so&&c.name==="error"||c instanceof o7||c instanceof Ss||c instanceof Es||c instanceof d1)return!1;const r=c instanceof Ka||c instanceof ra;let s=!0;return c.eachChild(u=>{s=r?s&&t3(u):s&&u instanceof ta}),!!s&&zc(c)&&Bc(c,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function v7(c,r){const s=c.length-1;let u,m,f=0,g=s,b=0;for(;f<=g;)if(b=Math.floor((f+g)/2),u=c[b],m=c[b+1],u<=r){if(b===s||r<m)return b;f=b+1}else{if(!(u>r))throw new fi("Input is not a number.");g=b-1}return 0}class Fc{constructor(r,s,u){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,f]of u)this.labels.push(m),this.outputs.push(f)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(r[1],1,Vt);if(!u)return null;const m=[];let f=null;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);for(let g=1;g<r.length;g+=2){const b=g===1?-1/0:r[g],E=r[g+1],I=g,v=g+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const T=s.parse(E,v,f);if(!T)return null;f=f||T.type,m.push([b,T])}return new Fc(f,u,m)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return u[0].evaluate(r);const f=s.length;return m>=s[f-1]?u[f-1].evaluate(r):u[v7(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r}}const $6=.95047,U6=1.08883,V6=4/29,p1=6/29,G6=3*p1*p1,J4=p1*p1*p1,Q4=Math.PI/180,e8=180/Math.PI;function r3(c){return c>J4?Math.pow(c,1/3):c/G6+V6}function n3(c){return c>p1?c*c*c:G6*(c-V6)}function i3(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function o3(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function q6(c){const r=o3(c.r),s=o3(c.g),u=o3(c.b),m=r3((.4124564*r+.3575761*s+.1804375*u)/$6),f=r3((.2126729*r+.7151522*s+.072175*u)/1);return{l:116*f-16,a:500*(m-f),b:200*(f-r3((.0193339*r+.119192*s+.9503041*u)/U6)),alpha:c.a}}function W6(c){let r=(c.l+16)/116,s=isNaN(c.a)?r:r+c.a/500,u=isNaN(c.b)?r:r-c.b/200;return r=1*n3(r),s=$6*n3(s),u=U6*n3(u),new qr(i3(3.2404542*s-1.5371385*r-.4985314*u),i3(-.969266*s+1.8760108*r+.041556*u),i3(.0556434*s-.2040259*r+1.0572252*u),c.alpha)}function t8(c,r,s){const u=r-c;return c+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Nc={forward:q6,reverse:W6,interpolate:function(c,r,s){return{l:nr(c.l,r.l,s),a:nr(c.a,r.a,s),b:nr(c.b,r.b,s),alpha:nr(c.alpha,r.alpha,s)}}},jc={forward:function(c){const{l:r,a:s,b:u}=q6(c),m=Math.atan2(u,s)*e8;return{h:m<0?m+360:m,c:Math.sqrt(s*s+u*u),l:r,alpha:c.a}},reverse:function(c){const r=c.h*Q4,s=c.c;return W6({l:c.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:c.alpha})},interpolate:function(c,r,s){return{h:t8(c.h,r.h,s),c:nr(c.c,r.c,s),l:nr(c.l,r.l,s),alpha:nr(c.alpha,r.alpha,s)}}};var H6=Object.freeze({__proto__:null,hcl:jc,lab:Nc});class To{constructor(r,s,u,m,f){this.type=r,this.operator=s,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static interpolationFactor(r,s,u,m){let f=0;if(r.name==="exponential")f=a3(s,r.base,u,m);else if(r.name==="linear")f=a3(s,1,u,m);else if(r.name==="cubic-bezier"){const g=r.controlPoints;f=new gn(g[0],g[1],g[2],g[3]).solve(a3(s,1,u,m))}return f}static parse(r,s){let[u,m,f,...g]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(v=>typeof v!="number"||v<0||v>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(f=s.parse(f,2,Vt),!f)return null;const b=[];let E=null;u==="interpolate-hcl"||u==="interpolate-lab"?E=ao:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let I=0;I<g.length;I+=2){const v=g[I],T=g[I+1],M=I+3,S=I+4;if(typeof v!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(b.length&&b[b.length-1][0]>=v)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=s.parse(T,S,E);if(!P)return null;E=E||P.type,b.push([v,P])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new To(E,u,m,f,b):s.error(`Type ${zn(E)} is not interpolatable.`)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return u[0].evaluate(r);const f=s.length;if(m>=s[f-1])return u[f-1].evaluate(r);const g=v7(s,m),b=To.interpolationFactor(this.interpolation,m,s[g],s[g+1]),E=u[g].evaluate(r),I=u[g+1].evaluate(r);return this.operator==="interpolate"?tl[this.type.kind.toLowerCase()](E,I,b):this.operator==="interpolate-hcl"?jc.reverse(jc.interpolate(jc.forward(E),jc.forward(I),b)):Nc.reverse(Nc.interpolate(Nc.forward(E),Nc.forward(I),b))}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,r,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function a3(c,r,s,u){const m=u-s,f=c-s;return m===0?0:r===1?f/m:(Math.pow(r,f)-1)/(Math.pow(r,m)-1)}class x7{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let u=null;const m=s.expectedType;m&&m.kind!=="value"&&(u=m);const f=[];for(const b of r.slice(1)){const E=s.parse(b,1+f.length,u,void 0,{typeAnnotation:"omit"});if(!E)return null;u=u||E.type,f.push(E)}const g=m&&f.some(b=>r1(m,b.type));return new x7(g?Lr:u,f)}evaluate(r){let s,u=null,m=0;for(const f of this.args){if(m++,u=f.evaluate(r),u&&u instanceof Zi&&!u.available&&(s||(s=u),u=null,m===this.args.length))return s;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class b7{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let f=1;f<r.length-1;f+=2){const g=r[f];if(typeof g!="string")return s.error(`Expected string, but found ${typeof g} instead.`,f);if(/[^a-zA-Z0-9_]/.test(g))return s.error("Variable names must contain only alphanumeric characters or '_'.",f);const b=s.parse(r[f+1],f+1);if(!b)return null;u.push([g,b])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,u);return m?new b7(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[s,u]of this.bindings)r.push(s,u.serialize());return r.push(this.result.serialize()),r}}class s3{constructor(r,s,u){this.type=r,this.index=s,this.input=u}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Vt),m=s.parse(r[2],2,Hi(s.expectedType||Lr));return u&&m?new s3(m.type.itemType,u,m):null}evaluate(r){const s=this.index.evaluate(r),u=this.input.evaluate(r);if(s<0)throw new fi(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new fi(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new fi(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class l3{constructor(r,s){this.type=Or,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Lr),m=s.parse(r[2],2,Lr);return u&&m?n1(u.type,[Or,Ir,Vt,ea,Lr])?new l3(u,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(u.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!wa(s,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Hn(s))} instead.`);if(!wa(u,["string","array"]))throw new fi(`Expected second argument to be of type array or string, but found ${zn(Hn(u))} instead.`);return u.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class w7{constructor(r,s,u){this.type=Vt,this.needle=r,this.haystack=s,this.fromIndex=u}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Lr),m=s.parse(r[2],2,Lr);if(!u||!m)return null;if(!n1(u.type,[Or,Ir,Vt,ea,Lr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,Vt);return f?new w7(u,m,f):null}return new w7(u,m)}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!wa(s,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Hn(s))} instead.`);if(!wa(u,["string","array"]))throw new fi(`Expected second argument to be of type array or string, but found ${zn(Hn(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return u.indexOf(s,m)}return u.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class c3{constructor(r,s,u,m,f,g){this.inputType=r,this.type=s,this.input=u,this.cases=m,this.outputs=f,this.otherwise=g}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let u,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const f={},g=[];for(let I=2;I<r.length-1;I+=2){let v=r[I];const T=r[I+1];Array.isArray(v)||(v=[v]);const M=s.concat(I);if(v.length===0)return M.error("Expected at least one branch label.");for(const P of v){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(u){if(M.checkSubtype(u,Hn(P)))return null}else u=Hn(P);if(f[String(P)]!==void 0)return M.error("Branch labels must be unique.");f[String(P)]=g.length}const S=s.parse(T,I,m);if(!S)return null;m=m||S.type,g.push(S)}const b=s.parse(r[1],1,Lr);if(!b)return null;const E=s.parse(r[r.length-1],r.length-1,m);return E?b.type.kind!=="value"&&s.concat(1).checkSubtype(u,b.type)?null:new c3(u,m,b,f,g,E):null}evaluate(r){const s=this.input.evaluate(r);return(Hn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],m={};for(const g of s){const b=m[this.cases[g]];b===void 0?(m[this.cases[g]]=u.length,u.push([this.cases[g],[g]])):u[b][1].push(g)}const f=g=>this.inputType.kind==="number"?Number(g):g;for(const[g,b]of u)r.push(b.length===1?f(b[0]):b.map(f)),r.push(this.outputs[g].serialize());return r.push(this.otherwise.serialize()),r}}class $c{constructor(r,s,u){this.type=r,this.branches=s,this.otherwise=u}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const m=[];for(let g=1;g<r.length-1;g+=2){const b=s.parse(r[g],g,Or);if(!b)return null;const E=s.parse(r[g+1],g+1,u);if(!E)return null;m.push([b,E]),u=u||E.type}const f=s.parse(r[r.length-1],r.length-1,u);return f?new $c(u,m,f):null}evaluate(r){for(const[s,u]of this.branches)if(s.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,u]of this.branches)r(s),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class A7{constructor(r,s,u,m){this.type=r,this.input=s,this.beginIndex=u,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Lr),m=s.parse(r[2],2,Vt);if(!u||!m)return null;if(!n1(u.type,[Hi(Lr),Ir,Lr]))return s.error(`Expected first argument to be of type array or string, but found ${zn(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,Vt);return f?new A7(u.type,u,m,f):null}return new A7(u.type,u,m)}evaluate(r){const s=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!wa(s,["string","array"]))throw new fi(`Expected first argument to be of type array or string, but found ${zn(Hn(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(u,m)}return s.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function u3(c,r){return c==="=="||c==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Z6(c,r,s,u){return u.compare(r,s)===0}function m1(c,r,s){const u=c!=="=="&&c!=="!=";return class lR{constructor(f,g,b){this.type=Or,this.lhs=f,this.rhs=g,this.collator=b,this.hasUntypedArgument=f.type.kind==="value"||g.type.kind==="value"}static parse(f,g){if(f.length!==3&&f.length!==4)return g.error("Expected two or three arguments.");const b=f[0];let E=g.parse(f[1],1,Lr);if(!E)return null;if(!u3(b,E.type))return g.concat(1).error(`"${b}" comparisons are not supported for type '${zn(E.type)}'.`);let I=g.parse(f[2],2,Lr);if(!I)return null;if(!u3(b,I.type))return g.concat(2).error(`"${b}" comparisons are not supported for type '${zn(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return g.error(`Cannot compare types '${zn(E.type)}' and '${zn(I.type)}'.`);u&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new ra(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new ra(E.type,[I])));let v=null;if(f.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(v=g.parse(f[3],3,r7),!v)return null}return new lR(E,I,v)}evaluate(f){const g=this.lhs.evaluate(f),b=this.rhs.evaluate(f);if(u&&this.hasUntypedArgument){const E=Hn(g),I=Hn(b);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new fi(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const E=Hn(g),I=Hn(b);if(E.kind!=="string"||I.kind!=="string")return r(f,g,b)}return this.collator?s(f,g,b,this.collator.evaluate(f)):r(f,g,b)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[c];return this.eachChild(g=>{f.push(g.serialize())}),f}}}const r8=m1("==",function(c,r,s){return r===s},Z6),X6=m1("!=",function(c,r,s){return r!==s},function(c,r,s,u){return!Z6(0,r,s,u)}),Y6=m1("<",function(c,r,s){return r<s},function(c,r,s,u){return u.compare(r,s)<0}),g1=m1(">",function(c,r,s){return r>s},function(c,r,s,u){return u.compare(r,s)>0}),K6=m1("<=",function(c,r,s){return r<=s},function(c,r,s,u){return u.compare(r,s)<=0}),J6=m1(">=",function(c,r,s){return r>=s},function(c,r,s,u){return u.compare(r,s)>=0});class h3{constructor(r,s,u,m,f,g){this.type=Ir,this.number=r,this.locale=s,this.currency=u,this.unit=m,this.minFractionDigits=f,this.maxFractionDigits=g}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const u=s.parse(r[1],1,Vt);if(!u)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let f=null;if(m.locale&&(f=s.parseObjectValue(m.locale,2,"locale",Ir),!f))return null;let g=null;if(m.currency&&(g=s.parseObjectValue(m.currency,2,"currency",Ir),!g))return null;let b=null;if(m.unit&&(b=s.parseObjectValue(m.unit,2,"unit",Ir),!b))return null;let E=null;if(m["min-fraction-digits"]&&(E=s.parseObjectValue(m["min-fraction-digits"],2,"min-fraction-digits",Vt),!E))return null;let I=null;return m["max-fraction-digits"]&&(I=s.parseObjectValue(m["max-fraction-digits"],2,"max-fraction-digits",Vt),!I)?null:new h3(u,f,g,b,E,I)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Uc{constructor(r){this.type=Vt,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=s.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${zn(u.type)} instead.`):new Uc(u):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new fi(`Expected value to be of type string or array, but found ${zn(Hn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(s=>{r.push(s.serialize())}),r}}function T7(c){return function(){c=1831565813+(c|=0)|0;let r=Math.imul(c^c>>>15,1|c);return r=r+Math.imul(r^r>>>7,61|r)^r,((r^r>>>14)>>>0)/4294967296}}const y1={"==":r8,"!=":X6,">":g1,"<":Y6,">=":J6,"<=":K6,array:ra,at:s3,boolean:ra,case:$c,coalesce:x7,collator:o7,format:i1,image:rl,in:l3,"index-of":w7,interpolate:To,"interpolate-hcl":To,"interpolate-lab":To,length:Uc,let:b7,literal:ta,match:c3,number:ra,"number-format":h3,object:ra,slice:A7,step:Fc,string:ra,"to-boolean":Ka,"to-color":Ka,"to-number":Ka,"to-string":Ka,var:rn,within:Ss,distance:Es,config:d1};function Q6(c,[r,s,u,m]){r=r.evaluate(c),s=s.evaluate(c),u=u.evaluate(c);const f=m?m.evaluate(c):1,g=P6(r,s,u,f);if(g)throw new fi(g);return new qr(r/255*f,s/255*f,u/255*f,f)}function f3(c,[r,s,u,m]){r=r.evaluate(c),s=s.evaluate(c),u=u.evaluate(c);const f=m?m.evaluate(c):1,g=function(I,v,T,M){return typeof I=="number"&&I>=0&&I<=360?typeof v=="number"&&v>=0&&v<=100&&typeof T=="number"&&T>=0&&T<=100?M===void 0||typeof M=="number"&&M>=0&&M<=1?null:`Invalid hsla value [${[I,v,T,M].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof M=="number"?[I,v,T,M]:[I,v,T]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof M=="number"?[I,v,T,M]:[I,v,T]).join(", ")}]: 'h' must be between 0 and 360.`}(r,s,u,f);if(g)throw new fi(g);const b=`hsla(${r}, ${s}%, ${u}%, ${f})`,E=qr.parse(b);if(!E)throw new fi(`Failed to parse HSLA color: ${b}`);return E}function d3(c,r){return c in r}function p3(c,r){const s=r[c];return s===void 0?null:s}function al(c){return{type:c}}function ef(c){return{result:"success",value:c}}function Ms(c){return{result:"error",value:c}}function m3(c,r){return!!c&&!!c.parameters&&c.parameters.indexOf(r)>-1}function S7(c){return c["property-type"]==="data-driven"}function g3(c){return m3(c.expression,"measure-light")}function tf(c){return m3(c.expression,"zoom")}function y3(c){return!!c.expression&&c.expression.interpolated}function E7(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function rf(c){return c}function nf(c,r){const s=r.type==="color",u=c.stops&&typeof c.stops[0][0]=="object",m=u||!(u||c.property!==void 0),f=c.type||(y3(r)?"exponential":"interval");if(s&&((c=Ql({},c)).stops&&(c.stops=c.stops.map(I=>[I[0],qr.parse(I[1])])),c.default=qr.parse(c.default?c.default:r.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!H6[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let g,b,E;if(f==="exponential")g=af;else if(f==="interval")g=of;else if(f==="categorical"){g=n8,b=Object.create(null);for(const I of c.stops)b[I[0]]=I[1];E=typeof c.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);g=i8}if(u){const I={},v=[];for(let S=0;S<c.stops.length;S++){const P=c.stops[S],R=P[0].zoom;I[R]===void 0&&(I[R]={zoom:R,type:c.type,property:c.property,default:c.default,stops:[]},v.push(R)),I[R].stops.push([P[0].value,P[1]])}const T=[];for(const S of v)T.push([I[S].zoom,nf(I[S],r)]);const M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:To.interpolationFactor.bind(void 0,M),zoomStops:T.map(S=>S[0]),evaluate:({zoom:S},P)=>af({stops:T,base:c.base},r,S).evaluate(S,P)}}if(m){const I=f==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:To.interpolationFactor.bind(void 0,I),zoomStops:c.stops.map(v=>v[0]),evaluate:({zoom:v})=>g(c,r,v,b,E)}}return{kind:"source",evaluate(I,v){const T=v&&v.properties?v.properties[c.property]:void 0;return T===void 0?Vc(c.default,r.default):g(c,r,T,b,E)}}}function Vc(c,r,s){return c!==void 0?c:r!==void 0?r:s!==void 0?s:void 0}function n8(c,r,s,u,m){return Vc(typeof s===m?u[s]:void 0,c.default,r.default)}function of(c,r,s){if(nl(s)!=="number")return Vc(c.default,r.default);const u=c.stops.length;if(u===1||s<=c.stops[0][0])return c.stops[0][1];if(s>=c.stops[u-1][0])return c.stops[u-1][1];const m=v7(c.stops.map(f=>f[0]),s);return c.stops[m][1]}function af(c,r,s){const u=c.base!==void 0?c.base:1;if(nl(s)!=="number")return Vc(c.default,r.default);const m=c.stops.length;if(m===1||s<=c.stops[0][0])return c.stops[0][1];if(s>=c.stops[m-1][0])return c.stops[m-1][1];const f=v7(c.stops.map(v=>v[0]),s),g=function(v,T,M,S){const P=S-M,R=v-M;return P===0?0:T===1?R/P:(Math.pow(T,R)-1)/(Math.pow(T,P)-1)}(s,u,c.stops[f][0],c.stops[f+1][0]),b=c.stops[f][1],E=c.stops[f+1][1];let I=tl[r.type]||rf;if(c.colorSpace&&c.colorSpace!=="rgb"){const v=H6[c.colorSpace];I=(T,M)=>v.reverse(v.interpolate(v.forward(T),v.forward(M),g))}return typeof b.evaluate=="function"?{evaluate(...v){const T=b.evaluate.apply(void 0,v),M=E.evaluate.apply(void 0,v);if(T!==void 0&&M!==void 0)return I(T,M,g)}}:I(b,E,g)}function i8(c,r,s){return r.type==="color"?s=qr.parse(s):r.type==="formatted"?s=Fi.fromString(s.toString()):r.type==="resolvedImage"?s=Zi.fromString(s.toString()):nl(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),Vc(s,c.default,r.default)}so.register(y1,{error:[{kind:"error"},[Ir],(c,[r])=>{throw new fi(r.evaluate(c))}],typeof:[Ir,[Lr],(c,[r])=>zn(Hn(r.evaluate(c)))],"to-rgba":[Hi(Vt,4),[ao],(c,[r])=>r.evaluate(c).toRenderColor(null).toArray()],rgb:[ao,[Vt,Vt,Vt],Q6],rgba:[ao,[Vt,Vt,Vt,Vt],Q6],hsl:[ao,[Vt,Vt,Vt],f3],hsla:[ao,[Vt,Vt,Vt,Vt],f3],has:{type:Or,overloads:[[[Ir],(c,[r])=>d3(r.evaluate(c),c.properties())],[[Ir,Bi],(c,[r,s])=>d3(r.evaluate(c),s.evaluate(c))]]},get:{type:Lr,overloads:[[[Ir],(c,[r])=>p3(r.evaluate(c),c.properties())],[[Ir,Bi],(c,[r,s])=>p3(r.evaluate(c),s.evaluate(c))]]},"feature-state":[Lr,[Ir],(c,[r])=>p3(r.evaluate(c),c.featureState||{})],properties:[Bi,[],c=>c.properties()],"geometry-type":[Ir,[],c=>c.geometryType()],id:[Lr,[],c=>c.id()],zoom:[Vt,[],c=>c.globals.zoom],pitch:[Vt,[],c=>c.globals.pitch||0],"distance-from-center":[Vt,[],c=>c.distanceFromCenter()],"measure-light":[Vt,[Ir],(c,[r])=>c.measureLight(r.evaluate(c))],"heatmap-density":[Vt,[],c=>c.globals.heatmapDensity||0],"line-progress":[Vt,[],c=>c.globals.lineProgress||0],"raster-value":[Vt,[],c=>c.globals.rasterValue||0],"raster-particle-speed":[Vt,[],c=>c.globals.rasterParticleSpeed||0],"sky-radial-progress":[Vt,[],c=>c.globals.skyRadialProgress||0],accumulated:[Lr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Vt,al(Vt),(c,r)=>{let s=0;for(const u of r)s+=u.evaluate(c);return s}],"*":[Vt,al(Vt),(c,r)=>{let s=1;for(const u of r)s*=u.evaluate(c);return s}],"-":{type:Vt,overloads:[[[Vt,Vt],(c,[r,s])=>r.evaluate(c)-s.evaluate(c)],[[Vt],(c,[r])=>-r.evaluate(c)]]},"/":[Vt,[Vt,Vt],(c,[r,s])=>r.evaluate(c)/s.evaluate(c)],"%":[Vt,[Vt,Vt],(c,[r,s])=>r.evaluate(c)%s.evaluate(c)],ln2:[Vt,[],()=>Math.LN2],pi:[Vt,[],()=>Math.PI],e:[Vt,[],()=>Math.E],"^":[Vt,[Vt,Vt],(c,[r,s])=>Math.pow(r.evaluate(c),s.evaluate(c))],sqrt:[Vt,[Vt],(c,[r])=>Math.sqrt(r.evaluate(c))],log10:[Vt,[Vt],(c,[r])=>Math.log(r.evaluate(c))/Math.LN10],ln:[Vt,[Vt],(c,[r])=>Math.log(r.evaluate(c))],log2:[Vt,[Vt],(c,[r])=>Math.log(r.evaluate(c))/Math.LN2],sin:[Vt,[Vt],(c,[r])=>Math.sin(r.evaluate(c))],cos:[Vt,[Vt],(c,[r])=>Math.cos(r.evaluate(c))],tan:[Vt,[Vt],(c,[r])=>Math.tan(r.evaluate(c))],asin:[Vt,[Vt],(c,[r])=>Math.asin(r.evaluate(c))],acos:[Vt,[Vt],(c,[r])=>Math.acos(r.evaluate(c))],atan:[Vt,[Vt],(c,[r])=>Math.atan(r.evaluate(c))],min:[Vt,al(Vt),(c,r)=>Math.min(...r.map(s=>s.evaluate(c)))],max:[Vt,al(Vt),(c,r)=>Math.max(...r.map(s=>s.evaluate(c)))],abs:[Vt,[Vt],(c,[r])=>Math.abs(r.evaluate(c))],round:[Vt,[Vt],(c,[r])=>{const s=r.evaluate(c);return s<0?-Math.round(-s):Math.round(s)}],floor:[Vt,[Vt],(c,[r])=>Math.floor(r.evaluate(c))],ceil:[Vt,[Vt],(c,[r])=>Math.ceil(r.evaluate(c))],"filter-==":[Or,[Ir,Lr],(c,[r,s])=>c.properties()[r.value]===s.value],"filter-id-==":[Or,[Lr],(c,[r])=>c.id()===r.value],"filter-type-==":[Or,[Ir],(c,[r])=>c.geometryType()===r.value],"filter-<":[Or,[Ir,Lr],(c,[r,s])=>{const u=c.properties()[r.value],m=s.value;return typeof u==typeof m&&u<m}],"filter-id-<":[Or,[Lr],(c,[r])=>{const s=c.id(),u=r.value;return typeof s==typeof u&&s<u}],"filter->":[Or,[Ir,Lr],(c,[r,s])=>{const u=c.properties()[r.value],m=s.value;return typeof u==typeof m&&u>m}],"filter-id->":[Or,[Lr],(c,[r])=>{const s=c.id(),u=r.value;return typeof s==typeof u&&s>u}],"filter-<=":[Or,[Ir,Lr],(c,[r,s])=>{const u=c.properties()[r.value],m=s.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[Or,[Lr],(c,[r])=>{const s=c.id(),u=r.value;return typeof s==typeof u&&s<=u}],"filter->=":[Or,[Ir,Lr],(c,[r,s])=>{const u=c.properties()[r.value],m=s.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[Or,[Lr],(c,[r])=>{const s=c.id(),u=r.value;return typeof s==typeof u&&s>=u}],"filter-has":[Or,[Lr],(c,[r])=>r.value in c.properties()],"filter-has-id":[Or,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Or,[Hi(Ir)],(c,[r])=>r.value.indexOf(c.geometryType())>=0],"filter-id-in":[Or,[Hi(Lr)],(c,[r])=>r.value.indexOf(c.id())>=0],"filter-in-small":[Or,[Ir,Hi(Lr)],(c,[r,s])=>s.value.indexOf(c.properties()[r.value])>=0],"filter-in-large":[Or,[Ir,Hi(Lr)],(c,[r,s])=>function(u,m,f,g){for(;f<=g;){const b=f+g>>1;if(m[b]===u)return!0;m[b]>u?g=b-1:f=b+1}return!1}(c.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Or,overloads:[[[Or,Or],(c,[r,s])=>r.evaluate(c)&&s.evaluate(c)],[al(Or),(c,r)=>{for(const s of r)if(!s.evaluate(c))return!1;return!0}]]},any:{type:Or,overloads:[[[Or,Or],(c,[r,s])=>r.evaluate(c)||s.evaluate(c)],[al(Or),(c,r)=>{for(const s of r)if(s.evaluate(c))return!0;return!1}]]},"!":[Or,[Or],(c,[r])=>!r.evaluate(c)],"is-supported-script":[Or,[Ir],(c,[r])=>{const s=c.globals&&c.globals.isSupportedScript;return!s||s(r.evaluate(c))}],upcase:[Ir,[Ir],(c,[r])=>r.evaluate(c).toUpperCase()],downcase:[Ir,[Ir],(c,[r])=>r.evaluate(c).toLowerCase()],concat:[Ir,al(Lr),(c,r)=>r.map(s=>Xi(s.evaluate(c))).join("")],"resolved-locale":[Ir,[r7],(c,[r])=>r.evaluate(c).resolvedLocale()],random:[Vt,[Vt,Vt,Lr],(c,r)=>{const[s,u,m]=r.map(g=>g.evaluate(c));if(s>u||s===u)return s;let f;if(typeof m=="string")f=function(g){let b=0;if(g.length===0)return b;for(let E=0;E<g.length;E++)b=(b<<5)-b+g.charCodeAt(E),b|=0;return b}(m);else{if(typeof m!="number")throw new fi(`Invalid seed input: ${m}`);f=m}return s+T7(f)()*(u-s)}]});class P7{constructor(r,s,u,m){this.expression=r,this._warningHistory={},this._evaluator=new M6(u,m),this._defaultValue=s?function(f){return f.type==="color"&&(E7(f.default)||Array.isArray(f.default))?new qr(0,0,0,0):f.type==="color"?qr.parse(f.default)||null:f.default===void 0?null:f.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,u,m,f,g,b,E){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(r,s,u,m,f,g,b,E){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new fi(`Expected value to be one of ${Object.keys(this._enumValues).map(v=>JSON.stringify(v)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${I.message}`)),this._defaultValue}}}function M7(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in y1}function Gc(c,r,s,u){const m=new j6(y1,[],r?function(g){const b={color:ao,string:Ir,number:Vt,enum:Ir,boolean:Or,formatted:e1,resolvedImage:t1};return g.type==="array"?Hi(b[g.value]||Lr,g.length):b[g.type]}(r):void 0,void 0,void 0,s,u),f=m.parse(c,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?ef(new P7(f,r,s,u)):Ms(m.errors)}class _3{constructor(r,s,u){this.kind=r,this._styleExpression=s,this.isLightConstant=u,this.isStateDependent=r!=="constant"&&!y7(s.expression),this.configDependencies=_7(s.expression)}evaluateWithoutErrorHandling(r,s,u,m,f,g){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,m,f,g)}evaluate(r,s,u,m,f,g){return this._styleExpression.evaluate(r,s,u,m,f,g)}}class Aa{constructor(r,s,u,m,f){this.kind=r,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!y7(s.expression),this.isLightConstant=f,this.configDependencies=_7(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,u,m,f,g){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,m,f,g)}evaluate(r,s,u,m,f,g){return this._styleExpression.evaluate(r,s,u,m,f,g)}interpolationFactor(r,s,u){return this.interpolationType?To.interpolationFactor(this.interpolationType,r,s,u):0}}function sf(c,r,s,u){if((c=Gc(c,r,s,u)).result==="error")return c;const m=c.value.expression,f=zc(m);if(!f&&!S7(r))return Ms([new ba("","data expressions not supported")]);const g=Bc(m,["zoom","pitch","distance-from-center"]);if(!g&&!tf(r))return Ms([new ba("","zoom expressions not supported")]);const b=Bc(m,["measure-light"]);if(!b&&!g3(r))return Ms([new ba("","measure-light expression not supported")]);const E=r.expression&&r.expression.relaxZoomRestriction,I=I7(m);return I||g||E?I instanceof ba?Ms([I]):I instanceof To&&!y3(r)?Ms([new ba("",'"interpolate" expressions cannot be used with this property')]):ef(I?new Aa(f?"camera":"composite",c.value,I.labels,I instanceof To?I.interpolation:void 0,b):new _3(f?"constant":"source",c.value,b)):Ms([new ba("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class C7{constructor(r,s){this._parameters=r,this._specification=s,Ql(this,nf(this._parameters,this._specification))}static deserialize(r){return new C7(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function I7(c){let r=null;if(c instanceof b7)r=I7(c.result);else if(c instanceof x7){for(const s of c.args)if(r=I7(s),r)break}else(c instanceof Fc||c instanceof To)&&c.input instanceof so&&c.input.name==="zoom"&&(r=c);return r instanceof ba||c.eachChild(s=>{const u=I7(s);u instanceof ba?r=u:r&&u&&r!==u&&(r=new ba("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}var O7,v3,lf=function(){if(v3)return O7;v3=1,O7=r;var c=3;function r(s,u,m){var f=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var g=new Int32Array(this.arrayBuffer);s=g[0],this.d=(u=g[1])+2*(m=g[2]);for(var b=0;b<this.d*this.d;b++){var E=g[c+b],I=g[c+b+1];f.push(E===I?null:g.subarray(E,I))}var v=g[c+f.length+1];this.keys=g.subarray(g[c+f.length],v),this.bboxes=g.subarray(v),this.insert=this._insertReadonly}else{this.d=u+2*m;for(var T=0;T<this.d*this.d;T++)f.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=m,this.scale=u/s,this.uid=0;var M=m/u*s;this.min=-M,this.max=s+M}return r.prototype.insert=function(s,u,m,f,g){this._forEachCell(u,m,f,g,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(f),this.bboxes.push(g)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(s,u,m,f,g,b){this.cells[g].push(b)},r.prototype.query=function(s,u,m,f,g){var b=this.min,E=this.max;if(s<=b&&u<=b&&E<=m&&E<=f&&!g)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(s,u,m,f,this._queryCell,I,{},g),I},r.prototype._queryCell=function(s,u,m,f,g,b,E,I){var v=this.cells[g];if(v!==null)for(var T=this.keys,M=this.bboxes,S=0;S<v.length;S++){var P=v[S];if(E[P]===void 0){var R=4*P;(I?I(M[R+0],M[R+1],M[R+2],M[R+3]):s<=M[R+2]&&u<=M[R+3]&&m>=M[R+0]&&f>=M[R+1])?(E[P]=!0,b.push(T[P])):E[P]=!1}}},r.prototype._forEachCell=function(s,u,m,f,g,b,E,I){for(var v=this._convertToCellCoord(s),T=this._convertToCellCoord(u),M=this._convertToCellCoord(m),S=this._convertToCellCoord(f),P=v;P<=M;P++)for(var R=T;R<=S;R++){var L=this.d*R+P;if((!I||I(this._convertFromCellCoord(P),this._convertFromCellCoord(R),this._convertFromCellCoord(P+1),this._convertFromCellCoord(R+1)))&&g.call(this,s,u,m,f,L,b,E,I))return}},r.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},r.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,u=c+this.cells.length+1+1,m=0,f=0;f<this.cells.length;f++)m+=this.cells[f].length;var g=new Int32Array(u+m+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var b=u,E=0;E<s.length;E++){var I=s[E];g[c+E]=b,g.set(I,b),b+=I.length}return g[c+s.length]=b,g.set(this.keys,b),g[c+s.length+1]=b+=this.keys.length,g.set(this.bboxes,b),b+=this.bboxes.length,g.buffer},O7}(),sl=D(lf);const _1={};function Ut(c,r,s={}){Object.defineProperty(c,"_classRegistryKey",{value:r,writable:!1}),_1[r]={klass:c,omit:s.omit||[]}}Ut(Object,"Object"),sl.serialize=function(c,r){const s=c.toArrayBuffer();return r&&r.add(s),{buffer:s}},sl.deserialize=function(c){return new sl(c.buffer)},Object.defineProperty(sl,"name",{value:"Grid"}),Ut(sl,"Grid"),Ut(qr,"Color"),Ut(Error,"Error"),Ut(Fi,"Formatted"),Ut(xo,"FormattedSection"),Ut(B2,"AJAXError"),Ut(Zi,"ResolvedImage"),Ut(C7,"StylePropertyFunction"),Ut(P7,"StyleExpression",{omit:["_evaluator"]}),Ut(Aa,"ZoomDependentExpression"),Ut(_3,"ZoomConstantExpression"),Ut(so,"CompoundExpression",{omit:["_evaluate"]});for(const c in y1)_1[y1[c]._classRegistryKey]||Ut(y1[c],`Expression${c}`);function x3(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function cf(c){return self.ImageBitmap&&c instanceof ImageBitmap}function lo(c,r){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(x3(c)||cf(c))return r&&r.add(c),c;if(ArrayBuffer.isView(c)){const s=c;return r&&r.add(s.buffer),s}if(c instanceof ImageData)return r&&r.add(c.data.buffer),c;if(Array.isArray(c)){const s=[];for(const u of c)s.push(lo(u,r));return s}if(c instanceof Map){const s={$name:"Map"};for(const[u,m]of c.entries())s[u]=lo(m);return s}if(c instanceof Set){const s={$name:"Set"};let u=0;for(const m of c.values())s[++u]=lo(m);return s}if(typeof c=="object"){const s=c.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=s.serialize?s.serialize(c,r):{};if(!s.serialize){for(const f in c)c.hasOwnProperty(f)&&(_1[u].omit.indexOf(f)>=0||(m[f]=lo(c[f],r)));c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof c)}function ll(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||x3(c)||cf(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(ll);if(typeof c=="object"){const r=c.$name||"Object";if(r==="Map"){const m=new Map;for(const f of Object.keys(c))f!=="$name"&&m.set(f,ll(c[f]));return m}if(r==="Set"){const m=new Set;for(const f of Object.keys(c))f!=="$name"&&m.add(ll(c[f]));return m}const{klass:s}=_1[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(c);const u=Object.create(s.prototype);for(const m of Object.keys(c))m!=="$name"&&(u[m]=ll(c[m]));return u}throw new Error("can't deserialize object of type "+typeof c)}const Zt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519,"CJK Unified Ideographs Extension B":c=>c>=131072&&c<=173791};function R7(c){for(const r of c)if(k7(r.charCodeAt(0)))return!0;return!1}function o8(c){for(const r of c)if(!D7(r.charCodeAt(0)))return!1;return!0}function D7(c){return!(Zt.Arabic(c)||Zt["Arabic Supplement"](c)||Zt["Arabic Extended-A"](c)||Zt["Arabic Presentation Forms-A"](c)||Zt["Arabic Presentation Forms-B"](c))}function k7(c){return!(c!==746&&c!==747&&(c<4352||!(Zt["Bopomofo Extended"](c)||Zt.Bopomofo(c)||Zt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Zt["CJK Compatibility Ideographs"](c)||Zt["CJK Compatibility"](c)||Zt["CJK Radicals Supplement"](c)||Zt["CJK Strokes"](c)||!(!Zt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Zt["CJK Unified Ideographs Extension A"](c)||Zt["CJK Unified Ideographs"](c)||Zt["Enclosed CJK Letters and Months"](c)||Zt["Hangul Compatibility Jamo"](c)||Zt["Hangul Jamo Extended-A"](c)||Zt["Hangul Jamo Extended-B"](c)||Zt["Hangul Jamo"](c)||Zt["Hangul Syllables"](c)||Zt.Hiragana(c)||Zt["Ideographic Description Characters"](c)||Zt.Kanbun(c)||Zt["Kangxi Radicals"](c)||Zt["Katakana Phonetic Extensions"](c)||Zt.Katakana(c)&&c!==12540||!(!Zt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Zt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Zt["Unified Canadian Aboriginal Syllabics"](c)||Zt["Unified Canadian Aboriginal Syllabics Extended"](c)||Zt["Vertical Forms"](c)||Zt["Yijing Hexagram Symbols"](c)||Zt["Yi Syllables"](c)||Zt["Yi Radicals"](c))))}function qc(c){return!(k7(c)||function(r){return!!(Zt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Zt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Zt["Letterlike Symbols"](r)||Zt["Number Forms"](r)||Zt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Zt["Control Pictures"](r)&&r!==9251||Zt["Optical Character Recognition"](r)||Zt["Enclosed Alphanumerics"](r)||Zt["Geometric Shapes"](r)||Zt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Zt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Zt["CJK Symbols and Punctuation"](r)||Zt.Katakana(r)||Zt["Private Use Area"](r)||Zt["CJK Compatibility Forms"](r)||Zt["Small Form Variants"](r)||Zt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(c))}function b3(c){return c>=1424&&c<=2303||Zt["Arabic Presentation Forms-A"](c)||Zt["Arabic Presentation Forms-B"](c)}function a8(c,r){return!(!r&&b3(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Zt.Khmer(c))}function s8(c){for(const r of c)if(b3(r.charCodeAt(0)))return!0;return!1}const Wc="deferred",Hc="loading",L7="loaded";let v1=null,vi="unavailable",Cs=null;const uf=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(vi="error"),v1&&v1(c)};function w3(){A3.fire(new As("pluginStateChange",{pluginStatus:vi,pluginURL:Cs}))}const A3=new Jl,T3=function(){return vi},S3=function(){if(vi!==Wc||!Cs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");vi=Hc,w3(),Cs&&Yl({url:Cs},c=>{c?uf(c):(vi=L7,w3())})},co={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>vi===L7||co.applyArabicShaping!=null,isLoading:()=>vi===Hc,setState(c){vi=c.pluginStatus,Cs=c.pluginURL},isParsed:()=>co.applyArabicShaping!=null&&co.processBidirectionalText!=null&&co.processStyledBidirectionalText!=null,getPluginURL:()=>Cs};class On{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch,this.brightness=s.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(r){return function(s,u){for(const m of s)if(!a8(m.charCodeAt(0),u))return!1;return!0}(r,co.isLoaded())}}class z7{constructor(r,s,u,m){this.property=r,this.value=s,this.expression=function(f,g,b,E){if(E7(f))return new C7(f,g);if(M7(f)||Array.isArray(f)&&f.length>0){const I=sf(f,g,b,E);if(I.result==="error")throw new Error(I.value.map(v=>`${v.key}: ${v.message}`).join(", "));return I.value}{let I=f;return typeof f=="string"&&g.type==="color"&&(I=qr.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>I}}}(s===void 0?r.specification.default:s,r.specification,u,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,u){return this.property.possiblyEvaluate(this,r,s,u)}}class E3{constructor(r,s,u){this.property=r,this.value=new z7(r,void 0,s,u)}transitioned(r,s){return new ff(this.property,this.value,s,zi({},r.transition,this.transition),r.now)}untransitioned(){return new ff(this.property,this.value,null,{},0)}}class hf{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return Bo(this._values[r].value.value)}setValue(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new E3(this._values[r].property,this._scope,this._options)),this._values[r].value=new z7(this._values[r].property,s===null?void 0:Bo(s),this._scope,this._options),this._values[r].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].value.expression.configDependencies]))}setTransitionOrValue(r,s){s&&(this._options=s);const u=this._properties.properties;if(r)for(const m in r){const f=r[m];if(Xa(m,"-transition")){const g=m.slice(0,-11);u[g]&&this.setTransition(g,f)}else u.hasOwnProperty(m)&&this.setValue(m,f)}}getTransition(r){return Bo(this._values[r].transition)}setTransition(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new E3(this._values[r].property)),this._values[r].transition=Bo(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const u=new df(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(r,s._values[m]);return u}untransitioned(){const r=new df(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class ff{constructor(r,s,u,m,f){const g=m.delay||0,b=m.duration||0;f=f||0,this.property=r,this.value=s,this.begin=f+g,this.end=this.begin+b,r.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(r,s,u){const m=r.now||0,f=this.value.possiblyEvaluate(r,s,u),g=this.prior;if(g){if(m>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(m<this.begin)return g.possiblyEvaluate(r,s,u);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(r,s,u),f,Wi(b))}}return f}}class df{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,u){const m=new b1(this._properties);for(const f of Object.keys(this._values))m._values[f]=this._values[f].possiblyEvaluate(r,s,u);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class l8{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return Bo(this._values[r].value)}setValue(r,s){this._values[r]=new z7(this._values[r].property,s===null?void 0:Bo(s),this._scope,this._options),this._values[r].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].expression.configDependencies]))}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u)}return r}possiblyEvaluate(r,s,u){const m=new b1(this._properties);for(const f of Object.keys(this._values))m._values[f]=this._values[f].possiblyEvaluate(r,s,u);return m}}class x1{constructor(r,s,u){this.property=r,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,u,m){return this.property.evaluate(this.value,this.parameters,r,s,u,m)}}class b1{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Et{constructor(r){this.specification=r}possiblyEvaluate(r,s){return r.expression.evaluate(s)}interpolate(r,s,u){const m=tl[this.specification.type];return m?m(r,s,u):r}}class Xt{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,u,m){return new x1(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},u,m)}:r.expression,s)}interpolate(r,s,u){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new x1(this,{kind:"constant",value:void 0},r.parameters);const m=tl[this.specification.type];return m?new x1(this,{kind:"constant",value:m(r.value.value,s.value.value,u)},r.parameters):r}evaluate(r,s,u,m,f,g){return r.kind==="constant"?r.value:r.evaluate(s,u,m,f,g)}}class na{constructor(r){this.specification=r}possiblyEvaluate(r,s,u,m){return!!r.expression.evaluate(s,null,{},u,m)}interpolate(){return!1}}class bn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new On(0,{});for(const u in r){const m=r[u];m.specification.overridable&&this.overridableProperties.push(u);const f=this.defaultPropertyValues[u]=new z7(m,void 0),g=this.defaultTransitionablePropertyValues[u]=new E3(m);this.defaultTransitioningPropertyValues[u]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=f.possiblyEvaluate(s)}}}Ut(Xt,"DataDrivenProperty"),Ut(Et,"DataConstantProperty"),Ut(na,"ColorRampProperty");var He=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Zc(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function B7(c){if(Array.isArray(c))return c.map(B7);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const r={};for(const s in c)r[s]=B7(c[s]);return r}return Zc(c)}function P3(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const r of c.slice(1))if(!P3(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function ia(c,r="",s=null,u="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};P3(c)||(c=F7(c));const m=c;let f=!0;try{f=function(T){if(!w1(T))return T;let M=B7(T);return cl(M),M=M3(M),M}(m)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(m,null,2)}
        `)}const g=He[`filter_${u}`],b=Gc(f,g,r,s);let E=null;if(b.result==="error")throw new Error(b.value.map(T=>`${T.key}: ${T.message}`).join(", "));E=(T,M,S)=>b.value.evaluate(T,M,{},S);let I=null,v=null;if(f!==m){const T=Gc(m,g,r,s);if(T.result==="error")throw new Error(T.value.map(M=>`${M.key}: ${M.message}`).join(", "));I=(M,S,P,R,L)=>T.value.evaluate(M,S,{},P,void 0,void 0,R,L),v=!zc(T.value.expression)}return{filter:E,dynamicFilter:I||void 0,needGeometry:pf(f),needFeature:!!v}}function M3(c){if(!Array.isArray(c))return c;const r=function(s){if(c8.has(s[0])){for(let u=1;u<s.length;u++)if(w1(s[u]))return!0}return s}(c);return r===!0?r:r.map(s=>M3(s))}function cl(c){let r=!1;const s=[];if(c[0]==="case"){for(let u=1;u<c.length-1;u+=2)r=r||w1(c[u]),s.push(c[u+1]);s.push(c[c.length-1])}else if(c[0]==="match"){r=r||w1(c[1]);for(let u=2;u<c.length-1;u+=2)s.push(c[u+1]);s.push(c[c.length-1])}else if(c[0]==="step"){r=r||w1(c[1]);for(let u=1;u<c.length-1;u+=2)s.push(c[u+1])}r&&(c.length=0,c.push("any",...s));for(let u=1;u<c.length;u++)cl(c[u])}function w1(c){if(!Array.isArray(c))return!1;if((r=c[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let s=1;s<c.length;s++)if(w1(c[s]))return!0;return!1}const c8=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function u8(c,r){return c<r?-1:c>r?1:0}function pf(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let r=1;r<c.length;r++)if(pf(c[r]))return!0;return!1}function F7(c){if(!c)return!0;const r=c[0];return c.length<=1?r!=="any":r==="=="?N7(c[1],c[2],"=="):r==="!="?Yc(N7(c[1],c[2],"==")):r==="<"||r===">"||r==="<="||r===">="?N7(c[1],c[2],r):r==="any"?(s=c.slice(1),["any"].concat(s.map(F7))):r==="all"?["all"].concat(c.slice(1).map(F7)):r==="none"?["all"].concat(c.slice(1).map(F7).map(Yc)):r==="in"?j7(c[1],c.slice(2)):r==="!in"?Yc(j7(c[1],c.slice(2))):r==="has"?Xc(c[1]):r!=="!has"||Yc(Xc(c[1]));var s}function N7(c,r,s){switch(c){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,c,r]}}function j7(c,r){if(r.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",c,["literal",r.sort(u8)]]:["filter-in-small",c,["literal",r]]}}function Xc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Yc(c){return["!",c]}const A1="";function mf(c,r){return r?`${c}${A1}${r}`:c}const oa="-transition",h8=new Set(["fill","line","background","hillshade","raster"]);class Ni extends Jl{constructor(r,s,u,m,f){if(super(),this.id=r.id,this.fqid=mf(this.id,u),this.type=r.type,this.scope=u,this.lut=m,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&r.type!=="slot"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),r.slot&&(this.slot=r.slot),s.layout&&(this._unevaluatedLayout=new l8(s.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),s.paint)){this._transitionablePaint=new hf(s.paint,this.scope,f);for(const g in r.paint)this.setPaintProperty(g,r.paint[g]);for(const g in r.layout)this.setLayoutProperty(g,r.layout[g]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new b1(s.paint)}}onAdd(r){}onRemove(r){}isDraped(r){return!this.is3D()&&h8.has(this.type)}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s){if(this.type==="custom"&&r==="visibility")return void(this.visibility=s);const u=this._unevaluatedLayout;u._properties.properties[r]&&(u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),r==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(r){return Xa(r,oa)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s){const u=this._transitionablePaint,m=u._properties.properties;if(Xa(r,oa)){const T=r.slice(0,-11);return m[T]&&u.setTransition(T,s||void 0),!1}if(!m[r])return!1;const f=u._values[r],g=f.value.isDataDriven(),b=f.value;u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),this._handleSpecialPaintPropertyUpdate(r);const E=u._values[r].value,I=E.isDataDriven(),v=Xa(r,"pattern")||r==="line-dasharray";return I||g||v||this._handleOverridablePaintPropertyUpdate(r,b,E)}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getDefaultProgramParams(r,s,u){return null}_handleOverridablePaintPropertyUpdate(r,s,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){return Wl({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(r,s)=>!(r===void 0||s==="layout"&&!Object.keys(r).length||s==="paint"&&!Object.keys(r).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof x1&&S7(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(r){this._filterCompiled||(this._featureFilter=ia(this.filter,this.scope,r),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(r){this._stats&&(r.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(r){}queryIntersectsFeature(r,s,u,m,f,g,b,E,I){}queryIntersectsMatchingFeature(r,s,u,m){}}const f8={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kc{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.add(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...r){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...r){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Nr(c,r=1){let s=0,u=0;return{members:c.map(m=>{const f=f8[m.type].BYTES_PER_ELEMENT,g=s=gf(s,Math.max(r,f)),b=m.components||1;return u=Math.max(u,f),s+=f*b,{name:m.name,type:m.type,components:b,offset:g}}),size:gf(s,Math.max(u,r)),alignment:r}}function gf(c,r){return Math.ceil(c/r)*r}class Is extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=u,r}}Is.prototype.bytesPerElement=4,Ut(Is,"StructArrayLayout2i4");class $7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,u)}emplace(r,s,u,m){const f=3*r;return this.int16[f+0]=s,this.int16[f+1]=u,this.int16[f+2]=m,r}}$7.prototype.bytesPerElement=6,Ut($7,"StructArrayLayout3i6");class Os extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,m){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,m)}emplace(r,s,u,m,f){const g=4*r;return this.int16[g+0]=s,this.int16[g+1]=u,this.int16[g+2]=m,this.int16[g+3]=f,r}}Os.prototype.bytesPerElement=8,Ut(Os,"StructArrayLayout4i8");class U7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,m,f)}emplace(r,s,u,m,f,g){const b=5*r;return this.int16[b+0]=s,this.int16[b+1]=u,this.int16[b+2]=m,this.int16[b+3]=f,this.int16[b+4]=g,r}}U7.prototype.bytesPerElement=10,Ut(U7,"StructArrayLayout5i10");class C3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,u,m,f,g,b)}emplace(r,s,u,m,f,g,b,E){const I=6*r,v=12*r,T=3*r;return this.int16[I+0]=s,this.int16[I+1]=u,this.uint8[v+4]=m,this.uint8[v+5]=f,this.uint8[v+6]=g,this.uint8[v+7]=b,this.float32[T+2]=E,r}}C3.prototype.bytesPerElement=12,Ut(C3,"StructArrayLayout2i4ub1f12");class es extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,m)}emplace(r,s,u,m,f){const g=4*r;return this.float32[g+0]=s,this.float32[g+1]=u,this.float32[g+2]=m,this.float32[g+3]=f,r}}es.prototype.bytesPerElement=16,Ut(es,"StructArrayLayout4f16");class Rs extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,u)}emplace(r,s,u,m){const f=3*r;return this.float32[f+0]=s,this.float32[f+1]=u,this.float32[f+2]=m,r}}Rs.prototype.bytesPerElement=12,Ut(Rs,"StructArrayLayout3f12");class ts extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,m,f)}emplace(r,s,u,m,f,g){const b=6*r,E=3*r;return this.uint16[b+0]=s,this.uint16[b+1]=u,this.uint16[b+2]=m,this.uint16[b+3]=f,this.float32[E+2]=g,r}}ts.prototype.bytesPerElement=12,Ut(ts,"StructArrayLayout4ui1f12");class ul extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,m){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,m)}emplace(r,s,u,m,f){const g=4*r;return this.uint16[g+0]=s,this.uint16[g+1]=u,this.uint16[g+2]=m,this.uint16[g+3]=f,r}}ul.prototype.bytesPerElement=8,Ut(ul,"StructArrayLayout4ui8");class V7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,u,m,f,g)}emplace(r,s,u,m,f,g,b){const E=6*r;return this.int16[E+0]=s,this.int16[E+1]=u,this.int16[E+2]=m,this.int16[E+3]=f,this.int16[E+4]=g,this.int16[E+5]=b,r}}V7.prototype.bytesPerElement=12,Ut(V7,"StructArrayLayout6i12");class I3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b,E,I,v,T,M){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,u,m,f,g,b,E,I,v,T,M)}emplace(r,s,u,m,f,g,b,E,I,v,T,M,S){const P=12*r;return this.int16[P+0]=s,this.int16[P+1]=u,this.int16[P+2]=m,this.int16[P+3]=f,this.uint16[P+4]=g,this.uint16[P+5]=b,this.uint16[P+6]=E,this.uint16[P+7]=I,this.int16[P+8]=v,this.int16[P+9]=T,this.int16[P+10]=M,this.int16[P+11]=S,r}}I3.prototype.bytesPerElement=24,Ut(I3,"StructArrayLayout4i4ui4i24");class O3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,u,m,f,g)}emplace(r,s,u,m,f,g,b){const E=10*r,I=5*r;return this.int16[E+0]=s,this.int16[E+1]=u,this.int16[E+2]=m,this.float32[I+2]=f,this.float32[I+3]=g,this.float32[I+4]=b,r}}O3.prototype.bytesPerElement=20,Ut(O3,"StructArrayLayout3i3f20");class R3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}R3.prototype.bytesPerElement=4,Ut(R3,"StructArrayLayout1ul4");class Ds extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=u,r}}Ds.prototype.bytesPerElement=4,Ut(Ds,"StructArrayLayout2ui4");class T1 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b,E,I,v,T,M,S){const P=this.length;return this.resize(P+1),this.emplace(P,r,s,u,m,f,g,b,E,I,v,T,M,S)}emplace(r,s,u,m,f,g,b,E,I,v,T,M,S,P){const R=20*r,L=10*r;return this.int16[R+0]=s,this.int16[R+1]=u,this.int16[R+2]=m,this.int16[R+3]=f,this.int16[R+4]=g,this.float32[L+3]=b,this.float32[L+4]=E,this.float32[L+5]=I,this.float32[L+6]=v,this.int16[R+14]=T,this.uint32[L+8]=M,this.uint16[R+18]=S,this.uint16[R+19]=P,r}}T1.prototype.bytesPerElement=40,Ut(T1,"StructArrayLayout5i4f1i1ul2ui40");class hl extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,u,m,f,g,b)}emplace(r,s,u,m,f,g,b,E){const I=8*r;return this.int16[I+0]=s,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+4]=f,this.int16[I+5]=g,this.int16[I+6]=b,this.int16[I+7]=E,r}}hl.prototype.bytesPerElement=16,Ut(hl,"StructArrayLayout3i2i2i16");class Yi extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,m,f)}emplace(r,s,u,m,f,g){const b=4*r,E=8*r;return this.float32[b+0]=s,this.float32[b+1]=u,this.float32[b+2]=m,this.int16[E+6]=f,this.int16[E+7]=g,r}}Yi.prototype.bytesPerElement=16,Ut(Yi,"StructArrayLayout2f1f2i16");class S1 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,u,m,f,g)}emplace(r,s,u,m,f,g,b){const E=20*r,I=5*r;return this.uint8[E+0]=s,this.uint8[E+1]=u,this.float32[I+1]=m,this.float32[I+2]=f,this.float32[I+3]=g,this.float32[I+4]=b,r}}S1.prototype.bytesPerElement=20,Ut(S1,"StructArrayLayout2ub4f20");class Ti extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,u)}emplace(r,s,u,m){const f=3*r;return this.uint16[f+0]=s,this.uint16[f+1]=u,this.uint16[f+2]=m,r}}Ti.prototype.bytesPerElement=6,Ut(Ti,"StructArrayLayout3ui6");class D3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z)}emplace(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z,Y){const ce=30*r,pe=15*r,ge=60*r;return this.int16[ce+0]=s,this.int16[ce+1]=u,this.int16[ce+2]=m,this.float32[pe+2]=f,this.float32[pe+3]=g,this.uint16[ce+8]=b,this.uint16[ce+9]=E,this.uint32[pe+5]=I,this.uint32[pe+6]=v,this.uint32[pe+7]=T,this.uint16[ce+16]=M,this.uint16[ce+17]=S,this.uint16[ce+18]=P,this.float32[pe+10]=R,this.float32[pe+11]=L,this.uint8[ge+48]=N,this.uint8[ge+49]=G,this.uint8[ge+50]=W,this.uint32[pe+13]=$,this.int16[ce+28]=Z,this.uint8[ge+58]=Y,r}}D3.prototype.bytesPerElement=60,Ut(D3,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class k3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le,Be,Fe){const je=this.length;return this.resize(je+1),this.emplace(je,r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le,Be,Fe)}emplace(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N,G,W,$,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le,Be,Fe,je){const Ye=20*r,Ue=40*r,ot=80*r;return this.float32[Ye+0]=s,this.float32[Ye+1]=u,this.int16[Ue+4]=m,this.int16[Ue+5]=f,this.int16[Ue+6]=g,this.int16[Ue+7]=b,this.int16[Ue+8]=E,this.int16[Ue+9]=I,this.int16[Ue+10]=v,this.int16[Ue+11]=T,this.int16[Ue+12]=M,this.uint16[Ue+13]=S,this.uint16[Ue+14]=P,this.uint16[Ue+15]=R,this.uint16[Ue+16]=L,this.uint16[Ue+17]=N,this.uint16[Ue+18]=G,this.uint16[Ue+19]=W,this.uint16[Ue+20]=$,this.uint16[Ue+21]=Z,this.uint16[Ue+22]=Y,this.uint16[Ue+23]=ce,this.uint16[Ue+24]=pe,this.uint16[Ue+25]=ge,this.uint16[Ue+26]=he,this.uint16[Ue+27]=Ae,this.uint32[Ye+14]=_e,this.float32[Ye+15]=Me,this.float32[Ye+16]=Le,this.float32[Ye+17]=Be,this.float32[Ye+18]=Fe,this.uint8[ot+76]=je,r}}k3.prototype.bytesPerElement=80,Ut(k3,"StructArrayLayout2f9i15ui1ul4f1ub80");class E1 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}E1.prototype.bytesPerElement=4,Ut(E1,"StructArrayLayout1f4");class rs extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,m,f)}emplace(r,s,u,m,f,g){const b=5*r;return this.float32[b+0]=s,this.float32[b+1]=u,this.float32[b+2]=m,this.float32[b+3]=f,this.float32[b+4]=g,r}}rs.prototype.bytesPerElement=20,Ut(rs,"StructArrayLayout5f20");class L3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,u,m,f,g,b)}emplace(r,s,u,m,f,g,b,E){const I=7*r;return this.float32[I+0]=s,this.float32[I+1]=u,this.float32[I+2]=m,this.float32[I+3]=f,this.float32[I+4]=g,this.float32[I+5]=b,this.float32[I+6]=E,r}}L3.prototype.bytesPerElement=28,Ut(L3,"StructArrayLayout7f28");class Jc extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,m){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,m)}emplace(r,s,u,m,f){const g=6*r;return this.uint32[3*r+0]=s,this.uint16[g+2]=u,this.uint16[g+3]=m,this.uint16[g+4]=f,r}}Jc.prototype.bytesPerElement=12,Ut(Jc,"StructArrayLayout1ul3ui12");class z3 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}z3.prototype.bytesPerElement=2,Ut(z3,"StructArrayLayout1ui2");class Qc extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=u,r}}Qc.prototype.bytesPerElement=8,Ut(Qc,"StructArrayLayout2f8");class eu extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L){const N=this.length;return this.resize(N+1),this.emplace(N,r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L)}emplace(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N){const G=16*r;return this.float32[G+0]=s,this.float32[G+1]=u,this.float32[G+2]=m,this.float32[G+3]=f,this.float32[G+4]=g,this.float32[G+5]=b,this.float32[G+6]=E,this.float32[G+7]=I,this.float32[G+8]=v,this.float32[G+9]=T,this.float32[G+10]=M,this.float32[G+11]=S,this.float32[G+12]=P,this.float32[G+13]=R,this.float32[G+14]=L,this.float32[G+15]=N,r}}eu.prototype.bytesPerElement=64,Ut(eu,"StructArrayLayout16f64");class G7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,m,f,g,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,u,m,f,g,b)}emplace(r,s,u,m,f,g,b,E){const I=10*r,v=5*r;return this.uint16[I+0]=s,this.uint16[I+1]=u,this.uint16[I+2]=m,this.uint16[I+3]=f,this.float32[v+2]=g,this.float32[v+3]=b,this.float32[v+4]=E,r}}G7.prototype.bytesPerElement=20,Ut(G7,"StructArrayLayout4ui3f20");class q7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.int16[1*r+0]=s,r}}q7.prototype.bytesPerElement=2,Ut(q7,"StructArrayLayout1i2");class W7 extends yn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint8[1*r+0]=s,r}}W7.prototype.bytesPerElement=1,Ut(W7,"StructArrayLayout1ub1");class yf extends Kc{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}yf.prototype.size=40;class H7 extends T1{get(r){return new yf(this,r)}}Ut(H7,"CollisionBoxArray");class tu extends Kc{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}tu.prototype.size=60;class B3 extends D3{get(r){return new tu(this,r)}}Ut(B3,"PlacedSymbolArray");class _f extends Kc{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(r){this._structArray.uint32[this._pos4+14]=r}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(r){this._structArray.float32[this._pos4+18]=r}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}_f.prototype.size=80;class F3 extends k3{get(r){return new _f(this,r)}}Ut(F3,"SymbolInstanceArray");class vf extends E1{getoffsetX(r){return this.float32[1*r+0]}}Ut(vf,"GlyphOffsetArray");class Z7 extends Is{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Ut(Z7,"SymbolLineVertexArray");class xf extends Kc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xf.prototype.size=12;class bf extends Jc{get(r){return new xf(this,r)}}Ut(bf,"FeatureIndexArray");class wf extends Ds{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Ut(wf,"FillExtrusionCentroidArray");class Af extends Kc{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Af.prototype.size=6;class N3 extends $7{get(r){return new Af(this,r)}}Ut(N3,"FillExtrusionWallArray");const d8=Nr([{name:"a_pos",components:2,type:"Int16"}],4),p8=Nr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Rn{constructor(r=[]){this.segments=r}_prepareSegment(r,s,u,m){let f=this.segments[this.segments.length-1];return r>Rn.MAX_VERTEX_ARRAY_LENGTH&&Br(`Max vertices per segment is ${Rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!f||f.vertexLength+r>Rn.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==m)&&(f={vertexOffset:s,primitiveOffset:u,vertexLength:0,primitiveLength:0},m!==void 0&&(f.sortKey=m),this.segments.push(f)),f}prepareSegment(r,s,u,m){return this._prepareSegment(r,s.length,u.length,m)}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,u,m){return new Rn([{vertexOffset:r,primitiveOffset:s,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}function Tf(c,r){return 256*(c=mr(Math.floor(c),0,255))+mr(Math.floor(r),0,255)}Rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut(Rn,"SegmentVector");const m8=Nr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),g8=Nr([{name:"a_dash",components:4,type:"Uint16"}]);class ru{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(r,s,u,m){this.ids.push(Sf(r)),this.positions.push(s,u,m)}eachPosition(r,s){const u=Sf(r);let m=0,f=this.ids.length-1;for(;m<f;){const g=m+f>>1;this.ids[g]>=u?f=g:m=g+1}for(;this.ids[m]===u;)s(this.positions[3*m],this.positions[3*m+1],this.positions[3*m+2]),m++}static serialize(r,s){const u=new Float64Array(r.ids),m=new Uint32Array(r.positions);return P1(u,m,0,u.length-1),s&&(s.add(u.buffer),s.add(m.buffer)),{ids:u,positions:m}}static deserialize(r){const s=new ru;let u;s.ids=r.ids,s.positions=r.positions;for(const m of s.ids)m!==u&&s.uniqueIds.push(m),u=m;return s.indexed=!0,s}}function Sf(c){const r=+c;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:oo(String(c))}function P1(c,r,s,u){for(;s<u;){const m=c[s+u>>1];let f=s-1,g=u+1;for(;;){do f++;while(c[f]<m);do g--;while(c[g]>m);if(f>=g)break;X7(c,f,g),X7(r,3*f,3*g),X7(r,3*f+1,3*g+1),X7(r,3*f+2,3*g+2)}g-s<u-g?(P1(c,r,s,g),s=g+1):(P1(c,r,g+1,u),u=g)}}function X7(c,r,s){const u=c[r];c[r]=c[s],c[s]=u}Ut(ru,"FeaturePositionMap");class ns{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,s),this.initialized=!0),!!this.location}set(r,s,u){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class fl extends ns{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}}class ji extends ns{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Ta extends ns{constructor(r){super(r),this.current=[0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}}class j3 extends ns{constructor(r){super(r),this.current=[0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}}class Y7 extends ns{constructor(r){super(r),this.current=[0,0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class $3 extends ns{constructor(r){super(r),this.current=qr.transparent.toRenderColor(null)}set(r,s,u){this.fetchUniformLocation(r,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Ef=new Float32Array(16);class nu extends ns{constructor(r){super(r),this.current=Ef}set(r,s,u){if(this.fetchUniformLocation(r,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let m=1;m<16;m++)if(u[m]!==this.current[m]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}}const y8=new Float32Array(9),_8=new Float32Array(4);class U3 extends ns{constructor(r){super(r),this.current=_8}set(r,s,u){if(this.fetchUniformLocation(r,s)){for(let m=0;m<4;m++)if(u[m]!==this.current[m]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}}function V3(c){return[Tf(255*c.r,255*c.g),Tf(255*c.b,255*c.a)]}class iu{constructor(r,s,u,m){this.value=r,this.uniformNames=s.map(f=>`u_${f}`),this.type=u,this.context=m}setUniform(r,s,u,m,f){const g=m.constantOr(this.value);s.set(r,f,g instanceof qr?g.toRenderColor(this.context.lut):g)}getBinding(r,s){return this.type==="color"?new $3(r):new ji(r)}}class M1{constructor(r,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,s,u,m,f){const g=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;g&&s.set(r,f,g)}getBinding(r,s){return s==="u_pattern"||s==="u_dash"?new Y7(r):new ji(r)}}class Sa{constructor(r,s,u,m){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(f=>({name:`a_${f}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,u,m,f,g,b){const E=this.paintVertexArray.length,I=this.expression.evaluate(new On(0,{brightness:g}),s,{},f,m,b);this.paintVertexArray.resize(r),this._setPaintValue(E,r,I,this.context)}updatePaintArray(r,s,u,m,f,g,b){const E=this.expression.evaluate({zoom:0,brightness:b},u,m,void 0,f);this._setPaintValue(r,s,E,this.context)}_setPaintValue(r,s,u,m){if(this.type==="color"){const f=V3(u.toRenderColor(m.lut));for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,f[0],f[1])}else{for(let f=r;f<s;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class So{constructor(r,s,u,m,f,g){this.expression=r,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=m,this.context=f,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,s,u,m,f,g,b){const E=this.expression.evaluate(new On(this.context.zoom,{brightness:g}),s,{},f,m,b),I=this.expression.evaluate(new On(this.context.zoom+1,{brightness:g}),s,{},f,m,b),v=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(v,r,E,I,this.context)}updatePaintArray(r,s,u,m,f,g,b){const E=this.expression.evaluate({zoom:this.context.zoom,brightness:b},u,m,void 0,f),I=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},u,m,void 0,f);this._setPaintValue(r,s,E,I,this.context)}_setPaintValue(r,s,u,m,f){if(this.type==="color"){const g=V3(u.toRenderColor(f.lut)),b=V3(u.toRenderColor(f.lut));for(let E=r;E<s;E++)this.paintVertexArray.emplace(E,g[0],g[1],b[0],b[1])}else{for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s,u,m,f){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=mr(this.expression.interpolationFactor(g,this.context.zoom,this.context.zoom+1),0,1);s.set(r,f,b)}getBinding(r,s){return new ji(r)}}class Ea{constructor(r,s,u,m,f){this.expression=r,this.layerId=f,this.paintVertexAttributes=(u==="array"?g8:m8).members;for(let g=0;g<s.length;++g);this.paintVertexArray=new m}populatePaintArray(r,s,u,m){const f=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(f,r,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(r,s,u,m,f,g,b){this._setPaintValues(r,s,u.patterns&&u.patterns[this.layerId],g)}_setPaintValues(r,s,u,m){if(!m||!u)return;const f=m[u];if(!f)return;const{tl:g,br:b,pixelRatio:E}=f;for(let I=r;I<s;I++)this.paintVertexArray.emplace(I,g[0],g[1],b[0],b[1],E)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class dl{constructor(r,s,u=()=>!0){this.binders={},this._buffers=[],this.context=s;const m=[];for(const f in r.paint._values){const g=r.paint.get(f);if(!u(f)||!(g instanceof x1&&S7(g.property.specification)))continue;const b=x8(f,r.type),E=g.value,I=g.property.specification.type,v=!!g.property.useIntegerZoom,T=f==="line-dasharray"||f.endsWith("pattern"),M=f==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||M)if(E.kind==="source"||M||T){const S=d(f,I,"source");this.binders[f]=T?new Ea(E,b,I,S,r.id):new Sa(E,b,I,S),m.push(`/a_${f}`)}else{const S=d(f,I,"composite");this.binders[f]=new So(E,b,I,v,s,S),m.push(`/z_${f}`)}else this.binders[f]=T?new M1(E.value,b):new iu(E.value,b,I,s),m.push(`/u_${f}`)}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Sa||s instanceof So?s.maxValue:0}populatePaintArrays(r,s,u,m,f,g,b){for(const E in this.binders){const I=this.binders[E];I.context=this.context,(I instanceof Sa||I instanceof So||I instanceof Ea)&&I.populatePaintArray(r,s,u,m,f,g,b)}}setConstantPatternPositions(r){for(const s in this.binders){const u=this.binders[s];u instanceof M1&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,s,u,m,f,g,b,E){let I=!1;const v=Object.keys(r),T=v.length!==0,M=T?v:s.uniqueIds;this.context.lut=f.lut;for(const S in this.binders){const P=this.binders[S];if(P.context=this.context,(P instanceof Sa||P instanceof So||P instanceof Ea)&&(P.expression.isStateDependent===!0||P.expression.isLightConstant===!1)){const R=f.paint.get(S);P.expression=R.value;for(const L of M){const N=r[L.toString()];s.eachPosition(L,(G,W,$)=>{const Z=m.feature(G);P.updatePaintArray(W,$,Z,N,g,b,E)})}if(!T)for(const L of u.uniqueIds){const N=r[L.toString()];u.eachPosition(L,(G,W,$)=>{const Z=m.feature(G);P.updatePaintArray(W,$,Z,N,g,b,E)})}I=!0}}return I}defines(){const r=[];for(const s in this.binders){const u=this.binders[s];(u instanceof iu||u instanceof M1)&&r.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Sa||u instanceof So||u instanceof Ea)for(let m=0;m<u.paintVertexAttributes.length;m++)r.push(u.paintVertexAttributes[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof iu||u instanceof M1||u instanceof So)for(const m of u.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const s=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof iu||m instanceof M1||m instanceof So)for(const f of m.uniformNames)s.push({name:f,property:u,binding:m.getBinding(r,f)})}return s}setUniforms(r,s,u,m,f){for(const{name:g,property:b,binding:E}of u)this.binders[b].setUniform(r,E,f,m.get(b),g)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const s=this.binders[r];(s instanceof Sa||s instanceof So||s instanceof Ea)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(r){for(const s in this.binders){const u=this.binders[s];(u instanceof Sa||u instanceof So||u instanceof Ea)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Sa||s instanceof So||s instanceof Ea)&&s.destroy()}}}class ks{constructor(r,s,u=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new dl(m,s,u);this.needsUpload=!1,this._featureMap=new ru,this._featureMapWithoutIds=new ru,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(r,s,u,m,f,g,b,E){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(r,s,m,f,g,b,E);s.id!==void 0?this._featureMap.add(s.id,u,this._bufferOffset,r):(this._featureMapWithoutIds.add(this._idlessCounter,u,this._bufferOffset,r),this._idlessCounter+=1),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,u,m,f,g){for(const b of u)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(r,this._featureMap,this._featureMapWithoutIds,s,b,m,f,g||0)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const v8={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function x8(c,r){return v8[c]||[c.replace(`${r}-`,"").replace(/-/g,"_")]}const b8={"line-pattern":{source:ts,composite:ts},"fill-pattern":{source:ts,composite:ts},"fill-extrusion-pattern":{source:ts,composite:ts},"line-dasharray":{source:ul,composite:ul}},Pf={color:{source:Qc,composite:es},number:{source:E1,composite:Qc}};function d(c,r,s){const u=b8[c];return u&&u[s]||Pf[r][s]}Ut(iu,"ConstantBinder"),Ut(M1,"PatternConstantBinder"),Ut(Sa,"SourceExpressionBinder"),Ut(Ea,"PatternCompositeBinder"),Ut(So,"CompositeExpressionBinder"),Ut(dl,"ProgramConfiguration",{omit:["_buffers"]}),Ut(ks,"ProgramConfigurationSet");const i=Dt/Math.PI/2,l=5,p=6,_=16383,x=64,A=[x,32,16],O=-i,k=i;function z(c,r,s,u=i){return s=br(s),[c*Math.sin(s)*u,-r*u,c*Math.cos(s)*u]}function F(c,r,s){return z(Math.cos(br(c)),Math.sin(br(c)),r,s)}const U=63710088e-1,V=2*Math.PI*U;class q{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new q(Za(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,u=this.lat*s,m=r.lat*s,f=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return U*Math.acos(Math.min(f,1))}toBounds(r=0){const s=360*r/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new J({lng:this.lng-u,lat:this.lat-s},{lng:this.lng+u,lat:this.lat+s})}toEcef(r){return F(this.lat,this.lng,i+r*i/U)}static convert(r){if(r instanceof q)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new q(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new q(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class J{constructor(r,s){if(r)if(s)this.setSouthWest(r).setNorthEast(s);else if(r.length===4){const u=r;this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]])}else{const u=r;this.setSouthWest(u[0]).setNorthEast(u[1])}}setNorthEast(r){return this._ne=r instanceof q?new q(r.lng,r.lat):q.convert(r),this}setSouthWest(r){return this._sw=r instanceof q?new q(r.lng,r.lat):q.convert(r),this}extend(r){const s=this._sw,u=this._ne;let m,f;if(r instanceof q)m=r,f=r;else{if(!(r instanceof J))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(J.convert(r)):this.extend(q.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(q.convert(r)):this;if(m=r._sw,f=r._ne,!m||!f)return this}return s||u?(s.lng=Math.min(m.lng,s.lng),s.lat=Math.min(m.lat,s.lat),u.lng=Math.max(f.lng,u.lng),u.lat=Math.max(f.lat,u.lat)):(this._sw=new q(m.lng,m.lat),this._ne=new q(f.lng,f.lat)),this}getCenter(){return new q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new q(this.getWest(),this.getNorth())}getSouthEast(){return new q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:u}=q.convert(r);let m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(r){if(r)return r instanceof J?r:new J(r)}}const ee=0,re=25.5;function oe(c){return V*Math.cos(c*Math.PI/180)}function me(c){return(180+c)/360}function ye(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function de(c,r){return c/oe(r)}function be(c){return 360*c-180}function xe(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Ce(c,r){return c*oe(xe(r))}const Se=85.051129;function Ie(c){return Math.cos(br(mr(c,-Se,Se)))}function ze(c,r){const s=mr(r,ee,re),u=Math.pow(2,s);return Ie(c)*V/(512*u)}function ke(c){return 1/Math.cos(c*Math.PI/180)}function Re(c,r=0){const s=Math.exp(Math.PI*(1-(c.y+r/Dt)/(1<<c.z)*2));return 80150034*s/(s*s+1)/Dt/(1<<c.z)}class Ve{constructor(r,s,u=0){this.x=+r,this.y=+s,this.z=+u}static fromLngLat(r,s=0){const u=q.convert(r);return new Ve(me(u.lng),ye(u.lat),de(s,u.lat))}toLngLat(){return new q(be(this.x),xe(this.y))}toAltitude(){return Ce(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/V*ke(xe(this.y))}}function nt(c,r,s,u,m,f,g,b,E){const I=(r+u)/2,v=(s+m)/2,T=new vt(I,v);b(T),function(M,S,P,R,L,N){const G=P-L,W=R-N;return Math.abs((R-S)*G-(P-M)*W)/Math.hypot(G,W)}(T.x,T.y,f.x,f.y,g.x,g.y)>=E?(nt(c,r,s,I,v,f,T,b,E),nt(c,I,v,u,m,T,g,b,E)):c.push(g)}function dt(c,r,s){let u=c[0],m=u.x,f=u.y;r(u);const g=[u];for(let b=1;b<c.length;b++){const E=c[b],{x:I,y:v}=E;r(E),nt(g,m,f,I,v,u,E,r,s),m=I,f=v,u=E}return g}function rt(c,r,s,u){if(u(r,s)){const m=r.add(s)._mult(.5);rt(c,r,m,u),rt(c,m,s,u)}else c.push(s)}function xt(c,r){let s=c[0];const u=[s];for(let m=1;m<c.length;m++){const f=c[m];rt(u,s,f,r),s=f}return u}const Ge=Math.pow(2,14)-1,ct=-Ge-1;function at(c,r){const s=Math.round(c.x*r),u=Math.round(c.y*r);return c.x=mr(s,ct,Ge),c.y=mr(u,ct,Ge),(s<c.x||s>c.x+1||u<c.y||u>c.y+1)&&Br("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function wt(c,r,s){const u=c.loadGeometry(),m=c.extent,f=Dt/m;if(r&&s&&s.projection.isReprojectedInTileSpace){const g=1<<r.z,{scale:b,x:E,y:I,projection:v}=s,T=M=>{const S=be((r.x+M.x/m)/g),P=xe((r.y+M.y/m)/g),R=v.project(S,P);M.x=(R.x*b-E)*m,M.y=(R.y*b-I)*m};for(let M=0;M<u.length;M++)if(c.type!==1)u[M]=dt(u[M],T,1);else{const S=[];for(const P of u[M])P.x<0||P.x>=m||P.y<0||P.y>=m||(T(P),S.push(P));u[M]=S}}for(const g of u)for(const b of g)at(b,f);return u}function Tt(c,r){return{type:c.type,id:c.id,properties:c.properties,geometry:r?wt(c):[]}}function ft(c,r,s,u,m){c.emplaceBack(2*r+(u+1)/2,2*s+(m+1)/2)}function gt(c,r,s){c.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class Yt{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Is,this.indexArray=new Ti,this.segments=new Rn,this.programConfigurations=new ks(r.layers,{zoom:r.zoom,lut:r.lut}),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}updateFootprints(r,s){}populate(r,s,u,m){const f=this.layers[0],g=[];let b=null;f.type==="circle"&&(b=f.layout.get("circle-sort-key"));for(const{feature:I,id:v,index:T,sourceLayerIndex:M}of r){const S=this.layers[0]._featureFilter.needGeometry,P=Tt(I,S);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),P,u))continue;const R=b?b.evaluate(P,{},u):void 0,L={id:v,properties:I.properties,type:I.type,sourceLayerIndex:M,index:T,geometry:S?P.geometry:wt(I,u,m),patterns:{},sortKey:R};g.push(L)}b&&g.sort((I,v)=>I.sortKey-v.sortKey);let E=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new V7,E=m.projection);for(const I of g){const{geometry:v,index:T,sourceLayerIndex:M}=I,S=r[T].feature;this.addFeature(I,v,T,s.availableImages,u,E,s.brightness),s.featureIndex.insert(S,v,T,M,this.index)}}update(r,s,u,m,f){const g=Object.keys(r).length!==0;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(r,s,g?this.stateDependentLayers:this.layers,u,m,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,d8.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,p8.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,s,u,m,f,g,b){for(const E of s)for(const I of E){const v=I.x,T=I.y;if(v<0||v>=Dt||T<0||T>=Dt)continue;if(g){const P=g.projectTilePoint(v,T,f),R=g.upVector(f,v,T),L=this.globeExtVertexArray;gt(L,P,R),gt(L,P,R),gt(L,P,R),gt(L,P,R)}const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),S=M.vertexLength;ft(this.layoutVertexArray,v,T,-1,-1),ft(this.layoutVertexArray,v,T,1,-1),ft(this.layoutVertexArray,v,T,1,1),ft(this.layoutVertexArray,v,T,-1,1),this.indexArray.emplaceBack(S,S+1,S+2),this.indexArray.emplaceBack(S,S+2,S+3),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},m,f,b)}}function It(c,r){for(let s=0;s<c.length;s++)if(pn(r,c[s]))return!0;for(let s=0;s<r.length;s++)if(pn(c,r[s]))return!0;return!!tr(c,r)}function jt(c,r,s){return!!pn(c,r)||!!xr(r,c,s)}function ir(c,r){if(c.length===1)return nn(r,c[0]);for(let s=0;s<r.length;s++){const u=r[s];for(let m=0;m<u.length;m++)if(pn(c,u[m]))return!0}for(let s=0;s<c.length;s++)if(nn(r,c[s]))return!0;for(let s=0;s<r.length;s++)if(tr(c,r[s]))return!0;return!1}function Wt(c,r,s){if(c.length>1){if(tr(c,r))return!0;for(let u=0;u<r.length;u++)if(xr(r[u],c,s))return!0}for(let u=0;u<c.length;u++)if(xr(c[u],r,s))return!0;return!1}function tr(c,r){if(c.length===0||r.length===0)return!1;for(let s=0;s<c.length-1;s++){const u=c[s],m=c[s+1];for(let f=0;f<r.length-1;f++)if(Tr(u,m,r[f],r[f+1]))return!0}return!1}function Tr(c,r,s,u){return _a(c,s,u)!==_a(r,s,u)&&_a(c,r,s)!==_a(c,r,u)}function xr(c,r,s){const u=s*s;if(r.length===1)return c.distSqr(r[0])<u;for(let m=1;m<r.length;m++)if(Kr(c,r[m-1],r[m])<u)return!0;return!1}function Kr(c,r,s){const u=r.distSqr(s);if(u===0)return c.distSqr(r);const m=((c.x-r.x)*(s.x-r.x)+(c.y-r.y)*(s.y-r.y))/u;return c.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function nn(c,r){let s,u,m,f=!1;for(let g=0;g<c.length;g++){s=c[g];for(let b=0,E=s.length-1;b<s.length;E=b++)u=s[b],m=s[E],u.y>r.y!=m.y>r.y&&r.x<(m.x-u.x)*(r.y-u.y)/(m.y-u.y)+u.x&&(f=!f)}return f}function pn(c,r){let s=!1;for(let u=0,m=c.length-1;u<c.length;m=u++){const f=c[u],g=c[m];f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(s=!s)}return s}function No(c,r,s,u,m){for(const g of c)if(r<=g.x&&s<=g.y&&u>=g.x&&m>=g.y)return!0;const f=[new vt(r,s),new vt(r,m),new vt(u,m),new vt(u,s)];if(c.length>2){for(const g of f)if(pn(c,g))return!0}for(let g=0;g<c.length-1;g++)if($n(c[g],c[g+1],f))return!0;return!1}function $n(c,r,s){const u=s[0],m=s[2];if(c.x<u.x&&r.x<u.x||c.x>m.x&&r.x>m.x||c.y<u.y&&r.y<u.y||c.y>m.y&&r.y>m.y)return!1;const f=_a(c,r,s[0]);return f!==_a(c,r,s[1])||f!==_a(c,r,s[2])||f!==_a(c,r,s[3])}function Mr(c,r,s,u,m,f){let g=r.y-c.y,b=c.x-r.x;if(f=f||0){const E=g*g+b*b;if(E===0)return!0;const I=Math.sqrt(E);g/=I,b/=I}return!((s.x-c.x)*g+(s.y-c.y)*b-f<0||(u.x-c.x)*g+(u.y-c.y)*b-f<0||(m.x-c.x)*g+(m.y-c.y)*b-f<0)}function en(c,r,s,u,m,f,g){return!(Mr(c,r,u,m,f,g)||Mr(r,s,u,m,f,g)||Mr(s,c,u,m,f,g)||Mr(u,m,c,r,s,g)||Mr(m,f,c,r,s,g)||Mr(f,u,c,r,s,g))}function wn(c,r,s){const u=r.paint.get(c).value;return u.kind==="constant"?u.value:s.programConfigurations.get(r.id).getMaxValue(c)}function Qr(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function wr(c,r,s,u,m){if(!r[0]&&!r[1])return c;const f=vt.convert(r)._mult(m);s==="viewport"&&f._rotate(-u);const g=[];for(let b=0;b<c.length;b++)g.push(c[b].sub(f));return g}function jr(c,r,s,u){const m=vt.convert(c)._mult(u);return r==="viewport"&&m._rotate(-s),m}let Wr,Dn;Ut(Yt,"CircleBucket",{omit:["layers"]});var Un,Dr={exports:{}},ai=(Un||(Un=1,function(c,r){(function(s){function u(f,g,b){var E=m(256*f,256*(g=Math.pow(2,b)-g-1),b),I=m(256*(f+1),256*(g+1),b);return E[0]+","+E[1]+","+I[0]+","+I[1]}function m(f,g,b){var E=2*Math.PI*6378137/256/Math.pow(2,b);return[f*E-2*Math.PI*6378137/2,g*E-2*Math.PI*6378137/2]}s.getURL=function(f,g,b,E,I,v){return v=v||{},f+"?"+["bbox="+u(b,E,I),"format="+(v.format||"image/png"),"service="+(v.service||"WMS"),"version="+(v.version||"1.1.1"),"request="+(v.request||"GetMap"),"srs="+(v.srs||"EPSG:3857"),"width="+(v.width||256),"height="+(v.height||256),"layers="+g].join("&")},s.getTileBBox=u,s.getMercCoords=m,Object.defineProperty(s,"__esModule",{value:!0})})(r)}(0,Dr.exports)),Dr.exports);class di{constructor(r,s,u){this.z=r,this.x=s,this.y=u,this.key=Ki(0,r,r,s,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s){const u=ai.getTileBBox(this.x,this.y,this.z),m=function(f,g,b){let E,I="";for(let v=f;v>0;v--)E=1<<v-1,I+=(g&E?1:0)+(b&E?2:0);return I}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class si{constructor(r,s){this.wrap=r,this.canonical=s,this.key=Ki(r,s.z,s.z,s.x,s.y)}}class hn{constructor(r,s,u,m,f){this.overscaledZ=r,this.wrap=s,this.canonical=new di(u,+m,+f),this.key=s===0&&r===u?this.canonical.key:Ki(s,r,u,m,f)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const s=this.canonical.z-r;return r>this.canonical.z?new hn(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hn(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s=!0){if(this.overscaledZ===r&&s)return this.key;if(r>this.canonical.z)return Ki(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return Ki(this.wrap*+s,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.z<this.canonical.z&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new hn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new hn(s,this.wrap,s,u,m),new hn(s,this.wrap,s,u+1,m),new hn(s,this.wrap,s,u,m+1),new hn(s,this.wrap,s,u+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new hn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new hn(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new si(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ki(c,r,s,u,m){const f=1<<Math.min(s,22);let g=f*(m%f)+u%f;return c&&s<22&&(g+=f*f*((c<0?-2*c-1:2*c)%(1<<2*(22-s)))),16*(32*g+s)+(r-s)}const Ji=[c=>{let r=c.canonical.x-1,s=c.wrap;return r<0&&(r=(1<<c.canonical.z)-1,s--),new hn(c.overscaledZ,s,c.canonical.z,r,c.canonical.y)},c=>{let r=c.canonical.x+1,s=c.wrap;return r===1<<c.canonical.z&&(r=0,s++),new hn(c.overscaledZ,s,c.canonical.z,r,c.canonical.y)},c=>new hn(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,(c.canonical.y===0?1<<c.canonical.z:c.canonical.y)-1),c=>new hn(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y===(1<<c.canonical.z)-1?0:c.canonical.y+1)];Ut(di,"CanonicalTileID"),Ut(hn,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const jo=Nr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Eo}=jo,uo=Nr([{name:"a_pos_3",components:3,type:"Int16"}]);var $o=Nr([{name:"a_pos",type:"Int16",components:2}]);class is{constructor(r,s){this.pos=r,this.dir=s}intersectsPlane(r,s,u){const m=Pe.vec3.dot(s,this.dir);if(Math.abs(m)<1e-6)return!1;const f=((r[0]-this.pos[0])*s[0]+(r[1]-this.pos[1])*s[1]+(r[2]-this.pos[2])*s[2])/m;return u[0]=this.pos[0]+this.dir[0]*f,u[1]=this.pos[1]+this.dir[1]*f,u[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(r,s,u){if(Pe.vec3.equals(this.pos,r)||s===0)return u[0]=u[1]=u[2]=0,!1;const[m,f,g]=this.dir,b=this.pos[0]-r[0],E=this.pos[1]-r[1],I=this.pos[2]-r[2],v=m*m+f*f+g*g,T=2*(b*m+E*f+I*g),M=T*T-4*v*(b*b+E*E+I*I-s*s);if(M<0){const S=Math.max(-T/2,0),P=b+m*S,R=E+f*S,L=I+g*S,N=Math.hypot(P,R,L);return u[0]=P*s/N,u[1]=R*s/N,u[2]=L*s/N,!1}{const S=(-T-Math.sqrt(M))/(2*v);if(S<0){const P=Math.hypot(b,E,I);return u[0]=b*s/P,u[1]=E*s/P,u[2]=I*s/P,!1}return u[0]=b+m*S,u[1]=E+f*S,u[2]=I+g*S,!0}}}class Ls{constructor(r,s,u,m,f){this.TL=r,this.TR=s,this.BR=u,this.BL=m,this.horizon=f}static fromInvProjectionMatrix(r,s,u){const m=[-1,1,1],f=[1,1,1],g=[1,-1,1],b=[-1,-1,1],E=Pe.vec3.transformMat4(m,m,r),I=Pe.vec3.transformMat4(f,f,r),v=Pe.vec3.transformMat4(g,g,r),T=Pe.vec3.transformMat4(b,b,r);return new Ls(E,I,v,T,s/u)}}function Pa(c,r,s){let u=1/0,m=-1/0;const f=[];for(const g of c){Pe.vec3.sub(f,g,r);const b=Pe.vec3.dot(f,s);u=Math.min(u,b),m=Math.max(m,b)}return[u,m]}function C1(c,r){let s=!0;for(let u=0;u<c.planes.length;u++){const m=c.planes[u];let f=0;for(let g=0;g<r.length;g++)f+=Pe.vec3.dot(m,r[g])+m[3]>=0;if(f===0)return 0;f!==r.length&&(s=!1)}return s?2:1}function I1(c,r){for(const s of c.projections){const u=Pa(r,c.points[0],s.axis);if(s.projection[1]<u[0]||s.projection[0]>u[1])return 0}return 1}function K7(c,r){let s=0;const u=[0,0,0,0];for(let m=0;m<c.length;m++)u[0]=c[m][0],u[1]=c[m][1],u[2]=c[m][2],u[3]=1,Pe.vec4.dot(u,r)>=0&&s++;return s}class O1{constructor(r,s){this.points=r||new Array(8).fill([0,0,0]),this.planes=s||new Array(6).fill([0,0,0,0]),this.bounds=fn.fromPoints(this.points),this.projections=[],this.frustumEdges=[Pe.vec3.sub([],this.points[2],this.points[3]),Pe.vec3.sub([],this.points[0],this.points[3]),Pe.vec3.sub([],this.points[4],this.points[0]),Pe.vec3.sub([],this.points[5],this.points[1]),Pe.vec3.sub([],this.points[6],this.points[2]),Pe.vec3.sub([],this.points[7],this.points[3])];for(const u of this.frustumEdges){const m=[0,-u[2],u[1]],f=[u[2],0,-u[0]];this.projections.push({axis:m,projection:Pa(this.points,this.points[0],m)}),this.projections.push({axis:f,projection:Pa(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(r,s,u,m){const f=Math.pow(2,u),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const v=Pe.vec4.transformMat4([],I,r),T=1/v[3]/s*f;return Pe.vec4.mul(v,v,[T,T,m?1/v[3]:T,T])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const v=Pe.vec3.sub([],g[I[0]],g[I[1]]),T=Pe.vec3.sub([],g[I[2]],g[I[1]]),M=Pe.vec3.normalize([],Pe.vec3.cross([],v,T)),S=-Pe.vec3.dot(M,g[I[1]]);return M.concat(S)}),E=[];for(let I=0;I<g.length;I++)E.push([g[I][0],g[I][1],g[I][2]]);return new O1(E,b)}intersectsPrecise(r,s,u){for(let m=0;m<s.length;m++)if(!K7(r,s[m]))return 0;for(let m=0;m<this.planes.length;m++)if(!K7(r,this.planes[m]))return 0;for(const m of u)for(const f of this.frustumEdges){const g=Pe.vec3.cross([],m,f),b=Pe.vec3.length(g);if(b===0)continue;Pe.vec3.scale(g,g,1/b);const E=Pa(this.points,this.points[0],g),I=Pa(r,this.points[0],g);if(E[0]>I[1]||I[0]>E[1])return 0}return 1}containsPoint(r){for(const s of this.planes){const u=s[3];if(Pe.vec3.dot([s[0],s[1],s[2]],r)+u<0)return!1}return!0}}class fn{static fromPoints(r){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const m of r)Pe.vec3.min(s,s,m),Pe.vec3.max(u,u,m);return new fn(s,u)}static fromTileIdAndHeight(r,s,u){const m=1<<r.canonical.z,f=r.canonical.x,g=r.canonical.y;return new fn([f/m,g/m,s],[(f+1)/m,(g+1)/m,u])}static applyTransform(r,s){const u=r.getCorners();for(let m=0;m<u.length;++m)Pe.vec3.transformMat4(u[m],u[m],s);return fn.fromPoints(u)}static applyTransformFast(r,s){const u=[s[12],s[13],s[14]],m=[...u];for(let f=0;f<3;f++)for(let g=0;g<3;g++){const b=s[4*g+f],E=b*r.min[g],I=b*r.max[g];u[f]+=Math.min(E,I),m[f]+=Math.max(E,I)}return new fn(u,m)}static projectAabbCorners(r,s){const u=r.getCorners();for(let m=0;m<u.length;++m)Pe.vec3.transformMat4(u[m],u[m],s);return u}constructor(r,s){this.min=r,this.max=s,this.center=Pe.vec3.scale([],Pe.vec3.add([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],u=Pe.vec3.clone(this.min),m=Pe.vec3.clone(this.max);for(let f=0;f<s.length;f++)u[f]=s[f]?this.min[f]:this.center[f],m[f]=s[f]?this.center[f]:this.max[f];return m[2]=this.max[2],new fn(u,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,s=this.max;return[[r[0],r[1],r[2]],[s[0],r[1],r[2]],[s[0],s[1],r[2]],[r[0],s[1],r[2]],[r[0],r[1],s[2]],[s[0],r[1],s[2]],[s[0],s[1],s[2]],[r[0],s[1],s[2]]]}intersects(r){return this.intersectsAabb(r.bounds)?C1(r,this.getCorners()):0}intersectsFlat(r){return this.intersectsAabb(r.bounds)?C1(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(r,s){return s||this.intersects(r)?I1(r,this.getCorners()):0}intersectsPreciseFlat(r,s){return s||this.intersectsFlat(r)?I1(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(r){for(let s=0;s<3;++s)if(this.min[s]>r.max[s]||r.min[s]>this.max[s])return!1;return!0}intersectsAabbXY(r){return!(this.min[0]>r.max[0]||r.min[0]>this.max[0]||this.min[1]>r.max[1]||r.min[1]>this.max[1])}encapsulate(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r.min[s]),this.max[s]=Math.max(this.max[s],r.max[s])}encapsulatePoint(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r[s]),this.max[s]=Math.max(this.max[s],r[s])}closestPoint(r){return[Math.max(Math.min(this.max[0],r[0]),this.min[0]),Math.max(Math.min(this.max[1],r[1]),this.min[1]),Math.max(Math.min(this.max[2],r[2]),this.min[2])]}}function pl(c){return c*i/U}Ut(fn,"Aabb");const w8=[new fn([O,O,O],[k,k,k]),new fn([O,O,O],[0,0,k]),new fn([0,O,O],[k,0,k]),new fn([O,0,O],[0,k,k]),new fn([0,0,O],[k,k,k])];function Mf(c,r,s,u=!0){const m=Pe.vec3.scale([],c._camera.position,c.worldSize),f=[r,s,1,1];Pe.vec4.transformMat4(f,f,c.pixelMatrixInverse),Pe.vec4.scale(f,f,1/f[3]);const g=Pe.vec3.sub([],f,m),b=Pe.vec3.normalize([],g),E=c.globeMatrix,I=[E[12],E[13],E[14]],v=Pe.vec3.sub([],I,m),T=Pe.vec3.length(v),M=Pe.vec3.normalize([],v),S=c.worldSize/(2*Math.PI),P=Pe.vec3.dot(M,b),R=Math.asin(S/T);if(R<Math.acos(P)){if(!u)return null;const Ae=[],_e=[];Pe.vec3.scale(Ae,b,T/P),Pe.vec3.normalize(_e,Pe.vec3.sub(_e,Ae,v)),Pe.vec3.normalize(b,Pe.vec3.add(b,v,Pe.vec3.scale(b,_e,Math.tan(R)*T)))}const L=[];new is(m,b).closestPointOnSphere(I,S,L);const N=Pe.vec3.normalize([],el(E,0)),G=Pe.vec3.normalize([],el(E,1)),W=Pe.vec3.normalize([],el(E,2)),$=Pe.vec3.dot(N,L),Z=Pe.vec3.dot(G,L),Y=Pe.vec3.dot(W,L),ce=jn(Math.asin(-Z/S));let pe=jn(Math.atan2($,Y));pe=c.center.lng+function(Ae,_e){const Me=(_e-Ae+180)%360-180;return Me<-180?Me+360:Me}(c.center.lng,pe);const ge=me(pe),he=mr(ye(ce),0,1);return new Ve(ge,he)}class ZL{constructor(r,s,u){this.a=Pe.vec3.sub([],r,u),this.b=Pe.vec3.sub([],s,u),this.center=u;const m=Pe.vec3.normalize([],this.a),f=Pe.vec3.normalize([],this.b);this.angle=Math.acos(Pe.vec3.dot(m,f))}}function A8(c,r){if(c.angle===0)return null;let s;return s=c.a[r]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[r]/c.a[r]/Math.sin(c.angle)-1/Math.tan(c.angle)),s<0||s>1?null:function(u,m,f,g){const b=Math.sin(f);return u*(Math.sin((1-g)*f)/b)+m*(Math.sin(g*f)/b)}(c.a[r],c.b[r],c.angle,mr(s,0,1))+c.center[r]}function zs(c){if(c.z<=1)return w8[c.z+2*c.y+c.x];const r=T8(Cf(c));return fn.fromPoints(r)}function ml(c,r,s){return Pe.vec3.scale(c,c,1-s),Pe.vec3.scaleAndAdd(c,c,r,s)}function ob(c,r,s){for(const u of c)Pe.vec3.transformMat4(u,u,r),Pe.vec3.scale(u,u,s)}function ab(c,r,s,u){const m=r/c.worldSize,f=c.globeMatrix;if(s.z<=1){const ge=zs(s).getCorners();return ob(ge,f,m),fn.fromPoints(ge)}const g=Cf(s,u),b=T8(g,i+pl(c._tileCoverLift));ob(b,f,m);const E=Number.MAX_VALUE,I=[-E,-E,-E],v=[E,E,E];if(g.contains(c.center)){for(const Ae of b)Pe.vec3.min(v,v,Ae),Pe.vec3.max(I,I,Ae);I[2]=0;const ge=c.point,he=[ge.x*m,ge.y*m,0];return Pe.vec3.min(v,v,he),Pe.vec3.max(I,I,he),new fn(v,I)}if(c._tileCoverLift>0){for(const ge of b)Pe.vec3.min(v,v,ge),Pe.vec3.max(I,I,ge);return new fn(v,I)}const T=[f[12]*m,f[13]*m,f[14]*m],M=g.getCenter(),S=mr(c.center.lat,-Se,Se),P=mr(M.lat,-Se,Se),R=me(c.center.lng),L=ye(S);let N=R-me(M.lng);const G=L-ye(P);N>.5?N-=1:N<-.5&&(N+=1);let W=0;if(Math.abs(N)>Math.abs(G))W=N>=0?1:3;else{W=G>=0?0:2;const ge=[f[4]*m,f[5]*m,f[6]*m],he=-Math.sin(br(G>=0?g.getSouth():g.getNorth()))*i;Pe.vec3.scaleAndAdd(T,T,ge,he)}const $=b[W],Z=b[(W+1)%4],Y=new ZL($,Z,T),ce=[A8(Y,0)||$[0],A8(Y,1)||$[1],A8(Y,2)||$[2]],pe=R1(c.zoom);if(pe>0){const ge=function({x:Ae,y:_e,z:Me},Le,Be,Fe,je){const Ye=1/(1<<Me);let Ue=Ae*Ye,ot=Ue+Ye,pt=_e*Ye,et=pt+Ye,zt=0;const Ot=(Ue+ot)/2-Fe;return Ot>.5?zt=-1:Ot<-.5&&(zt=1),Ue=((Ue+zt)*Le-(Fe*=Le))*Be+Fe,ot=((ot+zt)*Le-Fe)*Be+Fe,pt=(pt*Le-(je*=Le))*Be+je,et=(et*Le-je)*Be+je,[[Ue,et,0],[ot,et,0],[ot,pt,0],[Ue,pt,0]]}(s,r,c._pixelsPerMercatorPixel,R,L);for(let Ae=0;Ae<b.length;Ae++)ml(b[Ae],ge[Ae],pe);const he=Pe.vec3.add([],ge[W],ge[(W+1)%4]);Pe.vec3.scale(he,he,.5),ml(ce,he,pe)}for(const ge of b)Pe.vec3.min(v,v,ge),Pe.vec3.max(I,I,ge);return v[2]=Math.min($[2],Z[2]),Pe.vec3.min(v,v,ce),Pe.vec3.max(I,I,ce),new fn(v,I)}function Cf({x:c,y:r,z:s},u=!1){const m=1/(1<<s),f=new q(be(c*m),r===(1<<s)-1&&u?-90:xe((r+1)*m)),g=new q(be((c+1)*m),r===0&&u?90:xe(r*m));return new J(f,g)}function T8(c,r=i){const s=br(c.getNorth()),u=br(c.getSouth()),m=Math.cos(s),f=Math.cos(u),g=Math.sin(s),b=Math.sin(u),E=c.getWest(),I=c.getEast();return[z(f,b,E,r),z(f,b,I,r),z(m,g,I,r),z(m,g,E,r)]}function G3(c,r,s,u){const m=1<<s.z,f=(c/Dt+s.x)/m;return F(xe((r/Dt+s.y)/m),be(f),u)}function If({min:c,max:r}){return _/Math.max(r[0]-c[0],r[1]-c[1],r[2]-c[2])}const sb=new Float64Array(16);function Of(c){const r=If(c),s=Pe.mat4.fromScaling(sb,[r,r,r]);return Pe.mat4.translate(s,s,Pe.vec3.negate([],c.min))}function S8(c){const r=Pe.mat4.fromTranslation(sb,c.min),s=1/If(c);return Pe.mat4.scale(r,r,[s,s,s])}function E8(c){const r=Dt/(2*Math.PI);return c/(2*Math.PI)/r}function lb(c,r){return Dt/(512*Math.pow(2,c))*If(zs(r))}function cb(c,r,s,u,m){const f=E8(s),g=[c,r,-s/(2*Math.PI)],b=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.translate(b,b,g),Pe.mat4.scale(b,b,[f,f,f]),Pe.mat4.rotateX(b,b,br(-m)),Pe.mat4.rotateY(b,b,br(-u)),b}function R1(c){return Gl(l,p,c)}function ub(c,r){const s=F(r.lat,r.lng),u=function(f){const g=F(f._center.lat,f._center.lng),b=Pe.vec3.fromValues(0,1,0);let E=Pe.vec3.cross([],b,g);const I=Pe.mat4.fromRotation([],-f.angle,g);E=Pe.vec3.transformMat4(E,E,I),Pe.mat4.fromRotation(I,-f._pitch,E);const v=Pe.vec3.normalize([],g);return Pe.vec3.scale(v,v,pl(f.cameraToCenterDistance/f.pixelsPerMeter)),Pe.vec3.transformMat4(v,v,I),Pe.vec3.add([],g,v)}(c),m=Pe.vec3.subtract([],u,s);return Pe.vec3.angle(m,s)}function P8(c,r){return ub(c,r)>Math.PI/2*1.01}const hb=br(85),XL=Math.cos(hb),YL=Math.sin(hb),KL=Pe.mat4.create(),fb=c=>{const r=[];return c.paint.get("circle-pitch-alignment")==="map"&&r.push("PITCH_WITH_MAP"),c.paint.get("circle-pitch-scale")==="map"&&r.push("SCALE_WITH_MAP"),r};function db(c,r,s,u,m,f,g,b,E){if(f&&c.queryGeometry.isAboveHorizon)return!1;f&&(E*=c.pixelToTileUnitsFactor);const I=c.tileID.canonical,v=s.projection.upVectorScale(I,s.center.lat,s.worldSize).metersToTile;for(const T of r)for(const M of T){const S=M.add(b),P=m&&s.elevation?s.elevation.exaggeration()*m.getElevationAt(S.x,S.y,!0):0,R=s.projection.projectTilePoint(S.x,S.y,I);if(P>0){const W=s.projection.upVector(I,S.x,S.y);R.x+=W[0]*v*P,R.y+=W[1]*v*P,R.z+=W[2]*v*P}const L=f?S:JL(R.x,R.y,R.z,u),N=f?c.tilespaceRays.map(W=>ez(W,P)):c.queryGeometry.screenGeometry,G=Pe.vec4.transformMat4([],[R.x,R.y,R.z,1],u);if(!g&&f?E*=G[3]/s.cameraToCenterDistance:g&&!f&&(E*=s.cameraToCenterDistance/G[3]),f){const W=xe((M.y/Dt+I.y)/(1<<I.z));E/=s.projection.pixelsPerMeter(W,1)/de(1,W)}if(jt(N,L,E))return!0}return!1}function JL(c,r,s,u){const m=Pe.vec4.transformMat4([],[c,r,s,1],u);return new vt(m[0]/m[3],m[1]/m[3])}const pb=Pe.vec3.fromValues(0,0,0),QL=Pe.vec3.fromValues(0,0,1);function ez(c,r){const s=Pe.vec3.create();return pb[2]=r,c.intersectsPlane(pb,QL,s),new vt(s[0],s[1])}class mb extends Yt{}let gb,yb,_b,vb;function xb(c,{width:r,height:s},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(r*s*u);return c.width=r,c.height=s,c.data=m,c}function bb(c,r,s){const{width:u,height:m}=r;u===c.width&&m===c.height||(M8(c,r,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,u),height:Math.min(c.height,m)},s,null),c.width=u,c.height=m,c.data=r.data)}function M8(c,r,s,u,m,f,g,b){if(m.width===0||m.height===0)return r;if(m.width>c.width||m.height>c.height||s.x>c.width-m.width||s.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||u.x>r.width-m.width||u.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const E=c.data,I=r.data,v=f===4&&b;for(let T=0;T<m.height;T++){const M=((s.y+T)*c.width+s.x)*f,S=((u.y+T)*r.width+u.x)*f;if(v)for(let P=0;P<m.width;P++){const R=M+P*f+3,L=S+P*f;I[L+0]=255,I[L+1]=255,I[L+2]=255,I[L+3]=E[R]}else if(g)for(let P=0;P<m.width;P++){const R=M+P*f,L=S+P*f,N=E[R+3],G=new qr(E[R+0]/255*N,E[R+1]/255*N,E[R+2]/255*N,N).toRenderColor(g).toArray();I[L+0]=G[0],I[L+1]=G[1],I[L+2]=G[2],I[L+3]=G[3]}else for(let P=0;P<m.width*f;P++)I[S+P]=E[M+P]}return r}Ut(mb,"HeatmapBucket",{omit:["layers"]});class D1{constructor(r,s){xb(this,r,1,s)}resize(r){bb(this,new D1(r),1)}clone(){return new D1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,m,f){M8(r,s,u,m,f,1,null)}}class Qi{constructor(r,s){xb(this,r,4,s)}resize(r){bb(this,new Qi(r),4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Qi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,m,f,g,b){M8(r,s,u,m,f,4,g,b)}}class wb{constructor(r,s){this.width=r.width,this.height=r.height,this.data=s instanceof Uint8Array?new Float32Array(s.buffer):s}}function q3(c){const r={},s=c.resolution||256,u=c.clips?c.clips.length:1,m=c.image||new Qi({width:s,height:u}),f=(g,b,E)=>{r[c.evaluationKey]=E;const I=c.expression.evaluate(r);I&&(m.data[g+b+0]=Math.floor(255*I.r/I.a),m.data[g+b+1]=Math.floor(255*I.g/I.a),m.data[g+b+2]=Math.floor(255*I.b/I.a),m.data[g+b+3]=Math.floor(255*I.a))};if(c.clips)for(let g=0,b=0;g<u;++g,b+=4*s)for(let E=0,I=0;E<s;E++,I+=4){const v=E/(s-1),{start:T,end:M}=c.clips[g];f(b,I,T*(1-v)+M*v)}else for(let g=0,b=0;g<s;g++,b+=4)f(0,b,g/(s-1));return m}Ut(D1,"AlphaImage"),Ut(Qi,"RGBAImage");const tz=Nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:rz}=tz;function W3(c,r,s=2){const u=r&&r.length,m=u?r[0]*s:c.length;let f=Ab(c,0,m,s,!0);const g=[];if(!f||f.next===f.prev)return g;let b,E,I;if(u&&(f=function(v,T,M,S){const P=[];for(let R=0,L=T.length;R<L;R++){const N=Ab(v,T[R]*S,R<L-1?T[R+1]*S:v.length,S,!1);N===N.next&&(N.steiner=!0),P.push(uz(N))}P.sort(sz);for(let R=0;R<P.length;R++)M=lz(P[R],M);return M}(c,r,f,s)),c.length>80*s){b=1/0,E=1/0;let v=-1/0,T=-1/0;for(let M=s;M<m;M+=s){const S=c[M],P=c[M+1];S<b&&(b=S),P<E&&(E=P),S>v&&(v=S),P>T&&(T=P)}I=Math.max(v-b,T-E),I=I!==0?32767/I:0}return H3(f,g,s,b,E,I,0),g}function Ab(c,r,s,u,m){let f;if(m===function(g,b,E,I){let v=0;for(let T=b,M=E-I;T<E;T+=I)v+=(g[M]-g[T])*(g[T+1]+g[M+1]),M=T;return v}(c,r,s,u)>0)for(let g=r;g<s;g+=u)f=Eb(g/u|0,c[g],c[g+1],f);else for(let g=s-u;g>=r;g-=u)f=Eb(g/u|0,c[g],c[g+1],f);return f&&Rf(f,f.next)&&(X3(f),f=f.next),f}function ou(c,r){if(!c)return c;r||(r=c);let s,u=c;do if(s=!1,u.steiner||!Rf(u,u.next)&&li(u.prev,u,u.next)!==0)u=u.next;else{if(X3(u),u=r=u.prev,u===u.next)break;s=!0}while(s||u!==r);return r}function H3(c,r,s,u,m,f,g){if(!c)return;!g&&f&&function(E,I,v,T){let M=E;do M.z===0&&(M.z=C8(M.x,M.y,I,v,T)),M.prevZ=M.prev,M.nextZ=M.next,M=M.next;while(M!==E);M.prevZ.nextZ=null,M.prevZ=null,function(S){let P,R=1;do{let L,N=S;S=null;let G=null;for(P=0;N;){P++;let W=N,$=0;for(let Y=0;Y<R&&($++,W=W.nextZ,W);Y++);let Z=R;for(;$>0||Z>0&&W;)$!==0&&(Z===0||!W||N.z<=W.z)?(L=N,N=N.nextZ,$--):(L=W,W=W.nextZ,Z--),G?G.nextZ=L:S=L,L.prevZ=G,G=L;N=W}G.nextZ=null,R*=2}while(P>1)}(M)}(c,u,m,f);let b=c;for(;c.prev!==c.next;){const E=c.prev,I=c.next;if(f?iz(c,u,m,f):nz(c))r.push(E.i,c.i,I.i),X3(c),c=I.next,b=I.next;else if((c=I)===b){g?g===1?H3(c=oz(ou(c),r),r,s,u,m,f,2):g===2&&az(c,r,s,u,m,f):H3(ou(c),r,s,u,m,f,1);break}}}function nz(c){const r=c.prev,s=c,u=c.next;if(li(r,s,u)>=0)return!1;const m=r.x,f=s.x,g=u.x,b=r.y,E=s.y,I=u.y,v=m<f?m<g?m:g:f<g?f:g,T=b<E?b<I?b:I:E<I?E:I,M=m>f?m>g?m:g:f>g?f:g,S=b>E?b>I?b:I:E>I?E:I;let P=u.next;for(;P!==r;){if(P.x>=v&&P.x<=M&&P.y>=T&&P.y<=S&&J7(m,b,f,E,g,I,P.x,P.y)&&li(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function iz(c,r,s,u){const m=c.prev,f=c,g=c.next;if(li(m,f,g)>=0)return!1;const b=m.x,E=f.x,I=g.x,v=m.y,T=f.y,M=g.y,S=b<E?b<I?b:I:E<I?E:I,P=v<T?v<M?v:M:T<M?T:M,R=b>E?b>I?b:I:E>I?E:I,L=v>T?v>M?v:M:T>M?T:M,N=C8(S,P,r,s,u),G=C8(R,L,r,s,u);let W=c.prevZ,$=c.nextZ;for(;W&&W.z>=N&&$&&$.z<=G;){if(W.x>=S&&W.x<=R&&W.y>=P&&W.y<=L&&W!==m&&W!==g&&J7(b,v,E,T,I,M,W.x,W.y)&&li(W.prev,W,W.next)>=0||(W=W.prevZ,$.x>=S&&$.x<=R&&$.y>=P&&$.y<=L&&$!==m&&$!==g&&J7(b,v,E,T,I,M,$.x,$.y)&&li($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;W&&W.z>=N;){if(W.x>=S&&W.x<=R&&W.y>=P&&W.y<=L&&W!==m&&W!==g&&J7(b,v,E,T,I,M,W.x,W.y)&&li(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;$&&$.z<=G;){if($.x>=S&&$.x<=R&&$.y>=P&&$.y<=L&&$!==m&&$!==g&&J7(b,v,E,T,I,M,$.x,$.y)&&li($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function oz(c,r){let s=c;do{const u=s.prev,m=s.next.next;!Rf(u,m)&&Tb(u,s,s.next,m)&&Z3(u,m)&&Z3(m,u)&&(r.push(u.i,s.i,m.i),X3(s),X3(s.next),s=c=m),s=s.next}while(s!==c);return ou(s)}function az(c,r,s,u,m,f){let g=c;do{let b=g.next.next;for(;b!==g.prev;){if(g.i!==b.i&&hz(g,b)){let E=Sb(g,b);return g=ou(g,g.next),E=ou(E,E.next),H3(g,r,s,u,m,f,0),void H3(E,r,s,u,m,f,0)}b=b.next}g=g.next}while(g!==c)}function sz(c,r){return c.x-r.x}function lz(c,r){const s=function(m,f){let g=f;const b=m.x,E=m.y;let I,v=-1/0;do{if(E<=g.y&&E>=g.next.y&&g.next.y!==g.y){const R=g.x+(E-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(R<=b&&R>v&&(v=R,I=g.x<g.next.x?g:g.next,R===b))return I}g=g.next}while(g!==f);if(!I)return null;const T=I,M=I.x,S=I.y;let P=1/0;g=I;do{if(b>=g.x&&g.x>=M&&b!==g.x&&J7(E<S?b:v,E,M,S,E<S?v:b,E,g.x,g.y)){const R=Math.abs(E-g.y)/(b-g.x);Z3(g,m)&&(R<P||R===P&&(g.x>I.x||g.x===I.x&&cz(I,g)))&&(I=g,P=R)}g=g.next}while(g!==T);return I}(c,r);if(!s)return r;const u=Sb(s,c);return ou(u,u.next),ou(s,s.next)}function cz(c,r){return li(c.prev,c,r.prev)<0&&li(r.next,c,c.next)<0}function C8(c,r,s,u,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-s)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function uz(c){let r=c,s=c;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==c);return s}function J7(c,r,s,u,m,f,g,b){return(m-g)*(r-b)>=(c-g)*(f-b)&&(c-g)*(u-b)>=(s-g)*(r-b)&&(s-g)*(f-b)>=(m-g)*(u-b)}function hz(c,r){return c.next.i!==r.i&&c.prev.i!==r.i&&!function(s,u){let m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==u.i&&m.next.i!==u.i&&Tb(m,m.next,s,u))return!0;m=m.next}while(m!==s);return!1}(c,r)&&(Z3(c,r)&&Z3(r,c)&&function(s,u){let m=s,f=!1;const g=(s.x+u.x)/2,b=(s.y+u.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&g<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(f=!f),m=m.next;while(m!==s);return f}(c,r)&&(li(c.prev,c,r.prev)||li(c,r.prev,r))||Rf(c,r)&&li(c.prev,c,c.next)>0&&li(r.prev,r,r.next)>0)}function li(c,r,s){return(r.y-c.y)*(s.x-r.x)-(r.x-c.x)*(s.y-r.y)}function Rf(c,r){return c.x===r.x&&c.y===r.y}function Tb(c,r,s,u){const m=kf(li(c,r,s)),f=kf(li(c,r,u)),g=kf(li(s,u,c)),b=kf(li(s,u,r));return m!==f&&g!==b||!(m!==0||!Df(c,s,r))||!(f!==0||!Df(c,u,r))||!(g!==0||!Df(s,c,u))||!(b!==0||!Df(s,r,u))}function Df(c,r,s){return r.x<=Math.max(c.x,s.x)&&r.x>=Math.min(c.x,s.x)&&r.y<=Math.max(c.y,s.y)&&r.y>=Math.min(c.y,s.y)}function kf(c){return c>0?1:c<0?-1:0}function Z3(c,r){return li(c.prev,c,c.next)<0?li(c,r,c.next)>=0&&li(c,c.prev,r)>=0:li(c,r,c.prev)<0||li(c,c.next,r)<0}function Sb(c,r){const s=I8(c.i,c.x,c.y),u=I8(r.i,r.x,r.y),m=c.next,f=r.prev;return c.next=r,r.prev=c,s.next=m,m.prev=s,u.next=s,s.prev=u,f.next=u,u.prev=f,u}function Eb(c,r,s,u){const m=I8(c,r,s);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function X3(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function I8(c,r,s){return{i:c,x:r,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Lf(c,r){const s=c.length;if(s<=1)return[c];const u=[];let m,f;for(let g=0;g<s;g++){const b=Ku(c[g]);b!==0&&(c[g].area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(m&&u.push(m),m=[c[g]]):m.push(c[g]))}if(m&&u.push(m),r>1)for(let g=0;g<u.length;g++)u[g].length<=r||(C6(u[g],r,1,u[g].length-1,fz),u[g]=u[g].slice(0,r));return u}function fz(c,r){return r.area-c.area}function O8(c,r,s){const u=s.patternDependencies;let m=!1;for(const f of r){const g=f.paint.get(`${c}-pattern`);g.isConstant()||(m=!0);const b=g.constantOr(null);b&&(m=!0,u[b]=!0)}return m}function R8(c,r,s,u,m){const f=m.patternDependencies;for(const g of r){const b=g.paint.get(`${c}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:u},s,{},m.availableImages);E=E&&E.name?E.name:E,f[E]=!0,s.patterns[g.id]=E}}return s}class D8{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Is,this.indexArray=new Ti,this.indexArray2=new Ds,this.programConfigurations=new ks(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new Rn,this.segments2=new Rn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=r.projection}updateFootprints(r,s){}populate(r,s,u,m){this.hasPattern=O8("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:b,id:E,index:I,sourceLayerIndex:v}of r){const T=this.layers[0]._featureFilter.needGeometry,M=Tt(b,T);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),M,u))continue;const S=f?f.evaluate(M,{},u,s.availableImages):void 0,P={id:E,properties:b.properties,type:b.type,sourceLayerIndex:v,index:I,geometry:T?M.geometry:wt(b,u,m),patterns:{},sortKey:S};g.push(P)}f&&g.sort((b,E)=>b.sortKey-E.sortKey);for(const b of g){const{geometry:E,index:I,sourceLayerIndex:v}=b;if(this.hasPattern){const T=R8("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(T)}else this.addFeature(b,E,I,u,{},s.availableImages,s.brightness);s.featureIndex.insert(r[I].feature,E,I,v,this.index)}}update(r,s,u,m,f){const g=Object.keys(r).length!==0;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(r,s,g?this.stateDependentLayers:this.layers,u,m,f)}addFeatures(r,s,u,m,f,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,s,u,m,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,u,m,f,g=[],b){for(const E of Lf(s,500)){let I=0;for(const R of E)I+=R.length;const v=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),T=v.vertexLength,M=[],S=[];for(const R of E){if(R.length===0)continue;R!==E[0]&&S.push(M.length/2);const L=this.segments2.prepareSegment(R.length,this.layoutVertexArray,this.indexArray2),N=L.vertexLength;this.layoutVertexArray.emplaceBack(R[0].x,R[0].y),this.indexArray2.emplaceBack(N+R.length-1,N),M.push(R[0].x),M.push(R[0].y);for(let G=1;G<R.length;G++)this.layoutVertexArray.emplaceBack(R[G].x,R[G].y),this.indexArray2.emplaceBack(N+G-1,N+G),M.push(R[G].x),M.push(R[G].y);L.vertexLength+=R.length,L.primitiveLength+=R.length}const P=W3(M,S);for(let R=0;R<P.length;R+=3)this.indexArray.emplaceBack(T+P[R],T+P[R+1],T+P[R+2]);v.vertexLength+=I,v.primitiveLength+=P.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,g,m,b)}}let Pb,Mb,Cb,Ib;Ut(D8,"FillBucket",{omit:["layers","patternFeatures"]});class k8{constructor(r,s,u,m){if(this.triangleCount=s.length/3,this.min=new vt(0,0),this.max=new vt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||r.length===0)return;const[f,g]=[r[0].clone(),r[0].clone()];for(let T=1;T<r.length;++T){const M=r[T];f.x=Math.min(f.x,M.x),f.y=Math.min(f.y,M.y),g.x=Math.max(g.x,M.x),g.y=Math.max(g.y,M.y)}if(m){const T=Math.ceil(Math.max(g.x-f.x,g.y-f.y)/m);u=Math.max(u,T)}if(u===0)return;this.min=f,this.max=g;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const E=Math.max(b.x,b.y)/u;this.cellsX=Math.max(1,Math.ceil(b.x/E)),this.cellsY=Math.max(1,Math.ceil(b.y/E)),this.xScale=1/E,this.yScale=1/E;const I=[];for(let T=0;T<this.triangleCount;T++){const M=r[s[3*T+0]].sub(this.min),S=r[s[3*T+1]].sub(this.min),P=r[s[3*T+2]].sub(this.min),R=Bs(Math.floor(Math.min(M.x,S.x,P.x)),this.xScale,this.cellsX),L=Bs(Math.floor(Math.max(M.x,S.x,P.x)),this.xScale,this.cellsX),N=Bs(Math.floor(Math.min(M.y,S.y,P.y)),this.yScale,this.cellsY),G=Bs(Math.floor(Math.max(M.y,S.y,P.y)),this.yScale,this.cellsY),W=new vt(0,0),$=new vt(0,0),Z=new vt(0,0),Y=new vt(0,0);for(let ce=N;ce<=G;++ce){W.y=$.y=ce*E,Z.y=Y.y=(ce+1)*E;for(let pe=R;pe<=L;++pe)W.x=Z.x=pe*E,$.x=Y.x=(pe+1)*E,(en(M,S,P,W,$,Y)||en(M,S,P,W,Y,Z))&&I.push({cellIdx:ce*this.cellsX+pe,triIdx:T})}}if(I.length===0)return;I.sort((T,M)=>T.cellIdx-M.cellIdx||T.triIdx-M.triIdx);let v=0;for(;v<I.length;){const T=I[v].cellIdx,M={start:this.payload.length,len:0};for(;v<I.length&&I[v].cellIdx===T;)++M.len,this.payload.push(I[v++].triIdx);this.cells[T]=M}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(r,s){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>r.x||r.y>this.max.y||this.min.y>r.y)return;const u=Bs(r.x-this.min.x,this.xScale,this.cellsX),m=Bs(r.y-this.min.y,this.yScale,this.cellsY),f=this.cells[m*this.cellsX+u];if(f){this._lazyInitLookup();for(let g=0;g<f.len;g++){const b=this.payload[f.start+g],E=Math.floor(b/8),I=1<<b%8;if(!(this.lookup[E]&I)&&(this.lookup[E]|=I,s.push(b),s.length===this.triangleCount))return}}}query(r,s,u){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>s.x||r.y>this.max.y||this.min.y>s.y)return;this._lazyInitLookup();const m=Bs(r.x-this.min.x,this.xScale,this.cellsX),f=Bs(s.x-this.min.x,this.xScale,this.cellsX),g=Bs(r.y-this.min.y,this.yScale,this.cellsY),b=Bs(s.y-this.min.y,this.yScale,this.cellsY);for(let E=g;E<=b;E++)for(let I=m;I<=f;I++){const v=this.cells[E*this.cellsX+I];if(v)for(let T=0;T<v.len;T++){const M=this.payload[v.start+T],S=Math.floor(M/8),P=1<<M%8;if(!(this.lookup[S]&P)&&(this.lookup[S]|=P,u.push(M),u.length===this.triangleCount))return}}}}function Bs(c,r,s){return Math.max(0,Math.min(s-1,Math.floor(c*r)))}Ut(k8,"TriangleGridIndex");class Ob{constructor(r){this.zoom=r.zoom,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.footprints=[]}updateFootprints(r,s){for(const u of this.footprints)s.push({footprint:u,id:r})}populate(r,s,u,m){const f=[];for(const{feature:g,id:b,index:E,sourceLayerIndex:I}of r){const v=this.layers[0]._featureFilter.needGeometry,T=Tt(g,v);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),T,u))continue;const M={id:b,properties:g.properties,type:g.type,sourceLayerIndex:I,index:E,geometry:v?T.geometry:wt(g,u,m),patterns:{}};f.push(M)}for(const g of f){const{geometry:b,index:E,sourceLayerIndex:I}=g;this.addFeature(g,b,E,u,{},s.availableImages,s.brightness),s.featureIndex.insert(r[E].feature,b,E,I,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(r){}update(r,s,u,m,f){}destroy(){}addFeature(r,s,u,m,f,g=[],b){for(const E of Lf(s,2)){const I=[],v=[],T=[],M=new vt(1/0,1/0),S=new vt(-1/0,-1/0);for(const L of E)if(L.length!==0){L!==E[0]&&T.push(v.length/2);for(let N=0;N<L.length;N++)v.push(L[N].x),v.push(L[N].y),I.push(L[N]),M.x=Math.min(M.x,L[N].x),M.y=Math.min(M.y,L[N].y),S.x=Math.max(S.x,L[N].x),S.y=Math.max(S.y,L[N].y)}const P=W3(v,T),R=new k8(I,P,8,256);this.footprints.push({vertices:I,indices:P,grid:R,min:M,max:S})}}}Ut(Ob,"ClipBucket",{omit:["layers"]});const dz=Nr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),pz=Nr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),mz=Nr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gz=Nr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),yz=Nr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),_z=Nr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:vz}=dz;var L8,Rb,z8,Db,B8,kb,Lb,zf={};function zb(){if(Rb)return L8;Rb=1;var c=Vr();function r(m,f,g,b,E){this.properties={},this.extent=g,this.type=0,this._pbf=m,this._geometry=-1,this._keys=b,this._values=E,m.readFields(s,this,f)}function s(m,f,g){m==1?f.id=g.readVarint():m==2?function(b,E){for(var I=b.readVarint()+b.pos;b.pos<I;){var v=E._keys[b.readVarint()],T=E._values[b.readVarint()];E.properties[v]=T}}(g,f):m==3?f.type=g.readVarint():m==4&&(f._geometry=g.pos)}function u(m){for(var f,g,b=0,E=0,I=m.length,v=I-1;E<I;v=E++)b+=((g=m[v]).x-(f=m[E]).x)*(f.y+g.y);return b}return L8=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var f,g=m.readVarint()+m.pos,b=1,E=0,I=0,v=0,T=[];m.pos<g;){if(E<=0){var M=m.readVarint();b=7&M,E=M>>3}if(E--,b===1||b===2)I+=m.readSVarint(),v+=m.readSVarint(),b===1&&(f&&T.push(f),f=[]),f.push(new c(I,v));else{if(b!==7)throw new Error("unknown command "+b);f&&f.push(f[0].clone())}}return f&&T.push(f),T},r.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var f=m.readVarint()+m.pos,g=1,b=0,E=0,I=0,v=1/0,T=-1/0,M=1/0,S=-1/0;m.pos<f;){if(b<=0){var P=m.readVarint();g=7&P,b=P>>3}if(b--,g===1||g===2)(E+=m.readSVarint())<v&&(v=E),E>T&&(T=E),(I+=m.readSVarint())<M&&(M=I),I>S&&(S=I);else if(g!==7)throw new Error("unknown command "+g)}return[v,M,T,S]},r.prototype.toGeoJSON=function(m,f,g){var b,E,I=this.extent*Math.pow(2,g),v=this.extent*m,T=this.extent*f,M=this.loadGeometry(),S=r.types[this.type];function P(N){for(var G=0;G<N.length;G++){var W=N[G];N[G]=[360*(W.x+v)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+T)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(b=0;b<M.length;b++)R[b]=M[b][0];P(M=R);break;case 2:for(b=0;b<M.length;b++)P(M[b]);break;case 3:for(M=function(N){var G=N.length;if(G<=1)return[N];for(var W,$,Z=[],Y=0;Y<G;Y++){var ce=u(N[Y]);ce!==0&&($===void 0&&($=ce<0),$===ce<0?(W&&Z.push(W),W=[N[Y]]):W.push(N[Y]))}return W&&Z.push(W),Z}(M),b=0;b<M.length;b++)for(E=0;E<M[b].length;E++)P(M[b][E])}M.length===1?M=M[0]:S="Multi"+S;var L={type:"Feature",geometry:{type:S,coordinates:M},properties:this.properties};return"id"in this&&(L.id=this.id),L},L8}function Bb(){if(Db)return z8;Db=1;var c=zb();function r(u,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(s,this,m),this.length=this._features.length}function s(u,m,f){u===15?m.version=f.readVarint():u===1?m.name=f.readString():u===5?m.extent=f.readVarint():u===2?m._features.push(f.pos):u===3?m._keys.push(f.readString()):u===4&&m._values.push(function(g){for(var b=null,E=g.readVarint()+g.pos;g.pos<E;){var I=g.readVarint()>>3;b=I===1?g.readString():I===2?g.readFloat():I===3?g.readDouble():I===4?g.readVarint64():I===5?g.readVarint():I===6?g.readSVarint():I===7?g.readBoolean():null}return b}(f))}return z8=r,r.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var m=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,m,this.extent,this._keys,this._values)},z8}function Fb(){return Lb||(Lb=1,zf.VectorTile=function(){if(kb)return B8;kb=1;var c=Bb();function r(s,u,m){if(s===3){var f=new c(m,m.readVarint()+m.pos);f.length&&(u[f.name]=f)}}return B8=function(s,u){this.layers=s.readFields(r,{},u)},B8}(),zf.VectorTileFeature=zb(),zf.VectorTileLayer=Bb()),zf}var Q7=Fb();class au extends vt{constructor(r,s,u){super(r,s),this.z=u}}class Nb extends au{constructor(r,s,u,m){super(r,s,u),this.w=m}}function Bf(c,r,s,u){const m=[],f=u===0?(g,b,E,I,v,T)=>{g.push(new vt(T,E+(T-b)/(I-b)*(v-E)))}:(g,b,E,I,v,T)=>{g.push(new vt(b+(T-E)/(v-E)*(I-b),T))};for(const g of c){const b=[];for(const E of g){if(E.length<=2)continue;const I=[];for(let M=0;M<E.length-1;M++){const S=E[M].x,P=E[M].y,R=E[M+1].x,L=E[M+1].y,N=u===0?S:P,G=u===0?R:L;N<r?G>r&&f(I,S,P,R,L,r):N>s?G<s&&f(I,S,P,R,L,s):I.push(E[M]),G<r&&N>=r&&f(I,S,P,R,L,r),G>s&&N<=s&&f(I,S,P,R,L,s)}let v=E[E.length-1];const T=u===0?v.x:v.y;T>=r&&T<=s&&I.push(v),I.length&&(v=I[I.length-1],I[0].x===v.x&&I[0].y===v.y||I.push(I[0]),b.push(I))}b.length&&m.push(b)}return m}function jb(c,r,s,u){const m=s==="x"?"y":"x",f=(u-c[s])/(r[s]-c[s]);c[m]=c[m]+(r[m]-c[m])*f,c[s]=u,c.hasOwnProperty("z")&&(c.z=nr(c.z,r.z,f)),c.hasOwnProperty("w")&&(c.w=nr(c.w,r.w,f))}function $b(c,r,s,u){const m=s,f=u;for(const g of["x","y"]){let b=c,E=r;b[g]>=E[g]&&(b=r,E=c),b[g]<m&&E[g]>m&&jb(b,E,g,m),b[g]<f&&E[g]>f&&jb(E,b,g,f)}}const Ff=Number.MAX_SAFE_INTEGER;function Ub(c,r,s,u){return c.order<r||c.order===Ff||!(c.clipMask&s)||function(m,f){return f.length!==0&&f.find(g=>g===m)===void 0}(u,c.clipScope)}function Nf(c,r){return c.x-r.x||c.y-r.y}function Vb(c,r){return Nf(c.min,r.min)===0&&Nf(c.max,r.max)===0}function F8(c,r){return!(c.min.x>r.max.x||c.max.x<r.min.x||c.min.y>r.max.y||c.max.y<r.min.y)}function N8(c,r){if(c.length!==r.length)return!1;for(let s=0;s<c.length;s++)if(c[s].sourceId!==r[s].sourceId||!Vb(c[s],r[s])||c[s].order!==r[s].order||c[s].clipMask!==r[s].clipMask||!Tn(c[s].clipScope,r[s].clipScope))return!1;return!0}function Gb(c,r,s){const u=1/Dt,m=1/(1<<s.canonical.z),f=(r.x*u+s.canonical.x)*m+s.wrap,g=(r.y*u+s.canonical.y)*m;return{min:new vt((c.x*u+s.canonical.x)*m+s.wrap,(c.y*u+s.canonical.y)*m),max:new vt(f,g)}}function xz(c,r,s){const u=1<<s.canonical.z,m=((r.x-s.wrap)*u-s.canonical.x)*Dt,f=(r.y*u-s.canonical.y)*Dt;return{min:new vt(((c.x-s.wrap)*u-s.canonical.x)*Dt,(c.y*u-s.canonical.y)*Dt),max:new vt(m,f)}}function qb(c,r,s,u,m,f,g){const b=c.indices,E=c.vertices,I=[];for(let v=u;v<u+m;v+=3){const T=r[s[v+0]+f],M=r[s[v+1]+f],S=r[s[v+2]+f],P=Math.min(T.x,M.x,S.x),R=Math.max(T.x,M.x,S.x),L=Math.min(T.y,M.y,S.y),N=Math.max(T.y,M.y,S.y);I.length=0,c.grid.query(new vt(P,L),new vt(R,N),I);for(let G=0;G<I.length;G++){const W=I[G];if(en(E[b[3*W+0]],E[b[3*W+1]],E[b[3*W+2]],T,M,S,g))return!0}}return!1}function Wb(c,r,s,u){if(!c||!s)return!1;let m=c.vertices;if(!r.canonical.equals(u.canonical)||r.wrap!==u.wrap){if(s.vertices.length<c.vertices.length)return Wb(s,u,c,r);const f=r.canonical,g=u.canonical,b=Math.pow(2,g.z-f.z);m=c.vertices.map(E=>new vt((E.x+f.x*Dt)*b-g.x*Dt,(E.y+f.y*Dt)*b-g.y*Dt))}return qb(s,m,c.indices,0,c.indices.length,0,0)}function Hb(c,r,s,u){const m=Math.pow(2,u.z-s.z);return new vt((c+s.x*Dt)*m-u.x*Dt,(r+s.y*Dt)*m-u.y*Dt)}function Zb(c,r){const s=[];r.grid.queryPoint(c,s);const u=r.indices,m=r.vertices;for(let f=0;f<s.length;f++){const g=s[f];if(pn([m[u[3*g+0]],m[u[3*g+1]],m[u[3*g+2]]],c))return!0}return!1}const j8=[new vt(0,0),new vt(Dt,0),new vt(Dt,Dt),new vt(0,Dt)];function Xb(c,r){const s=[];let u=[];if(!r||c.length<2)return[c];if(c.length===2)return $n(c[0],c[1],j8)?[c]:[];for(let m=0;m<c.length+2;m++){const f=c[m%c.length],g=c[(m+1)%c.length],b=$n(m===0?c[c.length-1]:c[(m-1)%c.length],f,j8),E=$n(f,g,j8),I=b||E;I&&u.push(f),I&&E||u.length>0&&(u.length>1&&s.push(u),u=[])}return u.length>1&&s.push(u),s}const $8=Q7.VectorTileFeature.types,bz=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],wz=["fill-extrusion-flood-light-ground-radius"],Az=Math.pow(2,13),Tz=Math.pow(2,15)-1,Yb=new vt(0,1),k1=2147483648;function Y3(c,r,s,u,m,f,g,b){c.emplaceBack((r<<1)+g,(s<<1)+f,(Math.floor(u*Az)<<1)+m,Math.round(b))}function K3(c,r,s){c.emplaceBack(r.x*Dt,r.y*Dt,s?1:0)}function jf(c,r,s,u,m,f){c.emplaceBack(r.x,r.y,(s.x<<1)+u,(s.y<<1)+m,f)}function J3(c,r,s){c.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class Kb{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Jb{constructor(){this.centroidXY=new vt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new vt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new vt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new vt(this.max.x-this.min.x,this.max.y-this.min.y)}}class Qb{constructor(){this.acc=new vt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(r,s){r.min.x===Number.MAX_VALUE&&(r.min.x=r.max.x=s.x,r.min.y=r.max.y=s.y)}appendEdge(r,s,u){this.accCount++,this.acc._add(s);let m=!!this.borders;s.x<r.min.x?(r.min.x=s.x,m=!0):s.x>r.max.x&&(r.max.x=s.x,m=!0),s.y<r.min.y?(r.min.y=s.y,m=!0):s.y>r.max.y&&(r.max.y=s.y,m=!0),((s.x===0||s.x===Dt)&&s.x===u.x)!=((s.y===0||s.y===Dt)&&s.y===u.y)&&this.processBorderOverlap(s,u),m&&this.checkBorderIntersection(s,u)}checkBorderIntersection(r,s){s.x<0!=r.x<0&&this.addBorderIntersection(0,nr(s.y,r.y,(0-s.x)/(r.x-s.x))),s.x>Dt!=r.x>Dt&&this.addBorderIntersection(1,nr(s.y,r.y,(Dt-s.x)/(r.x-s.x))),s.y<0!=r.y<0&&this.addBorderIntersection(2,nr(s.x,r.x,(0-s.y)/(r.y-s.y))),s.y>Dt!=r.y>Dt&&this.addBorderIntersection(3,nr(s.x,r.x,(Dt-s.y)/(r.y-s.y)))}addBorderIntersection(r,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(r,s){if(r.x===s.x){if(r.y===s.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,r.x)}}centroid(){return this.accCount===0?new vt(0,0):new vt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((r,s)=>r+ +(s[0]!==Number.MAX_VALUE),0):0}}function ew(c,r){const s=c.add(r)._unit(),u=mr(c.x*s.x+c.y*s.y,-1,1);var m,f,g;return g=Math.acos(u),Math.min(4,Math.max(-4,Math.tan(g)))/4*Tz*((m=c).x*(f=r).y-m.y*f.x<0?-1:1)}const Sz=[c=>c.x<0,c=>c.x>Dt,c=>c.y<0,c=>c.y>Dt];function Ez(c,r,s,u){const m=[4];if(u===0)return m;s._mult(u);const f=c.sub(s),g=r.sub(s),b=[c,r,f,g];for(let E=0;E<4;E++)for(const I of b)if(Sz[E](I)){m.push(E);break}return m}class tw{constructor(r){this.vertexArray=new U7,this.indexArray=new Ti,this.programConfigurations=new ks(r.layers,{zoom:r.zoom,lut:r.lut},s=>wz.includes(s)),this._segments=new Rn,this.hiddenByLandmarkVertexArray=new W7,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Rn}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(r,s,u,m=!1){const f=r.length;if(f>2){let g=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[g].length);let E;g!==this._segments.get().length-1&&(g++,this._segmentToGroundQuads[g]=[],this._segmentToRegionTriCounts[g]=[0,0,0,0,0]);{const I=r[0],v=r[1];E=ew(I.sub(r[f-1])._perp()._unit(),v.sub(I)._perp()._unit())}for(let I=0;I<f;I++){const v=I===f-1?0:I+1,T=r[I],M=r[v],S=r[v===f-1?0:v+1],P=M.sub(T)._perp()._unit(),R=ew(P,S.sub(M)._perp()._unit()),L=E,N=R;if(U8(T,M,s)||m&&iw(T,s)&&iw(M,s)){E=R;continue}const G=b.vertexLength;jf(this.vertexArray,T,M,1,1,L),jf(this.vertexArray,T,M,1,0,L),jf(this.vertexArray,T,M,0,1,N),jf(this.vertexArray,T,M,0,0,N),b.vertexLength+=4;const W=Ez(T,M,P,u);for(const $ of W)this._segmentToGroundQuads[g].push({id:G,region:$}),this._segmentToRegionTriCounts[g][$]+=2,b.primitiveLength+=2;E=R}}}prepareBorderSegments(){if(!this.hasData())return;const r=this._segments.get(),s=r.length;for(let u=0;u<s;u++)this._segmentToGroundQuads[u].sort((m,f)=>m.region-f.region);for(let u=0;u<s;u++){const m=this._segmentToGroundQuads[u],f=r[u],g=this._segmentToRegionTriCounts[u];g.reduce((E,I)=>E+I,0);let b=0;for(let E=0;E<=4;E++){const I=g[E];if(I!==0){let v=this.regionSegments[E];v||(v=this.regionSegments[E]=new Rn);const T={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+b,vertexLength:f.vertexLength,primitiveLength:I};v.get().push(T)}b+=I}for(let E=0;E<m.length;E++){const I=m[E].id;this.indexArray.emplaceBack(I,I+1,I+3),this.indexArray.emplaceBack(I,I+3,I+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(r,s,u,m,f,g){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,r,s,u,m,f,g)}upload(r){this.hasData()&&(this.vertexBuffer=r.createVertexBuffer(this.vertexArray,pz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray))}uploadPaintProperties(r){this.hasData()&&this.programConfigurations.upload(r)}update(r,s,u,m,f,g){this.hasData()&&this.programConfigurations.updatePaintArrays(r,s,u,m,f,g)}updateHiddenByLandmark(r){if(!this.hasData())return;const s=r.groundVertexCount+r.groundVertexArrayOffset;if(r.groundVertexCount===0)return;const u=r.flags&k1?1:0;for(let m=r.groundVertexArrayOffset;m<s;++m)this.hiddenByLandmarkVertexArray.emplace(m,u);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(r){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=r.createVertexBuffer(this.hiddenByLandmarkVertexArray,yz.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let r=0;r<=4;r++){const s=this.regionSegments[r];s&&s.destroy()}}}}class $f{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ti,this.footprintVertices=new Is,this.footprintSegments=[],this.layoutVertexArray=new Os,this.centroidVertexArray=new wf,this.wallVertexArray=new N3,this.indexArray=new Ti,this.programConfigurations=new ks(r.layers,{zoom:r.zoom,lut:r.lut},s=>bz.includes(s)),this.segments=new Rn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.groundEffect=new tw(r),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(r,s){}populate(r,s,u,m){this.features=[],this.hasPattern=O8("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Re(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:g,index:b,sourceLayerIndex:E}of r){const I=this.layers[0]._featureFilter.needGeometry,v=Tt(f,I);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),v,u))continue;const T={id:g,sourceLayerIndex:E,index:b,geometry:I?v.geometry:wt(f,u,m),properties:f.properties,type:f.type,patterns:{}},M=this.layoutVertexArray.length,S=$8[T.type]==="Polygon";if(this.hasPattern)this.features.push(R8("fill-extrusion",this.layers,T,this.zoom,s));else if(this.wallMode)for(const P of T.geometry)for(const R of Xb(P,S))this.addFeature(T,[R],b,u,{},s.availableImages,m,s.brightness);else this.addFeature(T,T.geometry,b,u,{},s.availableImages,m,s.brightness);s.featureIndex.insert(f,T.geometry,b,E,this.index,M)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(r,s,u,m,f,g){for(const b of this.features){const E=$8[b.type]==="Polygon",{geometry:I}=b;if(this.wallMode)for(const v of I)for(const T of Xb(v,E))this.addFeature(b,[T],b.index,s,u,m,f,g);else this.addFeature(b,I,b.index,s,u,m,f,g)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(r,s,u,m,f){const g=Object.keys(r).length!==0;if(g&&!this.stateDependentLayers.length)return;const b=g?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(r,s,b,u,m,f),this.groundEffect.update(r,s,b,u,m,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.wallVertexBuffer=r.createVertexBuffer(this.wallVertexArray,gz.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,_z.members,!0)),this.groundEffect.upload(r)),this.groundEffect.uploadPaintProperties(r),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.groundEffect.uploadHiddenByLandmark(r),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,mz.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,u,m,f,g,b,E){const I=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(r,{})/this.tileToMeter,v=[new vt(0,0),new vt(Dt,Dt)],T=b.projection,M=T.name==="globe",S=this.wallMode||$8[r.type]==="Polygon",P=new Qb;P.centroidDataIndex=this.centroidData.length;const R=new Jb,L=this.layers[0].paint.get("fill-extrusion-base").evaluate(r,{},m)<=0,N=this.layers[0].paint.get("fill-extrusion-height").evaluate(r,{},m);let G;if(R.height=N,R.vertexArrayOffset=this.layoutVertexArray.length,R.groundVertexArrayOffset=this.groundEffect.vertexArray.length,M&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new V7),this.wallMode){if(M)return void Br("Non zero fill-extrusion-line-width is not yet supported on globe.");if(s.length!==1)return;G=function(he){const Ae=he[0].x===he[he.length-1].x&&he[0].y===he[he.length-1].y;(function(At){let yt=0;const Kt=At.length;for(let Lt=0;Lt<Kt;Lt++)yt+=(At[(Lt+1)%Kt].x-At[Lt].x)*(At[(Lt+1)%Kt].y+At[Lt].y);return yt>=0})(he)||(he=he.reverse());const Me={geometry:[],joinNormals:[],indices:[]},Le=[],Be=[],Fe=[];let je=he.length;if(je<(Ae?3:2))return Me;for(;je>=2&&he[je-1].equals(he[je-2]);)je--;let Ye,Ue,ot,pt,et,zt=0;for(;zt<je-1&&he[zt].equals(he[zt+1]);)zt++;Ae&&(Ye=he[je-2],et=he[zt].sub(Ye)._unit()._perp());for(let At=zt;At<je;At++){if(ot=At===je-1?Ae?he[zt+1]:void 0:he[At+1],ot&&he[At].equals(ot))continue;et&&(pt=et),Ye&&(Ue=Ye),Ye=he[At],et=ot?ot.sub(Ye)._unit()._perp():pt,pt=pt||et;let yt=pt.add(et);yt.x===0&&yt.y===0||yt._unit();const Kt=yt.x*et.x+yt.y*et.y,Lt=Kt!==0?1/Kt:1/0,$t=pt.x*et.y-pt.y*et.x>0;let ar="miter";const Ar=2;ar==="miter"&&Lt>Ar&&(ar="bevel"),ar==="bevel"&&(Lt>100&&(ar="flipbevel"),Lt<Ar&&(ar="miter"));const yr=(_r,Sr,Er,on)=>{const Hr=new vt(_r.x,_r.y),lr=new vt(_r.x,_r.y);Hr.x+=Sr.x*on,Hr.y+=Sr.y*on,lr.x-=Sr.x*Math.max(Er,1),lr.y-=Sr.y*Math.max(Er,1),Fe.push(Sr),Le.push(Hr),Be.push(lr)};if(ar==="miter")yt._mult(Lt),yr(Ye,yt,0,0);else if(ar==="flipbevel")yt=et.mult(-1),yr(Ye,yt,0,0),yr(Ye,yt.mult(-1),0,0);else{const _r=-Math.sqrt(Lt*Lt-1),Sr=$t?_r:0,Er=$t?0:_r;Ue&&yr(Ye,pt,Sr,Er),ot&&yr(Ye,et,Sr,Er)}}Me.geometry=[...Le,...Be.reverse(),Le[0]],Me.joinNormals=[...Fe,...Fe.reverse(),Fe[Fe.length-1]];const Ot=Me.geometry.length-1;for(let At=0;At<Ot/2;At++)if(At+1<Ot/2){let yt=At,Kt=At+1,Lt=Ot-1-At,$t=Ot-2-At;yt=yt===0?Ot-1:yt-1,Kt=Kt===0?Ot-1:Kt-1,Lt=Lt===0?Ot-1:Lt-1,$t=$t===0?Ot-1:$t-1,Me.indices.push(Lt),Me.indices.push(Kt),Me.indices.push(yt),Me.indices.push(Lt),Me.indices.push($t),Me.indices.push(Kt)}return Me}(s[0]),s=[G.geometry]}const W=(he,Ae)=>he<(Ae.length-1)/2||he===Ae.length-1,$=this.wallMode?[s]:Lf(s,500);for(let he=$.length-1;he>=0;he--){const Ae=$[he];(Ae.length===0||(Z=Ae[0]).every(_e=>_e.x<=0)||Z.every(_e=>_e.x>=Dt)||Z.every(_e=>_e.y<=0)||Z.every(_e=>_e.y>=Dt))&&$.splice(he,1)}var Z;let Y;if(M)Y=lw($,v,m);else{Y=[];for(const he of $)Y.push({polygon:he,bounds:v})}const ce=S?this.edgeRadius:0,pe=ce>0&&this.zoom<17,ge=(he,Ae)=>{if(he.length===0)return!1;const _e=he[he.length-1];return Ae.x===_e.x&&Ae.y===_e.y};for(const{polygon:he,bounds:Ae}of Y){let _e=0,Me=0;for(const je of he)S&&!je[0].equals(je[je.length-1])&&je.push(je[0]),Me+=S?je.length-1:je.length;const Le=this.segments.prepareSegment((S?5:4)*Me,this.layoutVertexArray,this.indexArray);R.footprintSegIdx<0&&(R.footprintSegIdx=this.footprintSegments.length),R.polygonSegIdx<0&&(R.polygonSegIdx=this.polygonSegments.length);const Be={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Fe=new Kb;if(Fe.vertexOffset=this.footprintVertices.length,Fe.indexOffset=3*this.footprintIndices.length,Fe.ringIndices=[],S){const je=[],Ye=[];_e=Le.vertexLength;for(let ot=0;ot<he.length;ot++){const pt=he[ot];pt.length&&ot!==0&&Ye.push(je.length/2);const et=[];let zt,Ot;zt=pt[1].sub(pt[0])._perp()._unit(),Fe.ringIndices.push(pt.length-1);for(let At=1;At<pt.length;At++){const yt=pt[At],Kt=pt[At===pt.length-1?1:At+1],Lt=yt.clone();if(ce){Ot=Kt.sub(yt)._perp()._unit();const $t=zt.add(Ot)._unit(),ar=ce*Math.min(4,1/(zt.x*$t.x+zt.y*$t.y));Lt.x+=ar*$t.x,Lt.y+=ar*$t.y,Lt.x=Math.round(Lt.x),Lt.y=Math.round(Lt.y),zt=Ot}if(!L||ce!==0&&!pe||ge(et,Lt)||et.push(Lt),Y3(this.layoutVertexArray,Lt.x,Lt.y,0,0,1,1,0),this.wallMode){const $t=W(At,pt);K3(this.wallVertexArray,G.joinNormals[At],!$t)}Le.vertexLength++,this.footprintVertices.emplaceBack(yt.x,yt.y),je.push(yt.x,yt.y),M&&J3(this.layoutVertexExtArray,T.projectTilePoint(Lt.x,Lt.y,m),T.upVector(m,Lt.x,Lt.y))}L&&(ce===0||pe)&&(et.length!==0&&ge(et,et[0])&&et.pop(),this.groundEffect.addData(et,Ae,I))}const Ue=this.wallMode?G.indices:W3(je,Ye);for(let ot=0;ot<Ue.length;ot+=3)this.footprintIndices.emplaceBack(Fe.vertexOffset+Ue[ot+0],Fe.vertexOffset+Ue[ot+1],Fe.vertexOffset+Ue[ot+2]),this.indexArray.emplaceBack(_e+Ue[ot],_e+Ue[ot+2],_e+Ue[ot+1]),Le.primitiveLength++;Fe.indexCount+=Ue.length,Fe.vertexCount+=this.footprintVertices.length-Fe.vertexOffset}for(let je=0;je<he.length;je++){const Ye=he[je];P.startRing(R,Ye[0]);let Ue=Ye.length>4&&ow(Ye[Ye.length-2],Ye[0],Ye[1]),ot=ce?Pz(Ye[Ye.length-2],Ye[0],Ye[1],ce):0;const pt=[];let et,zt,Ot;zt=Ye[1].sub(Ye[0])._perp()._unit();let At=!0;for(let yt=1,Kt=0;yt<Ye.length;yt++){let Lt=Ye[yt-1],$t=Ye[yt];const ar=Ye[yt===Ye.length-1?1:yt+1];if(P.appendEdge(R,$t,Lt),U8($t,Lt,Ae)){ce&&(zt=ar.sub($t)._perp()._unit(),At=!At);continue}const Ar=$t.sub(Lt)._perp(),yr=Ar.x/(Math.abs(Ar.x)+Math.abs(Ar.y)),_r=Ar.y>0?1:0,Sr=Lt.dist($t);if(Kt+Sr>32768&&(Kt=0),ce){Ot=ar.sub($t)._perp()._unit();let lr=nw(Lt,$t,ar,rw(zt,Ot),ce);isNaN(lr)&&(lr=0);const $r=$t.sub(Lt)._unit();Lt=Lt.add($r.mult(ot))._round(),$t=$t.add($r.mult(-lr))._round(),ot=lr,zt=Ot,L&&this.zoom>=17&&(ge(pt,Lt)||pt.push(Lt),ge(pt,$t)||pt.push($t))}const Er=Le.vertexLength,on=Ye.length>4&&ow(Lt,$t,ar);let Hr=aw(Kt,Ue,At);if(Y3(this.layoutVertexArray,Lt.x,Lt.y,yr,_r,0,0,Hr),Y3(this.layoutVertexArray,Lt.x,Lt.y,yr,_r,0,1,Hr),this.wallMode){const lr=W(yt-1,Ye),$r=G.joinNormals[yt-1];K3(this.wallVertexArray,$r,lr),K3(this.wallVertexArray,$r,lr)}if(Kt+=Sr,Hr=aw(Kt,on,!At),Ue=on,Y3(this.layoutVertexArray,$t.x,$t.y,yr,_r,0,0,Hr),Y3(this.layoutVertexArray,$t.x,$t.y,yr,_r,0,1,Hr),this.wallMode){const lr=W(yt,Ye),$r=G.joinNormals[yt];K3(this.wallVertexArray,$r,lr),K3(this.wallVertexArray,$r,lr)}if(Le.vertexLength+=4,this.indexArray.emplaceBack(Er+0,Er+1,Er+2),this.indexArray.emplaceBack(Er+1,Er+3,Er+2),Le.primitiveLength+=2,ce){const lr=_e+(yt===1?Ye.length-2:yt-2),$r=yt===1?_e:lr+1;if(this.indexArray.emplaceBack(Er+1,lr,Er+3),this.indexArray.emplaceBack(lr,$r,Er+3),Le.primitiveLength+=2,et===void 0&&(et=Er),!U8(ar,Ye[yt],Ae)){const Ur=yt===Ye.length-1?et:Le.vertexLength;this.indexArray.emplaceBack(Er+2,Er+3,Ur),this.indexArray.emplaceBack(Er+3,Ur+1,Ur),this.indexArray.emplaceBack(Er+3,$r,Ur+1),Le.primitiveLength+=3}At=!At}if(M){const lr=this.layoutVertexExtArray,$r=T.projectTilePoint(Lt.x,Lt.y,m),Ur=T.projectTilePoint($t.x,$t.y,m),mn=T.upVector(m,Lt.x,Lt.y),Bn=T.upVector(m,$t.x,$t.y);J3(lr,$r,mn),J3(lr,$r,mn),J3(lr,Ur,Bn),J3(lr,Ur,Bn)}}S&&(_e+=Ye.length-1),L&&ce&&this.zoom>=17&&(pt.length!==0&&ge(pt,pt[0])&&pt.pop(),this.groundEffect.addData(pt,Ae,I,ce>0))}this.footprintSegments.push(Fe),Be.triangleCount=this.indexArray.length-Be.triangleArrayOffset,this.polygonSegments.push(Be),++R.footprintSegLen,++R.polygonSegLen}if(R.vertexCount=this.layoutVertexArray.length-R.vertexArrayOffset,R.groundVertexCount=this.groundEffect.vertexArray.length-R.groundVertexArrayOffset,R.vertexCount!==0){if(R.centroidXY=P.borders?Yb:this.encodeCentroid(P,R),this.centroidData.push(R),P.borders){this.featuresOnBorder.push(P);const he=this.featuresOnBorder.length-1;for(let Ae=0;Ae<P.borders.length;Ae++)P.borders[Ae][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Ae].push(he)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,g,m,E),this.groundEffect.addPaintPropertiesData(r,u,f,g,m,E),this.maxHeight=Math.max(this.maxHeight,N)}}sortBorders(){for(let r=0;r<this.borderFeatureIndices.length;r++)this.borderFeatureIndices[r].sort((s,u)=>this.featuresOnBorder[s].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}splitToSubtiles(){const r=[];for(let b=0;b<this.centroidData.length;b++){const E=this.centroidData[b],I=+(E.min.y+E.max.y>Dt),v=2*I+(+(E.min.x+E.max.x>Dt)^I);for(let T=0;T<E.polygonSegLen;T++){const M=E.polygonSegIdx+T;r.push({centroidIdx:b,subtile:v,polygonSegmentIdx:M,triangleSegmentIdx:this.polygonSegments[M].triangleSegIdx})}}const s=new Ti;r.sort((b,E)=>b.triangleSegmentIdx===E.triangleSegmentIdx?b.subtile-E.subtile:b.triangleSegmentIdx-E.triangleSegmentIdx);let u=0,m=0,f=0;for(const b of r){if(b.triangleSegmentIdx!==u)break;f++}const g=r.length;for(;m!==r.length;){u=r[m].triangleSegmentIdx;let b=0,E=m,I=m;for(let v=E;v<f&&r[v].subtile===b;v++)I++;for(;E!==f;){const v=r[E];b=v.subtile;const T=this.centroidData[v.centroidIdx].min.clone(),M=this.centroidData[v.centroidIdx].max.clone(),S={vertexOffset:this.segments.segments[u].vertexOffset,primitiveOffset:s.length,vertexLength:this.segments.segments[u].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let P=E;P<I;P++){const R=r[P],L=this.polygonSegments[R.polygonSegmentIdx],N=this.centroidData[R.centroidIdx].min,G=this.centroidData[R.centroidIdx].max,W=this.indexArray.uint16;for(let $=L.triangleArrayOffset;$<L.triangleArrayOffset+L.triangleCount;$++)s.emplaceBack(W[3*$],W[3*$+1],W[3*$+2]);S.primitiveLength+=L.triangleCount,T.x=Math.min(T.x,N.x),T.y=Math.min(T.y,N.y),M.x=Math.max(M.x,G.x),M.y=Math.max(M.y,G.y)}S.primitiveLength>0&&this.triangleSubSegments.push({segment:S,min:T,max:M}),E=I;for(let P=E;P<f&&r[P].subtile===r[E].subtile;P++)I++}m=f;for(let v=m;v<g&&r[v].triangleSegmentIdx===r[m].triangleSegmentIdx;v++)f++}s._trim(),this.indexArray=s}getVisibleSegments(r,s,u){const m=new Rn;if(this.wallMode){for(const R of this.triangleSubSegments)m.segments.push(R.segment);return m}let f=0,g=0;const b=1<<r.canonical.z;if(s){const R=s.getMinMaxForTile(r);R&&(f=R.min,g=R.max)}g+=this.maxHeight;const E=r.toUnwrapped();let I;const v=[E.canonical.x/b+E.wrap,E.canonical.y/b],T=[(E.canonical.x+1)/b+E.wrap,(E.canonical.y+1)/b],M=(R,L,N)=>[R[0]*(1-N[0])+L[0]*N[0],R[1]*(1-N[1])+L[1]*N[1]],S=[],P=[];for(const R of this.triangleSubSegments){S[0]=R.min.x/Dt,S[1]=R.min.y/Dt,P[0]=R.max.x/Dt,P[1]=R.max.y/Dt;const L=M(v,T,S),N=M(v,T,P);if(new fn([L[0],L[1],f],[N[0],N[1],g]).intersectsPrecise(u)===0){I&&(m.segments.push(I),I=void 0);continue}const G=R.segment;I&&I.vertexOffset!==G.vertexOffset&&(m.segments.push(I),I=void 0),I?(I.vertexLength+=G.vertexLength,I.primitiveLength+=G.primitiveLength):I={vertexOffset:G.vertexOffset,primitiveLength:G.primitiveLength,vertexLength:G.vertexLength,primitiveOffset:G.primitiveOffset,sortKey:void 0,vaos:{}}}return I&&m.segments.push(I),m}encodeCentroid(r,s){const u=r.centroid(),m=s.span(),f=Math.min(7,Math.round(m.x*this.tileToMeter/10)),g=Math.min(7,Math.round(m.y*this.tileToMeter/10));return new vt(mr(u.x,1,Dt-1)<<3|f,mr(u.y,1,Dt-1)<<3|g)}encodeBorderCentroid(r){if(!r.borders)return new vt(0,0);const s=r.borders,u=Number.MAX_VALUE;if(s[0][0]!==u||s[1][0]!==u){const m=s[0][0]!==u?0:1;return new vt(6|(s[0][0]!==u?0:65528),(s[m][0]+s[m][1])/2<<3|6)}{const m=s[2][0]!==u?2:3;return new vt((s[m][0]+s[m][1])/2<<3|6,6|(s[2][0]!==u?0:65528))}}showCentroid(r){const s=this.centroidData[r.centroidDataIndex];s.flags&=k1,s.centroidXY.x=0,s.centroidXY.y=0,this.writeCentroidToBuffer(s)}writeCentroidToBuffer(r){this.groundEffect.updateHiddenByLandmark(r);const s=r.vertexArrayOffset,u=r.vertexCount+r.vertexArrayOffset,m=r.flags&k1?Yb:r.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(s);if(this.centroidVertexArray.geta_centroid_pos1(s)!==m.y||f!==m.x){for(let g=s;g<u;++g)this.centroidVertexArray.emplace(g,m.x,m.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const r of this.centroidData)this.writeCentroidToBuffer(r)}updateReplacement(r,s,u){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const m=s.getReplacementRegionsForTile(r.toUnwrapped());if(N8(this.activeReplacements,m))return;if(this.activeReplacements=m,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const g of this.centroidData)g.flags&=2147483647;const f=[];for(const g of this.activeReplacements){if(g.order<u)continue;const b=Math.pow(2,g.footprintTileId.canonical.z-r.canonical.z);for(const E of this.centroidData)if(!(E.flags&k1||g.min.x>E.max.x||E.min.x>g.max.x||g.min.y>E.max.y||E.min.y>g.max.y))for(let I=0;I<E.footprintSegLen;I++){const v=this.footprintSegments[E.footprintSegIdx+I];if(f.length=0,Mz(this.footprintVertices,v.vertexOffset,v.vertexCount,g.footprintTileId.canonical,r.canonical,f),qb(g.footprint,f,this.footprintIndices.uint16,v.indexOffset,v.indexCount,-v.vertexOffset,-b)){E.flags|=k1;break}}}for(const g of this.centroidData)this.writeCentroidToBuffer(g);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(r,s,u){let m=!1;for(let f=0;f<u.footprintSegLen;f++){const g=this.footprintSegments[u.footprintSegIdx+f];let b=0;for(const E of g.ringIndices){for(let I=b,v=E+b-1;I<E+b;v=I++){const T=this.footprintVertices.int16[2*(I+g.vertexOffset)+0],M=this.footprintVertices.int16[2*(I+g.vertexOffset)+1],S=this.footprintVertices.int16[2*(v+g.vertexOffset)+1];M>s!=S>s&&r<(this.footprintVertices.int16[2*(v+g.vertexOffset)+0]-T)*(s-M)/(S-M)+T&&(m=!m)}b=E}}return m}getHeightAtTileCoord(r,s){let u=Number.NEGATIVE_INFINITY,m=!0;const f=4*(r+Dt)*Dt+(s+Dt);if(this.partLookup.hasOwnProperty(f)){const g=this.partLookup[f];return g?{height:g.height,hidden:!!(g.flags&k1)}:void 0}for(const g of this.centroidData)r>g.max.x||g.min.x>r||s>g.max.y||g.min.y>s||this.footprintContainsPoint(r,s,g)&&g&&g.height>u&&(u=g.height,this.partLookup[f]=g,m=!!(g.flags&k1));if(u!==Number.NEGATIVE_INFINITY)return{height:u,hidden:m};this.partLookup[f]=void 0}}function rw(c,r){const s=c.add(r)._unit();return c.x*s.x+c.y*s.y}function Pz(c,r,s,u){const m=r.sub(c)._perp()._unit(),f=s.sub(r)._perp()._unit();return nw(c,r,s,rw(m,f),u)}function nw(c,r,s,u,m){const f=Math.sqrt(1-u*u);return Math.min(c.dist(r)/3,r.dist(s)/3,m*f/u)}function U8(c,r,s){return c.x<s[0].x&&r.x<s[0].x||c.x>s[1].x&&r.x>s[1].x||c.y<s[0].y&&r.y<s[0].y||c.y>s[1].y&&r.y>s[1].y}function iw(c,r){return c.x<r[0].x||c.x>r[1].x||c.y<r[0].y||c.y>r[1].y}function ow(c,r,s){if(c.x<0||c.x>=Dt||r.x<0||r.x>=Dt||s.x<0||s.x>=Dt)return!1;const u=s.sub(r),m=u.perp(),f=c.sub(r);return(u.x*f.x+u.y*f.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(f.x*f.x+f.y*f.y))>-.866&&m.x*f.x+m.y*f.y<0}function aw(c,r,s){const u=r?2|c:-3&c;return s?1|u:-2&u}function sw(){const c=Math.PI/32,r=Math.tan(c),s=U;return s*Math.sqrt(1+2*r*r)-s}function lw(c,r,s){const u=1<<s.z,m=be(s.x/u),f=be((s.x+1)/u),g=xe(s.y/u),b=xe((s.y+1)/u);return function(E,I,v,T,M=0,S){const P=[];if(!E.length||!v||!T)return P;const R=(Y,ce)=>{for(const pe of Y)P.push({polygon:pe,bounds:ce})},L=Math.ceil(Math.log2(v)),N=Math.ceil(Math.log2(T)),G=L-N,W=[];for(let Y=0;Y<Math.abs(G);Y++)W.push(G>0?0:1);for(let Y=0;Y<Math.min(L,N);Y++)W.push(0),W.push(1);let $=E;if($=Bf($,I[0].y-M,I[1].y+M,1),$=Bf($,I[0].x-M,I[1].x+M,0),!$.length)return P;const Z=[];for(W.length?Z.push({polygons:$,bounds:I,depth:0}):R($,I);Z.length;){const Y=Z.pop(),ce=Y.depth,pe=W[ce],ge=Y.bounds[0],he=Y.bounds[1],Ae=pe===0?ge.x:ge.y,_e=pe===0?he.x:he.y,Me=S?S(pe,Ae,_e):.5*(Ae+_e),Le=Bf(Y.polygons,Ae-M,Me+M,pe),Be=Bf(Y.polygons,Me-M,_e+M,pe);if(Le.length){const Fe=[ge,new vt(pe===0?Me:he.x,pe===1?Me:he.y)];W.length>ce+1?Z.push({polygons:Le,bounds:Fe,depth:ce+1}):R(Le,Fe)}if(Be.length){const Fe=[new vt(pe===0?Me:ge.x,pe===1?Me:ge.y),he];W.length>ce+1?Z.push({polygons:Be,bounds:Fe,depth:ce+1}):R(Be,Fe)}}return P}(c,r,Math.ceil((f-m)/11.25),Math.ceil((g-b)/11.25),1,(E,I,v)=>{if(E===0)return .5*(I+v);{const T=xe((s.y+I/Dt)/u);return(ye(.5*(xe((s.y+v/Dt)/u)+T))*u-s.y)*Dt}})}function Mz(c,r,s,u,m,f){const g=Math.pow(2,u.z-m.z);for(let b=0;b<s;b++){let E=c.int16[2*(b+r)+0],I=c.int16[2*(b+r)+1];E=(E+m.x*Dt)*g-u.x*Dt,I=(I+m.y*Dt)*g-u.y*Dt,f.push(new vt(E,I))}}let cw,uw;function Q3(c,r){return c.x*r.x+c.y*r.y}function hw(c,r){if(c.length===1){let s=0;const u=r[s++];let m;for(;!m||u.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const f=r[s],g=c[0],b=m.sub(u),E=f.sub(u),I=g.sub(u),v=Q3(b,b),T=Q3(b,E),M=Q3(E,E),S=Q3(I,b),P=Q3(I,E),R=v*M-T*T,L=(M*S-T*P)/R,N=(v*P-T*S)/R,G=u.z*(1-L-N)+m.z*L+f.z*N;if(isFinite(G))return G}return 1/0}{let s=1/0;for(const u of r)s=Math.min(s,u.z);return s}}function fw(c,r,s,u,m,f,g,b){const E=g*m.getElevationAt(c,r,!0,!0),I=f[0]!==0,v=I?f[1]===0?g*(f[0]/7-450):g*function(T,M,S){const P=Math.floor(M[0]/8),R=Math.floor(M[1]/8),L=10*(M[0]-8*P),N=10*(M[1]-8*R),G=T.getElevationAt(P,R,!0,!0),W=T.getMeterToDEM(S),$=Math.floor(.5*(L*W-1)),Z=Math.floor(.5*(N*W-1)),Y=T.tileCoordToPixel(P,R),ce=2*$+1,pe=2*Z+1,ge=function(Be,Fe,je,Ye,Ue){return[Be.getElevationAtPixel(Fe,je,!0),Be.getElevationAtPixel(Fe+Ue,je,!0),Be.getElevationAtPixel(Fe,je+Ue,!0),Be.getElevationAtPixel(Fe+Ye,je+Ue,!0)]}(T,Y.x-$,Y.y-Z,ce,pe),he=Math.abs(ge[0]-ge[1]),Ae=Math.abs(ge[2]-ge[3]),_e=Math.abs(ge[0]-ge[2])+Math.abs(ge[1]-ge[3]),Me=Math.min(.25,.5*W*(he+Ae)/ce),Le=Math.min(.25,.5*W*_e/pe);return G+Math.max(Me*L,Le*N)}(m,f,b):E;return{base:E+(s===0)?-1:s,top:I?Math.max(v+u,E+s+2):E+u}}Ut($f,"FillExtrusionBucket",{omit:["layers","features"]}),Ut(Jb,"PartData"),Ut(Kb,"FootprintSegment"),Ut(Qb,"BorderCentroidData"),Ut(tw,"GroundEffect");const Cz=Nr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Iz=Nr([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:Oz}=Cz,Rz=Nr([{name:"a_packed",components:4,type:"Float32"}]),{members:Dz}=Rz,kz=Nr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Lz}=kz;class dw{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.image=new D1({width:r,height:s}),this.positions={},this.uploaded=!1}getDash(r,s){const u=this.getKey(r,s);return this.positions[u]}trim(){const r=this.width,s=this.height=wc(this.nextRow);this.image.resize({width:r,height:s})}getKey(r,s){return r.join(",")+s}getDashRanges(r,s,u){const m=[];let f=r.length%2==1?-r[r.length-1]*u:0,g=r[0]*u,b=!0;m.push({left:f,right:g,isDash:b,zeroLength:r[0]===0});let E=r[0];for(let I=1;I<r.length;I++){b=!b;const v=r[I];f=E*u,E+=v,g=E*u,m.push({left:f,right:g,isDash:b,zeroLength:v===0})}return m}addRoundDash(r,s,u){const m=s/2;for(let f=-u;f<=u;f++){const g=this.width*(this.nextRow+u+f);let b=0,E=r[b];for(let I=0;I<this.width;I++){I/E.right>1&&(E=r[++b]);const v=Math.abs(I-E.left),T=Math.abs(I-E.right),M=Math.min(v,T);let S;const P=f/u*(m+1);if(E.isDash){const R=m-Math.abs(P);S=Math.sqrt(M*M+R*R)}else S=m-Math.sqrt(M*M+P*P);this.image.data[g+I]=Math.max(0,Math.min(255,S+128))}}}addRegularDash(r,s){for(let E=r.length-1;E>=0;--E){const I=r[E],v=r[E+1];I.zeroLength?r.splice(E,1):v&&v.isDash===I.isDash&&(v.left=I.left,r.splice(E,1))}const u=r[0],m=r[r.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const f=this.width*this.nextRow;let g=0,b=r[g];for(let E=0;E<this.width;E++){E/b.right>1&&(b=r[++g]);const I=Math.abs(E-b.left),v=Math.abs(E-b.right),T=Math.min(I,v);this.image.data[f+E]=Math.max(0,Math.min(255,(b.isDash?T:-T)+s+128))}}addDash(r,s){const u=this.getKey(r,s);if(this.positions[u])return this.positions[u];const m=s==="round",f=m?7:0,g=2*f+1;if(this.nextRow+g>this.height)return Br("LineAtlas out of space"),null;r.length===0&&r.push(1);let b=0;for(let v=0;v<r.length;v++)r[v]<0&&(Br("Negative value is found in line dasharray, replacing values with 0"),r[v]=0),b+=r[v];if(b!==0){const v=this.width/b,T=this.getDashRanges(r,this.width,v);m?this.addRoundDash(T,v,f):this.addRegularDash(T,s==="square"?.5*v:0)}const E=this.nextRow+f;this.nextRow+=g;const I={tl:[E,f],br:[b,0]};return this.positions[u]=I,I}}Ut(dw,"LineAtlas");const zz=Q7.VectorTileFeature.types,Bz=Math.cos(Math.PI/180*37.5),Fz=Math.cos(Math.PI/180*5);class V8{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new C3,this.layoutVertexArray2=new es,this.patternVertexArray=new Rs,this.indexArray=new Ti,this.programConfigurations=new ks(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new Rn,this.maxLineLength=0,this.zOffsetVertexArray=new E1,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.tessellationStep=r.tessellationStep?r.tessellationStep:Dt/64}updateFootprints(r,s){}populate(r,s,u,m){this.hasPattern=O8("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),g=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!g.isConstant()||!!g.constantOr(0);const b=[];for(const{feature:T,id:M,index:S,sourceLayerIndex:P}of r){const R=this.layers[0]._featureFilter.needGeometry,L=Tt(T,R);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),L,u))continue;const N=f?f.evaluate(L,{},u):void 0,G={id:M,properties:T.properties,type:T.type,sourceLayerIndex:P,index:S,geometry:R?L.geometry:wt(T,u,m),patterns:{},sortKey:N};b.push(G)}f&&b.sort((T,M)=>T.sortKey-M.sortKey);const{lineAtlas:E,featureIndex:I}=s,v=this.addConstantDashes(E);for(const T of b){const{geometry:M,index:S,sourceLayerIndex:P}=T;if(v&&this.addFeatureDashes(T,E),this.hasPattern){const R=R8("line",this.layers,T,this.zoom,s);this.patternFeatures.push(R)}else this.addFeature(T,M,S,u,E.positions,s.availableImages,s.brightness);I.insert(r[S].feature,M,S,P,this.index)}}addConstantDashes(r){let s=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,f=u.layout.get("line-cap").value;if(m.kind!=="constant"||f.kind!=="constant")s=!0;else{const g=f.value,b=m.value;if(!b)continue;r.addDash(b,g)}}return s}addFeatureDashes(r,s){const u=this.zoom;for(const m of this.layers){const f=m.paint.get("line-dasharray").value,g=m.layout.get("line-cap").value;if(f.kind==="constant"&&g.kind==="constant")continue;let b,E;if(f.kind==="constant"){if(b=f.value,!b)continue}else b=f.evaluate({zoom:u},r);E=g.kind==="constant"?g.value:g.evaluate({zoom:u},r),s.addDash(b,E),r.patterns[m.id]=s.getKey(b,E)}}update(r,s,u,m,f){const g=Object.keys(r).length!==0;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(r,s,g?this.stateDependentLayers:this.layers,u,m,f)}addFeatures(r,s,u,m,f,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,s,u,m,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Dz)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=r.createVertexBuffer(this.patternVertexArray,Lz)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,Iz.members,!0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Oz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,u,m,f,g,b){const E=this.layers[0].layout,I=E.get("line-join").evaluate(r,{}),v=E.get("line-cap").evaluate(r,{}),T=E.get("line-miter-limit"),M=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const S of s)this.addLine(S,r,m,I,v,T,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,g,m,b)}addLine(r,s,u,m,f,g,b){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const E={zoom:this.zoom,lineProgress:void 0},I=this.layers[0].layout,v=m==="none";if(this.patternJoinNone=this.hasPattern&&v,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Y=0;Y<r.length-1;Y++)this.totalDistance+=r[Y].dist(r[Y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=zz[s.type]==="Polygon";let M=r.length;for(;M>=2&&r[M-1].equals(r[M-2]);)M--;let S=0;for(;S<M-1&&r[S].equals(r[S+1]);)S++;if(M<(T?3:2))return;m==="bevel"&&(g=1.05);const P=this.overscaling<=16?15*Dt/(512*this.overscaling):0,R=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let L,N,G,W,$,Z;this.e1=this.e2=-1,T&&(L=r[M-2],$=r[S].sub(L)._unit()._perp());for(let Y=S;Y<M;Y++){if(G=Y===M-1?T?r[S+1]:void 0:r[Y+1],G&&r[Y].equals(G))continue;if($&&(W=$),L&&(N=L),L=r[Y],this.hasZOffset){const Fe=I.get("line-z-offset").value;if(Fe.kind==="constant")Z=Fe.value;else{if(this.lineClips){const je=this.totalDistance/(this.lineClips.end-this.lineClips.start);E.lineProgress=(je*this.lineClips.start+this.distance+(N?N.dist(L):0))/je}else Br(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),E.lineProgress=0;Z=Fe.evaluate(E,s)}Z=Z||0}$=G?G.sub(L)._unit()._perp():W,W=W||$;const ce=N&&G;let pe=ce?m:T||v?"butt":f;const ge=W.x*$.x+W.y*$.y;if(v){const Fe=function(je){if(je.patternJoinNone){const Ye=je.segmentPoints.length/2,Ue=je.lineSoFar-je.segmentStart;for(let ot=0;ot<Ye;++ot){const pt=je.segmentPoints[2*ot+1],et=Math.round(je.segmentPoints[2*ot])+.5+.25*pt;je.patternVertexArray.emplaceBack(et,Ue,je.segmentStart),je.patternVertexArray.emplaceBack(et,Ue,je.segmentStart)}je.segmentPoints.length=0}je.e1=je.e2=-1};if(ce&&ge<Fz){this.updateDistance(N,L),this.addCurrentVertex(L,W,1,1,R,Z),Fe(this),this.addCurrentVertex(L,$,-1,-1,R,Z);continue}if(N){if(!G){this.updateDistance(N,L),this.addCurrentVertex(L,W,1,1,R,Z),Fe(this);continue}pe="miter"}}let he=W.add($);he.x===0&&he.y===0||he._unit();const Ae=he.x*$.x+he.y*$.y,_e=Ae!==0?1/Ae:1/0,Me=2*Math.sqrt(2-2*Ae),Le=Ae<Bz&&N&&G,Be=W.x*$.y-W.y*$.x>0;if(Le&&Y>S){const Fe=L.dist(N);if(Fe>2*P){const je=L.sub(L.sub(N)._mult(P/Fe)._round());this.updateDistance(N,je),this.addCurrentVertex(je,W,0,0,R,Z),N=je}}if(ce&&pe==="round"&&(_e<b?pe="miter":_e<=2&&(pe="fakeround")),pe==="miter"&&_e>g&&(pe="bevel"),pe==="bevel"&&(_e>2&&(pe="flipbevel"),_e<g&&(pe="miter")),N&&this.updateDistance(N,L),pe==="miter")he._mult(_e),this.addCurrentVertex(L,he,0,0,R,Z);else if(pe==="flipbevel"){if(_e>100)he=$.mult(-1);else{const Fe=_e*W.add($).mag()/W.sub($).mag();he._perp()._mult(Fe*(Be?-1:1))}this.addCurrentVertex(L,he,0,0,R,Z),this.addCurrentVertex(L,he.mult(-1),0,0,R,Z)}else if(pe==="bevel"||pe==="fakeround"){const Fe=-Math.sqrt(_e*_e-1),je=Be?Fe:0,Ye=Be?0:Fe;if(N&&this.addCurrentVertex(L,W,je,Ye,R,Z),pe==="fakeround"){const Ue=Math.round(180*Me/Math.PI/20);for(let ot=1;ot<Ue;ot++){let pt=ot/Ue;if(pt!==.5){const zt=pt-.5;pt+=pt*zt*(pt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*zt*zt+(.848013+ge*(.215638*ge-1.06021)))}const et=$.sub(W)._mult(pt)._add(W)._unit()._mult(Be?-1:1);this.addHalfVertex(L,et.x,et.y,!1,Be,0,R,Z)}}G&&this.addCurrentVertex(L,$,-je,-Ye,R,Z)}else pe==="butt"?this.addCurrentVertex(L,he,0,0,R,Z):pe==="square"?(N||this.addCurrentVertex(L,he,-1,-1,R,Z),this.addCurrentVertex(L,he,0,0,R,Z),N&&this.addCurrentVertex(L,he,1,1,R,Z)):pe==="round"&&(N&&(this.addCurrentVertex(L,W,0,0,R,Z),this.addCurrentVertex(L,W,1,1,R,Z,!0)),G&&(this.addCurrentVertex(L,$,-1,-1,R,Z,!0),this.addCurrentVertex(L,$,0,0,R,Z)));if(Le&&Y<M-1){const Fe=L.dist(G);if(Fe>2*P){const je=L.add(G.sub(L)._mult(P/Fe)._round());this.updateDistance(L,je),this.addCurrentVertex(je,$,0,0,R,Z),L=je}}}}addVerticesTo(r,s,u,m,f,g,b,E,I,v){const T=(s.w-r.w)/this.tessellationStep|0;if(T>1){this.lineSoFar=r.w;const M=(s.x-r.x)/T,S=(s.y-r.y)/T,P=(s.z-r.z)/T,R=(s.w-r.w)/T;for(let L=1;L<T;++L)r.x+=M,r.y+=S,r.z+=P,this.lineSoFar+=R,this.addHalfVertex(r,u,m,v,!1,b,I,r.z),this.addHalfVertex(r,f,g,v,!0,-E,I,r.z)}this.lineSoFar=s.w,this.addHalfVertex(s,u,m,v,!1,b,I,s.z),this.addHalfVertex(s,f,g,v,!0,-E,I,s.z)}addCurrentVertex(r,s,u,m,f,g,b=!1){const E=s.x+s.y*u,I=s.y-s.x*u,v=s.y*m-s.x,T=-s.y-s.x*m;if(g!=null){const S=Dt+10,P=g,R=new Nb(r.x,r.y,P,this.lineSoFar),L=pw(r,-10,S),N=this.lineSoFar;if(this.currentVertex)if(L){const G=this.currentVertexIsOutside,W=this.currentVertex,$=new Nb(r.x,r.y,P,this.lineSoFar);$b(W,$,-10,S),pw($,-10,S)||(G&&(this.e1=this.e2=-1,this.lineSoFar=W.w,this.addHalfVertex(W,E,I,b,!1,u,f,W.z),this.addHalfVertex(W,v,T,b,!0,-m,f,W.z)),this.addVerticesTo(W,$,E,I,v,T,u,m,f,b))}else{const G=this.currentVertex;this.currentVertexIsOutside&&($b(G,R,-10,S),this.e1=this.e2=-1,this.lineSoFar=G.w,this.addHalfVertex(G,E,I,b,!1,u,f,G.z),this.addHalfVertex(G,v,T,b,!0,-m,f,G.z)),this.addVerticesTo(G,R,E,I,v,T,u,m,f,b)}else L||(this.addHalfVertex(r,E,I,b,!1,u,f,g),this.addHalfVertex(r,v,T,b,!0,-m,f,g));this.currentVertex=R,this.currentVertexIsOutside=L,this.lineSoFar=N}else this.addHalfVertex(r,E,I,b,!1,u,f,g),this.addHalfVertex(r,v,T,b,!0,-m,f,g)}addHalfVertex({x:r,y:s},u,m,f,g,b,E,I){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),g||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((r<<1)+(f?1:0),(s<<1)+(g?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const v=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,v),E.primitiveLength++),g?this.e2=v:this.e1=v,I!=null&&this.zOffsetVertexArray.emplaceBack(I)}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}function pw(c,r,s){return c.x<r||c.x>s||c.y<r||c.y>s}let mw,gw;function yw(c,r,s){return r*(Dt/(c.tileSize*Math.pow(2,s-c.tileID.overscaledZ)))}function _w(c,r){return 1/yw(c,1,r.tileZoom)}function vw(c,r,s,u){return c.translatePosMatrix(u||r.tileID.projMatrix,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}Ut(V8,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const xw=c=>{const r=[];bw(c)&&r.push("RENDER_LINE_DASH"),c.paint.get("line-gradient")&&r.push("RENDER_LINE_GRADIENT");const s=c.paint.get("line-trim-offset");s[0]===0&&s[1]===0||r.push("RENDER_LINE_TRIM_OFFSET"),c.paint.get("line-border-width").constantOr(1)!==0&&r.push("RENDER_LINE_BORDER");const u=c.layout.get("line-join").constantOr("miter")==="none",m=!!c.paint.get("line-pattern").constantOr(1);return u&&m&&r.push("LINE_JOIN_NONE"),r};function bw(c){const r=c.paint.get("line-dasharray").value;return r.value||r.kind!=="constant"}let G8;const ww=()=>G8||(G8={layout:mw||(mw=new bn({"line-cap":new Xt(He.layout_line["line-cap"]),"line-join":new Xt(He.layout_line["line-join"]),"line-miter-limit":new Et(He.layout_line["line-miter-limit"]),"line-round-limit":new Et(He.layout_line["line-round-limit"]),"line-sort-key":new Xt(He.layout_line["line-sort-key"]),"line-z-offset":new Xt(He.layout_line["line-z-offset"]),visibility:new Et(He.layout_line.visibility)})),paint:gw||(gw=new bn({"line-opacity":new Xt(He.paint_line["line-opacity"]),"line-color":new Xt(He.paint_line["line-color"]),"line-translate":new Et(He.paint_line["line-translate"]),"line-translate-anchor":new Et(He.paint_line["line-translate-anchor"]),"line-width":new Xt(He.paint_line["line-width"]),"line-gap-width":new Xt(He.paint_line["line-gap-width"]),"line-offset":new Xt(He.paint_line["line-offset"]),"line-blur":new Xt(He.paint_line["line-blur"]),"line-dasharray":new Xt(He.paint_line["line-dasharray"]),"line-pattern":new Xt(He.paint_line["line-pattern"]),"line-gradient":new na(He.paint_line["line-gradient"]),"line-trim-offset":new Et(He.paint_line["line-trim-offset"]),"line-trim-fade-range":new Et(He.paint_line["line-trim-fade-range"]),"line-trim-color":new Et(He.paint_line["line-trim-color"]),"line-emissive-strength":new Et(He.paint_line["line-emissive-strength"]),"line-border-width":new Xt(He.paint_line["line-border-width"]),"line-border-color":new Xt(He.paint_line["line-border-color"]),"line-occlusion-opacity":new Et(He.paint_line["line-occlusion-opacity"])}))},G8);class Nz extends Xt{possiblyEvaluate(r,s){return s=new On(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,u,m){return s=zi({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,u,m)}}let eh;function Aw(c,r){return r>0?r+2*c:c}const jz=Nr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$z=Nr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Uz=Nr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Nr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Vz=Nr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Gz=Nr([{name:"a_texb",components:2,type:"Uint16"}]),qz=Nr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),Wz=Nr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Nr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tw=Nr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hz=Nr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Nr([{name:"triangle",components:3,type:"Uint16"}]),Nr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Nr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Nr([{type:"Float32",name:"offsetX"}]),Nr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ci=24;const os=128;function q8(c,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new On(c+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=s;let f=0;for(;f<u.length&&u[f]<=c;)f++;f=Math.max(0,f-1);let g=f;for(;g<u.length&&u[g]<c+1;)g++;g=Math.min(u.length-1,g);const b=u[f],E=u[g];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:E,minSize:s.evaluate(new On(b)),maxSize:s.evaluate(new On(E)),interpolationType:m}}}function Uf(c,{uSize:r,uSizeT:s},{lowerSize:u,upperSize:m}){return c.kind==="source"?u/os:c.kind==="composite"?nr(u/os,m/os,s):r}function e0(c,r){let s=0,u=0;if(c.kind==="constant")u=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:m,minZoom:f,maxZoom:g}=c,b=m?mr(To.interpolationFactor(m,r,f,g),0,1):0;c.kind==="camera"?u=nr(c.minSize,c.maxSize,b):s=b}return{uSizeT:s,uSize:u}}var Zz=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:os,evaluateSizeForFeature:Uf,evaluateSizeForZoom:e0,getSizeData:q8});function Xz(c,r,s){return c.sections.forEach(u=>{u.text=function(m,f,g){const b=f.layout.get("text-transform").evaluate(g,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),co.applyArabicShaping&&(m=co.applyArabicShaping(m)),m}(u.text,r,s)}),c}const th={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Yz(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function Kz(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}var Sw,W8,Ew,H8={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Jz(){return Sw||(Sw=1,H8.read=function(c,r,s,u,m){var f,g,b=8*m-u-1,E=(1<<b)-1,I=E>>1,v=-7,T=s?m-1:0,M=s?-1:1,S=c[r+T];for(T+=M,f=S&(1<<-v)-1,S>>=-v,v+=b;v>0;f=256*f+c[r+T],T+=M,v-=8);for(g=f&(1<<-v)-1,f>>=-v,v+=u;v>0;g=256*g+c[r+T],T+=M,v-=8);if(f===0)f=1-I;else{if(f===E)return g?NaN:1/0*(S?-1:1);g+=Math.pow(2,u),f-=I}return(S?-1:1)*g*Math.pow(2,f-u)},H8.write=function(c,r,s,u,m,f){var g,b,E,I=8*f-m-1,v=(1<<I)-1,T=v>>1,M=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=u?0:f-1,P=u?1:-1,R=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,g=v):(g=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-g))<1&&(g--,E*=2),(r+=g+T>=1?M/E:M*Math.pow(2,1-T))*E>=2&&(g++,E/=2),g+T>=v?(b=0,g=v):g+T>=1?(b=(r*E-1)*Math.pow(2,m),g+=T):(b=r*Math.pow(2,T-1)*Math.pow(2,m),g=0));m>=8;c[s+S]=255&b,S+=P,b/=256,m-=8);for(g=g<<m|b,I+=m;I>0;c[s+S]=255&g,S+=P,g/=256,I-=8);c[s+S-P]|=128*R}),H8}function Pw(){if(Ew)return W8;Ew=1,W8=r;var c=Jz();function r($){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView($)?$:new Uint8Array($||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var s=4294967296,u=1/s,m=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f($){return $.type===r.Bytes?$.readVarint()+$.pos:$.pos+1}function g($,Z,Y){return Y?4294967296*Z+($>>>0):4294967296*(Z>>>0)+($>>>0)}function b($,Z,Y){var ce=Z<=16383?1:Z<=2097151?2:Z<=268435455?3:Math.floor(Math.log(Z)/(7*Math.LN2));Y.realloc(ce);for(var pe=Y.pos-1;pe>=$;pe--)Y.buf[pe+ce]=Y.buf[pe]}function E($,Z){for(var Y=0;Y<$.length;Y++)Z.writeVarint($[Y])}function I($,Z){for(var Y=0;Y<$.length;Y++)Z.writeSVarint($[Y])}function v($,Z){for(var Y=0;Y<$.length;Y++)Z.writeFloat($[Y])}function T($,Z){for(var Y=0;Y<$.length;Y++)Z.writeDouble($[Y])}function M($,Z){for(var Y=0;Y<$.length;Y++)Z.writeBoolean($[Y])}function S($,Z){for(var Y=0;Y<$.length;Y++)Z.writeFixed32($[Y])}function P($,Z){for(var Y=0;Y<$.length;Y++)Z.writeSFixed32($[Y])}function R($,Z){for(var Y=0;Y<$.length;Y++)Z.writeFixed64($[Y])}function L($,Z){for(var Y=0;Y<$.length;Y++)Z.writeSFixed64($[Y])}function N($,Z){return($[Z]|$[Z+1]<<8|$[Z+2]<<16)+16777216*$[Z+3]}function G($,Z,Y){$[Y]=Z,$[Y+1]=Z>>>8,$[Y+2]=Z>>>16,$[Y+3]=Z>>>24}function W($,Z){return($[Z]|$[Z+1]<<8|$[Z+2]<<16)+($[Z+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function($,Z,Y){for(Y=Y||this.length;this.pos<Y;){var ce=this.readVarint(),pe=ce>>3,ge=this.pos;this.type=7&ce,$(pe,Z,this),this.pos===ge&&this.skip(ce)}return Z},readMessage:function($,Z){return this.readFields($,Z,this.readVarint()+this.pos)},readFixed32:function(){var $=N(this.buf,this.pos);return this.pos+=4,$},readSFixed32:function(){var $=W(this.buf,this.pos);return this.pos+=4,$},readFixed64:function(){var $=N(this.buf,this.pos)+N(this.buf,this.pos+4)*s;return this.pos+=8,$},readSFixed64:function(){var $=N(this.buf,this.pos)+W(this.buf,this.pos+4)*s;return this.pos+=8,$},readFloat:function(){var $=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,$},readDouble:function(){var $=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,$},readVarint:function($){var Z,Y,ce=this.buf;return Z=127&(Y=ce[this.pos++]),Y<128?Z:(Z|=(127&(Y=ce[this.pos++]))<<7,Y<128?Z:(Z|=(127&(Y=ce[this.pos++]))<<14,Y<128?Z:(Z|=(127&(Y=ce[this.pos++]))<<21,Y<128?Z:function(pe,ge,he){var Ae,_e,Me=he.buf;if(Ae=(112&(_e=Me[he.pos++]))>>4,_e<128||(Ae|=(127&(_e=Me[he.pos++]))<<3,_e<128)||(Ae|=(127&(_e=Me[he.pos++]))<<10,_e<128)||(Ae|=(127&(_e=Me[he.pos++]))<<17,_e<128)||(Ae|=(127&(_e=Me[he.pos++]))<<24,_e<128)||(Ae|=(1&(_e=Me[he.pos++]))<<31,_e<128))return g(pe,Ae,ge);throw new Error("Expected varint not more than 10 bytes")}(Z|=(15&(Y=ce[this.pos]))<<28,$,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var $=this.readVarint();return $%2==1?($+1)/-2:$/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var $=this.readVarint()+this.pos,Z=this.pos;return this.pos=$,$-Z>=12&&m?function(Y,ce,pe){return m.decode(Y.subarray(ce,pe))}(this.buf,Z,$):function(Y,ce,pe){for(var ge="",he=ce;he<pe;){var Ae,_e,Me,Le=Y[he],Be=null,Fe=Le>239?4:Le>223?3:Le>191?2:1;if(he+Fe>pe)break;Fe===1?Le<128&&(Be=Le):Fe===2?(192&(Ae=Y[he+1]))==128&&(Be=(31&Le)<<6|63&Ae)<=127&&(Be=null):Fe===3?(_e=Y[he+2],(192&(Ae=Y[he+1]))==128&&(192&_e)==128&&((Be=(15&Le)<<12|(63&Ae)<<6|63&_e)<=2047||Be>=55296&&Be<=57343)&&(Be=null)):Fe===4&&(_e=Y[he+2],Me=Y[he+3],(192&(Ae=Y[he+1]))==128&&(192&_e)==128&&(192&Me)==128&&((Be=(15&Le)<<18|(63&Ae)<<12|(63&_e)<<6|63&Me)<=65535||Be>=1114112)&&(Be=null)),Be===null?(Be=65533,Fe=1):Be>65535&&(Be-=65536,ge+=String.fromCharCode(Be>>>10&1023|55296),Be=56320|1023&Be),ge+=String.fromCharCode(Be),he+=Fe}return ge}(this.buf,Z,$)},readBytes:function(){var $=this.readVarint()+this.pos,Z=this.buf.subarray(this.pos,$);return this.pos=$,Z},readPackedVarint:function($,Z){if(this.type!==r.Bytes)return $.push(this.readVarint(Z));var Y=f(this);for($=$||[];this.pos<Y;)$.push(this.readVarint(Z));return $},readPackedSVarint:function($){if(this.type!==r.Bytes)return $.push(this.readSVarint());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readSVarint());return $},readPackedBoolean:function($){if(this.type!==r.Bytes)return $.push(this.readBoolean());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readBoolean());return $},readPackedFloat:function($){if(this.type!==r.Bytes)return $.push(this.readFloat());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readFloat());return $},readPackedDouble:function($){if(this.type!==r.Bytes)return $.push(this.readDouble());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readDouble());return $},readPackedFixed32:function($){if(this.type!==r.Bytes)return $.push(this.readFixed32());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readFixed32());return $},readPackedSFixed32:function($){if(this.type!==r.Bytes)return $.push(this.readSFixed32());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readSFixed32());return $},readPackedFixed64:function($){if(this.type!==r.Bytes)return $.push(this.readFixed64());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readFixed64());return $},readPackedSFixed64:function($){if(this.type!==r.Bytes)return $.push(this.readSFixed64());var Z=f(this);for($=$||[];this.pos<Z;)$.push(this.readSFixed64());return $},skip:function($){var Z=7&$;if(Z===r.Varint)for(;this.buf[this.pos++]>127;);else if(Z===r.Bytes)this.pos=this.readVarint()+this.pos;else if(Z===r.Fixed32)this.pos+=4;else{if(Z!==r.Fixed64)throw new Error("Unimplemented type: "+Z);this.pos+=8}},writeTag:function($,Z){this.writeVarint($<<3|Z)},realloc:function($){for(var Z=this.length||16;Z<this.pos+$;)Z*=2;if(Z!==this.length){var Y=new Uint8Array(Z);Y.set(this.buf),this.buf=Y,this.length=Z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function($){this.realloc(4),G(this.buf,$,this.pos),this.pos+=4},writeSFixed32:function($){this.realloc(4),G(this.buf,$,this.pos),this.pos+=4},writeFixed64:function($){this.realloc(8),G(this.buf,-1&$,this.pos),G(this.buf,Math.floor($*u),this.pos+4),this.pos+=8},writeSFixed64:function($){this.realloc(8),G(this.buf,-1&$,this.pos),G(this.buf,Math.floor($*u),this.pos+4),this.pos+=8},writeVarint:function($){($=+$||0)>268435455||$<0?function(Z,Y){var ce,pe;if(Z>=0?(ce=Z%4294967296|0,pe=Z/4294967296|0):(pe=~(-Z/4294967296),4294967295^(ce=~(-Z%4294967296))?ce=ce+1|0:(ce=0,pe=pe+1|0)),Z>=18446744073709552e3||Z<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(ge,he,Ae){Ae.buf[Ae.pos++]=127&ge|128,ge>>>=7,Ae.buf[Ae.pos++]=127&ge|128,ge>>>=7,Ae.buf[Ae.pos++]=127&ge|128,ge>>>=7,Ae.buf[Ae.pos++]=127&ge|128,Ae.buf[Ae.pos]=127&(ge>>>=7)}(ce,0,Y),function(ge,he){var Ae=(7&ge)<<4;he.buf[he.pos++]|=Ae|((ge>>>=3)?128:0),ge&&(he.buf[he.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(he.buf[he.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(he.buf[he.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(he.buf[he.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(he.buf[he.pos++]=127&ge)))))}(pe,Y)}($,this):(this.realloc(4),this.buf[this.pos++]=127&$|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=$>>>7&127))))},writeSVarint:function($){this.writeVarint($<0?2*-$-1:2*$)},writeBoolean:function($){this.writeVarint(!!$)},writeString:function($){$=String($),this.realloc(4*$.length),this.pos++;var Z=this.pos;this.pos=function(ce,pe,ge){for(var he,Ae,_e=0;_e<pe.length;_e++){if((he=pe.charCodeAt(_e))>55295&&he<57344){if(!Ae){he>56319||_e+1===pe.length?(ce[ge++]=239,ce[ge++]=191,ce[ge++]=189):Ae=he;continue}if(he<56320){ce[ge++]=239,ce[ge++]=191,ce[ge++]=189,Ae=he;continue}he=Ae-55296<<10|he-56320|65536,Ae=null}else Ae&&(ce[ge++]=239,ce[ge++]=191,ce[ge++]=189,Ae=null);he<128?ce[ge++]=he:(he<2048?ce[ge++]=he>>6|192:(he<65536?ce[ge++]=he>>12|224:(ce[ge++]=he>>18|240,ce[ge++]=he>>12&63|128),ce[ge++]=he>>6&63|128),ce[ge++]=63&he|128)}return ge}(this.buf,$,this.pos);var Y=this.pos-Z;Y>=128&&b(Z,Y,this),this.pos=Z-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function($){this.realloc(4),c.write(this.buf,$,this.pos,!0,23,4),this.pos+=4},writeDouble:function($){this.realloc(8),c.write(this.buf,$,this.pos,!0,52,8),this.pos+=8},writeBytes:function($){var Z=$.length;this.writeVarint(Z),this.realloc(Z);for(var Y=0;Y<Z;Y++)this.buf[this.pos++]=$[Y]},writeRawMessage:function($,Z){this.pos++;var Y=this.pos;$(Z,this);var ce=this.pos-Y;ce>=128&&b(Y,ce,this),this.pos=Y-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function($,Z,Y){this.writeTag($,r.Bytes),this.writeRawMessage(Z,Y)},writePackedVarint:function($,Z){Z.length&&this.writeMessage($,E,Z)},writePackedSVarint:function($,Z){Z.length&&this.writeMessage($,I,Z)},writePackedBoolean:function($,Z){Z.length&&this.writeMessage($,M,Z)},writePackedFloat:function($,Z){Z.length&&this.writeMessage($,v,Z)},writePackedDouble:function($,Z){Z.length&&this.writeMessage($,T,Z)},writePackedFixed32:function($,Z){Z.length&&this.writeMessage($,S,Z)},writePackedSFixed32:function($,Z){Z.length&&this.writeMessage($,P,Z)},writePackedFixed64:function($,Z){Z.length&&this.writeMessage($,R,Z)},writePackedSFixed64:function($,Z){Z.length&&this.writeMessage($,L,Z)},writeBytesField:function($,Z){this.writeTag($,r.Bytes),this.writeBytes(Z)},writeFixed32Field:function($,Z){this.writeTag($,r.Fixed32),this.writeFixed32(Z)},writeSFixed32Field:function($,Z){this.writeTag($,r.Fixed32),this.writeSFixed32(Z)},writeFixed64Field:function($,Z){this.writeTag($,r.Fixed64),this.writeFixed64(Z)},writeSFixed64Field:function($,Z){this.writeTag($,r.Fixed64),this.writeSFixed64(Z)},writeVarintField:function($,Z){this.writeTag($,r.Varint),this.writeVarint(Z)},writeSVarintField:function($,Z){this.writeTag($,r.Varint),this.writeSVarint(Z)},writeStringField:function($,Z){this.writeTag($,r.Bytes),this.writeString(Z)},writeFloatField:function($,Z){this.writeTag($,r.Fixed32),this.writeFloat(Z)},writeDoubleField:function($,Z){this.writeTag($,r.Fixed64),this.writeDouble(Z)},writeBooleanField:function($,Z){this.writeVarintField($,!!Z)}},W8}var Vf=D(Pw());const Z8=3;function Qz(c,r,s){r.glyphs=[],c===1&&s.readMessage(eB,r)}function eB(c,r,s){if(c===3){const{id:u,bitmap:m,width:f,height:g,left:b,top:E,advance:I}=s.readMessage(tB,{});r.glyphs.push({id:u,bitmap:new D1({width:f+2*Z8,height:g+2*Z8},m),metrics:{width:f,height:g,left:b,top:E,advance:I}})}else c===4?r.ascender=s.readSVarint():c===5&&(r.descender=s.readSVarint())}function tB(c,r,s){c===1?r.id=s.readVarint():c===2?r.bitmap=s.readBytes():c===3?r.width=s.readVarint():c===4?r.height=s.readVarint():c===5?r.left=s.readSVarint():c===6?r.top=s.readSVarint():c===7&&(r.advance=s.readVarint())}const Mw=Z8,aa={horizontal:1,vertical:2,horizontalOnly:3};class rh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const u=new rh;return u.scale=r||1,u.fontStack=s,u}static forImage(r){const s=new rh;return s.imageName=r,s}}class t0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const u=new t0;for(let m=0;m<r.sections.length;m++){const f=r.sections[m];f.image?u.addImageSection(f):u.addTextSection(f,s)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCodePoint(r){return this.text.codePointAt(r)}verticalizePunctuation(r){this.text=function(s,u){let m="";for(let f=0;f<s.length;f++){const g=s.charCodeAt(f+1)||null,b=s.charCodeAt(f-1)||null;m+=!u&&(g&&qc(g)&&!th[s[f+1]]||b&&qc(b)&&!th[s[f-1]])||!th[s[f]]?s[f]:th[s[f]]}return m}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&Gf[this.text.charCodeAt(u)];u++)r++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&Gf[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const u=new t0;return u.text=this.text.substring(r,s),u.sectionIndex=this.sectionIndex.slice(r,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(rh.forText(r.scale,r.fontStack||s));const u=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(u)}addImageSection(r){const s=r.image?r.image.namePrimary:"";if(s.length===0)return void Br("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCodePoint(u),this.sections.push(rh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Br("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function X8(c,r,s,u,m,f,g,b,E,I,v,T,M,S,P){const R=t0.fromFeature(c,m);T===aa.vertical&&R.verticalizePunctuation(M);let L=[];const N=function(Y,ce,pe,ge,he,Ae){if(!Y)return[];const _e=[],Me=function(je,Ye,Ue,ot,pt,et){let zt=0;for(let Ot=0;Ot<je.length();Ot++){const At=je.getSection(Ot);zt+=Cw(je.getCodePoint(Ot),At,ot,pt,Ye,et)}return zt/Math.max(1,Math.ceil(zt/Ue))}(Y,ce,pe,ge,he,Ae),Le=Y.text.indexOf("")>=0;let Be=0;for(let je=0;je<Y.length();je++){const Ye=Y.getSection(je),Ue=Y.getCodePoint(je);if(Gf[Ue]||(Be+=Cw(Ue,Ye,ge,he,ce,Ae)),je<Y.length()-1){const ot=!((Fe=Ue)<11904||!(Zt["Bopomofo Extended"](Fe)||Zt.Bopomofo(Fe)||Zt["CJK Compatibility Forms"](Fe)||Zt["CJK Compatibility Ideographs"](Fe)||Zt["CJK Compatibility"](Fe)||Zt["CJK Radicals Supplement"](Fe)||Zt["CJK Strokes"](Fe)||Zt["CJK Symbols and Punctuation"](Fe)||Zt["CJK Unified Ideographs Extension A"](Fe)||Zt["CJK Unified Ideographs"](Fe)||Zt["Enclosed CJK Letters and Months"](Fe)||Zt["Halfwidth and Fullwidth Forms"](Fe)||Zt.Hiragana(Fe)||Zt["Ideographic Description Characters"](Fe)||Zt["Kangxi Radicals"](Fe)||Zt["Katakana Phonetic Extensions"](Fe)||Zt.Katakana(Fe)||Zt["Vertical Forms"](Fe)||Zt["Yi Radicals"](Fe)||Zt["Yi Syllables"](Fe)));(rB[Ue]||ot||Ye.imageName)&&_e.push(Ow(je+1,Be,Me,_e,nB(Ue,Y.getCodePoint(je+1),ot&&Le),!1))}}var Fe;return Rw(Ow(Y.length(),Be,Me,_e,0,!0))}(R,I,f,r,u,S),{processBidirectionalText:G,processStyledBidirectionalText:W}=co;if(G&&R.sections.length===1){const Y=G(R.toString(),N);for(const ce of Y){const pe=new t0;pe.text=ce,pe.sections=R.sections;for(let ge=0;ge<ce.length;ge++)pe.sectionIndex.push(0);L.push(pe)}}else if(W){const Y=W(R.text,R.sectionIndex,N);for(const ce of Y){const pe=new t0;pe.text=ce[0],pe.sectionIndex=ce[1],pe.sections=R.sections,L.push(pe)}}else L=function(Y,ce){const pe=[],ge=Y.text;let he=0;for(const Ae of ce)pe.push(Y.substring(he,Ae)),he=Ae;return he<ge.length&&pe.push(Y.substring(he,ge.length)),pe}(R,N);const $=[],Z={positionedLines:$,text:R.toString(),top:v[1],bottom:v[1],left:v[0],right:v[0],writingMode:T,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Y,ce,pe,ge,he,Ae,_e,Me,Le,Be,Fe,je){let Ye=0,Ue=0,ot=0;const pt=Me==="right"?1:Me==="left"?0:.5;let et=!1;for(const Lt of he){const $t=Lt.getSections();for(const ar of $t){if(ar.imageName)continue;const Ar=ce[ar.fontStack];if(Ar&&(et=Ar.ascender!==void 0&&Ar.descender!==void 0,!et))break}if(!et)break}let zt=0;for(const Lt of he){Lt.trim();const $t=Lt.getMaxScale(),ar=($t-1)*Ci,Ar={positionedGlyphs:[],lineOffset:0};Y.positionedLines[zt]=Ar;const yr=Ar.positionedGlyphs;let _r=0;if(!Lt.length()){Ue+=Ae,++zt;continue}let Sr=0,Er=0;for(let Hr=0;Hr<Lt.length();Hr++){const lr=Lt.getSection(Hr),$r=Lt.getSectionIndex(Hr),Ur=Lt.getCodePoint(Hr);let mn=lr.scale,Bn=null,Xn=null,Fn=null,En=Ci,xi=0;const ti=!(Le===aa.horizontal||!Fe&&!k7(Ur)||Fe&&(Gf[Ur]||(Ot=Ur,Zt.Arabic(Ot)||Zt["Arabic Supplement"](Ot)||Zt["Arabic Extended-A"](Ot)||Zt["Arabic Presentation Forms-A"](Ot)||Zt["Arabic Presentation Forms-B"](Ot))));if(lr.imageName){const Ii=ge[lr.imageName];if(!Ii)continue;Fn=lr.imageName,Y.iconsInText=Y.iconsInText||!0,Xn=Ii.paddedRect;const dn=Ii.displaySize;mn=mn*Ci/je,Bn={width:dn[0],height:dn[1],left:0,top:-Mw,advance:ti?dn[1]:dn[0],localGlyph:!1},xi=et?-Bn.height*mn:$t*Ci-17-dn[1]*mn,En=Bn.advance;const Po=(ti?dn[0]:dn[1])*mn-Ci*$t;Po>0&&Po>_r&&(_r=Po)}else{const Ii=pe[lr.fontStack];if(!Ii)continue;Ii[Ur]&&(Xn=Ii[Ur]);const dn=ce[lr.fontStack];if(!dn)continue;const Po=dn.glyphs[Ur];if(!Po)continue;if(Bn=Po.metrics,En=Ur!==8203?Ci:0,et){const us=dn.ascender!==void 0?Math.abs(dn.ascender):0,Ca=dn.descender!==void 0?Math.abs(dn.descender):0,Ia=(us+Ca)*mn;Sr<Ia&&(Sr=Ia,Er=(us-Ca)/2*mn),xi=-us*mn}else xi=($t-mn)*Ci-17}ti?(Y.verticalizable=!0,yr.push({glyph:Ur,imageName:Fn,x:Ye,y:Ue+xi,vertical:ti,scale:mn,localGlyph:Bn.localGlyph,fontStack:lr.fontStack,sectionIndex:$r,metrics:Bn,rect:Xn}),Ye+=En*mn+Be):(yr.push({glyph:Ur,imageName:Fn,x:Ye,y:Ue+xi,vertical:ti,scale:mn,localGlyph:Bn.localGlyph,fontStack:lr.fontStack,sectionIndex:$r,metrics:Bn,rect:Xn}),Ye+=Bn.advance*mn+Be)}yr.length!==0&&(ot=Math.max(Ye-Be,ot),et?Dw(yr,pt,_r,Er,Ae*$t/2):Dw(yr,pt,_r,0,Ae/2)),Ye=0;const on=Ae*$t+_r;Ar.lineOffset=Math.max(_r,ar),Ue+=on,++zt}var Ot;const At=Ue,{horizontalAlign:yt,verticalAlign:Kt}=Y8(_e);(function(Lt,$t,ar,Ar,yr,_r){const Sr=($t-ar)*yr,Er=-_r*Ar;for(const on of Lt)for(const Hr of on.positionedGlyphs)Hr.x+=Sr,Hr.y+=Er})(Y.positionedLines,pt,yt,Kt,ot,At),Y.top+=-Kt*At,Y.bottom=Y.top+At,Y.left+=-yt*ot,Y.right=Y.left+ot,Y.hasBaseline=et}(Z,r,s,u,L,g,b,E,T,I,M,P),!function(Y){for(const ce of Y)if(ce.positionedGlyphs.length!==0)return!1;return!0}($)&&Z}const Gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rB={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Cw(c,r,s,u,m,f){if(r.imageName){const g=u[r.imageName];return g?g.displaySize[0]*r.scale*Ci/f+m:0}{const g=s[r.fontStack],b=g&&g.glyphs[c];return b?b.metrics.advance*r.scale+m:0}}function Iw(c,r,s,u){const m=Math.pow(c-r,2);return u?c<r?m/2:2*m:m+Math.abs(s)*s}function nB(c,r,s){let u=0;return c===10&&(u-=1e4),s&&(u+=150),c!==40&&c!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function Ow(c,r,s,u,m,f){let g=null,b=Iw(r,s,m,f);for(const E of u){const I=Iw(r-E.x,s,m,f)+E.badness;I<=b&&(g=E,b=I)}return{index:c,x:r,priorBreak:g,badness:b}}function Rw(c){return c?Rw(c.priorBreak).concat(c.index):[]}function Y8(c){let r=.5,s=.5;switch(c){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function Dw(c,r,s,u,m){if(!(r||s||u||m))return;const f=c.length-1,g=c[f],b=(g.x+g.metrics.advance*g.scale)*r;for(let E=0;E<=f;E++)c[E].x-=b,c[E].y+=s+u+m}function iB(c,r,s,u){const{horizontalAlign:m,verticalAlign:f}=Y8(u),g=s[0]-c.displaySize[0]*m,b=s[1]-c.displaySize[1]*f;return{imagePrimary:c,imageSecondary:r,top:b,bottom:b+c.displaySize[1],left:g,right:g+c.displaySize[0]}}function kw(c,r,s,u,m,f){const g=c.imagePrimary;let b;if(g.content){const L=g.content,N=g.pixelRatio||1;b=[L[0]/N,L[1]/N,g.displaySize[0]-L[2]/N,g.displaySize[1]-L[3]/N]}const E=r.left*f,I=r.right*f;let v,T,M,S;s==="width"||s==="both"?(S=m[0]+E-u[3],T=m[0]+I+u[1]):(S=m[0]+(E+I-g.displaySize[0])/2,T=S+g.displaySize[0]);const P=r.top*f,R=r.bottom*f;return s==="height"||s==="both"?(v=m[1]+P-u[0],M=m[1]+R+u[2]):(v=m[1]+(P+R-g.displaySize[1])/2,M=v+g.displaySize[1]),{imagePrimary:g,imageSecondary:void 0,top:v,right:T,bottom:M,left:S,collisionPadding:b}}class gl extends vt{constructor(r,s,u,m,f){super(r,s),this.angle=m,this.z=u,f!==void 0&&(this.segment=f)}clone(){return new gl(this.x,this.y,this.z,this.angle,this.segment)}}function Lw(c,r,s,u,m){if(r.segment===void 0)return!0;let f=r,g=r.segment+1,b=0;for(;b>-s/2;){if(g--,g<0)return!1;b-=c[g].dist(f),f=c[g]}b+=c[g].dist(c[g+1]),g++;const E=[];let I=0;for(;b<s/2;){const v=c[g],T=c[g+1];if(!T)return!1;let M=c[g-1].angleTo(v)-v.angleTo(T);for(M=Math.abs((M+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:M}),I+=M;b-E[0].distance>u;)I-=E.shift().angleDelta;if(I>m)return!1;g++,b+=v.dist(T)}return!0}function zw(c){let r=0;for(let s=0;s<c.length-1;s++)r+=c[s].dist(c[s+1]);return r}function Bw(c,r,s){return c?.6*r*s:0}function Fw(c,r){return Math.max(c?c.right-c.left:0,r?r.right-r.left:0)}function oB(c,r,s,u,m,f){const g=Bw(s,m,f),b=Fw(s,u)*f;let E=0;const I=zw(c)/2;for(let v=0;v<c.length-1;v++){const T=c[v],M=c[v+1],S=T.dist(M);if(E+S>I){const P=(I-E)/S,R=nr(T.x,M.x,P),L=nr(T.y,M.y,P),N=new gl(R,L,0,M.angleTo(T),v);return!g||Lw(c,N,b,g,r)?N:void 0}E+=S}}function aB(c,r,s,u,m,f,g,b,E){const I=Bw(u,f,g),v=Fw(u,m),T=v*g,M=c[0].x===0||c[0].x===E||c[0].y===0||c[0].y===E;return r-T<r/4&&(r=T+r/4),Nw(c,M?r/2*b%r:(v/2+2*f)*g*b%r,r,I,s,T,M,!1,E)}function Nw(c,r,s,u,m,f,g,b,E){const I=f/2,v=zw(c);let T=0,M=r-s,S=[];for(let P=0;P<c.length-1;P++){const R=c[P],L=c[P+1],N=R.dist(L),G=L.angleTo(R);for(;M+s<T+N;){M+=s;const W=(M-T)/N,$=nr(R.x,L.x,W),Z=nr(R.y,L.y,W);if($>=0&&$<E&&Z>=0&&Z<E&&M-I>=0&&M+I<=v){const Y=new gl($,Z,0,G,P);u&&!Lw(c,Y,f,u,m)||S.push(Y)}}T+=N}return b||S.length||g||(S=Nw(c,T/2,s,u,m,f,g,!0,E)),S}function jw(c,r,s,u,m){const f=[];for(let g=0;g<c.length;g++){const b=c[g];let E;for(let I=0;I<b.length-1;I++){let v=b[I],T=b[I+1];v.x<r&&T.x<r||(v.x<r?v=new vt(r,v.y+(r-v.x)/(T.x-v.x)*(T.y-v.y))._round():T.x<r&&(T=new vt(r,v.y+(r-v.x)/(T.x-v.x)*(T.y-v.y))._round()),v.y<s&&T.y<s||(v.y<s?v=new vt(v.x+(s-v.y)/(T.y-v.y)*(T.x-v.x),s)._round():T.y<s&&(T=new vt(v.x+(s-v.y)/(T.y-v.y)*(T.x-v.x),s)._round()),v.x>=u&&T.x>=u||(v.x>=u?v=new vt(u,v.y+(u-v.x)/(T.x-v.x)*(T.y-v.y))._round():T.x>=u&&(T=new vt(u,v.y+(u-v.x)/(T.x-v.x)*(T.y-v.y))._round()),v.y>=m&&T.y>=m||(v.y>=m?v=new vt(v.x+(m-v.y)/(T.y-v.y)*(T.x-v.x),m)._round():T.y>=m&&(T=new vt(v.x+(m-v.y)/(T.y-v.y)*(T.x-v.x),m)._round()),E&&v.equals(E[E.length-1])||(E=[v],f.push(E)),E.push(T)))))}}return f}function $w(c){let r=0,s=0;for(const g of c)r+=g.w*g.h,s=Math.max(s,g.w);c.sort((g,b)=>b.h-g.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,f=0;for(const g of c)for(let b=u.length-1;b>=0;b--){const E=u[b];if(!(g.w>E.w||g.h>E.h)){if(g.x=E.x,g.y=E.y,f=Math.max(f,g.y+g.h),m=Math.max(m,g.x+g.w),g.w===E.w&&g.h===E.h){const I=u.pop();b<u.length&&(u[b]=I)}else g.h===E.h?(E.x+=g.w,E.w-=g.w):g.w===E.w?(E.y+=g.h,E.h-=g.h):(u.push({x:E.x+g.w,y:E.y,w:E.w-g.w,h:g.h}),E.y+=g.h,E.h-=g.h);break}}return{w:m,h:f,fill:r/(m*f)||0}}Ut(gl,"Anchor");const nh=1;class K8{constructor(r,{pixelRatio:s,version:u,stretchX:m,stretchY:f,content:g},b){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=f,this.content=g,this.version=u,this.padding=b}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class Uw{constructor(r,s,u){const m={},f={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,m,nh,g),this.addImages(s,f,2,g);const{w:b,h:E}=$w(g),I=new Qi({width:b||1,height:E||1});for(const v in r){const T=r[v],M=m[v].paddedRect;Qi.copy(T.data,I,{x:0,y:0},{x:M.x+nh,y:M.y+nh},T.data,u,T.sdf)}for(const v in s){const T=s[v],M=f[v].paddedRect;let S=f[v].padding;const P=M.x+S,R=M.y+S,L=T.data.width,N=T.data.height;S=S>1?S-1:S,Qi.copy(T.data,I,{x:0,y:0},{x:P,y:R},T.data,u),Qi.copy(T.data,I,{x:0,y:N-S},{x:P,y:R-S},{width:L,height:S},u),Qi.copy(T.data,I,{x:0,y:0},{x:P,y:R+N},{width:L,height:S},u),Qi.copy(T.data,I,{x:L-S,y:0},{x:P-S,y:R},{width:S,height:N},u),Qi.copy(T.data,I,{x:0,y:0},{x:P+L,y:R},{width:S,height:N},u),Qi.copy(T.data,I,{x:L-S,y:N-S},{x:P-S,y:R-S},{width:S,height:S},u),Qi.copy(T.data,I,{x:0,y:N-S},{x:P+L,y:R-S},{width:S,height:S},u),Qi.copy(T.data,I,{x:0,y:0},{x:P+L,y:R+N},{width:S,height:S},u),Qi.copy(T.data,I,{x:L-S,y:0},{x:P-S,y:R+N},{width:S,height:S},u)}this.image=I,this.iconPositions=m,this.patternPositions=f}addImages(r,s,u,m){for(const f in r){const g=r[f],b={x:0,y:0,w:g.data.width+2*u,h:g.data.height+2*u};m.push(b),s[f]=new K8(b,g,u),g.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(r,s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(m=>r.hasImage(m,u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks,u);for(const m in r.getUpdatedImages(u))this.patchUpdatedImage(this.iconPositions[m],r.getImage(m,u),s),this.patchUpdatedImage(this.patternPositions[m],r.getImage(m,u),s)}patchUpdatedImage(r,s,u){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,f]=r.tl;u.update(s.data,{position:{x:m,y:f}})}}Ut(K8,"ImagePosition"),Ut(Uw,"ImageAtlas");const ih=1e20;function Vw(c,r,s,u,m,f,g,b,E){for(let I=r;I<r+u;I++)Gw(c,s*f+I,f,m,g,b,E);for(let I=s;I<s+m;I++)Gw(c,I*f+r,1,u,g,b,E)}function Gw(c,r,s,u,m,f,g){f[0]=0,g[0]=-ih,g[1]=ih,m[0]=c[r];for(let b=1,E=0,I=0;b<u;b++){m[b]=c[r+b*s];const v=b*b;do{const T=f[E];I=(m[b]-m[T]+v-T*T)/(b-T)/2}while(I<=g[E]&&--E>-1);E++,f[E]=b,g[E]=I,g[E+1]=ih}for(let b=0,E=0;b<u;b++){for(;g[E+1]<b;)E++;const I=f[E],v=b-I;c[r+b*s]=m[I]+v*v}}const as=2,J8={none:0,ideographs:1,all:2};class r0{constructor(r,s,u){this.requestManager=r,this.localGlyphMode=s,this.localFontFamily=u,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r,s){this.urls[s]=r}getGlyphs(r,s,u){const m=[],f=this.urls[s]||De.GLYPHS_URL;for(const g in r)for(const b of r[g])m.push({stack:g,id:b});Ks(m,({stack:g,id:b},E)=>{let I=this.entries[g];I||(I=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let v=I.glyphs[b];if(v!==void 0)return void E(null,{stack:g,id:b,glyph:v});if(v=this._tinySDF(I,g,b),v)return I.glyphs[b]=v,void E(null,{stack:g,id:b,glyph:v});const T=Math.floor(b/256);if(256*T>65535)return void E(new Error("glyphs > 65535 not supported"));if(I.ranges[T])return void E(null,{stack:g,id:b,glyph:v});let M=I.requests[T];M||(M=I.requests[T]=[],r0.loadGlyphRange(g,T,f,this.requestManager,(S,P)=>{if(P){I.ascender=P.ascender,I.descender=P.descender;for(const R in P.glyphs)this._doesCharSupportLocalGlyph(+R)||(I.glyphs[+R]=P.glyphs[+R]);I.ranges[T]=!0}for(const R of M)R(S,P);delete I.requests[T]})),M.push((S,P)=>{S?E(S):P&&E(null,{stack:g,id:b,glyph:P.glyphs[b]||null})})},(g,b)=>{if(g)u(g);else if(b){const E={};for(const{stack:I,id:v,glyph:T}of b)E[I]===void 0&&(E[I]={}),E[I].glyphs===void 0&&(E[I].glyphs={}),E[I].glyphs[v]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},E[I].ascender=this.entries[I].ascender,E[I].descender=this.entries[I].descender;u(null,E)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==J8.none&&(this.localGlyphMode===J8.all?!!this.localFontFamily:!!this.localFontFamily&&(Zt["CJK Unified Ideographs"](r)||Zt["Hangul Syllables"](r)||Zt.Hiragana(r)||Zt.Katakana(r)||Zt["CJK Symbols and Punctuation"](r)||Zt["CJK Unified Ideographs Extension A"](r)||Zt["CJK Unified Ideographs Extension B"](r)))}_tinySDF(r,s,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let f=r.tinySDF;if(!f){let R="400";/bold/i.test(s)?R="900":/medium/i.test(s)?R="500":/light/i.test(s)&&(R="200"),f=r.tinySDF=new r0.TinySDF({fontFamily:m,fontWeight:R,fontSize:24*as,buffer:3*as,radius:8*as}),f.fontWeight=R}if(this.localGlyphs[f.fontWeight][u])return this.localGlyphs[f.fontWeight][u];const g=String.fromCodePoint(u),{data:b,width:E,height:I,glyphWidth:v,glyphHeight:T,glyphLeft:M,glyphTop:S,glyphAdvance:P}=f.draw(g);return this.localGlyphs[f.fontWeight][u]={id:u,bitmap:new D1({width:E,height:I},b),metrics:{width:v/as,height:T/as,left:M/as,top:S/as-27,advance:P/as,localGlyph:!0}}}}r0.loadGlyphRange=function(c,r,s,u,m){const f=256*r,g=f+255,b=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",c).replace("{range}",`${f}-${g}`),Xl.Glyphs);Yl(b,(E,I)=>{if(E)m(E);else if(I){const v={},T=function(M){return new Vf(M).readFields(Qz,{})}(I);for(const M of T.glyphs)v[M.id]=M;m(null,{glyphs:v,ascender:T.ascender,descender:T.descender})}})},r0.TinySDF=class{constructor({fontSize:c=24,buffer:r=3,radius:s=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:f="normal",fontStyle:g="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=s;const b=this.size=c+4*r,E=this._createCanvas(b),I=this.ctx=E.getContext("2d",{willReadFrequently:!0});I.font=`${g} ${f} ${c}px ${m}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(c){const r=document.createElement("canvas");return r.width=r.height=c,r}draw(c){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:f}=this.ctx.measureText(c),g=Math.ceil(s),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-m))),E=Math.min(this.size-this.buffer,g+Math.ceil(u)),I=b+2*this.buffer,v=E+2*this.buffer,T=Math.max(I*v,0),M=new Uint8ClampedArray(T),S={data:M,width:I,height:v,glyphWidth:b,glyphHeight:E,glyphTop:g,glyphLeft:0,glyphAdvance:r};if(b===0||E===0)return S;const{ctx:P,buffer:R,gridInner:L,gridOuter:N}=this;P.clearRect(R,R,b,E),P.fillText(c,R,R+g);const G=P.getImageData(R,R,b,E);N.fill(ih,0,T),L.fill(0,0,T);for(let W=0;W<E;W++)for(let $=0;$<b;$++){const Z=G.data[4*(W*b+$)+3]/255;if(Z===0)continue;const Y=(W+R)*I+$+R;if(Z===1)N[Y]=0,L[Y]=ih;else{const ce=.5-Z;N[Y]=ce>0?ce*ce:0,L[Y]=ce<0?ce*ce:0}}Vw(N,0,0,I,v,I,this.f,this.v,this.z),Vw(L,R,R,b,E,I,this.f,this.v,this.z);for(let W=0;W<T;W++){const $=Math.sqrt(N[W])-Math.sqrt(L[W]);M[W]=Math.round(255-255*($/this.radius+this.cutoff))}return S}};const L1=nh;function qw(c,r,s,u){const m=[],f=c.imagePrimary,g=f.pixelRatio,b=f.paddedRect.w-2*L1,E=f.paddedRect.h-2*L1,I=c.right-c.left,v=c.bottom-c.top,T=f.stretchX||[[0,b]],M=f.stretchY||[[0,E]],S=(Ae,_e)=>Ae+_e[1]-_e[0],P=T.reduce(S,0),R=M.reduce(S,0),L=b-P,N=E-R;let G=0,W=P,$=0,Z=R,Y=0,ce=L,pe=0,ge=N;if(f.content&&u){const Ae=f.content;G=qf(T,0,Ae[0]),$=qf(M,0,Ae[1]),W=qf(T,Ae[0],Ae[2]),Z=qf(M,Ae[1],Ae[3]),Y=Ae[0]-G,pe=Ae[1]-$,ce=Ae[2]-Ae[0]-W,ge=Ae[3]-Ae[1]-Z}const he=(Ae,_e,Me,Le)=>{const Be=Wf(Ae.stretch-G,W,I,c.left),Fe=Hf(Ae.fixed-Y,ce,Ae.stretch,P),je=Wf(_e.stretch-$,Z,v,c.top),Ye=Hf(_e.fixed-pe,ge,_e.stretch,R),Ue=Wf(Me.stretch-G,W,I,c.left),ot=Hf(Me.fixed-Y,ce,Me.stretch,P),pt=Wf(Le.stretch-$,Z,v,c.top),et=Hf(Le.fixed-pe,ge,Le.stretch,R),zt=new vt(Be,je),Ot=new vt(Ue,je),At=new vt(Ue,pt),yt=new vt(Be,pt),Kt=new vt(Fe/g,Ye/g),Lt=new vt(ot/g,et/g),$t=r*Math.PI/180;if($t){const Er=Math.sin($t),on=Math.cos($t),Hr=[on,-Er,Er,on];zt._matMult(Hr),Ot._matMult(Hr),yt._matMult(Hr),At._matMult(Hr)}const ar=Ae.stretch+Ae.fixed,Ar=Me.stretch+Me.fixed,yr=_e.stretch+_e.fixed,_r=Le.stretch+Le.fixed,Sr=c.imageSecondary;return{tl:zt,tr:Ot,bl:yt,br:At,texPrimary:{x:f.paddedRect.x+L1+ar,y:f.paddedRect.y+L1+yr,w:Ar-ar,h:_r-yr},texSecondary:Sr?{x:Sr.paddedRect.x+L1+ar,y:Sr.paddedRect.y+L1+yr,w:Ar-ar,h:_r-yr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kt,pixelOffsetBR:Lt,minFontScaleX:ce/g/I,minFontScaleY:ge/g/v,isSDF:s}};if(u&&(f.stretchX||f.stretchY)){const Ae=Ww(T,L,P),_e=Ww(M,N,R);for(let Me=0;Me<Ae.length-1;Me++){const Le=Ae[Me],Be=Ae[Me+1];for(let Fe=0;Fe<_e.length-1;Fe++)m.push(he(Le,_e[Fe],Be,_e[Fe+1]))}}else m.push(he({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return m}function qf(c,r,s){let u=0;for(const m of c)u+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return u}function Ww(c,r,s){const u=[{fixed:-L1,stretch:0}];for(const[m,f]of c){const g=u[u.length-1];u.push({fixed:m-g.stretch,stretch:g.stretch}),u.push({fixed:m-g.stretch,stretch:g.stretch+(f-m)})}return u.push({fixed:r+L1,stretch:s}),u}function Wf(c,r,s,u){return c/r*s+u}function Hf(c,r,s,u){return c-r*s/u}function sB(c,r,s,u){const m=r+c.positionedLines[u].lineOffset;return u===0?s+m/2:s+(m+(r+c.positionedLines[u-1].lineOffset))/2}function lB(c,r=1,s=!1){let u=1/0,m=1/0,f=-1/0,g=-1/0;const b=c[0];for(let S=0;S<b.length;S++){const P=b[S];(!S||P.x<u)&&(u=P.x),(!S||P.y<m)&&(m=P.y),(!S||P.x>f)&&(f=P.x),(!S||P.y>g)&&(g=P.y)}const E=Math.min(f-u,g-m);let I=E/2;const v=new X2([],cB);if(E===0)return new vt(u,m);for(let S=u;S<f;S+=E)for(let P=m;P<g;P+=E)v.push(new n0(S+I,P+I,I,c));let T=function(S){let P=0,R=0,L=0;const N=S[0];for(let G=0,W=N.length,$=W-1;G<W;$=G++){const Z=N[G],Y=N[$],ce=Z.x*Y.y-Y.x*Z.y;R+=(Z.x+Y.x)*ce,L+=(Z.y+Y.y)*ce,P+=3*ce}return new n0(R/P,L/P,0,S)}(c),M=v.length;for(;v.length;){const S=v.pop();(S.d>T.d||!T.d)&&(T=S,s&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,M)),S.max-T.d<=r||(I=S.h/2,v.push(new n0(S.p.x-I,S.p.y-I,I,c)),v.push(new n0(S.p.x+I,S.p.y-I,I,c)),v.push(new n0(S.p.x-I,S.p.y+I,I,c)),v.push(new n0(S.p.x+I,S.p.y+I,I,c)),M+=4)}return s&&(console.log(`num probes: ${M}`),console.log(`best distance: ${T.d}`)),T.p}function cB(c,r){return r.max-c.max}class n0{constructor(r,s,u,m){this.p=new vt(r,s),this.h=u,this.d=function(f,g){let b=!1,E=1/0;for(let I=0;I<g.length;I++){const v=g[I];for(let T=0,M=v.length,S=M-1;T<M;S=T++){const P=v[T],R=v[S];P.y>f.y!=R.y>f.y&&f.x<(R.x-P.x)*(f.y-P.y)/(R.y-P.y)+P.x&&(b=!b),E=Math.min(E,Kr(f,P,R))}}return(b?1:-1)*Math.sqrt(E)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}}const Q8=Number.POSITIVE_INFINITY,uB=Math.sqrt(2);function Hw(c,[r,s]){let u=0,m=0;if(s===Q8){r<0&&(r=0);const f=r/uB;switch(c){case"top-right":case"top-left":m=f-7;break;case"bottom-right":case"bottom-left":m=7-f;break;case"bottom":m=7-r;break;case"top":m=r-7}switch(c){case"top-right":case"bottom-right":u=-f;break;case"top-left":case"bottom-left":u=f;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),s=Math.abs(s),c){case"top-right":case"top-left":case"top":m=s-7;break;case"bottom-right":case"bottom-left":case"bottom":m=7-s}switch(c){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,m]}function em(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hB(c,r,s,u,m,f,g,b,E,I,v,T,M,S,P){let R=f.textMaxSize.evaluate(r,{},T);R===void 0&&(R=g);const L=c.layers[0].layout,N=L.get("icon-offset").evaluate(r,{},T),G=Xw(s.horizontal)||s.vertical,W=M.name==="globe",$=Ci,Z=g/$,Y=c.tilePixelRatio*R/$,ce=(Be=c.overscaling,c.zoom>18&&Be>2&&(Be>>=1),Math.max(Dt/(512*Be),1)*L.get("symbol-spacing")),pe=L.get("text-padding")*c.tilePixelRatio,ge=L.get("icon-padding")*c.tilePixelRatio,he=br(L.get("text-max-angle")),Ae=L.get("text-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",_e=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Me=L.get("symbol-placement"),Le=ce/2;var Be;const Fe=L.get("icon-text-fit").evaluate(r,{},T),je=L.get("icon-text-fit-padding").evaluate(r,{},T),Ye=Fe!=="none";let Ue;c.hasAnyIconTextFit===!1&&Ye&&(c.hasAnyIconTextFit=!0),u&&Ye&&(c.allowVerticalPlacement&&s.vertical&&(Ue=kw(u,s.vertical,Fe,je,N,Z)),G&&(u=kw(u,G,Fe,je,N,Z)));const ot=(pt,et,zt)=>{if(et.x<0||et.x>=Dt||et.y<0||et.y>=Dt)return;let Ot=null;if(W){const{x:At,y:yt,z:Kt}=M.projectTilePoint(et.x,et.y,zt);Ot={anchor:new gl(At,yt,Kt,0,void 0),up:M.upVector(zt,et.x,et.y)}}(function(At,yt,Kt,Lt,$t,ar,Ar,yr,_r,Sr,Er,on,Hr,lr,$r,Ur,mn,Bn,Xn,Fn,En,xi,ti,Ii,dn,Po,us){const Ca=At.addToLineVertexArray(yt,Lt);let Ia,uu,j1,hu,wh,gT,yT,_T=0,vT=0,xT=0,bT=0,Cm=-1,Im=-1;const Fs={};let wT=oo("");const fu=Kt?Kt.anchor:yt,Om=_r.layout.get("icon-text-fit").evaluate(En,{},dn)!=="none";let Rm=0,Dm=0;if(_r._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Rm,Dm]=_r.layout.get("text-offset").evaluate(En,{},dn).map(Uo=>Uo*Ci):(Rm=_r.layout.get("text-radial-offset").evaluate(En,{},dn)*Ci,Dm=Q8),At.allowVerticalPlacement&&$t.vertical){const Uo=$t.vertical;if($r)gT=tm(Uo),yr&&(yT=tm(yr));else{const Vo=_r.layout.get("text-rotate").evaluate(En,{},dn)+90;j1=Zf(Sr,fu,yt,Er,on,Hr,Uo,lr,Vo,Ur),yr&&(hu=Zf(Sr,fu,yt,Er,on,Hr,yr,Bn,Vo))}}if(ar){const Uo=_r.layout.get("icon-rotate").evaluate(En,{},dn),Vo=qw(ar,Uo,ti,Om),h0=yr?qw(yr,Uo,ti,Om):void 0;uu=Zf(Sr,fu,yt,Er,on,Hr,ar,Bn,Uo),_T=4*Vo.length;const AT=At.iconSizeData;let du=null;AT.kind==="source"?(du=[os*_r.layout.get("icon-size").evaluate(En,{},dn)],du[0]>z1&&Br(`${At.layerIds[0]}: Value for "icon-size" is >= ${oh}. Reduce your "icon-size".`)):AT.kind==="composite"&&(du=[os*xi.compositeIconSizes[0].evaluate(En,{},dn),os*xi.compositeIconSizes[1].evaluate(En,{},dn)],(du[0]>z1||du[1]>z1)&&Br(`${At.layerIds[0]}: Value for "icon-size" is >= ${oh}. Reduce your "icon-size".`)),At.addSymbols(At.icon,Vo,du,Fn,Xn,En,!1,Kt,yt,Ca.lineStartIndex,Ca.lineLength,-1,Ii,dn,Po,us),Cm=At.icon.placedSymbolArray.length-1,h0&&(vT=4*h0.length,At.addSymbols(At.icon,h0,du,Fn,Xn,En,aa.vertical,Kt,yt,Ca.lineStartIndex,Ca.lineLength,-1,Ii,dn,Po,us),Im=At.icon.placedSymbolArray.length-1)}for(const Uo in $t.horizontal){const Vo=$t.horizontal[Uo];Ia||(wT=oo(Vo.text),$r?wh=tm(Vo):Ia=Zf(Sr,fu,yt,Er,on,Hr,Vo,lr,_r.layout.get("text-rotate").evaluate(En,{},dn),Ur));const h0=Vo.positionedLines.length===1;if(xT+=Zw(At,Kt,yt,Vo,Ar,_r,$r,En,Ur,Ca,$t.vertical?aa.horizontal:aa.horizontalOnly,h0?Object.keys($t.horizontal):[Uo],Fs,Cm,xi,Ii,dn,Po),h0)break}$t.vertical&&(bT+=Zw(At,Kt,yt,$t.vertical,Ar,_r,$r,En,Ur,Ca,aa.vertical,["vertical"],Fs,Im,xi,Ii,dn,Po));let $1=-1;const km=(Uo,Vo)=>Uo?Math.max(Uo,Vo):Vo;$1=km(wh,$1),$1=km(gT,$1),$1=km(yT,$1);const EF=$1>-1?1:0;At.glyphOffsetArray.length>=65535&&Br("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),En.sortKey!==void 0&&At.addToSortKeyRanges(At.symbolInstances.length,En.sortKey),At.symbolInstances.emplaceBack(yt.x,yt.y,fu.x,fu.y,fu.z,Fs.right>=0?Fs.right:-1,Fs.center>=0?Fs.center:-1,Fs.left>=0?Fs.left:-1,Fs.vertical>=0?Fs.vertical:-1,Cm,Im,wT,Ia!==void 0?Ia:At.collisionBoxArray.length,Ia!==void 0?Ia+1:At.collisionBoxArray.length,j1!==void 0?j1:At.collisionBoxArray.length,j1!==void 0?j1+1:At.collisionBoxArray.length,uu!==void 0?uu:At.collisionBoxArray.length,uu!==void 0?uu+1:At.collisionBoxArray.length,hu||At.collisionBoxArray.length,hu?hu+1:At.collisionBoxArray.length,Er,xT,bT,_T,vT,EF,0,Rm,Dm,$1,0,Om?1:0)})(c,et,Ot,pt,s,u,m,Ue,c.layers[0],c.collisionBoxArray,r.index,r.sourceLayerIndex,c.index,pe,Ae,E,0,ge,_e,N,r,f,I,v,T,S,P)};if(Me==="line")for(const pt of jw(r.geometry,0,0,Dt,Dt)){const et=aB(pt,ce,he,s.vertical||G,u,$,Y,c.overscaling,Dt);for(const zt of et)G&&fB(c,G.text,Le,zt)||ot(pt,zt,T)}else if(Me==="line-center"){for(const pt of r.geometry)if(pt.length>1){const et=oB(pt,he,s.vertical||G,u,$,Y);et&&ot(pt,et,T)}}else if(r.type==="Polygon")for(const pt of Lf(r.geometry,0)){const et=lB(pt,16);ot(pt[0],new gl(et.x,et.y,0,0,void 0),T)}else if(r.type==="LineString")for(const pt of r.geometry)ot(pt,new gl(pt[0].x,pt[0].y,0,0,void 0),T);else if(r.type==="Point")for(const pt of r.geometry)for(const et of pt)ot([et],new gl(et.x,et.y,0,0,void 0),T)}const oh=255,z1=oh*os;function Zw(c,r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L,N){const G=function(Z,Y,ce,pe,ge,he,Ae,_e){const Me=[];if(Y.positionedLines.length===0)return Me;const Le=pe.layout.get("text-rotate").evaluate(he,{})*Math.PI/180,Be=function(ot){const pt=ot[0],et=ot[1],zt=pt*et;return zt>0?[pt,-et]:zt<0?[-pt,et]:pt===0?[et,pt]:[et,-pt]}(ce);let Fe=Math.abs(Y.top-Y.bottom);for(const ot of Y.positionedLines)Fe-=ot.lineOffset;const je=Y.positionedLines.length,Ye=Fe/je;let Ue=Y.top-ce[1];for(let ot=0;ot<je;++ot){const pt=Y.positionedLines[ot];Ue=sB(Y,Ye,Ue,ot);for(const et of pt.positionedGlyphs){if(!et.rect)continue;const zt=et.rect||{};let Ot=Mw+1,At=!0,yt=1,Kt=0;if(et.imageName){const Fn=Ae[et.imageName];if(!Fn)continue;if(Fn.sdf){Br("SDF images are not supported in formatted text and will be ignored.");continue}At=!1,yt=Fn.pixelRatio,Ot=nh/yt}const Lt=(ge||_e)&&et.vertical,$t=et.metrics.advance*et.scale/2,ar=et.metrics,Ar=et.rect;if(Ar===null)continue;_e&&Y.verticalizable&&(Kt=et.imageName?$t-et.metrics.width*et.scale/2:0);const yr=ge?[et.x+$t,et.y]:[0,0];let _r=[0,0],Sr=[0,0],Er=!1;ge||(Lt?(Sr=[et.x+$t+Be[0],et.y+Be[1]-Kt],Er=!0):_r=[et.x+$t+ce[0],et.y+ce[1]-Kt]);const on=Ar.w*et.scale/(yt*(et.localGlyph?as:1)),Hr=Ar.h*et.scale/(yt*(et.localGlyph?as:1));let lr,$r,Ur,mn;if(Lt){const Fn=et.y-Ue,En=new vt(-$t,$t-Fn),xi=-Math.PI/2,ti=new vt(...Sr);lr=new vt(-$t+_r[0],_r[1]),lr._rotateAround(xi,En)._add(ti),lr.x+=-Fn+$t,lr.y-=(ar.left-Ot)*et.scale;const Ii=et.imageName?ar.advance*et.scale:Ci*et.scale,dn=String.fromCodePoint(et.glyph);Yz(dn)?lr.x+=(1-Ot)*et.scale:Kz(dn)?lr.x+=Ii-ar.height*et.scale+(-Ot-1)*et.scale:lr.x+=et.imageName||ar.width+2*Ot===Ar.w&&ar.height+2*Ot===Ar.h?(Ii-Hr)/2:(Ii-(ar.height+2*Ot)*et.scale)/2,$r=new vt(lr.x,lr.y-on),Ur=new vt(lr.x+Hr,lr.y),mn=new vt(lr.x+Hr,lr.y-on)}else{const Fn=(ar.left-Ot)*et.scale-$t+_r[0],En=(-ar.top-Ot)*et.scale+_r[1],xi=Fn+on,ti=En+Hr;lr=new vt(Fn,En),$r=new vt(xi,En),Ur=new vt(Fn,ti),mn=new vt(xi,ti)}if(Le){let Fn;Fn=ge?new vt(0,0):Er?new vt(Be[0],Be[1]):new vt(ce[0],ce[1]),lr._rotateAround(Le,Fn),$r._rotateAround(Le,Fn),Ur._rotateAround(Le,Fn),mn._rotateAround(Le,Fn)}const Bn=new vt(0,0),Xn=new vt(0,0);Me.push({tl:lr,tr:$r,bl:Ur,br:mn,texPrimary:zt,texSecondary:void 0,writingMode:Y.writingMode,glyphOffset:yr,sectionIndex:et.sectionIndex,isSDF:At,pixelOffsetTL:Bn,pixelOffsetBR:Xn,minFontScaleX:0,minFontScaleY:0})}}return Me}(0,u,E,f,g,b,m,c.allowVerticalPlacement),W=c.textSizeData;let $=null;W.kind==="source"?($=[os*f.layout.get("text-size").evaluate(b,{},L)],$[0]>z1&&Br(`${c.layerIds[0]}: Value for "text-size" is >= ${oh}. Reduce your "text-size".`)):W.kind==="composite"&&($=[os*P.compositeTextSizes[0].evaluate(b,{},L),os*P.compositeTextSizes[1].evaluate(b,{},L)],($[0]>z1||$[1]>z1)&&Br(`${c.layerIds[0]}: Value for "text-size" is >= ${oh}. Reduce your "text-size".`)),c.addSymbols(c.text,G,$,E,g,b,v,r,s,I.lineStartIndex,I.lineLength,S,R,L,N,!1);for(const Z of T)M[Z]=c.text.placedSymbolArray.length-1;return 4*G.length}function Xw(c){for(const r in c)return c[r];return null}function Zf(c,r,s,u,m,f,g,b,E,I){let v=g.top,T=g.bottom,M=g.left,S=g.right;const P=g.collisionPadding;if(P&&(M-=P[0],v-=P[1],S+=P[2],T+=P[3]),E){const R=new vt(M,v),L=new vt(S,v),N=new vt(M,T),G=new vt(S,T),W=br(E);let $=new vt(0,0);I&&($=new vt(I[0],I[1])),R._rotateAround(W,$),L._rotateAround(W,$),N._rotateAround(W,$),G._rotateAround(W,$),M=Math.min(R.x,L.x,N.x,G.x),S=Math.max(R.x,L.x,N.x,G.x),v=Math.min(R.y,L.y,N.y,G.y),T=Math.max(R.y,L.y,N.y,G.y)}return c.emplaceBack(r.x,r.y,r.z,s.x,s.y,M,v,S,T,b,u,m,f),c.length-1}function tm(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const r=c.bottom-c.top;return r>0?Math.max(10,r):null}function fB(c,r,s,u){const m=c.compareText;if(r in m){const f=m[r];for(let g=f.length-1;g>=0;g--)if(u.dist(f[g])<s)return!0}else m[r]=[];return m[r].push(u),!1}function Yw(c,r){const s=c.fovAboveCenter,u=c.elevation?c.elevation.getMinElevationBelowMSL()*r:0,m=(c._camera.position[2]*c.worldSize-u)/Math.cos(c._pitch),f=Math.sin(s)*m/Math.sin(Math.max(Math.PI/2-c._pitch-s,.01));let g=Math.sin(c._pitch)*f+m;const b=m*(1/c._horizonShift);return c.elevation&&c.elevation.exaggeration()!==0||(g*=1+Math.max(c.zoom-17,0)),Math.min(1.01*g,b)}function ah(c,r){if(!r.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:r};const s=Math.pow(2,-c.z),u=c.x*s,m=(c.x+1)*s,f=c.y*s,g=(c.y+1)*s,b=be(u),E=be(m),I=xe(f),v=xe(g),T=r.project(b,I),M=r.project(E,I),S=r.project(E,v),P=r.project(b,v);let R=Math.min(T.x,M.x,S.x,P.x),L=Math.min(T.y,M.y,S.y,P.y),N=Math.max(T.x,M.x,S.x,P.x),G=Math.max(T.y,M.y,S.y,P.y);const W=s/16;function $(Y,ce,pe,ge,he,Ae){const _e=(pe+he)/2,Me=(ge+Ae)/2,Le=r.project(be(_e),xe(Me)),Be=Math.max(0,R-Le.x,L-Le.y,Le.x-N,Le.y-G);R=Math.min(R,Le.x),N=Math.max(N,Le.x),L=Math.min(L,Le.y),G=Math.max(G,Le.y),Be>W&&($(Y,Le,pe,ge,_e,Me),$(Le,ce,_e,Me,he,Ae))}$(T,M,u,f,m,f),$(M,S,m,f,m,g),$(S,P,m,g,u,g),$(P,T,u,g,u,f),R-=W,L-=W,N+=W,G+=W;const Z=1/Math.max(N-R,G-L);return{scale:Z,x:R*Z,y:L*Z,x2:N*Z,y2:G*Z,projection:r}}function Kw(c,{x:r,y:s},u=0){return new vt(((r-u)*c.scale-c.x)*Dt,(s*c.scale-c.y)*Dt)}const dB=Pe.mat4.identity(new Float32Array(16));class B1{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,s){return{x:0,y:0,z:0}}unproject(r,s){return new q(0,0)}projectTilePoint(r,s,u){return{x:r,y:s,z:0}}locationPoint(r,s,u=!0){return r._coordinatePoint(r.locationCoordinate(s),u)}pixelsPerMeter(r,s){return de(1,r)*s}pixelSpaceConversion(r,s,u){return 1}farthestPixelDistance(r){return Yw(r,r.pixelsPerMeter)}pointCoordinate(r,s,u,m){const f=r.horizonLineFromTop(!1),g=new vt(s,Math.max(f,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(g,m))}pointCoordinate3D(r,s,u){const m=new vt(s,u);if(r.elevation)return r.elevation.pointCoordinate(m);{const f=this.pointCoordinate(r,m.x,m.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(r,s){if(r.elevation&&r.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(r,s.x,s.y);const u=r.horizonLineFromTop();return s.y<u}createInversionMatrix(r,s){return dB}createTileMatrix(r,s,u){let m,f,g;const b=u.canonical,E=Pe.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const I=ah(b,this);m=1,f=I.x+u.wrap*I.scale,g=I.y,Pe.mat4.scale(E,E,[m/I.scale,m/I.scale,r.pixelsPerMeter/s])}else m=s/r.zoomScale(b.z),f=(b.x+Math.pow(2,b.z)*u.wrap)*m,g=b.y*m;return Pe.mat4.translate(E,E,[f,g,0]),Pe.mat4.scale(E,E,[m/Dt,m/Dt,1]),E}upVector(r,s,u){return[0,0,1]}upVectorScale(r,s,u){return{metersToTile:1}}}class pB extends B1{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[s,u]=this.parallels=r.parallels||[29.5,45.5],m=Math.sin(br(s));this.n=(m+Math.sin(br(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(r,s){const{n:u,c:m,r0:f}=this,g=br(r-this.center[0]),b=br(s),E=Math.sqrt(m-2*u*Math.sin(b))/u;return{x:E*Math.sin(g*u),y:E*Math.cos(g*u)-f,z:0}}unproject(r,s){const{n:u,c:m,r0:f}=this,g=f+s;let b=Math.atan2(r,Math.abs(g))*Math.sign(g);g*u<0&&(b-=Math.PI*Math.sign(r)*Math.sign(g));const E=br(this.center[0])*u;b=Za(b,-Math.PI-E,Math.PI-E);const I=mr(jn(b/u)+this.center[0],-180,180),v=Math.asin(mr((m-(r*r+g*g)*u*u)/(2*u),-1,1)),T=mr(jn(v),-Se,Se);return new q(I,T)}}const sh=1.340264,lh=-.081106,ch=893e-6,uh=.003796,Xf=Math.sqrt(3)/2;class mB extends B1{project(r,s){s=s/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(Xf*Math.sin(s)),m=u*u,f=m*m*m;return{x:.5*(r*Math.cos(u)/(Xf*(sh+3*lh*m+f*(7*ch+9*uh*m)))/Math.PI+.5),y:1-.5*(u*(sh+lh*m+f*(ch+uh*m))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,m=u*u,f=m*m*m;for(let v,T,M,S=0;S<12&&(T=u*(sh+lh*m+f*(ch+uh*m))-s,M=sh+3*lh*m+f*(7*ch+9*uh*m),v=T/M,u=mr(u-v,-Math.PI/3,Math.PI/3),m=u*u,f=m*m*m,!(Math.abs(v)<1e-12));++S);const g=Xf*r*(sh+3*lh*m+f*(7*ch+9*uh*m))/Math.cos(u),b=Math.asin(Math.sin(u)/Xf),E=mr(180*g/Math.PI,-180,180),I=mr(180*b/Math.PI,-Se,Se);return new q(E,I)}}class gB extends B1{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){return{x:.5+r/360,y:.5-s/360,z:0}}unproject(r,s){const u=360*(r-.5),m=mr(360*(.5-s),-Se,Se);return new q(u,m)}}const i0=Math.PI/2;function Yf(c){return Math.tan((i0+c)/2)}class yB extends B1{constructor(r){super(r),this.center=r.center||[0,30];const[s,u]=this.parallels=r.parallels||[30,30];let m=br(s),f=br(u);this.southernCenter=m+f<0,this.southernCenter&&(m=-m,f=-f);const g=Math.cos(m),b=Yf(m);this.n=m===f?Math.sin(m):Math.log(g/Math.cos(f))/Math.log(Yf(f)/b),this.f=g*Math.pow(Yf(m),this.n)/this.n}project(r,s){s=br(s),this.southernCenter&&(s=-s),r=br(r-this.center[0]);const u=1e-6,{n:m,f}=this;f>0?s<-i0+u&&(s=-i0+u):s>i0-u&&(s=i0-u);const g=f/Math.pow(Yf(s),m);let b=g*Math.sin(m*r),E=f-g*Math.cos(m*r);return b=.5*(b/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:b,y:this.southernCenter?E:1-E,z:0}}unproject(r,s){r=(2*r-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:m}=this,f=m-s,g=Math.sign(f),b=Math.sign(u)*Math.sqrt(r*r+f*f);let E=Math.atan2(r,Math.abs(f))*g;f*u<0&&(E-=Math.PI*Math.sign(r)*g);const I=mr(jn(E/u)+this.center[0],-180,180),v=mr(jn(2*Math.atan(Math.pow(m/b,1/u))-i0),-Se,Se);return new q(I,this.southernCenter?-v:v)}}class Jw extends B1{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,s){return{x:me(r),y:ye(s),z:0}}unproject(r,s){const u=be(r),m=xe(s);return new q(u,m)}}const Qw=br(Se);class _B extends B1{project(r,s){const u=(s=br(s))*s,m=u*u;return{x:.5*((r=br(r))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,m=25,f=0,g=u*u;do{g=u*u;const I=g*g;f=(u*(1.007226+g*(.015085+I*(.028874*g-.044475-.005916*I)))-s)/(1.007226+g*(.045255+I*(.259866*g-.311325-.005916*11*I))),u=mr(u-f,-Qw,Qw)}while(Math.abs(f)>1e-6&&--m>0);g=u*u;const b=mr(jn(r/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),E=jn(u);return new q(b,E)}}const eA=br(Se);class vB extends B1{project(r,s){s=br(s),r=br(r);const u=Math.cos(s),m=2/Math.PI,f=Math.acos(u*Math.cos(r/2)),g=Math.sin(f)/f,b=.5*(r*m+2*u*Math.sin(r/2)/g)||0,E=.5*(s+Math.sin(s)/g)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(r,s){let u=r=(2*r-.5)*Math.PI,m=s=(2*(1-s)-1)*Math.PI,f=25;const g=1e-6;let b=0,E=0;do{const I=Math.cos(m),v=Math.sin(m),T=2*v*I,M=v*v,S=I*I,P=Math.cos(u/2),R=Math.sin(u/2),L=2*P*R,N=R*R,G=1-S*P*P,W=G?1/G:0,$=G?Math.acos(I*P)*Math.sqrt(1/G):0,Z=.5*(2*$*I*R+2*u/Math.PI)-r,Y=.5*($*v+m)-s,ce=.5*W*(S*N+$*I*P*M)+1/Math.PI,pe=W*(L*T/4-$*v*R),ge=.125*W*(T*R-$*v*S*L),he=.5*W*(M*P+$*N*I)+.5,Ae=pe*ge-he*ce;b=(Y*pe-Z*he)/Ae,E=(Z*ge-Y*ce)/Ae,u=mr(u-b,-Math.PI,Math.PI),m=mr(m-E,-eA,eA)}while((Math.abs(b)>g||Math.abs(E)>g)&&--f>0);return new q(jn(u),jn(m))}}class tA extends B1{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(br(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){const{scale:u,cosPhi:m}=this;return{x:br(r)*m*u+.5,y:-Math.sin(br(s))/m*u+.5,z:0}}unproject(r,s){const{scale:u,cosPhi:m}=this,f=-(s-.5)/u,g=mr(jn((r-.5)/u)/m,-180,180),b=Math.asin(mr(f*m,-1,1)),E=mr(jn(b),-Se,Se);return new q(g,E)}}class xB extends Jw{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,s,u){const m=G3(r,s,u),f=Of(zs(u));return Pe.vec3.transformMat4(m,m,f),{x:m[0],y:m[1],z:m[2]}}locationPoint(r,s){const u=F(s.lat,s.lng),m=Pe.vec3.normalize([],u),f=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(s),r._centerAltitude):r._centerAltitude,g=de(1,0)*Dt*f;Pe.vec3.scaleAndAdd(u,u,m,g);const b=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.multiply(b,r.pixelMatrix,r.globeMatrix),Pe.vec3.transformMat4(u,u,b),new vt(u[0],u[1])}pixelsPerMeter(r,s){return de(1,0)*s}pixelSpaceConversion(r,s,u){const m=de(1,r)*s,f=nr(de(1,45)*s,m,u);return this.pixelsPerMeter(r,s)/f}createTileMatrix(r,s,u){const m=S8(zs(u.canonical));return Pe.mat4.multiply(new Float64Array(16),r.globeMatrix,m)}createInversionMatrix(r,s){const{center:u}=r,m=Of(zs(s));return Pe.mat4.rotateY(m,m,br(u.lng)),Pe.mat4.rotateX(m,m,br(u.lat)),Pe.mat4.scale(m,m,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(r,s,u,m){return Mf(r,s,u,!0)||new Ve(0,0)}pointCoordinate3D(r,s,u){const m=this.pointCoordinate(r,s,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(r,s){return!Mf(r,s.x,s.y,!1)}farthestPixelDistance(r){const s=function(m,f){const g=m.cameraToCenterDistance,b=m._centerAltitude*f,E=m._camera,I=m._camera.forward(),v=Pe.vec3.add([],Pe.vec3.scale([],I,-g),[0,0,b]),T=m.worldSize/(2*Math.PI),M=[0,0,-T],S=m.width/m.height,P=Math.tan(m.fovAboveCenter),R=Pe.vec3.scale([],E.up(),P),L=Pe.vec3.scale([],E.right(),P*S),N=Pe.vec3.normalize([],Pe.vec3.add([],Pe.vec3.add([],I,R),L)),G=[];let W;if(new is(v,N).closestPointOnSphere(M,T,G)){const $=Pe.vec3.add([],G,M),Z=Pe.vec3.sub([],$,v);W=Math.cos(m.fovAboveCenter)*Pe.vec3.length(Z)}else{const $=Pe.vec3.sub([],v,M),Z=Pe.vec3.sub([],M,v);Pe.vec3.normalize(Z,Z);const Y=Pe.vec3.length($)-T;W=Math.sqrt(Y*(Y+2*T));const ce=Math.acos(W/(T+Y))-Math.acos(Pe.vec3.dot(I,Z));W*=Math.cos(ce)}return 1.01*W}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=R1(r.zoom);if(u>0){const m=Yw(r,de(1,r.center.lat)*r.worldSize),f=r.worldSize/(2*Math.PI),g=Math.max(r.width,r.height)/r.worldSize*Math.PI;return nr(s,m+f*(1-Math.cos(g)),Math.pow(u,10))}return s}upVector(r,s,u){return G3(s,u,r,1)}upVectorScale(r){return{metersToTile:pl(If(zs(r)))}}}function rA(c){const r=c.parallels,s=!!r&&Math.abs(r[0]+r[1])<.01;switch(c.name){case"mercator":return new Jw(c);case"equirectangular":return new gB(c);case"naturalEarth":return new _B(c);case"equalEarth":return new mB(c);case"winkelTripel":return new vB(c);case"albers":return s?new tA(c):new pB(c);case"lambertConformalConic":return s?new tA(c):new yB(c);case"globe":return new xB(c)}throw new Error(`Invalid projection name: ${c.name}`)}const bB=Q7.VectorTileFeature.types,wB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Kf(c,r,s,u,m,f,g,b,E,I,v,T,M){const S=b?Math.min(z1,Math.round(b[0])):0,P=b?Math.min(z1,Math.round(b[1])):0;c.emplaceBack(r,s,Math.round(32*u),Math.round(32*m),f,g,(S<<1)+(E?1:0),P,16*I,16*v,256*T,256*M)}function Jf(c,r,s){c.emplaceBack(r,s)}function Qf(c,r,s,u,m,f,g){c.emplaceBack(r,s,u,m,f,g)}function ed(c,r,s,u,m){c.emplaceBack(r,s,u,m),c.emplaceBack(r,s,u,m),c.emplaceBack(r,s,u,m),c.emplaceBack(r,s,u,m)}function AB(c){for(const r of c.sections)if(s8(r.text))return!0;return!1}class rm{constructor(r){this.layoutVertexArray=new I3,this.indexArray=new Ti,this.programConfigurations=r,this.segments=new Rn,this.dynamicLayoutVertexArray=new es,this.opacityVertexArray=new R3,this.placedSymbolArray=new B3,this.iconTransitioningVertexArray=new Ds,this.globeExtVertexArray=new O3,this.zOffsetVertexArray=new E1}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(r,s,u,m,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,jz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Uz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,wB,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=r.createVertexBuffer(this.iconTransitioningVertexArray,Gz.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,$z.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,Vz.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Ut(rm,"SymbolBuffers");class nm{constructor(r,s,u){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new u,this.segments=new Rn,this.collisionVertexArray=new S1,this.collisionVertexArrayExt=new es}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,qz.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,Wz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ut(nm,"CollisionBuffers");class td{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.lut=r.lut,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(g=>g.fqid),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Pe.mat4.identity([]),this.placementViewportMatrix=Pe.mat4.identity([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=q8(this.zoom,s["text-size"]),this.iconSizeData=q8(this.zoom,s["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),f=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(g=>aa[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=r.sourceID,this.projection=r.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=u.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new rm(new ks(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("text")||r.startsWith("symbol"))),this.icon=new rm(new ks(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("icon")||r.startsWith("symbol"))),this.glyphOffsetArray=new vf,this.lineVertexArray=new Z7,this.symbolInstances=new F3}calculateGlyphDependencies(r,s,u,m,f){for(let g=0;g<r.length;g++){const b=r.codePointAt(g);if(b===void 0)break;if(s[b]=!0,m&&f&&b<=65535){const E=th[r.charAt(g)];E&&(s[E.charCodeAt(0)]=!0)}}}updateFootprints(r,s){}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);return!N8(this.activeReplacements,u)&&(this.activeReplacements=u,!0)}populate(r,s,u,m){const f=this.layers[0],g=f.layout,b=this.projection.name==="globe",E=g.get("text-font"),I=g.get("text-field"),v=g.get("icon-image"),T=(I.value.kind!=="constant"||I.value.value instanceof Fi&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),M=v.value.kind!=="constant"||!!v.value.value||Object.keys(v.parameters).length>0,S=g.get("symbol-sort-key");if(this.features=[],!T&&!M)return;const P=s.iconDependencies,R=s.glyphDependencies,L=s.availableImages,N=new On(this.zoom);for(const{feature:G,id:W,index:$,sourceLayerIndex:Z}of r){const Y=f._featureFilter.needGeometry,ce=Tt(G,Y);if(!f._featureFilter.filter(N,ce,u))continue;if(Y||(ce.geometry=wt(G,u,m)),b&&G.type!==1&&u.z<=5){const Ae=ce.geometry,_e=.98078528056,Me=(Le,Be)=>{const Fe=G3(Le.x,Le.y,u,1),je=G3(Be.x,Be.y,u,1);return Pe.vec3.dot(Fe,je)<_e};for(let Le=0;Le<Ae.length;Le++)Ae[Le]=xt(Ae[Le],Me)}let pe,ge;if(T){const Ae=f.getValueAndResolveTokens("text-field",ce,u,L),_e=Fi.factory(Ae);AB(_e)&&(this.hasRTLText=!0),(!this.hasRTLText||T3()==="unavailable"||this.hasRTLText&&co.isParsed())&&(pe=Xz(_e,f,ce))}if(M){const Ae=f.getValueAndResolveTokens("icon-image",ce,u,L);ge=Ae instanceof Zi?Ae:Zi.fromString(Ae)}if(!pe&&!ge)continue;const he=this.sortFeaturesByKey?S.evaluate(ce,{},u):void 0;if(this.features.push({id:W,text:pe,icon:ge,index:$,sourceLayerIndex:Z,geometry:ce.geometry,properties:G.properties,type:bB[G.type],sortKey:he}),ge&&(P[ge.namePrimary]=!0,ge.nameSecondary&&(P[ge.nameSecondary]=!0)),pe){const Ae=E.evaluate(ce,{},u).join(","),_e=g.get("text-rotation-alignment")==="map"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(aa.vertical)>=0;for(const Me of pe.sections)if(Me.image)P[Me.image.namePrimary]=!0;else{const Le=R7(pe.toString()),Be=Me.fontStack||Ae,Fe=R[Be]=R[Be]||{};this.calculateGlyphDependencies(Me.text,Fe,_e,this.allowVerticalPlacement,Le)}}}g.get("symbol-placement")==="line"&&(this.features=function(G){const W={},$={},Z=[];let Y=0;function ce(Ae){Z.push(G[Ae]),Y++}function pe(Ae,_e,Me){const Le=$[Ae];return delete $[Ae],$[_e]=Le,Z[Le].geometry[0].pop(),Z[Le].geometry[0]=Z[Le].geometry[0].concat(Me[0]),Le}function ge(Ae,_e,Me){const Le=W[_e];return delete W[_e],W[Ae]=Le,Z[Le].geometry[0].shift(),Z[Le].geometry[0]=Me[0].concat(Z[Le].geometry[0]),Le}function he(Ae,_e,Me){const Le=Me?_e[0][_e[0].length-1]:_e[0][0];return`${Ae}:${Le.x}:${Le.y}`}for(let Ae=0;Ae<G.length;Ae++){const _e=G[Ae],Me=_e.geometry,Le=_e.text?_e.text.toString():null;if(!Le){ce(Ae);continue}const Be=he(Le,Me),Fe=he(Le,Me,!0);if(Be in $&&Fe in W&&$[Be]!==W[Fe]){const je=ge(Be,Fe,Me),Ye=pe(Be,Fe,Z[je].geometry);delete W[Be],delete $[Fe],$[he(Le,Z[Ye].geometry,!0)]=Ye,Z[je].geometry=null}else Be in $?pe(Be,Fe,Me):Fe in W?ge(Be,Fe,Me):(ce(Ae),W[Be]=Y-1,$[Fe]=Y-1)}return Z.filter(Ae=>Ae.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((G,W)=>G.sortKey-W.sortKey)}update(r,s,u,m,f){const g=Object.keys(r).length!==0;if(g&&!this.stateDependentLayers.length)return;const b=g?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(r,s,b,u,m,f),this.icon.programConfigurations.updatePaintArrays(r,s,b,u,m,f)}updateZOffset(){const r=(f,g,b)=>{u+=g,u>f.length&&f.resize(u);for(let E=-g;E<0;E++)f.emplace(E+u,b)},s=(f,g,b)=>{m+=g,m>f.length&&f.resize(m);for(let E=-g;E<0;E++)f.emplace(E+m,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let u=0,m=0;for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:E,numIconVertices:I}=g,v=g.zOffset,T=I>0;if((b>0||E>0)&&(r(this.text.zOffsetVertexArray,b,v),r(this.text.zOffsetVertexArray,E,v)),T){const{placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:S}=g;M>=0&&s(this.icon.zOffsetVertexArray,I,v),S>=0&&s(this.icon.zOffsetVertexArray,g.numVerticalIconVertices,v)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=rA(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:m,y:f}of s)this.lineVertexArray.emplaceBack(m,f);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,s,u,m,f,g,b,E,I,v,T,M,S,P,R,L){const N=r.indexArray,G=r.layoutVertexArray,W=r.globeExtVertexArray,$=r.segments.prepareSegment(4*s.length,G,N,this.canOverlap?g.sortKey:void 0),Z=this.glyphOffsetArray.length,Y=$.vertexLength,ce=this.allowVerticalPlacement&&b===aa.vertical?Math.PI/2:0,pe=g.text&&g.text.sections;for(let he=0;he<s.length;he++){const{tl:Ae,tr:_e,bl:Me,br:Le,texPrimary:Be,texSecondary:Fe,pixelOffsetTL:je,pixelOffsetBR:Ye,minFontScaleX:Ue,minFontScaleY:ot,glyphOffset:pt,isSDF:et,sectionIndex:zt}=s[he],Ot=$.vertexLength,At=pt[1];if(Kf(G,I.x,I.y,Ae.x,At+Ae.y,Be.x,Be.y,u,et,je.x,je.y,Ue,ot),Kf(G,I.x,I.y,_e.x,At+_e.y,Be.x+Be.w,Be.y,u,et,Ye.x,je.y,Ue,ot),Kf(G,I.x,I.y,Me.x,At+Me.y,Be.x,Be.y+Be.h,u,et,je.x,Ye.y,Ue,ot),Kf(G,I.x,I.y,Le.x,At+Le.y,Be.x+Be.w,Be.y+Be.h,u,et,Ye.x,Ye.y,Ue,ot),E){const{x:yt,y:Kt,z:Lt}=E.anchor,[$t,ar,Ar]=E.up;Qf(W,yt,Kt,Lt,$t,ar,Ar),Qf(W,yt,Kt,Lt,$t,ar,Ar),Qf(W,yt,Kt,Lt,$t,ar,Ar),Qf(W,yt,Kt,Lt,$t,ar,Ar),ed(r.dynamicLayoutVertexArray,yt,Kt,Lt,ce)}else ed(r.dynamicLayoutVertexArray,I.x,I.y,I.z,ce);if(L){const yt=Fe||Be;Jf(r.iconTransitioningVertexArray,yt.x,yt.y),Jf(r.iconTransitioningVertexArray,yt.x+yt.w,yt.y),Jf(r.iconTransitioningVertexArray,yt.x,yt.y+yt.h),Jf(r.iconTransitioningVertexArray,yt.x+yt.w,yt.y+yt.h)}N.emplaceBack(Ot,Ot+1,Ot+2),N.emplaceBack(Ot+1,Ot+2,Ot+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pt[0]),he!==s.length-1&&zt===s[he+1].sectionIndex||r.programConfigurations.populatePaintArrays(G.length,g,g.index,{},S,P,R,pe&&pe[zt])}const ge=E?E.anchor:I;r.placedSymbolArray.emplaceBack(ge.x,ge.y,ge.z,I.x,I.y,Z,this.glyphOffsetArray.length-Z,Y,v,T,I.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],b,0,!1,0,M,0)}_commitLayoutVertex(r,s,u,m,f,g,b){r.emplaceBack(s,u,m,f,g,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(r,s,u,m,f,g,b){const E=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),I=E.vertexLength,v=b.tileAnchorX,T=b.tileAnchorY;for(let S=0;S<4;S++)u.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(u.collisionVertexArrayExt,s,r.padding,b.zOffset),this._commitLayoutVertex(u.layoutVertexArray,m,f,g,v,T,new vt(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,f,g,v,T,new vt(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,f,g,v,T,new vt(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,f,g,v,T,new vt(r.x1,r.y2)),E.vertexLength+=4;const M=u.indexArray;M.emplaceBack(I,I+1),M.emplaceBack(I+1,I+2),M.emplaceBack(I+2,I+3),M.emplaceBack(I+3,I),E.primitiveLength+=4}_addTextDebugCollisionBoxes(r,s,u,m,f,g){for(let b=m;b<f;b++){const E=u.get(b),I=this.getSymbolInstanceTextSize(r,g,s,b);this._addCollisionDebugVertices(E,I,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(r,s,u,m,f,g){for(let b=m;b<f;b++){const E=u.get(b),I=this.getSymbolInstanceIconSize(r,s,g.placedIconSymbolIndex);this._addCollisionDebugVertices(E,I,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,g)}}generateCollisionDebugBuffers(r,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nm(hl,Tw.members,Ds),this.iconCollisionBox=new nm(hl,Tw.members,Ds);const u=e0(this.iconSizeData,r),m=e0(this.textSizeData,r);for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(m,r,s,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(m,r,s,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(u,r,s,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(u,r,s,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(r,s,u,m){const f=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:m),g=Uf(this.textSizeData,r,f)/Ci;return this.tilePixelRatio*g}getSymbolInstanceIconSize(r,s,u){const m=this.icon.placedSymbolArray.get(u),f=Uf(this.iconSizeData,r,m);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(r,s,u,m){r.emplaceBack(s,-u,-u,m),r.emplaceBack(s,u,-u,m),r.emplaceBack(s,u,u,m),r.emplaceBack(s,-u,u,m)}_updateTextDebugCollisionBoxes(r,s,u,m,f,g){for(let b=m;b<f;b++){const E=u.get(b),I=this.getSymbolInstanceTextSize(r,g,s,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,I,E.padding,g.zOffset)}}_updateIconDebugCollisionBoxes(r,s,u,m,f,g){for(let b=m;b<f;b++){const E=u.get(b),I=this.getSymbolInstanceIconSize(r,s,g.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,I,E.padding,g.zOffset)}}updateCollisionDebugBuffers(r,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=e0(this.iconSizeData,r),m=e0(this.textSizeData,r);for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(m,r,s,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(m,r,s,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(u,r,s,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._updateIconDebugCollisionBoxes(u,r,s,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,s,u,m,f,g,b,E,I){const v={};if(s<u){const{x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$,featureIndex:Z}=r.get(s);v.textBox={x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$},v.textFeatureIndex=Z}if(m<f){const{x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$,featureIndex:Z}=r.get(m);v.verticalTextBox={x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$},v.verticalTextFeatureIndex=Z}if(g<b){const{x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$,featureIndex:Z}=r.get(g);v.iconBox={x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$},v.iconFeatureIndex=Z}if(E<I){const{x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$,featureIndex:Z}=r.get(E);v.verticalIconBox={x1:T,y1:M,x2:S,y2:P,padding:R,projectedAnchorX:L,projectedAnchorY:N,projectedAnchorZ:G,tileAnchorX:W,tileAnchorY:$},v.verticalIconFeatureIndex=Z}return v}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(r,s){const u=r.placedSymbolArray.get(s),m=u.vertexStartIndex+4*u.numGlyphs;for(let f=u.vertexStartIndex;f<m;f+=4)r.indexArray.emplaceBack(f,f+1,f+2),r.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),u=Math.cos(r),m=[],f=[],g=[];for(let b=0;b<this.symbolInstances.length;++b){g.push(b);const E=this.symbolInstances.get(b);m.push(0|Math.round(s*E.tileAnchorX+u*E.tileAnchorY)),f.push(E.featureIndex)}return g.sort((b,E)=>m[b]-m[E]||f[E]-f[b]),g}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let r=0;r<this.symbolInstances.length;++r)this.symbolInstanceIndexesSortedZOffset.push(r)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((r,s)=>this.symbolInstances.get(s).zOffset-this.symbolInstances.get(r).zOffset)}addToSortKeyRanges(r,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:m,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:I}=u;m>=0&&this.addIndicesForPlacedSymbol(this.text,m),f>=0&&f!==m&&this.addIndicesForPlacedSymbol(this.text,f),g>=0&&g!==f&&g!==m&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nA,iA,im;Ut(td,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),td.addDynamicAttributes=ed;class oA{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:ea,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut(oA,"FormatSectionOverride",{omit:["defaultValue"]});const om=()=>im||(im={layout:nA||(nA=new bn({"symbol-placement":new Et(He.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(He.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Et(He.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Et(He.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Et(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt(He.layout_symbol["icon-size"]),"icon-text-fit":new Xt(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt(He.layout_symbol["icon-image"]),"icon-rotate":new Xt(He.layout_symbol["icon-rotate"]),"icon-padding":new Et(He.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(He.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt(He.layout_symbol["icon-offset"]),"icon-anchor":new Xt(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(He.layout_symbol["text-rotation-alignment"]),"text-field":new Xt(He.layout_symbol["text-field"]),"text-font":new Xt(He.layout_symbol["text-font"]),"text-size":new Xt(He.layout_symbol["text-size"]),"text-max-width":new Xt(He.layout_symbol["text-max-width"]),"text-line-height":new Xt(He.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt(He.layout_symbol["text-letter-spacing"]),"text-justify":new Xt(He.layout_symbol["text-justify"]),"text-radial-offset":new Xt(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(He.layout_symbol["text-variable-anchor"]),"text-anchor":new Xt(He.layout_symbol["text-anchor"]),"text-max-angle":new Et(He.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(He.layout_symbol["text-writing-mode"]),"text-rotate":new Xt(He.layout_symbol["text-rotate"]),"text-padding":new Et(He.layout_symbol["text-padding"]),"text-keep-upright":new Et(He.layout_symbol["text-keep-upright"]),"text-transform":new Xt(He.layout_symbol["text-transform"]),"text-offset":new Xt(He.layout_symbol["text-offset"]),"text-allow-overlap":new Et(He.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Et(He.layout_symbol["text-ignore-placement"]),"text-optional":new Et(He.layout_symbol["text-optional"]),visibility:new Et(He.layout_symbol.visibility)})),paint:iA||(iA=new bn({"icon-opacity":new Xt(He.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Xt(He.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Xt(He.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Xt(He.paint_symbol["text-emissive-strength"]),"icon-color":new Xt(He.paint_symbol["icon-color"]),"icon-halo-color":new Xt(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt(He.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(He.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Xt(He.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Xt(He.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Xt(He.paint_symbol["text-occlusion-opacity"]),"text-color":new Xt(He.paint_symbol["text-color"],{runtimeType:ao,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Xt(He.paint_symbol["text-halo-color"]),"text-halo-width":new Xt(He.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt(He.paint_symbol["text-halo-blur"]),"text-translate":new Et(He.paint_symbol["text-translate"]),"text-translate-anchor":new Et(He.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Et(He.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Et(He.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Et(He.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Et(He.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Xt(He.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new Et(He.paint_symbol["symbol-elevation-reference"])}))},im);class rd extends Ni{constructor(r,s,u,m){super(r,om(),s,u,m),this._colorAdjustmentMatrix=Pe.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=r.paint!==void 0&&("icon-occlusion-opacity"in r.paint||"text-occlusion-opacity"in r.paint)}recalculate(r,s){super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const f of u)m.indexOf(f)<0&&m.push(f);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(r,s,u,m){return this._saturation===r&&this._contrast===s&&this._brightnessMin===u&&this._brightnessMax===m||(this._colorAdjustmentMatrix=function(f,g,b,E){f=we(f),g=ue(g);const I=Pe.mat4.create(),v=f/3,T=1-2*v,M=[T,v,v,0,v,T,v,0,v,v,T,0,0,0,0,1],S=.5-.5*g,P=E-b;return Pe.mat4.multiply(I,[P,0,0,0,0,P,0,0,0,0,P,0,b,b,b,1],[g,0,0,0,0,g,0,0,0,0,g,0,S,S,S,1]),Pe.mat4.multiply(I,I,M),I}(r,s,u,m),this._saturation=r,this._contrast=s,this._brightnessMin=u,this._brightnessMax=m),this._colorAdjustmentMatrix}getValueAndResolveTokens(r,s,u,m){const f=this.layout.get(r).evaluate(s,{},u,m),g=this._unevaluatedLayout._values[r];return g.isDataDriven()||M7(g.value)||!f?f:function(b,E){return E.replace(/{([^{}]+)}/g,(I,v)=>v in b?String(b[v]):"")}(s.properties,f)}createBucket(r){return new td(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of om().paint.overridableProperties){if(!rd.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),u=new oA(s),m=new P7(u,s.property.specification,this.scope,this.options);let f=null;f=s.value.kind==="constant"||s.value.kind==="source"?new _3("source",m):new Aa("composite",m,s.value.zoomStops,s.value._interpolationType),this.paint._values[r]=new x1(s.property,f,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&rd.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const u=r.get("text-field"),m=om().paint.properties[s];let f=!1;const g=b=>{for(const E of b)if(m.overrides&&m.overrides.hasOverride(E))return void(f=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Fi)g(u.value.value.sections);else if(u.value.kind==="source"){const b=I=>{f||(I instanceof ta&&Hn(I.value)===e1?g(I.value.sections):I instanceof i1?g(I.sections):I.eachChild(b))},E=u.value;E._styleExpression&&b(E._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(r,s,u){return{config:new dl(this,{zoom:s,lut:u}),overrideFog:!1}}}let aA,sA,lA,cA;var am=Nr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function sm(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function lm(c){switch(c){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class cm{constructor(r,s,u,m){this.context=r,this.format=u,this.useMipmap=m&&m.useMipmap,this.texture=r.gl.createTexture(),this.update(s,{premultiply:m&&m.premultiply})}update(r,s){const u=r&&r instanceof HTMLVideoElement&&r.width===0?r.videoWidth:r.width,m=r&&r instanceof HTMLVideoElement&&r.height===0?r.videoHeight:r.height,{context:f}=this,{gl:g}=f,{x:b,y:E}=s&&s.position?s.position:{x:0,y:0},I=Math.max(b+u,this.size?this.size[0]:0),v=Math.max(E+m,this.size?this.size[1]:0);!this.size||this.size[0]===I&&this.size[1]===v||(g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(this.texture),this.texture=g.createTexture(),this.size=null),g.bindTexture(g.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===g.RGBA8&&(!s||s.premultiply!==!1));const T=r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ImageBitmap&&r instanceof ImageBitmap;if(!this.size&&I>0&&v>0){const M=this.useMipmap?Math.floor(Math.log2(Math.max(I,v)))+1:1;g.texStorage2D(g.TEXTURE_2D,M,this.format,I,v),this.size=[I,v]}if(this.size)if(T)g.texSubImage2D(g.TEXTURE_2D,0,b,E,sm(this.format),lm(this.format),r);else{const M=r.data;M&&g.texSubImage2D(g.TEXTURE_2D,0,b,E,u,m,sm(this.format),lm(this.format),M)}this.useMipmap&&g.generateMipmap(g.TEXTURE_2D)}bind(r,s,u=!1){const{context:m}=this,{gl:f}=m;f.bindTexture(f.TEXTURE_2D,this.texture),r!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!u?r===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}bindExtraParam(r,s,u,m){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),s!==this.magFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,s),this.magFilter=s),r!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?r===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),u!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),this.wrapS=u),m!==this.wrapT&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,m),this.wrapT=m)}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class nd{constructor(r,s){this.context=r,this.texture=s}bind(r,s){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),r!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,r),this.minFilter=r),s!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,s),this.wrapS=s)}}function id(c,r,s,u,m,f,g,b){const E=[c,r,1,s,u,1,m,f,1],I=[g,b,1],v=Pe.mat3.adjoint([],E),[T,M,S]=Pe.vec3.transformMat3(I,I,v);return Pe.mat3.multiply(E,E,[T,0,0,0,M,0,0,0,S])}function uA(c,r,s,u,m,f,g,b){const E=function(I,v,T,M,S,P,R,L){const N=id(0,0,1,0,1,1,0,1),G=id(I,v,T,M,S,P,R,L),W=Pe.mat3.adjoint([],N);return Pe.mat3.multiply(G,G,W)}(c,r,s,u,m,f,g,b);return[E[2]/E[8]/Dt,E[5]/E[8]/Dt]}function od(c){return[c[0],Math.min(Math.max(c[1],-Se),Se)]}class hA extends Jl{constructor(r,s,u,m){super(),this.id=r,this.dispatcher=u,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(m),this.options=s,this._dirty=!1}load(r,s){if(this._loaded=s||!1,this.fire(new As("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return r&&(this.coordinates=r),this._loaded=!0,void this._finishLoading();this._imageRequest=va(this.map._requestManager.transformRequest(this.url,Xl.Image),(u,m)=>{this._imageRequest=null,this._loaded=!0,u?this.fire(new Cc(u)):m&&(this.image=m instanceof HTMLImageElement?Ft.getImageData(m):m,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,r&&(this.coordinates=r),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._imageRequest&&r.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=r.url,this.load(r.coordinates,this._loaded),this):this}setTexture(r){if(!(r.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new nd(this.map.painter.context,r.handle),this.width=r.dimensions[0],this.height=r.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new As("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(r){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof nd||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(r){if(this.coordinates=r,this._boundsArray=void 0,this._unsupportedCoords=!1,!r.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let s=r[0][1],u=r[0][1];for(const f of r)f[1]>u&&(u=f[1]),f[1]<s&&(s=f[1]);const m=(u+s)/2;if(m>Se?this.onNorthPole=!0:m<-Se&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=r.map(Ve.fromLngLat);this.tileID=function(g){let b=1/0,E=1/0,I=-1/0,v=-1/0;for(const R of g)b=Math.min(b,R.x),E=Math.min(E,R.y),I=Math.max(I,R.x),v=Math.max(v,R.y);const T=Math.max(I-b,v-E),M=Math.max(0,Math.floor(-Math.log(T)/Math.LN2)),S=Math.pow(2,M);let P=Math.floor((b+I)/2*S);return P>1&&(P-=1),new di(M,P,Math.floor((E+v)/2*S))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new As("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(r){for(const N in this.tiles){const G=this.tiles[N];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const s=ah(new di(0,0,0),this.map.transform.projection),u=[s.projection.project(this.coordinates[0][0],this.coordinates[0][1]),s.projection.project(this.coordinates[1][0],this.coordinates[1][1]),s.projection.project(this.coordinates[2][0],this.coordinates[2][1]),s.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(N){const G=N[1].x-N[0].x,W=N[1].y-N[0].y,$=N[2].x-N[1].x,Z=N[2].y-N[1].y,Y=N[3].x-N[2].x,ce=N[3].y-N[2].y,pe=N[0].x-N[3].x,ge=N[0].y-N[3].y,he=G*Z-$*W,Ae=$*ce-Y*Z,_e=Y*ge-pe*ce,Me=pe*W-G*ge;return he>0&&Ae>0&&_e>0&&Me>0||he<0&&Ae<0&&_e<0&&Me<0}(u))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const m=ah(this.tileID,this.map.transform.projection),[f,g,b,E]=this.coordinates.map(N=>{const G=m.projection.project(N[0],N[1]);return Kw(m,G)._round()});this.perspectiveTransform=uA(f.x,f.y,g.x,g.y,b.x,b.y,E.x,E.y);const I=this._boundsArray=new Os;I.emplaceBack(f.x,f.y,0,0),I.emplaceBack(g.x,g.y,Dt,0),I.emplaceBack(E.x,E.y,0,Dt),I.emplaceBack(b.x,b.y,Dt,Dt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=r.createVertexBuffer(I,am.members),this.boundsSegments=Rn.simpleSegment(0,0,4,2);const v=[],T=[od((M=this.coordinates)[0]),od(M[1]),od(M[2]),od(M[3])];var M;const[S,P,R,L]=function(N){let G=N[0][0],W=G,$=N[0][1],Z=$;for(let Y=1;Y<N.length;Y++)N[Y][0]<G?G=N[Y][0]:N[Y][0]>W&&(W=N[Y][0]),N[Y][1]<$?$=N[Y][1]:N[Y][1]>Z&&(Z=N[Y][1]);return[G,$,W-G,Z-$]}(T);{const N=new Os,[G,W,$,Z]=function(je){let Ye=je[0].x,Ue=Ye,ot=je[0].y,pt=ot;for(let et=1;et<je.length;et++)je[et].x<Ye?Ye=je[et].x:je[et].x>Ue&&(Ue=je[et].x),je[et].y<ot?ot=je[et].y:je[et].y>pt&&(pt=je[et].y);return[Ye,ot,Ue-Ye,pt-ot]}(u),Y=je=>[(je.x-G)/$,(je.y-W)/Z],[ce,pe,ge,he]=u.map(Y),Ae=function(je,Ye,Ue,ot,pt,et,zt,Ot){const At=id(0,0,1,0,1,1,0,1),yt=id(je,Ye,Ue,ot,pt,et,zt,Ot),Kt=Pe.mat3.adjoint([],yt);return Pe.mat3.multiply(At,At,Kt)}(ce[0],ce[1],pe[0],pe[1],ge[0],ge[1],he[0],he[1]);this.elevatedGlobePerspectiveTransform=uA(ce[0],ce[1],pe[0],pe[1],ge[0],ge[1],he[0],he[1]);const _e=(je,Ye)=>{v.push(je.lng);const Ue=Math.round((je.lng-S)/R*Dt),ot=Math.round((je.lat-P)/L*Dt),pt=Y(Ye),et=Pe.vec3.transformMat3([],[pt[0],pt[1],1],Ae),zt=Math.round(et[0]/et[2]*Dt),Ot=Math.round(et[1]/et[2]*Dt);N.emplaceBack(Ue,ot,zt,Ot)},Me=u[3].x-u[0].x,Le=u[3].y-u[0].y,Be=u[2].x-u[1].x,Fe=u[2].y-u[1].y;for(let je=0;je<65;je++){const Ye=je/64,Ue=[u[0].x+Ye*Me,u[0].y+Ye*Le],ot=[u[1].x+Ye*Be,u[1].y+Ye*Fe],pt=ot[0]-Ue[0],et=ot[1]-Ue[1];for(let zt=0;zt<65;zt++){const Ot=zt/64,At={x:Ue[0]+pt*Ot,y:Ue[1]+et*Ot,z:0};_e(s.projection.unproject(At.x,At.y),At)}}this.elevatedGlobeVertexBuffer=r.createVertexBuffer(N,am.members)}{this.maxLongitudeTriangleSize=0;let N=[],G=new Ti;const W=($,Z,Y)=>{G.emplaceBack($,Z,Y);const ce=v[$],pe=v[Z],ge=v[Y],he=Math.min(Math.min(ce,pe),ge),Ae=Math.max(Math.max(ce,pe),ge)-he;Ae>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Ae),N.push(he+Ae/2)};for(let $=0;$<64;$++)for(let Z=0;Z<64;Z++){const Y=65*$+Z,ce=Y+1,pe=Y+65,ge=pe+1;W(Y,pe,ce),W(ce,pe,ge)}[N,G]=function($,Z){const Y=Array.from({length:$.length},(ge,he)=>he);Y.sort((ge,he)=>$[ge]-$[he]);const ce=[],pe=new Ti;for(let ge=0;ge<Y.length;ge++){const he=Y[ge];ce.push($[he]);const Ae=3*he,_e=Ae+1;pe.emplaceBack(Z.uint16[Ae],Z.uint16[_e],Z.uint16[_e+1])}return[ce,pe]}(N,G),this.elevatedGlobeTrianglesCenterLongitudes=N,this.elevatedGlobeIndexBuffer=r.createIndexBuffer(G)}this.elevatedGlobeSegments=Rn.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,R/Dt,0,L/Dt,0,0,P,S,0])}prepare(){const r=Object.keys(this.tiles).length!==0;if(this.tileID&&!r)return;const s=this.map.painter.context,u=s.gl;!this._dirty||this.texture instanceof nd||(this.texture?this.texture.update(this.image):(this.texture=new cm(s,this.image,u.RGBA8),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),r&&this._prepareData(s)}loadTile(r,s){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},s(null)):(r.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(r){const s=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!s)return null;const u=this.elevatedGlobeTrianglesCenterLongitudes;let m=(f=r+180)+360*Math.round((u[0]-f)/360);var f;const g=new Rn,b=(T,M)=>{g.segments.push({vertexOffset:0,primitiveOffset:T,vertexLength:s.segments[0].vertexLength,primitiveLength:M,sortKey:void 0,vaos:{}})},E=.51*this.maxLongitudeTriangleSize;if(Math.abs(u[0]-m)<=E){const T=ae(u,0,u.length,m+E);return T===u.length||b(T,Qe(u,T+1,u.length,m+360-E)-T),g}m<u[0]&&(m+=360);const I=Qe(u,0,u.length,m-E);if(I===u.length)return b(0,u.length),g;b(0,I-0);const v=ae(u,I+1,u.length,m+E);return v!==u.length&&b(v,u.length-v),g}}const TB=(Math.pow(256,2)-1)/16907520;class fA extends Ni{constructor(r,s,u,m){super(r,{layout:lA||(lA=new bn({visibility:new Et(He.layout_raster.visibility)})),paint:cA||(cA=new bn({"raster-opacity":new Et(He.paint_raster["raster-opacity"]),"raster-color":new na(He.paint_raster["raster-color"]),"raster-color-mix":new Et(He.paint_raster["raster-color-mix"]),"raster-color-range":new Et(He.paint_raster["raster-color-range"]),"raster-hue-rotate":new Et(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(He.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(He.paint_raster["raster-saturation"]),"raster-contrast":new Et(He.paint_raster["raster-contrast"]),"raster-resampling":new Et(He.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(He.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Et(He.paint_raster["raster-emissive-strength"]),"raster-array-band":new Et(He.paint_raster["raster-array-band"]),"raster-elevation":new Et(He.paint_raster["raster-elevation"])}))},s,u,m),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(r){return!(r&&r._source instanceof hA&&(r._source.onNorthPole||r._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(r){r!=="raster-color"&&r!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(r){if(!this.hasColorMap()||!this._curRampRange)return;const s=this._transitionablePaint._values["raster-color"].value.expression,[u,m]=r||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(u)&&isNaN(m)||u===this._curRampRange[0]&&m===this._curRampRange[1]||(this.colorRamp=q3({expression:s,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:u,end:m}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[u,m])}}let dA,pA,mA,gA,yA;class _A extends Ni{constructor(r,s,u,m){super(r,{layout:dA||(dA=new bn({visibility:new Et(He["layout_raster-particle"].visibility)})),paint:pA||(pA=new bn({"raster-particle-array-band":new Et(He["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Et(He["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new na(He["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Et(He["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Et(He["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Et(He["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Et(He["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Et(He["paint_raster-particle"]["raster-particle-elevation"])}))},s,u,m),this._updateColorRamp(),this.lastInvalidatedAt=Ft.now()}onRemove(r){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(r){return!1}_handleSpecialPaintPropertyUpdate(r){r!=="raster-particle-color"&&r!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),r==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const r=this._transitionablePaint._values["raster-particle-color"].value.expression,s=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=q3({expression:r,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:s}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Ft.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class SB extends Ni{constructor(r,s){super(r,{},s,null),this.implementation=r,r.slot&&(this.slot=r.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(r){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}function um(c,r,s){const u=[0,0,1],m=Pe.quat.identity([]);return Pe.quat.rotateY(m,m,s?-br(c)+Math.PI:br(c)),Pe.quat.rotateX(m,m,-br(r)),Pe.vec3.transformQuat(u,u,m),Pe.vec3.normalize(u,u)}function vA(c,r){const s=ad(c.projection,c.zoom,c.width,c.height),u=function(f,g,b,E,I){const v=new q(b.lng-180*F1,b.lat),T=new q(b.lng+180*F1,b.lat),M=f.project(v.lng,v.lat),S=f.project(T.lng,T.lat),P=-Math.atan2(S.y-M.y,S.x-M.x),R=Ve.fromLngLat(b);R.y=mr(R.y,-1+F1,1-F1);const L=R.toLngLat(),N=f.project(L.lng,L.lat),G=Ve.fromLngLat(L);G.x+=F1;const W=G.toLngLat(),$=f.project(W.lng,W.lat),Z=bA($.x-N.x,$.y-N.y,P),Y=Ve.fromLngLat(L);Y.y+=F1;const ce=Y.toLngLat(),pe=f.project(ce.lng,ce.lat),ge=bA(pe.x-N.x,pe.y-N.y,P),he=Math.abs(Z.x)/Math.abs(ge.y),Ae=Pe.mat4.identity([]);Pe.mat4.rotateZ(Ae,Ae,-P*(1-(I?0:E)));const _e=Pe.mat4.identity([]);return Pe.mat4.scale(_e,_e,[1,1-(1-he)*E,1]),_e[4]=-ge.x/ge.y*E,Pe.mat4.rotateZ(_e,_e,P),Pe.mat4.multiply(_e,Ae,_e),_e}(c.projection,0,c.center,s,r),m=xA(c);return Pe.mat4.scale(u,u,[m,m,1]),u}function xA(c){const r=c.projection,s=ad(c.projection,c.zoom,c.width,c.height),u=hm(r,c.center),m=hm(r,q.convert(r.center));return Math.pow(2,u*s+(1-s)*m)}function ad(c,r,s,u,m=1/0){const f=c.range;if(!f)return 0;const g=Math.min(m,Math.max(s,u)),b=Math.log(g/1024)/Math.LN2;return Gl(f[0]+b,f[1]+b,r)}const F1=1/4e4;function hm(c,r){const s=mr(r.lat,-Se,Se),u=new q(r.lng-180*F1,s),m=new q(r.lng+180*F1,s),f=c.project(u.lng,s),g=c.project(m.lng,s),b=Ve.fromLngLat(u),E=Ve.fromLngLat(m),I=g.x-f.x,v=g.y-f.y,T=E.x-b.x,M=E.y-b.y,S=Math.sqrt((T*T+M*M)/(I*I+v*v));return Math.log(S)/Math.LN2}function bA(c,r,s){const u=Math.cos(s),m=Math.sin(s);return{x:c*u-r*m,y:c*m+r*u}}function wA(c,r,s){Pe.mat4.identity(c),Pe.mat4.rotateZ(c,c,br(r[2])),Pe.mat4.rotateX(c,c,br(r[0])),Pe.mat4.rotateY(c,c,br(r[1])),Pe.mat4.scale(c,c,s),Pe.mat4.multiply(c,c,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function sd(c,r,s,u,m,f,g,b){const E=[s[0]-r[0],s[1]-r[1],0],I=[u[0]-r[0],u[1]-r[1],0];if(Pe.vec3.length(E)<1e-12||Pe.vec3.length(I)<1e-12)return Pe.quat.identity(c);const v=Pe.vec3.cross([],E,I);Pe.vec3.normalize(v,v),Pe.vec3.subtract(I,u,r),E[2]=(f-m)*b,I[2]=(g-m)*b;const T=E;return Pe.vec3.cross(T,E,I),Pe.vec3.normalize(T,T),Pe.quat.rotationTo(c,v,T)}function fm(c,r,s=!1){const u=R1(r.zoom),m=function(f,g,b){const E=g.worldSize,I=[f[12],f[13],f[14]],v=xe(I[1]/E),T=be(I[0]/E),M=Pe.mat4.identity([]),S=de(1,v)*E,P=de(1,0)*E*ze(v,g.zoom),R=1/E8(E);let L=P*R;if(b){const $=ad(g.projection,g.zoom,g.width,g.height,1024);L=R*g.projection.pixelSpaceConversion(g.center.lat,E,$)}const N=F(v,T);Pe.vec3.add(N,N,Pe.vec3.scale([],Pe.vec3.normalize([],N),S*L*I[2]));const G=function($){const Z=[$[0],$[1],$[2]];let Y=[0,1,0];const ce=Pe.vec3.cross([],Y,Z);return Pe.vec3.cross(Y,Z,ce),Pe.vec3.squaredLength(Y)===0&&(Y=[0,1,0],Pe.vec3.cross(ce,Z,Y)),Pe.vec3.normalize(ce,ce),Pe.vec3.normalize(Y,Y),Pe.vec3.normalize(Z,Z),[ce[0],ce[1],ce[2],0,Y[0],Y[1],Y[2],0,Z[0],Z[1],Z[2],0,$[0],$[1],$[2],1]}(N);Pe.mat4.scale(M,M,[L,L,L*S]),Pe.mat4.translate(M,M,[-I[0],-I[1],-I[2]]);const W=Pe.mat4.multiply([],g.globeMatrix,G);return Pe.mat4.multiply(W,W,M),Pe.mat4.multiply(W,W,f),W}(c,r,s);if(u>0){const f=function(g,b){const E=b.worldSize,I=de(1,0)*E*ze(b.center.lat,b.zoom)/E8(E),v=de(1,b.center.lat)*E,T=Pe.mat4.identity([]);return Pe.mat4.rotateY(T,T,br(b.center.lng)),Pe.mat4.rotateX(T,T,br(b.center.lat)),Pe.mat4.translate(T,T,[0,0,i]),Pe.mat4.scale(T,T,[I,I,I*v]),Pe.mat4.translate(T,T,[b.point.x-.5*E,b.point.y-.5*E,0]),Pe.mat4.multiply(T,T,g),Pe.mat4.multiply(T,b.globeMatrix,T)}(c,r);return function(g,b,E){const I=(P,R,L)=>{const N=Pe.vec3.length(P),G=Pe.vec3.length(R),W=ml(P,R,L);return Pe.vec3.scale(W,W,1/Pe.vec3.length(W)*nr(N,G,L))},v=I([g[0],g[1],g[2]],[b[0],b[1],b[2]],E),T=I([g[4],g[5],g[6]],[b[4],b[5],b[6]],E),M=I([g[8],g[9],g[10]],[b[8],b[9],b[10]],E),S=ml([g[12],g[13],g[14]],[b[12],b[13],b[14]],E);return[v[0],v[1],v[2],0,T[0],T[1],T[2],0,M[0],M[1],M[2],0,S[0],S[1],S[2],1]}(m,f,u)}return m}function AA(c,r,s,u){const m=fn.projectAabbCorners(u,s);let f=Number.MAX_VALUE,g=-1;for(let I=0;I<m.length;++I){const v=m[I];v[0]=(.5*v[0]+.5)*r.width,v[1]=(.5-.5*v[1])*r.height,v[2]<f&&(g=I,f=v[2])}const b=I=>new vt(m[I][0],m[I][1]);let E;switch(g){case 0:case 6:E=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:E=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:E=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:E=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(It(c,E))return f}const EB=Nr([{name:"a_pos_3f",components:3,type:"Float32"}]),PB=Nr([{name:"a_color_3f",components:3,type:"Float32"}]),MB=Nr([{name:"a_color_4f",components:4,type:"Float32"}]),CB=Nr([{name:"a_uv_2f",components:2,type:"Float32"}]),IB=Nr([{name:"a_normal_3f",components:3,type:"Float32"}]),OB=Nr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),RB=Nr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),TA={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class ld{constructor(r,s,u,m){this.message=(r?`${r}: `:"")+u,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function SA(c,r){const s=c.indexOf("://")===-1;try{return new URL(c,s&&r?"http://example.com":void 0),!0}catch{return!1}}class EA{constructor(r,s){this.feature=r,this.instancedDataOffset=s,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class PA{constructor(){this.instancedDataArray=new eu,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class dm{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.projection=r.projection,this.index=r.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(r,s){}populate(r,s,u,m){this.tileToMeter=Re(u);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:g,id:b,index:E,sourceLayerIndex:I}of r){const v=b??(g.properties&&g.properties.hasOwnProperty("id")?g.properties.id:void 0),T=Tt(g,f);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),T,u))continue;const M={id:v,sourceLayerIndex:I,index:E,geometry:f?T.geometry:wt(g,u,m),properties:g.properties,type:g.type,patterns:{}},S=this.addFeature(M,M.geometry,T);S&&s.featureIndex.insert(g,M.geometry,E,I,this.index,this.instancesPerModel[S].instancedDataArray.length,Dt/32)}this.lookup=null}update(r,s,u,m){for(const f in this.instancesPerModel){const g=this.instancesPerModel[f];for(const b in r)g.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(g.features[g.idToFeaturesIndex[b]],r[b],g,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let r=!1;for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];for(const m of u.features){const f=this.layers[0],g=m.feature,b=this.canonical,E=f.paint.get("model-rotation").evaluate(g,{},b),I=f.paint.get("model-scale").evaluate(g,{},b),v=f.paint.get("model-translation").evaluate(g,{},b);Pe.vec3.exactEquals(m.rotation,E)&&Pe.vec3.exactEquals(m.scale,I)&&Pe.vec3.exactEquals(m.translation,v)||(this.evaluate(m,m.featureStates,u,!0),r=!0)}}return r}updateReplacement(r,s,u,m){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const f=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);if(N8(this.activeReplacements,f))return!1;this.activeReplacements=f;let g=!1;for(const b in this.instancesPerModel){const E=this.instancesPerModel[b],I=E.instancedDataArray;for(const v of E.features){const T=v.instancedDataOffset,M=v.instancedDataCount;for(let S=0;S<M;S++){const P=16*(S+T);let R=I.float32[P+0];const L=R>Dt;R=L?R-Dt:R;const N=Math.floor(R),G=I.float32[P+1];let W=!1;for(const $ of this.activeReplacements)if(!Ub($,u,TA.Model,m)&&!($.min.x>N||N>$.max.x||$.min.y>G||G>$.max.y)&&(W=Zb(Hb(N,G,r.canonical,$.footprintTileId.canonical),$.footprint),W))break;I.float32[P]=W?R+Dt:R,g=g||W!==L}}}return g}isEmpty(){for(const r in this.instancesPerModel)if(this.instancesPerModel[r].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(r){if(!this.uploaded)for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length<0||u.instancedDataArray.length===0||(u.instancedDataBuffer?u.instancedDataBuffer.updateData(u.instancedDataArray):u.instancedDataBuffer=r.createVertexBuffer(u.instancedDataArray,OB.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length!==0&&u.instancedDataBuffer&&u.instancedDataBuffer.destroy()}const r=this.layers[0].modelManager;if(r&&this.modelUris)for(const s of this.modelUris)r.removeModel(s,"")}addFeature(r,s,u){const m=this.layers[0],f=m.layout.get("model-id").evaluate(u,{},this.canonical);if(!f)return Br(`modelId is not evaluated for layer ${m.id} and it is not going to get rendered.`),f;SA(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new PA);const g=this.instancesPerModel[f],b=g.instancedDataArray,E=new EA(u,b.length);for(const I of s)for(const v of I){if(v.x<0||v.x>=Dt||v.y<0||v.y>=Dt)continue;const T=(this.lookupDim-1)/Dt,M=this.lookupDim*(v.y*T|0)+v.x*T|0;if(this.lookup){if(this.lookup[M]!==0)continue;this.lookup[M]=1}this.instanceCount++;const S=b.length;b.resize(S+1),g.instancesEvaluatedElevation.push(0),b.float32[16*S]=v.x,b.float32[16*S+1]=v.y}return E.instancedDataCount=g.instancedDataArray.length-E.instancedDataOffset,E.instancedDataCount>0&&(r.id&&(g.idToFeaturesIndex[r.id]=g.features.length),g.features.push(E),this.evaluate(E,{},g,!1)),f}getModelUris(){return this.modelUris}evaluate(r,s,u,m){const f=this.layers[0],g=r.feature,b=this.canonical,E=r.rotation=f.paint.get("model-rotation").evaluate(g,s,b),I=r.scale=f.paint.get("model-scale").evaluate(g,s,b),v=r.translation=f.paint.get("model-translation").evaluate(g,s,b),T=f.paint.get("model-color").evaluate(g,s,b);T.a=f.paint.get("model-color-mix-intensity").evaluate(g,s,b);const M=[];this.maxVerticalOffset<v[2]&&(this.maxVerticalOffset=v[2]),this.maxScale=Math.max(Math.max(this.maxScale,I[0]),Math.max(I[1],I[2])),wA(M,E,I);const S=Math.round(100*T.a)+T.b/1.05;for(let P=0;P<r.instancedDataCount;++P){const R=r.instancedDataOffset+P,L=16*R,N=u.instancedDataArray.float32;let G=0;m&&(G=N[L+6]-u.instancesEvaluatedElevation[R]);const W=0|N[L+1];N[L]=(0|N[L])+T.r/1.05,N[L+1]=W+T.g/1.05,N[L+2]=S,N[L+3]=1/(b.z>10?this.tileToMeter:Re(b,W)),N[L+4]=v[0],N[L+5]=v[1],N[L+6]=v[2]+G,N[L+7]=M[0],N[L+8]=M[1],N[L+9]=M[2],N[L+10]=M[4],N[L+11]=M[5],N[L+12]=M[6],N[L+13]=M[8],N[L+14]=M[9],N[L+15]=M[10],u.instancesEvaluatedElevation[R]=v[2]}}}let MA,CA;Ut(dm,"ModelBucket",{omit:["layers"]}),Ut(PA,"PerModelAttributes"),Ut(EA,"ModelFeature");const su=64,o0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function IA(c,r,s,u,m,f,g,b,E,I=!1){const v=s.zoom,T=s.project(u),M=ze(u.lat,v),S=1/M;Pe.mat4.identity(c),Pe.mat4.translate(c,c,[T.x+g[0]*S,T.y+g[1]*S,g[2]]);let P=1,R=1;const L=s.worldSize;if(I){if(s.projection.name==="mercator"){let $=0;s.elevation&&($=s.elevation.getAtPointOrZero(new Ve(T.x/L,T.y/L),0));const Z=Pe.vec4.transformMat4([],[T.x,T.y,$,1],s.projMatrix)[3]/s.cameraToCenterDistance;P=Z,R=Z*ze(s.center.lat,v)}else if(s.projection.name==="globe"){const $=fm(c,s),Z=Pe.mat4.multiply([],s.projMatrix,$),Y=[0,0,0,1];Pe.vec4.transformMat4(Y,Y,Z);const ce=Y[3]/s.cameraToCenterDistance,pe=R1(v),ge=s.projection.pixelsPerMeter(u.lat,L)*ze(u.lat,v),he=s.projection.pixelsPerMeter(s.center.lat,L)*ze(s.center.lat,v);P=ce/nr(ge,Ie(s.center.lat),pe),R=ce*M/ge,P*=he,R*=he}}else P=S;Pe.mat4.scale(c,c,[P,P,R]);const N=[...c],G=r.orientation,W=[];if(wA(W,[G[0]+m[0],G[1]+m[1],G[2]+m[2]],f),Pe.mat4.multiply(c,N,W),b&&s.elevation){let $=0;const Z=[];if(E&&s.elevation){$=function(pe,ge,he,Ae,_e){const Me=ge.elevation;if(!Me)return 0;const Le=fn.projectAabbCorners(he,Ae),Be=de(1,_e.lat)*ge.worldSize,Fe=function(Kt,Lt){const $t=[0,0,1],ar=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ar of ar){const yr=Kt[Ar.corners[0]],_r=Kt[Ar.corners[1]],Sr=Kt[Ar.corners[2]],Er=[_r[0]-yr[0],_r[1]-yr[1],Lt*(_r[2]-yr[2])],on=Pe.vec3.cross(Er,Er,[Sr[0]-yr[0],Sr[1]-yr[1],Lt*(Sr[2]-yr[2])]);Pe.vec3.normalize(on,on),Ar.dotProductWithUp=Pe.vec3.dot(on,$t)}return ar.sort((Ar,yr)=>Ar.dotProductWithUp-yr.dotProductWithUp),ar[0].corners}(Le,Be),je=Le[Fe[0]],Ye=Le[Fe[1]],Ue=Le[Fe[2]],ot=Le[Fe[3]],pt=Me.getAtPointOrZero(new Ve(je[0]/ge.worldSize,je[1]/ge.worldSize),0),et=Me.getAtPointOrZero(new Ve(Ye[0]/ge.worldSize,Ye[1]/ge.worldSize),0),zt=Me.getAtPointOrZero(new Ve(Ue[0]/ge.worldSize,Ue[1]/ge.worldSize),0),Ot=Me.getAtPointOrZero(new Ve(ot[0]/ge.worldSize,ot[1]/ge.worldSize),0),At=(pt+Ot)/2,yt=(et+zt)/2;return At>yt?et<zt?sd(pe,Ye,ot,je,et,Ot,pt,Be):sd(pe,Ue,je,ot,zt,pt,Ot,Be):pt<Ot?sd(pe,je,Ye,Ue,pt,et,zt,Be):sd(pe,ot,Ue,Ye,Ot,zt,et,Be),Math.max(At,yt)}(Z,s,r.aabb,c,u);const Y=Pe.mat4.fromQuat([],Z),ce=Pe.mat4.multiply([],Y,W);Pe.mat4.multiply(c,N,ce)}else $=s.elevation.getAtPointOrZero(new Ve(T.x/L,T.y/L),0);$!==0&&(c[14]+=$)}}function hh(c,r,s=!1){c.uploaded||(c.gfxTexture=new cm(r,c.image,s?r.gl.R8:r.gl.RGBA8,{useMipmap:c.sampler.minFilter>=r.gl.NEAREST_MIPMAP_NEAREST}),c.uploaded=!0,c.image=null)}function DB(c,r,s){c.indexBuffer=r.createIndexBuffer(c.indexArray,!1,!0),c.vertexBuffer=r.createVertexBuffer(c.vertexArray,EB.members,!1,!0),c.normalArray&&(c.normalBuffer=r.createVertexBuffer(c.normalArray,IB.members,!1,!0)),c.texcoordArray&&(c.texcoordBuffer=r.createVertexBuffer(c.texcoordArray,CB.members,!1,!0)),c.colorArray&&(c.colorBuffer=r.createVertexBuffer(c.colorArray,(c.colorArray.bytesPerElement===12?PB:MB).members,!1,!0)),c.featureArray&&(c.pbrBuffer=r.createVertexBuffer(c.featureArray,RB.members,!0)),c.segments=Rn.simpleSegment(0,0,c.vertexArray.length,c.indexArray.length);const u=c.material;u.pbrMetallicRoughness.baseColorTexture&&hh(u.pbrMetallicRoughness.baseColorTexture,r),u.pbrMetallicRoughness.metallicRoughnessTexture&&hh(u.pbrMetallicRoughness.metallicRoughnessTexture,r),u.normalTexture&&hh(u.normalTexture,r),u.occlusionTexture&&hh(u.occlusionTexture,r,s),u.emissionTexture&&hh(u.emissionTexture,r)}function pm(c,r,s){if(c.meshes)for(const u of c.meshes)DB(u,r,s);if(c.children)for(const u of c.children)pm(u,r,s)}function cd(c){if(c.meshes)for(const r of c.meshes)r.indexArray.destroy(),r.vertexArray.destroy(),r.colorArray&&r.colorArray.destroy(),r.normalArray&&r.normalArray.destroy(),r.texcoordArray&&r.texcoordArray.destroy(),r.featureArray&&r.featureArray.destroy();if(c.children)for(const r of c.children)cd(r)}function mm(c){if(c.meshes)for(const s of c.meshes)s.vertexBuffer&&(s.vertexBuffer.destroy(),s.indexBuffer.destroy(),s.normalBuffer&&s.normalBuffer.destroy(),s.texcoordBuffer&&s.texcoordBuffer.destroy(),s.colorBuffer&&s.colorBuffer.destroy(),s.pbrBuffer&&s.pbrBuffer.destroy(),s.segments.destroy(),s.material&&((r=s.material).pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),r.normalTexture&&r.normalTexture.gfxTexture&&r.normalTexture.gfxTexture.destroy(),r.emissionTexture&&r.emissionTexture.gfxTexture&&r.emissionTexture.gfxTexture.destroy(),r.occlusionTexture&&r.occlusionTexture.gfxTexture&&r.occlusionTexture.gfxTexture.destroy()));var r;if(c.children)for(const s of c.children)mm(s)}class a0{constructor(r,s,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(r,s,u){const m=u||r.findDEMTileFor(s);if(!m||!m.dem)return;const f=m.dem,g=m.tileID,b=1<<s.canonical.z-g.canonical.z;return new a0(m,f.dim/Dt/b,[(s.canonical.x/b-g.canonical.x)*f.dim,(s.canonical.y/b-g.canonical.y)*f.dim])}tileCoordToPixel(r,s){const u=s*this._scale+this._offset[1],m=Math.floor(r*this._scale+this._offset[0]),f=Math.floor(u);return new vt(m,f)}getElevationAt(r,s,u,m){const f=r*this._scale+this._offset[0],g=s*this._scale+this._offset[1],b=Math.floor(f),E=Math.floor(g),I=this._dem;return m=!!m,u?nr(nr(I.get(b,E,m),I.get(b,E+1,m),g-E),nr(I.get(b+1,E,m),I.get(b+1,E+1,m),g-E),f-b):I.get(b,E,m)}getElevationAtPixel(r,s,u){return this._dem.get(r,s,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*de(1,r)*this._dem.stride}}const gm=new Float32Array(262144),lu=new Uint8Array(262144);function OA(c){let r=0;if(c.meshes)for(const s of c.meshes)r=Math.max(r,s.aabb.max[2]);if(c.children)for(const s of c.children)r=Math.max(r,OA(s));return r}function RA(c,r,s){if(c.meshes)for(const u of c.meshes)u.aabb.min[0]!==1/0&&s.insert(r,u.aabb.min[0],u.aabb.min[1],u.aabb.max[0],u.aabb.max[1]);if(c.children)for(const u of c.children)RA(u,r,s)}const DA=["","wall","door","roof","window","lamp","logo"];class kA{constructor(r){this.node=r,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:r.id,geometry:[],properties:{height:OA(r)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new fn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let r=0;const s=new fn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.node.meshes)this.node.lightMeshIndex!==r&&(u.transformedAabb=fn.applyTransformFast(u.aabb,this.node.matrix),s.encapsulate(u.transformedAabb)),r++;this.aabb=s}return this.aabb}}class ud{constructor(r,s,u,m,f,g){this.id=s,this.modelTraits|=o0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,u&&(this.modelTraits|=o0.HasMapboxMeshFeatures),m&&(this.modelTraits|=o0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=f,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const b of r)this.nodesInfo.push(new kA(b)),RA(b,g.featureIndexArray.length,g.grid),g.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,g.bucketLayerIDs.length-1,0)}updateFootprints(r,s){for(const u of this.getNodesInfo()){const m=u.node;m.footprint&&s.push({footprint:m.footprint,id:r})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(r){if(!this.needsUpload)return;const s=this.getNodesInfo();for(const u of s){const m=u.node;this.uploaded?this.updatePbrBuffer(m):pm(m,r,!0)}for(const u of s)cd(u.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(r){let s=!1;if(!r.meshes)return s;for(const u of r.meshes)u.pbrBuffer&&(u.pbrBuffer.updateData(u.featureArray),s=!0);return s}needsReEvaluation(r,s,u){const m=r.transform.projectionOptions,f=r.style.getBrightness(),g=this.brightness!==f;return!!(!this.uploaded||this.dirty||m.name!==this.projection.name||fh(u.paint.get("model-color").value,g)||fh(u.paint.get("model-color-mix-intensity").value,g)||fh(u.paint.get("model-roughness").value,g)||fh(u.paint.get("model-emissive-strength").value,g)||fh(u.paint.get("model-height-based-emissive-strength-multiplier").value,g))&&(this.projection=m,this.brightness=f,!0)}evaluateScale(r,s){if(r.transform.zoom===this.zoom)return;this.zoom=r.transform.zoom;const u=this.getNodesInfo(),m=this.id.canonical;for(const f of u){const g=f.feature;f.evaluatedScale=s.paint.get("model-scale").evaluate(g,{},m)}}evaluate(r){const s=this.getNodesInfo();for(const u of s){if(!u.node.meshes)continue;const m=u.feature,f=u.node.meshes&&u.node.meshes[0].featureData,g=u.evaluatedColor[2],b=u.evaluatedRMEA[2],E=this.id.canonical;if(u.hasTranslucentParts=!1,f){for(let I=0;I<DA.length;I++){const v=DA[I];v.length&&(m.properties.part=v);const T=r.paint.get("model-color").evaluate(m,{},E).toRenderColor(null),M=r.paint.get("model-color-mix-intensity").evaluate(m,{},E);u.evaluatedColor[I]=[T.r,T.g,T.b,M],u.evaluatedRMEA[I][0]=r.paint.get("model-roughness").evaluate(m,{},E),u.evaluatedRMEA[I][2]=r.paint.get("model-emissive-strength").evaluate(m,{},E),u.evaluatedRMEA[I][3]=T.a,u.emissionHeightBasedParams[I]=r.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,{},E),!u.hasTranslucentParts&&T.a<1&&(u.hasTranslucentParts=!0)}delete m.properties.part,LB(u,g!==u.evaluatedColor[2]||b!==u.evaluatedRMEA[2],this.modelTraits)}else u.evaluatedRMEA[0][2]=r.paint.get("model-emissive-strength").evaluate(m,{},E);u.evaluatedScale=r.paint.get("model-scale").evaluate(m,{},E),this.updatePbrBuffer(u.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(r,s,u,m){const f=r.findDEMTileFor(u);if(f&&(f.tileID.canonical!==this.terrainTile||s!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const g=a0.create(r,u,f);if(!g)return;this.modelTraits&o0.HasMapboxMeshFeatures&&this.updateDEM(r,g,u,m);for(const b of this.getNodesInfo()){const E=b.node;if(!E.footprint||!E.footprint.vertices||!E.footprint.vertices.length)continue;const I=E.footprint.vertices;let v=g.getElevationAt(I[0].x,I[0].y,!0,!0);for(let T=1;T<I.length;T++)v=Math.min(v,g.getElevationAt(I[T].x,I[T].y,!0,!0));E.elevation=v}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=s}}updateDEM(r,s,u,m){let f=s._dem._modifiedForSources[m];if(f===void 0&&(s._dem._modifiedForSources[m]=[],f=s._dem._modifiedForSources[m]),f.includes(u.canonical))return;const g=s._dem.dim;f.push(u.canonical);let b=!1;for(const E of this.getNodesInfo()){const I=E.node;if(!I.footprint||!I.footprint.grid)continue;const v=I.footprint.grid,T=s.tileCoordToPixel(v.min.x,v.min.y),M=s.tileCoordToPixel(v.max.x,v.max.y),S=Math.min(Math.min(g-M.y,T.x),Math.min(T.y,g-M.x));if(S<0)continue;const P=mr(S,2,5);let R=Math.max(0,T.x-P),L=Math.max(0,T.y-P),N=Math.min(M.x+P,g-1),G=Math.min(M.y+P,g-1);for(let Y=L;Y<=G;++Y)for(let ce=R;ce<=N;++ce)lu[Y*g+ce]=255;let W=0,$=0;for(let Y=0;Y<v.cellsY;++Y)for(let ce=0;ce<v.cellsX;++ce){if(!v.cells[Y*v.cellsX+ce])continue;const pe=s.tileCoordToPixel(v.min.x+ce/v.xScale,v.min.y+Y/v.yScale),ge=s.tileCoordToPixel(v.min.x+(ce+1)/v.xScale,v.min.y+(Y+1)/v.yScale);for(let he=pe.y;he<=Math.min(ge.y+1,g-1);++he)for(let Ae=pe.x;Ae<=Math.min(ge.x+1,g-1);++Ae)lu[he*g+Ae]===255&&(lu[he*g+Ae]=0,W+=s.getElevationAtPixel(Ae,he),$++)}const Z=W/$;R=Math.max(1,T.x-P),L=Math.max(1,T.y-P),N=Math.min(M.x+P,g-2),G=Math.min(M.y+P,g-2),b=!0;for(let Y=L;Y<=G;++Y)for(let ce=R;ce<=N;++ce)lu[Y*g+ce]===0&&(gm[Y*g+ce]=s._dem.set(ce,Y,Z));for(let Y=1;Y<P;++Y){R=Math.max(1,T.x-Y),L=Math.max(1,T.y-Y),N=Math.min(M.x+Y,g-2),G=Math.min(M.y+Y,g-2);for(let ce=L;ce<=G;++ce)for(let pe=R;pe<=N;++pe){const ge=ce*g+pe;if(lu[ge]===255){let he=0,Ae=0,_e=-1,Me=-1;for(let Le=-1;Le<=1;++Le)for(let Be=-1;Be<=1;++Be){const Fe=(ce+Le)*g+pe+Be;if(lu[Fe]>=Y)continue;const je=gm[Fe],Ye=Math.abs(je);Ye>Ae&&(he=je,Ae=Ye,_e=Be,Me=Le)}if(Ae>.1){const Le=1-(Y+.5*Math.abs(_e*Me))/P;let Be=s._dem.get(pe,ce)+he*Le;const Fe=s._dem.get(pe+_e,ce+Me),je=s._dem.get(pe-_e,ce-Me,!0);(Be-Fe)*(Be-je)>0&&(Be=(Fe+je)/2),gm[ge]=s._dem.set(pe,ce,Be),lu[ge]=Y}}}}}b&&(s._demTile.needsDEMTextureUpload=!0,s._dem._timestamp=Ft.now())}getNodesInfo(){return this.nodesInfo}destroy(){const r=this.getNodesInfo();for(const s of r)cd(s.node),mm(s.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped()),m=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const g=m[f].node;m[f].hiddenByReplacement=!!g.footprint&&!u.find(b=>b.footprint===g.footprint)}}getHeightAtTileCoord(r,s){const u=this.getNodesInfo(),m=[],f=[0,0,0],g=Pe.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const E=u[b],I=E.node.meshes[0],v=I.transformedAabb;if(r<v.min[0]||s<v.min[1]||r>v.max[0]||s>v.max[1])continue;if(E.node.hidden===!0)return{height:1/0,maxHeight:E.feature.properties.height,hidden:!1,verticalScale:E.evaluatedScale[2]};Pe.mat4.invert(g,E.node.matrix),f[0]=r,f[1]=s,Pe.vec3.transformMat4(f,f,g);const T=(f[0]-I.aabb.min[0])/(I.aabb.max[0]-I.aabb.min[0])*su|0,M=Math.min(63,(f[1]-I.aabb.min[1])/(I.aabb.max[1]-I.aabb.min[1])*su|0)*su+Math.min(63,T),S=I.heightmap[M];if(!(S<0&&E.node.footprint))return E.hiddenByReplacement?void 0:{height:S,maxHeight:E.feature.properties.height,hidden:!1,verticalScale:E.evaluatedScale[2]};if(E.node.footprint.grid.query(new vt(r,s),new vt(r,s),m),m.length>0)return{height:void 0,maxHeight:E.feature.properties.height,hidden:E.hiddenByReplacement,verticalScale:E.evaluatedScale[2]}}}}function fh(c,r){return!c.isLightConstant&&r}function kB(c,r,s,u,m,f,g,b){let E=(61440&r|(61440&r)>>4)>>8,I=(3840&r|(3840&r)>>4)>>4,v=240&r|(240&r)>>4;s[3]>0&&(E=nr(E,255*s[0],s[3]),I=nr(I,255*s[1],s[3]),v=nr(v,255*s[2],s[3]));const T=E<<8|I,M=v<<8|Math.floor(255*u[3]),S=function(Y){const ce=mr(Y,0,2);return Math.min(Math.round(.5*ce*255),255)}(u[2])<<8|15*u[0]<<4|15*u[1],P=mr(m[0],0,1),R=mr(m[1],0,1),L=mr(m[2],0,1),N=mr(m[3],0,1);let G,W,$,Z;if(P!==R&&g!==f&&R!==P){const Y=g-f;W=1/(Y*(R-P)),$=-(f+Y*P)/(Y*(R-P));const ce=mr(m[4],-1,1);Z=Math.pow(10,ce),G=255*L<<8|255*N}else G=65535,W=0,$=1,Z=1;if(c.emplaceBack(T,M,S,G,W,$,Z),b){const Y=b.length;b.clear();for(let ce=0;ce<Y;ce++)b.emplaceBack(T,M,S,G,W,$,Z)}}function LB(c,r,s){const u=c.node;let m=0;const f=s&o0.HasMeshoptCompression;for(const g of u.meshes){if(u.lights&&u.lightMeshIndex===m||!g.featureData)continue;g.featureArray=new G7,g.featureArray.reserve(g.featureData.length);let b=r;for(const E of g.featureData){const I=f?65535&E:E>>16&65535,v=f?E>>16&65535:65535&E,T=(15&v)<8?15&v:0,M=c.evaluatedRMEA[T],S=c.evaluatedColor[T],P=c.emissionHeightBasedParams[T];let R;if(b&&T===2&&u.lights&&(R=new G7,R.resize(10*u.lights.length)),kB(g.featureArray,I,S,M,P,g.aabb.min[2],g.aabb.max[2],R),R&&b){b=!1;const L=u.meshes[u.lightMeshIndex];L.featureArray=R,L.featureArray._trim()}}g.featureArray._trim(),m++}}function LA(c,r,s,u){const m=1<<c.z;r.lat=xe((u/Dt+c.y)/m),r.lng=be((s/Dt+c.x)/m)}Ut(ud,"Tiled3dModelBucket",{omit:["layers"]}),Ut(kA,"Tiled3dModelFeature");const zB={circle:class extends Ni{constructor(c,r,s,u){super(c,{layout:Wr||(Wr=new bn({"circle-sort-key":new Xt(He.layout_circle["circle-sort-key"]),visibility:new Et(He.layout_circle.visibility)})),paint:Dn||(Dn=new bn({"circle-radius":new Xt(He.paint_circle["circle-radius"]),"circle-color":new Xt(He.paint_circle["circle-color"]),"circle-blur":new Xt(He.paint_circle["circle-blur"]),"circle-opacity":new Xt(He.paint_circle["circle-opacity"]),"circle-translate":new Et(He.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt(He.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Et(He.paint_circle["circle-emissive-strength"])}))},r,s,u)}createBucket(c){return new Yt(c)}queryRadius(c){const r=c;return wn("circle-radius",this,r)+wn("circle-stroke-width",this,r)+Qr(this.paint.get("circle-translate"))}queryIntersectsFeature(c,r,s,u,m,f,g,b){const E=jr(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,c.pixelToTileUnitsFactor),I=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s);return db(c,u,f,g,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,I)}getProgramIds(){return["circle"]}getDefaultProgramParams(c,r,s){const u=fb(this);return{config:new dl(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}},heatmap:class extends Ni{createBucket(c){return new mb(c)}constructor(c,r,s,u){super(c,{layout:gb||(gb=new bn({visibility:new Et(He.layout_heatmap.visibility)})),paint:yb||(yb=new bn({"heatmap-radius":new Xt(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new na(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(He.paint_heatmap["heatmap-opacity"])}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=q3({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return wn("heatmap-radius",this,c)}queryIntersectsFeature(c,r,s,u,m,f,g,b){const E=this.paint.get("heatmap-radius").evaluate(r,s);return db(c,u,f,g,b,!0,!0,new vt(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(c,r,s){return c==="heatmap"?{config:new dl(this,{zoom:r,lut:s}),overrideFog:!1}:{}}},hillshade:class extends Ni{constructor(c,r,s,u){super(c,{layout:_b||(_b=new bn({visibility:new Et(He.layout_hillshade.visibility)})),paint:vb||(vb=new bn({"hillshade-illumination-direction":new Et(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(He.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Et(He.paint_hillshade["hillshade-emissive-strength"])}))},r,s,u)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(c,r,s){return{overrideFog:!1}}},fill:class extends Ni{constructor(c,r,s,u){super(c,{layout:Pb||(Pb=new bn({"fill-sort-key":new Xt(He.layout_fill["fill-sort-key"]),visibility:new Et(He.layout_fill.visibility)})),paint:Mb||(Mb=new bn({"fill-antialias":new Et(He.paint_fill["fill-antialias"]),"fill-opacity":new Xt(He.paint_fill["fill-opacity"]),"fill-color":new Xt(He.paint_fill["fill-color"]),"fill-outline-color":new Xt(He.paint_fill["fill-outline-color"]),"fill-translate":new Et(He.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xt(He.paint_fill["fill-pattern"]),"fill-emissive-strength":new Et(He.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Xt(He.paint_fill["fill-z-offset"])}))},r,s,u)}getProgramIds(){const c=this.paint.get("fill-pattern"),r=c&&c.constantOr(1),s=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getDefaultProgramParams(c,r,s){return{config:new dl(this,{zoom:r,lut:s}),overrideFog:!1}}recalculate(c,r){super.recalculate(c,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new D8(c)}queryRadius(){return Qr(this.paint.get("fill-translate"))}queryIntersectsFeature(c,r,s,u,m,f){return!c.queryGeometry.isAboveHorizon&&ir(wr(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,c.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Ni{constructor(c,r,s,u){super(c,{layout:cw||(cw=new bn({visibility:new Et(He["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Et(He["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:uw||(uw=new bn({"fill-extrusion-opacity":new Et(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xt(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Et(He["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Et(He["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Et(He["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Et(He["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Et(He["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Et(He["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Et(He["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Xt(He["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Xt(He["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Et(He["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Et(He["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Et(He["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Et(He["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Xt(He["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Xt(He["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Et(He["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new $f(c)}queryRadius(){return Qr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(c,r,s,u,m,f,g,b,E){const I=jr(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,c.pixelToTileUnitsFactor),v=this.paint.get("fill-extrusion-height").evaluate(r,s),T=this.paint.get("fill-extrusion-base").evaluate(r,s),M=[0,0],S=b&&f.elevation,P=f.elevation?f.elevation.exaggeration():1,R=c.tile.getBucket(this);if(S&&R instanceof $f){const $=R.centroidVertexArray,Z=E+1;Z<$.length&&(M[0]=$.geta_centroid_pos0(Z),M[1]=$.geta_centroid_pos1(Z))}if(M[0]===0&&M[1]===1)return!1;f.projection.name==="globe"&&(u=lw([u],[new vt(0,0),new vt(Dt,Dt)],c.tileID.canonical).map($=>$.polygon).flat());const L=S?b:null,[N,G]=function($,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le){return $.projection.name==="globe"?function(Be,Fe,je,Ye,Ue,ot,pt,et,zt,Ot,At){const yt=[],Kt=[],Lt=Be.projection.upVectorScale(At,Be.center.lat,Be.worldSize).metersToTile,$t=[0,0,0,1],ar=[0,0,0,1],Ar=(_r,Sr,Er,on)=>{_r[0]=Sr,_r[1]=Er,_r[2]=on,_r[3]=1},yr=sw();je>0&&(je+=yr),Ye+=yr;for(const _r of Fe){const Sr=[],Er=[];for(const on of _r){const Hr=on.x+Ue.x,lr=on.y+Ue.y,$r=Be.projection.projectTilePoint(Hr,lr,At),Ur=Be.projection.upVector(At,on.x,on.y);let mn=je,Bn=Ye;if(pt){const Xn=fw(Hr,lr,je,Ye,pt,et,zt,Ot);mn+=Xn.base,Bn+=Xn.top}je!==0?Ar($t,$r.x+Ur[0]*Lt*mn,$r.y+Ur[1]*Lt*mn,$r.z+Ur[2]*Lt*mn):Ar($t,$r.x,$r.y,$r.z),Ar(ar,$r.x+Ur[0]*Lt*Bn,$r.y+Ur[1]*Lt*Bn,$r.z+Ur[2]*Lt*Bn),Pe.vec3.transformMat4($t,$t,ot),Pe.vec3.transformMat4(ar,ar,ot),Sr.push(new au($t[0],$t[1],$t[2])),Er.push(new au(ar[0],ar[1],ar[2]))}yt.push(Sr),Kt.push(Er)}return[yt,Kt]}($,Z,Y,ce,pe,ge,he,Ae,_e,Me,Le):he?function(Be,Fe,je,Ye,Ue,ot,pt,et,zt){const Ot=[],At=[],yt=[0,0,0,1];for(const Kt of Be){const Lt=[],$t=[];for(const ar of Kt){const Ar=ar.x+Ye.x,yr=ar.y+Ye.y,_r=fw(Ar,yr,Fe,je,ot,pt,et,zt);yt[0]=Ar,yt[1]=yr,yt[2]=_r.base,yt[3]=1,Pe.vec4.transformMat4(yt,yt,Ue),yt[3]=Math.max(yt[3],1e-5);const Sr=new au(yt[0]/yt[3],yt[1]/yt[3],yt[2]/yt[3]);yt[0]=Ar,yt[1]=yr,yt[2]=_r.top,yt[3]=1,Pe.vec4.transformMat4(yt,yt,Ue),yt[3]=Math.max(yt[3],1e-5);const Er=new au(yt[0]/yt[3],yt[1]/yt[3],yt[2]/yt[3]);Lt.push(Sr),$t.push(Er)}Ot.push(Lt),At.push($t)}return[Ot,At]}(Z,Y,ce,pe,ge,he,Ae,_e,Me):function(Be,Fe,je,Ye,Ue){const ot=[],pt=[],et=Ue[8]*Fe,zt=Ue[9]*Fe,Ot=Ue[10]*Fe,At=Ue[11]*Fe,yt=Ue[8]*je,Kt=Ue[9]*je,Lt=Ue[10]*je,$t=Ue[11]*je;for(const ar of Be){const Ar=[],yr=[];for(const _r of ar){const Sr=_r.x+Ye.x,Er=_r.y+Ye.y,on=Ue[0]*Sr+Ue[4]*Er+Ue[12],Hr=Ue[1]*Sr+Ue[5]*Er+Ue[13],lr=Ue[2]*Sr+Ue[6]*Er+Ue[14],$r=Ue[3]*Sr+Ue[7]*Er+Ue[15],Ur=on+et,mn=Hr+zt,Bn=lr+Ot,Xn=Math.max($r+At,1e-5),Fn=on+yt,En=Hr+Kt,xi=lr+Lt,ti=Math.max($r+$t,1e-5);Ar.push(new au(Ur/Xn,mn/Xn,Bn/Xn)),yr.push(new au(Fn/ti,En/ti,xi/ti))}ot.push(Ar),pt.push(yr)}return[ot,pt]}(Z,Y,ce,pe,ge)}(f,u,T,v,I,g,L,M,P,f.center.lat,c.tileID.canonical),W=c.queryGeometry;return function($,Z,Y){let ce=1/0;ir(Y,Z)&&(ce=hw(Y,Z[0]));for(let pe=0;pe<Z.length;pe++){const ge=Z[pe],he=$[pe];for(let Ae=0;Ae<ge.length-1;Ae++){const _e=ge[Ae],Me=[_e,ge[Ae+1],he[Ae+1],he[Ae],_e];It(Y,Me)&&(ce=Math.min(ce,hw(Y,Me)))}}return ce!==1/0&&ce}(N,G,W.isPointQuery()?W.screenBounds:W.screenGeometry)}},line:class extends Ni{constructor(c,r,s,u){const m=ww();super(c,m,r,s,u),m.layout&&(this.layout=new b1(m.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof Fc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,r){super.recalculate(c,r),this.paint._values["line-floorwidth"]=(()=>{if(eh)return eh;const s=ww();return eh=new Nz(s.paint.properties["line-width"].specification),eh.useIntegerZoom=!0,eh})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new V8(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(c,r,s){const u=xw(this);return{config:new dl(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}queryRadius(c){const r=c,s=Aw(wn("line-width",this,r),wn("line-gap-width",this,r)),u=wn("line-offset",this,r);return s/2+Math.abs(u)+Qr(this.paint.get("line-translate"))}queryIntersectsFeature(c,r,s,u,m,f){if(c.queryGeometry.isAboveHorizon)return!1;const g=wr(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,c.pixelToTileUnitsFactor),b=c.pixelToTileUnitsFactor/2*Aw(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),E=this.paint.get("line-offset").evaluate(r,s);return E&&(u=function(I,v){const T=[],M=new vt(0,0);for(let S=0;S<I.length;S++){const P=I[S],R=[];for(let L=0;L<P.length;L++){const N=P[L],G=P[L+1],W=L===0?M:N.sub(P[L-1])._unit()._perp(),$=L===P.length-1?M:G.sub(N)._unit()._perp(),Z=W._add($)._unit();Z._mult(1/(Z.x*$.x+Z.y*$.y)),R.push(Z._mult(v)._add(N))}T.push(R)}return T}(u,E*c.pixelToTileUnitsFactor)),function(I,v,T){for(let M=0;M<v.length;M++){const S=v[M];if(I.length>=3){for(let P=0;P<S.length;P++)if(pn(I,S[P]))return!0}if(Wt(I,S,T))return!0}return!1}(g,u,b)}isTileClipped(){return!0}isDraped(c){const r=this.layout.get("line-z-offset");return r.isConstant()&&!r.constantOr(0)}},symbol:rd,background:class extends Ni{constructor(c,r,s,u){super(c,{layout:aA||(aA=new bn({visibility:new Et(He.layout_background.visibility)})),paint:sA||(sA=new bn({"background-pitch-alignment":new Et(He.paint_background["background-pitch-alignment"]),"background-color":new Et(He.paint_background["background-color"]),"background-pattern":new Et(He.paint_background["background-pattern"]),"background-opacity":new Et(He.paint_background["background-opacity"]),"background-emissive-strength":new Et(He.paint_background["background-emissive-strength"])}))},r,s,u)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(c,r,s){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:fA,"raster-particle":_A,sky:class extends Ni{constructor(c,r,s,u){super(c,{layout:mA||(mA=new bn({visibility:new Et(He.layout_sky.visibility)})),paint:gA||(gA=new bn({"sky-type":new Et(He.paint_sky["sky-type"]),"sky-atmosphere-sun":new Et(He.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Et(He.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Et(He.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Et(He.paint_sky["sky-gradient-radius"]),"sky-gradient":new na(He.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Et(He.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Et(He.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Et(He.paint_sky["sky-opacity"])}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=q3({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(c,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),m=!u,f=c.style.light,g=f.properties.get("position");return m&&f.properties.get("anchor")==="viewport"&&Br("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?um(g.azimuthal,90-g.polar,r):um(u[0],90-u[1],r)}const s=this.paint.get("sky-gradient-center");return um(s[0],90-s[1],r)}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}},slot:class extends Ni{constructor(c,r,s,u){super(c,{paint:yA||(yA=new bn({}))},r,null)}},model:class extends Ni{constructor(c,r,s,u){super(c,{layout:MA||(MA=new bn({visibility:new Et(He.layout_model.visibility),"model-id":new Xt(He.layout_model["model-id"])})),paint:CA||(CA=new bn({"model-opacity":new Et(He.paint_model["model-opacity"]),"model-rotation":new Xt(He.paint_model["model-rotation"]),"model-scale":new Xt(He.paint_model["model-scale"]),"model-translation":new Xt(He.paint_model["model-translation"]),"model-color":new Xt(He.paint_model["model-color"]),"model-color-mix-intensity":new Xt(He.paint_model["model-color-mix-intensity"]),"model-type":new Et(He.paint_model["model-type"]),"model-cast-shadows":new Et(He.paint_model["model-cast-shadows"]),"model-receive-shadows":new Et(He.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Et(He.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Xt(He.paint_model["model-emissive-strength"]),"model-roughness":new Xt(He.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Xt(He.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Et(He.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Et(He.paint_model["model-front-cutoff"])}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(c){return new dm(c)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(c){return c instanceof ud?Dt-1:0}queryIntersectsFeature(c,r,s,u,m,f){if(!this.modelManager)return!1;const g=this.modelManager,b=c.tile.getBucket(this);if(!(b&&b instanceof dm))return!1;const E=b;for(const I in E.instancesPerModel){const v=E.instancesPerModel[I],T=r.id!==void 0?r.id:r.properties&&r.properties.hasOwnProperty("id")?r.properties.id:void 0;if(v.idToFeaturesIndex.hasOwnProperty(T)){const M=v.features[v.idToFeaturesIndex[T]],S=g.getModel(I,this.scope);if(!S)return!1;let P=Pe.mat4.create();const R=new q(0,0),L=E.canonical;let N=Number.MAX_VALUE;for(let G=0;G<M.instancedDataCount;++G){const W=16*(M.instancedDataOffset+G),$=v.instancedDataArray.float32,Z=[$[W+4],$[W+5],$[W+6]];LA(L,R,$[W],0|$[W+1]),IA(P,S,f,R,M.rotation,M.scale,Z,!1,!1,!1),f.projection.name==="globe"&&(P=fm(P,f));const Y=Pe.mat4.multiply([],f.projMatrix,P),ce=c.queryGeometry,pe=AA(ce.isPointQuery()?ce.screenBounds:ce.screenGeometry,f,Y,S.aabb);pe!=null&&(N=Math.min(pe,N))}return N!==Number.MAX_VALUE&&N}}return!1}_handleOverridablePaintPropertyUpdate(c,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven()||c!=="model-color"&&c!=="model-color-mix-intensity"&&c!=="model-rotation"&&c!=="model-scale"&&c!=="model-translation"&&c!=="model-emissive-strength")}_isPropertyZoomDependent(c){const r=this._transitionablePaint._values[c];return r!=null&&r.value!=null&&r.value.expression!=null&&r.value.expression instanceof Aa}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(c,r,s,u){const m=c.tile,f=m.getBucket(this);let g=null,b=Number.MAX_VALUE;if(!(f&&f instanceof ud))return{queryFeature:g,intersectionZ:b};const E=f.getNodesInfo()[r];if(E.hiddenByReplacement||!E.node.meshes||!s.filter(new On(m.tileID.overscaledZ),E.feature,m.tileID.canonical))return{queryFeature:g,intersectionZ:b};const I=E.node,v=u.calculatePosMatrix(m.tileID.toUnwrapped(),u.worldSize),T=E.evaluatedScale;let M=0;u.elevation&&I.elevation&&(M=I.elevation*u.elevation.exaggeration()),Pe.mat4.translate(v,v,[(I.anchor?I.anchor[0]:0)*(T[0]-1),(I.anchor?I.anchor[1]:0)*(T[1]-1),M]),Pe.mat4.scale(v,v,T),Pe.mat4.multiply(v,v,I.matrix);const S=c.queryGeometry,P=S.isPointQuery()?S.screenBounds:S.screenGeometry,R=function(N){const G=Pe.mat4.multiply([],v,N.matrix),W=Pe.mat4.multiply(G,u.expandedFarZProjMatrix,G);for(let $=0;$<N.meshes.length;++$){const Z=N.meshes[$];if($===N.lightMeshIndex)continue;const Y=AA(P,u,W,Z.aabb);Y!=null&&(b=Math.min(Y,b))}if(N.children)for(const $ of N.children)R($)};if(R(I),b===Number.MAX_VALUE)return{queryFeature:g,intersectionZ:b};const L=new q(0,0);return LA(m.tileID.canonical,L,E.node.anchor[0],E.node.anchor[1]),g={type:"Feature",geometry:{type:"Point",coordinates:[L.lng,L.lat]},properties:E.feature.properties,id:E.feature.id,state:{},layer:this.serialize()},{queryFeature:g,intersectionZ:b}}},clip:class extends Ni{constructor(c,r,s,u){super(c,{layout:Cb||(Cb=new bn({"clip-layer-types":new Et(He.layout_clip["clip-layer-types"]),"clip-layer-scope":new Et(He.layout_clip["clip-layer-scope"])})),paint:Ib||(Ib=new bn({}))},r,s,u)}recalculate(c,r){super.recalculate(c,r)}createBucket(c){return new Ob(c)}isTileClipped(){return!0}is3D(){return!0}}};class BB{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class FB{constructor(){this.tasks={},this.taskQueue=[],ql(["process"],this),this.invoker=new BB(this.process),this.nextId=0}add(r,s){const u=this.nextId++,m=function({type:f,isSymbolTile:g,zoom:b}){return b=b||0,f==="message"?0:f!=="maybePrepare"||g?f!=="parseTile"||g?f==="parseTile"&&g?300-b:f==="maybePrepare"&&g?400-b:500:200-b:100-b}(s);if(m===0){try{r()}finally{}return null}return this.tasks[u]={fn:r,metadata:s,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const s=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let r=null,s=1/0;for(let m=0;m<this.taskQueue.length;m++){const f=this.tasks[this.taskQueue[m]];f.priority<s&&(s=f.priority,r=m)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class zA{constructor(r,s,u){this.target=r,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},ql(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new FB}send(r,s,u,m,f=!1,g){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=g,this.callbacks[b]=u);const E=new Set;return this.target.postMessage({id:b,type:r,hasCallback:!!u,targetMapId:m,mustQueue:f,sourceMapId:this.mapId,data:lo(s,E)},E),{cancel:()=>{u&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(r){const s=r.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){const m=this.cancelCallbacks[u];delete this.cancelCallbacks[u],m&&m.cancel()}else if(s.mustQueue||Qs()){const m=this.callbacks[u],f=this.scheduler.add(()=>this.processTask(u,s),m&&m.metadata||{type:"message"});f&&(this.cancelCallbacks[u]=f)}else this.processTask(u,s)}processTask(r,s){if(delete this.cancelCallbacks[r],s.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(s.error?u(ll(s.error)):u(null,ll(s.data)))}else{const u=new Set,m=s.hasCallback?(g,b)=>{this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:g?lo(g):null,data:lo(b,u)},u)}:g=>{},f=ll(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,f,m);else if(this.parent.getWorkerSource){const g=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,g[0],f.source,f.scope)[g[1]](f,m)}else m(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class s0{constructor(r,s){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=bc();const u=this.workerPool.acquire(this.id);for(let m=0;m<u.length;m++){const f=new s0.Actor(u[m],s,this.id);f.name=`Worker ${m}`,this.actors.push(f)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(r,s,u){Ks(this.actors,(m,f)=>{m.send(r,s,f)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}s0.Actor=zA;class BA{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,s){const u=this.toIdx(r,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,s){return this.leaves[this.toIdx(r,s)]}toIdx(r,s){return s*this.size+r}}function FA(c,r,s,u){let m=0,f=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(u[g])<1e-15){if(s[g]<c[g]||s[g]>r[g])return null}else{const b=1/u[g];let E=(c[g]-s[g])*b,I=(r[g]-s[g])*b;if(E>I){const v=E;E=I,I=v}if(E>m&&(m=E),I<f&&(f=I),m>f)return null}return m}function NA(c,r,s,u,m,f,g,b,E,I,v){const T=u-c,M=m-r,S=f-s,P=g-c,R=b-r,L=E-s,N=v[1]*L-v[2]*R,G=v[2]*P-v[0]*L,W=v[0]*R-v[1]*P,$=T*N+M*G+S*W;if(Math.abs($)<1e-15)return null;const Z=1/$,Y=I[0]-c,ce=I[1]-r,pe=I[2]-s,ge=(Y*N+ce*G+pe*W)*Z;if(ge<0||ge>1)return null;const he=ce*S-pe*M,Ae=pe*T-Y*S,_e=Y*M-ce*T,Me=(v[0]*he+v[1]*Ae+v[2]*_e)*Z;return Me<0||ge+Me>1?null:(P*he+R*Ae+L*_e)*Z}function jA(c,r,s){return(c-r)/(s-r)}function $A(c,r,s,u,m,f,g,b,E){const I=1<<s,v=f-u,T=g-m,M=(c+1)/I*v+u,S=(r+0)/I*T+m,P=(r+1)/I*T+m;b[0]=(c+0)/I*v+u,b[1]=S,E[0]=M,E[1]=P}class UA{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(f){const g=Math.ceil(Math.log2(f.dim/8)),b=[];let E=Math.ceil(Math.pow(2,g));const I=1/E,v=(S,P,R,L,N)=>{const G=L?1:0,W=(S+1)*R-G,$=P*R,Z=(P+1)*R-G;N[0]=S*R,N[1]=$,N[2]=W,N[3]=Z};let T=new BA(E);const M=[];for(let S=0;S<E*E;S++){v(S%E,Math.floor(S/E),I,!1,M);const P=N1(M[0],M[1],f),R=N1(M[2],M[1],f),L=N1(M[2],M[3],f),N=N1(M[0],M[3],f);T.minimums.push(Math.min(P,R,L,N)),T.maximums.push(Math.max(P,R,L,N)),T.leaves.push(1)}for(b.push(T),E/=2;E>=1;E/=2){const S=b[b.length-1];T=new BA(E);for(let P=0;P<E*E;P++){v(P%E,Math.floor(P/E),2,!0,M);const R=S.getElevation(M[0],M[1]),L=S.getElevation(M[2],M[1]),N=S.getElevation(M[2],M[3]),G=S.getElevation(M[0],M[3]),W=S.isLeaf(M[0],M[1]),$=S.isLeaf(M[2],M[1]),Z=S.isLeaf(M[2],M[3]),Y=S.isLeaf(M[0],M[3]),ce=Math.min(R.min,L.min,N.min,G.min),pe=Math.max(R.max,L.max,N.max,G.max),ge=W&&$&&Z&&Y;T.maximums.push(pe),T.minimums.push(ce),T.leaves.push(pe-ce<=5&&ge?1:0)}b.push(T)}return b}(this.dem),u=s.length-1,m=s[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(r,s,u,m,f,g,b=1){return FA([r,s,-100],[u,m,this.maximums[0]*b],f,g)}raycast(r,s,u,m,f,g,b=1){if(!this.nodeCount)return null;const E=this.raycastRoot(r,s,u,m,f,g,b);if(E==null)return null;const I=[],v=[],T=[],M=[],S=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;S.length>0;){const{idx:P,t:R,nodex:L,nodey:N,depth:G}=S.pop();if(this.leaves[P]){$A(L,N,G,r,s,u,m,T,M);const $=1<<G,Z=(L+0)/$,Y=(L+1)/$,ce=(N+0)/$,pe=(N+1)/$,ge=N1(Z,ce,this.dem)*b,he=N1(Y,ce,this.dem)*b,Ae=N1(Y,pe,this.dem)*b,_e=N1(Z,pe,this.dem)*b,Me=NA(T[0],T[1],ge,M[0],T[1],he,M[0],M[1],Ae,f,g),Le=NA(M[0],M[1],Ae,T[0],M[1],_e,T[0],T[1],ge,f,g),Be=Math.min(Me!==null?Me:Number.MAX_VALUE,Le!==null?Le:Number.MAX_VALUE);if(Be!==Number.MAX_VALUE)return Be;{const Fe=Pe.vec3.scaleAndAdd([],f,g,R);if(VA(ge,he,_e,Ae,jA(Fe[0],T[0],M[0]),jA(Fe[1],T[1],M[1]))>=Fe[2])return R}continue}let W=0;for(let $=0;$<this._siblingOffset.length;$++){$A((L<<1)+this._siblingOffset[$][0],(N<<1)+this._siblingOffset[$][1],G+1,r,s,u,m,T,M),T[2]=-100,M[2]=this.maximums[this.childOffsets[P]+$]*b;const Z=FA(T,M,f,g);if(Z!=null){const Y=Z;I[$]=Y;let ce=!1;for(let pe=0;pe<W&&!ce;pe++)Y>=I[v[pe]]&&(v.splice(pe,0,$),ce=!0);ce||(v[W]=$),W++}}for(let $=0;$<W;$++){const Z=v[$];S.push({idx:this.childOffsets[P]+Z,t:I[Z],nodex:(L<<1)+this._siblingOffset[Z][0],nodey:(N<<1)+this._siblingOffset[Z][1],depth:G+1})}}return null}_addNode(r,s,u){return this.minimums.push(r),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,s,u,m,f){if(r[m].isLeaf(s,u)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const g=m-1,b=r[g];let E=0,I=0;for(let v=0;v<this._siblingOffset.length;v++){const T=2*s+this._siblingOffset[v][0],M=2*u+this._siblingOffset[v][1],S=b.getElevation(T,M),P=b.isLeaf(T,M),R=this._addNode(S.min,S.max,P);P&&(E|=1<<v),I||(I=R)}for(let v=0;v<this._siblingOffset.length;v++)E&1<<v||this._construct(r,2*s+this._siblingOffset[v][0],2*u+this._siblingOffset[v][1],g,I+v)}}function VA(c,r,s,u,m,f){return nr(nr(c,s,f),nr(r,u,f),m)}function N1(c,r,s){const u=s.dim,m=mr(c*u-.5,0,u-1),f=mr(r*u-.5,0,u-1),g=Math.floor(m),b=Math.floor(f),E=Math.min(g+1,u-1),I=Math.min(b+1,u-1);return VA(s.get(g,b),s.get(E,b),s.get(g,I),s.get(E,I),m-g,f-b)}const NB={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function jB(c,r,s){return(256*c*256+256*r+s)/10-1e4}function $B(c,r,s){return 256*c+r+s/256-32768}class hd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,s,u,m=!1){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Br(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const f=this.dim=s.height-2,g=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.floatView=new Float32Array(s.data.buffer),this.borderReady=m,this._modifiedForSources={},!m){for(let E=0;E<f;E++)g[this._idx(-1,E)]=g[this._idx(0,E)],g[this._idx(f,E)]=g[this._idx(f-1,E)],g[this._idx(E,-1)]=g[this._idx(E,0)],g[this._idx(E,f)]=g[this._idx(E,f-1)];g[this._idx(-1,-1)]=g[this._idx(0,0)],g[this._idx(f,-1)]=g[this._idx(f-1,0)],g[this._idx(-1,f)]=g[this._idx(0,f-1)],g[this._idx(f,f)]=g[this._idx(f-1,f-1)]}const b=u==="terrarium"?$B:jB;for(let E=0;E<g.length;++E){const I=4*E;this.floatView[E]=b(this.pixels[I],this.pixels[I+1],this.pixels[I+2])}this._timestamp=Ft.now()}_buildQuadTree(){this._tree=new UA(this)}get(r,s,u=!1){u&&(r=mr(r,-1,this.dim),s=mr(s,-1,this.dim));const m=this._idx(r,s);return this.floatView[m]}set(r,s,u){const m=this._idx(r,s),f=this.floatView[m];return this.floatView[m]=u,u-f}static getUnpackVector(r){return NB[r]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}static pack(r,s){const u=[0,0,0,0],m=hd.getUnpackVector(s);let f=Math.floor((r+m[3])/m[2]);return u[2]=f%256,f=Math.floor(f/256),u[1]=f%256,f=Math.floor(f/256),u[0]=f,u}getPixels(){return new wb({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,s,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,f=s*this.dim+this.dim,g=u*this.dim,b=u*this.dim+this.dim;switch(s){case-1:m=f-1;break;case 1:f=m+1}switch(u){case-1:g=b-1;break;case 1:b=g+1}const E=-s*this.dim,I=-u*this.dim;for(let v=g;v<b;v++)for(let T=m;T<f;T++){const M=4*this._idx(T,v),S=4*this._idx(T+E,v+I);this.pixels[M+0]=r.pixels[S+0],this.pixels[M+1]=r.pixels[S+1],this.pixels[M+2]=r.pixels[S+2],this.pixels[M+3]=r.pixels[S+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function UB(c,r,s){c===1?r.header_length=s.readFixed32():c===2?r.x=s.readVarint():c===3?r.y=s.readVarint():c===4?r.z=s.readVarint():c===5&&r.layers.push(function(u,m){return u.readFields(HB,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},m)}(s,s.readVarint()+s.pos))}function VB(c,r,s){c===1?(r.delta_filter=function(u,m){return u.readFields(GB,{block_size:0},m)}(s,s.readVarint()+s.pos),r.filter="delta_filter"):c===2?(s.readVarint(),r.filter="zigzag_filter"):c===3?(s.readVarint(),r.filter="bitshuffle_filter"):c===4&&(s.readVarint(),r.filter="byteshuffle_filter")}function GB(c,r,s){c===1&&(r.block_size=s.readVarint())}function qB(c,r,s){c===1?(s.readVarint(),r.codec="gzip_data"):c===2?(s.readVarint(),r.codec="jpeg_image"):c===3?(s.readVarint(),r.codec="webp_image"):c===4&&(s.readVarint(),r.codec="png_image")}function WB(c,r,s){c===1?r.first_byte=s.readFixed64():c===2?r.last_byte=s.readFixed64():c===3?r.filters.push(function(u,m){return u.readFields(VB,{},m)}(s,s.readVarint()+s.pos)):c===4?r.codec=function(u,m){return u.readFields(qB,{},m)}(s,s.readVarint()+s.pos):c===5?r.deprecated_offset=s.readFloat():c===6?r.deprecated_scale=s.readFloat():c===7?r.bands.push(s.readString()):c===8?r.offset=s.readDouble():c===9&&(r.scale=s.readDouble())}function HB(c,r,s){c===1?r.version=s.readVarint():c===2?r.name=s.readString():c===3?r.units=s.readString():c===4?r.tilesize=s.readVarint():c===5?r.buffer=s.readVarint():c===6?r.pixel_format=s.readVarint():c===7&&r.data_index.push(function(u,m){return u.readFields(WB,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},m)}(s,s.readVarint()+s.pos))}function ZB(c,r,s){if(c===2)(function(u,m,f){u.readFields(XB,f,m)})(s,s.readVarint()+s.pos,r);else if(c===3)throw new Error("Not implemented")}function XB(c,r,s){if(c===1){let u=0;const m=s.readVarint()+s.pos;for(;s.pos<m;)r[u++]=s.readVarint()}}Ut(hd,"DEMData"),Ut(UA,"DemMinMaxQuadTree",{omit:["dem"]});class YB{constructor(r){this.capacity=r,this.cache=new Map}get(r){if(!this.cache.has(r))return;const s=this.cache.get(r);return this.cache.delete(r),this.cache.set(r,s),s}put(r,s){this.cache.has(r)?this.cache.delete(r):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(r,s)}}function KB(c,r){if(r.length!==4)throw new Error(`Expected data of dimension 4 but got ${r.length}.`);let s=r[3];for(let u=2;u>=1;u--){const m=u===1?1:0,f=u===2?1:0;for(let g=0;g<r[0];g++){const b=r[1]*g;for(let E=m;E<r[1];E++){const I=r[2]*(E+b);for(let v=f;v<r[2];v++){const T=r[3]*(v+I);for(let M=0;M<r[3];M++){const S=T+M;c[S]+=c[S-s]}}}}s*=r[u]}return c}function JB(c){for(let r=0,s=c.length;r<s;r++)c[r]=c[r]>>>1^-(1&c[r]);return c}function QB(c,r){switch(r){case"uint32":return c;case"uint16":for(let s=0;s<c.length;s+=2){const u=c[s],m=c[s+1];c[s]=(240&u)>>4|(61440&u)>>8|(240&m)<<4|61440&m,c[s+1]=15&u|(3840&u)>>4|(15&m)<<8|(3840&m)<<4}return c;case"uint8":for(let s=0;s<c.length;s+=4){const u=c[s],m=c[s+1],f=c[s+2],g=c[s+3];c[s+0]=(192&u)>>6|(192&m)>>4|(192&f)>>2|192&g,c[s+1]=(48&u)>>4|(48&m)>>2|48&f|(48&g)<<2,c[s+2]=(12&u)>>2|12&m|(12&f)<<2|(12&g)<<4,c[s+3]=3&u|(3&m)<<2|(3&f)<<4|(3&g)<<6}return c;default:throw new Error(`Invalid pixel format, "${r}"`)}}var sa=Uint8Array,dh=Uint16Array,eF=Int32Array,GA=new sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qA=new sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tF=new sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WA=function(c,r){for(var s=new dh(31),u=0;u<31;++u)s[u]=r+=1<<c[u-1];var m=new eF(s[30]);for(u=1;u<30;++u)for(var f=s[u];f<s[u+1];++f)m[f]=f-s[u]<<5|u;return{b:s,r:m}},HA=WA(GA,2),ZA=HA.b,rF=HA.r;ZA[28]=258,rF[258]=28;for(var nF=WA(qA,0).b,XA=new dh(32768),Zn=0;Zn<32768;++Zn){var l0=(43690&Zn)>>1|(21845&Zn)<<1;XA[Zn]=((65280&(l0=(61680&(l0=(52428&l0)>>2|(13107&l0)<<2))>>4|(3855&l0)<<4))>>8|(255&l0)<<8)>>1}var ph=function(c,r,s){for(var u=c.length,m=0,f=new dh(r);m<u;++m)c[m]&&++f[c[m]-1];var g,b=new dh(r);for(m=1;m<r;++m)b[m]=b[m-1]+f[m-1]<<1;g=new dh(1<<r);var E=15-r;for(m=0;m<u;++m)if(c[m])for(var I=m<<4|c[m],v=r-c[m],T=b[c[m]-1]++<<v,M=T|(1<<v)-1;T<=M;++T)g[XA[T]>>E]=I;return g},mh=new sa(288);for(Zn=0;Zn<144;++Zn)mh[Zn]=8;for(Zn=144;Zn<256;++Zn)mh[Zn]=9;for(Zn=256;Zn<280;++Zn)mh[Zn]=7;for(Zn=280;Zn<288;++Zn)mh[Zn]=8;var YA=new sa(32);for(Zn=0;Zn<32;++Zn)YA[Zn]=5;var iF=ph(mh,9),oF=ph(YA,5),ym=function(c){for(var r=c[0],s=1;s<c.length;++s)c[s]>r&&(r=c[s]);return r},ss=function(c,r,s){var u=r/8|0;return(c[u]|c[u+1]<<8)>>(7&r)&s},_m=function(c,r){var s=r/8|0;return(c[s]|c[s+1]<<8|c[s+2]<<16)>>(7&r)},aF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ls=function(c,r,s){var u=new Error(r||aF[c]);if(u.code=c,Error.captureStackTrace&&Error.captureStackTrace(u,ls),!s)throw u;return u},sF=new sa(0),lF=typeof TextDecoder<"u"&&new TextDecoder;try{lF.decode(sF,{stream:!0})}catch{}const cF={gzip_data:"gzip"};class Ma extends Error{constructor(r){super(r),this.name="MRTError"}}const uF={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},KA={uint32:1,uint16:2,uint8:4},hF={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let vm;class xm{constructor(r=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=r}getLayer(r){const s=this.layers[r];if(!s)throw new Ma(`Layer '${r}' not found`);return s}getHeaderLength(r){const s=new Uint8Array(r),u=new DataView(r);if(s[0]!==13)throw new Ma("File is not a valid MRT.");return u.getUint32(1,!0)}parseHeader(r){const s=new Uint8Array(r),u=this.getHeaderLength(r);if(s.length<u)throw new Ma(`Expected header with length >= ${u} but got buffer of length ${s.length}`);const m=function(f,g){return f.readFields(UB,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new vm(s.subarray(0,u)));if(!isNaN(this.x)&&(this.x!==m.x||this.y!==m.y||this.z!==m.z))throw new Ma(`Invalid attempt to parse header ${m.z}/${m.x}/${m.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=m.x,this.y=m.y,this.z=m.z;for(const f of m.layers)this.layers[f.name]=new fF(f,{cacheSize:this._cacheSize});return this}createDecodingTask(r){const s=[],u=this.getLayer(r.layerName);for(let m of r.blockIndices){const f=u.dataIndex[m],g=f.first_byte-r.firstByte,b=f.last_byte-r.firstByte;if(u._blocksInProgress.has(m))continue;const E={layerName:u.name,firstByte:g,lastByte:b,pixelFormat:u.pixelFormat,blockIndex:m,blockShape:[f.bands.length].concat(u.bandShape),buffer:u.buffer,codec:f.codec.codec,filters:f.filters.map(I=>I.filter)};u._blocksInProgress.add(m),s.push(E)}return new JA(s,()=>{s.forEach(m=>u._blocksInProgress.delete(m.blockIndex))},(m,f)=>{if(s.forEach(g=>u._blocksInProgress.delete(g.blockIndex)),m)throw m;f.forEach(g=>{this.getLayer(g.layerName).processDecodedData(g)})})}}class fF{constructor({version:r,name:s,units:u,tilesize:m,pixel_format:f,buffer:g,data_index:b},E){if(this.version=r,this.version!==1)throw new Ma(`Cannot parse raster layer encoded with MRT version ${r}`);this.name=s,this.units=u,this.tileSize=m,this.buffer=g,this.pixelFormat=uF[f],this.dataIndex=b,this.bandShape=[m+2*g,m+2*g,KA[this.pixelFormat]],this._decodedBlocks=new YB(E?E.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return KA[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:r})=>r).flat()}processDecodedData(r){const s=r.blockIndex.toString();this._decodedBlocks.get(s)||this._decodedBlocks.put(s,r.data)}getBlockForBand(r){let s=0;switch(typeof r){case"string":for(const[u,m]of this.dataIndex.entries()){for(const[f,g]of m.bands.entries())if(g===r)return{bandIndex:s+f,blockIndex:u,blockBandIndex:f};s+=m.bands.length}break;case"number":for(const[u,m]of this.dataIndex.entries()){if(r>=s&&r<s+m.bands.length)return{bandIndex:r,blockIndex:u,blockBandIndex:r-s};s+=m.bands.length}break;default:throw new Ma(`Invalid band \`${JSON.stringify(r)}\`. Expected string or integer.`)}throw new Ma(`Band not found: ${JSON.stringify(r)}`)}getDataRange(r){let s=1/0,u=-1/0;const m=[],f=new Set;for(const g of r){const{blockIndex:b}=this.getBlockForBand(g);if(b<0)throw new Ma(`Invalid band: ${JSON.stringify(g)}`);const E=this.dataIndex[b];m.includes(b)||m.push(b),f.add(b),s=Math.min(s,E.first_byte),u=Math.max(u,E.last_byte)}if(f.size>this.cacheSize)throw new Ma(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:s,lastByte:u,blockIndices:m}}hasBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0}hasDataForBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0&&!!this._decodedBlocks.get(s.toString())}getBandView(r){const{blockIndex:s,blockBandIndex:u}=this.getBlockForBand(r),m=this._decodedBlocks.get(s.toString());if(!m)throw new Ma(`Data for band ${JSON.stringify(r)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[s],g=this.bandShape.reduce((I,v)=>I*v,1),b=u*g,E=m.subarray(b,b+g);return{data:E,bytes:new Uint8Array(E.buffer).subarray(E.byteOffset,E.byteOffset+E.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset!==0?f.offset:f.deprecated_offset,scale:f.scale!==0?f.scale:f.deprecated_scale}}}xm.setPbf=function(c){vm=c};class JA{constructor(r,s,u){this.tasks=r,this._onCancel=s,this._onComplete=u,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(r,s){this._finalized||(this._onComplete(r,s),this._finalized=!0)}}xm.performDecoding=function(c,r){const s=new Uint8Array(c);return Promise.all(r.tasks.map(u=>{const{layerName:m,firstByte:f,lastByte:g,pixelFormat:b,blockShape:E,blockIndex:I,filters:v,codec:T}=u,M=s.subarray(f,g+1),S=new Uint32Array(E[0]*E[1]*E[2]);let P;if(T!=="gzip_data")throw new Ma(`Unhandled codec: ${T}`);return P=function(R,L){if(!globalThis.DecompressionStream&&L==="gzip_data")return Promise.resolve((($=function(ce){ce[0]==31&&ce[1]==139&&ce[2]==8||ls(6,"invalid gzip data");var pe=ce[3],ge=10;4&pe&&(ge+=2+(ce[10]|ce[11]<<8));for(var he=(pe>>3&1)+(pe>>4&1);he>0;he-=!ce[ge++]);return ge+(2&pe)}(W=R))+8>W.length&&ls(6,"invalid gzip data"),function(ce,pe,ge,he){var Ae=ce.length;if(!Ae||pe.f&&!pe.l)return ge||new sa(0);var _e=!ge,Me=_e||pe.i!=2,Le=pe.i;_e&&(ge=new sa(3*Ae));var Be,Fe,je=function(j1){var hu=ge.length;if(j1>hu){var wh=new sa(Math.max(2*hu,j1));wh.set(ge),ge=wh}},Ye=pe.f||0,Ue=pe.p||0,ot=pe.b||0,pt=pe.l,et=pe.d,zt=pe.m,Ot=pe.n,At=8*Ae;do{if(!pt){Ye=ss(ce,Ue,1);var yt=ss(ce,Ue+1,3);if(Ue+=3,!yt){var Kt=ce[(lr=4+((Ue+7)/8|0))-4]|ce[lr-3]<<8,Lt=lr+Kt;if(Lt>Ae){Le&&ls(0);break}Me&&je(ot+Kt),ge.set(ce.subarray(lr,Lt),ot),pe.b=ot+=Kt,pe.p=Ue=8*Lt,pe.f=Ye;continue}if(yt==1)pt=iF,et=oF,zt=9,Ot=5;else if(yt==2){var $t=ss(ce,Ue,31)+257,ar=ss(ce,Ue+10,15)+4,Ar=$t+ss(ce,Ue+5,31)+1;Ue+=14;for(var yr=new sa(Ar),_r=new sa(19),Sr=0;Sr<ar;++Sr)_r[tF[Sr]]=ss(ce,Ue+3*Sr,7);Ue+=3*ar;var Er=ym(_r),on=(1<<Er)-1,Hr=ph(_r,Er);for(Sr=0;Sr<Ar;){var lr,$r=Hr[ss(ce,Ue,on)];if(Ue+=15&$r,(lr=$r>>4)<16)yr[Sr++]=lr;else{var Ur=0,mn=0;for(lr==16?(mn=3+ss(ce,Ue,3),Ue+=2,Ur=yr[Sr-1]):lr==17?(mn=3+ss(ce,Ue,7),Ue+=3):lr==18&&(mn=11+ss(ce,Ue,127),Ue+=7);mn--;)yr[Sr++]=Ur}}var Bn=yr.subarray(0,$t),Xn=yr.subarray($t);zt=ym(Bn),Ot=ym(Xn),pt=ph(Bn,zt),et=ph(Xn,Ot)}else ls(1);if(Ue>At){Le&&ls(0);break}}Me&&je(ot+131072);for(var Fn=(1<<zt)-1,En=(1<<Ot)-1,xi=Ue;;xi=Ue){var ti=(Ur=pt[_m(ce,Ue)&Fn])>>4;if((Ue+=15&Ur)>At){Le&&ls(0);break}if(Ur||ls(2),ti<256)ge[ot++]=ti;else{if(ti==256){xi=Ue,pt=null;break}var Ii=ti-254;ti>264&&(Ii=ss(ce,Ue,(1<<(us=GA[Sr=ti-257]))-1)+ZA[Sr],Ue+=us);var dn=et[_m(ce,Ue)&En],Po=dn>>4;if(dn||ls(3),Ue+=15&dn,Xn=nF[Po],Po>3){var us=qA[Po];Xn+=_m(ce,Ue)&(1<<us)-1,Ue+=us}if(Ue>At){Le&&ls(0);break}Me&&je(ot+131072);var Ca=ot+Ii;if(ot<Xn){var Ia=0-Xn,uu=Math.min(Xn,Ca);for(Ia+ot<0&&ls(3);ot<uu;++ot)ge[ot]=(void 0)[Ia+ot]}for(;ot<Ca;++ot)ge[ot]=ge[ot-Xn]}}pe.l=pt,pe.p=xi,pe.b=ot,pe.f=Ye,pt&&(Ye=1,pe.m=zt,pe.d=et,pe.n=Ot)}while(!Ye);return ot!=ge.length&&_e?(Be=ge,((Fe=ot)==null||Fe>Be.length)&&(Fe=Be.length),new sa(Be.subarray(0,Fe))):ge.subarray(0,ot)}(W.subarray($,-8),{i:2},new sa(((N=W)[(G=N.length)-4]|N[G-3]<<8|N[G-2]<<16|N[G-1]<<24)>>>0))));var N,G,W,$;const Z=cF[L];if(!Z)throw new Error(`Unhandled codec: ${L}`);const Y=new globalThis.DecompressionStream(Z);return new Response(new Blob([R]).stream().pipeThrough(Y)).arrayBuffer().then(ce=>new Uint8Array(ce))}(M,T).then(R=>(function(L,N){L.readFields(ZB,N)}(new vm(R),S),new hF[b](S.buffer))),P.then(R=>{for(let L=v.length-1;L>=0;L--)switch(v[L]){case"delta_filter":KB(R,E);break;case"zigzag_filter":JB(R);break;case"bitshuffle_filter":QB(R,b);break;default:throw new Ma(`Unhandled filter "${v[L]}"`)}return{layerName:m,blockIndex:I,data:R}}).catch(R=>{throw R})}))},Ut(JA,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var gh={workerUrl:"",workerClass:null,workerParams:void 0};const bm="mapboxgl_preloaded_worker_pool";class yh{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<yh.workerCount;)this.workers.push(gh.workerClass!=null?new gh.workerClass:new self.Worker(gh.workerUrl,gh.workerParams));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.workers&&this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bm]}numActive(){return Object.keys(this.active).length}}let _h;function fd(){return _h||(_h=new yh),_h}yh.workerCount=2;let vh,wm,cs,c0,Am,u0=null;function QA(){return Qs()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:wm||De.DRACO_URL}function eT(){if(Qs()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(c0)return c0;const c=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return c0=WebAssembly.validate(c)?De.MESHOPT_SIMD_URL:De.MESHOPT_URL,c0}const dd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dF={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},xh={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function tT(c,r,s){const u=s.json.bufferViews.length,m=s.buffers.length;r.bufferView=u,s.json.bufferViews[u]={buffer:m,byteLength:c.byteLength},s.buffers[m]=c}const Tm="KHR_draco_mesh_compression";function pF(c,r){const s=c.extensions&&c.extensions[Tm];if(!s)return;const u=new cs.Decoder,m=oT(r,s.bufferView),f=new cs.Mesh;if(!u.DecodeArrayToMesh(m,m.byteLength,f))throw new Error("Failed to decode Draco mesh");const g=r.json.accessors[c.indices],b=dd[g.componentType],E=g.count*b.BYTES_PER_ELEMENT,I=cs._malloc(E);b===Uint16Array?u.GetTrianglesUInt16Array(f,E,I):u.GetTrianglesUInt32Array(f,E,I),tT(cs.memory.buffer.slice(I,I+E),g,r),cs._free(I);for(const v of Object.keys(s.attributes)){const T=u.GetAttributeByUniqueId(f,s.attributes[v]),M=r.json.accessors[c.attributes[v]],S=dF[M.componentType],P=M.count*xh[M.type]*dd[M.componentType].BYTES_PER_ELEMENT,R=cs._malloc(P);u.GetAttributeDataArrayForAllPoints(f,T,cs[S],P,R),tT(cs.memory.buffer.slice(R,R+P),M,r),cs._free(R)}u.destroy(),f.destroy(),delete c.extensions[Tm]}const pd="EXT_meshopt_compression";function mF(c,r){if(!c.extensions||!c.extensions[pd])return;const s=c.extensions[pd],u=new Uint8Array(r.buffers[s.buffer],s.byteOffset||0,s.byteLength||0),m=new Uint8Array(s.count*s.byteStride);Am.decodeGltfBuffer(m,s.count,s.byteStride,u,s.mode,s.filter),c.buffer=r.buffers.length,c.byteOffset=0,r.buffers[c.buffer]=m.buffer,delete c.extensions[pd]}const rT=1179937895,nT=new TextDecoder("utf8");function iT(c,r){return new URL(c,r).href}function gF(c,r,s,u){return fetch(iT(c.uri,u)).then(m=>m.arrayBuffer()).then(m=>{r.buffers[s]=m})}function oT(c,r){const s=c.json.bufferViews[r];return new Uint8Array(c.buffers[s.buffer],s.byteOffset||0,s.byteLength)}function yF(c,r,s,u){if(c.uri){const m=iT(c.uri,u);return fetch(m).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{r.images[s]=f})}if(c.bufferView!==void 0){const m=oT(r,c.bufferView),f=new Blob([m],{type:c.mimeType});return createImageBitmap(f).then(g=>{r.images[s]=g})}}function aT(c,r=0,s){const u={json:null,images:[],buffers:[]};if(new Uint32Array(c,r,1)[0]===rT){const v=new Uint32Array(c,r);let T=2;const M=(v[T++]>>2)-3,S=v[T++]>>2;if(T++,u.json=JSON.parse(nT.decode(v.subarray(T,T+S))),T+=S,T<M){const P=v[T++];T++;const R=r+(T<<2);u.buffers[0]=c.slice(R,R+P)}}else u.json=JSON.parse(nT.decode(new Uint8Array(c,r)));const{buffers:m,images:f,meshes:g,extensionsUsed:b,bufferViews:E}=u.json;let I=Promise.resolve();if(m){const v=[];for(let T=0;T<m.length;T++){const M=m[T];M.uri?v.push(gF(M,u,T,s)):u.buffers[T]||(u.buffers[T]=null)}I=Promise.all(v)}return I.then(()=>{const v=[],T=b&&b.includes(Tm),M=b&&b.includes(pd);if(T&&v.push(function(){if(!cs)return vh??(vh=function(S){let P,R=null;function L(){P=new Uint8Array(R.buffer)}function N(){throw new Error("Unexpected Draco error.")}const G={a:{a:N,d:function(W,$,Z){return P.copyWithin(W,$,$+Z)},c:function(W){const $=P.length,Z=Math.max(W>>>0,Math.ceil(1.2*$)),Y=Math.ceil((Z-$)/65536);try{return R.grow(Y),L(),!0}catch{return!1}},b:N}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(S,G):S.then(W=>W.arrayBuffer()).then(W=>WebAssembly.instantiate(W,G))).then(W=>{const{Rb:$,Qb:Z,P:Y,T:ce,X:pe,Ja:ge,La:he,Qa:Ae,Va:_e,Wa:Me,eb:Le,jb:Be,f:Fe,e:je,yb:Ye,zb:Ue,Ab:ot,Bb:pt,Db:et,Gb:zt}=W.instance.exports;R=je;const Ot=(()=>{let At=0,yt=0,Kt=0,Lt=0;return $t=>{Kt&&($(Lt),$(At),yt+=Kt,Kt=At=0),At||(yt+=128,At=Z(yt));const ar=$t.length+7&-8;let Ar=At;ar>=yt&&(Kt=ar,Ar=Lt=Z(ar));for(let yr=0;yr<$t.length;yr++)P[Ar+yr]=$t[yr];return Ar}})();return L(),Fe(),{memory:je,_free:$,_malloc:Z,Mesh:class{constructor(){this.ptr=Y()}destroy(){ce(this.ptr)}},Decoder:class{constructor(){this.ptr=ge()}destroy(){Be(this.ptr)}DecodeArrayToMesh(At,yt,Kt){const Lt=Ot(At),$t=he(this.ptr,Lt,yt,Kt.ptr);return!!pe($t)}GetAttributeByUniqueId(At,yt){return{ptr:Ae(this.ptr,At.ptr,yt)}}GetTrianglesUInt16Array(At,yt,Kt){_e(this.ptr,At.ptr,yt,Kt)}GetTrianglesUInt32Array(At,yt,Kt){Me(this.ptr,At.ptr,yt,Kt)}GetAttributeDataArrayForAllPoints(At,yt,Kt,Lt,$t){Le(this.ptr,At.ptr,yt.ptr,Kt,Lt,$t)}},DT_INT8:Ye(),DT_UINT8:Ue(),DT_INT16:ot(),DT_UINT16:pt(),DT_UINT32:et(),DT_FLOAT32:zt()}})}(fetch(QA())),vh.then(S=>{cs=S,vh=void 0}))}()),M&&v.push(function(){if(Am)return;const S=function(P){let R;const L=WebAssembly.instantiateStreaming(P,{}).then(W=>{R=W.instance,R.exports.__wasm_call_ctors()}),N={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},G={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:L,supported:!0,decodeGltfBuffer(W,$,Z,Y,ce,pe){(function(ge,he,Ae,_e,Me,Le,Be){const Fe=ge.exports.sbrk,je=_e+3&-4,Ye=Fe(je*Me),Ue=Fe(Le.length),ot=new Uint8Array(ge.exports.memory.buffer);ot.set(Le,Ue);const pt=he(Ye,_e,Me,Ue,Le.length);if(pt===0&&Be&&Be(Ye,je,Me),Ae.set(ot.subarray(Ye,Ye+_e*Me)),Fe(Ye-Fe(0)),pt!==0)throw new Error(`Malformed buffer data: ${pt}`)})(R,R.exports[G[ce]],W,$,Z,Y,R.exports[N[pe]])}}}(fetch(eT()));return S.ready.then(()=>{Am=S})}()),f)for(let S=0;S<f.length;S++)v.push(yF(f[S],u,S,s));return(v.length?Promise.all(v):Promise.resolve()).then(()=>{if(T&&g)for(const{primitives:S}of g)for(const P of S)pF(P,u);if(M&&g&&E)for(const S of E)mF(S,u);return u})})}function cu(c,r){const s=c.json.bufferViews[r.bufferView],u=dd[r.componentType];return new u(c.buffers[s.buffer],(r.byteOffset||0)+(s.byteOffset||0),r.count*(s.byteStride&&s.byteStride!==xh[r.type]*u.BYTES_PER_ELEMENT?s.byteStride/u.BYTES_PER_ELEMENT:xh[r.type]))}function Sm(c,r,s,u){const m=dd[r.componentType],f=function(v){switch(v){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(m),g=c.json.bufferViews[r.bufferView],b=g.byteStride?g.byteStride/m.BYTES_PER_ELEMENT:xh[r.type],E=s.float32,I=E.length/s.capacity;for(let v=0,T=0;v<r.count*b;v+=b,T+=I)for(let M=0;M<I;M++)E[T+M]=u[v+M]*f;s._trim()}function _F(c,r,s){const u=c.indices,m=c.attributes,f={};f.indexArray=new Ti;const g=r.json.accessors[u],b=g.count/3;f.indexArray.reserve(b);const E=cu(r,g);for(let M=0;M<b;M++)f.indexArray.emplaceBack(E[3*M],E[3*M+1],E[3*M+2]);f.indexArray._trim(),f.vertexArray=new Rs;const I=r.json.accessors[m.POSITION];f.vertexArray.reserve(I.count);const v=cu(r,I);for(let M=0;M<I.count;M++)f.vertexArray.emplaceBack(v[3*M],v[3*M+1],v[3*M+2]);if(f.vertexArray._trim(),f.aabb=new fn(I.min,I.max),f.centroid=function(M,S){const P=[0,0,0],R=M.length;if(R>0){for(let L=0;L<R;L++){const N=3*M[L];P[0]+=S[N],P[1]+=S[N+1],P[2]+=S[N+2]}P[0]/=R,P[1]/=R,P[2]/=R}return P}(E,v),m.COLOR_0!==void 0){const M=r.json.accessors[m.COLOR_0],S=xh[M.type],P=cu(r,M);f.colorArray=S===3?new Rs:new es,f.colorArray.resize(M.count),Sm(r,M,f.colorArray,P)}if(m.NORMAL!==void 0){f.normalArray=new Rs;const M=r.json.accessors[m.NORMAL];f.normalArray.resize(M.count);const S=cu(r,M);Sm(r,M,f.normalArray,S)}if(m.TEXCOORD_0!==void 0&&s.length>0){f.texcoordArray=new Qc;const M=r.json.accessors[m.TEXCOORD_0];f.texcoordArray.resize(M.count);const S=cu(r,M);Sm(r,M,f.texcoordArray,S)}if(m._FEATURE_ID_RGBA4444!==void 0){const M=r.json.accessors[m._FEATURE_ID_RGBA4444];r.json.extensionsUsed&&r.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=cu(r,M))}m._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(cu(r,r.json.accessors[m._FEATURE_RGBA4444]).buffer));const T=c.material;return f.material=function(M,S){const{emissiveFactor:P=[0,0,0],alphaMode:R="OPAQUE",alphaCutoff:L=.5,normalTexture:N,occlusionTexture:G,emissiveTexture:W,doubleSided:$}=M,{baseColorFactor:Z=[1,1,1,1],metallicFactor:Y=1,roughnessFactor:ce=1,baseColorTexture:pe,metallicRoughnessTexture:ge}=M.pbrMetallicRoughness||{},he=G?S[G.index]:void 0;if(G&&G.extensions&&G.extensions.KHR_texture_transform&&he){const Ae=G.extensions.KHR_texture_transform;he.offsetScale=[Ae.offset[0],Ae.offset[1],Ae.scale[0],Ae.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new qr(...Z),metallicFactor:Y,roughnessFactor:ce,baseColorTexture:pe?S[pe.index]:void 0,metallicRoughnessTexture:ge?S[ge.index]:void 0},doubleSided:$,emissiveFactor:P,alphaMode:R,alphaCutoff:L,normalTexture:N?S[N.index]:void 0,occlusionTexture:he,emissionTexture:W?S[W.index]:void 0,defined:M.defined===void 0}}(T!==void 0?r.json.materials[T]:{defined:!1},s),f}function sT(c,r,s){const{matrix:u,rotation:m,translation:f,scale:g,mesh:b,extras:E,children:I}=c,v={};if(v.matrix=u||Pe.mat4.fromRotationTranslationScale([],m||[0,0,0,1],f||[0,0,0],g||[1,1,1]),b!==void 0){v.meshes=s[b];const T=v.anchor=[0,0];for(const M of v.meshes){const{min:S,max:P}=M.aabb;T[0]+=S[0]+P[0],T[1]+=S[1]+P[1]}T[0]=Math.floor(T[0]/v.meshes.length/2),T[1]=Math.floor(T[1]/v.meshes.length/2)}if(E&&(E.id&&(v.id=E.id),E.lights&&(v.lights=function(T){if(!T.length)return[];const M=function(N){const G=atob(N),W=new Uint8Array(G.length);for(let $=0;$<G.length;$++)W[$]=G.codePointAt($);return W}(T),S=[],P=M.length/24,R=new Uint16Array(M.buffer),L=new Float32Array(M.buffer);for(let N=0;N<P;N++){const G=R[2*N*6]/30,W=R[2*N*6+1]/30,$=R[2*N*6+10]/100,Z=L[6*N+1],Y=L[6*N+2],ce=L[6*N+3],pe=L[6*N+4],ge=ce-Z,he=pe-Y,Ae=Math.hypot(ge,he);S.push({pos:[Z+.5*ge,Y+.5*he,W],normal:[he/Ae,-ge/Ae,0],width:Ae,height:G,depth:$,points:[Z,Y,ce,pe]})}return S}(E.lights))),I){const T=[];for(const M of I)T.push(sT(r.json.nodes[M],r,s));v.children=T}return v}function vF(c){if(c.vertices.length===0||c.indices.length===0)return null;const r=new k8(c.vertices,c.indices,8,256),[s,u]=[r.min.clone(),r.max.clone()];return{vertices:c.vertices,indices:c.indices,grid:r,min:s,max:u}}function xF(c){if(!c.extras||!c.extras.ground)return null;const r=c.extras.ground;if(!r||!Array.isArray(r)||r.length===0)return null;const s=r[0];if(!s||!Array.isArray(s)||s.length===0)return null;const u=[];for(const g of s){if(!Array.isArray(g)||g.length!==2)continue;const b=g[0],E=g[1];typeof b=="number"&&typeof E=="number"&&u.push(new vt(b,E))}if(u.length<3)return null;u.length>1&&u[u.length-1].equals(u[0])&&u.pop();let m=0;for(let g=0;g<u.length;g++){const b=u[g],E=u[(g+1)%u.length],I=u[(g+2)%u.length];m+=(b.x-E.x)*(I.y-E.y)-(I.x-E.x)*(b.y-E.y)}m>0&&u.reverse();const f=W3(u.flatMap(g=>[g.x,g.y]),[]);return f.length===0?null:{vertices:u,indices:f}}function bF(c,r){const s=[],u=[];let m=0;const f=[];for(const g of c){m=s.length;const b=g.vertexArray.float32,E=g.indexArray.uint16;for(let I=0;I<g.vertexArray.length;I++)f[0]=b[3*I+0],f[1]=b[3*I+1],f[2]=b[3*I+2],Pe.vec3.transformMat4(f,f,r),s.push(new vt(f[0],f[1]));for(let I=0;I<3*g.indexArray.length;I++)u.push(E[I]+m)}if(u.length%3!=0)return null;for(let g=0;g<u.length;g+=3){const b=s[u[g+0]],E=s[u[g+1]],I=s[u[g+2]];(b.x-E.x)*(I.y-E.y)-(I.x-E.x)*(b.y-E.y)>0&&([u[g+1],u[g+2]]=[u[g+2],u[g+1]])}return{vertices:s,indices:u}}function lT(c){const r=function(E,I){const v=[],T=WebGL2RenderingContext;if(E.json.textures)for(const M of E.json.textures){const S={magFilter:T.LINEAR,minFilter:T.NEAREST,wrapS:T.REPEAT,wrapT:T.REPEAT};M.sampler!==void 0&&Object.assign(S,E.json.samplers[M.sampler]),v.push({image:I[M.source],sampler:S,uploaded:!1})}return v}(c,c.images),s=function(E,I){const v=[];for(const T of E.json.meshes){const M=[];for(const S of T.primitives)M.push(_F(S,E,I));v.push(M)}return v}(c,r),{scenes:u,scene:m,nodes:f}=c.json,g=u?u[m||0].nodes:f,b=[];for(const E of g)b.push(sT(f[E],c,s));return function(E,I,v){const T={},M=new Set;for(let S=0;S<E.length;S++){const P=v[I[S]];if(!P.extras)continue;const R=P.extras["mapbox:footprint:version"],L=P.extras["mapbox:footprint:id"];(R||L)&&M.add(S),R==="1.0.0"&&L&&(T[L]=S)}for(let S=0;S<E.length;S++){if(M.has(S))continue;const P=E[S],R=v[I[S]];if(!R.extras)continue;let L=null;P.id in T&&(L=bF(E[T[P.id]].meshes,P.matrix)),L||(L=xF(R)),L&&(P.footprint=vF(L))}if(M.size>0){const S=Array.from(M.values()).sort((P,R)=>P-R);for(let P=S.length-1;P>=0;P--)E.splice(S[P],1)}}(b,g,c.json.nodes),b}function wF(c){c.heightmap=new Float32Array(4096),c.heightmap.fill(-1);const r=c.vertexArray.float32,s=c.aabb.min[0]-1,u=c.aabb.min[1]-1,m=su/(c.aabb.max[0]-s+2),f=su/(c.aabb.max[1]-u+2);for(let g=0;g<r.length;g+=3){const b=r[g+2],E=(r[g+0]-s)*m|0,I=(r[g+1]-u)*f|0;b>c.heightmap[I*su+E]&&(c.heightmap[I*su+E]=b)}}function AF(c,r){const s={};s.indexArray=new Ti,s.indexArray.reserve(4*c.length),s.vertexArray=new Rs,s.vertexArray.reserve(10*c.length),s.colorArray=new es,s.vertexArray.reserve(10*c.length);let u=0;for(const g of c){const b=Math.min(10,Math.max(4,1.3*g.height))*r,E=[-g.normal[1],g.normal[0],0],I=Math.min(.29,.1*g.width/g.depth),v=g.width-2*g.depth*r*(I+.01),T=Pe.vec3.scaleAndAdd([],g.pos,E,v/2),M=Pe.vec3.scaleAndAdd([],g.pos,E,-v/2),S=[T[0],T[1],T[2]+g.height],P=[M[0],M[1],M[2]+g.height],R=Pe.vec3.scaleAndAdd([],g.normal,E,I);Pe.vec3.scale(R,R,b);const L=Pe.vec3.scaleAndAdd([],g.normal,E,-I);Pe.vec3.scale(L,L,b),Pe.vec3.add(R,T,R),Pe.vec3.add(L,M,L),T[2]+=.1,M[2]+=.1,s.vertexArray.emplaceBack(R[0],R[1],R[2]),s.vertexArray.emplaceBack(L[0],L[1],L[2]),s.vertexArray.emplaceBack(T[0],T[1],T[2]),s.vertexArray.emplaceBack(M[0],M[1],M[2]),s.vertexArray.emplaceBack(S[0],S[1],S[2]),s.vertexArray.emplaceBack(P[0],P[1],P[2]),s.vertexArray.emplaceBack(T[0],T[1],T[2]),s.vertexArray.emplaceBack(M[0],M[1],M[2]),s.vertexArray.emplaceBack(R[0],R[1],R[2]),s.vertexArray.emplaceBack(L[0],L[1],L[2]);const N=v/b/2;s.colorArray.emplaceBack(-N-I,-1,N,.8),s.colorArray.emplaceBack(N+I,-1,N,.8),s.colorArray.emplaceBack(-N,0,N,1.3),s.colorArray.emplaceBack(N,0,N,1.3),s.colorArray.emplaceBack(N+I,-.8,N,.7),s.colorArray.emplaceBack(N+I,-.8,N,.7),s.colorArray.emplaceBack(0,0,N,1.3),s.colorArray.emplaceBack(0,0,N,1.3),s.colorArray.emplaceBack(N+I,-1.2,N,.8),s.colorArray.emplaceBack(N+I,-1.2,N,.8),s.indexArray.emplaceBack(6+u,4+u,8+u),s.indexArray.emplaceBack(7+u,9+u,5+u),s.indexArray.emplaceBack(0+u,1+u,2+u),s.indexArray.emplaceBack(1+u,3+u,2+u),u+=10}const m={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=qr.white,m.pbrMetallicRoughness=f,s.material=m,s.aabb=new fn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),s}class cT{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const u=r[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const TF=["id","tile","layer","source","sourceLayer","state"];class uT{constructor(r,s,u,m,f){this.type="Feature",this._vectorTileFeature=r,this._z=s,this._x=u,this._y=m,this.properties=r.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const s of TF)this[s]!==void 0&&(r[s]=this[s]);return r}}class hT{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new sl(Dt,16,0),this.featureIndexArray=new bf,this.promoteId=s,this.is3DTile=!1}insert(r,s,u,m,f,g=0,b=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,f,g);const I=this.grid;for(let v=0;v<s.length;v++){const T=s[v],M=[1/0,1/0,-1/0,-1/0];for(let S=0;S<T.length;S++){const P=T[S];M[0]=Math.min(M[0],P.x),M[1]=Math.min(M[1],P.y),M[2]=Math.max(M[2],P.x),M[3]=Math.max(M[3],P.y)}b!==0&&(M[0]-=b,M[1]-=b,M[2]+=b,M[3]+=b),M[0]<Dt&&M[1]<Dt&&M[2]>=0&&M[3]>=0&&I.insert(E,M[0],M[1],M[2],M[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Q7.VectorTile(new Vf(this.rawTileData)).layers,this.sourceLayerCoder=new cT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,s,u,m){this.loadVTLayers();const f=r.params||{},g=ia(f.filter),b=r.tileResult,E=r.transform,I=b.bufferedTilespaceBounds,v=this.grid.query(I.min.x,I.min.y,I.max.x,I.max.y,(P,R,L,N)=>No(b.bufferedTilespaceGeometry,P,R,L,N));v.sort(SF);let T=null;E.elevation&&v.length>0&&(T=a0.create(E.elevation,this.tileID));const M={};let S;for(let P=0;P<v.length;P++){const R=v[P];if(R===S)continue;S=R;const L=this.featureIndexArray.get(R);let N=null;if(this.is3DTile){const G=this.bucketLayerIDs[0][0],W=s[G];if(W.type!=="model")continue;const{queryFeature:$,intersectionZ:Z}=W.queryIntersectsMatchingFeature(b,L.featureIndex,g,E);$&&this.appendToResult(M,G,L.featureIndex,$,Z)}else this.loadMatchingFeature(M,L,g,f.layers,f.availableImages,s,u,m,(G,W,$,Z=0)=>(N||(N=wt(G,this.tileID.canonical,r.tileTransform)),W.queryIntersectsFeature(b,G,$,N,this.z,r.transform,r.pixelPosMatrix,T,Z)))}return M}loadMatchingFeature(r,s,u,m,f,g,b,E,I){const{featureIndex:v,bucketIndex:T,sourceLayerIndex:M,layoutVertexArrayOffset:S}=s,P=this.bucketLayerIDs[T];if(m&&!function(G,W){for(let $=0;$<G.length;$++)if(W.indexOf(G[$])>=0)return!0;return!1}(m,P))return;const R=this.sourceLayerCoder.decode(M),L=this.vtLayers[R].feature(v);if(u.needGeometry){const G=Tt(L,!0);if(!u.filter(new On(this.tileID.overscaledZ),G,this.tileID.canonical))return}else if(!u.filter(new On(this.tileID.overscaledZ),L))return;const N=this.getId(L,R);for(let G=0;G<P.length;G++){const W=P[G];if(m&&m.indexOf(W)<0)continue;const $=g[W];if(!$)continue;let Z={};N!==void 0&&E&&(Z=E.getState($.sourceLayer||"_geojsonTileLayer",N));const Y=!I||I(L,$,Z,S);if(!Y)continue;const ce=new uT(L,this.z,this.x,this.y,N),pe=zi({},b[W]);pe.paint=fT(pe.paint,$.paint,L,Z,f),pe.layout=fT(pe.layout,$.layout,L,Z,f),ce.layer=pe,this.appendToResult(r,W,v,ce,Y)}}appendToResult(r,s,u,m,f){let g=r[s];g===void 0&&(g=r[s]=[]),g.push({featureIndex:u,feature:m,intersectionZ:f})}lookupSymbolFeatures(r,s,u,m,f,g,b,E){const I={};this.loadVTLayers();const v=ia(f);for(const T of r)this.loadMatchingFeature(I,{bucketIndex:u,sourceLayerIndex:m,featureIndex:T,layoutVertexArrayOffset:0},v,g,b,E,s);return I}loadFeature(r){const{featureIndex:s,sourceLayerIndex:u}=r;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),f=this.vtFeatures[m];if(f[s])return f[s];const g=this.vtLayers[m].feature(s);return f[s]=g,g}hasLayer(r){for(const s of this.bucketLayerIDs)for(const u of s)if(r===u)return!0;return!1}getId(r,s){let u=r.id;if(this.promoteId){const m=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];m!=null&&(u=r.properties[m]),typeof u=="boolean"&&(u=Number(u))}return u}}function fT(c,r,s,u,m){return Js(c,(f,g)=>{const b=r instanceof b1?r.get(g):null;return b&&b.evaluate?b.evaluate(s,u,m):b})}function SF(c,r){return r-c}Ut(hT,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const dT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Em{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=u>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const f=dT[15&u];if(!f)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new Em(b,g,f,r)}constructor(r,s=64,u=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const f=dT.indexOf(this.ArrayType),g=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${u}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+g+b+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=s,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Pm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:g,nodeSize:b}=this,E=[0,f.length-1,0],I=[];for(;E.length;){const v=E.pop()||0,T=E.pop()||0,M=E.pop()||0;if(T-M<=b){for(let L=M;L<=T;L++){const N=g[2*L],G=g[2*L+1];N>=r&&N<=u&&G>=s&&G<=m&&I.push(f[L])}continue}const S=M+T>>1,P=g[2*S],R=g[2*S+1];P>=r&&P<=u&&R>=s&&R<=m&&I.push(f[S]),(v===0?r<=P:s<=R)&&(E.push(M),E.push(S-1),E.push(1-v)),(v===0?u>=P:m>=R)&&(E.push(S+1),E.push(T),E.push(1-v))}return I}within(r,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:f,nodeSize:g}=this,b=[0,m.length-1,0],E=[],I=u*u;for(;b.length;){const v=b.pop()||0,T=b.pop()||0,M=b.pop()||0;if(T-M<=g){for(let L=M;L<=T;L++)mT(f[2*L],f[2*L+1],r,s)<=I&&E.push(m[L]);continue}const S=M+T>>1,P=f[2*S],R=f[2*S+1];mT(P,R,r,s)<=I&&E.push(m[S]),(v===0?r-u<=P:s-u<=R)&&(b.push(M),b.push(S-1),b.push(1-v)),(v===0?r+u>=P:s+u>=R)&&(b.push(S+1),b.push(T),b.push(1-v))}return E}}function Pm(c,r,s,u,m,f){if(m-u<=s)return;const g=u+m>>1;pT(c,r,g,u,m,f),Pm(c,r,s,u,g-1,1-f),Pm(c,r,s,g+1,m,1-f)}function pT(c,r,s,u,m,f){for(;m>u;){if(m-u>600){const I=m-u+1,v=s-u+1,T=Math.log(I),M=.5*Math.exp(2*T/3),S=.5*Math.sqrt(T*M*(I-M)/I)*(v-I/2<0?-1:1);pT(c,r,s,Math.max(u,Math.floor(s-v*M/I+S)),Math.min(m,Math.floor(s+(I-v)*M/I+S)),f)}const g=r[2*s+f];let b=u,E=m;for(bh(c,r,u,s),r[2*m+f]>g&&bh(c,r,u,m);b<E;){for(bh(c,r,b,E),b++,E--;r[2*b+f]<g;)b++;for(;r[2*E+f]>g;)E--}r[2*u+f]===g?bh(c,r,u,E):(E++,bh(c,r,E,m)),E<=s&&(u=E+1),s<=E&&(m=E-1)}}function bh(c,r,s,u){Mm(c,s,u),Mm(r,2*s,2*u),Mm(r,2*s+1,2*u+1)}function Mm(c,r,s){const u=c[r];c[r]=c[s],c[s]=u}function mT(c,r,s,u){const m=c-s,f=r-u;return m*m+f*f}a.$=hf,a.A=class extends ld{},a.B=nl,a.C=Ql,a.D=Zc,a.E=Jl,a.F=y3,a.G=S7,a.H=tf,a.I=K8,a.J=M7,a.K=B7,a.L=sf,a.M=Gc,a.N=y7,a.O=Bc,a.P=vt,a.Q=zc,a.R=Xl,a.S=so,a.T=cm,a.U=V2,a.V=ld,a.W=P3,a.X=E7,a.Y=g3,a.Z=function(c){const r=c.value;let s=[];if(!r)return s;const u=nl(r);return u!=="string"?(s=s.concat([new ld(c.key,r,`string expected, "${u}" found`)]),s):(SA(r,!0)||(s=s.concat([new ld(c.key,r,`invalid url "${r}"`)])),s)},a._=He,a.a=function(c){return De.API_CDN_URL_REGEX.test(c)},a.a$=z3,a.a0=bn,a.a1=Et,a.a2=class{constructor(c){this.specification=c}possiblyEvaluate(c,r){return vo(c.expression.evaluate(r))}interpolate(c,r,s){return{x:nr(c.x,r.x,s),y:nr(c.y,r.y,s),z:nr(c.z,r.z,s),azimuthal:nr(c.azimuthal,r.azimuthal,s),polar:nr(c.polar,r.polar,s)}}},a.a3=On,a.a4=Aa,a.a5=Ve,a.a6=Pe,a.a7=Gl,a.a8=b1,a.a9=R1,a.aA=hn,a.aB=fA,a.aC=_A,a.aD=hA,a.aE=function(c,r){const s=document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let u=0;u<c.length;u++){const m=document.createElement("source");Fo(c[u])||(s.crossOrigin="Anonymous"),m.src=c[u],s.appendChild(m)}return{cancel:()=>{}}},a.aF=nd,a.aG=function(c){return fetch(c).then(r=>r.arrayBuffer()).then(r=>aT(r,0,c))},a.aH=lT,a.aI=class{constructor(c,r,s,u){this.id=c,this.position=r!=null?new q(r[0],r[1]):new q(0,0),this.orientation=s??[0,0,0],this.nodes=u,this.uploaded=!1,this.aabb=new fn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(c,r){if(Pe.mat4.multiply(c.matrix,r,c.matrix),c.meshes)for(const s of c.meshes){const u=fn.applyTransformFast(s.aabb,c.matrix);this.aabb.encapsulate(u)}if(c.children)for(const s of c.children)this._applyTransformations(s,c.matrix)}computeBoundsAndApplyParent(){const c=Pe.mat4.identity([]);for(const r of this.nodes)this._applyTransformations(r,c)}computeModelMatrix(c,r,s,u,m,f,g=!1){IA(this.matrix,this,c.transform,this.position,r,s,u,m,f,g)}upload(c){if(!this.uploaded){for(const r of this.nodes)pm(r,c);for(const r of this.nodes)cd(r);this.uploaded=!0}}destroy(){for(const c of this.nodes)mm(c)}},a.aJ=ql,a.aK=ah,a.aL=be,a.aM=xe,a.aN=Os,a.aO=Ti,a.aP=bc,a.aQ=H7,a.aR=td,a.aS=function(){co.isLoading()||co.isLoaded()||T3()!=="deferred"||S3()},a.aT=ia,a.aU=Tt,a.aV=uT,a.aW=Tc,a.aX=V8,a.aY=D8,a.aZ=wt,a.a_=Is,a.aa=nr,a.ab=Dt,a.ac=Ic,a.ad=class{constructor(c){this.specification=c}possiblyEvaluate(c,r){return function([s,u]){const m=vo([1,s,u]);return{x:m.x,y:m.y,z:m.z}}(c.expression.evaluate(r))}interpolate(c,r,s){return{x:nr(c.x,r.x,s),y:nr(c.y,r.y,s),z:nr(c.z,r.z,s)}}},a.ae=function(c,r,s=0,u=!0){const m=new vt(s,s),f=c.sub(m),g=r.add(m),b=[f,new vt(g.x,f.y),g,new vt(f.x,g.y)];return u&&b.push(f.clone()),b},a.af=function(c,r){const s=[];for(let u=0;u<c.length;u++){const m=Za(u-1,-1,c.length-1),f=Za(u+1,-1,c.length-1),g=c[u],b=c[f],E=c[m].sub(g).unit(),I=b.sub(g).unit(),v=I.angleWithSep(E.x,E.y),T=E.add(I).unit().mult(-1*r/Math.sin(v/2));s.push(g.add(T))}return s},a.ag=Kw,a.ah=No,a.ai=function(c,r,s=0){return Pe.vec3.fromValues(((r.x-s)*c.scale-c.x)*Dt,(r.y*c.scale-c.y)*Dt,Ce(r.z,r.y))},a.aj=is,a.ak=yw,a.al=function(c){let r=1/0,s=1/0,u=-1/0,m=-1/0;for(const f of c)r=Math.min(r,f.x),s=Math.min(s,f.y),u=Math.max(u,f.x),m=Math.max(m,f.y);return{min:new vt(r,s),max:new vt(u,m)}},a.am=me,a.an=pn,a.ao=dt,a.ap=mr,a.aq=i,a.ar=function(c,r){const s={};for(let u=0;u<r.length;u++){const m=r[u];m in c&&(s[m]=c[m])}return s},a.as=J,a.at=ye,a.au=class{constructor(c){this.entries={},this.scheduler=c}request(c,r,s,u){const m=this.entries[c]=this.entries[c]||{callbacks:[]};if(m.result){const[f,g]=m.result;return this.scheduler?this.scheduler.add(()=>{u(f,g)},r):u(f,g),()=>{}}return m.callbacks.push(u),m.cancel||(m.cancel=s((f,g)=>{m.result=[f,g];for(const b of m.callbacks)this.scheduler?this.scheduler.add(()=>{b(f,g)},r):b(f,g);setTimeout(()=>delete this.entries[c],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(f=>f!==u),m.callbacks.length||(m.cancel(),delete this.entries[c]))}}},a.av=mf,a.aw=function(c,r,s){const u=JSON.stringify(c.request);return c.data&&(this.deduped.entries[u]={result:[null,c.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},m=>{const f=Yl(c.request,(g,b,E,I)=>{g?m(g):b&&m(null,{vectorTile:s?void 0:new Q7.VectorTile(new Vf(b)),rawData:b,cacheControl:E,expires:I})});return()=>{f.cancel(),m()}},r)},a.ax=function(c){oi++,oi>Gr&&(c.getActor().send("enforceCacheSizeLimit",ur),oi=0)},a.ay=Bt,a.az=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},a.b=function(c){return De.API_FONTS_REGEX.test(c)},a.b$=function(c){const{x:r,y:s}=c.point,{lng:u,lat:m}=c._center;return cb(r,s,c.worldSize,u,m)},a.b0=$o,a.b1=Rn,a.b2=W3,a.b3=am,a.b4=function(c,r){const s=R1(r.zoom);if(s===0)return zs(c);const u=Cf(c),m=T8(u),f=me(u.getWest())*r.worldSize,g=me(u.getEast())*r.worldSize,b=ye(u.getNorth())*r.worldSize,E=ye(u.getSouth())*r.worldSize,I=[f,b,0],v=[g,b,0],T=[f,E,0],M=[g,E,0],S=Pe.mat4.invert([],r.globeMatrix);return Pe.vec3.transformMat4(I,I,S),Pe.vec3.transformMat4(v,v,S),Pe.vec3.transformMat4(T,T,S),Pe.vec3.transformMat4(M,M,S),m[0]=ml(m[0],T,s),m[1]=ml(m[1],M,s),m[2]=ml(m[2],v,s),m[3]=ml(m[3],I,s),fn.fromPoints(m)},a.b5=Of,a.b6=G3,a.b7=ml,a.b8=$7,a.b9=uo,a.bA=Za,a.bB=br,a.bC=el,a.bD=de,a.bE=function(c,r,s){c[4*r+0]=s[0],c[4*r+1]=s[1],c[4*r+2]=s[2],c[4*r+3]=s[3]},a.bF=nu,a.bG=Ta,a.bH=j3,a.bI=ji,a.bJ=fl,a.bK=q,a.bL=rA,a.bM=si,a.bN=O1,a.bO=xA,a.bP=di,a.bQ=ab,a.bR=function(c,r,s,u,m,f,g,b,E){if(E.name==="globe")return ab(c,r,new di(s,u,m),!1);const I=ah({z:s,x:u,y:m},E);return new fn([(f+I.x/I.scale)*r,r*(I.y/I.scale),g],[(f+I.x2/I.scale)*r,r*(I.y2/I.scale),b])},a.bS=function(c,r,s){let u=0;for(let m=0;m<2;++m)c[m]>0&&(u+=(c[m]-0)*(c[m]-0)),r[m]<0&&(u+=(0-r[m])*(0-r[m]));return u},a.bT=Se,a.bU=p,a.bV=function(c){const r=Pe.mat4.identity(new Float64Array(16));Pe.mat4.multiply(r,c.pixelMatrix,c.globeMatrix);const s=[0,O,0],u=[0,k,0];return Pe.vec3.transformMat4(s,s,r),Pe.vec3.transformMat4(u,u,r),[s[0]>0&&s[0]<=c.width&&s[1]>0&&s[1]<=c.height&&!P8(c,new q(c.center.lat,90)),u[0]>0&&u[0]<=c.width&&u[1]>0&&u[1]<=c.height&&!P8(c,new q(c.center.lat,-90))]},a.bW=function(c,r){const{scale:s}=c.tileTransform,u=s*Dt/(c.tileSize*Math.pow(2,r.zoom-c.tileID.overscaledZ+c.tileID.canonical.z));return Pe.mat2.scale(new Float32Array(4),r.inverseAdjustmentMatrix,[u,u])},a.bX=ad,a.bY=vA,a.bZ=function(c){const r=vA(c,!0);return Pe.mat2.invert([],[r[0],r[1],r[4],r[5]])},a.b_=Ls,a.ba=xm,a.bb=Vf,a.bc=Yl,a.bd=function(c){const r=[];for(const s in c)r.push(c[s]);return r},a.be=function(c,r){const s=[];for(const u in c)u in r||s.push(u);return s},a.bf=Ks,a.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.bh=Tn,a.bi=function(c,r){const{x:s,y:u}=c.point,m=cb(s,u,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Pe.mat4.multiply(m,m,S8(zs(r)))},a.bj=e0,a.bk=aa,a.bl=Uf,a.bm=function(c,r,s,u,m){const f=5*r+2;c.float32[f+0]=s,c.float32[f+1]=u,c.float32[f+2]=m},a.bn=ed,a.bo=jw,a.bp=It,a.bq=Ci,a.br=Ub,a.bs=TA,a.bt=Hb,a.bu=Zb,a.bv=em,a.bw=Hw,a.bx=Y8,a.by=Em,a.bz=qr,a.c=$e,a.c$=Ji,a.c0=jn,a.c1=Ki,a.c2=l,a.c3=function(c){const r=Math.round((c+45+360)%360/90)%4;return _i[r]},a.c4=45,a.c5=oe,a.c6=Y7,a.c7=function(c,r,s){const u=Math.sqrt(c*c+r*r+s*s),m=u>0?Math.acos(s/u)*wi:0;let f=c!==0||r!==0?Math.atan2(-r,-c)*wi+90:0;return f<0&&(f+=360),[u,f,m]},a.c8=Re,a.c9=fn,a.cA=function(c){const r=Se-5;c=mr(c,-r,r)/r*90;const s=Math.pow(Math.abs(Math.sin(br(c))),3);return Math.round(s*(A.length-1))},a.cB=function(c,r,s,u){const m=r.getNorth(),f=r.getSouth(),g=r.getWest(),b=r.getEast(),E=1<<c.z,I=b-g,v=m-f,T=I/x,M=-v/A[s],S=[0,T,0,M,0,0,m,g,0];if(c.z>0){const P=180/u;Pe.mat3.multiply(S,S,[P/I+1,0,0,0,P/v+1,0,-.5*P/T,.5*P/M,1])}return S[2]=E,S[5]=c.x,S[8]=c.y,S},a.cC=zs,a.cD=function(c,r,s){const u=Pe.mat4.identity(new Float64Array(16)),m=(r/(1<<c)-.5)*Math.PI*2;return Pe.mat4.rotateY(u,s.globeMatrix,m),Float32Array.from(u)},a.cE=class{isDataAvailableAtPoint(c){const r=this._source();if(this.isUsingMockSource()||!r||c.y<0||c.y>1)return!1;const s=r.getSource().maxzoom,u=1<<s,m=Math.floor(c.x),f=Math.floor((c.x-m)*u),g=Math.floor(c.y*u),b=this.findDEMTileFor(new hn(s,m,s,f,g));return!(!b||!b.dem)}getAtPointOrZero(c,r=0){return this.getAtPoint(c,r)||0}getAtPoint(c,r,s=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||c.y<0||c.y>1)return r;const m=u.getSource().maxzoom,f=1<<m,g=Math.floor(c.x),b=c.x-g,E=new hn(m,g,m,Math.floor(b*f),Math.floor(c.y*f)),I=this.findDEMTileFor(E);if(!I||!I.dem)return r;const v=I.dem,T=1<<I.tileID.canonical.z,M=(b*T-I.tileID.canonical.x)*v.dim,S=(c.y*T-I.tileID.canonical.y)*v.dim,P=Math.floor(M),R=Math.floor(S);return(s?this.exaggeration():1)*nr(nr(v.get(P,R),v.get(P,R+1),S-R),nr(v.get(P+1,R),v.get(P+1,R+1),S-R),M-P)}getAtTileOffset(c,r,s){const u=1<<c.canonical.z;return this.getAtPointOrZero(new Ve(c.wrap+(c.canonical.x+r/Dt)/u,(c.canonical.y+s/Dt)/u))}getAtTileOffsetFunc(c,r,s,u){return m=>{const f=this.getAtTileOffset(c,m.x,m.y),g=u.upVector(c.canonical,m.x,m.y),b=u.upVectorScale(c.canonical,r,s).metersToTile;return Pe.vec3.scale(g,g,f*b),g}}getForTilePoints(c,r,s,u){if(this.isUsingMockSource())return!1;const m=a0.create(this,c,u);return!!m&&(r.forEach(f=>{f[2]=this.exaggeration()*m.getElevationAt(f[0],f[1],s)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(c);if(!r||!r.dem)return null;const s=r.dem.tree,u=r.tileID,m=1<<c.canonical.z-u.canonical.z;let f=c.canonical.x/m-u.canonical.x,g=c.canonical.y/m-u.canonical.y,b=0;for(let E=0;E<c.canonical.z-u.canonical.z&&!s.leaves[b];E++){f*=2,g*=2;const I=2*Math.floor(g)+Math.floor(f);b=s.childOffsets[b]+I,f%=1,g%=1}return{min:this.exaggeration()*s.minimums[b],max:this.exaggeration()*s.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,r,s){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const c=this.visibleDemTiles;if(c.length===0)return null;let r=!1,s=Number.MAX_VALUE,u=Number.MIN_VALUE;for(const m of c){const f=this.getMinMaxForTile(m.tileID);f&&(s=Math.min(s,f.min),u=Math.max(u,f.max),r=!0)}return r?{min:s,max:u}:null}},a.cF=wb,a.cG=pl,a.cH=function(c,r){return[Math.pow(c[0],2.2)*r,Math.pow(c[1],2.2)*r,Math.pow(c[2],2.2)*r]},a.cI=lb,a.cJ=we,a.cK=ue,a.cL=256,a.cM=function(c,r){const s=[0,0,0],u=Of(zs(r.canonical));return Pe.vec3.transformMat4(s,s,u),Pe.vec3.transformMat4(s,s,c),s},a.cN=c=>({u_camera_to_center_distance:new ji(c),u_extrude_scale:new U3(c),u_device_pixel_ratio:new ji(c),u_matrix:new nu(c),u_inv_rot_matrix:new nu(c),u_merc_center:new Ta(c),u_tile_id:new j3(c),u_zoom_transition:new ji(c),u_up_dir:new j3(c),u_emissive_strength:new ji(c)}),a.cO=c=>({u_matrix:new nu(c),u_pixels_to_tile_units:new U3(c),u_device_pixel_ratio:new ji(c),u_units_to_pixels:new Ta(c),u_dash_image:new fl(c),u_gradient_image:new fl(c),u_image_height:new ji(c),u_texsize:new Ta(c),u_tile_units_to_pixels:new ji(c),u_alpha_discard_threshold:new ji(c),u_trim_offset:new Ta(c),u_trim_fade_range:new Ta(c),u_trim_color:new Y7(c),u_emissive_strength:new ji(c)}),a.cP=c=>({u_matrix:new nu(c),u_texsize:new Ta(c),u_pixels_to_tile_units:new U3(c),u_device_pixel_ratio:new ji(c),u_image:new fl(c),u_units_to_pixels:new Ta(c),u_tile_units_to_pixels:new ji(c),u_alpha_discard_threshold:new ji(c),u_trim_offset:new Ta(c)}),a.cQ=Yi,a.cR=Hz,a.cS=Zz,a.cT=fb,a.cU=(c,r,s,u,m,f)=>{const g=c.transform,b=g.projection.name==="globe";let E;if(f.paint.get("circle-pitch-alignment")==="map")if(b){const v=lb(g.zoom,r.canonical)*g._pixelsPerMercatorPixel;E=Float32Array.from([v,0,0,v])}else E=g.calculatePixelsToTileUnitsMatrix(s);else E=new Float32Array([g.pixelsToGLUnits[0],0,0,g.pixelsToGLUnits[1]]);const I={u_camera_to_center_distance:c.transform.getCameraToCenterDistance(g.projection),u_matrix:c.translatePosMatrix(r.projMatrix,s,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Ft.devicePixelRatio,u_extrude_scale:E,u_inv_rot_matrix:KL,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(b){I.u_inv_rot_matrix=u,I.u_merc_center=m,I.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],I.u_zoom_transition=R1(g.zoom);const v=m[0]*Dt,T=m[1]*Dt;I.u_up_dir=g.projection.upVector(new di(0,0,0),v,T)}return I},a.cV=xw,a.cW=(c,r,s,u,m,f)=>{const g=c.transform;return{u_matrix:vw(c,r,s,u),u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:g.calculatePixelsToTileUnitsMatrix(r),u_device_pixel_ratio:m,u_image:0,u_tile_units_to_pixels:_w(r,g),u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:f}},a.cX=(c,r,s,u,m,f,g)=>{const b=c.transform,E=b.calculatePixelsToTileUnitsMatrix(r);return{u_matrix:vw(c,r,s,u),u_pixels_to_tile_units:E,u_device_pixel_ratio:f,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:m,u_texsize:bw(s)&&r.lineAtlasTexture?r.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:_w(r,c.transform),u_alpha_discard_threshold:0,u_trim_offset:g,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength")}},a.cY=wc,a.cZ=q3,a.c_=sw,a.ca=vo,a.cb=function(c){return[Math.pow(c[0],1/2.2),Math.pow(c[1],1/2.2),Math.pow(c[2],1/2.2)]},a.cc=function(c){return c({pluginStatus:vi,pluginURL:Cs}),A3.on("pluginStateChange",c),c},a.cd=s0,a.ce=fd,a.cf=r0,a.cg=J8,a.ch=F2,a.ci=uf,a.cj=cr,a.ck=oo,a.cl=Bo,a.cm=function(c){const r=c.indexOf(A1);return r>=0?c.slice(0,r):c},a.cn=function(c){return c.indexOf(A1)>=0},a.co=function(c){const r=c.indexOf(A1);return r>=0?c.slice(r+1):""},a.cp=function(c){const r=[],s=c.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),c.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},a.cq=function(c,r,s,u){return c.type==="custom"?new SB(c,r):new zB[c.type](c,r,s,u)},a.cr=Wl,a.cs=A3,a.ct=Pc,a.cu=$3,a.cv=class extends ns{constructor(c){super(c),this.current=y8}set(c,r,s){if(this.fetchUniformLocation(c,r)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},a.cw=Wi,a.cx=function(c,r,s){const u=R1(s.zoom),m=c.style.map._antialias,f=r.options.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return u===0&&!m&&!f},a.cy=function(c){const r=c.pixelsPerMeter,s=r/de(1,c.center.lat),u=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.translate(u,u,[c.point.x,c.point.y,0]),Pe.mat4.scale(u,u,[s,s,r]),Float32Array.from(u)},a.cz=Cf,a.d=function(c){return De.API_TILEJSON_REGEX.test(c)},a.d$=D,a.d0=$f,a.d1=k1,a.d2=450,a.d3=7,a.d4=TB,a.d5=Nr,a.d6=q7,a.d7=256,a.d8=S8,a.d9=Rs,a.dA=ub,a.dB=function(c){const r=[0,0,0],s=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.multiply(s,c.pixelMatrix,c.globeMatrix),Pe.vec3.transformMat4(r,r,s),new vt(r[0],r[1])},a.dC=function(c,r,s=!1){if(vi===Wc||vi===Hc||vi===L7)throw new Error("setRTLTextPlugin cannot be called multiple times.");Cs=Ft.resolveURL(c),vi=Wc,v1=r,w3(),s||S3()},a.dD=T3,a.dE=function(){fd().acquire(bm)},a.dF=function(){const c=_h;c&&(c.isPreloaded()&&c.numActive()===1?(c.release(bm),_h=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.dG=yh,a.dH=function(c){const r=An();if(!r)return;const s=r.delete(hr);c&&s.catch(c).then(()=>c())},a.dI=gh,a.dJ=QA,a.dK=function(c){wm=Ft.resolveURL(c),u0||(u0=new s0(fd(),new Jl)),u0.broadcast("setDracoUrl",wm)},a.dL=eT,a.dM=function(c){c0=Ft.resolveURL(c),u0||(u0=new s0(fd(),new Jl)),u0.broadcast("setMeshoptUrl",c0)},a.dN=Ut,a.dO=D1,a.dP=as,a.dQ=cT,a.dR=hT,a.dS=dw,a.dT=Js,a.dU=Uw,a.dV=function(c,r,s,u,m,f,g,b,E,I,v){c.createArrays(),c.tilePixelRatio=Dt/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const T=c.layers[0].layout,M=c.layers[0]._unevaluatedLayout._values,S={};if(c.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:G}=c.textSizeData;S.compositeTextSizes=[M["text-size"].possiblyEvaluate(new On(N),b),M["text-size"].possiblyEvaluate(new On(G),b)]}if(c.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:G}=c.iconSizeData;S.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new On(N),b),M["icon-size"].possiblyEvaluate(new On(G),b)]}S.layoutTextSize=M["text-size"].possiblyEvaluate(new On(E+1),b),S.layoutIconSize=M["icon-size"].possiblyEvaluate(new On(E+1),b),S.textMaxSize=M["text-size"].possiblyEvaluate(new On(18),b);const P=T.get("text-rotation-alignment")==="map"&&T.get("symbol-placement")!=="point",R=T.get("text-size");let L=!1;for(const N of c.features)if(N.icon&&N.icon.nameSecondary){L=!0;break}for(const N of c.features){const G=T.get("text-font").evaluate(N,{},b).join(","),W=R.evaluate(N,{},b),$=S.layoutTextSize.evaluate(N,{},b),Z=(S.layoutIconSize.evaluate(N,{},b),{horizontal:{},vertical:void 0}),Y=N.text;let ce,pe=[0,0];if(Y){const Ae=Y.toString(),_e=T.get("text-letter-spacing").evaluate(N,{},b)*Ci,Me=T.get("text-line-height").evaluate(N,{},b)*Ci,Le=o8(Ae)?_e:0,Be=T.get("text-anchor").evaluate(N,{},b),Fe=T.get("text-variable-anchor");if(!Fe){const pt=T.get("text-radial-offset").evaluate(N,{},b);pe=pt?Hw(Be,[pt*Ci,Q8]):T.get("text-offset").evaluate(N,{},b).map(et=>et*Ci)}let je=P?"center":T.get("text-justify").evaluate(N,{},b);const Ye=T.get("symbol-placement")==="point",Ue=Ye?T.get("text-max-width").evaluate(N,{},b)*Ci:1/0,ot=pt=>{c.allowVerticalPlacement&&R7(Ae)&&(Z.vertical=X8(Y,r,s,m,G,Ue,Me,Be,pt,Le,pe,aa.vertical,!0,$,W))};if(!P&&Fe){const pt=je==="auto"?Fe.map(zt=>em(zt)):[je];let et=!1;for(let zt=0;zt<pt.length;zt++){const Ot=pt[zt];if(!Z.horizontal[Ot])if(et)Z.horizontal[Ot]=Z.horizontal[0];else{const At=X8(Y,r,s,m,G,Ue,Me,"center",Ot,Le,pe,aa.horizontal,!1,$,W);At&&(Z.horizontal[Ot]=At,et=At.positionedLines.length===1)}}ot("left")}else{if(je==="auto"&&(je=em(Be)),Ye||T.get("text-writing-mode").indexOf("horizontal")>=0||!R7(Ae)){const pt=X8(Y,r,s,m,G,Ue,Me,Be,je,Le,pe,aa.horizontal,!1,$,W);pt&&(Z.horizontal[je]=pt)}ot(Ye?"left":je)}}let ge=!1;if(N.icon&&N.icon.namePrimary){const Ae=u[N.icon.namePrimary];Ae&&(ce=iB(m[N.icon.namePrimary],N.icon.nameSecondary?m[N.icon.nameSecondary]:void 0,T.get("icon-offset").evaluate(N,{},b),T.get("icon-anchor").evaluate(N,{},b)),ge=Ae.sdf,c.sdfIcons===void 0?c.sdfIcons=Ae.sdf:c.sdfIcons!==Ae.sdf&&Br("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ae.pixelRatio!==c.pixelRatio||T.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const he=Xw(Z.horizontal)||Z.vertical;c.iconsInText||(c.iconsInText=!!he&&he.iconsInText),(he||ce)&&hB(c,N,Z,ce,u,S,$,0,pe,ge,g,b,I,v,L)}f&&c.generateCollisionDebugBuffers(E,c.collisionBoxArray)},a.dW=Q7,a.dX=hd,a.dY=Vr,a.dZ=Fb,a.d_=Pw,a.da=rs,a.db=L3,a.dc=function(c,r,s,u,m){return mr((c-r)/(s-r)*(m-u)+u,u,m)},a.dd=T7,a.de=ze,a.df=class{constructor(c,r,s,u){this.context=c,this.format=u,this.size=s,this.texture=c.gl.createTexture();const[m,f,g]=this.size,{gl:b}=c;b.bindTexture(b.TEXTURE_3D,this.texture),c.pixelStoreUnpackFlipY.set(!1),c.pixelStoreUnpack.set(1),c.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,m,f,g,0,sm(this.format),lm(this.format),r.data)}bind(c,r){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_3D,this.texture),c!==this.minFilter&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MAG_FILTER,c),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MIN_FILTER,c),this.minFilter=c),r!==this.wrapS&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_T,r),this.wrapS=r)}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}},a.dg=fm,a.dh=[1,1,1],a.di=a0,a.dj=o0,a.dk=Ds,a.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new vt(1/0,1/0),max:new vt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(c,r=!1){const s=Gb(new vt(0,0),new vt(Dt,Dt),c),u=[];if(r&&!F8(s,this._globalClipBounds))return u;for(const m of this._activeRegions){if(m.hiddenByOverlap||!F8(s,m))continue;const f=xz(m.min,m.max,c);u.push({min:f.min,max:f.max,sourceId:this._sourceIds[m.priority],footprint:m.footprint,footprintTileId:m.tileId,order:m.order,clipMask:m.clipMask,clipScope:m.clipScope})}return u}setSources(c){this._setSources(c.map(r=>({getSourceId:()=>r.cache.id,getFootprints:()=>{const s=[];for(const u of r.cache.getVisibleCoordinates()){const m=r.cache.getTile(u).buckets[r.layer];m&&m.updateFootprints(u.toUnwrapped(),s)}return s},getOrder:()=>r.order,getClipMask:()=>r.clipMask,getClipScope:()=>r.clipScope})))}_addSource(c){const r=c.getFootprints();if(r.length===0)return;const s=c.getOrder(),u=c.getClipMask(),m=c.getClipScope();for(const f of r){if(!f.footprint)continue;const g=Gb(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:g.min,max:g.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:s,clipMask:u,clipScope:m})}this._sourceIds.push(c.getSourceId())}_computeReplacement(){this._activeRegions.sort((r,s)=>r.priority-s.priority||Nf(r.min,s.min)||Nf(r.max,s.max)||r.order-s.order||r.clipMask-s.clipMask||function(u,m){const f=(g,b)=>g+b;return u.length-m.length||u.reduce(f,"").localeCompare(m.reduce(f,""))}(r.clipScope,s.clipScope));let c=this._activeRegions.length!==this._prevRegions.length;if(!c){let r=0;for(;!c&&r!==this._activeRegions.length;){const s=this._activeRegions[r],u=this._prevRegions[r];c=s.priority!==u.priority||!Vb(s,u)||s.order!==u.order||s.clipMask!==u.clipMask||!Tn(s.clipScope,u.clipScope),++r}}if(c){++this._updateTime;for(const s of this._activeRegions)s.order!==Ff&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,s.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,s.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,s.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,s.max.y));const r=s=>{const u=this._activeRegions;if(s>=u.length)return s;const m=u[s].priority;for(;s<u.length&&u[s].priority===m;)++s;return s};if(this._sourceIds.length>1){let s=0,u=r(s);for(;s!==u;){let m=s;const f=s;for(;m!==u;){const g=this._activeRegions[m];g.hiddenByOverlap=!1;for(let b=0;b<f;b++){const E=this._activeRegions[b];if(!E.hiddenByOverlap&&g.order===Ff&&F8(g,E)&&(g.hiddenByOverlap=Wb(g.footprint,g.tileId,E.footprint,E.tileId),g.hiddenByOverlap))break}++m}s=u,u=r(s)}}}}_setSources(c){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let r=c.length-1;r>=0;r--)this._addSource(c[r]);this._computeReplacement()}},a.dm=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy()}_fillGridMeshWithLods(c,r){const s=new Is,u=new Ti,m=[],f=c+1+2,g=r[0]+1,b=r[0]+1+(1+r.length),E=(I,v,T)=>{let M=I===f-1?I-2:I===0?I:I-1;return M+=T?24575:0,[M,v]};for(let I=0;I<f;++I)s.emplaceBack(...E(I,0,!0));for(let I=0;I<g;++I)for(let v=0;v<f;++v)s.emplaceBack(...E(v,I,(v===0||v===f-1)&&!0));for(let I=0;I<r.length;++I){const v=r[I];for(let T=0;T<f;++T)s.emplaceBack(...E(T,v,!0))}for(let I=0;I<r.length;++I){const v=u.length,T=r[I]+1+2,M=new Ti;for(let R=0;R<T-1;R++){const L=R===T-2,N=L?f*(b-r.length+I-R):f;for(let G=0;G<f-1;G++){const W=R*f+G;R===0||L||G===0||G===f-2?(M.emplaceBack(W+1,W,W+N),M.emplaceBack(W+N,W+N+1,W+1)):(u.emplaceBack(W+1,W,W+N),u.emplaceBack(W+N,W+N+1,W+1))}}const S=Rn.simpleSegment(0,v,s.length,u.length-v);for(let R=0;R<M.uint16.length;R+=3)u.emplaceBack(M.uint16[R],M.uint16[R+1],M.uint16[R+2]);const P=Rn.simpleSegment(0,v,s.length,u.length-v);m.push({withoutSkirts:S,withSkirts:P})}return{vertices:s,indices:u,segments:m}}_createGrid(c){const r=this._fillGridMeshWithLods(x,A);this._gridSegments=r.segments,this._gridBuffer=c.createVertexBuffer(r.vertices,$o.members),this._gridIndexBuffer=c.createIndexBuffer(r.indices,!0)}_createPoles(c){const r=new Ti;for(let g=0;g<=x;g++)r.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(r,!0);const s=new rs,u=new rs,m=new rs,f=new rs;this._poleSegments=[];for(let g=0,b=0;g<l;g++){const E=360/(1<<g);s.emplaceBack(0,-i,0,.5,0),u.emplaceBack(0,-i,0,.5,1),m.emplaceBack(0,-i,0,.5,.5),f.emplaceBack(0,-i,0,.5,.5);for(let I=0;I<=x;I++){let v=I/x,T=0;const M=nr(0,E,v),[S,P,R]=z(XL,YL,M,i);s.emplaceBack(S,P,R,v,T),u.emplaceBack(S,P,R,v,1-T);const L=br(M);v=.5+.5*Math.sin(L),T=.5+.5*Math.cos(L),m.emplaceBack(S,P,R,v,T),f.emplaceBack(S,P,R,v,1-T)}this._poleSegments.push(Rn.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(s,Eo,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(u,Eo,!1),this._texturedPoleNorthVertexBuffer=c.createVertexBuffer(m,Eo,!1),this._texturedPoleSouthVertexBuffer=c.createVertexBuffer(f,Eo,!1)}getGridBuffers(c,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c,r){return[r?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,r?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}},a.dn=Ff,a.dp=zo,a.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.dr=Ha,a.ds=ke,a.dt=F,a.du=function([c,r,s]){const u=Math.hypot(c,r,s),m=Math.atan2(c,s),f=.5*Math.PI-Math.acos(-r/u);return new q(jn(m),jn(f))},a.dv=hm,a.dw=U,a.dx=function(c){const r=c.navigator?c.navigator.userAgent:null;return!!function(s){if(Sc==null){const u=s.navigator?s.navigator.userAgent:null;Sc=!!s.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Sc}(c)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.dy=function(c,r){ur=c,Gr=r},a.dz=P8,a.e=De,a.e0=function(c){let r=0;if(new Uint32Array(c,0,1)[0]!==rT){const s=new Uint32Array(c,0,7),[,,u,m,f,g]=s;r=s.byteLength+m+f+g+f,(u!==c.byteLength||r>=c.byteLength)&&Br("Invalid b3dm header information.")}return aT(c,r)},a.e1=function(c,r){const s=lT(c);for(const u of s){for(const m of u.meshes)wF(m);u.lights&&(u.lightMeshIndex=u.meshes.length,u.meshes.push(AF(u.lights,r)))}return s},a.e2=ud,a.e3=zA,a.e4=co,a.e5=function(c){ei(),vr!=null&&vr.then(r=>{r.keys().then(s=>{for(let u=0;u<s.length-c;u++)r.delete(s[u])})})},a.f=function(c){return c.indexOf("mapbox:")===0},a.g=function(c,r){return Pc(zi(c,{method:"GET"}),r)},a.h=Oe,a.i=function(c){return De.API_STYLE_REGEX.test(c)&&!$e(c)},a.j=function(c){return decodeURIComponent(atob(c).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))},a.k=function(c){return btoa(encodeURIComponent(c).replace(/%([0-9A-F]{2})/g,(r,s)=>String.fromCharCode(+("0x"+s))))},a.l=zi,a.m=Ai,a.n=function(c,r){return Pc(zi(c,{type:"json"}),r)},a.o=va,a.p=function(c,r){return Pc(zi(c,{method:"POST"}),r)},a.q=Ft,a.r=Qi,a.s=function(c){try{const r=self[c];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}},a.t=Cc,a.u=function(){return function c(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()},a.v=function(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)},a.w=Br,a.x=As,a.y=2,a.z=$w}),w(["./shared"],function(a){function D(Qe){const ae=Qe?Qe.url.toString():void 0;return ae?performance.getEntriesByName(ae):[]}function j(Qe){if(typeof Qe=="number"||typeof Qe=="boolean"||typeof Qe=="string"||Qe==null)return JSON.stringify(Qe);if(Array.isArray(Qe)){let ue="[";for(const we of Qe)ue+=`${j(we)},`;return`${ue}]`}let ae="{";for(const ue of Object.keys(Qe).sort())ae+=`${ue}:${j(Qe[ue])},`;return`${ae}}`}function B(Qe){let ae="";for(const ue of a.bg)ae+=`/${j(Qe[ue])}`;return ae}class H{constructor(ae){this.keyCache={},this._layers={},this._layerConfigs={},ae&&this.replace(ae)}replace(ae,ue){this._layerConfigs={},this._layers={},this.update(ae,[],ue)}update(ae,ue,we){this._options=we;for(const Oe of ae)this._layerConfigs[Oe.id]=Oe,(this._layers[Oe.id]=a.cq(Oe,this.scope,null,this._options)).compileFilter(we),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id];for(const Oe of ue)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const De=function(Oe,$e){const Ke={};for(let Je=0;Je<Oe.length;Je++){const lt=$e&&$e[Oe[Je].id]||B(Oe[Je]);$e&&($e[Oe[Je].id]=lt);let it=Ke[lt];it||(it=Ke[lt]=[]),it.push(Oe[Je])}const qe=[];for(const Je in Ke)qe.push(Ke[Je]);return qe}(a.bd(this._layerConfigs),this.keyCache);for(const Oe of De){const $e=Oe.map(bt=>this._layers[bt.id]),Ke=$e[0];if(Ke.visibility==="none")continue;const qe=Ke.source||"";let Je=this.familiesBySource[qe];Je||(Je=this.familiesBySource[qe]={});const lt=Ke.sourceLayer||"_geojsonTileLayer";let it=Je[lt];it||(it=Je[lt]=[]),it.push($e)}}}const X=1*a.dP;class ie{constructor(ae){const ue={},we=[];for(const Ke in ae){const qe=ae[Ke],Je=ue[Ke]={};for(const lt in qe.glyphs){const it=qe.glyphs[+lt];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const bt=it.metrics.localGlyph?X:1,Bt={x:0,y:0,w:it.bitmap.width+2*bt,h:it.bitmap.height+2*bt};we.push(Bt),Je[lt]=Bt}}const{w:De,h:Oe}=a.z(we),$e=new a.dO({width:De||1,height:Oe||1});for(const Ke in ae){const qe=ae[Ke];for(const Je in qe.glyphs){const lt=qe.glyphs[+Je];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const it=ue[Ke][Je],bt=lt.metrics.localGlyph?X:1;a.dO.copy(lt.bitmap,$e,{x:0,y:0},{x:it.x+bt,y:it.y+bt},lt.bitmap)}}this.image=$e,this.positions=ue}}a.dN(ie,"GlyphAtlas");class Q{constructor(ae){this.tileID=new a.aA(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.tileZoom=ae.tileZoom,this.uid=ae.uid,this.zoom=ae.zoom,this.lut=ae.lut,this.canonical=ae.tileID.canonical,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.scope=ae.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.promoteId=ae.promoteId,this.isSymbolTile=ae.isSymbolTile,this.tileTransform=a.aK(ae.tileID.canonical,ae.projection),this.projection=ae.projection,this.brightness=ae.brightness,this.extraShadowCaster=!!ae.extraShadowCaster,this.tessellationStep=ae.tessellationStep}parse(ae,ue,we,De,Oe){this.status="parsing",this.data=ae,this.collisionBoxArray=new a.aQ;const $e=new a.dQ(Object.keys(ae.layers).sort()),Ke=new a.dR(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];const qe={},Je=new a.dS(256,256),lt={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Je,availableImages:we,brightness:this.brightness},it=ue.familiesBySource[this.source];for(const ur in it){const Gr=ae.layers[ur];if(!Gr)continue;let Jr=!1,vr=!1,Yr=!1;for(const oi of it[ur])oi[0].type==="symbol"?Jr=!0:vr=!0,oi[0].is3D()&&oi[0].type!=="model"&&(Yr=!0);if(this.extraShadowCaster&&!Yr||this.isSymbolTile===!0&&!Jr||this.isSymbolTile===!1&&!vr)continue;Gr.version===1&&a.w(`Vector tile source "${this.source}" layer "${ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const An=$e.encode(ur),ei=[];for(let oi=0;oi<Gr.length;oi++){const Ai=Gr.feature(oi),Ko=Ke.getId(Ai,ur);ei.push({feature:Ai,id:Ko,index:oi,sourceLayerIndex:An})}for(const oi of it[ur]){const Ai=oi[0];(!this.extraShadowCaster||Ai.is3D()&&Ai.type!=="model")&&(this.isSymbolTile!==void 0&&Ai.type==="symbol"!==this.isSymbolTile||Ai.minzoom&&this.zoom<Math.floor(Ai.minzoom)||Ai.maxzoom&&this.zoom>=Ai.maxzoom||Ai.visibility!=="none"&&(ne(oi,this.zoom,lt.brightness,we),(qe[Ai.id]=Ai.createBucket({index:Ke.bucketLayerIDs.length,layers:oi,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:An,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(ei,lt,this.tileID.canonical,this.tileTransform),Ke.bucketLayerIDs.push(oi.map(Ko=>Ko.id))))}}let bt,Bt,Ft,sr;Je.trim();const cr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},hr=()=>{if(bt)return this.status="done",Oe(bt);if(this.extraShadowCaster)this.status="done",Oe(null,{buckets:a.bd(qe).filter(ur=>!ur.isEmpty()),featureIndex:Ke,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:lt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Bt&&Ft&&sr){const ur=new ie(Bt),Gr=new a.dU(Ft,sr,this.lut);for(const Jr in qe){const vr=qe[Jr];vr instanceof a.aR?(ne(vr.layers,this.zoom,lt.brightness,we),a.dV(vr,Bt,ur.positions,Ft,Gr.iconPositions,this.showCollisionBoxes,we,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):vr.hasPattern&&(vr instanceof a.aX||vr instanceof a.aY||vr instanceof a.d0)&&(ne(vr.layers,this.zoom,lt.brightness,we),vr.addFeatures(lt,this.tileID.canonical,Gr.patternPositions,we,this.tileTransform,this.brightness))}this.status="done",Oe(null,{buckets:a.bd(qe).filter(Jr=>!Jr.isEmpty()),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ur.image,lineAtlas:Je,imageAtlas:Gr,brightness:lt.brightness})}};if(!this.extraShadowCaster){const ur=a.dT(lt.glyphDependencies,vr=>Object.keys(vr).map(Number));Object.keys(ur).length?De.send("getGlyphs",{uid:this.uid,stacks:ur,scope:this.scope},(vr,Yr)=>{bt||(bt=vr,Bt=Yr,hr())},void 0,!1,cr):Bt={};const Gr=Object.keys(lt.iconDependencies);Gr.length?De.send("getImages",{icons:Gr,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(vr,Yr)=>{bt||(bt=vr,Ft=Yr,hr())},void 0,!1,cr):Ft={};const Jr=Object.keys(lt.patternDependencies);Jr.length?De.send("getImages",{icons:Jr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(vr,Yr)=>{bt||(bt=vr,sr=Yr,hr())},void 0,!1,cr):sr={}}hr()}}function ne(Qe,ae,ue,we){const De=new a.a3(ae,{brightness:ue});for(const Oe of Qe)Oe.recalculate(De,we)}class te extends a.E{constructor(ae,ue,we,De,Oe,$e){super(),this.actor=ae,this.layerIndex=ue,this.availableImages=we,this.loadVectorData=Oe||a.aw,this.loading={},this.loaded={},this.deduped=new a.au(ae.scheduler),this.isSpriteLoaded=De,this.scheduler=ae.scheduler,this.brightness=$e}loadTile(ae,ue){const we=ae.uid,De=ae&&ae.request,Oe=De&&De.collectResourceTiming,$e=this.loading[we]=new Q(ae);$e.abort=this.loadVectorData(ae,(Ke,qe)=>{const Je=!this.loading[we];if(delete this.loading[we],Je||Ke||!qe)return $e.status="done",Je||(this.loaded[we]=$e),ue(Ke);const lt=qe.rawData,it={};qe.expires&&(it.expires=qe.expires),qe.cacheControl&&(it.cacheControl=qe.cacheControl),$e.vectorTile=qe.vectorTile||new a.dW.VectorTile(new a.bb(lt));const bt=()=>{$e.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,(Bt,Ft)=>{if(Bt||!Ft)return ue(Bt);const sr={};if(Oe){const cr=D(De);cr.length>0&&(sr.resourceTiming=JSON.parse(JSON.stringify(cr)))}ue(null,a.l({rawTileData:lt.slice(0)},Ft,it,sr))})};this.isSpriteLoaded?bt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(bt,{type:"parseTile",isSymbolTile:ae.isSymbolTile,zoom:ae.tileZoom}):bt()}),this.loaded=this.loaded||{},this.loaded[we]=$e})}reloadTile(ae,ue){const we=this.loaded,De=ae.uid;if(we&&we[De]){const Oe=we[De];Oe.showCollisionBoxes=ae.showCollisionBoxes,Oe.projection=ae.projection,Oe.brightness=ae.brightness,Oe.tileTransform=a.aK(ae.tileID.canonical,ae.projection),Oe.extraShadowCaster=ae.extraShadowCaster,Oe.lut=ae.lut;const $e=(Ke,qe)=>{const Je=Oe.reloadCallback;Je&&(delete Oe.reloadCallback,Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,Je)),ue(Ke,qe)};Oe.status==="parsing"?Oe.reloadCallback=$e:Oe.status==="done"&&(Oe.vectorTile?Oe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,$e):$e())}else ue(null,void 0)}abortTile(ae,ue){const we=ae.uid,De=this.loading[we];De&&(De.abort&&De.abort(),delete this.loading[we]),ue()}removeTile(ae,ue){const we=this.loaded,De=ae.uid;we&&we[De]&&delete we[De],ue()}}class K{loadTile(ae,ue){const{uid:we,encoding:De,rawImageData:Oe,padding:$e}=ae,Ke=ImageBitmap&&Oe instanceof ImageBitmap?this.getImageData(Oe,$e):Oe;ue(null,new a.dX(we,Ke,De,$e<1))}getImageData(ae,ue){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ae.width,ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ae.width,this.offscreenCanvas.height=ae.height,this.offscreenCanvasContext.drawImage(ae,0,0,ae.width,ae.height);const we=this.offscreenCanvasContext.getImageData(-ue,-ue,ae.width+2*ue,ae.height+2*ue);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),we}}a.ba.setPbf(a.bb);class se{decodeRasterArray({task:ae,buffer:ue},we){a.ba.performDecoding(ue,ae).then(De=>{we(null,De)},De=>{we(De)})}}const ve=a.dW.VectorTileFeature.prototype.toGeoJSON;class le{constructor(ae){this._feature=ae,this.extent=a.ab,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const ue of this._feature.geometry)ae.push([new a.P(ue[0],ue[1])]);return ae}{const ae=[];for(const ue of this._feature.geometry){const we=[];for(const De of ue)we.push(new a.P(De[0],De[1]));ae.push(we)}return ae}}toGeoJSON(ae,ue,we){return ve.call(this,ae,ue,we)}}class fe{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.ab,this.length=ae.length,this._features=ae}feature(ae){return new le(this._features[ae])}}const Te=64/4096,Ee=128;class Ze{constructor(){this.features=new Map}clear(){this.features.clear()}load(ae=[],ue){for(const we of ae){const De=we.id;if(De==null)continue;let Oe=this.features.get(De);Oe&&this.updateCache(Oe,ue),we.geometry?(Oe=We(we),this.updateCache(Oe,ue),this.features.set(De,Oe)):this.features.delete(De),this.updateCache(Oe,ue)}}updateCache(ae,ue){for(const{canonical:we,uid:De}of Object.values(ue)){const{z:Oe,x:$e,y:Ke}=we;st(ae,Math.pow(2,Oe),$e,Ke)&&delete ue[De]}}getTile(ae,ue,we){const De=Math.pow(2,ae),Oe=[];for(const $e of this.features.values())st($e,De,ue,we)&&Oe.push(Pt($e,De,ue,we));return{features:Oe}}getFeatures(){return[...this.features.values()]}}function st({minX:Qe,minY:ae,maxX:ue,maxY:we},De,Oe,$e){return Qe<(Oe+1+Te)/De&&ae<($e+1+Te)/De&&ue>(Oe-Te)/De&&we>($e-Te)/De}function We(Qe){const{id:ae,geometry:ue,properties:we}=Qe;if(!ue)return;if(ue.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:De,coordinates:Oe}=ue,$e={id:ae,type:1,geometry:[],tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Ke=$e.geometry;if(De==="Point")Xe(Oe,Ke,$e);else if(De==="MultiPoint")for(const qe of Oe)Xe(qe,Ke,$e);else if(De==="LineString")$e.type=2,St(Oe,Ke,$e);else if(De==="MultiLineString")$e.type=2,Mt(Oe,Ke,$e);else if(De==="Polygon")$e.type=3,Mt(Oe,Ke,$e,!0);else{if(De!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");$e.type=3;for(const qe of Oe)Mt(qe,Ke,$e,!0)}return $e}function Xe([Qe,ae],ue,we){const De=a.am(Qe);let Oe=a.at(ae);Oe=Oe<0?0:Oe>1?1:Oe,ue.push(De,Oe),we.minX=Math.min(we.minX,De),we.minY=Math.min(we.minY,Oe),we.maxX=Math.max(we.maxX,De),we.maxY=Math.max(we.maxY,Oe)}function St(Qe,ae,ue,we=!1,De=!1){const Oe=[];for(const $e of Qe)Xe($e,Oe,ue);ae.push(Oe),we&&function($e,Ke){let qe=0;for(let Je=0,lt=$e.length,it=lt-2;Je<lt;it=Je,Je+=2)qe+=($e[Je]-$e[it])*($e[Je+1]+$e[it+1]);if(qe>0===Ke)for(let Je=0,lt=$e.length;Je<lt/2;Je+=2){const it=$e[Je],bt=$e[Je+1];$e[Je]=$e[lt-2-Je],$e[Je+1]=$e[lt-1-Je],$e[lt-2-Je]=it,$e[lt-1-Je]=bt}}(Oe,De)}function Mt(Qe,ae,ue,we=!1){for(let De=0;De<Qe.length;De++)St(Qe[De],ae,ue,we,De===0)}function Pt(Qe,ae,ue,we){const{id:De,type:Oe,geometry:$e,tags:Ke}=Qe,qe=[];if(Oe===1)(function(Je,lt,it,bt,Bt){for(let Ft=0;Ft<Je.length;Ft+=2){const sr=Math.round(a.ab*(Je[Ft+0]*lt-it)),cr=Math.round(a.ab*(Je[Ft+1]*lt-bt));Bt.push([sr,cr])}})($e,ae,ue,we,qe);else for(const Je of $e)ht(Je,ae,ue,we,qe);return{id:De,type:Oe,geometry:qe,tags:Ke}}function ht(Qe,ae,ue,we,De){const Oe=-Ee,$e=a.ab+Ee;let Ke;for(let qe=0;qe<Qe.length-2;qe+=2){let Je=Math.round(a.ab*(Qe[qe+0]*ae-ue)),lt=Math.round(a.ab*(Qe[qe+1]*ae-we)),it=Math.round(a.ab*(Qe[qe+2]*ae-ue)),bt=Math.round(a.ab*(Qe[qe+3]*ae-we));const Bt=it-Je,Ft=bt-lt;Je<Oe&&it<Oe||(Je<Oe?(lt+=Math.round(Ft*((Oe-Je)/Bt)),Je=Oe):it<Oe&&(bt=lt+Math.round(Ft*((Oe-Je)/Bt)),it=Oe),lt<Oe&&bt<Oe||(lt<Oe?(Je+=Math.round(Bt*((Oe-lt)/Ft)),lt=Oe):bt<Oe&&(it=Je+Math.round(Bt*((Oe-lt)/Ft)),bt=Oe),Je>=$e&&it>=$e||(Je>=$e?(lt+=Math.round(Ft*(($e-Je)/Bt)),Je=$e):it>=$e&&(bt=lt+Math.round(Ft*(($e-Je)/Bt)),it=$e),lt>=$e&&bt>=$e||(lt>=$e?(Je+=Math.round(Bt*(($e-lt)/Ft)),lt=$e):bt>=$e&&(it=Je+Math.round(Bt*(($e-lt)/Ft)),bt=$e),Ke&&Je===Ke[Ke.length-1][0]&&lt===Ke[Ke.length-1][1]||(Ke=[[Je,lt]],De.push(Ke)),Ke.push([it,bt])))))}}var kt,mt,Ct,_t={exports:{}},Qt=function(){if(Ct)return _t.exports;Ct=1;var Qe=a.d_(),ae=function(){if(mt)return kt;mt=1;var lt=a.dY(),it=a.dZ().VectorTileFeature;function bt(Ft,sr){this.options=sr||{},this.features=Ft,this.length=Ft.length}function Bt(Ft,sr){this.id=typeof Ft.id=="number"?Ft.id:void 0,this.type=Ft.type,this.rawGeometry=Ft.type===1?[Ft.geometry]:Ft.geometry,this.properties=Ft.tags,this.extent=sr||4096}return kt=bt,bt.prototype.feature=function(Ft){return new Bt(this.features[Ft],this.options.extent)},Bt.prototype.loadGeometry=function(){var Ft=this.rawGeometry;this.geometry=[];for(var sr=0;sr<Ft.length;sr++){for(var cr=Ft[sr],hr=[],ur=0;ur<cr.length;ur++)hr.push(new lt(cr[ur][0],cr[ur][1]));this.geometry.push(hr)}return this.geometry},Bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ft=this.geometry,sr=1/0,cr=-1/0,hr=1/0,ur=-1/0,Gr=0;Gr<Ft.length;Gr++)for(var Jr=Ft[Gr],vr=0;vr<Jr.length;vr++){var Yr=Jr[vr];sr=Math.min(sr,Yr.x),cr=Math.max(cr,Yr.x),hr=Math.min(hr,Yr.y),ur=Math.max(ur,Yr.y)}return[sr,hr,cr,ur]},Bt.prototype.toGeoJSON=it.prototype.toGeoJSON,kt}();function ue(lt){var it=new Qe;return function(bt,Bt){for(var Ft in bt.layers)Bt.writeMessage(3,we,bt.layers[Ft])}(lt,it),it.finish()}function we(lt,it){var bt;it.writeVarintField(15,lt.version||1),it.writeStringField(1,lt.name||""),it.writeVarintField(5,lt.extent||4096);var Bt={keys:[],values:[],keycache:{},valuecache:{}};for(bt=0;bt<lt.length;bt++)Bt.feature=lt.feature(bt),it.writeMessage(2,De,Bt);var Ft=Bt.keys;for(bt=0;bt<Ft.length;bt++)it.writeStringField(3,Ft[bt]);var sr=Bt.values;for(bt=0;bt<sr.length;bt++)it.writeMessage(4,Je,sr[bt])}function De(lt,it){var bt=lt.feature;bt.id!==void 0&&it.writeVarintField(1,bt.id),it.writeMessage(2,Oe,lt),it.writeVarintField(3,bt.type),it.writeMessage(4,qe,bt)}function Oe(lt,it){var bt=lt.feature,Bt=lt.keys,Ft=lt.values,sr=lt.keycache,cr=lt.valuecache;for(var hr in bt.properties){var ur=bt.properties[hr],Gr=sr[hr];if(ur!==null){Gr===void 0&&(Bt.push(hr),sr[hr]=Gr=Bt.length-1),it.writeVarint(Gr);var Jr=typeof ur;Jr!=="string"&&Jr!=="boolean"&&Jr!=="number"&&(ur=JSON.stringify(ur));var vr=Jr+":"+ur,Yr=cr[vr];Yr===void 0&&(Ft.push(ur),cr[vr]=Yr=Ft.length-1),it.writeVarint(Yr)}}}function $e(lt,it){return(it<<3)+(7&lt)}function Ke(lt){return lt<<1^lt>>31}function qe(lt,it){for(var bt=lt.loadGeometry(),Bt=lt.type,Ft=0,sr=0,cr=bt.length,hr=0;hr<cr;hr++){var ur=bt[hr],Gr=1;Bt===1&&(Gr=ur.length),it.writeVarint($e(1,Gr));for(var Jr=Bt===3?ur.length-1:ur.length,vr=0;vr<Jr;vr++){vr===1&&Bt!==1&&it.writeVarint($e(2,Jr-1));var Yr=ur[vr].x-Ft,An=ur[vr].y-sr;it.writeVarint(Ke(Yr)),it.writeVarint(Ke(An)),Ft+=Yr,sr+=An}Bt===3&&it.writeVarint($e(7,1))}}function Je(lt,it){var bt=typeof lt;bt==="string"?it.writeStringField(1,lt):bt==="boolean"?it.writeBooleanField(7,lt):bt==="number"&&(lt%1!=0?it.writeDoubleField(3,lt):lt<0?it.writeSVarintField(6,lt):it.writeVarintField(5,lt))}return _t.exports=ue,_t.exports.fromVectorTileJs=ue,_t.exports.fromGeojsonVt=function(lt,it){it=it||{};var bt={};for(var Bt in lt)bt[Bt]=new ae(lt[Bt].features,it),bt[Bt].name=Bt,bt[Bt].version=it.version,bt[Bt].extent=it.extent;return ue({layers:bt})},_t.exports.GeoJSONWrapper=ae,_t.exports}(),qt=a.d$(Qt);const gr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Qe=>Qe},Gt=Math.fround||(vn=new Float32Array(1),Qe=>(vn[0]=+Qe,vn[0]));var vn;const cn=3,Ln=5,ii=6;class er{constructor(ae){this.options=Object.assign(Object.create(gr),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:ue,minZoom:we,maxZoom:De}=this.options;ue&&console.time("total time");const Oe=`prepare ${ae.length} points`;ue&&console.time(Oe),this.points=ae;const $e=[];for(let qe=0;qe<ae.length;qe++){const Je=ae[qe];if(!Je.geometry)continue;const[lt,it]=Je.geometry.coordinates,bt=Gt(Nt(lt)),Bt=Gt(gn(it));$e.push(bt,Bt,1/0,qe,-1,1),this.options.reduce&&$e.push(0)}let Ke=this.trees[De+1]=this._createTree($e);ue&&console.timeEnd(Oe);for(let qe=De;qe>=we;qe--){const Je=+Date.now();Ke=this.trees[qe]=this._createTree(this._cluster(Ke,qe)),ue&&console.log("z%d: %d clusters in %dms",qe,Ke.numItems,+Date.now()-Je)}return ue&&console.timeEnd("total time"),this}getClusters(ae,ue){let we=((ae[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,ae[1]));let Oe=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)we=-180,Oe=180;else if(we>Oe){const it=this.getClusters([we,De,180,$e],ue),bt=this.getClusters([-180,De,Oe,$e],ue);return it.concat(bt)}const Ke=this.trees[this._limitZoom(ue)],qe=Ke.range(Nt(we),gn($e),Nt(Oe),gn(De)),Je=Ke.data,lt=[];for(const it of qe){const bt=this.stride*it;lt.push(Je[bt+Ln]>1?Cr(Je,bt,this.clusterProps):this.points[Je[bt+cn]])}return lt}getChildren(ae){const ue=this._getOriginId(ae),we=this._getOriginZoom(ae),De="No cluster with the specified id.",Oe=this.trees[we];if(!Oe)throw new Error(De);const $e=Oe.data;if(ue*this.stride>=$e.length)throw new Error(De);const Ke=this.options.radius/(this.options.extent*Math.pow(2,we-1)),qe=Oe.within($e[ue*this.stride],$e[ue*this.stride+1],Ke),Je=[];for(const lt of qe){const it=lt*this.stride;$e[it+4]===ae&&Je.push($e[it+Ln]>1?Cr($e,it,this.clusterProps):this.points[$e[it+cn]])}if(Je.length===0)throw new Error(De);return Je}getLeaves(ae,ue,we){const De=[];return this._appendLeaves(De,ae,ue=ue||10,we=we||0,0),De}getTile(ae,ue,we){const De=this.trees[this._limitZoom(ae)],Oe=Math.pow(2,ae),{extent:$e,radius:Ke}=this.options,qe=Ke/$e,Je=(we-qe)/Oe,lt=(we+1+qe)/Oe,it={features:[]};return this._addTileFeatures(De.range((ue-qe)/Oe,Je,(ue+1+qe)/Oe,lt),De.data,ue,we,Oe,it),ue===0&&this._addTileFeatures(De.range(1-qe/Oe,Je,1,lt),De.data,Oe,we,Oe,it),ue===Oe-1&&this._addTileFeatures(De.range(0,Je,qe/Oe,lt),De.data,-1,we,Oe,it),it.features.length?it:null}getClusterExpansionZoom(ae){let ue=this._getOriginZoom(ae)-1;for(;ue<=this.options.maxZoom;){const we=this.getChildren(ae);if(ue++,we.length!==1)break;ae=we[0].properties.cluster_id}return ue}_appendLeaves(ae,ue,we,De,Oe){const $e=this.getChildren(ue);for(const Ke of $e){const qe=Ke.properties;if(qe&&qe.cluster?Oe+qe.point_count<=De?Oe+=qe.point_count:Oe=this._appendLeaves(ae,qe.cluster_id,we,De,Oe):Oe<De?Oe++:ae.push(Ke),ae.length===we)break}return Oe}_createTree(ae){const ue=new a.by(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<ae.length;we+=this.stride)ue.add(ae[we],ae[we+1]);return ue.finish(),ue.data=ae,ue}_addTileFeatures(ae,ue,we,De,Oe,$e){for(const Ke of ae){const qe=Ke*this.stride,Je=ue[qe+Ln]>1;let lt,it,bt;if(Je)lt=Pe(ue,qe,this.clusterProps),it=ue[qe],bt=ue[qe+1];else{const sr=this.points[ue[qe+cn]];lt=sr.properties;const[cr,hr]=sr.geometry.coordinates;it=Nt(cr),bt=gn(hr)}const Bt={type:1,geometry:[[Math.round(this.options.extent*(it*Oe-we)),Math.round(this.options.extent*(bt*Oe-De))]],tags:lt};let Ft;Ft=Je||this.options.generateId?ue[qe+cn]:this.points[ue[qe+cn]].id,Ft!==void 0&&(Bt.id=Ft),$e.features.push(Bt)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,ue){const{radius:we,extent:De,reduce:Oe,minPoints:$e}=this.options,Ke=we/(De*Math.pow(2,ue)),qe=ae.data,Je=[],lt=this.stride;for(let it=0;it<qe.length;it+=lt){if(qe[it+2]<=ue)continue;qe[it+2]=ue;const bt=qe[it],Bt=qe[it+1],Ft=ae.within(qe[it],qe[it+1],Ke),sr=qe[it+Ln];let cr=sr;for(const hr of Ft){const ur=hr*lt;qe[ur+2]>ue&&(cr+=qe[ur+Ln])}if(cr>sr&&cr>=$e){let hr,ur=bt*sr,Gr=Bt*sr,Jr=-1;const vr=(it/lt<<5)+(ue+1)+this.points.length;for(const Yr of Ft){const An=Yr*lt;if(qe[An+2]<=ue)continue;qe[An+2]=ue;const ei=qe[An+Ln];ur+=qe[An]*ei,Gr+=qe[An+1]*ei,qe[An+4]=vr,Oe&&(hr||(hr=this._map(qe,it,!0),Jr=this.clusterProps.length,this.clusterProps.push(hr)),Oe(hr,this._map(qe,An)))}qe[it+4]=vr,Je.push(ur/cr,Gr/cr,1/0,vr,-1,cr),Oe&&Je.push(Jr)}else{for(let hr=0;hr<lt;hr++)Je.push(qe[it+hr]);if(cr>1)for(const hr of Ft){const ur=hr*lt;if(!(qe[ur+2]<=ue)){qe[ur+2]=ue;for(let Gr=0;Gr<lt;Gr++)Je.push(qe[ur+Gr])}}}}return Je}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,ue,we){if(ae[ue+Ln]>1){const $e=this.clusterProps[ae[ue+ii]];return we?Object.assign({},$e):$e}const De=this.points[ae[ue+cn]].properties,Oe=this.options.map(De);return we&&Oe===De?Object.assign({},Oe):Oe}}function Cr(Qe,ae,ue){return{type:"Feature",id:Qe[ae+cn],properties:Pe(Qe,ae,ue),geometry:{type:"Point",coordinates:[(we=Qe[ae],360*(we-.5)),Vr(Qe[ae+1])]}};var we}function Pe(Qe,ae,ue){const we=Qe[ae+Ln],De=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,Oe=Qe[ae+ii],$e=Oe===-1?{}:Object.assign({},ue[Oe]);return Object.assign($e,{cluster:!0,cluster_id:Qe[ae+cn],point_count:we,point_count_abbreviated:De})}function Nt(Qe){return Qe/360+.5}function gn(Qe){const ae=Math.sin(Qe*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function Vr(Qe){const ae=(180-360*Qe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function vt(Qe,ae,ue,we){let De=we;const Oe=ae+(ue-ae>>1);let $e,Ke=ue-ae;const qe=Qe[ae],Je=Qe[ae+1],lt=Qe[ue],it=Qe[ue+1];for(let bt=ae+3;bt<ue;bt+=3){const Bt=Tn(Qe[bt],Qe[bt+1],qe,Je,lt,it);if(Bt>De)$e=bt,De=Bt;else if(Bt===De){const Ft=Math.abs(bt-Oe);Ft<Ke&&($e=bt,Ke=Ft)}}De>we&&($e-ae>3&&vt(Qe,ae,$e,we),Qe[$e+2]=De,ue-$e>3&&vt(Qe,$e,ue,we))}function Tn(Qe,ae,ue,we,De,Oe){let $e=De-ue,Ke=Oe-we;if($e!==0||Ke!==0){const qe=((Qe-ue)*$e+(ae-we)*Ke)/($e*$e+Ke*Ke);qe>1?(ue=De,we=Oe):qe>0&&(ue+=$e*qe,we+=Ke*qe)}return $e=Qe-ue,Ke=ae-we,$e*$e+Ke*Ke}function un(Qe,ae,ue,we){const De={id:Qe??null,type:ae,geometry:ue,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")wi(De,ue);else if(ae==="Polygon")wi(De,ue[0]);else if(ae==="MultiLineString")for(const Oe of ue)wi(De,Oe);else if(ae==="MultiPolygon")for(const Oe of ue)wi(De,Oe[0]);return De}function wi(Qe,ae){for(let ue=0;ue<ae.length;ue+=3)Qe.minX=Math.min(Qe.minX,ae[ue]),Qe.minY=Math.min(Qe.minY,ae[ue+1]),Qe.maxX=Math.max(Qe.maxX,ae[ue]),Qe.maxY=Math.max(Qe.maxY,ae[ue+1])}function br(Qe,ae,ue,we){if(!ae.geometry)return;const De=ae.geometry.coordinates;if(De&&De.length===0)return;const Oe=ae.geometry.type,$e=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let Ke=[],qe=ae.id;if(ue.promoteId?qe=ae.properties[ue.promoteId]:ue.generateId&&(qe=we||0),Oe==="Point")jn(De,Ke);else if(Oe==="MultiPoint")for(const Je of De)jn(Je,Ke);else if(Oe==="LineString")_i(De,Ke,$e,!1);else if(Oe==="MultiLineString"){if(ue.lineMetrics){for(const Je of De)Ke=[],_i(Je,Ke,$e,!1),Qe.push(un(qe,"LineString",Ke,ae.properties));return}Wi(De,Ke,$e,!1)}else if(Oe==="Polygon")Wi(De,Ke,$e,!0);else{if(Oe!=="MultiPolygon"){if(Oe==="GeometryCollection"){for(const Je of ae.geometry.geometries)br(Qe,{id:qe,geometry:Je,properties:ae.properties},ue,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of De){const lt=[];Wi(Je,lt,$e,!0),Ke.push(lt)}}Qe.push(un(qe,Oe,Ke,ae.properties))}function jn(Qe,ae){ae.push(zo(Qe[0]),Ha(Qe[1]),0)}function _i(Qe,ae,ue,we){let De,Oe,$e=0;for(let qe=0;qe<Qe.length;qe++){const Je=zo(Qe[qe][0]),lt=Ha(Qe[qe][1]);ae.push(Je,lt,0),qe>0&&($e+=we?(De*lt-Je*Oe)/2:Math.sqrt(Math.pow(Je-De,2)+Math.pow(lt-Oe,2))),De=Je,Oe=lt}const Ke=ae.length-3;ae[2]=1,vt(ae,0,Ke,ue),ae[Ke+2]=1,ae.size=Math.abs($e),ae.start=0,ae.end=ae.size}function Wi(Qe,ae,ue,we){for(let De=0;De<Qe.length;De++){const Oe=[];_i(Qe[De],Oe,ue,we),ae.push(Oe)}}function zo(Qe){return Qe/360+.5}function Ha(Qe){const ae=Math.sin(Qe*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function mr(Qe,ae,ue,we,De,Oe,$e,Ke){if(we/=ae,Oe>=(ue/=ae)&&$e<we)return Qe;if($e<ue||Oe>=we)return null;const qe=[];for(const Je of Qe){const lt=Je.geometry;let it=Je.type;const bt=De===0?Je.minX:Je.minY,Bt=De===0?Je.maxX:Je.maxY;if(bt>=ue&&Bt<we){qe.push(Je);continue}if(Bt<ue||bt>=we)continue;let Ft=[];if(it==="Point"||it==="MultiPoint")Gl(lt,Ft,ue,we,De);else if(it==="LineString")Za(lt,Ft,ue,we,De,!1,Ke.lineMetrics);else if(it==="MultiLineString")zi(lt,Ft,ue,we,De,!1);else if(it==="Polygon")zi(lt,Ft,ue,we,De,!0);else if(it==="MultiPolygon")for(const sr of lt){const cr=[];zi(sr,cr,ue,we,De,!0),cr.length&&Ft.push(cr)}if(Ft.length){if(Ke.lineMetrics&&it==="LineString"){for(const sr of Ft)qe.push(un(Je.id,it,sr,Je.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Ft.length===1?(it="LineString",Ft=Ft[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Ft.length===3?"Point":"MultiPoint"),qe.push(un(Je.id,it,Ft,Je.tags))}}return qe.length?qe:null}function Gl(Qe,ae,ue,we,De){for(let Oe=0;Oe<Qe.length;Oe+=3){const $e=Qe[Oe+De];$e>=ue&&$e<=we&&_o(ae,Qe[Oe],Qe[Oe+1],Qe[Oe+2])}}function Za(Qe,ae,ue,we,De,Oe,$e){let Ke=Ks(Qe);const qe=De===0?bc:wc;let Je,lt,it=Qe.start;for(let cr=0;cr<Qe.length-3;cr+=3){const hr=Qe[cr],ur=Qe[cr+1],Gr=Qe[cr+2],Jr=Qe[cr+3],vr=Qe[cr+4],Yr=De===0?hr:ur,An=De===0?Jr:vr;let ei=!1;$e&&(Je=Math.sqrt(Math.pow(hr-Jr,2)+Math.pow(ur-vr,2))),Yr<ue?An>ue&&(lt=qe(Ke,hr,ur,Jr,vr,ue),$e&&(Ke.start=it+Je*lt)):Yr>we?An<we&&(lt=qe(Ke,hr,ur,Jr,vr,we),$e&&(Ke.start=it+Je*lt)):_o(Ke,hr,ur,Gr),An<ue&&Yr>=ue&&(lt=qe(Ke,hr,ur,Jr,vr,ue),ei=!0),An>we&&Yr<=we&&(lt=qe(Ke,hr,ur,Jr,vr,we),ei=!0),!Oe&&ei&&($e&&(Ke.end=it+Je*lt),ae.push(Ke),Ke=Ks(Qe)),$e&&(it+=Je)}let bt=Qe.length-3;const Bt=Qe[bt],Ft=Qe[bt+1],sr=De===0?Bt:Ft;sr>=ue&&sr<=we&&_o(Ke,Bt,Ft,Qe[bt+2]),bt=Ke.length-3,Oe&&bt>=3&&(Ke[bt]!==Ke[0]||Ke[bt+1]!==Ke[1])&&_o(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&ae.push(Ke)}function Ks(Qe){const ae=[];return ae.size=Qe.size,ae.start=Qe.start,ae.end=Qe.end,ae}function zi(Qe,ae,ue,we,De,Oe){for(const $e of Qe)Za($e,ae,ue,we,De,Oe,!1)}function _o(Qe,ae,ue,we){Qe.push(ae,ue,we)}function bc(Qe,ae,ue,we,De,Oe){const $e=(Oe-ae)/(we-ae);return _o(Qe,Oe,ue+(De-ue)*$e,1),$e}function wc(Qe,ae,ue,we,De,Oe){const $e=(Oe-ue)/(De-ue);return _o(Qe,ae+(we-ae)*$e,Oe,1),$e}function ql(Qe,ae){const ue=[];for(let we=0;we<Qe.length;we++){const De=Qe[we],Oe=De.type;let $e;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")$e=Xa(De.geometry,ae);else if(Oe==="MultiLineString"||Oe==="Polygon"){$e=[];for(const Ke of De.geometry)$e.push(Xa(Ke,ae))}else if(Oe==="MultiPolygon"){$e=[];for(const Ke of De.geometry){const qe=[];for(const Je of Ke)qe.push(Xa(Je,ae));$e.push(qe)}}ue.push(un(De.id,Oe,$e,De.tags))}return ue}function Xa(Qe,ae){const ue=[];ue.size=Qe.size,Qe.start!==void 0&&(ue.start=Qe.start,ue.end=Qe.end);for(let we=0;we<Qe.length;we+=3)ue.push(Qe[we]+ae,Qe[we+1],Qe[we+2]);return ue}function Js(Qe,ae){if(Qe.transformed)return Qe;const ue=1<<Qe.z,we=Qe.x,De=Qe.y;for(const Oe of Qe.features){const $e=Oe.geometry,Ke=Oe.type;if(Oe.geometry=[],Ke===1)for(let qe=0;qe<$e.length;qe+=2)Oe.geometry.push(Wl($e[qe],$e[qe+1],ae,ue,we,De));else for(let qe=0;qe<$e.length;qe++){const Je=[];for(let lt=0;lt<$e[qe].length;lt+=2)Je.push(Wl($e[qe][lt],$e[qe][lt+1],ae,ue,we,De));Oe.geometry.push(Je)}}return Qe.transformed=!0,Qe}function Wl(Qe,ae,ue,we,De,Oe){return[Math.round(ue*(Qe*we-De)),Math.round(ue*(ae*we-Oe))]}function Bo(Qe,ae,ue,we,De){const Oe=ae===De.maxZoom?0:De.tolerance/((1<<ae)*De.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:Qe.length,source:null,x:ue,y:we,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ke of Qe)Ac($e,Ke,Oe,De);return $e}function Ac(Qe,ae,ue,we){const De=ae.geometry,Oe=ae.type,$e=[];if(Qe.minX=Math.min(Qe.minX,ae.minX),Qe.minY=Math.min(Qe.minY,ae.minY),Qe.maxX=Math.max(Qe.maxX,ae.maxX),Qe.maxY=Math.max(Qe.maxY,ae.maxY),Oe==="Point"||Oe==="MultiPoint")for(let Ke=0;Ke<De.length;Ke+=3)$e.push(De[Ke],De[Ke+1]),Qe.numPoints++,Qe.numSimplified++;else if(Oe==="LineString")Br($e,De,Qe,ue,!1,!1);else if(Oe==="MultiLineString"||Oe==="Polygon")for(let Ke=0;Ke<De.length;Ke++)Br($e,De[Ke],Qe,ue,Oe==="Polygon",Ke===0);else if(Oe==="MultiPolygon")for(let Ke=0;Ke<De.length;Ke++){const qe=De[Ke];for(let Je=0;Je<qe.length;Je++)Br($e,qe[Je],Qe,ue,!0,Je===0)}if($e.length){let Ke=ae.tags||null;if(Oe==="LineString"&&we.lineMetrics){Ke={};for(const Je in ae.tags)Ke[Je]=ae.tags[Je];Ke.mapbox_clip_start=De.start/De.size,Ke.mapbox_clip_end=De.end/De.size}const qe={geometry:$e,type:Oe==="Polygon"||Oe==="MultiPolygon"?3:Oe==="LineString"||Oe==="MultiLineString"?2:1,tags:Ke};ae.id!==null&&(qe.id=ae.id),Qe.features.push(qe)}}function Br(Qe,ae,ue,we,De,Oe){const $e=we*we;if(we>0&&ae.size<(De?$e:we))return void(ue.numPoints+=ae.length/3);const Ke=[];for(let qe=0;qe<ae.length;qe+=3)(we===0||ae[qe+2]>$e)&&(ue.numSimplified++,Ke.push(ae[qe],ae[qe+1])),ue.numPoints++;De&&function(qe,Je){let lt=0;for(let it=0,bt=qe.length,Bt=bt-2;it<bt;Bt=it,it+=2)lt+=(qe[it]-qe[Bt])*(qe[it+1]+qe[Bt+1]);if(lt>0===Je)for(let it=0,bt=qe.length;it<bt/2;it+=2){const Bt=qe[it],Ft=qe[it+1];qe[it]=qe[bt-2-it],qe[it+1]=qe[bt-1-it],qe[bt-2-it]=Bt,qe[bt-1-it]=Ft}}(Ke,Oe),Qe.push(Ke)}const _a={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ku{constructor(ae,ue){const we=(ue=this.options=function(Oe,$e){for(const Ke in $e)Oe[Ke]=$e[Ke];return Oe}(Object.create(_a),ue)).debug;if(we&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=function(Oe,$e){const Ke=[];if(Oe.type==="FeatureCollection")for(let qe=0;qe<Oe.features.length;qe++)br(Ke,Oe.features[qe],$e,qe);else br(Ke,Oe.type==="Feature"?Oe:{geometry:Oe},$e);return Ke}(ae,ue);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=function(Oe,$e){const Ke=$e.buffer/$e.extent;let qe=Oe;const Je=mr(Oe,1,-1-Ke,Ke,0,-1,2,$e),lt=mr(Oe,1,1-Ke,2+Ke,0,-1,2,$e);return(Je||lt)&&(qe=mr(Oe,1,-Ke,1+Ke,0,-1,2,$e)||[],Je&&(qe=ql(Je,1).concat(qe)),lt&&(qe=qe.concat(ql(lt,-1)))),qe}(De,ue),De.length&&this.splitTile(De,0,0,0),we&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,ue,we,De,Oe,$e,Ke){const qe=[ae,ue,we,De],Je=this.options,lt=Je.debug;for(;qe.length;){De=qe.pop(),we=qe.pop(),ue=qe.pop(),ae=qe.pop();const it=1<<ue,bt=vo(ue,we,De);let Bt=this.tiles[bt];if(!Bt&&(lt>1&&console.time("creation"),Bt=this.tiles[bt]=Bo(ae,ue,we,De,Je),this.tileCoords.push({z:ue,x:we,y:De}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,we,De,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));const ei=`z${ue}`;this.stats[ei]=(this.stats[ei]||0)+1,this.total++}if(Bt.source=ae,Oe==null){if(ue===Je.indexMaxZoom||Bt.numPoints<=Je.indexMaxPoints)continue}else{if(ue===Je.maxZoom||ue===Oe)continue;if(Oe!=null){const ei=Oe-ue;if(we!==$e>>ei||De!==Ke>>ei)continue}}if(Bt.source=null,ae.length===0)continue;lt>1&&console.time("clipping");const Ft=.5*Je.buffer/Je.extent,sr=.5-Ft,cr=.5+Ft,hr=1+Ft;let ur=null,Gr=null,Jr=null,vr=null,Yr=mr(ae,it,we-Ft,we+cr,0,Bt.minX,Bt.maxX,Je),An=mr(ae,it,we+sr,we+hr,0,Bt.minX,Bt.maxX,Je);ae=null,Yr&&(ur=mr(Yr,it,De-Ft,De+cr,1,Bt.minY,Bt.maxY,Je),Gr=mr(Yr,it,De+sr,De+hr,1,Bt.minY,Bt.maxY,Je),Yr=null),An&&(Jr=mr(An,it,De-Ft,De+cr,1,Bt.minY,Bt.maxY,Je),vr=mr(An,it,De+sr,De+hr,1,Bt.minY,Bt.maxY,Je),An=null),lt>1&&console.timeEnd("clipping"),qe.push(ur||[],ue+1,2*we,2*De),qe.push(Gr||[],ue+1,2*we,2*De+1),qe.push(Jr||[],ue+1,2*we+1,2*De),qe.push(vr||[],ue+1,2*we+1,2*De+1)}}getTile(ae,ue,we){ae=+ae,ue=+ue,we=+we;const De=this.options,{extent:Oe,debug:$e}=De;if(ae<0||ae>24)return null;const Ke=1<<ae,qe=vo(ae,ue=ue+Ke&Ke-1,we);if(this.tiles[qe])return Js(this.tiles[qe],Oe);$e>1&&console.log("drilling down to z%d-%d-%d",ae,ue,we);let Je,lt=ae,it=ue,bt=we;for(;!Je&&lt>0;)lt--,it>>=1,bt>>=1,Je=this.tiles[vo(lt,it,bt)];return Je&&Je.source?($e>1&&(console.log("found parent tile z%d-%d-%d",lt,it,bt),console.time("drilling down")),this.splitTile(Je.source,lt,it,bt,ae,ue,we),$e>1&&console.timeEnd("drilling down"),this.tiles[qe]?Js(this.tiles[qe],Oe):null):null}}function vo(Qe,ae,ue){return 32*((1<<Qe)*ue+ae)+Qe}function Qs(Qe,ae){const ue=Qe.tileID.canonical;if(!this._geoJSONIndex)return void ae(null,null);const we=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!we)return void ae(null,null);const De=new fe(we.features);let Oe=qt(De);Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),ae(null,{vectorTile:De,rawData:Oe.buffer})}class Tc extends te{constructor(ae,ue,we,De,Oe,$e){super(ae,ue,we,De,Qs,$e),Oe&&(this.loadGeoJSON=Oe),this._dynamicIndex=new Ze}loadData(ae,ue){const we=ae&&ae.request,De=we&&we.collectResourceTiming;this.loadGeoJSON(ae,(Oe,$e)=>{if(Oe||!$e)return ue(Oe);if(typeof $e!="object")return ue(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`));{try{if(ae.filter){const qe=a.M(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Je=>`${Je.key}: ${Je.message}`).join(", "));$e.features=$e.features.filter(Je=>qe.value.evaluate({zoom:0},Je))}ae.dynamic?($e.type==="Feature"&&($e={type:"FeatureCollection",features:[$e]}),ae.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load($e.features,this.loaded),ae.cluster&&($e.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ae.cluster?new er(function({superclusterOptions:qe,clusterProperties:Je}){if(!Je||!qe)return qe;const lt={},it={},bt={accumulated:null,zoom:0},Bt={properties:null},Ft=Object.keys(Je);for(const sr of Ft){const[cr,hr]=Je[sr],ur=a.M(hr),Gr=a.M(typeof cr=="string"?[cr,["accumulated"],["get",sr]]:cr);lt[sr]=ur.value,it[sr]=Gr.value}return qe.map=sr=>{Bt.properties=sr;const cr={};for(const hr of Ft)cr[hr]=lt[hr].evaluate(bt,Bt);return cr},qe.reduce=(sr,cr)=>{Bt.properties=cr;for(const hr of Ft)bt.accumulated=sr[hr],sr[hr]=it[hr].evaluate(bt,Bt)},qe}(ae)).load($e.features):ae.dynamic?this._dynamicIndex:function(qe,Je){return new Ku(qe,Je)}($e,ae.geojsonVtOptions)}catch(qe){return ue(qe)}const Ke={};if(De){const qe=D(we);qe&&(Ke.resourceTiming={},Ke.resourceTiming[ae.source]=JSON.parse(JSON.stringify(qe)))}ue(null,Ke)}})}reloadTile(ae,ue){const we=this.loaded;return we&&we[ae.uid]?ae.partial?ue(null,void 0):super.reloadTile(ae,ue):this.loadTile(ae,ue)}loadGeoJSON(ae,ue){if(ae.request)a.n(ae.request,ue);else{if(typeof ae.data!="string")return ue(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`));try{return ue(null,JSON.parse(ae.data))}catch{return ue(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ae,ue){try{ue(null,this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId))}catch(we){ue(we)}}getClusterChildren(ae,ue){try{ue(null,this._geoJSONIndex.getChildren(ae.clusterId))}catch(we){ue(we)}}getClusterLeaves(ae,ue){try{ue(null,this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset))}catch(we){ue(we)}}}class Hl{constructor(ae,ue){this.tileID=new a.aA(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.tileZoom=ae.tileZoom,this.uid=ae.uid,this.zoom=ae.zoom,this.canonical=ae.tileID.canonical,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ae.projection,this.brightness=ue}parse(ae,ue,we,De){this.status="parsing";const Oe=new a.aA(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),$e={},Ke=ue.familiesBySource[we.source],qe=new a.dR(Oe,we.promoteId);return qe.bucketLayerIDs=[],qe.is3DTile=!0,a.e0(ae).then(Je=>{if(!Je)return De(new Error("Could not parse tile"));const lt=a.e1(Je,1/a.c8(we.tileID.canonical)),it=Je.json.extensionsUsed&&Je.json.extensionsUsed.includes("MAPBOX_mesh_features")||Je.json.asset.extras&&Je.json.asset.extras.MAPBOX_mesh_features,bt=Je.json.extensionsUsed&&Je.json.extensionsUsed.includes("EXT_meshopt_compression"),Bt=new a.a3(this.zoom,{brightness:this.brightness});for(const Ft in Ke)for(const sr of Ke[Ft]){const cr=sr[0];qe.bucketLayerIDs.push(sr.map(ur=>ur.id)),cr.recalculate(Bt,[]);const hr=new a.e2(lt,Oe,it,bt,this.brightness,qe);it||(hr.needsUpload=!0),$e[cr.fqid]=hr,hr.evaluate(cr)}this.status="done",De(null,{buckets:$e,featureIndex:qe})}).catch(Je=>De(new Error(Je.message)))}}class Sc{constructor(ae,ue,we,De,Oe,$e){this.actor=ae,this.layerIndex=ue,this.brightness=$e,this.loading={},this.loaded={}}loadTile(ae,ue){const we=ae.uid,De=this.loading[we]=new Hl(ae,this.brightness);a.bc(ae.request,(Oe,$e)=>{const Ke=!this.loading[we];return delete this.loading[we],Ke||Oe?(De.status="done",Ke||(this.loaded[we]=De),ue(Oe)):$e&&$e.byteLength!==0?void De.parse($e,this.layerIndex,ae,(qe,Je)=>{De.status="done",this.loaded=this.loaded||{},this.loaded[we]=De,qe||!Je?ue(qe):ue(null,Je)}):(De.status="done",this.loaded[we]=De,ue())})}reloadTile(ae,ue){const we=this.loaded,De=ae.uid;if(we&&we[De]){const Oe=we[De];Oe.projection=ae.projection,Oe.brightness=ae.brightness;const $e=(Ke,qe)=>{Oe.reloadCallback&&(delete Oe.reloadCallback,this.loadTile(ae,ue)),ue(Ke,qe)};Oe.status==="parsing"?Oe.reloadCallback=$e:Oe.status==="done"&&this.loadTile(ae,ue)}}abortTile(ae,ue){const we=ae.uid;this.loading[we]&&delete this.loading[we],ue()}removeTile(ae,ue){const we=this.loaded,De=ae.uid;we&&we[De]&&delete we[De],ue()}}class el{constructor(ae){this.self=ae,this.actor=new a.e3(ae,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.bL({name:"mercator"}),this.workerSourceTypes={vector:te,geojson:Tc,"batched-model":Sc},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ue,we)=>{if(this.workerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.workerSourceTypes[ue]=we},this.self.registerRTLTextPlugin=ue=>{if(a.e4.isParsed())throw new Error("RTL text plugin already registered.");a.e4.applyArabicShaping=ue.applyArabicShaping,a.e4.processBidirectionalText=ue.processBidirectionalText,a.e4.processStyledBidirectionalText=ue.processStyledBidirectionalText}}clearCaches(ae,ue,we){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae],delete this.rasterArrayWorkerSource,we()}checkIfReady(ae,ue,we){we()}setReferrer(ae,ue){this.referrer=ue}spriteLoaded(ae,{scope:ue,isLoaded:we}){if(this.isSpriteLoaded[ae]||(this.isSpriteLoaded[ae]={}),this.isSpriteLoaded[ae][ue]=we,this.workerSources[ae]&&this.workerSources[ae][ue])for(const De in this.workerSources[ae][ue]){const Oe=this.workerSources[ae][ue][De];for(const $e in Oe){const Ke=Oe[$e];Ke instanceof te&&(Ke.isSpriteLoaded=we,Ke.fire(new a.x("isSpriteLoaded")))}}}setImages(ae,{scope:ue,images:we},De){if(this.availableImages[ae]||(this.availableImages[ae]={}),this.availableImages[ae][ue]=we,this.workerSources[ae]&&this.workerSources[ae][ue]){for(const Oe in this.workerSources[ae][ue]){const $e=this.workerSources[ae][ue][Oe];for(const Ke in $e)$e[Ke].availableImages=we}De()}else De()}setProjection(ae,ue){this.projections[ae]=a.bL(ue)}setBrightness(ae,ue,we){this.brightness=ue,we()}setLayers(ae,ue,we){this.getLayerIndex(ae,ue.scope).replace(ue.layers,ue.options),we()}updateLayers(ae,ue,we){this.getLayerIndex(ae,ue.scope).update(ue.layers,ue.removedIds,ue.options),we()}loadTile(ae,ue,we){ue.projection=this.projections[ae]||this.defaultProjection,this.getWorkerSource(ae,ue.type,ue.source,ue.scope).loadTile(ue,we)}loadDEMTile(ae,ue,we){this.getDEMWorkerSource(ae,ue.source,ue.scope).loadTile(ue,we)}decodeRasterArray(ae,ue,we){this.getRasterArrayWorkerSource().decodeRasterArray(ue,we)}reloadTile(ae,ue,we){ue.projection=this.projections[ae]||this.defaultProjection,this.getWorkerSource(ae,ue.type,ue.source,ue.scope).reloadTile(ue,we)}abortTile(ae,ue,we){this.getWorkerSource(ae,ue.type,ue.source,ue.scope).abortTile(ue,we)}removeTile(ae,ue,we){this.getWorkerSource(ae,ue.type,ue.source,ue.scope).removeTile(ue,we)}removeSource(ae,ue,we){if(!(this.workerSources[ae]&&this.workerSources[ae][ue.scope]&&this.workerSources[ae][ue.scope][ue.type]&&this.workerSources[ae][ue.scope][ue.type][ue.source]))return;const De=this.workerSources[ae][ue.scope][ue.type][ue.source];delete this.workerSources[ae][ue.scope][ue.type][ue.source],De.removeSource!==void 0?De.removeSource(ue,we):we()}loadWorkerSource(ae,ue,we){try{this.self.importScripts(ue.url),we()}catch(De){we(De.toString())}}syncRTLPluginState(ae,ue,we){try{a.e4.setState(ue);const De=a.e4.getPluginURL();if(a.e4.isLoaded()&&!a.e4.isParsed()&&De!=null){this.self.importScripts(De);const Oe=a.e4.isParsed();we(Oe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${De}`),Oe)}}catch(De){we(De.toString())}}setDracoUrl(ae,ue){this.dracoUrl=ue}getAvailableImages(ae,ue){this.availableImages[ae]||(this.availableImages[ae]={});let we=this.availableImages[ae][ue];return we||(we=[]),we}getLayerIndex(ae,ue){this.layerIndexes[ae]||(this.layerIndexes[ae]={});let we=this.layerIndexes[ae][ue];return we||(we=this.layerIndexes[ae][ue]=new H,we.scope=ue),we}getWorkerSource(ae,ue,we,De){return this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][De]||(this.workerSources[ae][De]={}),this.workerSources[ae][De][ue]||(this.workerSources[ae][De][ue]={}),this.isSpriteLoaded[ae]||(this.isSpriteLoaded[ae]={}),this.workerSources[ae][De][ue][we]||(this.workerSources[ae][De][ue][we]=new this.workerSourceTypes[ue]({send:(Oe,$e,Ke,qe,Je,lt)=>{this.actor.send(Oe,$e,Ke,ae,Je,lt)},scheduler:this.actor.scheduler},this.getLayerIndex(ae,De),this.getAvailableImages(ae,De),this.isSpriteLoaded[ae][De],void 0,this.brightness)),this.workerSources[ae][De][ue][we]}getDEMWorkerSource(ae,ue,we){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][we]||(this.demWorkerSources[ae][we]={}),this.demWorkerSources[ae][we][ue]||(this.demWorkerSources[ae][we][ue]=new K),this.demWorkerSources[ae][we][ue]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new se),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ae,ue){a.e5(ue)}getWorkerPerformanceMetrics(ae,ue,we){we(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new el(self)),el}),w(["./shared"],function(a){var D="3.7.0";const j={create:"create",load:"load",fullLoad:"fullLoad"},B={mark(d){performance.mark(d)},measure(d,i,l){performance.measure(d,i,l)}};function H(d){const i=d.name.split("?")[0];return a.a(i)&&i.includes("mapbox-gl.js")?"javascript":a.a(i)&&i.includes("mapbox-gl.css")?"css":a.b(i)?"fontRange":a.c(i)?"sprite":a.i(i)?"style":a.d(i)?"tilejson":"other"}var X,ie={},Q=function(){if(X)return ie;function d(p){return!i(p)}function i(p){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,A,O=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(O);try{A=new Worker(k),x=!0}catch{x=!1}return A&&A.terminate(),URL.revokeObjectURL(k),x}()?function(){var x=document.createElement("canvas");x.width=x.height=1;var A=x.getContext("2d");if(!A)return!1;var O=A.getImageData(0,0,1,1);return O&&O.width===x.width}()?(l[_=p&&p.failIfMajorPerformanceCaveat]===void 0&&(l[_]=function(x){var A,O=function(k){var z=document.createElement("canvas"),F=Object.create(d.webGLContextAttributes);return F.failIfMajorPerformanceCaveat=k,z.getContext("webgl2",F)}(x);if(!O)return!1;try{A=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!A||O.isContextLost())&&(O.shaderSource(A,"void main() {}"),O.compileShader(A),O.getShaderParameter(A,O.COMPILE_STATUS)===!0)}(_)),l[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var _}X=1,ie.supported=d,ie.notSupportedReason=i;var l={};return d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},ie}();function ne(d,i,l){const p=document.createElement(d);return i!=null&&(p.className=i),l&&l.appendChild(p),p}function te(d,i,l){const p=document.createElementNS("http://www.w3.org/2000/svg",d);for(const _ of Object.keys(i))p.setAttributeNS(null,_,String(i[_]));return l&&l.appendChild(p),p}const K=typeof document<"u"?document.documentElement&&document.documentElement.style:null,se=K&&K.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ve;function le(){K&&se&&(ve=K[se],K[se]="none")}function fe(){K&&se&&(K[se]=ve)}function Te(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",Te,!0)}function Ee(){window.addEventListener("click",Te,!0),window.setTimeout(()=>{window.removeEventListener("click",Te,!0)},0)}function Ze(d,i){const l=d.getBoundingClientRect();return Xe(d,l,i)}function st(d,i){const l=d.getBoundingClientRect(),p=[];for(let _=0;_<i.length;_++)p.push(Xe(d,l,i[_]));return p}function We(d){return window.InstallTrigger!==void 0&&d.button===2&&d.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button}function Xe(d,i,l){const p=d.offsetWidth===i.width?1:d.offsetWidth/i.width;return new a.P((l.clientX-i.left)*p,(l.clientY-i.top)*p)}const St="01",Mt="NO_ACCESS_TOKEN";class Pt{constructor(i,l,p){this._transformRequestFn=i,this._customAccessToken=l,this._silenceAuthErrors=!!p,this._createSkuToken()}_createSkuToken(){const i=function(){let l="";for(let p=0;p<10;p++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",St,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,l){return this._transformRequestFn&&this._transformRequestFn(i,l)||{url:i}}normalizeStyleURL(i,l){if(!a.f(i))return i;const p=kt(i);return p.params.push(`sdk=js-${D}`),p.path=`/styles/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||l)}normalizeGlyphsURL(i,l){if(!a.f(i))return i;const p=kt(i);return p.path=`/fonts/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||l)}normalizeModelURL(i,l){if(!a.f(i))return i;const p=kt(i);return p.path=`/models/v1${p.path}`,this._makeAPIURL(p,this._customAccessToken||l)}normalizeSourceURL(i,l,p,_){if(!a.f(i))return i;const x=kt(i);return x.path=`/v4/${x.authority}.json`,x.params.push("secure"),p&&x.params.push(`language=${p}`),_&&x.params.push(`worldview=${_}`),this._makeAPIURL(x,this._customAccessToken||l)}normalizeSpriteURL(i,l,p,_){const x=kt(i);return a.f(i)?(x.path=`/styles/v1${x.path}/sprite${l}${p}`,this._makeAPIURL(x,this._customAccessToken||_)):(x.path+=`${l}${p}`,mt(x))}normalizeTileURL(i,l,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!a.f(i))return i;const _=kt(i);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${l||p&&_.authority!=="raster"&&p===512?"@2x":""}${a.m.supported?".webp":"$1"}`),_.authority==="raster"?_.path=`/${a.e.RASTER_URL_PREFIX}${_.path}`:_.authority==="rasterarrays"?_.path=`/${a.e.RASTERARRAYS_URL_PREFIX}${_.path}`:_.authority==="3dtiles"?_.path=`/${a.e.TILES3D_URL_PREFIX}${_.path}`:(_.path=_.path.replace(/^.+\/v4\//,"/"),_.path=`/${a.e.TILE_URL_VERSION}${_.path}`);const x=this._customAccessToken||function(A){for(const O of A){const k=O.match(/^access_token=(.*)$/);if(k)return k[1]}return null}(_.params)||a.e.ACCESS_TOKEN;return a.e.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&_.params.push(`sku=${this._skuToken}`),this._makeAPIURL(_,x)}canonicalizeTileURL(i,l){const p=kt(i);if(!p.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!p.path.match(/\.[\w]+$/))return i;let _="mapbox://";p.path.match(/^\/raster\/v1\//)?_+=`raster/${p.path.replace(`/${a.e.RASTER_URL_PREFIX}/`,"")}`:p.path.match(/^\/rasterarrays\/v1\//)?_+=`rasterarrays/${p.path.replace(`/${a.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:_+=`tiles/${p.path.replace(`/${a.e.TILE_URL_VERSION}/`,"")}`;let x=p.params;return l&&(x=x.filter(A=>!A.match(/^access_token=/))),x.length&&(_+=`?${x.join("&")}`),_}canonicalizeTileset(i,l){const p=!!l&&a.f(l),_=[];for(const x of i.tiles||[])a.h(x)?_.push(this.canonicalizeTileURL(x,p)):_.push(x);return _}_makeAPIURL(i,l){const p="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",_=kt(a.e.API_URL);if(i.protocol=_.protocol,i.authority=_.authority,i.protocol==="http"){const x=i.params.indexOf("secure");x>=0&&i.params.splice(x,1)}if(_.path!=="/"&&(i.path=`${_.path}${i.path}`),!a.e.REQUIRE_ACCESS_TOKEN)return mt(i);if(l=l||a.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!l)throw new Error(`An API access token is required to use Mapbox GL. ${p}`);if(l[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${p}`)}return i.params=i.params.filter(x=>x.indexOf("access_token")===-1),i.params.push(`access_token=${l||""}`),mt(i)}}const ht=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kt(d){const i=d.match(ht);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function mt(d){const i=d.params.length?`?${d.params.join("&")}`:"";return`${d.protocol}://${d.authority}${d.path}${i}`}const Ct="mapbox.eventData";function _t(d){if(!d)return null;const i=d.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(a.j(i[1]))}catch{return null}}class Qt{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=_t(a.e.ACCESS_TOKEN);let p="";return p=l&&l.u?a.k(l.u):a.e.ACCESS_TOKEN||"",i?`${Ct}.${i}:${p}`:`${Ct}:${p}`}fetchEventData(){const i=a.s("localStorage"),l=this.getStorageKey(),p=this.getStorageKey("uuid");if(i)try{const _=localStorage.getItem(l);_&&(this.eventData=JSON.parse(_));const x=localStorage.getItem(p);x&&(this.anonId=x)}catch{a.w("Unable to read from LocalStorage")}}saveEventData(){const i=a.s("localStorage"),l=this.getStorageKey(),p=this.getStorageKey("uuid"),_=this.anonId;if(i&&_)try{localStorage.setItem(p,_),Object.keys(this.eventData).length>=1&&localStorage.setItem(l,JSON.stringify(this.eventData))}catch{a.w("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,p,_){if(!a.e.EVENTS_URL)return;const x=kt(a.e.EVENTS_URL);x.params.push(`access_token=${_||a.e.ACCESS_TOKEN||""}`);const A={event:this.type,created:new Date(i).toISOString()},O=l?a.l(A,l):A,k={url:mt(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([O])};this.pendingRequest=a.p(k,z=>{this.pendingRequest=null,p(z),this.saveEventData(),this.processRequests(_)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const qt=new class extends Qt{constructor(d){super("appUserTurnstile"),this._customAccessToken=d}postTurnstileEvent(d,i){a.e.EVENTS_URL&&a.e.ACCESS_TOKEN&&Array.isArray(d)&&d.some(l=>a.f(l)||a.h(l))&&this.queueRequest(Date.now(),i)}processRequests(d){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=_t(a.e.ACCESS_TOKEN),l=i?i.u:a.e.ACCESS_TOKEN;let p=l!==this.eventData.tokenU;a.v(this.anonId)||(this.anonId=a.u(),p=!0);const _=this.queue.shift();if(this.eventData.lastSuccess){const x=new Date(this.eventData.lastSuccess),A=new Date(_),O=(_-this.eventData.lastSuccess)/864e5;p=p||O>=1||O<-1||x.getDate()!==A.getDate()}else p=!0;p?this.postEvent(_,{sdkIdentifier:"mapbox-gl-js",sdkVersion:D,skuId:St,"enabled.telemetry":!1,userId:this.anonId},x=>{x||(this.eventData.lastSuccess=_,this.eventData.tokenU=l)},d):this.processRequests()}},gr=qt.postTurnstileEvent.bind(qt),Gt=new class extends Qt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(d,i,l,p){this.skuToken=i,this.errorCb=p,a.e.EVENTS_URL&&(l||a.e.ACCESS_TOKEN?this.queueRequest({id:d,timestamp:Date.now()},l):this.errorCb(new Error(Mt)))}processRequests(d){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),a.v(this.anonId)||(this.anonId=a.u()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:D,skuId:St,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},d))}remove(){this.errorCb=null}},vn=Gt.postMapLoadEvent.bind(Gt),cn=new class extends Qt{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(d){let i=this.mapInstanceIdMap.get(d);return i||(i=a.u(),this.mapInstanceIdMap.set(d,i)),i}getEventId(d){const i=this.eventIdPerMapInstanceMap.get(d)||0;return this.eventIdPerMapInstanceMap.set(d,i+1),i}postStyleLoadEvent(d,i){const{map:l,style:p,importedStyles:_}=i;if(!a.e.EVENTS_URL||!d&&!a.e.ACCESS_TOKEN)return;const x=this.getMapInstanceId(l),A={mapInstanceId:x,eventId:this.getEventId(x),style:p};_.length&&(A.importedStyles=_),this.queueRequest({timestamp:Date.now(),payload:A},d)}processRequests(d){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,payload:l}=this.queue.shift();this.postEvent(i,l,()=>{},d)}},Ln=cn.postStyleLoadEvent.bind(cn),ii=new class extends Qt{constructor(){super("gljs.performance")}postPerformanceEvent(d,i){a.e.EVENTS_URL&&(d||a.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},d)}processRequests(d){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),p=function(_){const x=performance.getEntriesByType("resource"),A=performance.getEntriesByType("mark"),O=function(q){const J={};if(q){for(const ee in q)if(ee!=="other")for(const re of q[ee]){const oe=`${ee}ResolveRangeMin`,me=`${ee}ResolveRangeMax`,ye=`${ee}RequestCount`,de=`${ee}RequestCachedCount`;J[oe]=Math.min(J[oe]||1/0,re.startTime),J[me]=Math.max(J[me]||-1/0,re.responseEnd);const be=xe=>{J[xe]===void 0&&(J[xe]=0),++J[xe]};re.transferSize!==void 0&&re.transferSize===0&&be(de),be(ye)}}return J}(function(q,J){const ee={};if(q)for(const re of q){const oe=J(re);ee[oe]===void 0&&(ee[oe]=[]),ee[oe].push(re)}return ee}(x,H)),k=window.devicePixelRatio,z=navigator.connection||navigator.mozConnection||navigator.webkitConnection,F=z?z.effectiveType:void 0,U={counters:[],metadata:[],attributes:[]},V=(q,J,ee)=>{ee!=null&&q.push({name:J,value:ee.toString()})};for(const q in O)V(U.counters,q,O[q]);if(_.interactionRange[0]!==1/0&&_.interactionRange[1]!==-1/0&&(V(U.counters,"interactionRangeMin",_.interactionRange[0]),V(U.counters,"interactionRangeMax",_.interactionRange[1])),A)for(const q of Object.keys(j)){const J=j[q],ee=A.find(re=>re.name===J);ee&&V(U.counters,J,ee.startTime)}return V(U.counters,"visibilityHidden",_.visibilityHidden),V(U.attributes,"style",function(q){if(q)for(const J of q){const ee=J.name.split("?")[0];if(a.i(ee)){const re=ee.split("/").slice(-2);if(re.length===2)return`mapbox://styles/${re[0]}/${re[1]}`}}}(x)),V(U.attributes,"terrainEnabled",_.terrainEnabled?"true":"false"),V(U.attributes,"fogEnabled",_.fogEnabled?"true":"false"),V(U.attributes,"projection",_.projection),V(U.attributes,"zoom",_.zoom),V(U.metadata,"devicePixelRatio",k),V(U.metadata,"connectionEffectiveType",F),V(U.metadata,"navigatorUserAgent",navigator.userAgent),V(U.metadata,"screenWidth",window.screen.width),V(U.metadata,"screenHeight",window.screen.height),V(U.metadata,"windowWidth",window.innerWidth),V(U.metadata,"windowHeight",window.innerHeight),V(U.metadata,"mapWidth",_.width/k),V(U.metadata,"mapHeight",_.height/k),V(U.metadata,"webglRenderer",_.renderer),V(U.metadata,"webglVendor",_.vendor),V(U.metadata,"sdkVersion",D),V(U.metadata,"sdkIdentifier","mapbox-gl-js"),U}(l);for(const _ of p.metadata);for(const _ of p.counters);for(const _ of p.attributes);this.postEvent(i,p,()=>{},d)}},er=ii.postPerformanceEvent.bind(ii),Cr=new class extends Qt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(d,i,l,p){if(!a.e.API_URL||!a.e.SESSION_PATH)return;const _=kt(a.e.API_URL+a.e.SESSION_PATH);_.params.push(`sku=${i||""}`),_.params.push(`access_token=${p||a.e.ACCESS_TOKEN||""}`);const x={url:mt(_),headers:{"Content-Type":"text/plain"}};this.pendingRequest=a.g(x,A=>{this.pendingRequest=null,l(A),this.saveEventData(),this.processRequests(p)})}getSessionAPI(d,i,l,p){this.skuToken=i,this.errorCb=p,a.e.SESSION_PATH&&a.e.API_URL&&(l||a.e.ACCESS_TOKEN?this.queueRequest({id:d,timestamp:Date.now()},l):this.errorCb(new Error(Mt)))}processRequests(d){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},d)}remove(){this.errorCb=null}},Pe=Cr.getSessionAPI.bind(Cr),Nt=new Set;function gn(d,i){i?Nt.add(d):Nt.delete(d)}class Vr{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(i,l){this._updatedSourceCaches[i]=l,this.setDirty()}discardSourceCacheUpdate(i){delete this._updatedSourceCaches[i]}updateLayer(i){const l=i.scope;this._updatedLayers[l]=this._updatedLayers[l]||new Set,this._updatedLayers[l].add(i.id),this.setDirty()}removeLayer(i){const l=i.scope;this._removedLayers[l]=this._removedLayers[l]||{},this._updatedLayers[l]=this._updatedLayers[l]||new Set,this._removedLayers[l][i.id]=i,this._updatedLayers[l].delete(i.id),this._updatedPaintProps.delete(i.fqid),this.setDirty()}getRemovedLayer(i){return this._removedLayers[i.scope]?this._removedLayers[i.scope][i.id]:null}discardLayerRemoval(i){this._removedLayers[i.scope]&&delete this._removedLayers[i.scope][i.id]}getLayerUpdatesByScope(){const i={};for(const l in this._updatedLayers)i[l]=i[l]||{},i[l].updatedIds=Array.from(this._updatedLayers[l].values());for(const l in this._removedLayers)i[l]=i[l]||{},i[l].removedIds=Object.keys(this._removedLayers[l]);return i}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(i){this._updatedPaintProps.add(i.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(i){this._updatedImages.add(i),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function vt(d){const{userImage:i}=d;return!!(i&&i.render&&i.render())&&(d.data.replace(new Uint8Array(i.data.buffer)),!0)}class Tn extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(i){this.images[i]={},this.loaded[i]=!1,this.updatedImages[i]={},this.patterns[i]={},this.callbackDispatchedThisFrame[i]={},this.atlasImage[i]=new a.r({width:1,height:1})}isLoaded(){for(const i in this.loaded)if(!this.loaded[i])return!1;return!0}setLoaded(i,l){if(this.loaded[l]!==i&&(this.loaded[l]=i,i)){for(const{ids:p,callback:_}of this.requestors)this._notify(p,l,_);this.requestors=[]}}hasImage(i,l){return!!this.getImage(i,l)}getImage(i,l){return this.images[l][i]}addImage(i,l,p){this._validate(i,p)&&(this.images[l][i]=p)}_validate(i,l){let p=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new a.t(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new a.t(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new a.t(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,l){if(!i)return!0;let p=0;for(const _ of i){if(_[0]<p||_[1]<_[0]||l<_[1])return!1;p=_[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l,p){p.version=this.images[l][i].version+1,this.images[l][i]=p,this.updatedImages[l][i]=!0}removeImage(i,l){const p=this.images[l][i];delete this.images[l][i],delete this.patterns[l][i],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(i){return Object.keys(this.images[i])}getImages(i,l,p){let _=!0;const x=!!this.loaded[l];if(!x)for(const A of i)this.images[l][A]||(_=!1);x||_?this._notify(i,l,p):this.requestors.push({ids:i,scope:l,callback:p})}getUpdatedImages(i){return this.updatedImages[i]}_notify(i,l,p){const _={};for(const x of i){this.images[l][x]||this.fire(new a.x("styleimagemissing",{id:x}));const A=this.images[l][x];A?_[x]={data:A.data.clone(),pixelRatio:A.pixelRatio,sdf:A.sdf,version:A.version,stretchX:A.stretchX,stretchY:A.stretchY,content:A.content,hasRenderCallback:!!(A.userImage&&A.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,_)}getPixelSize(i){const{width:l,height:p}=this.atlasImage[i];return{width:l,height:p}}getPattern(i,l,p){const _=this.patterns[l][i],x=this.getImage(i,l);if(!x)return null;if(_&&_.position.version===x.version)return _.position;if(_)_.position.version=x.version;else{const A={w:x.data.width+2*a.y,h:x.data.height+2*a.y,x:0,y:0},O=new a.I(A,x,a.y);this.patterns[l][i]={bin:A,position:O}}return this._updatePatternAtlas(l,p),this.patterns[l][i].position}bind(i,l){const p=i.gl;let _=this.atlasTexture[l];_?this.dirty&&(_.update(this.atlasImage[l]),this.dirty=!1):(_=new a.T(i,this.atlasImage[l],p.RGBA8),this.atlasTexture[l]=_),_.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(i,l){const p=[];for(const O in this.patterns[i])p.push(this.patterns[i][O].bin);const{w:_,h:x}=a.z(p),A=this.atlasImage[i];A.resize({width:_||1,height:x||1});for(const O in this.patterns[i]){const{bin:k,position:z}=this.patterns[i][O];let F=z.padding;const U=k.x+F,V=k.y+F,q=this.images[i][O].data,J=q.width,ee=q.height;F=F>1?F-1:F,a.r.copy(q,A,{x:0,y:0},{x:U,y:V},{width:J,height:ee},l),a.r.copy(q,A,{x:0,y:ee-F},{x:U,y:V-F},{width:J,height:F},l),a.r.copy(q,A,{x:0,y:0},{x:U,y:V+ee},{width:J,height:F},l),a.r.copy(q,A,{x:J-F,y:0},{x:U-F,y:V},{width:F,height:ee},l),a.r.copy(q,A,{x:0,y:0},{x:U+J,y:V},{width:F,height:ee},l),a.r.copy(q,A,{x:J-F,y:ee-F},{x:U-F,y:V-F},{width:F,height:F},l),a.r.copy(q,A,{x:0,y:ee-F},{x:U+J,y:V-F},{width:F,height:F},l),a.r.copy(q,A,{x:0,y:0},{x:U+J,y:V+ee},{width:F,height:F},l),a.r.copy(q,A,{x:J-F,y:0},{x:U-F,y:V+ee},{width:F,height:F},l)}this.dirty=!0}beginFrame(){for(const i in this.images)this.callbackDispatchedThisFrame[i]={}}dispatchRenderCallbacks(i,l){for(const p of i){if(this.callbackDispatchedThisFrame[l][p])continue;this.callbackDispatchedThisFrame[l][p]=!0;const _=this.images[l][p];vt(_)&&this.updateImage(p,l,_)}}}function un(d){const i=d.key,l=d.value,p=d.valueSpec||{},_=d.objectElementValidators||{},x=d.style,A=d.styleSpec;let O=[];const k=a.B(l);if(k!=="object")return[new a.V(i,l,`object expected, ${k} found`)];for(const z in l){const F=z.split(".")[0];let U;_[F]?U=_[F]:p[F]?U=Br:_["*"]?U=_["*"]:p["*"]&&(U=Br),U?O=O.concat(U({key:(i&&`${i}.`)+z,value:l[z],valueSpec:p[F]||p["*"],style:x,styleSpec:A,object:l,objectKey:z},l)):O.push(new a.A(i,l[z],`unknown property "${z}"`))}for(const z in p)_[z]||p[z].required&&p[z].default===void 0&&l[z]===void 0&&O.push(new a.V(i,l,`missing required property "${z}"`));return O}function wi(d){const i=d.value,l=d.valueSpec,p=d.style,_=d.styleSpec,x=d.key,A=d.arrayElementValidator||Br;if(a.B(i)!=="array")return[new a.V(x,i,`array expected, ${a.B(i)} found`)];if(l.length&&i.length!==l.length)return[new a.V(x,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new a.V(x,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let O={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};_.$version<7&&(O.function=l.function),a.B(l.value)==="object"&&(O=l.value);let k=[];for(let z=0;z<i.length;z++)k=k.concat(A({array:i,arrayIndex:z,value:i[z],valueSpec:O,style:p,styleSpec:_,key:`${x}[${z}]`},!0));return k}function br(d){const i=d.key,l=d.value,p=d.valueSpec;let _=a.B(l);if(_==="number"&&l!=l&&(_="NaN"),_!=="number")return[new a.V(i,l,`number expected, ${_} found`)];if("minimum"in p){let x=p.minimum;if(a.B(p.minimum)==="array"&&(x=p.minimum[d.arrayIndex]),l<x)return[new a.V(i,l,`${l} is less than the minimum value ${x}`)]}if("maximum"in p){let x=p.maximum;if(a.B(p.maximum)==="array"&&(x=p.maximum[d.arrayIndex]),l>x)return[new a.V(i,l,`${l} is greater than the maximum value ${x}`)]}return[]}function jn(d){const i=d.valueSpec,l=a.D(d.value.type);let p,_,x,A={};const O=l!=="categorical"&&d.value.property===void 0,k=!O,z=a.B(d.value.stops)==="array"&&a.B(d.value.stops[0])==="array"&&a.B(d.value.stops[0][0])==="object",F=un({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(q){if(l==="identity")return[new a.V(q.key,q.value,'identity function may not have a "stops" property')];let J=[];const ee=q.value;return J=J.concat(wi({key:q.key,value:ee,valueSpec:q.valueSpec,style:q.style,styleSpec:q.styleSpec,arrayElementValidator:U})),a.B(ee)==="array"&&ee.length===0&&J.push(new a.V(q.key,ee,"array must have at least one stop")),J},default:function(q){return Br({key:q.key,value:q.value,valueSpec:i,style:q.style,styleSpec:q.styleSpec})}}});return l==="identity"&&O&&F.push(new a.V(d.key,d.value,'missing required property "property"')),l==="identity"||d.value.stops||F.push(new a.V(d.key,d.value,'missing required property "stops"')),l==="exponential"&&d.valueSpec.expression&&!a.F(d.valueSpec)&&F.push(new a.V(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(k&&!a.G(d.valueSpec)?F.push(new a.V(d.key,d.value,"property functions not supported")):O&&!a.H(d.valueSpec)&&F.push(new a.V(d.key,d.value,"zoom functions not supported"))),l!=="categorical"&&!z||d.value.property!==void 0||F.push(new a.V(d.key,d.value,'"property" property is required')),F;function U(q){let J=[];const ee=q.value,re=q.key;if(a.B(ee)!=="array")return[new a.V(re,ee,`array expected, ${a.B(ee)} found`)];if(ee.length!==2)return[new a.V(re,ee,`array length 2 expected, length ${ee.length} found`)];if(z){if(a.B(ee[0])!=="object")return[new a.V(re,ee,`object expected, ${a.B(ee[0])} found`)];if(ee[0].zoom===void 0)return[new a.V(re,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new a.V(re,ee,"object stop key must have value")];const oe=a.D(ee[0].zoom);if(typeof oe!="number")return[new a.V(re,ee[0].zoom,"stop zoom values must be numbers")];if(x&&x>oe)return[new a.V(re,ee[0].zoom,"stop zoom values must appear in ascending order")];oe!==x&&(x=oe,_=void 0,A={}),J=J.concat(un({key:`${re}[0]`,value:ee[0],valueSpec:{zoom:{}},style:q.style,styleSpec:q.styleSpec,objectElementValidators:{zoom:br,value:V}}))}else J=J.concat(V({key:`${re}[0]`,value:ee[0],valueSpec:{},style:q.style,styleSpec:q.styleSpec},ee));return a.J(a.K(ee[1]))?J.concat([new a.V(`${re}[1]`,ee[1],"expressions are not allowed in function stops.")]):J.concat(Br({key:`${re}[1]`,value:ee[1],valueSpec:i,style:q.style,styleSpec:q.styleSpec}))}function V(q,J){const ee=a.B(q.value),re=a.D(q.value),oe=q.value!==null?q.value:J;if(p){if(ee!==p)return[new a.V(q.key,oe,`${ee} stop domain type must match previous stop domain type ${p}`)]}else p=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new a.V(q.key,oe,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&l!=="categorical"){let me=`number expected, ${ee} found`;return a.G(i)&&l===void 0&&(me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new a.V(q.key,oe,me)]}return l!=="categorical"||ee!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?l!=="categorical"&&ee==="number"&&typeof re=="number"&&typeof _=="number"&&_!==void 0&&re<_?[new a.V(q.key,oe,"stop domain values must appear in ascending order")]:(_=re,l==="categorical"&&re in A?[new a.V(q.key,oe,"stop domain values must be unique")]:(A[re]=!0,[])):[new a.V(q.key,oe,`integer expected, found ${String(re)}`)]}}function _i(d){const i=(d.expressionContext==="property"?a.L:a.M)(a.K(d.value),d.valueSpec);if(i.result==="error")return i.value.map(p=>new a.V(`${d.key}${p.key}`,d.value,p.message));const l=i.value.expression||i.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!l.outputDefined())return[new a.V(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!a.N(l))return[new a.V(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter")return Wi(l,d);if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!a.O(l,["zoom","feature-state"]))return[new a.V(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!a.Q(l))return[new a.V(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wi(d,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const _ of i.valueSpec.expression.parameters)l.delete(_);if(l.size===0)return[];const p=[];return d instanceof a.S&&l.has(d.name)?[new a.V(i.key,i.value,`["${d.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(d.eachChild(_=>{p.push(...Wi(_,i))}),p)}function zo(d){const i=d.key,l=d.value,p=d.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(a.D(l))===-1&&_.push(new a.V(i,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(a.D(l))===-1&&_.push(new a.V(i,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),_}function Ha(d){return a.W(a.K(d.value))?_i(a.C({},d,{expressionContext:"filter",valueSpec:d.styleSpec[`filter_${d.layerType||"fill"}`]})):mr(d)}function mr(d){const i=d.value,l=d.key;if(a.B(i)!=="array")return[new a.V(l,i,`array expected, ${a.B(i)} found`)];const p=d.styleSpec;let _,x=[];if(i.length<1)return[new a.V(l,i,"filter array must have at least 1 element")];switch(x=x.concat(zo({key:`${l}[0]`,value:i[0],valueSpec:p.filter_operator,style:d.style,styleSpec:d.styleSpec})),a.D(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&a.D(i[1])==="$type"&&x.push(new a.V(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&x.push(new a.V(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(_=a.B(i[1]),_!=="string"&&x.push(new a.V(`${l}[1]`,i[1],`string expected, ${_} found`)));for(let A=2;A<i.length;A++)_=a.B(i[A]),a.D(i[1])==="$type"?x=x.concat(zo({key:`${l}[${A}]`,value:i[A],valueSpec:p.geometry_type,style:d.style,styleSpec:d.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&x.push(new a.V(`${l}[${A}]`,i[A],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let A=1;A<i.length;A++)x=x.concat(mr({key:`${l}[${A}]`,value:i[A],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":_=a.B(i[1]),i.length!==2?x.push(new a.V(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):_!=="string"&&x.push(new a.V(`${l}[1]`,i[1],`string expected, ${_} found`))}return x}function Gl(d,i){const l=d.key,p=d.style,_=d.layer,x=d.styleSpec,A=d.value,O=d.objectKey,k=x[`${i}_${d.layerType}`];if(!k)return[];const z=O.match(/^(.*)-transition$/);if(i==="paint"&&z&&k[z[1]]&&k[z[1]].transition)return Br({key:l,value:A,valueSpec:x.transition,style:p,styleSpec:x});const F=d.valueSpec||k[O];if(!F)return[new a.A(l,A,`unknown property "${O}"`)];let U;if(a.B(A)==="string"&&a.G(F)&&!F.tokens&&(U=/^{([^}]+)}$/.exec(A))){const q=`\`{ "type": "identity", "property": ${U?JSON.stringify(U[1]):'"_"'} }\``;return[new a.V(l,A,`"${O}" does not support interpolation syntax
Use an identity property function instead: ${q}.`)]}const V=[];if(d.layerType==="symbol")O!=="text-field"||!p||p.glyphs||p.imports||V.push(new a.V(l,A,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&a.X(a.K(A))&&a.D(A.type)==="identity"&&V.push(new a.V(l,A,'"text-font" does not support identity functions'));else if(d.layerType==="model"&&i==="paint"&&_&&_.layout&&_.layout.hasOwnProperty("model-id")&&a.G(F)&&(a.Y(F)||a.H(F))){const q=a.L(a.K(A),F),J=q.value.expression||q.value._styleExpression.expression;J&&!a.O(J,["measure-light"])&&(O==="model-emissive-strength"&&a.Q(J)&&a.N(J)||V.push(new a.V(l,A,`${O} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return V.concat(Br({key:d.key,value:A,valueSpec:F,style:p,styleSpec:x,expressionContext:"property",propertyType:i,propertyKey:O}))}function Za(d){return Gl(d,"paint")}function Ks(d){return Gl(d,"layout")}function zi(d){let i=[];const l=d.value,p=d.key,_=d.style,x=d.styleSpec;l.type||l.ref||i.push(new a.V(p,l,'either "type" or "ref" is required'));let A=a.D(l.type);const O=a.D(l.ref);if(l.id){const k=a.D(l.id);for(let z=0;z<d.arrayIndex;z++){const F=_.layers[z];a.D(F.id)===k&&i.push(new a.V(p,l.id,`duplicate layer id "${l.id}", previously used at line ${F.id.__line__}`))}}if("ref"in l){let k;["type","source","source-layer","filter","layout"].forEach(z=>{z in l&&i.push(new a.V(p,l[z],`"${z}" is prohibited for ref layers`))}),_.layers.forEach(z=>{a.D(z.id)===O&&(k=z)}),k?k.ref?i.push(new a.V(p,l.ref,"ref cannot reference another ref layer")):A=a.D(k.type):typeof O=="string"&&i.push(new a.V(p,l.ref,`ref layer "${O}" not found`))}else if(A!=="background"&&A!=="sky"&&A!=="slot")if(l.source){const k=_.sources&&_.sources[l.source],z=k&&a.D(k.type);k?z==="vector"&&A==="raster"?i.push(new a.V(p,l.source,`layer "${l.id}" requires a raster source`)):z==="raster"&&A!=="raster"?i.push(new a.V(p,l.source,`layer "${l.id}" requires a vector source`)):z!=="vector"||l["source-layer"]?z==="raster-dem"&&A!=="hillshade"?i.push(new a.V(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="raster-array"||["raster","raster-particle"].includes(A)?A!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||z==="geojson"&&k.lineMetrics?A==="raster-particle"&&z!=="raster-array"&&i.push(new a.V(p,l.source,`layer "${l.id}" requires a 'raster-array' source.`)):i.push(new a.V(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new a.V(p,l.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new a.V(p,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new a.V(p,l.source,`source "${l.source}" not found`))}else i.push(new a.V(p,l,'missing required property "source"'));return i=i.concat(un({key:p,value:l,valueSpec:x.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Br({key:`${p}.type`,value:l.type,valueSpec:x.layer.type,style:d.style,styleSpec:d.styleSpec,object:l,objectKey:"type"}),filter:k=>Ha(a.C({layerType:A},k)),layout:k=>un({layer:l,key:k.key,value:k.value,valueSpec:{},style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":z=>Ks(a.C({layerType:A},z))}}),paint:k=>un({layer:l,key:k.key,value:k.value,valueSpec:{},style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":z=>Za(a.C({layerType:A,layer:l},z))}})}})),i}function _o(d){const i=d.value,l=d.key,p=a.B(i);return p!=="string"?[new a.V(l,i,`string expected, ${p} found`)]:[]}const bc={promoteId:function({key:d,value:i}){if(a.B(i)==="string")return _o({key:d,value:i});{const l=[];for(const p in i)l.push(..._o({key:`${d}.${p}`,value:i[p]}));return l}}};function wc(d){const i=d.value,l=d.key,p=d.styleSpec,_=d.style;if(!i.type)return[new a.V(l,i,'"type" is required')];const x=a.D(i.type);let A=[];switch(["vector","raster","raster-dem","raster-array"].includes(x)&&(i.url||i.tiles||A.push(new a.A(l,i,'Either "url" or "tiles" is required.'))),x){case"vector":case"raster":case"raster-dem":case"raster-array":return A=A.concat(un({key:l,value:i,valueSpec:p[`source_${x.replace("-","_")}`],style:d.style,styleSpec:p,objectElementValidators:bc})),A;case"geojson":if(A=un({key:l,value:i,valueSpec:p.source_geojson,style:_,styleSpec:p,objectElementValidators:bc}),i.cluster)for(const O in i.clusterProperties){const[k,z]=i.clusterProperties[O],F=typeof k=="string"?[k,["accumulated"],["get",O]]:k;A.push(..._i({key:`${l}.${O}.map`,value:z,expressionContext:"cluster-map"})),A.push(..._i({key:`${l}.${O}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return A;case"video":return un({key:l,value:i,valueSpec:p.source_video,style:_,styleSpec:p});case"image":return un({key:l,value:i,valueSpec:p.source_image,style:_,styleSpec:p});case"canvas":return[new a.V(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zo({key:`${l}.type`,value:i.type,valueSpec:{values:ql(p)},style:_,styleSpec:p})}}function ql(d){return d.source.reduce((i,l)=>{const p=d[l];return p.type.type==="enum"&&(i=i.concat(Object.keys(p.type.values))),i},[])}function Xa(d){const i=d.value,l=d.styleSpec,p=l.light,_=d.style;let x=[];const A=a.B(i);if(i===void 0)return x;if(A!=="object")return x=x.concat([new a.V("light",i,`object expected, ${A} found`)]),x;for(const O in i){const k=O.match(/^(.*)-transition$/);x=x.concat(k&&p[k[1]]&&p[k[1]].transition?Br({key:O,value:i[O],valueSpec:l.transition,style:_,styleSpec:l}):p[O]?Br({key:O,value:i[O],valueSpec:p[O],style:_,styleSpec:l}):[new a.V(O,i[O],`unknown property "${O}"`)])}return x}function Js(d){const i=d.value;let l=[];if(!i)return l;const p=a.B(i);if(p!=="object")return l=l.concat([new a.V("light-3d",i,`object expected, ${p} found`)]),l;const _=d.styleSpec,x=_["light-3d"],A=d.key,O=d.style,k=d.style.lights;for(const U of["type","id"])if(!(U in i))return l=l.concat([new a.V("light-3d",i,`missing property ${U} on light`)]),l;if(i.type&&k)for(let U=0;U<d.arrayIndex;U++){const V=a.D(i.type),q=k[U];a.D(q.type)===V&&l.push(new a.V(A,i.id,`duplicate light type "${i.type}", previously defined at line ${q.id.__line__}`))}const z=`properties_light_${i.type}`;if(!(z in _))return l=l.concat([new a.V("light-3d",i,`Invalid light type ${i.type}`)]),l;const F=_[z];for(const U in i)if(U==="properties"){const V=i[U],q=a.B(V);if(q!=="object")return l=l.concat([new a.V("properties",V,`object expected, ${q} found`)]),l;for(const J in V)l=l.concat(F[J]?Br({key:J,value:V[J],valueSpec:F[J],style:O,styleSpec:_}):[new a.A(d.key,V[J],`unknown property "${J}"`)])}else{const V=U.match(/^(.*)-transition$/);l=l.concat(V&&x[V[1]]&&x[V[1]].transition?Br({key:U,value:i[U],valueSpec:_.transition,style:O,styleSpec:_}):x[U]?Br({key:U,value:i[U],valueSpec:x[U],style:O,styleSpec:_}):[new a.A(U,i[U],`unknown property "${U}"`)])}return l}function Wl(d){const i=d.value,l=d.key,p=d.style,_=d.styleSpec,x=_.terrain;let A=[];const O=a.B(i);if(i===void 0||O==="null")return A;if(O!=="object")return A=A.concat([new a.V("terrain",i,`object expected, ${O} found`)]),A;for(const k in i){const z=k.match(/^(.*)-transition$/);A=A.concat(z&&x[z[1]]&&x[z[1]].transition?Br({key:k,value:i[k],valueSpec:_.transition,style:p,styleSpec:_}):x[k]?Br({key:k,value:i[k],valueSpec:x[k],style:p,styleSpec:_}):[new a.A(k,i[k],`unknown property "${k}"`)])}if(i.source){const k=p.sources&&p.sources[i.source],z=k&&a.D(k.type);k?z!=="raster-dem"&&A.push(new a.V(l,i.source,`terrain cannot be used with a source of type ${String(z)}, it only be used with a "raster-dem" source type`)):A.push(new a.V(l,i.source,`source "${i.source}" not found`))}else A.push(new a.V(l,i,'terrain is missing required property "source"'));return A}function Bo(d){const i=d.value,l=d.style,p=d.styleSpec,_=p.fog;let x=[];const A=a.B(i);if(i===void 0)return x;if(A!=="object")return x=x.concat([new a.V("fog",i,`object expected, ${A} found`)]),x;for(const O in i){const k=O.match(/^(.*)-transition$/);x=x.concat(k&&_[k[1]]&&_[k[1]].transition?Br({key:O,value:i[O],valueSpec:p.transition,style:l,styleSpec:p}):_[O]?Br({key:O,value:i[O],valueSpec:_[O],style:l,styleSpec:p}):[new a.A(O,i[O],`unknown property "${O}"`)])}return x}const Ac={"*":()=>[],array:wi,boolean:function(d){const i=d.value,l=d.key,p=a.B(i);return p!=="boolean"?[new a.V(l,i,`boolean expected, ${p} found`)]:[]},number:br,color:function(d){const i=d.key,l=d.value,p=a.B(l);return p!=="string"?[new a.V(i,l,`color expected, ${p} found`)]:a.U.parseCSSColor(l)===null?[new a.V(i,l,`color expected, "${l}" found`)]:[]},enum:zo,filter:Ha,function:jn,layer:zi,object:un,source:wc,model:a.Z,light:Xa,"light-3d":Js,terrain:Wl,fog:Bo,string:_o,formatted:function(d){return _o(d).length===0?[]:_i(d)},resolvedImage:function(d){return _o(d).length===0?[]:_i(d)},projection:function(d){const i=d.value,l=d.styleSpec,p=l.projection,_=d.style;let x=[];const A=a.B(i);if(A==="object")for(const O in i)x=x.concat(Br({key:O,value:i[O],valueSpec:p[O],style:_,styleSpec:l}));else A!=="string"&&(x=x.concat([new a.V("projection",i,`object or string expected, ${A} found`)]));return x},import:function(d){const{value:i,styleSpec:l}=d,{data:p,..._}=i;Object.defineProperty(_,"__line__",{value:i.__line__,enumerable:!1});let x=un(a.C({},d,{value:_,valueSpec:l.import}));return a.D(_.id)===""&&x.push(new a.V(`${d.key}.id`,_,"import id can't be an empty string")),p&&(x=x.concat(Ku(p,l,{key:`${d.key}.data`}))),x}};function Br(d,i=!1){const l=d.value,p=d.valueSpec,_=d.styleSpec;if(p.expression&&a.X(a.D(l)))return jn(d);if(p.expression&&a.J(a.K(l)))return _i(d);if(p.type&&Ac[p.type]){const x=Ac[p.type](d);return i===!0&&x.length>0&&a.B(d.value)==="array"?_i(d):x}return un(a.C({},d,{valueSpec:p.type?_[p.type]:p}))}function _a(d){const i=d.value,l=d.key,p=_o(d);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new a.V(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new a.V(l,i,'"glyphs" url must include a "{range}" token'))),p}function Ku(d,i=a._,l={}){return Br({key:l.key||"",value:d,valueSpec:i.$root,styleSpec:i,style:d,objectElementValidators:{glyphs:_a,"*":()=>[]}})}function vo(d,i=a._){return Oe(Ku(d,i))}const Qs=d=>Oe(wc(d)),Tc=d=>Oe(Xa(d)),Hl=d=>Oe(Js(d)),Sc=d=>Oe(Wl(d)),el=d=>Oe(Bo(d)),Qe=d=>Oe(zi(d)),ae=d=>Oe(Ha(d)),ue=d=>Oe(Za(d)),we=d=>Oe(Ks(d)),De=d=>Oe(a.Z(d));function Oe(d){return d.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function $e(d,i){let l=!1;if(i&&i.length)for(const p of i)p instanceof a.A?a.w(p.message):(d.fire(new a.t(new Error(p.message))),l=!0);return l}let Ke;class qe extends a.E{constructor(i,l="flat"){super(),this._transitionable=new a.$(Ke||(Ke=new a.a0({anchor:new a.a1(a._.light.anchor),position:new a.a2(a._.light.position),color:new a.a1(a._.light.color),intensity:new a.a1(a._.light.intensity)}))),this.setLight(i,l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l,p={}){this._validate(Tc,i,p)||(this._transitionable.setTransitionOrValue(i),this.id=l)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&$e(this,i.call(vo,a.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a._})))}}const Je=new a.a0({source:new a.a1(a._.terrain.source),exaggeration:new a.a1(a._.terrain.exaggeration)});let lt=class extends a.E{constructor(d,i,l,p){super(),this.scope=l,this._transitionable=new a.$(Je,l,p),this._transitionable.setTransitionOrValue(d,p),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(d,i){this._transitionable.setTransitionOrValue(d,i)}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}getExaggeration(d){return this._transitioning.possiblyEvaluate(new a.a3(d)).get("exaggeration")}isZoomDependent(){const d=this._transitionable._values.exaggeration;return d!=null&&d.value!=null&&d.value.expression!=null&&d.value.expression instanceof a.a4}};const it=45,bt=65,Bt=.05;function Ft(d,i,l,p){const _=a.a7(it,bt,l),[x,A]=sr(d,p);let O=1-Math.min(1,Math.exp((i-x)/(A-x)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*_*d.alpha}function sr(d,i){const l=.5/Math.tan(.5*i);return[d.range[0]+l,d.range[1]+l]}function cr(d,i,l,p,_){const x=a.a6.vec3.transformMat4([],[i,l,p],_.mercatorFogMatrix);return Ft(d,a.a6.vec3.length(x),_.pitch,_._fov)}function hr(d,i,l,p,_,x,A){const O=[[l,p,0],[_,p,0],[_,x,0],[l,x,0]];let k=Number.MAX_VALUE,z=-Number.MAX_VALUE;for(const F of O){const U=a.a6.vec3.transformMat4([],F,i),V=a.a6.vec3.length(U);k=Math.min(k,V),z=Math.max(z,V)}return[Ft(d,k,A.pitch,A._fov),Ft(d,z,A.pitch,A._fov)]}const ur=new a.a0({range:new a.a1(a._.fog.range),color:new a.a1(a._.fog.color),"high-color":new a.a1(a._.fog["high-color"]),"space-color":new a.a1(a._.fog["space-color"]),"horizon-blend":new a.a1(a._.fog["horizon-blend"]),"star-intensity":new a.a1(a._.fog["star-intensity"]),"vertical-range":new a.a1(a._.fog["vertical-range"])});class Gr extends a.E{constructor(i,l,p,_){super(),this._transitionable=new a.$(ur,p,new Map(_)),this.set(i,_),this._transitioning=this._transitionable.untransitioned(),this._transform=l,this.properties=new a.a8(ur),this.scope=p}get state(){const i=this._transform,l=i.projection.name==="globe",p=a.a9(i.zoom),_=this.properties.get("range"),x=[.5,3];return{range:l?[a.aa(x[0],_[0],p),a.aa(x[1],_[1],p)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,l,p={}){if(this._validate(el,i,p))return;const _=a.l({},i);for(const x of Object.keys(a._.fog))_[x]===void 0&&(_[x]=a._.fog[x].default);this._options=_,this._transitionable.setTransitionOrValue(this._options,l)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.a7(it,bt,i))*l.a}getOpacityAtLatLng(i,l){return this._transform.projection.supportsFog?function(p,_,x){const A=a.a5.fromLngLat(_),O=x.elevation?x.elevation.getAtPointOrZero(A):0;return cr(p,A.x,A.y,O,x)}(this.state,i,l):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];const l=this._transform.calculateFogTileMatrix(i.toUnwrapped());return hr(this.state,l,0,0,a.ab,a.ab,this._transform)}getOpacityForBounds(i,l,p,_,x){return this._transform.projection.supportsFog?hr(this.state,i,l,p,_,x,this._transform):[1,1]}getFovAdjustedRange(i){return this._transform.projection.supportsFog?sr(this.state,i):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;const l=[4,5,6,7];for(const p of l){const _=i.points[p];let x;if(_[2]>=0)x=_;else{const A=i.points[p-4];x=a.ac(A,_,A[2]/(A[2]-_[2]))}if(cr(this.state,x[0],x[1],0,this._transform)>=Bt)return!0}return!1}updateConfig(i){this._transitionable.setTransitionOrValue(this._options,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&$e(this,i.call(vo,a.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a._})))}}class Jr extends a.E{constructor(i,l,p,_){super(),this.scope=p,this._options=i,this.properties=new a.a8(l),this._transitionable=new a.$(l,p,new Map(_)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(i){this._transitionable.setTransitionOrValue(this._options.properties,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(i,l){this._options=i,this._transitionable.setTransitionOrValue(i.properties,l)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let vr,Yr;class An{constructor(i,l,p,_){this.screenBounds=i,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(i,l){let p,_;if(i instanceof a.P||typeof i[0]=="number"){const x=a.P.convert(i);p=[x],_=l.isPointAboveHorizon(x)}else{const x=a.P.convert(i[0]),A=a.P.convert(i[1]);p=[x,A],_=a.ae(x,A).every(O=>l.isPointAboveHorizon(O))}return new An(p,l.getCameraPoint(),_,l)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return a.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const l=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],_=a.ae(l,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<p.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?_[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(_[3]=this.cameraPoint)),a.af(_,i)}bufferedCameraGeometryGlobe(i){const l=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],_=a.ae(l,p,i),x=this.cameraPoint.clone();switch(3*((x.y>l.y)+(x.y>p.y))+((x.x>l.x)+(x.x>p.x))){case 0:_[0]=x,_[4]=x.clone();break;case 1:_.splice(1,0,x);break;case 2:_[1]=x;break;case 3:_.splice(4,0,x);break;case 5:_.splice(2,0,x);break;case 6:_[3]=x;break;case 7:_.splice(3,0,x);break;case 8:_[2]=x}return _}containsTile(i,l,p,_=0){const x=i.queryPadding/l._pixelsPerMercatorPixel+1,A=p?this._bufferedCameraMercator(x,l):this._bufferedScreenMercator(x,l);let O=i.tileID.wrap+(A.unwrapped?_:0);const k=A.polygon.map(re=>a.ag(i.tileTransform,re,O));if(!a.ah(k,0,0,a.ab,a.ab))return;O=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const z=this.screenGeometryMercator.polygon.map(re=>a.ai(i.tileTransform,re,O)),F=z.map(re=>new a.P(re[0],re[1])),U=l.getFreeCameraOptions().position||new a.a5(0,0,0),V=a.ai(i.tileTransform,U,O),q=z.map(re=>{const oe=a.a6.vec3.sub(re,re,V);return a.a6.vec3.normalize(oe,oe),new a.aj(V,oe)}),J=a.ak(i,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:F,tilespaceRays:q,bufferedTilespaceGeometry:k,bufferedTilespaceBounds:(ee=a.al(k),ee.min.x=a.ap(ee.min.x,0,a.ab),ee.min.y=a.ap(ee.min.y,0,a.ab),ee.max.x=a.ap(ee.max.x,0,a.ab),ee.max.y=a.ap(ee.max.y,0,a.ab),ee),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:J};var ee}_bufferedScreenMercator(i,l){const p=Ai(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{let _;return _=l.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),l):{polygon:this.bufferedScreenGeometry(i).map(x=>l.pointCoordinate3D(x)),unwrapped:!0},this._screenRaycastCache[p]=_,_}}_bufferedCameraMercator(i,l){const p=Ai(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{let _;return _=l.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),l):{polygon:this.bufferedCameraGeometry(i).map(x=>l.pointCoordinate3D(x)),unwrapped:!0},this._cameraRaycastCache[p]=_,_}}_projectAndResample(i,l){const p=function(x,A){const O=a.a6.mat4.multiply([],A.pixelMatrix,A.globeMatrix),k=[0,-a.aq,0,1],z=[0,a.aq,0,1],F=[0,0,0,1];a.a6.vec4.transformMat4(k,k,O),a.a6.vec4.transformMat4(z,z,O),a.a6.vec4.transformMat4(F,F,O);const U=new a.P(k[0]/k[3],k[1]/k[3]),V=new a.P(z[0]/z[3],z[1]/z[3]),q=a.an(x,U)&&k[3]<F[3],J=a.an(x,V)&&z[3]<F[3];if(!q&&!J)return null;const ee=function(Ce,Se,Ie){for(let ze=1;ze<Ce.length;ze++){const ke=oi(Se.pointCoordinate3D(Ce[ze-1]).x),Re=oi(Se.pointCoordinate3D(Ce[ze]).x);if(Ie<0){if(ke<Re)return{idx:ze,t:-ke/(Re-1-ke)}}else if(Re<ke)return{idx:ze,t:(1-ke)/(Re+1-ke)}}return null}(x,A,q?-1:1);if(!ee)return null;const{idx:re,t:oe}=ee;let me=re>1?ei(x.slice(0,re),A):[],ye=re<x.length?ei(x.slice(re),A):[];me=me.map(Ce=>new a.P(oi(Ce.x),Ce.y)),ye=ye.map(Ce=>new a.P(oi(Ce.x),Ce.y));const de=[...me];de.length===0&&de.push(ye[ye.length-1]);const be=a.aa(de[de.length-1].y,(ye.length===0?me[0]:ye[0]).y,oe);let xe;return xe=q?[new a.P(0,be),new a.P(0,0),new a.P(1,0),new a.P(1,be)]:[new a.P(1,be),new a.P(1,1),new a.P(0,1),new a.P(0,be)],de.push(...xe),ye.length===0?de.push(me[0]):de.push(...ye),{polygon:de.map(Ce=>new a.a5(Ce.x,Ce.y)),unwrapped:!1}}(i,l);if(p)return p;const _=function(x,A){let O=!1,k=-1/0,z=0;for(let U=0;U<x.length-1;U++)x[U].x>k&&(k=x[U].x,z=U);for(let U=0;U<x.length-1;U++){const V=(z+U)%(x.length-1),q=x[V],J=x[V+1];Math.abs(q.x-J.x)>.5&&(q.x<J.x?(q.x+=1,V===0&&(x[x.length-1].x+=1)):(J.x+=1,V+1===x.length-1&&(x[0].x+=1)),O=!0)}const F=a.am(A.center.lng);return O&&F<Math.abs(F-1)&&x.forEach(U=>{U.x-=1}),{polygon:x,unwrapped:O}}(ei(i,l).map(x=>new a.P(oi(x.x),x.y)),l);return{polygon:_.polygon.map(x=>new a.a5(x.x,x.y)),unwrapped:_.unwrapped}}}function ei(d,i){return a.ao(d,l=>{const p=i.pointCoordinate3D(l);l.x=p.x,l.y=p.y},1/256)}function oi(d){return d<0?1+d%1:d%1}function Ai(d){return 100*d|0}function Ko(d,i,l,p,_){const x=function(O,k){if(O)return _(O);if(k){if(d.url&&k.tiles&&d.tiles&&delete d.tiles,k.variants){if(!Array.isArray(k.variants))return _(new Error("variants must be an array"));for(const F of k.variants){if(F==null||typeof F!="object"||F.constructor!==Object)return _(new Error("variant must be an object"));if(!Array.isArray(F.capabilities))return _(new Error("capabilities must be an array"));if(F.capabilities.length===1&&F.capabilities[0]==="meshopt"){k=a.l(k,F);break}}}const z=a.ar(a.l(k,d),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(z.vectorLayers=k.vector_layers,z.vectorLayerIds=z.vectorLayers.map(F=>F.id)),k.raster_layers&&(z.rasterLayers=k.raster_layers,z.rasterLayerIds=z.rasterLayers.map(F=>F.id)),z.tiles=i.canonicalizeTileset(z,d.url),_(null,z)}},A=function(O,k,z){if(!O)return null;if(!k&&!z)return O;z=z||O.worldview_default;const F=Object.values(O.language||{});if(F.length===0)return null;const U=Object.values(O.worldview||{});if(U.length===0)return null;const V=F.every(J=>J===k),q=U.every(J=>J===z);return V&&q?O:k in(O.language_options||{})||z in(O.worldview_options||{})?null:O.language_options&&O.worldview_options?O:null}(d.data,l,p);return A?a.q.frame(()=>x(null,A)):d.url?a.n(i.transformRequest(i.normalizeSourceURL(d.url,null,l,p),a.R.Source),x):a.q.frame(()=>{const{data:O,...k}=d;x(null,k)})}class Ya{constructor(i,l,p){this.bounds=a.as.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),p=Math.floor(a.am(this.bounds.getWest())*l),_=Math.floor(a.at(this.bounds.getNorth())*l),x=Math.ceil(a.am(this.bounds.getEast())*l),A=Math.ceil(a.at(this.bounds.getSouth())*l);return i.x>=p&&i.x<x&&i.y>=_&&i.y<A}}class Ju extends a.E{constructor(i,l,p,_){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.l(this,a.ar(l,["url","scheme","tileSize","promoteId"])),this._options=a.l({type:"vector"},l),this._collectResourceTiming=!!l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new a.au}load(i){this._loaded=!1,this.fire(new a.x("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,p=this.map._worldview;this._tileJSONRequest=Ko(this._options,this.map._requestManager,l,p,(_,x)=>{this._tileJSONRequest=null,this._loaded=!0,_?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),p&&p.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${p}`),this.fire(new a.t(_))):x&&(a.l(this,x),x.bounds&&(this.tileBounds=new Ya(x.bounds,this.minzoom,this.maxzoom)),gr(x.tiles,this.map._requestManager._customAccessToken),this.fire(new a.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.x("data",{dataType:"source",sourceDataType:"content"}))),i&&i(_)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=a.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return a.l({},this._options)}loadTile(i,l){const p=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),_=this.map._requestManager.transformRequest(p,a.R.Tile),x=this.map.style?this.map.style.getLut(this.scope):null,A={request:_,data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,lut:x?{image:x.image.clone()}:null,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(A.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",A,O.bind(this));else if(i.actor=this._tileWorkers[p]=this._tileWorkers[p]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",A,O.bind(this),void 0,!0);else{const k=a.aw.call({deduped:this._deduped},A,(z,F)=>{z||!F?O.call(this,z):(A.data={cacheControl:F.cacheControl,expires:F.expires,rawData:F.rawData.slice(0)},i.actor&&i.actor.send("loadTile",A,O.bind(this),void 0,!0))},!0);i.request={cancel:k}}function O(k,z){return delete i.request,i.aborted?l(null):k&&k.status!==404?l(k):(z&&z.resourceTiming&&(i.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&i.setExpiryData(z),i.loadVectorData(z,this.map.painter),a.ax(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i,l){i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope}),i.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ec extends a.E{constructor(i,l,p,_){super(),this.id=i,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.l({type:"raster"},l),a.l(this,a.ar(l,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new a.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Ko(this._options,this.map._requestManager,null,null,(l,p)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new a.t(l)):p&&(a.l(this,p),p.bounds&&(this.tileBounds=new Ya(p.bounds,this.minzoom,this.maxzoom)),gr(p.tiles),this.fire(new a.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.x("data",{dataType:"source",sourceDataType:"content"}))),i&&i(l)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=a.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(i){this.cancelTileJSONRequest()}serialize(){return a.l({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const p=a.q.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=a.o(this.map._requestManager.transformRequest(_,a.R.Tile),(x,A,O,k)=>(delete i.request,i.aborted?(i.state="unloaded",l(null)):x?(i.state="errored",l(x)):A?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:O,expires:k}),i.setTexture(A,this.map.painter),i.state="loaded",a.ax(this.dispatcher),void l(null)):l(null)))}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l&&l()}unloadTile(i,l){i.texture&&i.texture instanceof a.T?(i.destroy(!0),i.texture&&i.texture instanceof a.T&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),l&&l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Zl extends Ec{constructor(i,l,p,_){super(i,l,p,_),this.type="raster-array",this.maxzoom=22,this._options=a.l({type:"raster-array"},l)}triggerRepaint(i){const l=this.map.painter._terrain,p=this.map.style.getSourceCache(this.id);l&&l.enabled&&p&&l._clearRenderCacheForTile(p.id,i.tileID),this.map.triggerRepaint()}loadTile(i,l){const p=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),_=this.map._requestManager.transformRequest(p,a.R.Tile);i.requestParams=_,i.actor||(i.actor=this.dispatcher.getActor()),i.request=i.fetchHeader(void 0,(x,A,O,k)=>{if(delete i.request,i.aborted)return i.state="unloaded",l(null);if(x)return x.code===20?void 0:(i.state="errored",l(x));this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:O,expires:k}),i.state="empty",l(null)})}unloadTile(i,l){const p=i.texture;p&&p instanceof a.T?(i.destroy(!0),this.map.painter.saveTileTexture(p)):(i.destroy(),i.flushQueues(),i._isHeaderLoaded=!1,delete i._mrt,delete i.textureDescriptor),i.fbo&&(i.fbo.destroy(),delete i.fbo),delete i.request,delete i.requestParams,delete i.neighboringTiles,i.state="unloaded"}prepareTile(i,l,p){i._isHeaderLoaded&&(i.state!=="empty"&&(i.state="reloading"),i.fetchBand(l,p,(_,x)=>{if(_)return i.state="errored",this.fire(new a.t(_)),void this.triggerRepaint(i);x&&(i.setTexture(x,this.map.painter),i.state="loaded",this.triggerRepaint(i))}))}getInitialBand(i){if(!this.rasterLayers)return 0;const l=this.rasterLayers.find(({id:x})=>x===i),p=l&&l.fields,_=p&&p.bands&&p.bands;return _?_[0]:0}getTextureDescriptor(i,l,p){if(!i)return;const _=l.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!_)return;let x=null;l instanceof a.aB?x=l.paint.get("raster-array-band"):l instanceof a.aC&&(x=l.paint.get("raster-particle-array-band"));const A=x||this.getInitialBand(_);if(A!=null)if(i.textureDescriptor){if(!i.updateNeeded(_,A)||p)return Object.assign({},i.textureDescriptor,{texture:i.texture})}else this.prepareTile(i,_,A)}}const Qu={vector:Ju,raster:Ec,"raster-dem":class extends Ec{constructor(d,i,l,p){super(d,i,l,p),this.type="raster-dem",this.maxzoom=22,this._options=a.l({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(d,i){const l=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(_,x){_&&(d.state="errored",i(_)),x&&(d.dem=x,d.dem.onDeserialize(),d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0,d.state="loaded",i(null))}d.request=a.o(this.map._requestManager.transformRequest(l,a.R.Tile),(function(_,x,A,O){if(delete d.request,d.aborted)d.state="unloaded",i(null);else if(_)d.state="errored",i(_);else if(x){this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:A,expires:O});const k=ImageBitmap&&x instanceof ImageBitmap&&a.ay(),z=1-(x.width-a.az(x.width))/2;z<1||d.neighboringTiles||(d.neighboringTiles=this._getNeighboringTiles(d.tileID));const F=k?x:a.q.getImageData(x,z),U={uid:d.uid,coord:d.tileID,source:this.id,scope:this.scope,rawImageData:F,encoding:this.encoding,padding:z};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",U,p.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(d){const i=d.canonical,l=Math.pow(2,i.z),p=(i.x-1+l)%l,_=i.x===0?d.wrap-1:d.wrap,x=(i.x+1+l)%l,A=i.x+1===l?d.wrap+1:d.wrap,O={};return O[new a.aA(d.overscaledZ,_,i.z,p,i.y).key]={backfilled:!1},O[new a.aA(d.overscaledZ,A,i.z,x,i.y).key]={backfilled:!1},i.y>0&&(O[new a.aA(d.overscaledZ,_,i.z,p,i.y-1).key]={backfilled:!1},O[new a.aA(d.overscaledZ,d.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},O[new a.aA(d.overscaledZ,A,i.z,x,i.y-1).key]={backfilled:!1}),i.y+1<l&&(O[new a.aA(d.overscaledZ,_,i.z,p,i.y+1).key]={backfilled:!1},O[new a.aA(d.overscaledZ,d.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},O[new a.aA(d.overscaledZ,A,i.z,x,i.y+1).key]={backfilled:!1}),O}},"raster-array":Zl,geojson:class extends a.E{constructor(d,i,l,p){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(p),this._data=i.data,this._options=a.l({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.minzoom!==void 0&&(this.minzoom=i.minzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const _=a.ab/this.tileSize;this.workerOptions=a.l({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*_,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*_,extent:a.ab,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:a.ab,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*_,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter,dynamic:i.dynamic},i.workerOptions)}onAdd(d){this.map=d,this.setData(this._data)}setData(d){return this._data=d,this._updateWorkerData(),this}updateData(d){if(!this._options.dynamic)return this.fire(new a.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof d!="string"&&(d.type==="Feature"&&(d={type:"FeatureCollection",features:[d]}),d.type!=="FeatureCollection"))return this.fire(new a.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof d!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const i=new Map;for(const l of this._data.features)i.set(l.id,l);for(const l of d.features)i.set(l.id,l);this._data.features=[...i.values()]}else this._data=d;return this._updateWorkerData(!0),this}getClusterExpansionZoom(d,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id,scope:this.scope},i),this}getClusterChildren(d,i){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id,scope:this.scope},i),this}getClusterLeaves(d,i,l,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:d,limit:i,offset:l},p),this}_updateWorkerData(d=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.x("dataloading",{dataType:"source"})),this._loaded=!1;const i=a.l({append:d},this.workerOptions);i.scope=this.scope;const l=this._data;typeof l=="string"?(i.request=this.map._requestManager.transformRequest(a.q.resolveURL(l),a.R.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,i,(p,_)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new a.t(p));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(x.resourceTiming=_.resourceTiming[this.id]),d&&(this._partialReload=!0),this.fire(new a.x("data",x)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(d),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(d,i){const l=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const p=this.map.style?this.map.style.getLut(this.scope):null,_=this._partialReload,x={type:this.type,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:p?{image:p.image.clone()}:null,scope:this.scope,pixelRatio:a.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:_};d.request=this.actor.send(l,x,(A,O)=>_&&!O?(d.state="loaded",i(null)):(delete d.request,d.destroy(),d.aborted?i(null):A?i(A):(d.loadVectorData(O,this.map.painter,l==="reloadTile"),i(null))),void 0,l==="loadTile")}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d,i){this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id,scope:this.scope}),d.destroy()}onRemove(d){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.aD{constructor(d,i,l,p){super(d,i,l,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const i of d.urls)this.urls.push(this.map._requestManager.transformRequest(i,a.R.Source).url);a.aE(this.urls,(i,l)=>{this._loaded=!0,i?this.fire(new a.t(i)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const i=this.video.seekable;d<i.start(0)||d>i.end(0)?this.fire(new a.t(new a.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,i=d.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(d,this.video,i.RGBA8),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(d)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.aD,model:class extends a.E{constructor(d,i,l,p){super(),this.id=d,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){const d=[];for(const i in this._options.models){const l=this._options.models[i],p=a.aG(this.map._requestManager.transformRequest(l.uri,a.R.Model).url).then(_=>{if(!_)return;const x=a.aH(_),A=new a.aI(i,l.position,l.orientation,x);A.computeBoundsAndApplyParent(),this.models.push(A)}).catch(_=>{this.fire(new a.t(new Error(`Could not load model ${i} from ${l.uri}: ${_.message}`)))});d.push(p)}return Promise.allSettled(d).then(()=>{this._loaded=!0,this.fire(new a.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this.fire(new a.t(new Error(`Could not load models: ${i.message}`)))})}onAdd(d){this.map=d,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(d,i){}serialize(){return{type:"model"}}},"batched-model":class extends a.E{constructor(d,i,l,p){super(),this.type="batched-model",this.id=d,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=l,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(p)}onAdd(d){this.map=d,this.load()}load(d){this._loaded=!1,this.fire(new a.x("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,l=this.map._worldview;this._tileJSONRequest=Ko(this._options,this.map._requestManager,i,l,(p,_)=>{this._tileJSONRequest=null,this._loaded=!0,p?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),l&&l.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${l}`),this.fire(new a.t(p))):_&&(a.l(this,_),_.bounds&&(this.tileBounds=new Ya(_.bounds,this.minzoom,this.maxzoom)),gr(_.tiles,this.map._requestManager._customAccessToken),this.fire(new a.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.x("data",{dataType:"source",sourceDataType:"content"}))),d&&d(p)})}hasTransition(){return!1}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loaded(){return this._loaded}loadTile(d,i){const l=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(l,a.R.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:d.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(d.actor&&d.state!=="expired")if(d.state==="loading")d.reloadCallback=i;else{if(d.buckets){const x=Object.values(d.buckets);for(const A of x)A.dirty=!0;return void(d.state="loaded")}d.request=d.actor.send("reloadTile",p,_.bind(this))}else d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",p,_.bind(this),void 0,!0);function _(x,A){return d.aborted?i(null):x&&x.status!==404?i(x):(A&&(A.resourceTiming&&(d.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&d.setExpiryData(A),d.buckets={...d.buckets,...A.buckets},A.featureIndex&&(d.latestFeatureIndex=A.featureIndex)),d.state="loaded",void i(null))}}serialize(){return a.l({},this._options)}},canvas:class extends a.aD{constructor(d,i,l,p){super(d,i,l,p),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(x=>typeof x!="number"))||this.fire(new a.t(new a.V(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.t(new a.V(`sources.${d}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new a.t(new a.V(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new a.t(new a.V(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.t(new a.V(`sources.${d}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(d){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?!d&&!this._playing||this.texture instanceof a.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(i,this.canvas,i.gl.RGBA8,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}},custom:class extends a.E{constructor(d,i,l,p){super(),this.id=d,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ya(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),a.l(this,a.ar(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(d){this.map=d,this._loaded=!1,this.fire(new a.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(d),this.load()}onRemove(d){this._implementation.onRemove&&this._implementation.onRemove(d)}hasTile(d){if(this._implementation.hasTile){const{x:i,y:l,z:p}=d.canonical;return this._implementation.hasTile({x:i,y:l,z:p})}return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,i){const{x:l,y:p,z:_}=d.tileID.canonical,x=new AbortController;d.request=Promise.resolve(this._implementation.loadTile({x:l,y:p,z:_},{signal:x.signal})).then((function(A){return delete d.request,d.aborted?(d.state="unloaded",i(null)):A===void 0?(d.state="errored",i(null)):A===null?(this.loadTileData(d,{width:this.tileSize,height:this.tileSize,data:null}),d.state="loaded",i(null)):function(O){return O instanceof ImageData||O instanceof HTMLCanvasElement||O instanceof ImageBitmap||O instanceof HTMLImageElement}(A)?(this.loadTileData(d,A),d.state="loaded",void i(null)):(d.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(A=>{A.code!==20&&(d.state="errored",i(A))}),d.request.cancel=()=>x.abort()}loadTileData(d,i){d.setTexture(i,this.map.painter)}unloadTile(d,i){if(d.texture&&d.texture instanceof a.T?(d.destroy(!0),d.texture&&d.texture instanceof a.T&&this.map.painter.saveTileTexture(d.texture)):d.destroy(),this._implementation.unloadTile){const{x:l,y:p,z:_}=d.tileID.canonical;this._implementation.unloadTile({x:l,y:p,z:_})}i&&i()}abortTile(d,i){d.request&&d.request.cancel&&(d.request.cancel(),delete d.request),i&&i()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(d=>({x:d.canonical.x,y:d.canonical.y,z:d.canonical.z}))}_clearTiles(){const d=a.av(this.id,this.scope);this.map.style.clearSource(d)}_update(){this.fire(new a.x("data",{dataType:"source",sourceDataType:"content"}))}}},Xl=function(d,i,l,p){const _=new Qu[i.type](d,i,l,p);if(_.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${_.id}`);return a.aJ(["load","abort","unload","serialize","prepare"],_),_};function B2(d,i){const l=a.a6.mat4.identity([]);return a.a6.mat4.scale(l,l,[.5*d.width,.5*-d.height,1]),a.a6.mat4.translate(l,l,[1,-1,0]),a.a6.mat4.multiply(l,l,d.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(l)}function F2(d,i,l,p,_,x,A,O=!1){const k=d.tilesIn(p,A,O);k.sort(Yl);const z=[];for(const U of k)z.push({wrappedTileID:U.tile.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(i,l,d._state,U,_,x,B2(d.transform,U.tile.tileID),O)});const F=function(U){const V={},q={};for(const J of U){const ee=J.queryResults,re=J.wrappedTileID,oe=q[re]=q[re]||{};for(const me in ee){const ye=ee[me],de=oe[me]=oe[me]||{},be=V[me]=V[me]||[];for(const xe of ye)de[xe.featureIndex]||(de[xe.featureIndex]=!0,be.push(xe))}}return V}(z);for(const U in F)F[U].forEach(V=>{const q=V.feature,J=q.layer;J&&J.type!=="background"&&J.type!=="sky"&&J.type!=="slot"&&(q.source=J.source,J["source-layer"]&&(q.sourceLayer=J["source-layer"]),q.state=q.id!==void 0?d.getFeatureState(J["source-layer"],q.id):{})});return F}function Pc(d,i){const l=d.getRenderableIds().map(x=>d.getTileByID(x)),p=[],_={};for(let x=0;x<l.length;x++){const A=l[x],O=A.tileID.canonical.key;_[O]||(_[O]=!0,A.querySourceFeatures(p,i))}return p}function Yl(d,i){const l=d.tileID,p=i.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}const Fo=32,Jo=33,Qo=new Uint16Array(8184);for(let d=0;d<2046;d++){let i=d+2,l=0,p=0,_=0,x=0,A=0,O=0;for(1&i?_=x=A=Fo:l=p=O=Fo;(i>>=1)>1;){const z=l+_>>1,F=p+x>>1;1&i?(_=l,x=p,l=A,p=O):(l=_,p=x,_=A,x=O),A=z,O=F}const k=4*d;Qo[k+0]=l,Qo[k+1]=p,Qo[k+2]=_,Qo[k+3]=x}const io=new Uint16Array(2178),va=new Uint8Array(1089),Mc=new Uint16Array(1089);function N2(d){return d===0?-.03125:d===32?.03125:0}const j2={type:2,extent:a.ab,loadGeometry:()=>[[new a.P(0,0),new a.P(a.ab+1,0),new a.P(a.ab+1,a.ab+1),new a.P(0,a.ab+1),new a.P(0,0)]]};class xa{constructor(i,l,p,_,x){this.tileID=i,this.uid=a.aP(),this.uses=0,this.tileSize=l,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=x,_&&_.style&&(this._lastUpdatedBrightness=_.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",_&&_.transform&&(this.projection=_.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<a.q.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=a.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,p){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(_,x){const A={};if(!x)return A;for(const O of _){const k=O.layerIds.map(z=>x.getLayer(z)).filter(Boolean);if(k.length!==0){O.layers=k,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(z=>k.filter(F=>F.id===z)[0]));for(const z of k)A[z.fqid]=O}}return A}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const x=this.buckets[_];if(x instanceof a.aR){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const x=this.buckets[_];if(x instanceof a.aR&&x.hasRTLText){this.hasRTLText=!0,a.aS();break}}this.queryPadding=0;for(const _ in this.buckets){const x=this.buckets[_],A=l.style.getOwnLayer(_);if(!A)continue;const O=A.queryRadius(x);this.queryPadding=Math.max(this.queryPadding,O)}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas),this._lastUpdatedBrightness=i.brightness}else this.collisionBoxArray=new a.aQ}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.fqid]}upload(i){for(const _ in this.buckets){const x=this.buckets[_];x.uploadPending()&&x.upload(i)}const l=i.gl,p=this.imageAtlas;if(p&&!p.uploaded){const _=!!Object.keys(p.patternPositions).length;this.imageAtlasTexture=new a.T(i,p.image,l.RGBA8,{useMipmap:_}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(i,this.glyphAtlasImage,l.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new a.T(i,this.lineAtlas.image,l.R8),this.lineAtlas.uploaded=!0)}prepare(i,l,p){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture,p),!l||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const _=l.style.getBrightness();(this._lastUpdatedBrightness||_)&&(this._lastUpdatedBrightness&&_&&Math.abs(this._lastUpdatedBrightness-_)<.001||(this._lastUpdatedBrightness=_,this.updateBuckets(l)))}queryRenderedFeatures(i,l,p,_,x,A,O,k){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:_,pixelPosMatrix:O,transform:A,params:x,tileTransform:this.tileTransform},i,l,p):{}}querySourceFeatures(i,l){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),x=l?l.sourceLayer:"",A=_._geojsonTileLayer||_[x];if(!A)return;const O=a.aT(l&&l.filter),{z:k,x:z,y:F}=this.tileID.canonical,U={z:k,x:z,y:F};for(let V=0;V<A.length;V++){const q=A.feature(V);if(O.needGeometry){const re=a.aU(q,!0);if(!O.filter(new a.a3(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!O.filter(new a.a3(this.tileID.overscaledZ),q))continue;const J=p.getId(q,x),ee=new a.aV(q,k,z,F,J);ee.tile=U,i.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const p=a.aW(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(l)if(this.expirationTime<l)_=!0;else{const x=this.expirationTime-l;x?this.expirationTime=p+Math.max(x,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(i).length!==0&&l&&this.updateBuckets(l)}updateBuckets(i){if(!this.latestFeatureIndex)return;const l=this.latestFeatureIndex.loadVTLayers(),p=i.style.listImages(),_=i.style.getBrightness();for(const x in this.buckets){if(!i.style.hasLayer(x))continue;const A=this.buckets[x],O=A.layers[0].sourceLayer||"_geojsonTileLayer",k=l[O],z=i.style.getOwnSourceCache(A.layers[0].source);let F={};z&&(F=z._state.getState(O,void 0)),A.update(F,k,p,this.imageAtlas&&this.imageAtlas.patternPositions||{},_),(A instanceof a.aX||A instanceof a.aY)&&i._terrain&&i._terrain.enabled&&z&&A.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(z.id,this.tileID);const U=i&&i.style&&i.style.getOwnLayer(x);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(A)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.q.now()+i}setTexture(i,l){const p=l.context,_=p.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture&&this.texture instanceof a.T?this.texture.update(i):(this.texture=new a.T(p,i,_.RGBA8,{useMipmap:!0}),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE))}setDependencies(i,l){const p={};for(const _ of l)p[_]=!0;this.dependencies[i]=p}hasDependency(i,l){for(const p of i){const _=this.dependencies[p];if(_){for(const x of l)if(_[x])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const p=a.aZ(j2,this.tileID.canonical,this.tileTransform)[0],_=new a.a_,x=new a.a$;for(let A=0;A<p.length;A++){const{x:O,y:k}=p[A];_.emplaceBack(O,k),x.emplaceBack(A)}x.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(x),this._tileDebugBuffer=i.createVertexBuffer(_,a.b0.members),this._tileDebugSegments=a.b1.simpleSegment(0,0,_.length,x.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const p=a.aZ(j2,this.tileID.canonical,this.tileTransform)[0];let _,x;if(this.isRaster){const A=function(O,k){const z=a.aK(O,k),F=Math.pow(2,O.z);for(let re=0;re<Jo;re++)for(let oe=0;oe<Jo;oe++){const me=a.aL((O.x+(oe+N2(oe))/Fo)/F),ye=a.aM((O.y+(re+N2(re))/Fo)/F),de=k.project(me,ye),be=re*Jo+oe;io[2*be+0]=Math.round((de.x*z.scale-z.x)*a.ab),io[2*be+1]=Math.round((de.y*z.scale-z.y)*a.ab)}va.fill(0),Mc.fill(0);for(let re=2045;re>=0;re--){const oe=4*re,me=Qo[oe+0],ye=Qo[oe+1],de=Qo[oe+2],be=Qo[oe+3],xe=me+de>>1,Ce=ye+be>>1,Se=xe+Ce-ye,Ie=Ce+me-xe,ze=ye*Jo+me,ke=be*Jo+de,Re=Ce*Jo+xe,Ve=Math.hypot((io[2*ze+0]+io[2*ke+0])/2-io[2*Re+0],(io[2*ze+1]+io[2*ke+1])/2-io[2*Re+1])>=16;va[Re]=va[Re]||(Ve?1:0),re<1022&&(va[Re]=va[Re]||va[(ye+Ie>>1)*Jo+(me+Se>>1)]||va[(be+Ie>>1)*Jo+(de+Se>>1)])}const U=new a.aN,V=new a.aO;let q=0;function J(re,oe){const me=oe*Jo+re;return Mc[me]===0&&(U.emplaceBack(io[2*me+0],io[2*me+1],re*a.ab/Fo,oe*a.ab/Fo),Mc[me]=++q),Mc[me]-1}function ee(re,oe,me,ye,de,be){const xe=re+me>>1,Ce=oe+ye>>1;if(Math.abs(re-de)+Math.abs(oe-be)>1&&va[Ce*Jo+xe])ee(de,be,re,oe,xe,Ce),ee(me,ye,de,be,xe,Ce);else{const Se=J(re,oe),Ie=J(me,ye),ze=J(de,be);V.emplaceBack(Se,Ie,ze)}}return ee(0,0,Fo,Fo,Fo,0),ee(Fo,Fo,0,0,0,Fo),{vertices:U,indices:V}}(this.tileID.canonical,l);_=A.vertices,x=A.indices}else{_=new a.aN,x=new a.aO;for(const{x:O,y:k}of p)_.emplaceBack(O,k,0,0);const A=a.b2(_.int16,void 0,4);for(let O=0;O<A.length;O+=3)x.emplaceBack(A[O],A[O+1],A[O+2])}this._tileBoundsBuffer=i.createVertexBuffer(_,a.b3.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(x),this._tileBoundsSegments=a.b1.simpleSegment(0,0,_.length,x.length)}_makeGlobeTileDebugBuffers(i,l){const p=l.projection;if(!p||p.name!=="globe"||l.freezeTileCoverage)return;const _=this.tileID.canonical,x=a.b4(_,l),A=a.b5(x),O=a.a9(l.zoom);let k;O>0&&(k=a.a6.mat4.invert(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,_,l,A,k,O),this._makeGlobeTileDebugTextBuffer(i,_,l,A,k,O)}_globePoint(i,l,p,_,x,A,O){let k=a.b6(i,l,p);if(A){const z=1<<p.z,F=a.am(_.center.lng),U=a.at(_.center.lat),V=(p.x+.5)/z-F;let q=0;V>.5?q=-1:V<-.5&&(q=1);let J=(i/a.ab+p.x)/z+q,ee=(l/a.ab+p.y)/z;J=(J-F)*_._pixelsPerMercatorPixel+F,ee=(ee-U)*_._pixelsPerMercatorPixel+U;const re=[J*_.worldSize,ee*_.worldSize,0];a.a6.vec3.transformMat4(re,re,A),k=a.b7(k,re,O)}return a.a6.vec3.transformMat4(k,k,x)}_makeGlobeTileDebugBorderBuffer(i,l,p,_,x,A){const O=new a.a_,k=new a.a$,z=new a.b8,F=(V,q,J,ee,re)=>{const oe=(J-V)/(re-1),me=(ee-q)/(re-1),ye=O.length;for(let de=0;de<re;de++){const be=V+de*oe,xe=q+de*me;O.emplaceBack(be,xe);const Ce=this._globePoint(be,xe,l,p,_,x,A);z.emplaceBack(Ce[0],Ce[1],Ce[2]),k.emplaceBack(ye+de)}},U=a.ab;F(0,0,U,0,16),F(U,0,U,U,16),F(U,U,0,U,16),F(0,U,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(k),this._tileDebugBuffer=i.createVertexBuffer(O,a.b0.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(z,a.b9.members),this._tileDebugSegments=a.b1.simpleSegment(0,0,O.length,k.length)}_makeGlobeTileDebugTextBuffer(i,l,p,_,x,A){const O=a.ab/4,k=new a.a_,z=new a.aO,F=new a.b8,U=25;z.reserve(32),k.reserve(U),F.reserve(U);const V=(q,J)=>U*q+J;for(let q=0;q<U;q++){const J=q*O;for(let ee=0;ee<U;ee++){const re=ee*O;k.emplaceBack(re,J);const oe=this._globePoint(re,J,l,p,_,x,A);F.emplaceBack(oe[0],oe[1],oe[2])}}for(let q=0;q<4;q++)for(let J=0;J<4;J++){const ee=V(q,J),re=V(q,J+1),oe=V(q+1,J),me=V(q+1,J+1);z.emplaceBack(ee,re,oe),z.emplaceBack(oe,re,me)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(z),this._tileDebugTextBuffer=i.createVertexBuffer(k,a.b0.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(F,a.b9.members),this._tileDebugTextSegments=a.b1.simpleSegment(0,0,U,32)}destroy(i=!1){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!i&&this.texture&&this.texture instanceof a.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}a.ba.setPbf(a.bb);class e7 extends xa{constructor(i,l,p,_,x){super(i,l,p,_,x),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(i,l){const p=l.context,_=p.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture&&this.texture instanceof a.T?this.texture.update(i,{premultiply:!1}):this.texture=new a.T(p,i,_.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(i=16384,l){const p=this._mrt=new a.ba(30),_=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(i-1)}});return this.entireBuffer=null,this.request=a.bc(_,(x,A,O,k)=>{if(x)l(x);else try{const z=p.getHeaderLength(A);if(z>i)return void(this.request=this.fetchHeader(z,l));p.parseHeader(A),this._isHeaderLoaded=!0;let F=0;for(const U of Object.values(p.layers))F=Math.max(F,U.dataIndex[U.dataIndex.length-1].last_byte);A.byteLength>=F&&(this.entireBuffer=A),l(null,this.entireBuffer||A,O,k)}catch(z){l(z)}}),this.request}fetchBand(i,l,p){const _=this._mrt;if(!this._isHeaderLoaded||!_)return void p(new Error("Tile header is not ready"));const x=this.actor;if(!x)return void p(new Error("Can't fetch tile band without an actor"));let A;const O=(U,V)=>{A.complete(U,V),U?p(U):(this.updateTextureDescriptor(i,l),p(null,this.textureDescriptor&&this.textureDescriptor.img))},k=(U,V)=>{if(U)return p(U);const q=x.send("decodeRasterArray",{buffer:V,task:A},O,void 0,!0);this._workQueue.push(()=>{q&&q.cancel(),A.cancel()})},z=_.getLayer(i);if(!z)return void p(new Error(`Unknown sourceLayer "${i}"`));if(z.hasDataForBand(l))return this.updateTextureDescriptor(i,l),void p(null,this.textureDescriptor?this.textureDescriptor.img:null);const F=z.getDataRange([l]);if(A=_.createDecodingTask(F),!A||A.tasks.length)if(this.flushQueues(),this.entireBuffer)k(null,this.entireBuffer.slice(F.firstByte,F.lastByte+1));else{const U=Object.assign({},this.requestParams,{headers:{Range:`bytes=${F.firstByte}-${F.lastByte}`}}),V=a.bc(U,k);this._fetchQueue.push(()=>{V.cancel(),A.cancel()})}else p(null)}updateNeeded(i,l){return(!this.textureDescriptor||this.textureDescriptor.band!==l||this.textureDescriptor.layer!==i)&&this.state!=="errored"}updateTextureDescriptor(i,l){if(!this._mrt)return;const p=this._mrt.getLayer(i);if(!p||!p.hasBand(l)||!p.hasDataForBand(l))return;const{bytes:_,tileSize:x,buffer:A,offset:O,scale:k}=p.getBandView(l),z=x+2*A,F={data:_,width:z,height:z},U=this.texture;U&&U instanceof a.T&&U.update(F,{premultiply:!1}),this.textureDescriptor={layer:i,band:l,img:F,buffer:A,offset:O,tileSize:x,format:p.pixelFormat,mix:[k,256*k,65536*k,16777216*k]}}}class S6{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,p){const _=i.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const x={value:l,timeout:void 0};if(p!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},p)),this.data[_].push(x),this.order.push(_),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const p=i.wrapped().key,_=l===void 0?0:this.data[p].indexOf(l),x=this.data[p][_];return this.data[p].splice(_,1),x.timeout&&clearTimeout(x.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const p in this.data)for(const _ of this.data[p])i(_.value)||l.push(_);for(const p of l)this.remove(p.value.tileID,p)}}class W4{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,p){const _=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][_]=this.stateChanges[i][_]||{},a.l(this.stateChanges[i][_],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==_&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][_]===null){this.deletedStates[i][_]={};for(const x in this.state[i][_])p[x]||(this.deletedStates[i][_][x]=null)}else for(const x in p)this.deletedStates[i]&&this.deletedStates[i][_]&&this.deletedStates[i][_][x]===null&&delete this.deletedStates[i][_][x]}removeFeatureState(i,l,p){if(this.deletedStates[i]===null)return;const _=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&l!==void 0)this.deletedStates[i][_]!==null&&(this.deletedStates[i][_]=this.deletedStates[i][_]||{},this.deletedStates[i][_][p]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][_])for(p in this.deletedStates[i][_]={},this.stateChanges[i][_])this.deletedStates[i][_][p]=null;else this.deletedStates[i][_]=null;else this.deletedStates[i]=null}getState(i,l){const p=this.state[i]||{},_=this.stateChanges[i]||{},x=this.deletedStates[i];if(x===null)return{};if(l!==void 0){const O=String(l),k=a.l({},p[O],_[O]);if(x){const z=x[l];if(z===null)return{};for(const F in z)delete k[F]}return k}const A=a.l({},p,_);if(x)for(const O in x)delete A[O];return A}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const x={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),a.l(this.state[_][A],this.stateChanges[_][A]),x[A]=this.state[_][A];p[_]=x}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const x={};if(this.deletedStates[_]===null)for(const A in this.state[_])x[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else if(this.state[_][A])for(const O of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][O];x[A]=this.state[_][A]}p[_]=p[_]||{},a.l(p[_],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in i)i[_].setFeatureState(p,l)}}class oo extends a.E{constructor(i,l,p){super(),this.id=i,this._onlySymbols=p,l.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new S6(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new W4,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,i.isExtraShadowCaster=this._shadowCasterTiles[i.tileID.key],this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i)}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i)}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const p=this._tiles[l];p.upload(i),p.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return a.bd(this._tiles).map(i=>i.tileID).sort(As).map(i=>i.key)}getRenderableIds(i,l){const p=[];for(const _ in this._tiles)this._isIdRenderable(+_,i,l)&&p.push(this._tiles[_]);return i?p.sort((_,x)=>{const A=_.tileID,O=x.tileID,k=new a.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle),z=new a.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return A.overscaledZ-O.overscaledZ||z.y-k.y||z.x-k.x}).map(_=>_.tileID.key):p.map(_=>_.tileID).sort(As).map(_=>_.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l,p){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())&&(p||!this._shadowCasterTiles[i])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=l),this._loadTile(p,this._tileLoaded.bind(this,p,i,l)))}_tileLoaded(i,l,p,_){if(_)if(i.state="errored",_.status!==404)this._source.fire(new a.t(_,{tile:i}));else{if(this._source.fire(new a.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:i})),!(i.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const x=this.map.painter.terrain;this.update(this.transform,x.getScaledDemTileSize(),!0),x.resetTileLookupCache(this.id)}else this.update(this.transform)}else i.timeAdded=a.q.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new a.x("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let _=0;_<l.length;_++){const x=l[_];if(i.neighboringTiles&&i.neighboringTiles[x]){const A=this.getTileByID(x);p(i,A),p(A,i)}}function p(_,x){if(!_.dem||_.dem.borderReady)return;_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0;let A=x.tileID.canonical.x-_.tileID.canonical.x;const O=x.tileID.canonical.y-_.tileID.canonical.y,k=Math.pow(2,_.tileID.canonical.z),z=x.tileID.key;A===0&&O===0||Math.abs(O)>1||(Math.abs(A)>1&&(Math.abs(A+k)===1?A+=k:Math.abs(A-k)===1&&(A-=k)),x.dem&&_.dem&&(_.dem.backfillBorder(x.dem,A,O),_.neighboringTiles&&_.neighboringTiles[z]&&(_.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,p,_){for(const x in this._tiles){let A=this._tiles[x];if(_[x]||!A.hasData()||A.tileID.overscaledZ<=l||A.tileID.overscaledZ>p)continue;let O=A.tileID;for(;A&&A.tileID.overscaledZ>l+1;){const z=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[z.key],A&&A.hasData()&&(O=z)}let k=O;for(;k.overscaledZ>l;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){_[O.key]=O;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=l?p:null}for(let p=i.overscaledZ-1;p>=l;p--){const _=i.scaledTo(p),x=this._getLoadedTile(_);if(x)return x}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const p=Math.ceil(i.width/l)+1,_=Math.ceil(i.height/l)+1,x=Math.floor(p*_*5),A=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,x):x,O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,A):A;this._cache.setMaxSize(O)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const p={};for(const _ in this._tiles){const x=this._tiles[_];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),p[x.tileID.key]=x}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(+_,this._tiles[_])}}update(i,l,p,_){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const x=this._source.type==="batched-model";let A;if(this.used||this.usedForTerrain){if(this._source.tileID)A=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new a.aA(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y));else if(this.tileCoverLift!==0){const z=i.clone();z.tileCoverLift=this.tileCoverLift,A=z.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:x}),this._source.minzoom<=1&&i.projection.name==="globe"&&(A.push(new a.aA(1,0,1,0,0)),A.push(new a.aA(1,0,1,1,0)),A.push(new a.aA(1,0,1,0,1)),A.push(new a.aA(1,0,1,1,1)))}else if(A=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:x}),this._source.hasTile){const z=this._source.hasTile.bind(this._source);A=A.filter(F=>z(F))}}else A=[];if(A.length>0&&this.castsShadows&&_&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Cc(this._source.type)){const z=i.coveringZoomLevel({tileSize:l||this._source.tileSize,roundZoom:this._source.roundZoom&&!p}),F=Math.min(z,this._source.maxzoom);if(x){const U=i.extendTileCover(A,F);for(const V of U)A.push(V)}else{const U=i.extendTileCover(A,F,_);for(const V of U)this._shadowCasterTiles[V.key]=!0,A.push(V)}}const O=this._updateRetainedTiles(A);if(Cc(this._source.type)&&A.length!==0){const z={},F={},U=Object.keys(O);for(const q of U){const J=O[q],ee=this._tiles[q];if(!ee||ee.fadeEndTime&&ee.fadeEndTime<=a.q.now())continue;const re=this.findLoadedParent(J,Math.max(J.overscaledZ-oo.maxOverzooming,this._source.minzoom));re&&(this._addTile(re.tileID),z[re.tileID.key]=re.tileID),F[q]=J}const V=A[A.length-1].overscaledZ;for(const q in this._tiles){const J=this._tiles[q];if(O[q]||!J.hasData())continue;let ee=J.tileID;for(;ee.overscaledZ>V;){ee=ee.scaledTo(ee.overscaledZ-1);const re=this._tiles[ee.key];if(re&&re.hasData()&&F[ee.key]){O[q]=J.tileID;break}}}for(const q in z)O[q]||(this._coveredTiles[q]=!0,O[q]=z[q])}for(const z in O)this._tiles[z].clearFadeHold();const k=a.be(this._tiles,O);for(const z of k){const F=this._tiles[z];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(+z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const p={},_=i.reduce((z,F)=>Math.min(z,F.overscaledZ),1/0),x=i[0].overscaledZ,A=Math.max(x-oo.maxOverzooming,this._source.minzoom),O=Math.max(x+oo.maxUnderzooming,this._source.minzoom),k={};for(const z of i){const F=this._addTile(z);l[z.key]=z,F.hasData()||_<this._source.maxzoom&&(k[z.key]=z)}this._retainLoadedChildren(k,_,O,l);for(const z of i){let F=this._tiles[z.key];if(F.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const V=z.children(this._source.maxzoom)[0],q=this.getTile(V);if(q&&q.hasData()){l[V.key]=V;continue}}else{const V=z.children(this._source.maxzoom);if(l[V[0].key]&&l[V[1].key]&&l[V[2].key]&&l[V[3].key])continue}let U=F.wasRequested();for(let V=z.overscaledZ-1;V>=A;--V){const q=z.scaledTo(V);if(p[q.key]||(p[q.key]=!0,F=this.getTile(q),!F&&U&&(F=this._addTile(q)),F&&(l[q.key]=q,U=F.wasRequested(),F.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let p,_=this._tiles[i].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){p=this._loadedParentTiles[_.key];break}l.push(_.key);const x=_.scaledTo(_.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;_=x}for(const x of l)this._loadedParentTiles[x]=p}}_addTile(i){let l=this._tiles[i.key];if(l)return l.isExtraShadowCaster!==!0||this._shadowCasterTiles[i.key]||this._reloadTile(i.key,"reloading"),l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const p=!!l;if(!p){const _=this.map?this.map.painter:null,x=this._source.tileSize*i.overscaleFactor();l=this._source.type==="raster-array"?new e7(i,x,this.transform.tileZoom,_,this._isRaster):new xa(i,x,this.transform.tileZoom,_,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,p||this._source.fire(new a.x("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=l.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"||l.state==="empty"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,p){const _=[],x=this.transform;if(!x)return _;const A=x.projection.name==="globe",O=a.am(x.center.lng);for(const k in this._tiles){const z=this._tiles[k];if(p&&z.clearQueryDebugViz(),z.holdingForFade())continue;let F;if(A){const U=z.tileID.canonical;if(U.z===0){const V=[Math.abs(a.ap(O,...Kl(U,-1))-O),Math.abs(a.ap(O,...Kl(U,1))-O)];F=[0,2*V.indexOf(Math.min(...V))-1]}else{const V=[Math.abs(a.ap(O,...Kl(U,-1))-O),Math.abs(a.ap(O,...Kl(U,0))-O),Math.abs(a.ap(O,...Kl(U,1))-O)];F=[V.indexOf(Math.min(...V))-1]}}else F=[0];for(const U of F){const V=i.containsTile(z,x,l,U);V&&_.push(V)}}return _}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(i){return this._getRenderableCoordinates(i)}_getRenderableCoordinates(i,l){const p=this.getRenderableIds(i,l).map(x=>this._tiles[x].tileID),_=this.transform.projection.name==="globe";for(const x of p)x.projMatrix=this.transform.calculateProjMatrix(x.toUnwrapped()),x.expandedProjMatrix=_?this.transform.calculateProjMatrix(x.toUnwrapped(),!1,!0):x.projMatrix;return p}sortCoordinatesByDistance(i){const l=i.slice(),p=this.transform._camera.position,_=this.transform._camera.forward(),x={};for(const A of l){const O=1/(1<<A.canonical.z);x[A.key]=((A.canonical.x+.5)*O+A.wrap-p[0])*_[0]+((A.canonical.y+.5)*O-p[1])*_[1]-p[2]*_[2]}return l.sort((A,O)=>x[A.key]-x[O.key]),l}hasTransition(){if(this._source.hasTransition())return!0;if(Cc(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=a.q.now())return!0}return!1}setFeatureState(i,l,p){this._state.updateState(i=i||"_geojsonTileLayer",l,p)}removeFeatureState(i,l,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,p)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,p){const _=this._tiles[i];_&&_.setDependencies(l,p)}reloadTilesForDependencies(i,l){for(const p in this._tiles)this._tiles[p].hasDependency(i,l)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(i,l))}_preloadTiles(i,l){if(!this._sourceLoaded){const k=()=>{this._sourceLoaded&&(this._source.off("data",k),this._preloadTiles(i,l))};return void this._source.on("data",k)}const p=new Map,_=Array.isArray(i)?i:[i],x=this.map.painter.terrain,A=this.usedForTerrain&&x?x.getScaledDemTileSize():this._source.tileSize;for(const k of _){const z=k.coveringTiles({tileSize:A,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const F of z)p.set(F.key,F);this.usedForTerrain&&k.updateElevation(!1)}const O=Array.from(p.values());a.bf(O,(k,z)=>{const F=new xa(k,this._source.tileSize*k.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(F,U=>{this._source.type==="raster-dem"&&F.dem&&this._backfillDEM(F),z(U,F)})},l)}}function As(d,i){const l=Math.abs(2*d.wrap)-+(d.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return d.overscaledZ-i.overscaledZ||p-l||i.canonical.y-d.canonical.y||i.canonical.x-d.canonical.x}function Cc(d){return d==="raster"||d==="image"||d==="video"||d==="custom"}function Kl(d,i){const l=1<<d.z;return[d.x/l+i,(d.x+1)/l+i]}oo.maxOverzooming=10,oo.maxUnderzooming=3;class $2{constructor(i){this.style=i,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const i=!1,l=!1;for(const p in this.style._mergedLayers){const _=this.style._mergedLayers[p];if(_.type==="fill-extrusion")this.layers.push({layer:_,visible:i,visibilityChanged:l});else if(_.type==="model"){const x=this.style.getLayerSource(_);x&&x.type==="batched-model"&&this.layers.push({layer:_,visible:i,visibilityChanged:l})}}}onNewFrame(i){this.layersGotHidden=!1;for(const l of this.layers){const p=l.layer;let _=!1;p.type==="fill-extrusion"?_=!p.isHidden(i)&&p.paint.get("fill-extrusion-opacity")>0:p.type==="model"&&(_=!p.isHidden(i)&&p.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!_&&l.visible,l.visible=_}}updateZOffset(i,l){this.currentBuildingBuckets=[];for(const _ of this.layers){const x=_.layer,A=this.style.getLayerSourceCache(x);let O=1;x.type==="fill-extrusion"&&(O=_.visible?x.paint.get("fill-extrusion-vertical-scale"):0);let k=A?A.getTile(l):null;if(!k&&A&&l.canonical.z>A.getSource().minzoom){let z=l.scaledTo(Math.min(A.getSource().maxzoom,l.overscaledZ-1));for(;z.overscaledZ>=A.getSource().minzoom&&(k=A.getTile(z),!k&&z.overscaledZ!==0);)z=z.scaledTo(z.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:k?k.getBucket(x):null,tileID:k?k.tileID:l,verticalScale:O})}i.hasAnyZOffset=!1;let p=!1;for(let _=0;_<i.symbolInstances.length;_++){const x=i.symbolInstances.get(_),A=x.zOffset,O=this._getHeightAtTileOffset(l,x.tileAnchorX,x.tileAnchorY);x.zOffset=O!==Number.NEGATIVE_INFINITY?O:A,p||A===x.zOffset||(p=!0),i.hasAnyZOffset||x.zOffset===0||(i.hasAnyZOffset=!0)}p&&(i.zOffsetBuffersNeedUpload=!0,i.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,l,p,_){let x=l,A=p;if(i.canonical.z!==_.canonical.z){const O=_.canonical,k=1/(1<<i.canonical.z-O.z);x=(l+i.canonical.x*a.ab)*k-O.x*a.ab|0,A=(p+i.canonical.y*a.ab)*k-O.y*a.ab|0}return{tileX:x,tileY:A}}_getHeightAtTileOffset(i,l,p){let _,x;for(let A=0;A<this.layers.length;++A){if(this.layers[A].layer.type!=="fill-extrusion")continue;const{bucket:O,tileID:k,verticalScale:z}=this.currentBuildingBuckets[A];if(!O)continue;const{tileX:F,tileY:U}=this._mapCoordToOverlappingTile(i,l,p,k),V=O.getHeightAtTileCoord(F,U);V&&V.height!==void 0&&(V.hidden?_=V.height:x=Math.max(V.height*z,x||0))}if(x!==void 0)return x;for(let A=0;A<this.layers.length;++A){const O=this.layers[A];if(O.layer.type!=="model"||!O.visible)continue;const{bucket:k,tileID:z}=this.currentBuildingBuckets[A];if(!k)continue;const{tileX:F,tileY:U}=this._mapCoordToOverlappingTile(i,l,p,z),V=k.getHeightAtTileCoord(F,U);if(V&&!V.hidden)return V.height===void 0&&_!==void 0?Math.min(V.maxHeight,_)*V.verticalScale:V.height?V.height*V.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Jl(d,i){const l={};for(const p in d)p!=="ref"&&(l[p]=d[p]);return a.bg.forEach(p=>{p in i&&(l[p]=i[p])}),l}function U2(d){d=d.slice();const i=Object.create(null);for(let l=0;l<d.length;l++)i[d[l].id]=d[l];for(let l=0;l<d.length;l++)"ref"in d[l]&&(d[l]=Jl(d[l],i[d[l].ref]));return d}const Fr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function V2(d,i,l){l.push({command:Fr.addSource,args:[d,i[d]]})}function qr(d,i,l){i.push({command:Fr.removeSource,args:[d]}),l[d]=!0}function H4(d,i,l,p){qr(d,l,p),V2(d,i,l)}function nr(d,i,l){let p;for(p in d[l])if(d[l].hasOwnProperty(p)&&p!=="data"&&!a.bh(d[l][p],i[l][p]))return!1;for(p in i[l])if(i[l].hasOwnProperty(p)&&p!=="data"&&!a.bh(d[l][p],i[l][p]))return!1;return!0}function Ic(d,i,l,p,_,x){let A;for(A in i=i||{},d=d||{})d.hasOwnProperty(A)&&(a.bh(d[A],i[A])||l.push({command:x,args:[p,A,i[A],_]}));for(A in i)i.hasOwnProperty(A)&&!d.hasOwnProperty(A)&&(a.bh(d[A],i[A])||l.push({command:x,args:[p,A,i[A],_]}))}function tl(d){return d.id}function Ql(d,i){return d[i.id]=i,d}class ba{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ap(i,0,1);let l=1,p=this._distances[l];const _=i*this.paddedLength+this.padding;for(;p<_&&l<this._distances.length;)p=this._distances[++l];const x=l-1,A=this._distances[x],O=p-A,k=O>0?(_-A)/O:0;return this.points[x].mult(1-k).add(this.points[l].mult(k))}}class t7{constructor(i,l,p){const _=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(l/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,p,_,x){this._forEachCell(l,p,_,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(x)}insertCircle(i,l,p,_){this._forEachCell(l-_,p-_,l+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(p),this.circles.push(_)}_insertBoxCell(i,l,p,_,x,A){this.boxCells[x].push(A)}_insertCircleCell(i,l,p,_,x,A){this.circleCells[x].push(A)}_query(i,l,p,_,x,A){if(p<0||i>this.width||_<0||l>this.height)return!x&&[];const O=[];if(i<=0&&l<=0&&this.width<=p&&this.height<=_){if(x)return!0;for(let k=0;k<this.boxKeys.length;k++)O.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const z=this.circles[3*k],F=this.circles[3*k+1],U=this.circles[3*k+2];O.push({key:this.circleKeys[k],x1:z-U,y1:F-U,x2:z+U,y2:F+U})}return A?O.filter(A):O}return this._forEachCell(i,l,p,_,this._queryCell,O,{hitTest:x,seenUids:{box:{},circle:{}}},A),x?O.length>0:O}_queryCircle(i,l,p,_,x){const A=i-p,O=i+p,k=l-p,z=l+p;if(O<0||A>this.width||z<0||k>this.height)return!_&&[];const F=[];return this._forEachCell(A,k,O,z,this._queryCellCircle,F,{hitTest:_,circle:{x:i,y:l,radius:p},seenUids:{box:{},circle:{}}},x),_?F.length>0:F}query(i,l,p,_,x){return this._query(i,l,p,_,!1,x)}hitTest(i,l,p,_,x){return this._query(i,l,p,_,!0,x)}hitTestCircle(i,l,p,_){return this._queryCircle(i,l,p,!0,_)}_queryCell(i,l,p,_,x,A,O,k){const z=O.seenUids,F=this.boxCells[x];if(F!==null){const V=this.bboxes;for(const q of F)if(!z.box[q]){z.box[q]=!0;const J=4*q;if(i<=V[J+2]&&l<=V[J+3]&&p>=V[J+0]&&_>=V[J+1]&&(!k||k(this.boxKeys[q]))){if(O.hitTest)return A.push(!0),!0;A.push({key:this.boxKeys[q],x1:V[J],y1:V[J+1],x2:V[J+2],y2:V[J+3]})}}}const U=this.circleCells[x];if(U!==null){const V=this.circles;for(const q of U)if(!z.circle[q]){z.circle[q]=!0;const J=3*q;if(this._circleAndRectCollide(V[J],V[J+1],V[J+2],i,l,p,_)&&(!k||k(this.circleKeys[q]))){if(O.hitTest)return A.push(!0),!0;{const ee=V[J],re=V[J+1],oe=V[J+2];A.push({key:this.circleKeys[q],x1:ee-oe,y1:re-oe,x2:ee+oe,y2:re+oe})}}}}}_queryCellCircle(i,l,p,_,x,A,O,k){const z=O.circle,F=O.seenUids,U=this.boxCells[x];if(U!==null){const q=this.bboxes;for(const J of U)if(!F.box[J]){F.box[J]=!0;const ee=4*J;if(this._circleAndRectCollide(z.x,z.y,z.radius,q[ee+0],q[ee+1],q[ee+2],q[ee+3])&&(!k||k(this.boxKeys[J])))return A.push(!0),!0}}const V=this.circleCells[x];if(V!==null){const q=this.circles;for(const J of V)if(!F.circle[J]){F.circle[J]=!0;const ee=3*J;if(this._circlesCollide(q[ee],q[ee+1],q[ee+2],z.x,z.y,z.radius)&&(!k||k(this.circleKeys[J])))return A.push(!0),!0}}}_forEachCell(i,l,p,_,x,A,O,k){const z=this._convertToXCellCoord(i),F=this._convertToYCellCoord(l),U=this._convertToXCellCoord(p),V=this._convertToYCellCoord(_);for(let q=z;q<=U;q++)for(let J=F;J<=V;J++)if(x.call(this,i,l,p,_,this.xCellCount*J+q,A,O,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,p,_,x,A){const O=_-i,k=x-l,z=p+A;return z*z>O*O+k*k}_circleAndRectCollide(i,l,p,_,x,A,O){const k=(A-_)/2,z=Math.abs(i-(_+k));if(z>k+p)return!1;const F=(O-x)/2,U=Math.abs(l-(x+F));if(U>F+p)return!1;if(z<=k||U<=F)return!0;const V=z-k,q=U-F;return V*V+q*q<=p*p}}const ea={unknown:0,flipRequired:1,flipNotRequired:2},Vt=Math.tan(85*Math.PI/180);function Ir(d,i,l,p,_,x,A){const O=a.a6.mat4.create();if(l)if(x.name==="globe"){const k=a.bi(_,i);a.a6.mat4.multiply(O,O,k)}else{const k=a.a6.mat2.invert([],A);O[0]=k[0],O[1]=k[1],O[4]=k[2],O[5]=k[3],p||a.a6.mat4.rotateZ(O,O,_.angle)}else a.a6.mat4.multiply(O,_.labelPlaneMatrix,d);return O}function Or(d,i,l,p,_,x,A){const O=Ir(d,i,l,p,_,x,A);return x.name==="globe"&&l||(O[2]=O[6]=O[10]=O[14]=0),O}function ao(d,i,l,p,_,x,A){if(l){if(x.name==="globe"){const O=Ir(d,i,l,p,_,x,A);return a.a6.mat4.invert(O,O),a.a6.mat4.multiply(O,d,O),O}{const O=a.a6.mat4.clone(d),k=a.a6.mat4.identity([]);return k[0]=A[0],k[1]=A[1],k[4]=A[2],k[5]=A[3],a.a6.mat4.multiply(O,O,k),p||a.a6.mat4.rotateZ(O,O,-_.angle),O}}return _.glCoordMatrix}function Bi(d,i,l,p){const _=[d,i,l,1];l?a.a6.vec4.transformMat4(_,_,p):n7(_,_,p);const x=_[3];return _[0]/=x,_[1]/=x,_[2]/=x,_}function Lr(d,i){return Math.min(.5+d/i*.5,1.5)}function r7(d,i){const l=d[0]/d[3],p=d[1]/d[3];return l>=-i[0]&&l<=i[0]&&p>=-i[1]&&p<=i[1]}function e1(d,i,l,p,_,x,A,O,k,z){const F=l.transform,U=p?d.textSizeData:d.iconSizeData,V=a.bj(U,l.transform.zoom),q=F.projection.name==="globe",J=[256/l.width*2+1,256/l.height*2+1],ee=p?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;ee.clear();let re=null;q&&(re=p?d.text.globeExtVertexArray:d.icon.globeExtVertexArray);const oe=d.lineVertexArray,me=p?d.text.placedSymbolArray:d.icon.placedSymbolArray,ye=l.transform.width/l.transform.height;let de,be=!1;for(let xe=0;xe<me.length;xe++){const Ce=me.get(xe),{numGlyphs:Se,writingMode:Ie}=Ce;if(Ie!==a.bk.vertical||be||de===a.bk.horizontal||(be=!0),de=Ie,(Ce.hidden||Ie===a.bk.vertical)&&!be){wa(Se,ee);continue}be=!1;const ze=new a.P(Ce.tileAnchorX,Ce.tileAnchorY);let{x:ke,y:Re,z:Ve}=F.projection.projectTilePoint(ze.x,ze.y,z.canonical);if(k){const[ft,gt,Yt]=k(ze);ke+=ft,Re+=gt,Ve+=Yt}const nt=[ke,Re,Ve,1];if(a.a6.vec4.transformMat4(nt,nt,i),!r7(nt,J)){wa(Se,ee);continue}const dt=nt[3],rt=Lr(l.transform.getCameraToCenterDistance(F.projection),dt),xt=a.bl(U,V,Ce),Ge=A?xt/rt:xt*rt,ct=Bi(ke,Re,Ve,_);if(ct[3]<=0){wa(Se,ee);continue}let at={};const wt=A?null:k,Tt=zn(Ce,Ge,!1,O,i,_,x,d.glyphOffsetArray,oe,ee,re,ct,ze,at,ye,wt,F.projection,z,A);be=Tt.useVertical,wt&&Tt.needsFlipping&&(at={}),(Tt.notEnoughRoom||be||Tt.needsFlipping&&zn(Ce,Ge,!0,O,i,_,x,d.glyphOffsetArray,oe,ee,re,ct,ze,at,ye,wt,F.projection,z,A).notEnoughRoom)&&wa(Se,ee)}p?(d.text.dynamicLayoutVertexBuffer.updateData(ee),re&&d.text.globeExtVertexBuffer&&d.text.globeExtVertexBuffer.updateData(re)):(d.icon.dynamicLayoutVertexBuffer.updateData(ee),re&&d.icon.globeExtVertexBuffer&&d.icon.globeExtVertexBuffer.updateData(re))}function t1(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee){const{lineStartIndex:re,glyphStartIndex:oe,segment:me}=O,ye=oe+O.numGlyphs,de=re+O.lineLength,be=i.getoffsetX(oe),xe=i.getoffsetX(ye-1),Ce=n1(d*be,l,p,_,x,A,me,re,de,k,z,F,U,V,!0,q,J,ee);if(!Ce)return null;const Se=n1(d*xe,l,p,_,x,A,me,re,de,k,z,F,U,V,!0,q,J,ee);return Se?{first:Ce,last:Se}:null}function Hi(d,i,l,p){return d===a.bk.horizontal&&Math.abs(p)>Math.abs(l)?{useVertical:!0}:d===a.bk.vertical?p>0?{needsFlipping:!0}:null:i!==ea.unknown&&function(_,x){return _===0||Math.abs(x/_)>Vt}(l,p)?i===ea.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null}function zn(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe,me){const ye=i/24,de=d.lineOffsetX*ye,be=d.lineOffsetY*ye,{lineStartIndex:xe,glyphStartIndex:Ce,numGlyphs:Se,segment:Ie,writingMode:ze,flipState:ke}=d,Re=xe+d.lineLength,Ve=nt=>{if(F){const[Ge,ct,at]=nt.up,wt=z.length;a.bm(F,wt+0,Ge,ct,at),a.bm(F,wt+1,Ge,ct,at),a.bm(F,wt+2,Ge,ct,at),a.bm(F,wt+3,Ge,ct,at)}const[dt,rt,xt]=nt.point;a.bn(z,dt,rt,xt,nt.angle)};if(Se>1){const nt=t1(ye,O,de,be,l,U,V,d,k,x,q,ee,!1,re,oe,me);if(!nt)return{notEnoughRoom:!0};if(p&&!l){let[dt,rt,xt]=nt.first.point,[Ge,ct,at]=nt.last.point;[dt,rt]=Bi(dt,rt,xt,A),[Ge,ct]=Bi(Ge,ct,at,A);const wt=Hi(ze,ke,(Ge-dt)*J,ct-rt);if(d.flipState=wt&&wt.needsFlipping?ea.flipRequired:ea.flipNotRequired,wt)return wt}Ve(nt.first);for(let dt=Ce+1;dt<Ce+Se-1;dt++){const rt=n1(ye*O.getoffsetX(dt),de,be,l,U,V,Ie,xe,Re,k,x,q,ee,!1,!1,re,oe,me);if(!rt)return z.length-=4*(dt-Ce),{notEnoughRoom:!0};Ve(rt)}Ve(nt.last)}else{if(p&&!l){const dt=Bi(V.x,V.y,0,_),rt=xe+Ie+1,xt=new a.P(k.getx(rt),k.gety(rt)),Ge=Bi(xt.x,xt.y,0,_),ct=Ge[3]>0?Ge:r1(V,xt,dt,1,_,void 0,re,oe.canonical),at=Hi(ze,ke,(ct[0]-dt[0])*J,ct[1]-dt[1]);if(d.flipState=at&&at.needsFlipping?ea.flipRequired:ea.flipNotRequired,at)return at}const nt=n1(ye*O.getoffsetX(Ce),de,be,l,U,V,Ie,xe,Re,k,x,q,ee,!1,!1,re,oe,me);if(!nt)return{notEnoughRoom:!0};Ve(nt)}return{}}function E6(d,i,l,p,_){const{x,y:A,z:O}=p.projectTilePoint(d.x,d.y,i);if(!_)return Bi(x,A,O,l);const[k,z,F]=_(d);return Bi(x+k,A+z,O+F,l)}function r1(d,i,l,p,_,x,A,O){const k=E6(d.sub(i)._unit()._add(d),O,_,A,x);return a.a6.vec3.sub(k,l,k),a.a6.vec3.normalize(k,k),a.a6.vec3.scaleAndAdd(k,l,k,p)}function n1(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe){const me=p?d-i:d+i;let ye=me>0?1:-1,de=0;p&&(ye*=-1,de=Math.PI),ye<0&&(de+=Math.PI);let be=O+A+(ye>0?0:1)|0,xe=_,Ce=_,Se=0,Ie=0;const ze=Math.abs(me),ke=[],Re=[];let Ve=x,nt=Ve;const dt=()=>r1(nt,Ve,Ce,ze-Se+1,F,V,ee,re.canonical);for(;Se+Ie<=ze;){if(be+=ye,be<O||be>=k)return null;if(Ce=xe,nt=Ve,ke.push(Ce),q&&Re.push(nt),Ve=new a.P(z.getx(be),z.gety(be)),xe=U[be],!xe){const gt=E6(Ve,re.canonical,F,ee,V);xe=gt[3]>0?U[be]=gt:dt()}Se+=Ie,Ie=a.a6.vec3.distance(Ce,xe)}J&&V&&(U[be]&&(xe=dt(),Ie=a.a6.vec3.distance(Ce,xe)),U[be]=xe);const rt=(ze-Se)/Ie,xt=Ve.sub(nt)._mult(rt)._add(nt),Ge=a.a6.vec3.sub([],xe,Ce),ct=a.a6.vec3.scaleAndAdd([],Ce,Ge,rt);let at=[0,0,1],wt=Ge[0],Tt=Ge[1];if(oe&&(at=ee.upVector(re.canonical,xt.x,xt.y),at[0]!==0||at[1]!==0||at[2]!==1)){const gt=[at[2],0,-at[0]],Yt=a.a6.vec3.cross([],at,gt);a.a6.vec3.normalize(gt,gt),a.a6.vec3.normalize(Yt,Yt),wt=a.a6.vec3.dot(Ge,gt),Tt=a.a6.vec3.dot(Ge,Yt)}if(l){const gt=a.a6.vec3.cross([],at,Ge);a.a6.vec3.normalize(gt,gt),a.a6.vec3.scaleAndAdd(ct,ct,gt,l*ye)}const ft=de+Math.atan2(Tt,wt);return ke.push(ct),q&&Re.push(xt),{point:ct,angle:ft,path:ke,tilePath:Re,up:at}}function wa(d,i){const l=i.length,p=l+4*d;i.resize(p),i.float32.fill(-1/0,4*l,4*p)}function n7(d,i,l){const p=i[0],_=i[1];return d[0]=l[0]*p+l[4]*_+l[12],d[1]=l[1]*p+l[5]*_+l[13],d[3]=l[3]*p+l[7]*_+l[15],d}const xo=100;class Fi{constructor(i,l,p=new t7(i.width+200,i.height+200,25),_=new t7(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=_,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+xo,this.screenBottomBoundary=i.height+xo,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=l}placeCollisionBox(i,l,p,_,x,A,O,k){let z=p.projectedAnchorX,F=p.projectedAnchorY,U=p.projectedAnchorZ;const V=p.elevation,q=p.tileID,J=i.getProjection();if(V&&q){const[xe,Ce,Se]=J.upVector(q.canonical,p.tileAnchorX,p.tileAnchorY),Ie=J.upVectorScale(q.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=xe*V*Ie,F+=Ce*V*Ie,U+=Se*V*Ie}const ee=this.projectAndGetPerspectiveRatio(O,z,F,U,p.tileID,J.name==="globe"||!!V||this.transform.pitch>0,J),re=A*ee.perspectiveRatio,oe=(p.x1*l+_.x-p.padding)*re+ee.point.x,me=(p.y1*l+_.y-p.padding)*re+ee.point.y,ye=(p.x2*l+_.x+p.padding)*re+ee.point.x,de=(p.y2*l+_.y+p.padding)*re+ee.point.y,be=ee.perspectiveRatio<=.55||ee.occluded;return!this.isInsideGrid(oe,me,ye,de)||!x&&this.grid.hitTest(oe,me,ye,de,k)||be?{box:[],offscreen:!1,occluded:ee.occluded}:{box:[oe,me,ye,de],offscreen:this.isOffscreen(oe,me,ye,de),occluded:!1}}placeCollisionCircles(i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee){const re=[],oe=this.transform.elevation,me=i.getProjection(),ye=oe?oe.getAtTileOffsetFunc(ee,this.transform.center.lat,this.transform.worldSize,me):null,de=new a.P(p.tileAnchorX,p.tileAnchorY);let{x:be,y:xe,z:Ce}=me.projectTilePoint(de.x,de.y,ee.canonical);if(ye){const[xt,Ge,ct]=ye(de);be+=xt,xe+=Ge,Ce+=ct}const Se=me.name==="globe",Ie=this.projectAndGetPerspectiveRatio(O,be,xe,Ce,ee,Se||!!oe||this.transform.pitch>0,me),{perspectiveRatio:ze}=Ie,ke=(U?A/ze:A*ze)/a.bq,Re=Bi(be,xe,Ce,k),Ve=Ie.signedDistanceFromCamera>0?t1(ke,x,p.lineOffsetX*ke,p.lineOffsetY*ke,!1,Re,de,p,_,k,{},oe&&!U?ye:null,U&&!!oe,me,ee,U):null;let nt=!1,dt=!1,rt=!0;if(Ve&&!Ie.occluded){const xt=.5*q*ze+J,Ge=new a.P(-100,-100),ct=new a.P(this.screenRightBoundary,this.screenBottomBoundary),at=new ba,{first:wt,last:Tt}=Ve,ft=wt.path.length;let gt=[];for(let jt=ft-1;jt>=1;jt--)gt.push(wt.path[jt]);for(let jt=1;jt<Tt.path.length;jt++)gt.push(Tt.path[jt]);const Yt=2.5*xt;z&&(gt=gt.map(([jt,ir,Wt],tr)=>(ye&&!Se&&(Wt=ye(tr<ft-1?wt.tilePath[ft-1-tr]:Tt.tilePath[tr-ft+2])[2]),Bi(jt,ir,Wt,z))),gt.some(jt=>jt[3]<=0)&&(gt=[]));let It=[];if(gt.length>0){let jt=1/0,ir=-1/0,Wt=1/0,tr=-1/0;for(const Tr of gt)jt=Math.min(jt,Tr[0]),Wt=Math.min(Wt,Tr[1]),ir=Math.max(ir,Tr[0]),tr=Math.max(tr,Tr[1]);ir>=Ge.x&&jt<=ct.x&&tr>=Ge.y&&Wt<=ct.y&&(It=[gt.map(Tr=>new a.P(Tr[0],Tr[1]))],(jt<Ge.x||ir>ct.x||Wt<Ge.y||tr>ct.y)&&(It=a.bo(It,Ge.x,Ge.y,ct.x,ct.y)))}for(const jt of It){at.reset(jt,.25*xt);let ir=0;ir=at.length<=.5*xt?1:Math.ceil(at.paddedLength/Yt)+1;for(let Wt=0;Wt<ir;Wt++){const tr=Wt/Math.max(ir-1,1),Tr=at.lerp(tr),xr=Tr.x+xo,Kr=Tr.y+xo;re.push(xr,Kr,xt,0);const nn=xr-xt,pn=Kr-xt,No=xr+xt,$n=Kr+xt;if(rt=rt&&this.isOffscreen(nn,pn,No,$n),dt=dt||this.isInsideGrid(nn,pn,No,$n),!l&&this.grid.hitTestCircle(xr,Kr,xt,V)&&(nt=!0,!F))return{circles:[],offscreen:!1,collisionDetected:nt,occluded:!1}}}}return{circles:!F&&nt||!dt?[]:re,offscreen:rt,collisionDetected:nt,occluded:Ie.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let p=1/0,_=1/0,x=-1/0,A=-1/0;for(const F of i){const U=new a.P(F.x+xo,F.y+xo);p=Math.min(p,U.x),_=Math.min(_,U.y),x=Math.max(x,U.x),A=Math.max(A,U.y),l.push(U)}const O=this.grid.query(p,_,x,A).concat(this.ignoredGrid.query(p,_,x,A)),k={},z={};for(const F of O){const U=F.key;if(k[U.bucketInstanceId]===void 0&&(k[U.bucketInstanceId]={}),k[U.bucketInstanceId][U.featureIndex])continue;const V=[new a.P(F.x1,F.y1),new a.P(F.x2,F.y1),new a.P(F.x2,F.y2),new a.P(F.x1,F.y2)];a.bp(l,V)&&(k[U.bucketInstanceId][U.featureIndex]=!0,z[U.bucketInstanceId]===void 0&&(z[U.bucketInstanceId]=[]),z[U.bucketInstanceId].push(U.featureIndex))}return z}insertCollisionBox(i,l,p,_,x){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:_,collisionGroupID:x},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,p,_,x){const A=l?this.ignoredGrid:this.grid,O={bucketInstanceId:p,featureIndex:_,collisionGroupID:x};for(let k=0;k<i.length;k+=4)A.insertCircle(O,i[k],i[k+1],i[k+2])}projectAndGetPerspectiveRatio(i,l,p,_,x,A,O){const k=[l,p,_,1];let z=!1;_||this.transform.pitch>0?(a.a6.vec4.transformMat4(k,k,i),this.fogState&&x&&O.name!=="globe"&&(z=function(V,q,J,ee,re,oe){const me=oe.calculateFogTileMatrix(re),ye=[q,J,ee];return a.a6.vec3.transformMat4(ye,ye,me),Ft(V,a.a6.vec3.length(ye),oe.pitch,oe._fov)}(this.fogState,l,p,_,x.toUnwrapped(),this.transform)>.9)):n7(k,k,i);const F=k[3];return{point:new a.P((k[0]/F+1)/2*this.transform.width+xo,(-k[1]/F+1)/2*this.transform.height+xo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/F*.5,1.5),signedDistanceFromCamera:F,occluded:A&&k[2]>F||z}}isOffscreen(i,l,p,_){return p<xo||i>=this.screenRightBoundary||_<xo||l>this.screenBottomBoundary}isInsideGrid(i,l,p,_){return p>=0&&i<this.gridRightBoundary&&_>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=a.a6.mat4.identity([]);return a.a6.mat4.translate(i,i,[-100,-100,0]),i}}function Zi(d,i,l){const p=i.createTileMatrix(d,d.worldSize,l.toUnwrapped());return a.a6.mat4.multiply(new Float32Array(16),d.projMatrix,p)}function P6(d,i,l){if(i.projection.name===l.projection.name)return d.projMatrix;const p=l.clone();return p.setProjection(i.projection),Zi(p,i.getProjection(),d)}function Ts(d,i,l){return i.name===l.projection.name?d.projMatrix:Zi(l,i,d)}class Hn{constructor(i,l,p,_){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Xi{constructor(i,l,p,_,x,A=!1){this.text=new Hn(i?i.text:null,l,p,x),this.icon=new Hn(i?i.icon:null,l,_,x),this.clipped=A}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ta{constructor(i,l,p,_=!1){this.text=i,this.icon=l,this.skipFade=p,this.clipped=_}}class fi{constructor(){this.invProjMatrix=a.a6.mat4.create(),this.viewportMatrix=a.a6.mat4.create(),this.circles=[]}}class G2{constructor(i,l,p,_,x){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=x}}class ra{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[i]}}function i1(d,i,l,p,_){const{horizontalAlign:x,verticalAlign:A}=a.bx(d),O=-(x-.5)*i,k=-(A-.5)*l,z=a.bw(d,p);return new a.P(O+z[0]*_,k+z[1]*_)}function rl(d,i,l,p,_){const x=new a.P(d,i);return l&&x._rotate(p?_:-_),x}class nl{constructor(i,l,p,_,x,A){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new Fi(this.transform,x),this.buildingIndex=A,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new ra(p),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,p,_){const x=p.getBucket(l),A=p.latestFeatureIndex;if(!x||!A||l.fqid!==x.layerIds[0])return;const O=x.layers[0].layout,k=x.layers[0].paint,z=p.collisionBoxArray,F=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),U=p.tileSize/a.ab,V=p.tileID.toUnwrapped();this.transform.setProjection(x.projection);const q=(J=p.tileID,ee=x.getProjection(),re=this.transform,ee.name===this.projection?re.calculateProjMatrix(J.toUnwrapped()):Zi(re,ee,J));var J,ee,re;const oe=O.get("text-pitch-alignment")==="map",me=O.get("text-rotation-alignment")==="map";l.compileFilter();const ye=l.dynamicFilter(),de=l.dynamicFilterNeedsFeature(),be=this.transform.calculatePixelsToTileUnitsMatrix(p),xe=Or(q,p.tileID.canonical,oe,me,this.transform,x.getProjection(),be);let Ce=null;if(oe){const ze=ao(q,p.tileID.canonical,oe,me,this.transform,x.getProjection(),be);Ce=a.a6.mat4.multiply([],this.transform.labelPlaneMatrix,ze)}let Se=null;ye&&p.latestFeatureIndex&&(Se={unwrappedTileID:V,dynamicFilter:ye,dynamicFilterNeedsFeature:de}),this.retainedQueryData[x.bucketInstanceId]=new G2(x.bucketInstanceId,A,x.sourceLayerIndex,x.index,p.tileID);const Ie={bucket:x,layout:O,paint:k,posMatrix:q,textLabelPlaneMatrix:xe,labelToScreenMatrix:Ce,clippingData:Se,scale:F,textPixelRatio:U,holdingForFade:p.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:a.bj(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.bj(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID),latestFeatureIndex:p.latestFeatureIndex};if(_)for(const ze of x.sortKeyRanges){const{sortKey:ke,symbolInstanceStart:Re,symbolInstanceEnd:Ve}=ze;i.push({sortKey:ke,symbolInstanceStart:Re,symbolInstanceEnd:Ve,parameters:Ie})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe,me){const{textOffset0:ye,textOffset1:de,crossTileID:be}=V,xe=[ye,de],Ce=i1(i,p,_,xe,x),Se=this.collisionIndex.placeCollisionBox(J,x,l,rl(Ce.x,Ce.y,A,O,this.transform.angle),U,k,z,F.predicate);if(re){const Ie=J.getSymbolInstanceIconSize(me,this.transform.zoom,V.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(J,Ie,re,rl(Ce.x,Ce.y,A,O,this.transform.angle),U,k,z,F.predicate).box.length===0)return}if(Se.box.length>0){let Ie;return this.prevPlacement&&this.prevPlacement.variableOffsets[be]&&this.prevPlacement.placements[be]&&this.prevPlacement.placements[be].text&&(Ie=this.prevPlacement.variableOffsets[be].anchor),this.variableOffsets[be]={textOffset:xe,width:p,height:_,anchor:i,textScale:x,prevAnchor:Ie},this.markUsedJustification(J,i,V,ee),J.allowVerticalPlacement&&(this.markUsedOrientation(J,ee,V),this.placedOrientations[be]=ee),{shift:Ce,placedGlyphBoxes:Se}}}placeLayerBucketPart(i,l,p,_){const{bucket:x,layout:A,paint:O,posMatrix:k,textLabelPlaneMatrix:z,labelToScreenMatrix:F,clippingData:U,textPixelRatio:V,holdingForFade:q,collisionBoxArray:J,partiallyEvaluatedTextSize:ee,partiallyEvaluatedIconSize:re,collisionGroup:oe,latestFeatureIndex:me}=i.parameters,ye=A.get("text-optional"),de=A.get("icon-optional"),be=A.get("text-allow-overlap"),xe=A.get("icon-allow-overlap"),Ce=A.get("text-rotation-alignment")==="map",Se=A.get("text-pitch-alignment")==="map",Ie=A.get("symbol-z-elevate"),ze=O.get("symbol-z-offset"),ke=O.get("symbol-elevation-reference")==="sea";this.transform.setProjection(x.projection);let Re=be&&(xe||!x.hasIconData()||de),Ve=xe&&(be||!x.hasTextData()||ye);const nt=!ze.isConstant();!x.collisionArrays&&J&&x.deserializeCollisionBoxes(J),p&&_&&x.updateCollisionDebugBuffers(this.transform.zoom,J);const dt=(rt,xt,Ge)=>{const{crossTileID:ct,numVerticalGlyphVertices:at}=rt;let wt=null;if(U&&U.dynamicFilterNeedsFeature||nt){const wr=this.retainedQueryData[x.bucketInstanceId];wt=me.loadFeature({featureIndex:rt.featureIndex,bucketIndex:wr.bucketIndex,sourceLayerIndex:wr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(U&&!(0,U.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},wt,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new a.P(rt.tileAnchorX,rt.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[ct]=new ta(!1,!1,!1,!0),void l.add(ct);const Tt=ze.evaluate(wt,{});if(l.has(ct))return;if(q)return void(this.placements[ct]=new ta(!1,!1,!1));let ft=!1,gt=!1,Yt=!0,It=!1,jt=!1,ir=null,Wt={box:null,offscreen:null,occluded:null},tr={box:null,offscreen:null,occluded:null},Tr=null,xr=null,Kr=null,nn=0,pn=0,No=0;Ge.textFeatureIndex?nn=Ge.textFeatureIndex:rt.useRuntimeCollisionCircles&&(nn=rt.featureIndex),Ge.verticalTextFeatureIndex&&(pn=Ge.verticalTextFeatureIndex);const $n=wr=>{wr.tileID=this.retainedQueryData[x.bucketInstanceId].tileID;const jr=this.transform.elevation;wr.elevation=ke?Tt:Tt+(jr?jr.getAtTileOffset(wr.tileID,wr.tileAnchorX,wr.tileAnchorY):0),wr.elevation+=rt.zOffset},Mr=Ge.textBox;if(Mr){$n(Mr);const wr=Wr=>{let Dn=a.bk.horizontal;if(x.allowVerticalPlacement&&!Wr&&this.prevPlacement){const Un=this.prevPlacement.placedOrientations[ct];Un&&(this.placedOrientations[ct]=Un,Dn=Un,this.markUsedOrientation(x,Dn,rt))}return Dn},jr=(Wr,Dn)=>{if(x.allowVerticalPlacement&&at>0&&Ge.verticalTextBox){for(const Un of x.writingModes)if(Un===a.bk.vertical?(Wt=Dn(),tr=Wt):Wt=Wr(),Wt&&Wt.box&&Wt.box.length)break}else Wt=Wr()};if(A.get("text-variable-anchor")){let Wr=A.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ct]){const Dr=this.prevPlacement.variableOffsets[ct];Wr.indexOf(Dr.anchor)>0&&(Wr=Wr.filter(ai=>ai!==Dr.anchor),Wr.unshift(Dr.anchor))}const Dn=(Dr,ai,di)=>{const si=x.getSymbolInstanceTextSize(ee,rt,this.transform.zoom,xt),hn=(Dr.x2-Dr.x1)*si+2*Dr.padding,Ki=(Dr.y2-Dr.y1)*si+2*Dr.padding,Ji=rt.hasIconTextFit&&!xe?ai:null;Ji&&$n(Ji);let jo={box:[],offscreen:!1,occluded:!1};const Eo=be?2*Wr.length:Wr.length;for(let uo=0;uo<Eo;++uo){const $o=this.attemptAnchorPlacement(Wr[uo%Wr.length],Dr,hn,Ki,si,Ce,Se,V,k,oe,uo>=Wr.length,rt,xt,x,di,Ji,ee,re);if($o&&(jo=$o.placedGlyphBoxes,jo&&jo.box&&jo.box.length)){ft=!0,ir=$o.shift;break}}return jo};jr(()=>Dn(Mr,Ge.iconBox,a.bk.horizontal),()=>{const Dr=Ge.verticalTextBox;return Dr&&$n(Dr),x.allowVerticalPlacement&&!(Wt&&Wt.box&&Wt.box.length)&&at>0&&Dr?Dn(Dr,Ge.verticalIconBox,a.bk.vertical):{box:null,offscreen:null,occluded:null}}),Wt&&(ft=Wt.box,Yt=Wt.offscreen,It=Wt.occluded);const Un=wr(!(!Wt||!Wt.box));if(!ft&&this.prevPlacement){const Dr=this.prevPlacement.variableOffsets[ct];Dr&&(this.variableOffsets[ct]=Dr,this.markUsedJustification(x,Dr.anchor,rt,Un))}}else{const Wr=(Dn,Un)=>{const Dr=x.getSymbolInstanceTextSize(ee,rt,this.transform.zoom,xt),ai=this.collisionIndex.placeCollisionBox(x,Dr,Dn,new a.P(0,0),be,V,k,oe.predicate);return ai&&ai.box&&ai.box.length&&(this.markUsedOrientation(x,Un,rt),this.placedOrientations[ct]=Un),ai};jr(()=>Wr(Mr,a.bk.horizontal),()=>{const Dn=Ge.verticalTextBox;return x.allowVerticalPlacement&&at>0&&Dn?($n(Dn),Wr(Dn,a.bk.vertical)):{box:null,offscreen:null,occluded:null}}),wr(!!(Wt&&Wt.box&&Wt.box.length))}}if(Tr=Wt,ft=Tr&&Tr.box&&Tr.box.length>0,Yt=Tr&&Tr.offscreen,It=Tr&&Tr.occluded,rt.useRuntimeCollisionCircles){const wr=x.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex>=0?rt.centerJustifiedTextSymbolIndex:rt.verticalPlacedTextSymbolIndex),jr=a.bl(x.textSizeData,ee,wr),Wr=A.get("text-padding");xr=this.collisionIndex.placeCollisionCircles(x,be,wr,x.lineVertexArray,x.glyphOffsetArray,jr,k,z,F,p,Se,oe.predicate,rt.collisionCircleDiameter*jr/a.bq,Wr,this.retainedQueryData[x.bucketInstanceId].tileID),ft=be||xr.circles.length>0&&!xr.collisionDetected,Yt=Yt&&xr.offscreen,It=xr.occluded}if(Ge.iconFeatureIndex&&(No=Ge.iconFeatureIndex),Ge.iconBox){const wr=jr=>{$n(jr);const Wr=rt.hasIconTextFit&&ir?rl(ir.x,ir.y,Ce,Se,this.transform.angle):new a.P(0,0),Dn=x.getSymbolInstanceIconSize(re,this.transform.zoom,rt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(x,Dn,jr,Wr,xe,V,k,oe.predicate)};tr&&tr.box&&tr.box.length&&Ge.verticalIconBox?(Kr=wr(Ge.verticalIconBox),gt=Kr.box.length>0):(Kr=wr(Ge.iconBox),gt=Kr.box.length>0),Yt=Yt&&Kr.offscreen,jt=Kr.occluded}const en=ye||rt.numHorizontalGlyphVertices===0&&at===0,wn=de||rt.numIconVertices===0;if(en||wn?wn?en||(gt=gt&&ft):ft=gt&&ft:gt=ft=gt&&ft,ft&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,A.get("text-ignore-placement"),x.bucketInstanceId,tr&&tr.box&&pn?pn:nn,oe.ID),gt&&Kr&&this.collisionIndex.insertCollisionBox(Kr.box,A.get("icon-ignore-placement"),x.bucketInstanceId,No,oe.ID),xr&&(ft&&this.collisionIndex.insertCollisionCircles(xr.circles,A.get("text-ignore-placement"),x.bucketInstanceId,nn,oe.ID),p)){const wr=x.bucketInstanceId;let jr=this.collisionCircleArrays[wr];jr===void 0&&(jr=this.collisionCircleArrays[wr]=new fi);for(let Wr=0;Wr<xr.circles.length;Wr+=4)jr.circles.push(xr.circles[Wr+0]),jr.circles.push(xr.circles[Wr+1]),jr.circles.push(xr.circles[Wr+2]),jr.circles.push(xr.collisionDetected?1:0)}const Qr=x.projection.name!=="globe";Re=Re&&(Qr||!It),Ve=Ve&&(Qr||!jt),this.placements[ct]=new ta(ft||Re,gt||Ve,Yt||x.justReloaded),l.add(ct)};if(Ie&&this.buildingIndex&&(this.buildingIndex.updateZOffset(x,this.retainedQueryData[x.bucketInstanceId].tileID),x.updateZOffset()),x.sortFeaturesByY){const rt=x.getSortedSymbolIndexes(this.transform.angle);for(let xt=rt.length-1;xt>=0;--xt){const Ge=rt[xt];dt(x.symbolInstances.get(Ge),Ge,x.collisionArrays[Ge])}x.hasAnyZOffset&&a.w(`${x.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(x.hasAnyZOffset){const rt=x.getSortedIndexesByZOffset();for(let xt=0;xt<rt.length;++xt){const Ge=rt[xt];dt(x.symbolInstances.get(Ge),Ge,x.collisionArrays[Ge])}}else for(let rt=i.symbolInstanceStart;rt<i.symbolInstanceEnd;rt++)dt(x.symbolInstances.get(rt),rt,x.collisionArrays[rt]);if(p&&x.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[x.bucketInstanceId];a.a6.mat4.invert(rt.invProjMatrix,k),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(i,l,p,_){const{leftJustifiedTextSymbolIndex:x,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:k,crossTileID:z}=p,F=a.bv(l),U=_===a.bk.vertical?k:F==="left"?x:F==="center"?A:F==="right"?O:-1;x>=0&&(i.text.placedSymbolArray.get(x).crossTileID=U>=0&&x!==U?0:z),A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=U>=0&&A!==U?0:z),O>=0&&(i.text.placedSymbolArray.get(O).crossTileID=U>=0&&O!==U?0:z),k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=U>=0&&k!==U?0:z)}markUsedOrientation(i,l,p){const _=l===a.bk.horizontal||l===a.bk.horizontalOnly?l:0,x=l===a.bk.vertical?l:0,{leftJustifiedTextSymbolIndex:A,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:z}=p,F=i.text.placedSymbolArray;A>=0&&(F.get(A).placedOrientation=_),O>=0&&(F.get(O).placedOrientation=_),k>=0&&(F.get(k).placedOrientation=_),z>=0&&(F.get(z).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const _=l?l.symbolFadeChange(i):1,x=l?l.opacities:{},A=l?l.variableOffsets:{},O=l?l.placedOrientations:{};for(const k in this.placements){const z=this.placements[k],F=x[k];F?(this.opacities[k]=new Xi(F,_,z.text,z.icon,null,z.clipped),p=p||z.text!==F.text.placed||z.icon!==F.icon.placed):(this.opacities[k]=new Xi(null,_,z.text,z.icon,z.skipFade,z.clipped),p=p||z.text||z.icon)}for(const k in x){const z=x[k];if(!this.opacities[k]){const F=new Xi(z,_,!1,!1);F.isHidden()||(this.opacities[k]=F,p=p||z.text.placed||z.icon.placed)}}for(const k in A)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=A[k]);for(const k in O)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=O[k]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l,p,_){const x=new Set;for(const A of l){const O=A.getBucket(i);O&&A.latestFeatureIndex&&i.fqid===O.layerIds[0]&&(this.updateBucketOpacities(O,x,A,A.collisionBoxArray,p,_,A.tileID,i.scope),O.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(O,A.tileID),O.updateZOffset()))}}updateBucketOpacities(i,l,p,_,x,A,O,k){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const z=i.layers[0].layout,F=i.layers[0].paint,U=!!i.layers[0].dynamicFilter(),V=new Xi(null,0,!1,!1,!0),q=z.get("text-allow-overlap"),J=z.get("icon-allow-overlap"),ee=z.get("text-variable-anchor"),re=z.get("text-rotation-alignment")==="map",oe=z.get("text-pitch-alignment")==="map",me=F.get("symbol-z-offset"),ye=F.get("symbol-elevation-reference")==="sea",de=!me.isConstant(),be=new Xi(null,0,q&&(J||!i.hasIconData()||z.get("icon-optional")),J&&(q||!i.hasTextData()||z.get("text-optional")),!0);!i.collisionArrays&&_&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(_);const xe=(Se,Ie,ze)=>{for(let ke=0;ke<Ie/4;ke++)Se.opacityVertexArray.emplaceBack(ze)};let Ce=0;A&&i.updateReplacement(O,A);for(let Se=0;Se<i.symbolInstances.length;Se++){const Ie=i.symbolInstances.get(Se),{numHorizontalGlyphVertices:ze,numVerticalGlyphVertices:ke,crossTileID:Re,numIconVertices:Ve,tileAnchorX:nt,tileAnchorY:dt}=Ie;let rt=null;if(Ie&&de){const It=this.retainedQueryData[i.bucketInstanceId];rt=p.latestFeatureIndex.loadFeature({featureIndex:Ie.featureIndex,bucketIndex:It.bucketIndex,sourceLayerIndex:It.sourceLayerIndex,layoutVertexArrayOffset:0})}const xt=me.evaluate(rt,{}),Ge=l.has(Re);let ct=this.opacities[Re];Ge?ct=V:ct||(ct=be,this.opacities[Re]=ct),l.add(Re);const at=ze>0||ke>0,wt=Ve>0,Tt=this.placedOrientations[Re],ft=Tt===a.bk.vertical,gt=Tt===a.bk.horizontal||Tt===a.bk.horizontalOnly;!at&&!wt||ct.isHidden()||Ce++;let Yt=!1;if((at||wt)&&A)for(const It of i.activeReplacements){if(a.br(It,x,a.bs.Symbol,k)||It.min.x>nt||nt>It.max.x||It.min.y>dt||dt>It.max.y)continue;const jt=a.bt(nt,dt,O.canonical,It.footprintTileId.canonical);if(Yt=a.bu(jt,It.footprint),Yt)break}if(at){const It=Yt?a1:o1(ct.text);xe(i.text,ze,ft?a1:It),xe(i.text,ke,gt?a1:It);const jt=ct.text.isHidden(),{leftJustifiedTextSymbolIndex:ir,centerJustifiedTextSymbolIndex:Wt,rightJustifiedTextSymbolIndex:tr,verticalPlacedTextSymbolIndex:Tr}=Ie,xr=i.text.placedSymbolArray,Kr=jt||ft?1:0;ir>=0&&(xr.get(ir).hidden=Kr),Wt>=0&&(xr.get(Wt).hidden=Kr),tr>=0&&(xr.get(tr).hidden=Kr),Tr>=0&&(xr.get(Tr).hidden=jt||gt?1:0);const nn=this.variableOffsets[Re];nn&&this.markUsedJustification(i,nn.anchor,Ie,Tt);const pn=this.placedOrientations[Re];pn&&(this.markUsedJustification(i,"left",Ie,pn),this.markUsedOrientation(i,pn,Ie))}if(wt){const It=Yt?a1:o1(ct.icon),{placedIconSymbolIndex:jt,verticalPlacedIconSymbolIndex:ir}=Ie,Wt=i.icon.placedSymbolArray,tr=ct.icon.isHidden()?1:0;jt>=0&&(xe(i.icon,Ve,ft?a1:It),Wt.get(jt).hidden=tr),ir>=0&&(xe(i.icon,Ie.numVerticalIconVertices,gt?a1:It),Wt.get(ir).hidden=tr)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const It=i.collisionArrays[Se];if(It){let jt=new a.P(0,0),ir=!0;if(It.textBox||It.verticalTextBox){if(ee){const tr=this.variableOffsets[Re];tr?(jt=i1(tr.anchor,tr.width,tr.height,tr.textOffset,tr.textScale),re&&jt._rotate(oe?this.transform.angle:-this.transform.angle)):ir=!1}U&&(ir=!ct.clipped),It.textBox&&i7(i.textCollisionBox.collisionVertexArray,ct.text.placed,!ir||ft,xt,ye,jt.x,jt.y),It.verticalTextBox&&i7(i.textCollisionBox.collisionVertexArray,ct.text.placed,!ir||gt,xt,ye,jt.x,jt.y)}const Wt=ir&&!!(!gt&&It.verticalIconBox);It.iconBox&&i7(i.iconCollisionBox.collisionVertexArray,ct.icon.placed,Wt,xt,ye,Ie.hasIconTextFit?jt.x:0,Ie.hasIconTextFit?jt.y:0),It.verticalIconBox&&i7(i.iconCollisionBox.collisionVertexArray,ct.icon.placed,!Wt,xt,ye,Ie.hasIconTextFit?jt.x:0,Ie.hasIconTextFit?jt.y:0)}}}if(i.fullyClipped=Ce===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Se.invProjMatrix,i.placementViewportMatrix=Se.viewportMatrix,i.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function i7(d,i,l,p,_,x,A){d.emplaceBack(i?1:0,l?1:0,x||0,A||0,p,_?1:0),d.emplaceBack(i?1:0,l?1:0,x||0,A||0,p,_?1:0),d.emplaceBack(i?1:0,l?1:0,x||0,A||0,p,_?1:0),d.emplaceBack(i?1:0,l?1:0,x||0,A||0,p,_?1:0)}const Ka=Math.pow(2,25),Z4=Math.pow(2,24),M6=Math.pow(2,17),so=Math.pow(2,16),X4=Math.pow(2,9),o7=Math.pow(2,8),C6=Math.pow(2,1);function o1(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;const i=d.placed?1:0,l=Math.floor(127*d.opacity);return l*Ka+i*Z4+l*M6+i*so+l*X4+i*o7+l*C6+i}const a1=0;class Y4{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,l,p,_,x){const A=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(A,_,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((O,k)=>O.sortKey-k.sortKey));this._currentPartIndex<A.length;){const O=A[this._currentPartIndex];if(l.placeLayerBucketPart(O,this._seenCrossTileIDs,p,O.symbolInstanceStart===0),this._currentPartIndex++,x())return!0}return!1}}class Oc{constructor(i,l,p,_,x,A,O,k,z){this.placement=new nl(i,x,A,O,k,z),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,l,p,_){const x=a.q.now(),A=()=>{const O=a.q.now()-x;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=l[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=k)&&(!O.maxzoom||O.maxzoom>k)){const z=O,F=z.layout.get("symbol-z-elevate"),U=z.layout.get("symbol-sort-key").constantOr(1)!==void 0,V=z.layout.get("symbol-z-order"),q=V==="viewport-y"||V==="auto"&&!(V!=="viewport-y"&&U),J=z.layout.get("text-allow-overlap")||z.layout.get("icon-allow-overlap")||z.layout.get("text-ignore-placement")||z.layout.get("icon-ignore-placement"),ee=q&&J,re=this._inProgressLayer=this._inProgressLayer||new Y4(z),oe=a.av(O.source,O.scope);if(re.continuePlacement(F||ee?_[oe]:p[oe],this.placement,this._showCollisionBoxes,O,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const il=512/a.ab/2;class K4{constructor(i,l,p){this.tileID=i,this.bucketInstanceId=p,this.index=new a.by(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=i.canonical.x*a.ab,x=i.canonical.y*a.ab;for(let A=0;A<l.length;A++){const{key:O,crossTileID:k,tileAnchorX:z,tileAnchorY:F}=l.get(A),U=Math.floor((_+z)*il),V=Math.floor((x+F)*il);this.index.add(U,V),this.keys.push(O),this.crossTileIDs.push(k)}this.index.finish()}findMatches(i,l,p){const _=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),x=il/Math.pow(2,l.canonical.z-this.tileID.canonical.z),A=l.canonical.x*a.ab,O=l.canonical.y*a.ab;for(let k=0;k<i.length;k++){const z=i.get(k);if(z.crossTileID)continue;const{key:F,tileAnchorX:U,tileAnchorY:V}=z,q=Math.floor((A+U)*x),J=Math.floor((O+V)*x),ee=this.index.range(q-_,J-_,q+_,J+_);for(const re of ee){const oe=this.crossTileIDs[re];if(this.keys[re]===F&&!p.has(oe)){p.add(oe),z.crossTileID=oe;break}}}}}class s1{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class I6{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const p in this.indexes){const _=this.indexes[p],x={};for(const A in _){const O=_[A];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+l),x[O.tileID.key]=O}this.indexes[p]=x}this.lng=i}addBucket(i,l,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<l.symbolInstances.length;x++)l.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const _=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const A=this.indexes[x];if(Number(x)>i.overscaledZ)for(const O in A){const k=A[O];k.tileID.isChildOf(i)&&k.findMatches(l.symbolInstances,i,_)}else{const O=A[i.scaledTo(Number(x)).key];O&&O.findMatches(l.symbolInstances,i,_)}}for(let x=0;x<l.symbolInstances.length;x++){const A=l.symbolInstances.get(x);A.crossTileID||(A.crossTileID=p.generate(),_.add(A.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new K4(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const p of l.crossTileIDs)this.usedCrossTileIDs[i].delete(p)}removeStaleBuckets(i){let l=!1;for(const p in this.indexes){const _=this.indexes[p];for(const x in _)i[_[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[x]),delete _[x],l=!0)}return l}}class a7{constructor(){this.layerIndexes={},this.crossTileIDs=new s1,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,p,_){let x=this.layerIndexes[i.fqid];x===void 0&&(x=this.layerIndexes[i.fqid]=new I6);let A=!1;const O={};_.name!=="globe"&&x.handleWrapJump(p);for(const k of l){const z=k.getBucket(i);z&&i.fqid===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(k.tileID,z,this.crossTileIDs)&&(A=!0),O[z.bucketInstanceId]=!0)}return x.removeStaleBuckets(O)&&(A=!0),A}pruneUnusedLayers(i){const l={};i.forEach(p=>{l[p]=!0});for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}const bo=771;class Pr{constructor(i,l,p,_){this.blendFunction=i,this.blendColor=l,this.mask=p,this.blendEquation=_}}Pr.Replace=[1,0,1,0],Pr.disabled=new Pr(Pr.Replace,a.bz.transparent,[!1,!1,!1,!1]),Pr.unblended=new Pr(Pr.Replace,a.bz.transparent,[!0,!0,!0,!0]),Pr.alphaBlended=new Pr([1,bo,1,bo],a.bz.transparent,[!0,!0,!0,!0]),Pr.alphaBlendedNonPremultiplied=new Pr([770,bo,770,bo],a.bz.transparent,[!0,!0,!0,!0]),Pr.multiply=new Pr([774,0,774,0],a.bz.transparent,[!0,!0,!0,!0]);class Jt{constructor(i,l,p){this.func=i,this.mask=l,this.range=p}}Jt.ReadOnly=!1,Jt.ReadWrite=!0,Jt.disabled=new Jt(519,Jt.ReadOnly,[0,1]);const q2=7680;class pr{constructor(i,l,p,_,x,A){this.test=i,this.ref=l,this.mask=p,this.fail=_,this.depthFail=x,this.pass=A}}pr.disabled=new pr({func:519,mask:0},0,0,q2,q2,q2);const W2=1029,Rc=2305;class or{constructor(i,l,p){this.enable=i,this.mode=l,this.frontFace=p}}function H2(d,i){const l=a.bC(d,3);a.a6.mat4.fromQuat(d,i),a.bE(d,3,l)}function s7(d,i){const l=a.a6.quat.identity([]);return a.a6.quat.rotateZ(l,l,-i),a.a6.quat.rotateX(l,l,-d),l}function Z2(d,i){const l=[d[0],d[1],0],p=[i[0],i[1],0];if(a.a6.vec3.length(l)>=1e-15){const A=a.a6.vec3.normalize([],l);a.a6.vec3.scale(p,A,a.a6.vec3.dot(p,A)),i[0]=p[0],i[1]=p[1]}const _=a.a6.vec3.cross([],i,d);if(a.a6.vec3.len(_)<1e-15)return null;const x=Math.atan2(-_[1],_[0]);return s7(Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2]),x)}or.disabled=new or(!1,W2,Rc),or.backCCW=new or(!0,W2,Rc),or.backCW=new or(!0,W2,2304),or.frontCW=new or(!0,1028,2304),or.frontCCW=new or(!0,1028,Rc);class Ss{constructor(i,l){this.position=i,this.orientation=l}get position(){return this._position}set position(i){if(i){const l=i instanceof a.a5?i:new a.a5(i[0],i[1],i[2]);this._renderWorldCopies&&(l.x=a.bA(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(i,l){if(this.orientation=null,!this.position)return;const p=this.position,_=this._elevation?this._elevation.getAtPointOrZero(a.a5.fromLngLat(i)):0,x=a.a5.fromLngLat(i,_),A=[x.x-p.x,x.y-p.y,x.z-p.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=Z2(A,l)}setPitchBearing(i,l){this.orientation=s7(a.bB(i),a.bB(-l))}}class ol{constructor(i,l){this._transform=a.a6.mat4.identity([]),this.orientation=l,this.position=i}get mercatorPosition(){const i=this.position;return new a.a5(i[0],i[1],i[2])}get position(){const i=a.bC(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var l;i&&a.bE(this._transform,3,[(l=i)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||a.a6.quat.identity([]),i&&H2(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,l){this._orientation=s7(i,l),H2(this._transform,this._orientation)}forward(){const i=a.bC(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=a.bC(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=a.bC(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,l){const p=new Float64Array(16);return a.a6.mat4.invert(p,this.getWorldToCamera(i,l)),p}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,l,p){const _=this.position;a.a6.vec3.scale(_,_,-i);const x=new Float64Array(16);return a.a6.mat4.fromScaling(x,[p,p,p]),a.a6.mat4.translate(x,x,_),x[10]*=l,x}getWorldToCamera(i,l){const p=new Float64Array(16),_=new Float64Array(4),x=this.position;return a.a6.quat.conjugate(_,this._orientation),a.a6.vec3.scale(x,x,-i),a.a6.mat4.fromQuat(p,_),a.a6.mat4.translate(p,p,x),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=l,p[9]*=l,p[10]*=l,p[11]*=l,p}getCameraToClipPerspective(i,l,p,_){const x=new Float64Array(16);return a.a6.mat4.perspective(x,i,l,p,_),x}getCameraToClipOrthographic(i,l,p,_,x,A){const O=new Float64Array(16);return a.a6.mat4.ortho(O,i,l,p,_,x,A),O}getDistanceToElevation(i,l=!1){const p=i===0?0:a.bD(i,l?a.aM(this.position[1]):this.position[1]),_=this.forward();return(p-this.position[2])/_[2]}clone(){return new ol([...this.position],[...this.orientation])}}const Mi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class l7{constructor(i=0,l=0,p=0,_=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=p,this.right=_}interpolate(i,l,p){return l.top!=null&&i.top!=null&&(this.top=a.aa(i.top,l.top,p)),l.bottom!=null&&i.bottom!=null&&(this.bottom=a.aa(i.bottom,l.bottom,p)),l.left!=null&&i.left!=null&&(this.left=a.aa(i.left,l.left,p)),l.right!=null&&i.right!=null&&(this.right=a.aa(i.right,l.right,p)),this}getCenter(i,l){const p=a.ap((this.left+i-this.right)/2,0,i),_=a.ap((this.top+l-this.bottom)/2,0,l);return new a.P(p,_)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new l7(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const l1=(d,i,l)=>(1-l)*d+l*i,c1=d=>d*d*d*d*d;class c7{constructor(i,l,p,_,x,A,O){this.tileSize=512,this._renderWorldCopies=x===void 0||x,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=p??0,this._maxPitch=_??60,this.setProjection(A),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new a.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new l7,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new ol,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const i=new c7(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(i,l=!1){const p=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||p)&&this._updateCameraOnTerrain(),(i||p)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return a.ar(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=a.bL(this.projectionOptions);const p=this.getProjection(),_=!a.bh(l,p);return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setOrthographicProjectionAtLowPitch(i){return this._orthographicProjectionAtLowPitch!==i&&(this._orthographicProjectionAtLowPitch=i,this._calcMatrices(),!0)}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.bL({name:"mercator"});const l=i!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.bA(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const l=-i*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=a.a6.mat2.create(),a.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=a.ap(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=a.bB(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(i){this._tileCoverLift!==i&&(this._tileCoverLift=i)}_updateCameraOnTerrain(){const i=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,l=this.elevation&&i===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||i===Number.NEGATIVE_INFINITY&&(!l||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const p=this._elevation;l||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&p.exaggeration()&&this._centerAltitudeValidForExaggeration!==p.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*p.exaggeration(),this._centerAltitudeValidForExaggeration=p.exaggeration()):(this._centerAltitude=i||0,this._centerAltitudeValidForExaggeration=p.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let _=0,x=0;for(let A=0;A<l.length;A++){const O=new a.P(l[A][0]*this.width,p+l[A][1]*(this.height-p)),k=i.pointCoordinate(O);if(!k)continue;const z=1/Math.hypot(k[0]-this._camera.position[0],k[1]-this._camera.position[1]);_+=k[3]*z,x+=z}return x===0?NaN:_/x}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*l,_=this._mercatorZfromZoom(i),x=this._mercatorZfromZoom(this._maxZoom),A=Math.max(_-p,x);this._setZoom(this._zoomFromMercatorZ(A))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[l.x,l.y,l.z]:[i.x,i.y,i.z];const _=a.a6.vec3.length(a.a6.vec3.sub([],this._camera.position,p));return a.ap(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let l=!1;if(i.orientation&&!a.a6.quat.exactEquals(i.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];a.a6.vec3.exactEquals(p,this._camera.position)||(this._setCameraPosition(p),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,l=new Ss;return l.position=new a.a5(i[0],i[1],i[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(i){if(!a.a6.quat.length(i))return!1;a.a6.quat.normalize(i,i);const l=a.a6.vec3.transformQuat([],[0,0,-1],i),p=a.a6.vec3.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const _=Z2(l,p);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(i){const l=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;i[2]=a.ap(i[2],_/p,_/l),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,p){this._unmodified=!1,this._edgeInsets.interpolate(i,l,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new a.bM(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new a.P(0,0)),_=this.pointCoordinate(new a.P(this.width,0)),x=this.pointCoordinate(new a.P(this.width,this.height)),A=this.pointCoordinate(new a.P(0,this.height)),O=Math.floor(Math.min(p.x,_.x,x.x,A.x)),k=Math.floor(Math.max(p.x,_.x,x.x,A.x)),z=1;for(let F=O-z;F<=k+z;F++)F!==0&&l.push(new a.bM(F,i))}return l}isLODDisabled(i){return(!i||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(i,l,p){let _=[];const x=p!==void 0,A=!x;if(A&&this.zoom<l||x&&p[0]===0&&p[1]===0)return _;const O=new Set,k=(F,U,V,q,J)=>{const ee=a.c1(U,F,V,q,J);O.has(ee)||(_.push(new a.aA(F,U,V,q,J)),O.add(ee))};for(let F=0;F<i.length;F++){const U=i[F];if(A&&U.canonical.z!==l)continue;const V=U.canonical,q=U.overscaledZ,J=U.wrap,ee=1<<V.z,re=V.x+1<ee,oe=V.x>0,me=V.y+1<ee,ye=V.y>0,de=U.wrap-(oe?0:1),be=U.wrap+(re?0:1),xe=oe?V.x-1:ee-1,Ce=re?V.x+1:0;if(x)p[0]<0?(k(q,be,V.z,Ce,V.y),p[1]<0&&me&&(k(q,J,V.z,V.x,V.y+1),k(q,be,V.z,Ce,V.y+1)),p[1]>0&&ye&&(k(q,J,V.z,V.x,V.y-1),k(q,be,V.z,Ce,V.y-1))):p[0]>0?(k(q,de,V.z,xe,V.y),p[1]<0&&me&&(k(q,J,V.z,V.x,V.y+1),k(q,de,V.z,xe,V.y+1)),p[1]>0&&ye&&(k(q,J,V.z,V.x,V.y-1),k(q,de,V.z,xe,V.y-1))):p[1]<0&&me?k(q,J,V.z,V.x,V.y+1):ye&&k(q,J,V.z,V.x,V.y-1);else{const Se=U.visibleQuadrants;1&Se&&(k(q,de,V.z,xe,V.y),ye&&(k(q,J,V.z,V.x,V.y-1),k(q,de,V.z,xe,V.y-1))),2&Se&&(k(q,be,V.z,Ce,V.y),ye&&(k(q,J,V.z,V.x,V.y-1),k(q,be,V.z,Ce,V.y-1))),4&Se&&(k(q,de,V.z,xe,V.y),me&&(k(q,J,V.z,V.x,V.y+1),k(q,de,V.z,xe,V.y+1))),8&Se&&(k(q,be,V.z,Ce,V.y),me&&(k(q,J,V.z,V.x,V.y+1),k(q,be,V.z,Ce,V.y+1)))}}const z=[];for(const F of _)_.some(U=>F.isChildOf(U))||z.push(F);if(_=z.filter(F=>!i.some(U=>!!(F.overscaledZ<l&&U.isChildOf(F))||F.equals(U)||F.isChildOf(U))),A){const F=1<<l,U=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),V=[F*U.x,F*U.y],q=4,J=q*q;_=_.filter(ee=>{const re=ee.canonical.x+.5-V[0],oe=ee.canonical.y+.5-V[1];return re*re+oe*oe<J})}return _}coveringTiles(i){let l=this.coveringZoomLevel(i);const p=l,_=this.elevation&&this.elevation.exaggeration(),x=_&&!i.isTerrainDEM,A=this.projection.name==="mercator";if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const O=this.locationCoordinate(this.center),k=this.center.lat,z=1<<l,F=[z*O.x,z*O.y,0],U=this.projection.name==="globe",V=!U,q=a.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,V),J=U?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ee=z*a.bD(1,this.center.lat),re=this._camera.position[2]/a.bD(1,this.center.lat),oe=[z*J.x,z*J.y,re*(V?1:ee)],me=U||_,ye=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),de=this.isLODDisabled(!0)?l:0;let be;if(this._elevation&&i.isTerrainDEM)be=1e4*this._elevation.exaggeration();else if(this._elevation){const Ge=this._elevation.getMinMaxForVisibleTiles();be=Ge?Ge.max:this._centerAltitude}else be=this._centerAltitude;const xe=i.isTerrainDEM?-be:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ce=this.projection.isReprojectedInTileSpace?a.bO(this):1,Se=Ge=>{const at=new a.a5(Ge.x+25e-6,Ge.y,Ge.z),wt=new a.a5(Ge.x,Ge.y+25e-6,Ge.z),Tt=Ge.toLngLat(),ft=at.toLngLat(),gt=wt.toLngLat(),Yt=this.locationCoordinate(Tt),It=this.locationCoordinate(ft),jt=this.locationCoordinate(gt),ir=Math.hypot(It.x-Yt.x,It.y-Yt.y),Wt=Math.hypot(jt.x-Yt.x,jt.y-Yt.y);return Math.sqrt(ir*Wt)*Ce/25e-6},Ie=Ge=>{const ct=be,at=xe;return{aabb:a.bR(this,z,0,0,0,Ge,at,ct,this.projection),zoom:0,x:0,y:0,minZ:at,maxZ:ct,wrap:Ge,fullyVisible:!1}},ze=[];let ke=[];const Re=l,Ve=i.reparseOverscaled?p:l,nt=(re-this._centerAltitude)*ee,dt=Ge=>{if(!this._elevation||!Ge.tileID||!A)return;const ct=this._elevation.getMinMaxForTile(Ge.tileID),at=Ge.aabb;ct?(at.min[2]=ct.min,at.max[2]=ct.max,at.center[2]=(at.min[2]+at.max[2])/2):(Ge.shouldSplit=xt(Ge),Ge.shouldSplit||(at.min[2]=at.max[2]=at.center[2]=this._centerAltitude))},rt=(Ge,ct)=>{if(.707*ct<Ge)return 1;const at=ct/Ge;return at/(1.4144271570014144+(Math.pow(1.1,at-1.4144271570014144+1)-1)/(1.1-1)-1)},xt=Ge=>{if(Ge.zoom<de)return!0;if(Ge.zoom===Re)return!1;if(Ge.shouldSplit!=null)return Ge.shouldSplit;const ct=Ge.aabb.distanceX(oe),at=Ge.aabb.distanceY(oe);let wt=nt,Tt=1;if(U){wt=Ge.aabb.distanceZ(oe);const Wt=Math.pow(2,Ge.zoom),tr=a.aM((Ge.y+1)/Wt),Tr=a.aM(Ge.y/Wt),xr=Math.min(Math.max(k,tr),Tr),Kr=a.c5(xr)/a.c5(k);if(Tt=xr===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Kr/this._mercatorScaleRatio),this.zoom<=a.c2&&Ge.zoom===Re-1&&Kr>=.9)return!0}else if(x&&(wt=Ge.aabb.distanceZ(oe)*ee),this.projection.isReprojectedInTileSpace&&p<=5){const Wt=Math.pow(2,Ge.zoom),tr=Se(new a.a5((Ge.x+.5)/Wt,(Ge.y+.5)/Wt));Tt=tr>.85?1:tr}if(!A){const Wt=Math.sqrt(ct*ct+at*at+wt*wt);let tr=(1<<Re-Ge.zoom)*ye*Tt;return tr*=rt(Math.max(wt,nt),Wt),Wt<tr}let ft=Number.MAX_VALUE,gt=0;const Yt=Ge.aabb.getCorners(),It=[];for(const Wt of Yt){a.a6.vec3.sub(It,Wt,oe),U||(x?It[2]*=ee:It[2]=nt);const tr=a.a6.vec3.dot(It,this._camera.forward());tr<ft&&(ft=tr,gt=Math.abs(It[2]))}let jt=(1<<Re-Ge.zoom)*ye*Tt;if(jt*=rt(Math.max(gt,nt),ft),ft<jt)return!0;const ir=Ge.aabb.closestPoint(F);return ir[0]===F[0]&&ir[1]===F[1]};if(this.renderWorldCopies)for(let Ge=1;Ge<=3;Ge++)ze.push(Ie(-Ge)),ze.push(Ie(Ge));for(ze.push(Ie(0));ze.length>0;){const Ge=ze.pop(),ct=Ge.x,at=Ge.y;let wt=Ge.fullyVisible;const Tt=()=>this.projection.name==="globe"&&(Ge.y===0||Ge.y===(1<<Ge.zoom)-1);if(!wt){let ft=me?Ge.aabb.intersects(q):Ge.aabb.intersectsFlat(q);if(ft===0&&Tt()){const gt=new a.bP(Ge.zoom,ct,at);ft=a.bQ(this,z,gt,!0).intersects(q)}if(ft===0)continue;wt=ft===2}if(Ge.zoom!==Re&&xt(Ge))for(let ft=0;ft<4;ft++){const gt=(ct<<1)+ft%2,Yt=(at<<1)+(ft>>1),It={aabb:A?Ge.aabb.quadrant(ft):a.bR(this,z,Ge.zoom+1,gt,Yt,Ge.wrap,Ge.minZ,Ge.maxZ,this.projection),zoom:Ge.zoom+1,x:gt,y:Yt,wrap:Ge.wrap,fullyVisible:wt,tileID:void 0,shouldSplit:void 0,minZ:Ge.minZ,maxZ:Ge.maxZ};x&&!U&&(It.tileID=new a.aA(Ge.zoom+1===Re?Ve:Ge.zoom+1,Ge.wrap,Ge.zoom+1,gt,Yt),dt(It)),ze.push(It)}else{const ft=Ge.zoom===Re?Ve:Ge.zoom;if(i.minzoom&&i.minzoom>ft)continue;let gt=0;if(!wt){let ir=me?Ge.aabb.intersectsPrecise(q):Ge.aabb.intersectsPreciseFlat(q);if(ir===0&&Tt()){const Wt=new a.bP(Ge.zoom,ct,at);ir=a.bQ(this,z,Wt,!0).intersectsPrecise(q)}if(ir===0)continue;if(i.calculateQuadrantVisibility)if(q.containsPoint(Ge.aabb.center))gt=15;else for(let Wt=0;Wt<4;Wt++)Ge.aabb.quadrant(Wt).intersects(q)!==0&&(gt|=1<<Wt)}const Yt=F[0]-(.5+ct+(Ge.wrap<<Ge.zoom))*(1<<l-Ge.zoom),It=F[1]-.5-at,jt=Ge.tileID?Ge.tileID:new a.aA(ft,Ge.wrap,Ge.zoom,ct,at);i.calculateQuadrantVisibility&&(jt.visibleQuadrants=gt),ke.push({tileID:jt,distanceSq:Yt*Yt+It*It})}}if(this.fogCullDistSq){const Ge=this.fogCullDistSq,ct=this.horizonLineFromTop();ke=ke.filter(at=>{const wt=[0,0,0,1],Tt=[a.ab,a.ab,0,1],ft=this.calculateFogTileMatrix(at.tileID.toUnwrapped());a.a6.vec4.transformMat4(wt,wt,ft),a.a6.vec4.transformMat4(Tt,Tt,ft);const gt=a.a6.vec4.min([],wt,Tt),Yt=a.a6.vec4.max([],wt,Tt),It=a.bS(gt,Yt);if(It===0)return!0;let jt=!1;const ir=this._elevation;if(ir&&It>Ge&&ct!==0){const Wt=this.calculateProjMatrix(at.tileID.toUnwrapped());let tr;i.isTerrainDEM||(tr=ir.getMinMaxForTile(at.tileID)),tr||(tr={min:xe,max:be});const Tr=a.c3(this.rotation),xr=[Tr[0]*a.ab,Tr[1]*a.ab,tr.max];a.a6.vec3.transformMat4(xr,xr,Wt),jt=(1-xr[1])*this.height*.5<ct}return It<Ge||jt})}return ke.sort((Ge,ct)=>Ge.distanceSq-ct.distanceSq).map(Ge=>Ge.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=a.ap(i.lat,-a.bT,a.bT),p=this.projection.project(i.lng,l);return new a.P(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,l){let p,_;const x=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;p=(l.x-x.x)/O,_=(l.y-x.y)/O}else{const O=this.pointCoordinate(l),k=this.pointCoordinate(x);p=O.x-k.x,_=O.y-k.y}const A=this.locationCoordinate(i);this.setLocation(new a.a5(A.x-p,A.y-_))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,l){const p=l?a.bD(l,i.lat):void 0,_=this.projection.project(i.lng,i.lat);return new a.a5(_.x,_.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,l){const p=l??this._centerAltitude,_=[i.x,i.y,0,1],x=[i.x,i.y,1,1];a.a6.vec4.transformMat4(_,_,this.pixelMatrixInverse),a.a6.vec4.transformMat4(x,x,this.pixelMatrixInverse);const A=x[3];a.a6.vec4.scale(_,_,1/_[3]),a.a6.vec4.scale(x,x,1/A);const O=_[2],k=x[2];return{p0:_,p1:x,t:O===k?0:(p-O)/(k-O)}}screenPointToMercatorRay(i){const l=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return a.a6.vec4.transformMat4(l,l,this.pixelMatrixInverse),a.a6.vec4.transformMat4(p,p,this.pixelMatrixInverse),a.a6.vec4.scale(l,l,1/l[3]),a.a6.vec4.scale(p,p,1/p[3]),l[2]=a.bD(l[2],this._center.lat)*this.worldSize,p[2]=a.bD(p[2],this._center.lat)*this.worldSize,a.a6.vec4.scale(l,l,1/this.worldSize),a.a6.vec4.scale(p,p,1/this.worldSize),new a.aj([l[0],l[1],l[2]],a.a6.vec3.normalize([],a.a6.vec3.sub([],p,l)))}rayIntersectionCoordinate(i){const{p0:l,p1:p,t:_}=i,x=a.bD(l[2],this._center.lat),A=a.bD(p[2],this._center.lat);return new a.a5(a.aa(l[0],p[0],_)/this.worldSize,a.aa(l[1],p[1],_)/this.worldSize,a.aa(x,A,_))}pointCoordinate(i,l=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,l)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let l=this.projection.pointCoordinate3D(this,i.x,i.y);if(l)return new a.a5(l[0],l[1],l[2]);let p=0,_=this.horizonLineFromTop();if(i.y>_)return this.pointCoordinate(i);const x=.02*_,A=i.clone();for(let O=0;O<10&&_-p>x;O++){A.y=a.aa(p,_,.66);const k=this.projection.pointCoordinate3D(this,A.x,A.y);k?(_=A.y,l=k):p=A.y}return l?new a.a5(l[0],l[1],l[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=a.bU)return!this.isPointAboveHorizon(i);const l=this.pointCoordinate(i);return l.y>=0&&l.y<=1}_coordinatePoint(i,l){const p=l&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,_=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return a.a6.vec4.transformMat4(_,_,this.pixelMatrix),_[3]>0?new a.P(_[0]/_[3],_[1]/_[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:l}=this._edgeInsets,p=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,x=this.pointLocation3D(new a.P(l,i)),A=this.pointLocation3D(new a.P(_,i)),O=this.pointLocation3D(new a.P(_,p)),k=this.pointLocation3D(new a.P(l,p));let z=Math.min(x.lng,A.lng,O.lng,k.lng),F=Math.max(x.lng,A.lng,O.lng,k.lng),U=Math.min(x.lat,A.lat,O.lat,k.lat),V=Math.max(x.lat,A.lat,O.lat,k.lat);const q=Math.pow(2,-this.zoom)/16*270,J=this.projection.name==="globe"?1:4,ee=(re,oe,me,ye,de)=>{const be=(re+me)/2,xe=(oe+ye)/2,Ce=new a.P(be,xe),{lng:Se,lat:Ie}=this.pointLocation3D(Ce),ze=Math.max(0,z-Se,U-Ie,Se-F,Ie-V);z=Math.min(z,Se),F=Math.max(F,Se),U=Math.min(U,Ie),V=Math.max(V,Ie),(de<J||ze>q)&&(ee(re,oe,be,xe,de+1),ee(be,xe,me,ye,de+1))};if(ee(l,i,_,i,1),ee(_,i,_,p,1),ee(_,p,l,p,1),ee(l,p,l,i,1),this.projection.name==="globe"){const[re,oe]=a.bV(this);re?(V=90,F=180,z=-180):oe&&(U=-90,F=180,z=-180)}return new a.as(new a.bK(z,U),new a.bK(F,V))}_getBoundsRectangular(i,l){const{top:p,left:_}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,A=this.width-this._edgeInsets.right,O=new a.P(_,p),k=new a.P(A,p),z=new a.P(A,x),F=new a.P(_,x);let U=this.pointCoordinate(O,i),V=this.pointCoordinate(k,i);const q=this.pointCoordinate(z,l),J=this.pointCoordinate(F,l),ee=(re,oe)=>(oe.y-re.y)/(oe.x-re.x);return U.y>1&&V.y>=0?U=new a.a5((1-J.y)/ee(J,U)+J.x,1):U.y<0&&V.y<=1&&(U=new a.a5(-J.y/ee(J,U)+J.x,0)),V.y>1&&U.y>=0?V=new a.a5((1-q.y)/ee(q,V)+q.x,1):V.y<0&&U.y<=1&&(V=new a.a5(-q.y/ee(q,V)+q.x,0)),new a.as().extend(this.coordinateLocation(U)).extend(this.coordinateLocation(V)).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(q))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=i.visibleDemTiles.reduce((p,_)=>{if(_.dem){const x=_.dem.tree;p.min=Math.min(p.min,x.minimums[0]),p.max=Math.max(p.max,x.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*i.exaggeration(),l.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,p=this.height/2-l*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-a.bT,this.maxLat=a.bT,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.am(this.minLng)*this.tileSize,this.worldMaxX=a.am(this.maxLng)*this.tileSize,this.worldMinY=a.at(this.maxLat)*this.tileSize,this.worldMaxY=a.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,l){return this.projection.createTileMatrix(this,l,i)}calculateDistanceTileData(i){const l=i.key,p=this._distanceTileDataCache;if(p[l])return p[l];const _=i.canonical,x=1/this.height,A=this.cameraWorldSize,O=A/this.zoomScale(_.z),k=(_.x+Math.pow(2,_.z)*i.wrap)*O,z=_.y*O,F=this.point;F.x*=A/this.worldSize,F.y*=A/this.worldSize;const U=this.angle,V=Math.sin(-U),q=-Math.cos(-U);return p[l]={bearing:[V,q],center:[(F.x-k)*x,(F.y-z)*x],scale:O/a.ab*x},p[l]}calculateFogTileMatrix(i){const l=i.key,p=this._fogTileMatrixCache;if(p[l])return p[l];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return a.a6.mat4.multiply(_,this.worldToFogMatrix,_),p[l]=new Float32Array(_),p[l]}calculateProjMatrix(i,l=!1,p=!1){const _=i.key;let x;if(x=p?this._expandedProjMatrixCache:l?this._alignedProjMatrixCache:this._projMatrixCache,x[_])return x[_];const A=this.calculatePosMatrix(i,this.worldSize);let O;return O=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.expandedFarZProjMatrix:l?this.alignedProjMatrix:this.projMatrix,a.a6.mat4.multiply(A,O,A),x[_]=new Float32Array(A),x[_]}calculatePixelsToTileUnitsMatrix(i){const l=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[l])return p[l];const _=a.bW(i,this);return p[l]=_,p[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,l=a.a6.mat4.fromScaling([],[i,i,i]);return a.a6.mat4.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const l=a.bD(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(l),_=this._camera.forward(),x=a.bD(1,this._center.lat);p[2]/=x,_[2]/=x,a.a6.vec3.normalize(_,_);const A=i.raycast(p,_,i.exaggeration());if(A){const O=a.a6.vec3.scaleAndAdd([],p,_,A),k=new a.a5(O[0],O[1],a.bD(O[2],a.aM(O[1]))),z=(k.z+a.a6.vec3.length([k.x-p[0],k.y-p[1],k.z-p[2]*x]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=k.toAltitude(),this._center=this.coordinateLocation(k),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const l=this._elevation,p=a.bD(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(p),x=l.getAtPointOrZero(new a.a5(..._)),A=this.pixelsPerMeter/this.worldSize*x,O=this._minimumHeightOverTerrain(),k=_[2]-A;if(k<=O)if(k<0||i){const z=this.locationCoordinate(this._center,this._centerAltitude),F=[_[0],_[1],z.z-_[2]],U=a.a6.vec3.length(F);F[2]-=(O-k)/this._pixelsPerMercatorPixel;const V=a.a6.vec3.length(F);if(V===0)return;a.a6.vec3.scale(F,F,U/V*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],z.z*this._pixelsPerMercatorPixel-F[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const V=this.center;return V.lat=a.ap(V.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(V.lng=a.ap(V.lng,this.minLng,this.maxLng)),this.center=V,void(this._constraining=!1)}const l=this._unmodified,{x:p,y:_}=this.point;let x=0,A=p,O=_;const k=this.width/2,z=this.height/2,F=this.worldMinY*this.scale,U=this.worldMaxY*this.scale;if(_-z<F&&(O=F+z),_+z>U&&(O=U-z),U-F<this.height&&(x=Math.max(x,this.height/(U-F)),O=(U+F)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const V=this.worldMinX*this.scale,q=this.worldMaxX*this.scale,J=this.worldSize/2-(V+q)/2;A=(p+J+this.worldSize)%this.worldSize-J,A-k<V&&(A=V+k),A+k>q&&(A=q-k),q-V<this.width&&(x=Math.max(x,this.width/(q-V)),A=(q+V)/2)}A===p&&O===_||(this.center=this.unproject(new a.P(A,O))),x&&(this.zoom+=this.scaleZoom(x)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,l=this.projection.name==="globe",p=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.bD(1,this.center.lat)/a.bD(1,a.c4));const _=a.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?p:1,A=this._camera.getWorldToCamera(this.worldSize,x);let O;const k=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(k[8]=2*-i.x/this.width,k[9]=2*i.y/this.height,this.isOrthographic){let Ie=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),ze=Ie*this.aspect,ke=-ze,Re=-Ie;ze-=i.x,ke-=i.x,Ie+=i.y,Re+=i.y,O=this._camera.getCameraToClipOrthographic(ke,ze,Re,Ie,this._nearZ,this._farZ),((Ve,nt,dt,rt)=>{for(let xt=0;xt<16;xt++)Ve[xt]=l1(nt[xt],dt[xt],rt)})(O,O,k,c1(this.pitch>=15?1:this.pitch/15))}else O=k;const z=a.a6.mat4.mul([],k,A);let F=a.a6.mat4.mul([],O,A);if(this.projection.isReprojectedInTileSpace){const Ie=this.locationCoordinate(this.center),ze=a.a6.mat4.identity([]);a.a6.mat4.translate(ze,ze,[Ie.x*this.worldSize,Ie.y*this.worldSize,0]),a.a6.mat4.multiply(ze,ze,a.bY(this)),a.a6.mat4.translate(ze,ze,[-Ie.x*this.worldSize,-Ie.y*this.worldSize,0]),a.a6.mat4.multiply(F,F,ze),a.a6.mat4.multiply(z,z,ze),this.inverseAdjustmentMatrix=a.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.a6.mat4.scale([],F,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=F,this.invProjMatrix=a.a6.mat4.invert(new Float64Array(16),this.projMatrix),l){const Ie=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ie[8]=2*-i.x/this.width,Ie[9]=2*i.y/this.height,this.expandedFarZProjMatrix=a.a6.mat4.mul([],Ie,A)}else this.expandedFarZProjMatrix=this.projMatrix;const U=a.a6.mat4.invert([],O);this.frustumCorners=a.b_.fromInvProjectionMatrix(U,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!l);const V=new Float32Array(16);a.a6.mat4.identity(V),a.a6.mat4.scale(V,V,[1,-1,1]),a.a6.mat4.rotateX(V,V,this._pitch),a.a6.mat4.rotateZ(V,V,this.angle);const q=a.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.a6.mat4.clone(q);const J=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;q[8]=2*-i.x/this.width,q[9]=2*(i.y+J)/this.height,this.skyboxMatrix=a.a6.mat4.multiply(V,q,V);const ee=this.point,re=ee.x,oe=ee.y,me=this.width%2/2,ye=this.height%2/2,de=Math.cos(this.angle),be=Math.sin(this.angle),xe=re-Math.round(re)+de*me+be*ye,Ce=oe-Math.round(oe)+de*ye+be*me,Se=new Float64Array(F);if(a.a6.mat4.translate(Se,Se,[xe>.5?xe-1:xe,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=Se,F=a.a6.mat4.create(),a.a6.mat4.scale(F,F,[this.width/2,-this.height/2,1]),a.a6.mat4.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=a.a6.mat4.create(),a.a6.mat4.scale(F,F,[1,-1,1]),a.a6.mat4.translate(F,F,[-1,-1,0]),a.a6.mat4.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=a.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,z),this._calcFogMatrices(),this._distanceTileDataCache={},F=a.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=F,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.b$(this);const Ie=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.a6.vec3.transformMat4(Ie,Ie,A),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=F;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,p=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,x=[i,i,l];a.a6.vec3.scale(x,x,_),a.a6.vec3.scale(p,p,-1),a.a6.vec3.multiply(p,p,x);const A=a.a6.mat4.create();a.a6.mat4.translate(A,A,p),a.a6.mat4.scale(A,A,x),this.mercatorFogMatrix=A,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,l,_)}_computeCameraPosition(i){const l=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),_=this.point,x=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-i/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-p[0]*x,_.y/this.worldSize-p[1]*x,i/this.worldSize*this._centerAltitude-p[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=this._camera.position[2],_=i[2];let x=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(x=Math.min((l-p)/_,1)),this._camera.position=a.a6.vec3.scaleAndAdd([],this._camera.position,i,x),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,l=this._camera.forward(),{pitch:p,bearing:_}=this._camera.getPitchBearing(),x=a.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,A=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.bB(this._maxPitch)),O=Math.max((i[2]-x)/Math.cos(p),A),k=this._zoomFromMercatorZ(O);a.a6.vec3.scaleAndAdd(i,i,l,O),this._pitch=a.ap(p,a.bB(this.minPitch),a.bB(this.maxPitch)),this.angle=a.bA(_,-Math.PI,Math.PI),this._setZoom(a.ap(k,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.a5(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let l=0,p=a.bU,_=0,x=1/0;for(;p-l>1e-6&&p>l;){const A=l+.5*(p-l),O=this.tileSize*Math.pow(2,A),k=this.getCameraToCenterDistance(this.projection,A,O),z=this.scaleZoom(k/(i*this.tileSize)),F=Math.abs(A-z);F<x&&(x=F,_=A),A<z?l=A:p=A}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,l){const p=Math.min(i.x,l.x),_=Math.max(i.x,l.x),x=Math.min(i.y,l.y),A=Math.max(i.y,l.y);if(x<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new a.P(p,x),new a.P(_,A),new a.P(p,A),new a.P(_,x)],k=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const F of O){const U=this.pointRayIntersection(F);if(U.t<0)return!0;const V=this.rayIntersectionCoordinate(U);if(V.x<k||V.y<0||V.x>z||V.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(i,l){const p=a.a6.vec3.length(a.a6.vec3.sub([],this._camera.position,i)),_=this._zoomFromMercatorZ(p)+l;return p-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([l,p,_],x){const A=[l,p,_,1];a.a6.vec4.transformMat4(A,A,x);const O=A[3]=Math.max(A[3],1e-6);return A[0]/=O,A[1]/=O,A[2]/=O,A}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,i))}}getCameraToCenterDistance(i,l=this.zoom,p=this.worldSize){const _=a.bX(i,l,this.width,this.height,1024),x=i.pixelSpaceConversion(this.center.lat,p,_);let A=.5/Math.tan(.5*this._fov)*this.height*x;return this.isOrthographic&&(A=l1(1,A,c1(this.pitch>=15?1:this.pitch/15))),A}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.a6.mat4.multiply(i,i,this.globeMatrix),i}getFrustum(i){return a.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,this.projection.zAxisUnit==="meters")}}const Ja=(d,i)=>{if(i>0&&d.terrain&&a.w("Cutoff is currently disabled on terrain"),i<=0||d.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const l=d.transform,p=Math.max(Math.abs(l._zoom-(d.minCutoffZoom-1)),1),_=l.isLODDisabled(!1)?a.a7(60,45,l.pitch):a.a7(30,15,l.pitch),x=l._farZ-l._nearZ,A=i*l.height,O=((1-(k=_))*l.cameraToCenterDistance+k*(l._farZ+A))*p;var k;return{shouldRenderCutoff:_<1,uniformValues:{u_cutoff_params:[l._nearZ,l._farZ,(O-l._nearZ)/x,(O-A-l._nearZ)/x]}}},Sn={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class X2{constructor(i,l){this.aabb=i,this.lastCascade=l}}class Dt{add(i,l){const p=this.receivers[i.key];p!==void 0?(p.aabb.min[0]=Math.min(p.aabb.min[0],l.min[0]),p.aabb.min[1]=Math.min(p.aabb.min[1],l.min[1]),p.aabb.min[2]=Math.min(p.aabb.min[2],l.min[2]),p.aabb.max[0]=Math.max(p.aabb.max[0],l.max[0]),p.aabb.max[1]=Math.max(p.aabb.max[1],l.max[1]),p.aabb.max[2]=Math.max(p.aabb.max[2],l.max[2])):this.receivers[i.key]=new X2(l,null)}clear(){this.receivers={}}get(i){return this.receivers[i.key]}computeRequiredCascades(i,l,p){const _=a.c9.fromPoints(i.points);let x=0;for(const A in this.receivers){const O=this.receivers[A];if(!O||!_.intersectsAabb(O.aabb))continue;O.aabb.min=_.closestPoint(O.aabb.min),O.aabb.max=_.closestPoint(O.aabb.max);const k=O.aabb.getCorners();for(let z=0;z<p.length;z++){let F=!0;for(const U of k){const V=[U[0]*l,U[1]*l,U[2]];if(a.a6.vec3.transformMat4(V,V,p[z].matrix),V[0]<-1||V[0]>1||V[1]<-1||V[1]>1){F=!1;break}}if(O.lastCascade=z,x=Math.max(x,z),F)break}}return x+1}}class O6{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Dt,this._depthMode=new Jt(i.context.gl.LEQUAL,Jt.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,i.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),i.tp.registerParameter(Sn,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(Sn,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),i.tp.registerParameter(Sn,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),i.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const i of this._cascades)i.texture.destroy(),i.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,l){const p=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!l||!l.properties)return;const _=l.properties.get("shadow-intensity");if(!l.shadowsEnabled()||_<=0||(this._shadowLayerCount=p.style.order.reduce((J,ee)=>{const re=p.style._mergedLayers[ee];return J+(re.hasShadowPass()&&!re.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const x=p.context,A=Sn.shadowMapResolution,O=Sn.shadowMapResolution;if(this._cascades.length===0||Sn.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let J=0;J<Sn.cascadeCount;++J){const ee=p._shadowMapDebug,re=x.gl,oe=x.createFramebuffer(A,O,ee,"texture"),me=new a.T(x,{width:A,height:O,data:null},re.DEPTH_COMPONENT16);if(oe.depthAttachment.set(me.texture),ee){const ye=new a.T(x,{width:A,height:O,data:null},re.RGBA8);oe.colorAttachment.set(ye.texture)}this._cascades.push({framebuffer:oe,texture:me,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.bN,scale:0})}}this.shadowDirection=u7(l);let k=0;if(i.elevation){const J=i.elevation,ee=[1e4,-1e4];J.visibleDemTiles.filter(re=>re.dem).forEach(re=>{const oe=re.dem.tree;ee[0]=Math.min(ee[0],oe.minimums[0]),ee[1]=Math.max(ee[1],oe.maximums[0])}),ee[0]!==1e4&&(k=(ee[1]-ee[0])*J.exaggeration())}const z=1.5*i.cameraToCenterDistance,F=3*z,U=new Float64Array(16);for(let J=0;J<this._cascades.length;++J){const ee=this._cascades[J];let re=i.height/50,oe=1;Sn.cascadeCount===1?oe=F:J===0?oe=z:(re=z,oe=F);const[me,ye]=f7(i,this.shadowDirection,re,oe,Sn.shadowMapResolution,k);ee.scale=i.scale,ee.matrix=me,ee.boundingSphereRadius=ye,a.a6.mat4.invert(U,ee.matrix),ee.frustum=a.bN.fromInvProjectionMatrix(U,1,0,!0),ee.far=oe}const V=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[V].far,this._cascades[V].far],this._uniformValues.u_shadow_intensity=_,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Sn.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Sn.shadowMapResolution,this._uniformValues.u_shadowmap_0=Mi.ShadowMap0,this._uniformValues.u_shadowmap_1=Mi.ShadowMap0+1,this._groundShadowTiles=p.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const q=p.transform.elevation;for(const J of this._groundShadowTiles){let ee={min:0,max:0};if(q){const re=q.getMinMaxForTile(J);re&&(ee=re)}this.addShadowReceiver(J.toUnwrapped(),ee.min,ee.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(i){this._enabled=i}drawShadowPass(i,l){if(!this.enabled)return;const p=this.painter,_=p.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(p.transform.getFrustum(0),p.transform.worldSize,this._cascades),_.viewport.set([0,0,Sn.shadowMapResolution,Sn.shadowMapResolution]);for(let x=0;x<this._numCascadesToRender;++x){p.currentShadowCascade=x,_.bindFramebuffer.set(this._cascades[x].framebuffer.framebuffer),_.clear({color:a.bz.white,depth:1});for(const A of i.order){const O=i._mergedLayers[A];if(!O.hasShadowPass()||O.isHidden(p.transform.zoom))continue;const k=i.getLayerSourceCache(O),z=k?l[k.id]:void 0;(O.type==="model"||z&&z.length)&&p.renderLayer(p,k,O,z)}}p.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const i=this.painter,l=i.style,p=i.context,_=l.directionalLight,x=l.ambientLight;if(!_||!x)return;const A=[],O=Ja(i,i.longestCutoffRange);O.shouldRenderCutoff&&A.push("RENDER_CUTOFF");const k=h7(l,_,x),z=new Jt(p.gl.LEQUAL,Jt.ReadOnly,i.depthRangeFor3D);for(const F of this._groundShadowTiles){const U=F.toUnwrapped(),V=i.isTileAffectedByFog(F),q=i.getOrCreateProgram("groundShadow",{defines:A,overrideFog:V});this.setupShadows(U,q),i.uploadCommonUniforms(p,q,U,null,O);const J={u_matrix:i.transform.calculateProjMatrix(U),u_ground_shadow_factor:k};q.draw(i,p.gl.TRIANGLES,z,pr.disabled,Pr.multiply,or.disabled,J,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,{},i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Pr.unblended:Pr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){const l=this.painter.transform,p=l.calculatePosMatrix(i,l.worldSize);return a.a6.mat4.multiply(p,this._cascades[this.painter.currentShadowCascade].matrix,p),Float32Array.from(p)}calculateShadowPassMatrixFromMatrix(i){return a.a6.mat4.multiply(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,l,p,_=0){if(!this.enabled)return;const x=this.painter.transform,A=this.painter.context,O=A.gl,k=this._uniformValues,z=new Float64Array(16),F=x.calculatePosMatrix(i,x.worldSize);for(let U=0;U<this._cascades.length;U++)a.a6.mat4.multiply(z,this._cascades[U].matrix,F),k[U===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),A.activeTexture.set(O.TEXTURE0+Mi.ShadowMap0+U),this._cascades[U].texture.bind(O.NEAREST,O.CLAMP_TO_EDGE);if(this.useNormalOffset=!!p,this.useNormalOffset){const U=a.c8(i.canonical),V=2/x.tileSize*a.ab/Sn.shadowMapResolution,q=V*this._cascades[0].boundingSphereRadius,J=V*this._cascades[this._cascades.length-1].boundingSphereRadius,ee=(p==="vector-tile"?1:3)/Math.pow(2,_-i.canonical.z-(1-x.zoom+Math.floor(x.zoom)));k.u_shadow_normal_offset=[U,q*ee,J*ee],k.u_shadow_bias=[6e-5,.0012,.012]}else k.u_shadow_bias=[36e-5,.0012,.012];l.setShadowUniformValues(A,k)}setupShadowsFromMatrix(i,l,p=!1){if(!this.enabled)return;const _=this.painter.context,x=_.gl,A=this._uniformValues,O=new Float64Array(16);for(let k=0;k<Sn.cascadeCount;k++)a.a6.mat4.multiply(O,this._cascades[k].matrix,i),A[k===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(O),_.activeTexture.set(x.TEXTURE0+Mi.ShadowMap0+k),this._cascades[k].texture.bind(x.NEAREST,x.CLAMP_TO_EDGE);if(this.useNormalOffset=p,p){const k=Sn.normalOffset;A.u_shadow_normal_offset=[1,k,k],A.u_shadow_bias=[6e-5,.0012,.012]}else A.u_shadow_bias=[36e-5,.0012,.012];l.setShadowUniformValues(_,A)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,l,p,_){if(_[2]>=0)return{};const x=function(k,z,F){const U=F/(1<<k.canonical.z);return new a.c9([k.canonical.x*U+k.wrap*F,k.canonical.y*U+k.wrap*F,0],[(k.canonical.x+1)*U+k.wrap*F,(k.canonical.y+1)*U+k.wrap*F,z])}(i,l,p).getCorners(),A=l/-_[2];_[0]<0?(a.a6.vec3.add(x[0],x[0],[_[0]*A,0,0]),a.a6.vec3.add(x[3],x[3],[_[0]*A,0,0])):_[0]>0&&(a.a6.vec3.add(x[1],x[1],[_[0]*A,0,0]),a.a6.vec3.add(x[2],x[2],[_[0]*A,0,0])),_[1]<0?(a.a6.vec3.add(x[0],x[0],[0,_[1]*A,0]),a.a6.vec3.add(x[1],x[1],[0,_[1]*A,0])):_[1]>0&&(a.a6.vec3.add(x[2],x[2],[0,_[1]*A,0]),a.a6.vec3.add(x[3],x[3],[0,_[1]*A,0]));const O={};return O.vertices=x,O.planes=[u1(x[1],x[0],x[4]),u1(x[2],x[1],x[5]),u1(x[3],x[2],x[6]),u1(x[0],x[3],x[7])],O}addShadowReceiver(i,l,p){this._receivers.add(i,a.c9.fromTileIdAndHeight(i,l,p))}getMaxCascadeForTile(i){const l=this._receivers.get(i);return l&&l.lastCascade?l.lastCascade:0}}function u1(d,i,l){const p=a.a6.vec3.sub([],l,i),_=a.a6.vec3.sub([],d,i),x=a.a6.vec3.cross([],p,_),A=a.a6.vec3.length(x);return A===0?[0,0,1,0]:(a.a6.vec3.scale(x,x,1/A),[x[0],x[1],x[2],-a.a6.vec3.dot(x,i)])}function u7(d){const i=d.properties.get("direction"),l=a.c7(i.x,i.y,i.z);l[2]=a.ap(l[2],0,75);const p=a.ca([l[0],l[1],l[2]]);return a.a6.vec3.fromValues(p.x,p.y,p.z)}function h7(d,i,l){const p=i.properties.get("color"),_=i.properties.get("intensity"),x=i.properties.get("direction"),A=[x.x,x.y,x.z],O=l.properties.get("color"),k=l.properties.get("intensity"),z=Math.max(a.a6.vec3.dot([0,0,1],A),0),F=[0,0,0];a.a6.vec3.scale(F,O.toRenderColor(d.getLut(i.scope)).toArray01Linear().slice(0,3),k);const U=[0,0,0];return a.a6.vec3.scale(U,p.toRenderColor(d.getLut(l.scope)).toArray01Linear().slice(0,3),z*_),a.cb([F[0]>0?F[0]/(F[0]+U[0]):0,F[1]>0?F[1]/(F[1]+U[1]):0,F[2]>0?F[2]/(F[2]+U[2]):0])}function f7(d,i,l,p,_,x){const A=d.zoom,O=d.scale,k=d.worldSize,z=1/k,F=d.aspect,U=Math.sqrt(1+F*F)*Math.tan(.5*d.fovX),V=U*U,q=p-l,J=p+l;let ee,re;V>q/J?(ee=p,re=p*U):(ee=.5*J*(1+V),re=.5*Math.sqrt(q*q+2*(p*p+l*l)*V+J*J*V*V));const oe=d.projection.pixelsPerMeter(d.center.lat,k),me=d._camera.getCameraToWorldMercator(),ye=[0,0,-ee*z];a.a6.vec3.transformMat4(ye,ye,me);let de=re*z;const be=d._edgeInsets;if(!(be.left===0&&be.top===0&&be.right===0&&be.bottom===0||be.left===be.right&&be.top===be.bottom)){const wt=d._camera.getWorldToCamera(d.worldSize,d.projection.zAxisUnit==="meters"?oe:1),Tt=d._camera.getCameraToClipPerspective(d._fov,d.width/d.height,l,p);Tt[8]=2*-d.centerOffset.x/d.width,Tt[9]=2*d.centerOffset.y/d.height;const ft=new Float64Array(16);a.a6.mat4.mul(ft,Tt,wt);const gt=new Float64Array(16);a.a6.mat4.invert(gt,ft);const Yt=a.bN.fromInvProjectionMatrix(gt,k,A,!0);for(const It of Yt.points){const jt=((xe=It)[0]/=O,xe[1]/=O,xe[2]=a.bD(xe[2],d._center.lat),xe);de=Math.max(de,a.a6.vec3.len(a.a6.vec3.subtract([],ye,jt)))}}var xe;de*=_/(_-1);const Ce=Math.acos(i[2]),Se=Math.atan2(-i[0],-i[1]),Ie=new ol;Ie.position=ye,Ie.setPitchBearing(Ce,Se);const ze=Ie.getWorldToCamera(k,oe),ke=de*k,Re=Math.min(d._mercatorZfromZoom(17)*k*-2,-2*ke),Ve=Ie.getCameraToClipOrthographic(-ke,ke,-ke,ke,Re,(ke+x*oe)/i[2]),nt=new Float64Array(16);a.a6.mat4.multiply(nt,Ve,ze);const dt=a.a6.vec3.fromValues(Math.floor(1e6*ye[0])/1e6*k,Math.floor(1e6*ye[1])/1e6*k,0),rt=.5*_,xt=[0,0,0];a.a6.vec3.transformMat4(xt,dt,nt),a.a6.vec3.scale(xt,xt,rt);const Ge=[Math.floor(xt[0]),Math.floor(xt[1]),Math.floor(xt[2])],ct=[0,0,0];a.a6.vec3.sub(ct,xt,Ge),a.a6.vec3.scale(ct,ct,-1/rt);const at=new Float64Array(16);return a.a6.mat4.identity(at),a.a6.mat4.translate(at,at,ct),a.a6.mat4.multiply(nt,at,nt),[nt,ke]}class Qa extends a.E{constructor(i){super(),this.requestManager=i,this.models={"":{}},this.numModelsLoading={}}loadModel(i,l){return a.aG(this.requestManager.transformRequest(l,a.R.Model).url).then(p=>{if(!p)return;const _=a.aH(p),x=new a.aI(i,void 0,void 0,_);return x.computeBoundsAndApplyParent(),x}).catch(p=>{if(p&&p.status===404)return null;this.fire(new a.t(new Error(`Could not load model ${i} from ${l}: ${p.message}`)))})}load(i,l){this.models[l]||(this.models[l]={});const p=Object.keys(i);this.numModelsLoading[l]=(this.numModelsLoading[l]||0)+p.length;const _=[];for(const x of p)_.push(this.loadModel(x,i[x]));Promise.allSettled(_).then(x=>{for(let A=0;A<x.length;A++){const{status:O,value:k}=x[A];O==="fulfilled"&&k&&(this.models[l][p[A]]={model:k,numReferences:1})}this.numModelsLoading[l]-=p.length,this.fire(new a.x("data",{dataType:"style"}))}).catch(x=>{this.fire(new a.t(new Error(`Could not load models: ${x.message}`)))})}isLoaded(){for(const i in this.numModelsLoading)if(this.numModelsLoading[i]>0)return!1;return!0}hasModel(i,l){return!!this.getModel(i,l)}getModel(i,l){return this.models[l]||(this.models[l]={}),this.models[l][i]?this.models[l][i].model:void 0}addModel(i,l,p){this.models[p]||(this.models[p]={}),this.hasModel(i,p)&&this.models[p][i].numReferences++,this.load({[i]:this.requestManager.normalizeModelURL(l)},p)}addModels(i,l){this.models[l]||(this.models[l]={});const p={};for(const _ in i)this.models[l][_]={},p[_]=this.requestManager.normalizeModelURL(i[_]);this.load(p,l)}addModelsFromBucket(i,l){this.models[l]||(this.models[l]={});const p={};for(const _ of i)this.hasModel(_,l)?this.models[l][_].numReferences++:p[_]=this.requestManager.normalizeModelURL(_);this.load(p,l)}removeModel(i,l){if(this.models[l]&&this.models[l][i]&&(this.models[l][i].numReferences--,this.models[l][i].numReferences===0)){const p=this.models[l][i].model;delete this.models[l][i],p.destroy()}}listModels(i){return this.models[i]||(this.models[i]={}),Object.keys(this.models[i])}upload(i,l){this.models[l]||(this.models[l]={});for(const p in this.models[l])this.models[l][p].model&&this.models[l][p].model.upload(i.context)}}const Y2=new a.a0({data:new a.a1(a._.colorTheme.data)}),wo=(d,i)=>$e(d,i&&i.filter(l=>l.identifier!=="source.canvas")),d7=a.ar(Fr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),h1=a.ar(Fr,["setCenter","setZoom","setBearing","setPitch"]),R6={version:8,layers:[],sources:{}},D6={duration:300,delay:0};class Ao extends a.E{constructor(i,l={}){super(),this.map=i,this.scope=l.scope||"",this.globalId=null,this.fragments=[],this.importDepth=l.importDepth||0,this.importsCache=l.importsCache||new Map,this.resolvedImports=l.resolvedImports||new Set,this.transition=a.l({},D6),this._buildingIndex=new $2(this),this.crossTileSymbolIndex=new a7,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=l.styleChanges||new Vr,this.dispatcher=l.dispatcher?l.dispatcher:new a.cd(a.ce(),this),l.imageManager?this.imageManager=l.imageManager:(this.imageManager=new Tn,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=l.glyphManager?l.glyphManager:new a.cf(i._requestManager,l.localFontFamily?a.cg.all:l.localIdeographFontFamily?a.cg.ideographs:a.cg.none,l.localFontFamily||l.localIdeographFontFamily),l.modelManager?this.modelManager=l.modelManager:(this.modelManager=new Qa(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=l.configOptions?l.configOptions:new Map,this._configDependentLayers=l.configDependentLayers?l.configDependentLayers:new Set,this._config=l.config,this._initialConfig=l.initialConfig,this.dispatcher.broadcast("setReferrer",a.ch());const p=this;this._rtlTextPluginCallback=Ao.registerForPluginStateChange(_=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(x,A)=>{if(a.ci(x),A&&A.every(O=>O))for(const O in p._sourceCaches){const k=p._sourceCaches[O],z=k.getSource().type;z!=="vector"&&z!=="geojson"||k.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const x=this.getOwnSource(_.sourceId);if(x&&x.vectorLayerIds)for(const A in this._layers){const O=this._layers[A];O.source===x.id&&this._validateLayer(O)}})}load(i){return i?(typeof i=="string"?this.loadURL(i):this.loadJSON(i),this):this}_getGlobalId(i){if(!i)return null;if(typeof i=="string"){if(a.f(i))return i;const l=a.cj(i);if(!l.startsWith("http"))try{return new URL(l,location.href).toString()}catch{return l}return l}return`json://${a.ck(JSON.stringify(i))}`}_diffStyle(i,l,p){this.globalId=this._getGlobalId(i);const _=(x,A)=>{try{A(null,this.setState(x,p))}catch(O){A(O,!1)}};if(typeof i=="string"){const x=this.map._requestManager.normalizeStyleURL(i),A=this.map._requestManager.transformRequest(x,a.R.Style);a.n(A,(O,k)=>{O?this.fire(new a.t(O)):k&&_(k,l)})}else typeof i=="object"&&_(i,l)}loadURL(i,l={}){this.fire(new a.x("dataloading",{dataType:"style"}));const p=typeof l.validate=="boolean"?l.validate:!a.f(i);this.globalId=this._getGlobalId(i),i=this.map._requestManager.normalizeStyleURL(i,l.accessToken),this.resolvedImports.add(i);const _=this.importsCache.get(i);if(_)return this._load(_,p);const x=this.map._requestManager.transformRequest(i,a.R.Style);this._request=a.n(x,(A,O)=>{if(this._request=null,A)this.fire(new a.t(A));else if(O)return this.importsCache.set(i,O),this._load(O,p)})}loadJSON(i,l={}){this.fire(new a.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(i),this._request=a.q.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new a.x("dataloading",{dataType:"style"})),this._load(R6,!1)}_loadImports(i,l,p){if(this.importDepth>=4)return a.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const _=[];for(const x of i){const A=this._createFragmentStyle(x),O=new Promise(F=>{A.once("style.import.load",F),A.once("error",F)}).then(()=>this.mergeAll());if(_.push(O),this.resolvedImports.has(x.url)){A.loadEmpty();continue}const k=x.data||this.importsCache.get(x.url);k?(A.loadJSON(k,{validate:l}),this._isInternalStyle(k)&&(A.globalId=null)):x.url?A.loadURL(x.url,{validate:l}):A.loadEmpty();const z={style:A,id:x.id,config:x.config};if(p){const F=this.fragments.findIndex(({id:U})=>U===p);this.fragments=this.fragments.slice(0,F).concat(z).concat(this.fragments.slice(F))}else this.fragments.push(z)}return Promise.allSettled(_)}getImportGlobalIds(i=this,l=new Set){for(const p of i.fragments)p.style.globalId&&l.add(p.style.globalId),this.getImportGlobalIds(p.style,l);return[...l.values()]}_createFragmentStyle(i){const l=this.scope?a.av(i.id,this.scope):i.id;let p;const _=this._initialConfig&&this._initialConfig[l];(i.config||_)&&(p=a.l({},i.config,_));const x=new Ao(this.map,{scope:l,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:p,configOptions:this.options,configDependentLayers:this._configDependentLayers});return x.setEventedParent(this.map,{style:x}),x}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(i){return this.isRootStyle()&&(i.fragment||!!i.schema&&i.fragment!==!1)}_load(i,l){const p=i.schema;if(this._isInternalStyle(i)){const A=a.l({},R6,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(A,l)}if(this.updateConfig(this._config,p),l&&wo(this,vo(i)))return;this._loaded=!0,this.stylesheet=a.cl(i);const _=()=>{for(const z in i.sources)this.addSource(z,i.sources[z],{validate:!1,isInitialLoad:!0});i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(i.glyphs,this.scope);const A=U2(this.stylesheet.layers);if(this._order=A.map(z=>z.id),this.stylesheet.light&&a.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const z=this.stylesheet.lights[0];this.light=new qe(z.properties,z.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new qe(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const z of A){const F=a.cq(z,this.scope,this._styleColorTheme.lut,this.options);F.configDependencies.size!==0&&this._configDependentLayers.add(F.fqid),F.setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize();const U=this.getOwnLayerSourceCache(F),V=!!this.directionalLight&&this.directionalLight.shadowsEnabled();U&&F.canCastShadows()&&V&&(U.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const O=this.stylesheet.terrain;O&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(O,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.x("data",{dataType:"style"}));const k=this.isRootStyle();i.imports?this._loadImports(i.imports,l).then(()=>{this._reloadImports(),this.fire(new a.x(k?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new a.x(k?"style.load":"style.import.load")))},x=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=x,x){const A=this._evaluateColorThemeData(x);this._loadColorTheme(A).then(()=>{_()}).catch(O=>{a.w(`Couldn't load color theme from the stylesheet: ${O}`),_()})}else this._styleColorTheme.lut=null,_()}isRootStyle(){return this.importDepth===0}mergeAll(){let i,l,p,_,x,A,O,k;const z={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(F=>{if(F.stylesheet){if(F.light!=null&&(i=F.light),F.stylesheet.lights)for(const U of F.stylesheet.lights)U.type==="ambient"&&F.ambientLight!=null&&(l=F.ambientLight),U.type==="directional"&&F.directionalLight!=null&&(p=F.directionalLight);_=this._prioritizeTerrain(_,F.terrain,F.stylesheet.terrain),F.stylesheet.fog&&F.fog!=null&&(x=F.fog),F.stylesheet.camera!=null&&(k=F.stylesheet.camera),F.stylesheet.projection!=null&&(A=F.stylesheet.projection),F.stylesheet.transition!=null&&(O=F.stylesheet.transition),z[F.scope]=F._styleColorTheme}}),this.light=i,this.ambientLight=l,this.directionalLight=p,this.fog=x,this._styleColorThemeForScope=z,_===null?delete this.terrain:this.terrain=_,this.camera=k||{"camera-projection":"perspective"},this.projection=A||{name:"mercator"},this.transition=a.l({},D6,O),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(i){const l=p=>{for(const _ of p.fragments)l(_.style);i(p)};l(this)}_prioritizeTerrain(i,l,p){const _=i&&i.drapeRenderMode===0;return p===null?l&&l.drapeRenderMode===0?l:_?i:null:l!=null&&(!i||_||l&&l.drapeRenderMode===1)?l:i}mergeTerrain(){let i;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(l=>{i=this._prioritizeTerrain(i,l.terrain,l.stylesheet.terrain)}),i===null?delete this.terrain:this.terrain=i}mergeProjection(){let i;this.forEachFragmentStyle(l=>{l.stylesheet.projection!=null&&(i=l.stylesheet.projection)}),this.projection=i||{name:"mercator"}}mergeSources(){const i={},l={},p={};this.forEachFragmentStyle(_=>{for(const x in _._sourceCaches){const A=a.av(x,_.scope);i[A]=_._sourceCaches[x]}for(const x in _._otherSourceCaches){const A=a.av(x,_.scope);l[A]=_._otherSourceCaches[x]}for(const x in _._symbolSourceCaches){const A=a.av(x,_.scope);p[A]=_._symbolSourceCaches[x]}}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=l,this._mergedSymbolSourceCaches=p}mergeLayers(){const i={},l=[],p={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(x=>{for(const A of x._order){const O=x._layers[A];if(O.type==="slot"){const k=a.cm(A);if(i[k])continue;i[k]=[]}O.slot&&i[O.slot]?i[O.slot].push(O):l.push(O)}}),this._mergedOrder=[];const _=(x=[])=>{for(const A of x)if(A.type==="slot"){const O=a.cm(A.id);i[O]&&_(i[O]),this._mergedSlots.push(O)}else{const O=a.av(A.id,A.scope);this._mergedOrder.push(O),p[O]=A,A.is3D()&&(this._has3DLayers=!0),A.type==="circle"&&(this._hasCircleLayers=!0),A.type==="symbol"&&(this._hasSymbolLayers=!0),A.type==="clip"&&(this._clipLayerPresent=!0)}};_(l),this._mergedOrder.sort((x,A)=>{const O=p[x],k=p[A];return O.hasInitialOcclusionOpacityProperties?k.is3D()?1:0:O.is3D()&&k.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=p,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=a.l({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(i){return i.data?function(l,p,_){const x=a.l({},p);for(const O of Object.keys(a._.colorTheme))x[O]===void 0&&(x[O]=a._.colorTheme[O].default);const A=new a.$(Y2,l,new Map(_));return A.setTransitionOrValue(x,_),A.untransitioned().possiblyEvaluate(new a.a3(0))}(this.scope,i,this.options).get("data"):null}_loadColorTheme(i){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const l=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((p,_)=>{const x="data:image/png;base64,";if(!i||i.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void p();let A=i;A.startsWith(x)||(A=x+A);const O="mapbox-reserved-lut",k=new Image;k.src=A,k.onerror=()=>{this._styleColorTheme.lutLoading=!1,_(new Error("Failed to load image data"))},k.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==l)return void p();this._styleColorTheme.lutLoading=!1;const{width:z,height:F,data:U}=a.q.getImageData(k);if(F>32)return void _(new Error("The height of the image must be less than or equal to 32 pixels."));if(z!==F*F)return void _(new Error("The width of the image must be equal to the height squared."));this.getImage(O)&&this.removeImage(O),this.addImage(O,{data:new a.r({width:z,height:F},U),pixelRatio:1,sdf:!1,version:0});const V=this.imageManager.getImage(O,this.scope);V?(this._styleColorTheme.lut={image:V.data,data:i},p()):_(new Error("Missing LUT image."))}})}getLut(i){const l=this._styleColorThemeForScope[i];return l?l.lut:null}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(l,p,_){let x,A,O;const k=a.q.devicePixelRatio>1?"@2x":"";let z=a.n(p.transformRequest(p.normalizeSpriteURL(l,k,".json"),a.R.SpriteJSON),(V,q)=>{z=null,O||(O=V,x=q,U())}),F=a.o(p.transformRequest(p.normalizeSpriteURL(l,k,".png"),a.R.SpriteImage),(V,q)=>{F=null,O||(O=V,A=q,U())});function U(){if(O)_(O);else if(x&&A){const V=a.q.getImageData(A),q={};for(const J in x){const{width:ee,height:re,x:oe,y:me,sdf:ye,pixelRatio:de,stretchX:be,stretchY:xe,content:Ce}=x[J],Se=new a.r({width:ee,height:re});a.r.copy(V,Se,{x:oe,y:me},{x:0,y:0},{width:ee,height:re},null),q[J]={data:Se,pixelRatio:de,sdf:ye,stretchX:be,stretchY:xe,content:Ce}}_(null,q)}}return{cancel(){z&&(z.cancel(),z=null),F&&(F.cancel(),F=null)}}}(i,this.map._requestManager,(l,p)=>{if(this._spriteRequest=null,l)this.fire(new a.t(l));else if(p)for(const _ in p)this.imageManager.addImage(_,this.scope,p[_]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.x("data",{dataType:"style"}))})}_validateLayer(i){const l=this.getOwnSource(i.source);if(!l)return;const p=i.sourceLayer;p&&(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(p)===-1)&&this.fire(new a.t(new Error(`Source layer "${p}" does not exist on source "${l.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:i}of this.fragments)if(!i.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((i,l)=>{const p=this.fragments[l];return p&&p.style&&(i.data=p.style.serialize()),i})}_serializeSources(){const i={};for(const l in this._sourceCaches){const p=this._sourceCaches[l].getSource();i[p.id]||(i[p.id]=p.serialize())}return i}_serializeLayers(i){const l=[];for(const p of i){const _=this._layers[p];_&&_.type!=="custom"&&l.push(_.serialize())}return l}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(i){return!!this.terrain&&i.isDraped(this.getLayerSourceCache(i))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(i){const l=this.getOwnLayer(i);if(l)return l;this.fire(new a.t(new Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){const l=this.getOwnSource(i);if(l)return l;this.fire(new a.t(new Error(`The source '${i}' does not exist in the map's style.`)))}precompilePrograms(i,l){const p=this.map.painter;if(p)for(let _=i.minzoom||0;_<(i.maxzoom||25.5);_++){const x=i.getProgramIds();if(x)for(const A of x){const O=i.getDefaultProgramParams(A,l.zoom,this._styleColorTheme.lut);O&&(p.style=this,this.fog&&(p._fogVisible=!0,O.overrideFog=!0,p.getOrCreateProgram(A,O)),p._fogVisible=!1,O.overrideFog=!1,p.getOrCreateProgram(A,O),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(O.overrideRtt=!0,p.getOrCreateProgram(A,O)))}}}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);const l=this.calculateLightsBrightness();i.brightness=l||0,l!==this._brightness&&(this._brightness=l,this.dispatcher.broadcast("setBrightness",l));const p=this._changes.isDirty();let _=!1;if(this._changes.isDirty()){const A=this._changes.getLayerUpdatesByScope();for(const O in A){const{updatedIds:k,removedIds:z}=A[O];(k||z)&&(this._updateWorkerLayers(O,k,z),_=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._changes.reset()}const x={};for(const A in this._mergedSourceCaches){const O=this._mergedSourceCaches[A];x[A]=O.used,O.used=!1,O.tileCoverLift=0}for(const A of this._mergedOrder){const O=this._mergedLayers[A];if(O.recalculate(i,this._availableImages),!O.isHidden(i.zoom)){const k=this.getLayerSourceCache(O);k&&(k.used=!0,k.tileCoverLift=Math.max(k.tileCoverLift,O.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(O,i)}):this.precompilePrograms(O,i))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&_&&this.mergeLayers();for(const A in x){const O=this._mergedSourceCaches[A];x[A]!==O.used&&O.getSource().fire(new a.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:O.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new a.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=this._changes.getUpdatedImages();if(i.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changes.resetUpdatedImages()}}_updateWorkerLayers(i,l,p){const _=this.getFragmentStyle(i);_&&this.dispatcher.broadcast("updateLayers",{layers:l?_._serializeLayers(l):[],scope:i,removedIds:p||[],options:_.options})}setState(i,l){if(this._checkLoaded(),wo(this,vo(i)))return!1;(i=a.cl(i)).layers=U2(i.layers);const p=function(A,O){if(!A)return[{command:Fr.setStyle,args:[O]}];let k=[];try{if(!a.bh(A.version,O.version))return[{command:Fr.setStyle,args:[O]}];if(a.bh(A.center,O.center)||k.push({command:Fr.setCenter,args:[O.center]}),a.bh(A.zoom,O.zoom)||k.push({command:Fr.setZoom,args:[O.zoom]}),a.bh(A.bearing,O.bearing)||k.push({command:Fr.setBearing,args:[O.bearing]}),a.bh(A.pitch,O.pitch)||k.push({command:Fr.setPitch,args:[O.pitch]}),a.bh(A.sprite,O.sprite)||k.push({command:Fr.setSprite,args:[O.sprite]}),a.bh(A.glyphs,O.glyphs)||k.push({command:Fr.setGlyphs,args:[O.glyphs]}),a.bh(A.imports,O.imports)||function(q=[],J=[],ee){J=J||[];const re=(q=q||[]).map(tl),oe=J.map(tl),me=q.reduce(Ql,{}),ye=J.reduce(Ql,{}),de=re.slice();let be,xe,Ce,Se;for(be=0,xe=0;be<re.length;be++)Ce=re[be],ye.hasOwnProperty(Ce)?xe++:(ee.push({command:Fr.removeImport,args:[Ce]}),de.splice(de.indexOf(Ce,xe),1));for(be=0,xe=0;be<oe.length;be++)Ce=oe[oe.length-1-be],de[de.length-1-be]!==Ce&&(me.hasOwnProperty(Ce)?(ee.push({command:Fr.removeImport,args:[Ce]}),de.splice(de.lastIndexOf(Ce,de.length-xe),1)):xe++,Se=de[de.length-be],ee.push({command:Fr.addImport,args:[ye[Ce],Se]}),de.splice(de.length-be,0,Ce));for(const Ie of J){const ze=me[Ie.id];ze&&!a.bh(ze,Ie)&&ee.push({command:Fr.updateImport,args:[Ie.id,Ie]})}}(A.imports,O.imports,k),a.bh(A.transition,O.transition)||k.push({command:Fr.setTransition,args:[O.transition]}),a.bh(A.light,O.light)||k.push({command:Fr.setLight,args:[O.light]}),a.bh(A.fog,O.fog)||k.push({command:Fr.setFog,args:[O.fog]}),a.bh(A.projection,O.projection)||k.push({command:Fr.setProjection,args:[O.projection]}),a.bh(A.lights,O.lights)||k.push({command:Fr.setLights,args:[O.lights]}),a.bh(A.camera,O.camera)||k.push({command:Fr.setCamera,args:[O.camera]}),!a.bh(A["color-theme"],O["color-theme"]))return[{command:Fr.setStyle,args:[O]}];const z={},F=[];(function(q,J,ee,re){let oe;for(oe in J=J||{},q=q||{})q.hasOwnProperty(oe)&&(J.hasOwnProperty(oe)||qr(oe,ee,re));for(oe in J){if(!J.hasOwnProperty(oe))continue;const me=J[oe];q.hasOwnProperty(oe)?a.bh(q[oe],me)||(q[oe].type==="geojson"&&me.type==="geojson"&&nr(q,J,oe)?ee.push({command:Fr.setGeoJSONSourceData,args:[oe,me.data]}):H4(oe,J,ee,re)):V2(oe,J,ee)}})(A.sources,O.sources,F,z);const U=[];A.layers&&A.layers.forEach(q=>{q.source&&z[q.source]?k.push({command:Fr.removeLayer,args:[q.id]}):U.push(q)});let V=A.terrain;V&&z[V.source]&&(k.push({command:Fr.setTerrain,args:[void 0]}),V=void 0),k=k.concat(F),a.bh(V,O.terrain)||k.push({command:Fr.setTerrain,args:[O.terrain]}),function(q,J,ee){J=J||[];const re=(q=q||[]).map(tl),oe=J.map(tl),me=q.reduce(Ql,{}),ye=J.reduce(Ql,{}),de=re.slice(),be=Object.create(null);let xe,Ce,Se,Ie,ze,ke,Re;for(xe=0,Ce=0;xe<re.length;xe++)Se=re[xe],ye.hasOwnProperty(Se)?Ce++:(ee.push({command:Fr.removeLayer,args:[Se]}),de.splice(de.indexOf(Se,Ce),1));for(xe=0,Ce=0;xe<oe.length;xe++)Se=oe[oe.length-1-xe],de[de.length-1-xe]!==Se&&(me.hasOwnProperty(Se)?(ee.push({command:Fr.removeLayer,args:[Se]}),de.splice(de.lastIndexOf(Se,de.length-Ce),1)):Ce++,ke=de[de.length-xe],ee.push({command:Fr.addLayer,args:[ye[Se],ke]}),de.splice(de.length-xe,0,Se),be[Se]=!0);for(xe=0;xe<oe.length;xe++)if(Se=oe[xe],Ie=me[Se],ze=ye[Se],!be[Se]&&!a.bh(Ie,ze))if(a.bh(Ie.source,ze.source)&&a.bh(Ie["source-layer"],ze["source-layer"])&&a.bh(Ie.type,ze.type)){for(Re in Ic(Ie.layout,ze.layout,ee,Se,null,Fr.setLayoutProperty),Ic(Ie.paint,ze.paint,ee,Se,null,Fr.setPaintProperty),a.bh(Ie.slot,ze.slot)||ee.push({command:Fr.setSlot,args:[Se,ze.slot]}),a.bh(Ie.filter,ze.filter)||ee.push({command:Fr.setFilter,args:[Se,ze.filter]}),a.bh(Ie.minzoom,ze.minzoom)&&a.bh(Ie.maxzoom,ze.maxzoom)||ee.push({command:Fr.setLayerZoomRange,args:[Se,ze.minzoom,ze.maxzoom]}),Ie)Ie.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Ic(Ie[Re],ze[Re],ee,Se,Re.slice(6),Fr.setPaintProperty):a.bh(Ie[Re],ze[Re])||ee.push({command:Fr.setLayerProperty,args:[Se,Re,ze[Re]]}));for(Re in ze)ze.hasOwnProperty(Re)&&!Ie.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Ic(Ie[Re],ze[Re],ee,Se,Re.slice(6),Fr.setPaintProperty):a.bh(Ie[Re],ze[Re])||ee.push({command:Fr.setLayerProperty,args:[Se,Re,ze[Re]]}))}else ee.push({command:Fr.removeLayer,args:[Se]}),ke=de[de.lastIndexOf(Se)+1],ee.push({command:Fr.addLayer,args:[ze,ke]})}(U,O.layers,k)}catch(z){console.warn("Unable to compute style diff:",z),k=[{command:Fr.setStyle,args:[O]}]}return k}(this.serialize(),i).filter(A=>!(A.command in h1));if(p.length===0)return!1;const _=p.filter(A=>!(A.command in d7));if(_.length>0)throw new Error(`Unimplemented: ${_.map(A=>A.command).join(", ")}.`);const x=[];return p.forEach(A=>{x.push(this[A.command].apply(this,A.args))}),l&&Promise.all(x).then(l),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(i,l){return this.getImage(i)?this.fire(new a.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,this.scope,l),this._afterImageUpdated(i),this)}updateImage(i,l){this.imageManager.updateImage(i,this.scope,l)}getImage(i){return this.imageManager.getImage(i,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._afterImageUpdated(i),this):this.fire(new a.t(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(i),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new a.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(i,l,p={}){return this._checkLoaded(),this._validate(De,`models.${i}`,l,null,p)||(this.modelManager.addModel(i,l,this.scope),this._changes.setDirty()),this}hasModel(i){return this.modelManager.hasModel(i,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this):this.fire(new a.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,l,p={}){if(this._checkLoaded(),this.getOwnSource(i)!==void 0)throw new Error(`There is already a source with ID "${i}".`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(Qs,`sources.${i}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const _=Xl(i,l,this.dispatcher,this);_.scope=this.scope,_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(_.id),source:_.serialize(),sourceId:_.id}));const x=A=>{const O=(A?"symbol:":"other:")+_.id,k=a.av(O,this.scope),z=this._sourceCaches[O]=new oo(k,_,A);(A?this._symbolSourceCaches:this._otherSourceCaches)[_.id]=z,z.onAdd(this.map)};x(!1),l.type!=="vector"&&l.type!=="geojson"||x(!0),_.onAdd&&_.onAdd(this.map),p.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();const l=this.getOwnSource(i);if(!l)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===i)return this.fire(new a.t(new Error(`Source "${i}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new a.t(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this.getOwnSourceCaches(i);for(const _ of p){const x=a.cm(_.id);delete this._sourceCaches[x],this._changes.discardSourceCacheUpdate(_.id),_.fire(new a.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(i,l){this._checkLoaded(),this.getOwnSource(i).setData(l),this._changes.setDirty()}getOwnSource(i){const l=this.getOwnSourceCache(i);return l&&l.getSource()}getOwnSources(){const i=[];for(const l in this._otherSourceCaches){const p=this.getOwnSourceCache(l);p&&i.push(p.getSource())}return i}areTilesLoaded(){const i=this._mergedSourceCaches;for(const l in i){const p=i[l]._tiles;for(const _ in p){const x=p[_];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;const l=this._getTransitionParameters();for(const _ of i){if(this._validate(Hl,"lights",_))return;switch(_.type){case"ambient":if(this.ambientLight){const x=this.ambientLight;x.set(_),x.updateTransitions(l)}else this.ambientLight=new Jr(_,vr||(vr=new a.a0({color:new a.a1(a._.properties_light_ambient.color),intensity:new a.a1(a._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const x=this.directionalLight;x.set(_),x.updateTransitions(l)}else this.directionalLight=new Jr(_,Yr||(Yr=new a.a0({direction:new a.ad(a._.properties_light_directional.direction),color:new a.a1(a._.properties_light_directional.color),intensity:new a.a1(a._.properties_light_directional.intensity),"cast-shadows":new a.a1(a._.properties_light_directional["cast-shadows"]),"shadow-intensity":new a.a1(a._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const p=new a.a3(this.z||0,l);this.ambientLight&&this.ambientLight.recalculate(p),this.directionalLight&&this.directionalLight.recalculate(p),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const i=this.directionalLight,l=this.ambientLight;if(!i||!l)return;const p=U=>.2126*(U[0]<=.03928?U[0]/12.92:Math.pow((U[0]+.055)/1.055,2.4))+.7152*(U[1]<=.03928?U[1]/12.92:Math.pow((U[1]+.055)/1.055,2.4))+.0722*(U[2]<=.03928?U[2]/12.92:Math.pow((U[2]+.055)/1.055,2.4)),_=i.properties.get("color").toRenderColor(null).toArray01(),x=i.properties.get("intensity"),A=i.properties.get("direction"),O=1-a.c7(A.x,A.y,A.z)[2]/90,k=p(_)*x*O,z=l.properties.get("color").toRenderColor(null).toArray01(),F=l.properties.get("intensity");return(k+p(z)*F)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const i=[];return this.directionalLight&&i.push(this.directionalLight.get()),this.ambientLight&&i.push(this.ambientLight.get()),i}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(!i)return this;if(a.cn(i)){const l=a.co(i),p=this.fragments.find(({id:x})=>x===l);if(!p)throw new Error(`Style import not found: ${i}`);const _=a.cm(i);return p.style.getFragmentStyle(_)}{const l=this.fragments.find(({id:p})=>p===i);if(!l)throw new Error(`Style import not found: ${i}`);return l.style}}getConfigProperty(i,l){const p=this.getFragmentStyle(i);if(!p)return null;const _=a.av(l,p.scope),x=p.options.get(_),A=x?x.value||x.default:null;return A?A.serialize():null}setConfigProperty(i,l,p){const _=this.getFragmentStyle(i);if(!_)return;const x=_.stylesheet.schema;if(!x||!x[l])return;const A=a.M(p);if(A.result!=="success")return void wo(this,A.value);const O=A.value.expression,k=a.av(l,_.scope),z=_.options.get(k);if(!z)return;let F;const{minValue:U,maxValue:V,stepValue:q,type:J,values:ee}=x[l],re=a.M(x[l].default);re.result==="success"&&(F=re.value.expression),F?(this.options.set(k,{...z,value:O,default:F,minValue:U,maxValue:V,stepValue:q,type:J,values:ee}),this.updateConfigDependencies(l)):this.fire(new a.t(new Error(`No schema defined for the config option "${l}" in the "${i}" fragment.`)))}getConfig(i){const l=this.getFragmentStyle(i);if(!l)return null;const p=l.stylesheet.schema;if(!p)return null;const _={};for(const x in p){const A=a.av(x,l.scope),O=l.options.get(A),k=O?O.value||O.default:null;_[x]=k?k.serialize():null}return _}setConfig(i,l){const p=this.getFragmentStyle(i);p&&(p.updateConfig(l,p.stylesheet.schema),this.updateConfigDependencies())}getSchema(i){const l=this.getFragmentStyle(i);return l?l.stylesheet.schema:null}setSchema(i,l){const p=this.getFragmentStyle(i);p&&(p.stylesheet.schema=l,p.updateConfig(p._config,l),this.updateConfigDependencies())}updateConfig(i,l){if(this._config=i,i||l)if(l)for(const p in l){let _,x;const A=a.M(l[p].default);if(A.result==="success"&&(_=A.value.expression),i&&i[p]!==void 0){const V=a.M(i[p]);V.result==="success"&&(x=V.value.expression)}const{minValue:O,maxValue:k,stepValue:z,type:F,values:U}=l[p];if(_){const V=a.av(p,this.scope);this.options.set(V,{default:_,value:x,minValue:O,maxValue:k,stepValue:z,type:F,values:U})}else this.fire(new a.t(new Error(`No schema defined for config option "${p}".`)))}else this.fire(new a.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(i){for(const l of this._configDependentLayers){const p=this.getLayer(l);if(p){if(i&&!p.configDependencies.has(i))continue;p.possiblyEvaluateVisibility(),this._updateLayer(p)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(l=>{if(l._styleColorTheme.colorTheme){const p=l._evaluateColorThemeData(l._styleColorTheme.colorTheme);(!l._styleColorTheme.lut&&p!==""||l._styleColorTheme.lut&&p!==l._styleColorTheme.lut.data)&&l.setColorTheme(l._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(i,l,p={}){this._checkLoaded();const _=i.id;if(this._layers[_])return void this.fire(new a.t(new Error(`Layer with id "${_}" already exists on this map`)));let x;if(i.type==="custom"){if(wo(this,a.cp(i)))return;x=a.cq(i,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof i.source=="object"&&(this.addSource(_,i.source),i=a.cl(i),i=a.l(i,{source:_})),this._validate(Qe,`layers.${_}`,i,{arrayIndex:-1},p))return;x=a.cq(i,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(x),x.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[x.id]=x.serialize()}x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid);let A=this._order.length;if(l){const F=this._order.indexOf(l);if(F===-1)return void this.fire(new a.t(new Error(`Layer with id "${l}" does not exist on this map.`)));x.slot===this._layers[l].slot?A=F:a.w(`Layer with id "${l}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=x;const O=this.getOwnLayerSourceCache(x),k=!!this.directionalLight&&this.directionalLight.shadowsEnabled();O&&x.canCastShadows()&&k&&(O.castsShadows=!0);const z=this._changes.getRemovedLayer(x);if(z&&x.source&&O&&x.type!=="custom"){this._changes.discardLayerRemoval(x);const F=a.av(x.source,x.scope);z.type!==x.type?this._changes.updateSourceCache(F,"clear"):(this._changes.updateSourceCache(F,"reload"),O.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),x.scope=this.scope,this.mergeLayers()}moveLayer(i,l){this._checkLoaded();const p=this._checkLayer(i);if(!p||i===l)return;const _=this._order.indexOf(i);this._order.splice(_,1);let x=this._order.length;if(l){const A=this._order.indexOf(l);if(A===-1)return void this.fire(new a.t(new Error(`Layer with id "${l}" does not exist on this map.`)));p.slot===this._layers[l].slot?x=A:a.w(`Layer with id "${l}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(x,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(i){this._checkLoaded();const l=this._checkLayer(i);if(!l)return;l.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),delete this._layers[i],delete this._serializedLayers[i],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(l.fqid),this._changes.removeLayer(l);const _=this.getOwnLayerSourceCache(l);if(_&&_.castsShadows){let x=!1;for(const A in this._layers)if(this._layers[A].source===l.source&&this._layers[A].canCastShadows()){x=!0;break}_.castsShadows=x}l.onRemove&&l.onRemove(this.map),this.mergeLayers()}getOwnLayer(i){return this._layers[i]}hasLayer(i){return i in this._mergedLayers}hasLayerType(i){for(const l in this._layers)if(this._layers[l].type===i)return!0;return!1}setLayerZoomRange(i,l,p){this._checkLoaded();const _=this._checkLayer(i);_&&(_.minzoom===l&&_.maxzoom===p||(l!=null&&(_.minzoom=l),p!=null&&(_.maxzoom=p),this._updateLayer(_)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(i,l){this._checkLoaded();const p=this._checkLayer(i);p&&p.slot!==l&&(p.slot=l,this._updateLayer(p))}setFilter(i,l,p={}){this._checkLoaded();const _=this._checkLayer(i);if(_&&!a.bh(_.filter,l))return l==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(ae,`layers.${_.id}.filter`,l,{layerType:_.type},p)||(_.filter=a.cl(l),this._updateLayer(_)))}getFilter(i){const l=this._checkLayer(i);if(l)return a.cl(l.filter)}setLayoutProperty(i,l,p,_={}){this._checkLoaded();const x=this._checkLayer(i);if(x&&!a.bh(x.getLayoutProperty(l),p)){if(p!=null&&(!_||_.validate!==!1)&&wo(x,we.call(vo,{key:`layers.${i}.layout.${l}`,layerType:x.type,objectKey:l,value:p,styleSpec:a._,style:{glyphs:!0,sprite:!0}})))return;x.setLayoutProperty(l,p),x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid),this._updateLayer(x)}}getLayoutProperty(i,l){const p=this._checkLayer(i);if(p)return p.getLayoutProperty(l)}setPaintProperty(i,l,p,_={}){this._checkLoaded();const x=this._checkLayer(i);if(!x||a.bh(x.getPaintProperty(l),p)||p!=null&&(!_||_.validate!==!1)&&wo(x,ue.call(vo,{key:`layers.${i}.paint.${l}`,layerType:x.type,objectKey:l,value:p,styleSpec:a._})))return;const A=x.setPaintProperty(l,p);x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid),A&&this._updateLayer(x),this._changes.updatePaintProperties(x)}getPaintProperty(i,l){const p=this._checkLayer(i);if(p)return p.getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const p=i.source,_=i.sourceLayer,x=this._checkSource(p);if(!x)return;const A=x.type;if(A==="geojson"&&_)return void this.fire(new a.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(A==="vector"&&!_)return void this.fire(new a.t(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new a.t(new Error("The feature id parameter must be provided.")));const O=this.getOwnSourceCaches(p);for(const k of O)k.setFeatureState(_,i.id,l)}removeFeatureState(i,l){this._checkLoaded();const p=i.source,_=this._checkSource(p);if(!_)return;const x=_.type,A=x==="vector"?i.sourceLayer:void 0;if(x==="vector"&&!A)return void this.fire(new a.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new a.t(new Error("A feature id is required to remove its specific state property.")));const O=this.getOwnSourceCaches(p);for(const k of O)k.removeFeatureState(A,i.id,l)}getFeatureState(i){this._checkLoaded();const l=i.source,p=i.sourceLayer,_=this._checkSource(l);if(_){if(_.type!=="vector"||p)return i.id===void 0&&this.fire(new a.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(l)[0].getFeatureState(p,i.id);this.fire(new a.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=a.l({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return a.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const i=this.getTerrain(),l=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return a.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:l,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},p=>p!==void 0)}_updateLayer(i){this._changes.updateLayer(i);const l=this.getLayerSourceCache(i),p=a.av(i.source,i.scope),_=this._changes.getUpdatedSourceCaches();i.source&&!_[p]&&l&&l.getSource().type!=="raster"&&(this._changes.updateSourceCache(p,"reload"),l.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const l=O=>this._mergedLayers[O].is3D(),p=this.order,_={},x=[];for(let O=p.length-1;O>=0;O--){const k=p[O];if(l(k)){_[k]=O;for(const z of i){const F=z[k];if(F)for(const U of F)x.push(U)}}}x.sort((O,k)=>k.intersectionZ-O.intersectionZ);const A=[];for(let O=p.length-1;O>=0;O--){const k=p[O];if(l(k))for(let z=x.length-1;z>=0;z--){const F=x[z].feature;if(F.layer&&_[F.layer.id]<O)break;A.push(F),x.pop()}else for(const z of i){const F=z[k];if(F)for(const U of F)A.push(U.feature)}}return A}queryRenderedFeatures(i,l,p){l&&l.filter&&this._validate(ae,"queryRenderedFeatures.filter",l.filter,null,l),l.scope=this.scope,l.availableImages=this._availableImages,l.serializedLayers=this._serializedLayers;const _={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new a.t(new Error("parameters.layers must be an Array."))),[];for(const z of l.layers){const F=this._mergedLayers[z];if(!F)return this.fire(new a.t(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];_[F.source]=!0}}const x=[],A=l.serializedLayers||{},O=l&&l.layers?l.layers.some(z=>{const F=this.getLayer(z);return F&&F.is3D()}):this.has3DLayers(),k=An.createFromScreenPoints(i,p);for(const z in this._mergedSourceCaches){const F=this._mergedSourceCaches[z].getSource();if(!F||F.scope!==l.scope)continue;const U=this._mergedSourceCaches[z].getSource().id;l.layers&&!_[U]||x.push(F2(this._mergedSourceCaches[z],this._mergedLayers,A,k,l,p,O,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(z,F,U,V,q,J,ee){const re={},oe=J.queryRenderedSymbols(V),me=[];for(const ye of Object.keys(oe).map(Number))me.push(ee[ye]);me.sort(Yl);for(const ye of me){const de=ye.featureIndex.lookupSymbolFeatures(oe[ye.bucketInstanceId],F,ye.bucketIndex,ye.sourceLayerIndex,q.filter,q.layers,q.availableImages,z);for(const be in de){const xe=re[be]=re[be]||[],Ce=de[be];Ce.sort((Se,Ie)=>{const ze=ye.featureSortOrder;if(ze){const ke=ze.indexOf(Se.featureIndex);return ze.indexOf(Ie.featureIndex)-ke}return Ie.featureIndex-Se.featureIndex});for(const Se of Ce)xe.push(Se)}}for(const ye in re)re[ye].forEach(de=>{const be=de.feature,xe=U(z[ye]);if(!xe)return;const Ce=xe.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ce});return re}(this._mergedLayers,A,this.getLayerSourceCache.bind(this),k.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,l){l&&l.filter&&this._validate(ae,"querySourceFeatures.filter",l.filter,null,l);const p=this.getOwnSourceCaches(i);let _=[];for(const x of p)_=_.concat(Pc(x,l));return _}addSourceType(i,l,p){return Ao.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(Ao.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},p):p(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(i,l,p={}){this._checkLoaded();const _=this.light.getLight();let x=!1;for(const O in i)if(!a.bh(i[O],_[O])){x=!0;break}if(!x)return;const A=this._getTransitionParameters();this.light.setLight(i,l,p),this.light.updateTransitions(A)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&a.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(i,l=1){if(this._checkLoaded(),!i)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),l===0&&delete this.terrain,i===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let p=i;const _=i.source==null;if(l===1){if(this.disableElevatedTerrain)return;if(typeof p.source=="object"){const O="terrain-dem-src";this.addSource(O,p.source),p=a.cl(p),p=a.l(p,{source:O})}const x=a.l({},p),A={};if(this.terrain&&_){x.source=this.terrain.get().source;const O=this.terrain?this.getFragmentStyle(this.terrain.scope):null;O&&(A.style=O.serialize())}if(this._validate(Sc,"terrain",x,A))return}if(!this.terrain||this.terrain.scope!==this.scope&&!_||this.terrain&&l!==this.terrain.drapeRenderMode){if(!p)return;this._createTerrain(p,l),this.fire(new a.x("data",{dataType:"style"}))}else{const x=this.terrain,A=x.get();for(const O of Object.keys(a._.terrain))!p.hasOwnProperty(O)&&a._.terrain[O].default&&(p[O]=a._.terrain[O].default);for(const O in i)if(!a.bh(i[O],A[O])){x.set(i,this.options),this.stylesheet.terrain=i;const k=this._getTransitionParameters({duration:0});x.updateTransitions(k),this.fire(new a.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const l=this.fog=new Gr(i,this.map.transform,this.scope,this.options);this.stylesheet.fog=l.get();const p=this._getTransitionParameters({duration:0});l.updateTransitions(p)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog;if(!a.bh(l.get(),i)){l.set(i,this.options),this.stylesheet.fog=l.get();const p=this._getTransitionParameters({duration:0});l.updateTransitions(p)}}else this._createFog(i);this._markersNeedUpdate=!0}setColorTheme(i){this._checkLoaded();const l=()=>{for(const _ in this._layers)this._layers[_].lut=this._styleColorTheme.lut;for(const _ in this._sourceCaches)this._sourceCaches[_].clearTiles()};if(this._styleColorTheme.colorTheme=i,!i)return this._styleColorTheme.lut=null,void l();const p=this._evaluateColorThemeData(i);this._loadColorTheme(p).then(()=>{this.fire(new a.x("colorthemeset")),l()}).catch(_=>{a.w(`Couldn't set color theme: ${_}`)})}_getTransitionParameters(i){return{now:a.q.now(),transition:a.l(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;const i=[],l=[];for(const p of this._mergedOrder)this.isLayerDraped(this._mergedLayers[p])?i.push(p):l.push(p);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...l)}_createTerrain(i,l){const p=this.terrain=new lt(i,l,this.scope,this.options);l===1&&(this.stylesheet.terrain=i),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const _=this._getTransitionParameters({duration:0});p.updateTransitions(_)}_force3DLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="fill-extrusion"&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="symbol"&&this._updateLayer(l)}}_validate(i,l,p,_,x={}){if(x&&x.validate===!1)return!1;const A=a.l({},this.serialize());return wo(this,i.call(vo,a.l({key:l,style:A,value:p,styleSpec:a._},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles(),this._mergedSourceCaches[i].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(i){const l=this.getSourceCaches(i);for(const p of l)p.clearTiles()}clearSources(){for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles()}reloadSource(i){const l=this.getSourceCaches(i);for(const p of l)p.resume(),p.reload()}reloadSources(){for(const i of this.getSources())i.reload&&i.reload()}updateSources(i){let l;this.directionalLight&&(l=u7(this.directionalLight));for(const p in this._mergedSourceCaches)this._mergedSourceCaches[p].update(i,void 0,void 0,l)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const l=this._sourceCaches[i];l.resume(),l.reload()}}_updatePlacement(i,l,p,_,x,A,O=!1){let k=!1,z=!1;const F={},U={};for(const V of this._mergedOrder){const q=this._mergedLayers[V];if(q.type!=="symbol")continue;const J=a.av(q.source,q.scope);let ee=F[J];if(!ee){const oe=this.getLayerSourceCache(q);if(!oe)continue;const me=oe.getRenderableIds(!0).map(ye=>oe.getTileByID(ye));U[J]=me.slice(),ee=F[J]=me.sort((ye,de)=>de.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(de.tileID)?-1:1))}const re=this.crossTileSymbolIndex.addLayer(q,ee,l.center.lng,l.projection);k=k||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),O=O||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new a.x("neworder")),(O||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.q.now(),l.zoom))&&(this.pauseablePlacement=new Oc(l,this._mergedOrder,O,p,_,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,F,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.q.now()),z=!0),k&&this.pauseablePlacement.placement.setStale()),z||k){this._buildingIndex.onNewFrame(l.zoom);for(let V=0;V<this._mergedOrder.length;V++){const q=this._mergedLayers[this._mergedOrder[V]];if(q.type!=="symbol")continue;const J=this.isLayerClipped(q);this.placement.updateLayerOpacities(q,F[a.av(q.source,q.scope)],V,J?A:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.q.now())}}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}addImport(i,l){this._checkLoaded();const p=this.stylesheet.imports=this.stylesheet.imports||[];if(p.findIndex(({id:x})=>x===i.id)!==-1)return void this.fire(new a.t(new Error(`Import with id '${i.id}' already exists in the map's style.`)));if(!l)return p.push(i),this._loadImports([i],!0);const _=p.findIndex(({id:x})=>x===l);return _===-1&&this.fire(new a.t(new Error(`Import with id "${l}" does not exist on this map.`))),this.stylesheet.imports=p.slice(0,_).concat(i).concat(p.slice(_)),this._loadImports([i],!0,l)}updateImport(i,l){this._checkLoaded();const p=this.stylesheet.imports||[],_=this.getImportIndex(i);return _===-1?this:typeof l=="string"?(this.setImportUrl(i,l),this):(l.url&&l.url!==p[_].url&&this.setImportUrl(i,l.url),a.bh(l.config,p[_].config)||this.setImportConfig(i,l.config),a.bh(l.data,p[_].data)||this.setImportData(i,l.data),this)}moveImport(i,l){this._checkLoaded();let p=this.stylesheet.imports||[];const _=this.getImportIndex(i);if(_===-1)return this;const x=this.getImportIndex(l);if(x===-1)return this;const A=p[_],O=this.fragments[_];return p=p.filter(({id:k})=>k!==i),this.fragments=this.fragments.filter(({id:k})=>k!==i),this.stylesheet.imports=p.slice(0,x).concat(A).concat(p.slice(x)),this.fragments=this.fragments.slice(0,x).concat(O).concat(this.fragments.slice(x)),this.mergeLayers(),this}setImportUrl(i,l){this._checkLoaded();const p=this.stylesheet.imports||[],_=this.getImportIndex(i);if(_===-1)return this;p[_].url=l;const x=this.fragments[_];return x.style=this._createFragmentStyle(p[_]),x.style.on("style.import.load",()=>this.mergeAll()),x.style.loadURL(l),this}setImportData(i,l){this._checkLoaded();const p=this.getImportIndex(i),_=this.stylesheet.imports||[];return p===-1?this:l?(this.fragments[p].style.setState(l),this._reloadImports(),this):(delete _[p].data,this.setImportUrl(i,_[p].url))}setImportConfig(i,l){this._checkLoaded();const p=this.getImportIndex(i),_=this.stylesheet.imports||[];if(p===-1)return this;l?_[p].config=l:delete _[p].config;const x=this.fragments[p],A=x.style.stylesheet&&x.style.stylesheet.schema;return x.config=l,x.style.updateConfig(l,A),this.updateConfigDependencies(),this}removeImport(i){this._checkLoaded();const l=this.stylesheet.imports||[],p=this.getImportIndex(i);p!==-1&&(l.splice(p,1),this.fragments[p].style._remove(),this.fragments.splice(p,1),this._reloadImports())}getImportIndex(i){const l=(this.stylesheet.imports||[]).findIndex(p=>p.id===i);return l===-1&&this.fire(new a.t(new Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),l}getLayer(i){return this._mergedLayers[i]}getSources(){const i=[];for(const l in this._mergedOtherSourceCaches){const p=this._mergedOtherSourceCaches[l];p&&i.push(p.getSource())}return i}getSource(i,l){const p=this.getSourceCache(i,l);return p&&p.getSource()}getLayerSource(i){const l=this.getLayerSourceCache(i);return l&&l.getSource()}getSourceCache(i,l){const p=a.av(i,l);return this._mergedOtherSourceCaches[p]}getLayerSourceCache(i){const l=a.av(i.source,i.scope);return i.type==="symbol"?this._mergedSymbolSourceCaches[l]:this._mergedOtherSourceCaches[l]}getSourceCaches(i){if(i==null)return Object.values(this._mergedSourceCaches);const l=[];return this._mergedOtherSourceCaches[i]&&l.push(this._mergedOtherSourceCaches[i]),this._mergedSymbolSourceCaches[i]&&l.push(this._mergedSymbolSourceCaches[i]),l}updateSourceCaches(){const i=this._changes.getUpdatedSourceCaches();for(const l in i){const p=i[l];p==="reload"?this.reloadSource(l):p==="clear"&&this.clearSource(l)}}updateLayers(i){const l=this._changes.getUpdatedPaintProperties();for(const p of l){const _=this.getLayer(p);_&&_.updateTransitions(i)}}getImages(i,l,p){this.imageManager.getImages(l.icons,l.scope,p),this._updateTilesForChangedImages();const _=x=>{x&&x.setDependencies(l.tileID.key,l.type,l.icons)};_(this._otherSourceCaches[l.source]),_(this._symbolSourceCaches[l.source])}getGlyphs(i,l,p){this.glyphManager.getGlyphs(l.stacks,l.scope,p)}getResource(i,l,p){return a.ct(l,p)}getOwnSourceCache(i){return this._otherSourceCaches[i]}getOwnLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}getOwnSourceCaches(i){const l=[];return this._otherSourceCaches[i]&&l.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&l.push(this._symbolSourceCaches[i]),l}_isSourceCacheLoaded(i){const l=this.getOwnSourceCaches(i);return l.length===0?(this.fire(new a.t(new Error(`There is no source with ID '${i}'`))),!1):l.every(p=>p.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(i,l){if(!this._clipLayerPresent&&i.type!=="fill-extrusion")return!1;const p=i.type==="fill-extrusion"&&i.sourceLayer==="building";if(i.is3D()){if(p||l&&l.type==="batched-model"||i.type==="model")return!0}else if(i.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(i=>{i.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ao.getSourceType=function(d){return Qu[d]},Ao.setSourceType=function(d,i){Qu[d]=i},Ao.registerForPluginStateChange=a.cc;var k6=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,K2=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,J2=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,p7="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",L6=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,z6=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,B6=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,F6=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Q2=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,N6=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Dc=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const m7=[];Ps(k6,m7),Ps(J2,m7),Ps(K2,m7);const kc={"_prelude_fog.vertex.glsl":z6,"_prelude_terrain.vertex.glsl":L6,"_prelude_shadow.vertex.glsl":N6,"_prelude_fog.fragment.glsl":B6,"_prelude_shadow.fragment.glsl":Dc,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":F6,"_prelude_raster_particle.glsl":Q2},f1={};Rr("",L6),Rr(B6,z6),Rr(Dc,N6),Rr(F6,""),Rr(Q2,"");const Lc=Rr(K2,J2),g7=k6;var Es={background:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Rr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Rr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Rr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Rr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Rr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Rr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Rr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Rr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Rr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Rr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Rr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Rr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Rr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Rr(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Rr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Rr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,p7),skyboxGradient:Rr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,p7),skyboxCapture:Rr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Rr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Rr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Rr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Rr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:Rr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Ps(d,i){const l=d.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let p of l)if(p=p.trim(),p[0]==="#"&&p.includes("if")&&!p.includes("endif")){p=p.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=p.split(" ");for(const x of _)i.includes(x)||i.push(x)}}function Rr(d,i){const l=/#include\s+"([^"]+)"/g,p=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let _=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);_&&(_=_.map(z=>{const F=z.split(" ");return F[F.length-1]}),_=[...new Set(_)]);const x={},A=[],O=[];if(d=d.replace(l,(z,F)=>(O.push(F),"")),(i=i.replace(l,(z,F)=>(A.push(F),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let k=[...m7];Ps(d,k),Ps(i,k);for(const z of[...A,...O])kc[z]||console.error(`Undefined include: ${z}`),f1[z]||(f1[z]=[],Ps(kc[z],f1[z])),k=[...k,...f1[z]];return{fragmentSource:d=d.replace(p,(z,F,U,V,q)=>(x[q]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${q}
in ${U} ${V} ${q};
#else
uniform ${U} ${V} u_${q};
#endif
`:F==="initialize"?`
#ifdef HAS_UNIFORM_u_${q}
    ${U} ${V} ${q} = u_${q};
#endif
`:F==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${q}
    in ${U} ${V} ${q};
#endif
`:F==="initialize-attribute"?"":void 0)),vertexSource:i=i.replace(p,(z,F,U,V,q)=>{const J=V==="float"?"vec2":V,ee=q.match(/color/)?"color":J;return F==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${q}
in ${U} ${V} a_${q};
#endif
`:x[q]?F==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${U} ${J} a_${q};
out ${U} ${V} ${q};
#else
uniform ${U} ${V} u_${q};
#endif
`:F==="initialize"?ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${U} ${V} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${ee}(a_${q}, u_${q}_t);
#else
    ${U} ${V} ${q} = u_${q};
#endif
`:F==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${q}
    in ${U} ${V} a_${q};
    out ${U} ${V} ${q};
#endif
`:F==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${q}
    ${q} = a_${q};
#endif
`:void 0:F==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${U} ${J} a_${q};
#else
uniform ${U} ${V} u_${q};
#endif
`:F==="define-instanced"?ee==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${q}0;
in vec4 a_${q}1;
in vec4 a_${q}2;
in vec4 a_${q}3;
#else
uniform ${U} ${V} u_${q};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${U} ${J} a_${q};
#else
uniform ${U} ${V} u_${q};
#endif
`:F==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${q}
    ${U} ${V} ${q} = a_${q};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${V} ${q} = a_${q};
#else
    ${U} ${V} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${V} ${q} = unpack_mix_${ee}(a_${q}, u_${q}_t);
#else
    ${U} ${V} ${q} = u_${q};
#endif
`}),staticAttributes:_,usedDefines:k,vertexIncludes:A,fragmentIncludes:O}}class d1{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,l,p,_,x,A,O,k){this.context=i;let z=this.boundPaintVertexBuffers.length!==_.length;for(let U=0;!z&&U<_.length;U++)this.boundPaintVertexBuffers[U]!==_[U]&&(z=!0);let F=this.boundDynamicVertexBuffers.length!==O.length;for(let U=0;!F&&U<O.length;U++)this.boundDynamicVertexBuffers[U]!==O[U]&&(F=!0);if(!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==p||z||F||this.boundIndexBuffer!==x||this.boundVertexOffset!==A)this.freshBind(l,p,_,x,A,O,k);else{i.bindVertexArrayOES.set(this.vao);for(const U of O)U&&(U.bind(),k&&U.instanceCount&&U.setVertexAttribDivisor(i.gl,l,k));x&&x.dynamicDraw&&x.bind()}}freshBind(i,l,p,_,x,A,O){const k=i.numAttributes,z=this.context,F=z.gl;this.vao&&this.destroy(),this.vao=z.gl.createVertexArray(),z.bindVertexArrayOES.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=x,this.boundDynamicVertexBuffers=A,l.enableAttributes(F,i),l.bind(),l.setVertexAttribPointers(F,i,x);for(const U of p)U.enableAttributes(F,i),U.bind(),U.setVertexAttribPointers(F,i,x);for(const U of A)U&&(U.enableAttributes(F,i),U.bind(),U.setVertexAttribPointers(F,i,x),O&&U.instanceCount&&U.setVertexAttribDivisor(F,i,O));_&&_.bind(),z.currentNumAttributes=k}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function zc(d,i){const l=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new a.a5(0,p/l).toLngLat().lat,new a.a5(0,(p+1)/l).toLngLat().lat]}function y7(d,i,l,p,_,x,A){const O=d.context,k=O.gl,z=l.hillshadeFBO;if(!z)return;d.prepareDrawTile();const F=d.isTileAffectedByFog(i),U=d.getOrCreateProgram("hillshade",{overrideFog:F});O.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get());const V=((re,oe,me,ye)=>{const de=me.paint.get("hillshade-shadow-color"),be=me.paint.get("hillshade-highlight-color"),xe=me.paint.get("hillshade-accent-color"),Ce=me.paint.get("hillshade-emissive-strength");let Se=a.bB(me.paint.get("hillshade-illumination-direction"));if(me.paint.get("hillshade-illumination-anchor")==="viewport")Se-=re.transform.angle;else if(re.style&&re.style.enable3dLights()&&re.style.directionalLight){const ze=re.style.directionalLight.properties.get("direction"),ke=a.c7(ze.x,ze.y,ze.z);Se=a.bB(ke[1])}const Ie=!re.options.moving;return{u_matrix:ye||re.transform.calculateProjMatrix(oe.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:zc(0,oe.tileID),u_light:[me.paint.get("hillshade-exaggeration"),Se],u_shadow:de.toRenderColor(me.lut),u_highlight:be.toRenderColor(me.lut),u_emissive_strength:Ce,u_accent:xe.toRenderColor(me.lut)}})(d,l,p,d.terrain?i.projMatrix:null);d.uploadCommonUniforms(O,U,i.toUnwrapped());const{tileBoundsBuffer:q,tileBoundsIndexBuffer:J,tileBoundsSegments:ee}=d.getTileBoundsBuffers(l);U.draw(d,k.TRIANGLES,_,x,A,or.disabled,V,p.id,q,J,ee)}function _7(d,i,l){if(!i.needsDEMTextureUpload)return;const p=d.context,_=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||d.getTileTexture(l.stride);const x=l.getPixels();i.demTexture?i.demTexture.update(x,{premultiply:!1}):i.demTexture=new a.T(p,x,_.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Bc(d,i,l){const p=d.context,_=p.gl;if(!i.dem)return;const x=i.dem;if(p.activeTexture.set(_.TEXTURE1),_7(d,i,x),!i.demTexture)return;i.demTexture.bind(_.NEAREST,_.CLAMP_TO_EDGE);const A=x.dim;p.activeTexture.set(_.TEXTURE0);let O=i.hillshadeFBO;if(!O){const V=new a.T(p,{width:A,height:A,data:null},_.RGBA8);V.bind(_.LINEAR,_.CLAMP_TO_EDGE),O=i.hillshadeFBO=p.createFramebuffer(A,A,!0,"renderbuffer"),O.colorAttachment.set(V.texture)}p.bindFramebuffer.set(O.framebuffer),p.viewport.set([0,0,A,A]);const{tileBoundsBuffer:k,tileBoundsIndexBuffer:z,tileBoundsSegments:F}=d.getMercatorTileBoundsBuffers(),U=[];d.linearFloatFilteringSupported()&&U.push("TERRAIN_DEM_FLOAT_FORMAT"),d.getOrCreateProgram("hillshadePrepare",{defines:U}).draw(d,_.TRIANGLES,Jt.disabled,pr.disabled,Pr.unblended,or.disabled,((V,q)=>{const J=q.stride,ee=a.a6.mat4.create();return a.a6.mat4.ortho(ee,0,a.ab,-a.ab,0,0,1),a.a6.mat4.translate(ee,ee,[0,-a.ab,0]),{u_matrix:ee,u_image:1,u_dimension:[J,J],u_zoom:V.overscaledZ}})(i.tileID,x),l.id,k,z,F),i.needsHillshadePrepare=!1}class rn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class e3 extends rn{getDefault(){return a.bz.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class j6 extends rn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class t3 extends rn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class v7 extends rn{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Fc extends rn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class $6 extends rn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class U6 extends rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class V6 extends rn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class p1 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class G6 extends rn{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class J4 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class Q4 extends rn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class e8 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class r3 extends rn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO,i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class n3 extends rn{getDefault(){return a.bz.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class i3 extends rn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(i,i),this.current=i,this.dirty=!1)}}class o3 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class q6 extends rn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class W6 extends rn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let t8=class extends rn{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}};class Nc extends rn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class jc extends rn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class H6 extends rn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class To extends rn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class a3 extends rn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class x7 extends rn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class b7 extends rn{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class s3 extends rn{getDefault(){return null}set(i){this.gl&&(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class l3 extends rn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class w7 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class c3 extends rn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class $c extends rn{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class A7 extends $c{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class u3 extends $c{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Z6 extends $c{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,this.attachment(),l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class m1 extends u3{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const r8=(d,i,l)=>({u_matrix:d,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:l}),X6=(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee)=>({u_proj_matrix:Float32Array.from(d),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(p),u_merc_matrix:l,u_zoom_transition:_,u_merc_center:x,u_image0:0,u_frustum_tl:A,u_frustum_tr:O,u_frustum_br:k,u_frustum_bl:z,u_globe_pos:F,u_globe_radius:U,u_viewport:V,u_grid_matrix:ee?Float32Array.from(ee):new Float32Array(9),u_skirt_height:q,u_far_z_cutoff:J});function Y6(d,i){return d!=null&&i!=null&&!(!d.hasData()||!i.hasData())&&d.demTexture!=null&&i.demTexture!=null&&d.tileID.key!==i.tileID.key}const g1=new class{constructor(){this.operations={}}newMorphing(d,i,l,p,_){if(d in this.operations){const x=this.operations[d];x.to.tileID.key!==l.tileID.key&&(x.queued=l)}else this.operations[d]={startTime:p,phase:0,duration:_,from:i,to:l,queued:null}}getMorphValuesForProxy(d){if(!(d in this.operations))return null;const i=this.operations[d];return{from:i.from,to:i.to,phase:i.phase}}update(d){for(const i in this.operations){const l=this.operations[i];for(l.phase=(d-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,d)){delete this.operations[i];break}}}_nextOp(d,i){return!!d.queued&&(d.from=d.to,d.to=d.queued,d.queued=null,d.phase=0,d.startTime=i,!0)}_validOp(d){return d.from.hasData()&&d.to.hasData()}},K6={0:null,1:"TERRAIN_VERTEX_MORPHING"};function J6(d,i,l){if(i===0)return 0;const p=i<1&&l===514?.25/i:1;return 6*Math.pow(1.5,22-d)*Math.max(i,1)*p}function h3(d,i){const l=1<<d.z;return!i&&(d.x===0||d.x===l-1)||d.y===0||d.y===l-1}const Uc=d=>({u_matrix:d});function T7(d,i,l,p,_){if(_>0){const x=a.q.now(),A=(x-d.timeAdded)/_,O=i?(x-i.timeAdded)/_:-1,k=l.getSource(),z=p.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),F=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(d.tileID.overscaledZ-z),U=F&&d.refreshedUponExpiration?1:a.ap(F?A:1-O,0,1);return d.refreshedUponExpiration&&A>=1&&(d.refreshedUponExpiration=!1),i?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}class y1 extends oo{constructor(i){const l={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new a.cd(a.ce(),null),_=Xl("mock-dem",l,p,i.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,l){i.state="loaded",l(null)}}class Q6 extends oo{constructor(i){const l=Xl("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new a.cd(a.ce(),null),i.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,l,p){if(i.freezeTileCoverage)return;this.transform=i;const _=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,A)=>{if(x[A.key]="",!this._tiles[A.key]){const O=new xa(A,this._source.tileSize*A.overscaleFactor(),i.tileZoom);O.state="loaded",this._tiles[A.key]=O}return x},{});for(const x in this._tiles)x in _||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(i){const l=this.proxyCachedFBO[i];if(l!==void 0){const p=Object.values(l);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class f3 extends a.aA{constructor(i,l,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=l,this.projMatrix=p}}class d3 extends a.cE{constructor(i,l){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,_,x]=function(k){const z=new a.a_,F=new a.aO,U=131;z.reserve(17161),F.reserve(33800);const V=a.ab/128,q=a.ab+V/2,J=q+V;for(let re=-V;re<J;re+=V)for(let oe=-V;oe<J;oe+=V){const me=oe<0||oe>q||re<0||re>q?24575:0,ye=a.ap(Math.round(oe),0,a.ab),de=a.ap(Math.round(re),0,a.ab);z.emplaceBack(ye+me,de)}const ee=(re,oe)=>{const me=oe*U+re;F.emplaceBack(me+1,me,me+U),F.emplaceBack(me+U,me+U+1,me+1)};for(let re=1;re<129;re++)for(let oe=1;oe<129;oe++)ee(oe,re);return[0,129].forEach(re=>{for(let oe=0;oe<130;oe++)ee(oe,re),ee(re,oe)}),[z,F,32768]}(),A=i.context;this.gridBuffer=A.createVertexBuffer(p,a.b0.members),this.gridIndexBuffer=A.createIndexBuffer(_),this.gridSegments=a.b1.simpleSegment(0,0,p.length,_.length),this.gridNoSkirtSegments=a.b1.simpleSegment(0,0,p.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Q6(l.map),this.orthoMatrix=a.a6.mat4.create(),a.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.ab,0,a.ab,0,1);const O=A.gl;this._overlapStencilMode=new pr({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new y1(l.map),this._pendingGroundEffectLayers=[]}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),this._style=i,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,l,p){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);const _=i.terrain.properties,x=i.terrain.drapeRenderMode===0,A=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.q.now();const O=i.terrain&&i.terrain.scope,k=_.get("source"),z=x?this._mockSourceCache:i.getSourceCache(k,O);if(!z)return void a.w(`Couldn't find terrain source "${k}".`);if(this.sourceCache=z,this._exaggeration=A?this.calculateExaggeration(l):_.get("exaggeration"),!l.projection.requiresDraping&&A&&this._exaggeration===0)return void this._disable();this.enabled=!0;const F=()=>{this.sourceCache.used&&a.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const U=this.getScaledDemTileSize();this.sourceCache.update(l,U,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,F(),this._initializing=!0),F(),l.updateElevation(!0,p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0,this._previousZoom=l.zoom}else this._disable()}calculateExaggeration(i){const l=this._previousCameraAltitude,p=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=p;const _=l!=null?p-l:Number.MAX_VALUE;if(Math.abs(_)<2)return this._exaggeration;const x=i.zoom,A=this._style.terrain;if(!this._previousUpdateTimestamp)return A.getExaggeration(x);let O=x-this._previousZoom;const k=this._previousUpdateTimestamp;let z=x;this._evaluationZoom!=null&&(z=this._evaluationZoom,Math.abs(x-z)>.5&&(O=.5*(x-z+O)),O*_<0&&(z+=O)),this._evaluationZoom=z;const F=A.getExaggeration(z),U=F===A.getExaggeration(Math.max(0,z-.1));if(U&&Math.abs(F-this._exaggeration)<.01)return F;let V=Math.min(.1,.00375*(this._updateTimestamp-k));return(U||F<.1||Math.abs(O)<1e-4)&&(V=Math.min(.2,4*V)),a.aa(this._exaggeration,F,V)}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._mergedSourceCaches)this._style._mergedSourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=p._centerAltitude===0&&this.getAtPointOrZero(a.a5.fromLngLat(p.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=l.getIds().map(k=>{const z=l.getTileByID(k).tileID;return z.projMatrix=p.calculateProjMatrix(z.toUnwrapped()),z});(function(k,z){const F=z.transform.pointCoordinate(z.transform.getCameraPoint()),U=new a.P(F.x,F.y);k.sort((V,q)=>{if(q.overscaledZ-V.overscaledZ)return q.overscaledZ-V.overscaledZ;const J=new a.P(V.canonical.x+(1<<V.canonical.z)*V.wrap,V.canonical.y),ee=new a.P(q.canonical.x+(1<<q.canonical.z)*q.wrap,q.canonical.y),re=U.mult(1<<V.canonical.z);return re.x-=.5,re.y-=.5,re.distSqr(J)-re.distSqr(ee)})})(_,this.painter);const x=this.proxyToSource||{};this.proxyToSource={},_.forEach(k=>{this.proxyToSource[k.key]={}}),this.terrainTileForTile={};const A=this._style._mergedSourceCaches;for(const k in A){const z=A[k];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,i[k],x),z.usedForTerrain))continue;const F=i[k];z.getSource().reparseOverscaled&&this._assignTerrainTiles(F)}this.proxiedCoords[l.id]=_.map(k=>new f3(k,k.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1;const O={};this._visibleDemTiles=[];for(const k of this.proxyCoords){const z=this.terrainTileForTile[k.key];if(!z)continue;const F=z.tileID.key;F in O||(this._visibleDemTiles.push(z),O[F]=F)}}_assignTerrainTiles(i){this._initializing||i.forEach(l=>{if(this.terrainTileForTile[l.key])return;const p=this._findTileCoveringTileID(l,this.sourceCache);p&&(this.terrainTileForTile[l.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,l=i.gl;for(const p in this.terrainTileForTile){const _=this.terrainTileForTile[p],x=_.dem;!x||_.demTexture&&!_.needsDEMTextureUpload||(i.activeTexture.set(l.TEXTURE1),_7(this.painter,_,x))}}_prepareDemTileUniforms(i,l,p,_){if(!l||l.demTexture==null)return!1;const x=i.tileID.canonical,A=Math.pow(2,l.tileID.canonical.z-x.z),O=_||"";return p[`u_dem_tl${O}`]=[x.x*A%1,x.y*A%1],p[`u_dem_scale${O}`]=A,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let i=0;const l=this._visibleDemTiles.reduce((p,_)=>{if(!_.dem)return p;const x=_.dem.tree.minimums[0];return x>0&&i++,p+x},0);return i?l/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,l=i.gl;i.activeTexture.set(l.TEXTURE2);const p=this._getLoadedAreaMinimum(),_=new a.cF({width:1,height:1},new Float32Array([p]));this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(_,{premultiply:!1}):x=this._emptyDEMTexture=new a.T(i,_,l.R32F,{premultiply:!1}),x}setupElevationDraw(i,l,p){const _=this.painter.context,x=_.gl,A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};A.u_exaggeration=this.exaggeration();let O=null,k=null,z=1;if(p&&p.morphing&&this._useVertexMorphing){const q=p.morphing.srcDemTile,J=p.morphing.dstDemTile;z=p.morphing.phase,q&&J&&(this._prepareDemTileUniforms(i,q,A,"_prev")&&(k=q),this._prepareDemTileUniforms(i,J,A)&&(O=J))}const F=q=>q&&q.demTexture&&this.painter.linearFloatFilteringSupported()?x.LINEAR:x.NEAREST;let U=null;var V;if(this.enabled?k&&O?(U=O.demTexture,_.activeTexture.set(x.TEXTURE4),k.demTexture.bind(F(k),x.CLAMP_TO_EDGE),A.u_dem_lerp=z):(O=this.terrainTileForTile[i.tileID.key],U=this._prepareDemTileUniforms(i,O,A)?O.demTexture:this.emptyDEMTexture):U=this.emptyDEMTexture,_.activeTexture.set(x.TEXTURE2),U&&(A.u_dem_size=(V=U).size[0]===1?1:V.size[0]-2,U.bind(F(O),x.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(p&&p.useDepthForOcclusion,l,A),p&&p.useMeterToDem&&O){const q=(1<<O.tileID.canonical.z)*a.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;A.u_meter_to_dem=q}if(p&&p.labelPlaneMatrixInv&&(A.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),l.setTerrainUniformValues(_,A),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,i.tileID.canonical,p&&p.useDenormalizedUpVectorScale);l.setGlobeUniformValues(_,q)}}globeUniformValues(i,l,p){const _=i.projection;return{u_tile_tl_up:_.upVector(l,0,0),u_tile_tr_up:_.upVector(l,a.ab,0),u_tile_br_up:_.upVector(l,a.ab,a.ab),u_tile_bl_up:_.upVector(l,0,a.ab),u_tile_up_scale:p?a.cG(1):_.upVectorScale(l,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const l=this.painter,p=this.painter.context;i.length!==0&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,x,A,O,k){if(_.transform.projection.name==="globe")(function(z,F,U,V,q){const J=z.context,ee=J.gl;let re,oe;const me=z.transform,ye=a.cx(z,J,me),de=(Ve,nt)=>{if(oe===nt)return;const dt=[K6[nt],"PROJECTION_GLOBE_VIEW"];ye&&dt.push("CUSTOM_ANTIALIASING");const rt=z.isTileAffectedByFog(Ve);re=z.getOrCreateProgram("globeRaster",{defines:dt,overrideFog:rt}),oe=nt},be=z.colorModeForRenderPass(),xe=new Jt(ee.LEQUAL,Jt.ReadWrite,z.depthRangeFor3D);g1.update(q);const Ce=a.cy(me),Se=[a.am(me.center.lng),a.at(me.center.lat)],Ie=z.globeSharedBuffers,ze=[me.width*a.q.devicePixelRatio,me.height*a.q.devicePixelRatio],ke=Float32Array.from(me.globeMatrix),Re={useDenormalizedUpVectorScale:!0};{const Ve=z.transform,nt=J6(Ve.zoom,F.exaggeration(),F.sourceCache._source.tileSize);oe=-1;const dt=ee.TRIANGLES;for(const rt of V){const xt=U.getTile(rt),Ge=pr.disabled,ct=F.prevTerrainTileForTile[rt.key],at=F.terrainTileForTile[rt.key];Y6(ct,at)&&g1.newMorphing(rt.key,ct,at,q,250),J.activeTexture.set(ee.TEXTURE0),xt.texture&&xt.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const wt=g1.getMorphValuesForProxy(rt.key),Tt=wt?1:0;wt&&a.C(Re,{morphing:{srcDemTile:wt.from,dstDemTile:wt.to,phase:a.cw(wt.phase)}});const ft=a.cz(rt.canonical),gt=a.cA(ft.getCenter().lat),Yt=a.cB(rt.canonical,ft,gt,Ve.worldSize/Ve._pixelsPerMercatorPixel),It=a.b5(a.cC(rt.canonical)),jt=X6(Ve.expandedFarZProjMatrix,ke,Ce,It,a.a9(Ve.zoom),Se,Ve.frustumCorners.TL,Ve.frustumCorners.TR,Ve.frustumCorners.BR,Ve.frustumCorners.BL,Ve.globeCenterInViewSpace,Ve.globeRadius,ze,nt,Ve._farZ,Yt);if(de(rt,Tt),re&&(F.setupElevationDraw(xt,re,Re),z.uploadCommonUniforms(J,re,rt.toUnwrapped()),Ie)){const[ir,Wt,tr]=Ie.getGridBuffers(gt,nt!==0);re.draw(z,dt,xe,Ge,be,or.backCCW,jt,"globe_raster",ir,Wt,tr)}}}if(Ie&&(z.renderDefaultNorthPole||z.renderDefaultSouthPole)){const Ve=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&Ve.push("CUSTOM_ANTIALIASING"),re=z.getOrCreateProgram("globeRaster",{defines:Ve});for(const nt of V){const{x:dt,y:rt,z:xt}=nt.canonical,Ge=rt===0,ct=rt===(1<<xt)-1,[at,wt,Tt,ft]=Ie.getPoleBuffers(xt,!1);if(ft&&(Ge||ct)){const gt=U.getTile(nt);J.activeTexture.set(ee.TEXTURE0),gt.texture&&gt.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);let Yt=a.cD(xt,dt,me);const It=a.b5(a.cC(nt.canonical)),jt=(ir,Wt)=>ir.draw(z,ee.TRIANGLES,xe,pr.disabled,be,or.disabled,X6(me.expandedFarZProjMatrix,Yt,Yt,It,0,Se,me.frustumCorners.TL,me.frustumCorners.TR,me.frustumCorners.BR,me.frustumCorners.BL,me.globeCenterInViewSpace,me.globeRadius,ze,0,me._farZ),"globe_pole_raster",Wt,Tt,ft);F.setupElevationDraw(gt,re,Re),z.uploadCommonUniforms(J,re,nt.toUnwrapped()),Ge&&z.renderDefaultNorthPole&&jt(re,at),ct&&z.renderDefaultSouthPole&&(Yt=a.a6.mat4.scale(a.a6.mat4.create(),Yt,[1,-1,1]),jt(re,wt))}}}})(_,x,A,O,k);else{const z=_.context,F=z.gl;let U,V;const q=_.shadowRenderer,J=Ja(_,_.longestCutoffRange),ee=be=>{if(V===be)return;const xe=[];xe.push(K6[be]),J.shouldRenderCutoff&&xe.push("RENDER_CUTOFF"),U=_.getOrCreateProgram("terrainRaster",{defines:xe}),V=be},re=_.colorModeForRenderPass(),oe=new Jt(F.LEQUAL,Jt.ReadWrite,_.depthRangeFor3D);g1.update(k);const me=_.transform,ye=J6(me.zoom,x.exaggeration(),x.sourceCache._source.tileSize);let de=[0,0,0];if(q){const be=_.style.directionalLight,xe=_.style.ambientLight;be&&xe&&(de=h7(_.style,be,xe))}{V=-1;const be=F.TRIANGLES,[xe,Ce]=[x.gridIndexBuffer,x.gridSegments];for(const Se of O){const Ie=A.getTile(Se),ze=pr.disabled,ke=x.prevTerrainTileForTile[Se.key],Re=x.terrainTileForTile[Se.key];Y6(ke,Re)&&g1.newMorphing(Se.key,ke,Re,k,250),z.activeTexture.set(F.TEXTURE0),Ie.texture&&Ie.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE);const Ve=g1.getMorphValuesForProxy(Se.key),nt=Ve?1:0;let dt;Ve&&(dt={morphing:{srcDemTile:Ve.from,dstDemTile:Ve.to,phase:a.cw(Ve.phase)}});const rt=r8(Se.projMatrix,h3(Se.canonical,me.renderWorldCopies)?ye/10:ye,de);if(ee(nt),!U)continue;x.setupElevationDraw(Ie,U,dt);const xt=Se.toUnwrapped();q&&q.setupShadows(xt,U),_.uploadCommonUniforms(z,U,xt,null,J),U.draw(_,be,oe,ze,re,or.backCCW,rt,"terrain_raster",x.gridBuffer,xe,Ce)}}}}(l,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const l=this.painter,p=this.painter.context,_=this.proxySourceCache,x=this.proxiedCoords[_.id],A=this._drapedRenderBatches.shift(),O=l.style.order,k=[];let z=0;for(const F of x){const U=_.getTileByID(F.proxyTileKey),V=_.proxyCachedFBO[F.key]?_.proxyCachedFBO[F.key][i]:void 0,q=V!==void 0?_.renderCache[V]:this.pool[z++],J=V!==void 0;if(U.texture=q.tex,J&&!q.dirty){k.push(U.tileID);continue}let ee;p.bindFramebuffer.set(q.fb.framebuffer),this.renderedToTile=!1,q.dirty&&(p.clear({color:a.bz.transparent,stencil:0}),q.dirty=!1);for(let re=A.start;re<=A.end;++re){const oe=l.style._mergedLayers[O[re]];if(oe.isHidden(l.transform.zoom))continue;const me=l.style.getLayerSourceCache(oe),ye=me?this.proxyToSource[F.key][me.id]:[F];if(!ye)continue;const de=ye;p.viewport.set([0,0,q.fb.width,q.fb.height]),ee!==(me?me.id:null)&&(this._setupStencil(q,ye,oe,me),ee=me?me.id:null),l.renderLayer(l,me,oe,de)}if(this._drapedRenderBatches.length===0)for(const re of this._pendingGroundEffectLayers){const oe=l.style._mergedLayers[O[re]];if(oe.isHidden(l.transform.zoom))continue;const me=l.style.getLayerSourceCache(oe),ye=me?this.proxyToSource[F.key][me.id]:[F];if(!ye)continue;const de=ye;p.viewport.set([0,0,q.fb.width,q.fb.height]),ee!==(me?me.id:null)&&(this._setupStencil(q,ye,oe,me),ee=me?me.id:null),l.renderLayer(l,me,oe,de)}this.renderedToTile?(q.dirty=!0,k.push(U.tileID)):J||--z,z===5&&(z=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,l.width,l.height]),A.end+1}postRender(){}isLayerOrderingCorrect(i){const l=i.order.length;let p=-1,_=l;for(let x=0;x<l;++x)this._style.isLayerDraped(i._mergedLayers[i.order[x]])?p=Math.max(p,x):_=Math.min(_,x);return _>p}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{i=Math.min(i,l.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,l,p){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const A=x.tileID,O=1<<A.overscaledZ,{x:k,y:z}=A.canonical,F=k/O,U=(k+1)/O,V=z/O,q=(z+1)/O;return{minx:F,miny:V,maxx:U,maxy:q,t:x.dem.tree.raycastRoot(F,V,U,q,i,l,p),tile:x}});_.sort((x,A)=>(x.t!==null?x.t:Number.MAX_VALUE)-(A.t!==null?A.t:Number.MAX_VALUE));for(const x of _){if(x.t==null)return null;const A=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,i,l,p);if(A!=null)return A}return null}_createFBO(){const i=this.painter.context,l=i.gl,p=this.drapeBufferSize;i.activeTexture.set(l.TEXTURE0);const _=new a.T(i,{width:p[0],height:p[1],data:null},l.RGBA8);_.bind(l.LINEAR,l.CLAMP_TO_EDGE);const x=i.createFramebuffer(p[0],p[1],!0,null);return x.colorAttachment.set(_.texture),x.depthAttachment=new m1(i,x.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&l.texParameterf(l.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:x,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const l=this._style._mergedLayers[i],p=l.isHidden(this.painter.transform.zoom);return l.type==="hillshade"||l.type==="custom"?!p&&l.shouldRedrape():!p&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const p of this._style.getSources())if(p instanceof Ju){i=!0;break}if(!i)return;const l={};for(let p=0;p<this._style.order.length;++p){const _=this._style._mergedLayers[this._style.order[p]],x=this._style.getLayerSourceCache(_);if(x&&!l[x.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof a.a4){l[x.id]=!0;for(const A of this.proxyCoords){const O=this.proxyToSource[A.key][x.id];if(O)for(const k of O)this._clearRenderCacheForTile(x.id,k)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const p in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[p]._source instanceof Ec){i=!0;break}if(!i)return;const l={};for(let p=0;p<this._style.order.length;++p){const _=this._style._mergedLayers[this._style.order[p]],x=this._style.getLayerSourceCache(_);if(!x||l[x.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const A=_.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const k=this.proxyToSource[O.key][x.id];if(k)for(const z of k){const F=T7(x.getTile(z),x.findLoadedParent(z,0),x,this.painter.transform,A);(F.opacity!==1||F.mix!==0)&&this._clearRenderCacheForTile(x.id,z)}}}}_setupDrapedRenderBatches(){const i=this._style.order,l=i.length;if(l===0)return;const p=[];this._pendingGroundEffectLayers=[];let _,x=0,A=this._style._mergedLayers[i[x]];for(;!this._style.isLayerDraped(A)&&A.isHidden(this.painter.transform.zoom)&&++x<l;)A=this._style._mergedLayers[i[x]];for(;x<l;++x){const O=this._style._mergedLayers[i[x]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?_===void 0&&(_=x):(O.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(x),_!==void 0&&(p.push({start:_,end:x-1}),_=void 0)))}if(_!==void 0&&p.push({start:_,end:x-1}),p.length!==0){const O=p[p.length-1];this._pendingGroundEffectLayers.every(k=>k>O.end)||a.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=p}_setupRenderCache(i){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const A=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let O=0;O<A.length;++O){const k=Object.values(A[O]);l.renderCachePool.push(...k)}}return}this._clearRasterLayersFromRenderCache();const p=this.proxyCoords,_=this._tilesDirty;for(let A=p.length-1;A>=0;A--){const O=p[A];if(l.getTileByID(O.key),l.proxyCachedFBO[O.key]!==void 0){const k=i[O.key],z=this.proxyToSource[O.key];let F=0;for(const U in z){const V=z[U],q=k[U];if(!q||q.length!==V.length||V.some((J,ee)=>J!==q[ee]||_[U]&&_[U].hasOwnProperty(J.key))){F=-1;break}++F}for(const U in l.proxyCachedFBO[O.key])l.renderCache[l.proxyCachedFBO[O.key][U]].dirty=F<0||F!==Object.values(k).length}}const x=[...this._drapedRenderBatches];x.sort((A,O)=>O.end-O.start-(A.end-A.start));for(const A of x)for(const O of p){if(l.proxyCachedFBO[O.key])continue;let k=l.renderCachePool.pop();k===void 0&&l.renderCache.length<50&&(k=l.renderCache.length,l.renderCache.push(this._createFBO())),k!==void 0&&(l.proxyCachedFBO[O.key]={},l.proxyCachedFBO[O.key][A.start]=k,l.renderCache[k].dirty=!0)}this._tilesDirty={}}_setupStencil(i,l,p,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,A=x.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let O;if(p.isTileClipped())O=l.length,this._overlapStencilMode.test={func:A.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:A.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):pr.disabled}_renderTileClippingMasks(i,l){const p=this.painter,_=this.painter.context,x=_.gl;p._tileClippingMaskIDs={},_.setColorMode(Pr.disabled),_.setDepthMode(Jt.disabled);const A=p.getOrCreateProgram("clippingMask");for(const O of i){const k=p._tileClippingMaskIDs[O.key]=--l;A.draw(p,x.TRIANGLES,Jt.disabled,new pr({func:x.ALWAYS,mask:0},k,255,x.KEEP,x.KEEP,x.REPLACE),Pr.disabled,or.disabled,Uc(O.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const l=this.painter.transform;if(i.x<0||i.x>l.width||i.y<0||i.y>l.height)return null;const p=[i.x,i.y,1,1];a.a6.vec4.transformMat4(p,p,l.pixelMatrixInverse),a.a6.vec4.scale(p,p,1/p[3]),p[0]/=l.worldSize,p[1]/=l.worldSize;const _=l._camera.position,x=a.bD(1,l.center.lat),A=[_[0],_[1],_[2]/x,0],O=a.a6.vec3.subtract([],p.slice(0,3),A);a.a6.vec3.normalize(O,O);const k=this.raycast(A,O,this._exaggeration);return k!==null&&k?(a.a6.vec3.scaleAndAdd(A,A,O,k),A[3]=A[2],A[2]*=x,A):null}_setupProxiedCoordsForOrtho(i,l,p){if(i.getSource()instanceof a.aD)return this._setupProxiedCoordsForImageSource(i,l,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const _=this.proxiedCoords[i.id]=[],x=this.proxyCoords;for(let k=0;k<x.length;k++){const z=x[k],F=this._findTileCoveringTileID(z,i);if(F){const U=this._createProxiedId(z,F,p[z.key]&&p[z.key][i.id]);_.push(U),this.proxyToSource[z.key][i.id]=[U]}}let A=!1;const O=new Set;for(let k=0;k<l.length;k++){const z=i.getTile(l[k]);if(!z||!z.hasData())continue;const F=this._findTileCoveringTileID(z.tileID,this.proxySourceCache);if(F&&F.tileID.canonical.z!==z.tileID.canonical.z){const U=this.proxyToSource[F.tileID.key][i.id],V=this._createProxiedId(F.tileID,z,p[F.tileID.key]&&p[F.tileID.key][i.id]);U?U.splice(U.length-1,0,V):this.proxyToSource[F.tileID.key][i.id]=[V];const q=this.proxyToSource[F.tileID.key][i.id];O.has(q)||O.add(q),_.push(V),A=!0}}if(this._sourceTilesOverlap[i.id]=A,A&&this._debugParams.sortTilesHiZFirst)for(const k of O)k.sort((z,F)=>F.overscaledZ-z.overscaledZ)}_setupProxiedCoordsForImageSource(i,l,p){if(!i.getSource().loaded())return;const _=this.proxiedCoords[i.id]=[],x=this.proxyCoords,A=i.getSource(),O=A.tileID;if(!O)return;const k=new a.P(O.x,O.y)._div(1<<O.z),z=A.coordinates.map(a.a5.fromLngLat).reduce((U,V)=>(U.min.x=Math.min(U.min.x,V.x-k.x),U.min.y=Math.min(U.min.y,V.y-k.y),U.max.x=Math.max(U.max.x,V.x-k.x),U.max.y=Math.max(U.max.y,V.y-k.y),U),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),F=(U,V)=>{const q=U.wrap+U.canonical.x/(1<<U.canonical.z),J=U.canonical.y/(1<<U.canonical.z),ee=a.ab/(1<<U.canonical.z),re=V.wrap+V.canonical.x/(1<<V.canonical.z),oe=V.canonical.y/(1<<V.canonical.z);return q+ee<re+z.min.x||q>re+z.max.x||J+ee<oe+z.min.y||J>oe+z.max.y};for(let U=0;U<x.length;U++){const V=x[U];for(let q=0;q<l.length;q++){const J=i.getTile(l[q]);if(!J||!J.hasData()||F(V,J.tileID))continue;const ee=this._createProxiedId(V,J,p[V.key]&&p[V.key][i.id]),re=this.proxyToSource[V.key][i.id];re?re.push(ee):this.proxyToSource[V.key][i.id]=[ee],_.push(ee)}}}_createProxiedId(i,l,p){let _=this.orthoMatrix;if(p){const x=p.find(A=>A.key===l.tileID.key);if(x)return x}if(l.tileID.key!==i.key){const x=i.canonical.z-l.tileID.canonical.z;let A,O,k;_=a.a6.mat4.create();const z=l.tileID.wrap-i.wrap<<i.overscaledZ;x>0?(A=a.ab>>x,O=A*((l.tileID.canonical.x<<x)-i.canonical.x+z),k=A*((l.tileID.canonical.y<<x)-i.canonical.y)):(A=a.ab<<-x,O=a.ab*(l.tileID.canonical.x-(i.canonical.x+z<<-x)),k=a.ab*(l.tileID.canonical.y-(i.canonical.y<<-x))),a.a6.mat4.ortho(_,0,A,0,A,0,1),a.a6.mat4.translate(_,_,[O,k,0])}return new f3(l.tileID,i.key,_)}_findTileCoveringTileID(i,l){let p=l.getTile(i);if(p&&p.hasData())return p;const _=this._findCoveringTileCache[l.id],x=_[i.key];if(p=x?l.getTileByID(x):null,p&&p.hasData()||x===null)return p;let A=p?p.tileID:i,O=A.overscaledZ;const k=l.getSource().minzoom,z=[];if(!x){const U=l.getSource().maxzoom;if(i.canonical.z>=U){const V=i.canonical.z-U;l.getSource().reparseOverscaled?(O=Math.max(i.canonical.z+2,l.transform.tileZoom),A=new a.aA(O,i.wrap,U,i.canonical.x>>V,i.canonical.y>>V)):V!==0&&(O=U,A=new a.aA(O,i.wrap,U,i.canonical.x>>V,i.canonical.y>>V))}A.key!==i.key&&(z.push(A.key),p=l.getTile(A))}const F=U=>{z.forEach(V=>{_[V]=U}),z.length=0};for(O-=1;O>=k&&(!p||!p.hasData());O--){p&&F(p.tileID.key);const U=A.calculateScaledKey(O);if(p=l.getTileByID(U),p&&p.hasData())break;const V=_[U];if(V===null)break;V===void 0?z.push(U):p=l.getTileByID(V)}return F(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,l){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[l.key]=!0}}function p3(d,i,l){const p=function(O,k,z){const F=a.a6.vec3.dot(k,O),U=a.a6.vec3.dot(z,[.2126,.7152,.0722]),V=(J,ee,re)=>(1-re)*J+re*ee,q=V(1-.3*Math.min(U,1),1,Math.min(F+1,1));return V(.92,1,Math.asin(a.ap(k[2],-1,1))/Math.PI+.5)*q}(d,[0,0,1],i),_=[0,0,0];a.a6.vec3.scale(_,l.slice(0,3),p);const x=[0,0,0];a.a6.vec3.scale(x,i.slice(0,3),d[2]);const A=[0,0,0];return a.a6.vec3.add(A,_,x),a.cb(A)}const al=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],ef=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Ms{static cacheKey(i,l,p,_){let x=`${l}${_?_.cacheKey:""}`;for(const A of p)i.usedDefines.includes(A)&&(x+=`/${A}`);return x}constructor(i,l,p,_,x,A){const O=i.gl;this.program=O.createProgram(),this.configuration=_,this.name=l,this.fixedDefines=[...A];const k=_?_.getBinderAttributes():[],z=(p.staticAttributes||[]).concat(k);let F=_?_.defines():[];F=F.concat(A.map(re=>`#define ${re}`));const U=`#version 300 es
`;let V=U+F.concat("precision mediump float;",g7,Lc.fragmentSource).join(`
`);for(const re of p.fragmentIncludes)V+=`
${kc[re]}`;V+=`
${p.fragmentSource}`;let q=U+F.concat("precision highp float;",g7,Lc.vertexSource).join(`
`);for(const re of p.vertexIncludes)q+=`
${kc[re]}`;q+=`
${p.vertexSource}`;const J=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(J,V),O.compileShader(J),O.attachShader(this.program,J);const ee=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(ee,q),O.compileShader(ee),O.attachShader(this.program,ee),this.attributes={},this.numAttributes=z.length;for(let re=0;re<this.numAttributes;re++)if(z[re]){const oe=z[re].startsWith("a_")?z[re]:`a_${z[re]}`;O.bindAttribLocation(this.program,re,oe),this.attributes[oe]=re}O.linkProgram(this.program),O.deleteShader(ee),O.deleteShader(J),this.fixedUniforms=x(i),this.binderUniforms=_?_.getUniforms(i):[],(A.includes("TERRAIN")||l.indexOf("symbol")!==-1||l.indexOf("circle")!==-1)&&(this.terrainUniforms=(re=>({u_dem:new a.bJ(re),u_dem_prev:new a.bJ(re),u_dem_tl:new a.bG(re),u_dem_scale:new a.bI(re),u_dem_tl_prev:new a.bG(re),u_dem_scale_prev:new a.bI(re),u_dem_size:new a.bI(re),u_dem_lerp:new a.bI(re),u_exaggeration:new a.bI(re),u_depth:new a.bJ(re),u_depth_size_inv:new a.bG(re),u_depth_range_unpack:new a.bG(re),u_occluder_half_size:new a.bI(re),u_occlusion_depth_offset:new a.bI(re),u_meter_to_dem:new a.bI(re),u_label_plane_matrix_inv:new a.bF(re)}))(i)),A.includes("GLOBE")&&(this.globeUniforms=(re=>({u_tile_tl_up:new a.bH(re),u_tile_tr_up:new a.bH(re),u_tile_br_up:new a.bH(re),u_tile_bl_up:new a.bH(re),u_tile_up_scale:new a.bI(re)}))(i)),A.includes("FOG")&&(this.fogUniforms=(re=>({u_fog_matrix:new a.bF(re),u_fog_range:new a.bG(re),u_fog_color:new a.c6(re),u_fog_horizon_blend:new a.bI(re),u_fog_vertical_limit:new a.bG(re),u_fog_temporal_offset:new a.bI(re),u_frustum_tl:new a.bH(re),u_frustum_tr:new a.bH(re),u_frustum_br:new a.bH(re),u_frustum_bl:new a.bH(re),u_globe_pos:new a.bH(re),u_globe_radius:new a.bI(re),u_globe_transition:new a.bI(re),u_is_globe:new a.bJ(re),u_viewport:new a.bG(re)}))(i)),A.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(re=>({u_cutoff_params:new a.c6(re)}))(i)),A.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(re=>({u_lighting_ambient_color:new a.bH(re),u_lighting_directional_dir:new a.bH(re),u_lighting_directional_color:new a.bH(re),u_ground_radiance:new a.bH(re)}))(i)),A.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(re=>({u_light_matrix_0:new a.bF(re),u_light_matrix_1:new a.bF(re),u_fade_range:new a.bG(re),u_shadow_normal_offset:new a.bH(re),u_shadow_intensity:new a.bI(re),u_shadow_texel_size:new a.bI(re),u_shadow_map_resolution:new a.bI(re),u_shadow_direction:new a.bH(re),u_shadow_bias:new a.bH(re),u_shadowmap_0:new a.bJ(re),u_shadowmap_1:new a.bJ(re)}))(i))}}setTerrainUniformValues(i,l){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const _ in l)p[_]&&p[_].set(this.program,_,l[_])}}setGlobeUniformValues(i,l){if(!this.globeUniforms)return;const p=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const _ in l)p[_]&&p[_].set(this.program,_,l[_])}}setFogUniformValues(i,l){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const _ in l)p[_].set(this.program,_,l[_])}}setCutoffUniformValues(i,l){if(!this.cutoffUniforms)return;const p=this.cutoffUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const _ in l)p[_].set(this.program,_,l[_])}}setLightsUniformValues(i,l){if(!this.lightsUniforms)return;const p=this.lightsUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const _ in l)p[_].set(this.program,_,l[_])}}setShadowUniformValues(i,l){if(this.failedToCreate||!this.shadowUniforms)return;const p=this.shadowUniforms;i.program.set(this.program);for(const _ in l)p[_].set(this.program,_,l[_])}_drawDebugWireframe(i,l,p,_,x,A,O,k,z,F){const U=i.options.wireframe;if(U.terrain===!1&&U.layers2D===!1&&U.layers3D===!1)return;const V=i.context;if(!(!(!U.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!U.layers2D||i._terrain&&i._terrain.renderingToTexture||!al.includes(this.name))||!(!U.layers3D||!ef.includes(this.name))))return;const q=V.gl,J=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,x,V);if(!J)return;const ee=[...this.fixedDefines];ee.push("DEBUG_WIREFRAME");const re=i.getOrCreateProgram(this.name,{config:this.configuration,defines:ee});V.program.set(re.program);const oe=(de,be,xe)=>{if(be[de]&&xe[de])for(const Ce in be[de])xe[de][Ce]&&xe[de][Ce].set(xe.program,Ce,be[de][Ce].current)};z&&z.setUniforms(re.program,V,re.binderUniforms,O,{zoom:k}),oe("fixedUniforms",this,re),oe("terrainUniforms",this,re),oe("globeUniforms",this,re),oe("fogUniforms",this,re),oe("lightsUniforms",this,re),oe("shadowUniforms",this,re),J.bind(),V.setColorMode(new Pr([q.ONE,q.ONE_MINUS_SRC_ALPHA,q.ZERO,q.ONE],a.bz.transparent,[!0,!0,!0,!1])),V.setDepthMode(new Jt(l.func===q.LESS?q.LEQUAL:l.func,Jt.ReadOnly,l.range)),V.setStencilMode(pr.disabled);const me=3*A.primitiveLength*2,ye=3*A.primitiveOffset*2*2;F&&F>1?q.drawElementsInstanced(q.LINES,me,q.UNSIGNED_SHORT,ye,F):q.drawElements(q.LINES,me,q.UNSIGNED_SHORT,ye),x.bind(),V.program.set(this.program),V.setDepthMode(l),V.setStencilMode(p),V.setColorMode(_)}draw(i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re){const oe=i.context,me=oe.gl;if(this.failedToCreate)return;oe.program.set(this.program),oe.setDepthMode(p),oe.setStencilMode(_),oe.setColorMode(x),oe.setCullFace(A);for(const be of Object.keys(this.fixedUniforms))this.fixedUniforms[be].set(this.program,be,O[be]);J&&J.setUniforms(this.program,oe,this.binderUniforms,V,{zoom:q});const ye={[me.POINTS]:1,[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[l],de=re&&re>0?1:void 0;for(const be of U.get()){const xe=be.vaos||(be.vaos={});(xe[k]||(xe[k]=new d1)).bind(oe,this,z,J?J.getPaintVertexBuffers():[],F,be.vertexOffset,ee||[],de),re&&re>1?me.drawElementsInstanced(l,be.primitiveLength*ye,me.UNSIGNED_SHORT,be.primitiveOffset*ye*2,re):F?me.drawElements(l,be.primitiveLength*ye,me.UNSIGNED_SHORT,be.primitiveOffset*ye*2):me.drawArrays(l,be.vertexOffset,be.vertexLength),l===me.TRIANGLES&&F&&this._drawDebugWireframe(i,p,_,x,F,be,V,q,J,re)}}}function m3(d,i){const l=Math.pow(2,i.tileID.overscaledZ),p=i.tileSize*Math.pow(2,d.transform.tileZoom)/l,_=p*(i.tileID.canonical.x+i.tileID.wrap*l),x=p*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.ak(i,1,d.transform.tileZoom),u_pixel_coord_upper:[_>>16,x>>16],u_pixel_coord_lower:[65535&_,65535&x]}}const S7=a.a6.mat4.create(),g3=(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee)=>{const re=i.style.light,oe=re.properties.get("position"),me=[oe.x,oe.y,oe.z],ye=a.a6.mat3.create();re.properties.get("anchor")==="viewport"&&(a.a6.mat3.fromRotation(ye,-i.transform.angle),a.a6.vec3.transformMat3(me,me,ye));const de=re.properties.get("color"),be=i.transform,xe={u_matrix:d,u_lightpos:me,u_lightintensity:re.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+l,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:S7,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:x,u_width_scale:A,u_flood_light_color:V,u_vertical_scale:q,u_flood_light_intensity:J,u_ground_shadow_factor:ee};return be.projection.name==="globe"&&(xe.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],xe.u_zoom_transition=z,xe.u_inv_rot_matrix=U,xe.u_merc_center=F,xe.u_up_dir=be.projection.upVector(new a.bP(0,0,0),F[0]*a.ab,F[1]*a.ab),xe.u_height_lift=k),xe},tf=(d,i,l,p)=>({u_matrix:d,u_edge_radius:i,u_width_scale:l,u_vertical_scale:p}),y3=(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J)=>{const ee=g3(d,i,l,p,_,x,A,O,z,F,U,V,q,J,1,[0,0,0]),re={u_height_factor:-Math.pow(2,O.overscaledZ)/k.tileSize/8};return a.l(ee,m3(i,k),re)},E7=(d,i)=>({u_matrix:d,u_emissive_strength:i}),rf=(d,i,l,p)=>a.l(E7(d,i),m3(l,p)),nf=(d,i,l)=>({u_matrix:d,u_world:l,u_emissive_strength:i}),Vc=(d,i,l,p,_)=>a.l(rf(d,i,l,p),{u_world:_}),n8=(d,i,l,p)=>{const _=a.ab/l.tileSize;return{u_matrix:d,u_camera_to_center_distance:i.getCameraToCenterDistance(p),u_extrude_scale:[i.pixelsToGLUnits[0]/_,i.pixelsToGLUnits[1]/_]}},of=(d,i,l=1)=>({u_matrix:d,u_color:i.toRenderColor(null),u_overlay:0,u_overlay_scale:l}),af=a.a6.mat4.create(),i8=(d,i,l,p,_,x,A)=>{const O=d.transform,k=O.projection.name==="globe",z=k?a.cI(O.zoom,i.canonical)*O._pixelsPerMercatorPixel:a.ak(l,1,x),F={u_matrix:i.projMatrix,u_extrude_scale:z,u_intensity:A,u_inv_rot_matrix:af,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){F.u_inv_rot_matrix=p,F.u_merc_center=_,F.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],F.u_zoom_transition=a.a9(O.zoom);const U=_[0]*a.ab,V=_[1]*a.ab;F.u_up_dir=O.projection.upVector(new a.bP(0,0,0),U,V)}return F};function P7(d,[i,l,p,_],[x,A]){if(x===A)return[0,0,0,0];const O=255*(d-1)/(d*(A-x));return[i*O,l*O,p*O,_*O]}function M7(d,i,[l,p]){return l===p?0:.5/d+(i-l)*(d-1)/(d*(p-l))}const Gc=(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe,me,ye,de)=>({u_matrix:d,u_normalize_matrix:i,u_globe_matrix:l,u_merc_matrix:p,u_grid_matrix:_,u_tl_parent:x,u_scale_parent:z,u_fade_t:F.mix,u_opacity:F.opacity*U.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:U.paint.get("raster-brightness-min"),u_brightness_high:U.paint.get("raster-brightness-max"),u_saturation_factor:a.cJ(U.paint.get("raster-saturation")),u_contrast_factor:a.cK(U.paint.get("raster-contrast")),u_spin_weights:_3(U.paint.get("raster-hue-rotate")),u_perspective_transform:V,u_raster_elevation:q,u_zoom_transition:A,u_merc_center:O,u_cutoff_params:k,u_colorization_mix:P7(a.cL,ee,oe),u_colorization_offset:M7(a.cL,re,oe),u_color_ramp:J,u_texture_offset:[ye/(me+2*ye),me/(me+2*ye)],u_texture_res:[me+2*ye,me+2*ye],u_emissive_strength:de});function _3(d){d*=Math.PI/180;const i=Math.sin(d),l=Math.cos(d);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const Aa=.05,sf=(d,i,l,p,_,x,A,O,k,z,F,U)=>({u_matrix:d,u_normalize_matrix:i,u_globe_matrix:l,u_merc_matrix:p,u_grid_matrix:_,u_tl_parent:x,u_scale_parent:z,u_fade_t:F.mix,u_opacity:F.opacity,u_image0:0,u_image1:1,u_raster_elevation:U,u_zoom_transition:A,u_merc_center:O,u_cutoff_params:k}),C7=(d,i,l,p,_,x,A,O,k,z)=>({u_particle_texture:d,u_particle_texture_side_len:i,u_tile_offset:l,u_velocity:p,u_color_ramp:x,u_velocity_res:_,u_max_speed:A,u_uv_offset:O,u_data_scale:[255*k[0],255*k[1]],u_data_offset:z,u_particle_pos_scale:1.1,u_particle_pos_offset:[Aa,Aa]}),I7=(d,i,l,p,_,x,A,O,k,z)=>({u_particle_texture:d,u_particle_texture_side_len:i,u_velocity:l,u_velocity_res:p,u_max_speed:_,u_speed_factor:x,u_reset_rate:A,u_rand_seed:Math.random(),u_uv_offset:O,u_data_scale:[255*k[0],255*k[1]],u_data_offset:z,u_particle_pos_scale:1.1,u_particle_pos_offset:[Aa,Aa]}),O7=a.a6.mat4.create(),v3=(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe,me,ye,de)=>{const be=_.transform,xe={u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:be.getCameraToCenterDistance(me),u_rotate_symbol:+l,u_aspect_ratio:be.width/be.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:A,u_coord_matrix:O,u_is_text:+z,u_elevation_from_sea:k?1:0,u_pitch_with_map:+p,u_texsize:F,u_texsize_icon:U,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:O7,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:O7,u_up_vector:[0,-1,0],u_color_adj_mat:ye,u_icon_transition:de||0,u_gamma_scale:p?_.transform.getCameraToCenterDistance(me)*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:a.q.devicePixelRatio,u_is_halo:+V};return me.name==="globe"&&(xe.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],xe.u_zoom_transition=J,xe.u_inv_rot_matrix=re,xe.u_merc_center=ee,xe.u_camera_forward=be._camera.forward(),xe.u_ecef_origin=a.cM(be.globeMatrix,q.toUnwrapped()),xe.u_tile_matrix=Float32Array.from(be.globeMatrix),xe.u_up_vector=oe),xe},lf=(d,i,l,p)=>({u_matrix:d,u_emissive_strength:i,u_opacity:l,u_color:p}),sl=(d,i,l,p,_,x,A,O,k)=>a.l(function(z,F,U,V,q,J){const{width:ee,height:re}=V.imageManager.getPixelSize(F),oe=Math.pow(2,J.tileID.overscaledZ),me=J.tileSize*Math.pow(2,V.transform.tileZoom)/oe,ye=me*(J.tileID.canonical.x+J.tileID.wrap*oe),de=me*J.tileID.canonical.y;return{u_image:0,u_pattern_tl:U.tl,u_pattern_br:U.br,u_texsize:[ee,re],u_pattern_size:U.displaySize,u_pattern_units_to_pixels:q?[V.transform.width,-1*V.transform.height]:[1/a.ak(J,1,V.transform.tileZoom),1/a.ak(J,1,V.transform.tileZoom)],u_pixel_coord_upper:[ye>>16,de>>16],u_pixel_coord_lower:[65535&ye,65535&de]}}(0,x,A,p,O,k),{u_matrix:d,u_emissive_strength:i,u_opacity:l}),_1=new Float32Array(a.a6.mat4.identity([])),Ut=(d,i,l,p,_,x,A,O,k,z,F,U,V,q=[0,0,0],J)=>{const ee=_.style.light,re=ee.properties.get("position"),oe=[-re.x,-re.y,re.z],me=a.a6.mat3.create();ee.properties.get("anchor")==="viewport"&&(a.a6.mat3.fromRotation(me,-_.transform.angle),a.a6.vec3.transformMat3(oe,oe,me));const ye=F.alphaMode==="MASK",de=ee.properties.get("color").toRenderColor(null),be=V.paint.get("model-ambient-occlusion-intensity"),xe=V.paint.get("model-color").constantOr(a.bz.white).toRenderColor(null),Ce=V.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:d,u_lighting_matrix:i,u_normal_matrix:l,u_node_matrix:p||_1,u_lightpos:oe,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_camera_pos:q,u_opacity:x,u_baseTextureIsAlpha:0,u_alphaMask:+ye,u_alphaCutoff:F.alphaCutoff,u_baseColorFactor:[A.r,A.g,A.b,A.a],u_emissiveFactor:[O[0],O[1],O[2],1],u_metallicFactor:k,u_roughnessFactor:z,u_baseColorTexture:Mi.BaseColor,u_metallicRoughnessTexture:Mi.MetallicRoughness,u_normalTexture:Mi.Normal,u_occlusionTexture:Mi.Occlusion,u_emissionTexture:Mi.Emission,u_lutTexture:Mi.LUT,u_color_mix:[xe.r,xe.g,xe.b,Ce],u_aoIntensity:be,u_emissive_strength:U,u_occlusionTextureTransform:J||[0,0,0,0]}},x3=(d,i=_1,l=_1)=>({u_matrix:d,u_instance:i,u_node_matrix:l}),cf={fillExtrusion:d=>({u_matrix:new a.bF(d),u_lightpos:new a.bH(d),u_lightintensity:new a.bI(d),u_lightcolor:new a.bH(d),u_vertical_gradient:new a.bI(d),u_opacity:new a.bI(d),u_edge_radius:new a.bI(d),u_width_scale:new a.bI(d),u_ao:new a.bG(d),u_tile_id:new a.bH(d),u_zoom_transition:new a.bI(d),u_inv_rot_matrix:new a.bF(d),u_merc_center:new a.bG(d),u_up_dir:new a.bH(d),u_height_lift:new a.bI(d),u_flood_light_color:new a.bH(d),u_vertical_scale:new a.bI(d),u_flood_light_intensity:new a.bI(d),u_ground_shadow_factor:new a.bH(d)}),fillExtrusionDepth:d=>({u_matrix:new a.bF(d),u_edge_radius:new a.bI(d),u_width_scale:new a.bI(d),u_vertical_scale:new a.bI(d)}),fillExtrusionPattern:d=>({u_matrix:new a.bF(d),u_lightpos:new a.bH(d),u_lightintensity:new a.bI(d),u_lightcolor:new a.bH(d),u_vertical_gradient:new a.bI(d),u_height_factor:new a.bI(d),u_edge_radius:new a.bI(d),u_width_scale:new a.bI(d),u_ao:new a.bG(d),u_tile_id:new a.bH(d),u_zoom_transition:new a.bI(d),u_inv_rot_matrix:new a.bF(d),u_merc_center:new a.bG(d),u_up_dir:new a.bH(d),u_height_lift:new a.bI(d),u_image:new a.bJ(d),u_texsize:new a.bG(d),u_pixel_coord_upper:new a.bG(d),u_pixel_coord_lower:new a.bG(d),u_tile_units_to_pixels:new a.bI(d),u_opacity:new a.bI(d)}),fillExtrusionGroundEffect:d=>({u_matrix:new a.bF(d),u_opacity:new a.bI(d),u_ao_pass:new a.bI(d),u_meter_to_tile:new a.bI(d),u_ao:new a.bG(d),u_flood_light_intensity:new a.bI(d),u_flood_light_color:new a.bH(d),u_attenuation:new a.bI(d),u_edge_radius:new a.bI(d),u_fb:new a.bJ(d),u_fb_size:new a.bI(d),u_dynamic_offset:new a.bI(d)}),fill:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d)}),fillPattern:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d),u_image:new a.bJ(d),u_texsize:new a.bG(d),u_pixel_coord_upper:new a.bG(d),u_pixel_coord_lower:new a.bG(d),u_tile_units_to_pixels:new a.bI(d)}),fillOutline:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d),u_world:new a.bG(d)}),fillOutlinePattern:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d),u_world:new a.bG(d),u_image:new a.bJ(d),u_texsize:new a.bG(d),u_pixel_coord_upper:new a.bG(d),u_pixel_coord_lower:new a.bG(d),u_tile_units_to_pixels:new a.bI(d)}),circle:a.cN,collisionBox:d=>({u_matrix:new a.bF(d),u_camera_to_center_distance:new a.bI(d),u_extrude_scale:new a.bG(d)}),collisionCircle:d=>({u_matrix:new a.bF(d),u_inv_matrix:new a.bF(d),u_camera_to_center_distance:new a.bI(d),u_viewport_size:new a.bG(d)}),debug:d=>({u_color:new a.cu(d),u_matrix:new a.bF(d),u_overlay:new a.bJ(d),u_overlay_scale:new a.bI(d)}),clippingMask:d=>({u_matrix:new a.bF(d)}),heatmap:d=>({u_extrude_scale:new a.bI(d),u_intensity:new a.bI(d),u_matrix:new a.bF(d),u_inv_rot_matrix:new a.bF(d),u_merc_center:new a.bG(d),u_tile_id:new a.bH(d),u_zoom_transition:new a.bI(d),u_up_dir:new a.bH(d)}),heatmapTexture:d=>({u_image:new a.bJ(d),u_color_ramp:new a.bJ(d),u_opacity:new a.bI(d)}),hillshade:d=>({u_matrix:new a.bF(d),u_image:new a.bJ(d),u_latrange:new a.bG(d),u_light:new a.bG(d),u_shadow:new a.cu(d),u_highlight:new a.cu(d),u_emissive_strength:new a.bI(d),u_accent:new a.cu(d)}),hillshadePrepare:d=>({u_matrix:new a.bF(d),u_image:new a.bJ(d),u_dimension:new a.bG(d),u_zoom:new a.bI(d)}),line:a.cO,linePattern:a.cP,raster:d=>({u_matrix:new a.bF(d),u_normalize_matrix:new a.bF(d),u_globe_matrix:new a.bF(d),u_merc_matrix:new a.bF(d),u_grid_matrix:new a.cv(d),u_tl_parent:new a.bG(d),u_scale_parent:new a.bI(d),u_fade_t:new a.bI(d),u_opacity:new a.bI(d),u_image0:new a.bJ(d),u_image1:new a.bJ(d),u_brightness_low:new a.bI(d),u_brightness_high:new a.bI(d),u_saturation_factor:new a.bI(d),u_contrast_factor:new a.bI(d),u_spin_weights:new a.bH(d),u_perspective_transform:new a.bG(d),u_raster_elevation:new a.bI(d),u_zoom_transition:new a.bI(d),u_merc_center:new a.bG(d),u_cutoff_params:new a.c6(d),u_colorization_mix:new a.c6(d),u_colorization_offset:new a.bI(d),u_color_ramp:new a.bJ(d),u_texture_offset:new a.bG(d),u_texture_res:new a.bG(d),u_emissive_strength:new a.bI(d)}),rasterParticle:d=>({u_matrix:new a.bF(d),u_normalize_matrix:new a.bF(d),u_globe_matrix:new a.bF(d),u_merc_matrix:new a.bF(d),u_grid_matrix:new a.cv(d),u_tl_parent:new a.bG(d),u_scale_parent:new a.bI(d),u_fade_t:new a.bI(d),u_opacity:new a.bI(d),u_image0:new a.bJ(d),u_image1:new a.bJ(d),u_raster_elevation:new a.bI(d),u_zoom_transition:new a.bI(d),u_merc_center:new a.bG(d),u_cutoff_params:new a.c6(d)}),rasterParticleTexture:d=>({u_texture:new a.bJ(d),u_opacity:new a.bI(d)}),rasterParticleDraw:d=>({u_particle_texture:new a.bJ(d),u_particle_texture_side_len:new a.bI(d),u_tile_offset:new a.bG(d),u_velocity:new a.bJ(d),u_color_ramp:new a.bJ(d),u_velocity_res:new a.bG(d),u_max_speed:new a.bI(d),u_uv_offset:new a.bG(d),u_data_scale:new a.bG(d),u_data_offset:new a.bI(d),u_particle_pos_scale:new a.bI(d),u_particle_pos_offset:new a.bG(d)}),rasterParticleUpdate:d=>({u_particle_texture:new a.bJ(d),u_particle_texture_side_len:new a.bI(d),u_velocity:new a.bJ(d),u_velocity_res:new a.bG(d),u_max_speed:new a.bI(d),u_speed_factor:new a.bI(d),u_reset_rate:new a.bI(d),u_rand_seed:new a.bI(d),u_uv_offset:new a.bG(d),u_data_scale:new a.bG(d),u_data_offset:new a.bI(d),u_particle_pos_scale:new a.bI(d),u_particle_pos_offset:new a.bG(d)}),symbol:d=>({u_is_size_zoom_constant:new a.bJ(d),u_is_size_feature_constant:new a.bJ(d),u_size_t:new a.bI(d),u_size:new a.bI(d),u_camera_to_center_distance:new a.bI(d),u_rotate_symbol:new a.bJ(d),u_aspect_ratio:new a.bI(d),u_fade_change:new a.bI(d),u_matrix:new a.bF(d),u_label_plane_matrix:new a.bF(d),u_coord_matrix:new a.bF(d),u_is_text:new a.bJ(d),u_elevation_from_sea:new a.bJ(d),u_pitch_with_map:new a.bJ(d),u_texsize:new a.bG(d),u_texsize_icon:new a.bG(d),u_texture:new a.bJ(d),u_texture_icon:new a.bJ(d),u_gamma_scale:new a.bI(d),u_device_pixel_ratio:new a.bI(d),u_tile_id:new a.bH(d),u_zoom_transition:new a.bI(d),u_inv_rot_matrix:new a.bF(d),u_merc_center:new a.bG(d),u_camera_forward:new a.bH(d),u_tile_matrix:new a.bF(d),u_up_vector:new a.bH(d),u_ecef_origin:new a.bH(d),u_is_halo:new a.bJ(d),u_icon_transition:new a.bI(d),u_color_adj_mat:new a.bF(d)}),background:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d),u_opacity:new a.bI(d),u_color:new a.cu(d)}),backgroundPattern:d=>({u_matrix:new a.bF(d),u_emissive_strength:new a.bI(d),u_opacity:new a.bI(d),u_image:new a.bJ(d),u_pattern_tl:new a.bG(d),u_pattern_br:new a.bG(d),u_texsize:new a.bG(d),u_pattern_size:new a.bG(d),u_pixel_coord_upper:new a.bG(d),u_pixel_coord_lower:new a.bG(d),u_pattern_units_to_pixels:new a.bG(d)}),terrainRaster:d=>({u_matrix:new a.bF(d),u_image0:new a.bJ(d),u_skirt_height:new a.bI(d),u_ground_shadow_factor:new a.bH(d)}),skybox:d=>({u_matrix:new a.bF(d),u_sun_direction:new a.bH(d),u_cubemap:new a.bJ(d),u_opacity:new a.bI(d),u_temporal_offset:new a.bI(d)}),skyboxGradient:d=>({u_matrix:new a.bF(d),u_color_ramp:new a.bJ(d),u_center_direction:new a.bH(d),u_radius:new a.bI(d),u_opacity:new a.bI(d),u_temporal_offset:new a.bI(d)}),skyboxCapture:d=>({u_matrix_3f:new a.cv(d),u_sun_direction:new a.bH(d),u_sun_intensity:new a.bI(d),u_color_tint_r:new a.c6(d),u_color_tint_m:new a.c6(d),u_luminance:new a.bI(d)}),globeRaster:d=>({u_proj_matrix:new a.bF(d),u_globe_matrix:new a.bF(d),u_normalize_matrix:new a.bF(d),u_merc_matrix:new a.bF(d),u_zoom_transition:new a.bI(d),u_merc_center:new a.bG(d),u_image0:new a.bJ(d),u_grid_matrix:new a.cv(d),u_skirt_height:new a.bI(d),u_far_z_cutoff:new a.bI(d),u_frustum_tl:new a.bH(d),u_frustum_tr:new a.bH(d),u_frustum_br:new a.bH(d),u_frustum_bl:new a.bH(d),u_globe_pos:new a.bH(d),u_globe_radius:new a.bI(d),u_viewport:new a.bG(d)}),globeAtmosphere:d=>({u_frustum_tl:new a.bH(d),u_frustum_tr:new a.bH(d),u_frustum_br:new a.bH(d),u_frustum_bl:new a.bH(d),u_horizon:new a.bI(d),u_transition:new a.bI(d),u_fadeout_range:new a.bI(d),u_color:new a.c6(d),u_high_color:new a.c6(d),u_space_color:new a.c6(d),u_temporal_offset:new a.bI(d),u_horizon_angle:new a.bI(d)}),model:d=>({u_matrix:new a.bF(d),u_lighting_matrix:new a.bF(d),u_normal_matrix:new a.bF(d),u_node_matrix:new a.bF(d),u_lightpos:new a.bH(d),u_lightintensity:new a.bI(d),u_lightcolor:new a.bH(d),u_camera_pos:new a.bH(d),u_opacity:new a.bI(d),u_baseColorFactor:new a.c6(d),u_emissiveFactor:new a.c6(d),u_metallicFactor:new a.bI(d),u_roughnessFactor:new a.bI(d),u_baseTextureIsAlpha:new a.bJ(d),u_alphaMask:new a.bJ(d),u_alphaCutoff:new a.bI(d),u_baseColorTexture:new a.bJ(d),u_metallicRoughnessTexture:new a.bJ(d),u_normalTexture:new a.bJ(d),u_occlusionTexture:new a.bJ(d),u_emissionTexture:new a.bJ(d),u_lutTexture:new a.bJ(d),u_color_mix:new a.c6(d),u_aoIntensity:new a.bI(d),u_emissive_strength:new a.bI(d),u_occlusionTextureTransform:new a.c6(d)}),modelDepth:d=>({u_matrix:new a.bF(d),u_instance:new a.bF(d),u_node_matrix:new a.bF(d)}),groundShadow:d=>({u_matrix:new a.bF(d),u_ground_shadow_factor:new a.bH(d)}),stars:d=>({u_matrix:new a.bF(d),u_up:new a.bH(d),u_right:new a.bH(d),u_intensity_multiplier:new a.bI(d)}),occlusion:d=>({u_matrix:new a.bF(d),u_anchorPos:new a.bH(d),u_screenSizePx:new a.bG(d),u_occluderSizePx:new a.bG(d),u_color:new a.c6(d)})};class lo{constructor(i,l,p,_){this.id=lo.uniqueIdxCounter,lo.uniqueIdxCounter++,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||_||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){this.id=lo.uniqueIdxCounter,lo.uniqueIdxCounter++;const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}lo.uniqueIdxCounter=0;const ll={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zt{constructor(i,l,p,_,x,A){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=_,this.instanceCount=A,this.context=i;const O=i.gl;this.buffer=O.createBuffer(),i.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||x||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let p=0;p<this.attributes.length;p++){const _=l.attributes[this.attributes[p].name];_!==void 0&&i.enableVertexAttribArray(_)}}setVertexAttribPointers(i,l,p){for(let _=0;_<this.attributes.length;_++){const x=this.attributes[_],A=l.attributes[x.name];A!==void 0&&i.vertexAttribPointer(A,x.components,i[ll[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}setVertexAttribDivisor(i,l,p){for(let _=0;_<this.attributes.length;_++){const x=l.attributes[this.attributes[_].name];x!==void 0&&this.instanceCount&&this.instanceCount>0&&i.vertexAttribDivisor(x,p)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class R7{constructor(i,l,p,_,x){this.context=i,this.width=l,this.height=p;const A=this.framebuffer=i.gl.createFramebuffer();_&&(this.colorAttachment=new A7(i,A)),x&&(this.depthAttachmentType=x,this.depthAttachment=x==="renderbuffer"?new u3(i,A):new Z6(i,A))}destroy(){const i=this.context.gl;if(this.colorAttachment){const l=this.colorAttachment.get();l&&i.deleteTexture(l)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const l=this.depthAttachment.get();l&&i.deleteRenderbuffer(l)}else{const l=this.depthAttachment.get();l&&i.deleteTexture(l)}i.deleteFramebuffer(this.framebuffer)}}class o8{constructor(i,l){this.gl=i,this.clearColor=new e3(this),this.clearDepth=new j6(this),this.clearStencil=new t3(this),this.colorMask=new v7(this),this.depthMask=new Fc(this),this.stencilMask=new $6(this),this.stencilFunc=new U6(this),this.stencilOp=new V6(this),this.stencilTest=new p1(this),this.depthRange=new G6(this),this.depthTest=new J4(this),this.depthFunc=new Q4(this),this.blend=new e8(this),this.blendFunc=new r3(this),this.blendColor=new n3(this),this.blendEquation=new i3(this),this.cullFace=new o3(this),this.cullFaceSide=new q6(this),this.frontFace=new W6(this),this.program=new t8(this),this.activeTexture=new Nc(this),this.viewport=new jc(this),this.bindFramebuffer=new H6(this),this.bindRenderbuffer=new To(this),this.bindTexture=new a3(this),this.bindVertexBuffer=new x7(this),this.bindElementBuffer=new b7(this),this.bindVertexArrayOES=new s3(this),this.pixelStoreUnpack=new l3(this),this.pixelStoreUnpackPremultiplyAlpha=new w7(this),this.pixelStoreUnpackFlipY=new c3(this),this.options=l?{...l}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=i.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxPointSize=i.getParameter(i.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l,p){return new lo(this,i,l,p)}createVertexBuffer(i,l,p,_,x){return new Zt(this,i,l,p,_,x)}createRenderbuffer(i,l,p){const _=this.gl,x=_.createRenderbuffer();return this.bindRenderbuffer.set(x),_.renderbufferStorage(_.RENDERBUFFER,i,l,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,l,p,_){return new R7(this,i,l,p,_)}clear({color:i,depth:l,stencil:p,colorMask:_}){const x=this.gl;let A=0;i&&(A|=x.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set(_||[!0,!0,!0,!0])),l!==void 0&&(A|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p!==void 0&&(A|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),x.clear(A)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.bh(i.blendFunction,Pr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let D7;function k7(d,i,l,p,_,x,A){const O=d.context,k=O.gl,z=d.transform,F=d.getOrCreateProgram("collisionBox"),U=[];let V=0,q=0;for(let de=0;de<p.length;de++){const be=p[de],xe=i.getTile(be),Ce=xe.getBucket(l);if(!Ce)continue;const Se=P6(be,Ce,z);let Ie=Se;_[0]===0&&_[1]===0||(Ie=d.translatePosMatrix(Se,xe,_,x));const ze=A?Ce.textCollisionBox:Ce.iconCollisionBox,ke=Ce.collisionCircleArray;if(ke.length>0){const Re=a.a6.mat4.create(),Ve=Ie;a.a6.mat4.mul(Re,Ce.placementInvProjMatrix,z.glCoordMatrix),a.a6.mat4.mul(Re,Re,Ce.placementViewportMatrix),U.push({circleArray:ke,circleOffset:q,transform:Ve,invTransform:Re,projection:Ce.getProjection()}),V+=ke.length/4,q=V}ze&&(d.terrain&&d.terrain.setupElevationDraw(xe,F),F.draw(d,k.LINES,Jt.disabled,pr.disabled,d.colorModeForRenderPass(),or.disabled,n8(Ie,z,xe,Ce.getProjection()),l.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,z.zoom,null,[ze.collisionVertexBuffer,ze.collisionVertexBufferExt]))}if(!A||!U.length)return;const J=d.getOrCreateProgram("collisionCircle"),ee=new a.cQ;ee.resize(4*V),ee._trim();let re=0;for(const de of U)for(let be=0;be<de.circleArray.length/4;be++){const xe=4*be,Ce=de.circleArray[xe+0],Se=de.circleArray[xe+1],Ie=de.circleArray[xe+2],ze=de.circleArray[xe+3];ee.emplace(re++,Ce,Se,Ie,ze,0),ee.emplace(re++,Ce,Se,Ie,ze,1),ee.emplace(re++,Ce,Se,Ie,ze,2),ee.emplace(re++,Ce,Se,Ie,ze,3)}(!D7||D7.length<2*V)&&(D7=function(de){const be=2*de,xe=new a.aO;xe.resize(be),xe._trim();for(let Ce=0;Ce<be;Ce++){const Se=6*Ce;xe.uint16[Se+0]=4*Ce+0,xe.uint16[Se+1]=4*Ce+1,xe.uint16[Se+2]=4*Ce+2,xe.uint16[Se+3]=4*Ce+2,xe.uint16[Se+4]=4*Ce+3,xe.uint16[Se+5]=4*Ce+0}return xe}(V));const oe=O.createIndexBuffer(D7,!0),me=O.createVertexBuffer(ee,a.cR.members,!0);for(const de of U){const be={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(ye=z).getCameraToCenterDistance(de.projection),u_viewport_size:[ye.width,ye.height]};J.draw(d,k.TRIANGLES,Jt.disabled,pr.disabled,d.colorModeForRenderPass(),or.disabled,be,l.id,me,oe,a.b1.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,z.zoom)}var ye;me.destroy(),oe.destroy()}const qc=a.a6.mat4.create();function b3(d){const i=d._camera.getWorldToCamera(d.worldSize,1),l=a.a6.mat4.multiply([],i,d.globeMatrix);a.a6.mat4.invert(l,l);const p=[0,0,0],_=[0,1,0,0];return a.a6.vec4.transformMat4(_,_,l),p[0]=_[0],p[1]=_[1],p[2]=_[2],a.a6.vec3.normalize(p,p),p}function a8({width:d,height:i,anchor:l,textOffset:p,textScale:_},x){const{horizontalAlign:A,verticalAlign:O}=a.bx(l),k=-(A-.5)*d,z=-(O-.5)*i,F=a.bw(l,p);return new a.P((k/_+F[0])*x,(z/_+F[1])*x)}function s8(d,i,l,p,_,x,A,O,k,z,F){const U=d.text.placedSymbolArray,V=d.text.dynamicLayoutVertexArray,q=d.icon.dynamicLayoutVertexArray,J={},ee=d.getProjection(),re=Ts(O,ee,x),oe=x.elevation,me=ee.upVectorScale(O.canonical,x.center.lat,x.worldSize).metersToTile;V.clear();for(let ye=0;ye<U.length;ye++){const de=U.get(ye),{tileAnchorX:be,tileAnchorY:xe,numGlyphs:Ce}=de,Se=de.hidden||!de.crossTileID||d.allowVerticalPlacement&&!de.placedOrientation?null:p[de.crossTileID];if(Se){let Ie=0,ze=0,ke=0;if(oe){const at=oe?oe.getAtTileOffset(O,be,xe):0,[wt,Tt,ft]=ee.upVector(O.canonical,be,xe);Ie=at*wt*me,ze=at*Tt*me,ke=at*ft*me}let[Re,Ve,nt,dt]=Bi(de.projectedAnchorX+Ie,de.projectedAnchorY+ze,de.projectedAnchorZ+ke,l?re:A);const rt=Lr(x.getCameraToCenterDistance(ee),dt);let xt=_.evaluateSizeForFeature(d.textSizeData,z,de)*rt/a.bq;l&&(xt*=d.tilePixelRatio/k);const Ge=a8(Se,xt);l?({x:Re,y:Ve,z:nt}=ee.projectTilePoint(be+Ge.x,xe+Ge.y,O.canonical),[Re,Ve,nt]=Bi(Re+Ie,Ve+ze,nt+ke,A)):(i&&Ge._rotate(-x.angle),Re+=Ge.x,Ve+=Ge.y,nt=0);const ct=d.allowVerticalPlacement&&de.placedOrientation===a.bk.vertical?Math.PI/2:0;for(let at=0;at<Ce;at++)a.bn(V,Re,Ve,nt,ct);F&&de.associatedIconIndex>=0&&(J[de.associatedIconIndex]={x:Re,y:Ve,z:nt,angle:ct})}else wa(Ce,V)}if(F){q.clear();const ye=d.icon.placedSymbolArray;for(let de=0;de<ye.length;de++){const be=ye.get(de),{numGlyphs:xe}=be,Ce=J[de];if(be.hidden||!Ce)wa(xe,q);else{const{x:Se,y:Ie,z:ze,angle:ke}=Ce;for(let Re=0;Re<xe;Re++)a.bn(q,Se,Ie,ze,ke)}}d.icon.dynamicLayoutVertexBuffer.updateData(q)}d.text.dynamicLayoutVertexBuffer.updateData(V)}function Wc(d,i,l,p,_,x,A={}){const O=l.paint.get("icon-translate"),k=l.paint.get("text-translate"),z=l.paint.get("icon-translate-anchor"),F=l.paint.get("text-translate-anchor"),U=l.layout.get("icon-rotation-alignment"),V=l.layout.get("text-rotation-alignment"),q=l.layout.get("icon-pitch-alignment"),J=l.layout.get("text-pitch-alignment"),ee=l.layout.get("icon-keep-upright"),re=l.layout.get("text-keep-upright"),oe=l.paint.get("icon-color-saturation"),me=l.paint.get("icon-color-contrast"),ye=l.paint.get("icon-color-brightness-min"),de=l.paint.get("icon-color-brightness-max"),be=l.paint.get("symbol-elevation-reference")==="sea",xe=l.paint.get("text-occlusion-opacity").constantOr(0),Ce=d.context,Se=Ce.gl,Ie=d.transform,ze=U==="map",ke=V==="map",Re=q==="map",Ve=J==="map",nt=l.layout.get("symbol-sort-key").constantOr(1)!==void 0;let dt=!1;const rt=d.depthModeForSublayer(0,Jt.ReadOnly),xt=[a.am(Ie.center.lng),a.at(Ie.center.lat)],Ge=l.layout.get("text-variable-anchor"),ct=Ie.projection.name==="globe",at=[],wt=[0,-1,0];for(const Tt of p){const ft=i.getTile(Tt),gt=ft.getBucket(l);if(!gt||gt.projection.name==="mercator"&&ct||gt.fullyClipped)continue;const Yt=gt.projection.name==="globe",It=Yt?a.a9(Ie.zoom):0,jt=Ts(Tt,gt.getProjection(),Ie),ir=Ie.calculatePixelsToTileUnitsMatrix(ft),Wt=Ge&&gt.hasTextData(),tr=gt.hasIconTextFit()&&Wt&&gt.hasIconData(),Tr=gt.getProjection().createInversionMatrix(Ie,Tt.canonical),xr=Qr=>{Ie.depthOcclusionForSymbolsAndCircles&&(l.hasInitialOcclusionOpacityProperties||d.terrain)&&(Qr.push("DEPTH_D24"),Qr.push("DEPTH_OCCLUSION"))},Kr=()=>{const Qr=ze&&l.layout.get("symbol-placement")!=="point",wr=[];xr(wr);const jr=Qr||tr,Wr=l.paint.get("icon-image-cross-fade").constantOr(0);d.terrainRenderModeElevated()&&Re&&wr.push("PITCH_WITH_MAP_TERRAIN"),Yt&&(wr.push("PROJECTION_GLOBE_VIEW"),jr&&wr.push("PROJECTED_POS_ON_VIEWPORT")),Wr>0&&wr.push("ICON_TRANSITION"),gt.icon.zOffsetVertexBuffer&&wr.push("Z_OFFSET"),oe===0&&me===0&&ye===0&&de===1||wr.push("COLOR_ADJUSTMENT"),gt.sdfIcons&&wr.push("RENDER_SDF");const Dn=gt.icon.programConfigurations.get(l.id),Un=d.getOrCreateProgram("symbol",{config:Dn,defines:wr}),Dr=ft.imageAtlasTexture?ft.imageAtlasTexture.size:[0,0],ai=gt.iconSizeData,di=a.bj(ai,Ie.zoom),si=Re||Ie.pitch!==0,hn=Ir(jt,ft.tileID.canonical,Re,ze,Ie,gt.getProjection(),ir),Ki=ao(jt,ft.tileID.canonical,Re,ze,Ie,gt.getProjection(),ir),Ji=d.translatePosMatrix(Ki,ft,O,z,!0),jo=d.translatePosMatrix(jt,ft,O,z),Eo=jr?qc:hn,uo=ze&&!Re&&!Qr;let $o=wt;!ct&&!Ie.mercatorFromTransition||ze||($o=b3(Ie));const is=Yt?$o:wt,Ls=l.getColorAdjustmentMatrix(oe,me,ye,de),Pa=v3(ai.kind,di,uo,Re,d,jo,Eo,Ji,be,!1,Dr,[0,0],!0,Tt,It,xt,Tr,is,gt.getProjection(),Ls,Wr),C1=ft.imageAtlasTexture?ft.imageAtlasTexture:null,I1=l.layout.get("icon-size").constantOr(0)!==1||gt.iconsNeedLinear,K7=gt.sdfIcons||d.options.rotating||d.options.zooming||I1||si?Se.LINEAR:Se.NEAREST,O1=gt.sdfIcons&&l.paint.get("icon-halo-width").constantOr(1)!==0,fn=d.terrain&&Re&&Qr?a.a6.mat4.invert(a.a6.mat4.create(),hn):qc;if(Qr&&gt.icon){const pl=Ie.elevation,w8=pl?pl.getAtTileOffsetFunc(Tt,Ie.center.lat,Ie.worldSize,gt.getProjection()):null,Mf=Or(jt,ft.tileID.canonical,Re,ze,Ie,gt.getProjection(),ir);e1(gt,jt,d,!1,Mf,Ki,Re,ee,w8,Tt)}return{program:Un,buffers:gt.icon,uniformValues:Pa,atlasTexture:C1,atlasTextureIcon:null,atlasInterpolation:K7,atlasInterpolationIcon:null,isSDF:gt.sdfIcons,hasHalo:O1,tile:ft,labelPlaneMatrixInv:fn}},nn=()=>{const Qr=ke&&l.layout.get("symbol-placement")!=="point",wr=[],jr=Qr||Ge||tr;d.terrainRenderModeElevated()&&Ve&&wr.push("PITCH_WITH_MAP_TERRAIN"),Yt&&(wr.push("PROJECTION_GLOBE_VIEW"),jr&&wr.push("PROJECTED_POS_ON_VIEWPORT")),gt.text.zOffsetVertexBuffer&&wr.push("Z_OFFSET"),gt.iconsInText&&wr.push("RENDER_TEXT_AND_SYMBOL"),wr.push("RENDER_SDF"),xr(wr);const Wr=gt.text.programConfigurations.get(l.id),Dn=d.getOrCreateProgram("symbol",{config:Wr,defines:wr});let Un,Dr=[0,0],ai=null;const di=gt.textSizeData;gt.iconsInText&&(Dr=ft.imageAtlasTexture?ft.imageAtlasTexture.size:[0,0],ai=ft.imageAtlasTexture?ft.imageAtlasTexture:null,Un=Ve||Ie.pitch!==0||d.options.rotating||d.options.zooming||di.kind==="composite"||di.kind==="camera"?Se.LINEAR:Se.NEAREST);const si=ft.glyphAtlasTexture?ft.glyphAtlasTexture.size:[0,0],hn=a.bj(di,Ie.zoom),Ki=Ir(jt,ft.tileID.canonical,Ve,ke,Ie,gt.getProjection(),ir),Ji=ao(jt,ft.tileID.canonical,Ve,ke,Ie,gt.getProjection(),ir),jo=d.translatePosMatrix(Ji,ft,k,F,!0),Eo=d.translatePosMatrix(jt,ft,k,F),uo=jr?qc:Ki,$o=ke&&!Ve&&!Qr;let is=wt;!ct&&!Ie.mercatorFromTransition||ke||(is=b3(Ie));const Ls=v3(di.kind,hn,$o,Ve,d,Eo,uo,jo,be,!0,si,Dr,!0,Tt,It,xt,Tr,Yt?is:wt,gt.getProjection(),xe),Pa=ft.glyphAtlasTexture?ft.glyphAtlasTexture:null,C1=Se.LINEAR,I1=l.paint.get("text-halo-width").constantOr(1)!==0,K7=d.terrain&&Ve&&Qr?a.a6.mat4.invert(a.a6.mat4.create(),Ki):qc;if(Qr&&gt.text){const O1=Ie.elevation,fn=O1?O1.getAtTileOffsetFunc(Tt,Ie.center.lat,Ie.worldSize,gt.getProjection()):null,pl=Or(jt,ft.tileID.canonical,Ve,ke,Ie,gt.getProjection(),ir);e1(gt,jt,d,!0,pl,Ji,Ve,re,fn,Tt)}return{program:Dn,buffers:gt.text,uniformValues:Ls,atlasTexture:Pa,atlasTextureIcon:ai,atlasInterpolation:C1,atlasInterpolationIcon:Un,isSDF:!0,hasHalo:I1,tile:ft,labelPlaneMatrixInv:K7}},pn=gt.icon.segments.get().length,No=gt.text.segments.get().length,$n=pn&&!A.onlyText?Kr():null,Mr=No&&!A.onlyIcons?nn():null,en=l.paint.get("icon-opacity").constantOr(1),wn=l.paint.get("text-opacity").constantOr(1);if(nt&&gt.canOverlap){dt=!0;const Qr=en&&!A.onlyText?gt.icon.segments.get():[],wr=wn&&!A.onlyIcons?gt.text.segments.get():[];for(const jr of Qr)at.push({segments:new a.b1([jr]),sortKey:jr.sortKey,state:$n});for(const jr of wr)at.push({segments:new a.b1([jr]),sortKey:jr.sortKey,state:Mr})}else A.onlyText||at.push({segments:en?gt.icon.segments:new a.b1([]),sortKey:0,state:$n}),A.onlyIcons||at.push({segments:wn?gt.text.segments:new a.b1([]),sortKey:0,state:Mr})}dt&&at.sort((Tt,ft)=>Tt.sortKey-ft.sortKey);for(const Tt of at){const ft=Tt.state;if(ft)if(d.terrain?d.terrain.setupElevationDraw(ft.tile,ft.program,{useDepthForOcclusion:Ie.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:ft.labelPlaneMatrixInv}):d.setupDepthForOcclusion(Ie.depthOcclusionForSymbolsAndCircles,ft.program),Ce.activeTexture.set(Se.TEXTURE0),ft.atlasTexture&&ft.atlasTexture.bind(ft.atlasInterpolation,Se.CLAMP_TO_EDGE,!0),ft.atlasTextureIcon&&(Ce.activeTexture.set(Se.TEXTURE1),ft.atlasTextureIcon&&ft.atlasTextureIcon.bind(ft.atlasInterpolationIcon,Se.CLAMP_TO_EDGE,!0)),d.uploadCommonLightUniforms(d.context,ft.program),ft.hasHalo){const gt=ft.uniformValues;gt.u_is_halo=1,Hc(ft.buffers,Tt.segments,l,d,ft.program,rt,_,x,gt,2),gt.u_is_halo=0}else{if(ft.isSDF){const gt=ft.uniformValues;ft.hasHalo&&(gt.u_is_halo=1,Hc(ft.buffers,Tt.segments,l,d,ft.program,rt,_,x,gt,1)),gt.u_is_halo=0}Hc(ft.buffers,Tt.segments,l,d,ft.program,rt,_,x,ft.uniformValues,1)}}}function Hc(d,i,l,p,_,x,A,O,k,z){const F=[d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer,d.iconTransitioningVertexBuffer,d.globeExtVertexBuffer,d.zOffsetVertexBuffer];_.draw(p,p.context.gl.TRIANGLES,x,A,O,or.disabled,k,l.id,d.layoutVertexBuffer,d.indexBuffer,i,l.paint,p.transform.zoom,d.programConfigurations.get(l.id),F,z)}function L7(d,i,l,p,_,x,A){const O=d.context.gl,k=l.paint.get("fill-pattern"),z=l.is3D(),F=z?d.stencilModeFor3D():pr.disabled,U=k&&k.constantOr(1);let V,q,J,ee,re;A?(q=U&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=O.LINES):(q=U?"fillPattern":"fill",V=O.TRIANGLES);for(const oe of p){const me=i.getTile(oe);if(U&&!me.patternsLoaded())continue;const ye=me.getBucket(l);if(!ye)continue;d.prepareDrawTile();const de=ye.programConfigurations.get(l.id),be=d.isTileAffectedByFog(oe),xe=d.getOrCreateProgram(q,{config:de,overrideFog:be});U&&(d.context.activeTexture.set(O.TEXTURE0),me.imageAtlasTexture&&me.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),de.updatePaintBuffers());const Ce=k.constantOr(null);if(Ce&&me.imageAtlas){const ze=me.imageAtlas.patternPositions[Ce.toString()];ze&&de.setConstantPatternPositions(ze)}const Se=d.translatePosMatrix(oe.projMatrix,me,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor")),Ie=l.paint.get("fill-emissive-strength");if(A){ee=ye.indexBuffer2,re=ye.segments2;const ze=d.terrain&&d.terrain.renderingToTexture?d.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];J=q==="fillOutlinePattern"&&U?Vc(Se,Ie,d,me,ze):nf(Se,Ie,ze)}else ee=ye.indexBuffer,re=ye.segments,J=U?rf(Se,Ie,d,me):E7(Se,Ie);d.uploadCommonUniforms(d.context,xe,oe.toUnwrapped()),xe.draw(d,V,_,z?F:d.stencilModeForClipping(oe),x,or.disabled,J,l.id,ye.layoutVertexBuffer,ee,re,l.paint,d.transform.zoom,de,void 0)}}function v1(d,i,l,p,_,x,A,O){l.resetLayerRenderingStats(d);const k=d.context,z=k.gl,F=d.transform,U=l.paint.get("fill-extrusion-pattern"),V=U.constantOr(1),q=l.paint.get("fill-extrusion-opacity"),J=d.style.enable3dLights(),ee=l.paint.get(J&&!V?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),re=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee],oe=l.layout.get("fill-extrusion-edge-radius"),me=oe>0&&!l.paint.get("fill-extrusion-rounded-roof"),ye=me?0:oe,de=F.projection.name==="globe"?a.c_():0,be=F.projection.name==="globe",xe=be?a.a9(F.zoom):0,Ce=[a.am(F.center.lng),a.at(F.center.lat)],Se=l.paint.get("fill-extrusion-flood-light-color").toRenderColor(l.lut).toArray01().slice(0,3),Ie=l.paint.get("fill-extrusion-flood-light-intensity"),ze=l.paint.get("fill-extrusion-vertical-scale"),ke=l.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Re=Ja(d,l.paint.get("fill-extrusion-cutoff-fade-range")),Ve=[];let nt;be&&Ve.push("PROJECTION_GLOBE_VIEW"),re[0]>0&&Ve.push("FAUX_AO"),me&&Ve.push("ZERO_ROOF_RADIUS"),O&&Ve.push("HAS_CENTROID"),Ie>0&&Ve.push("FLOOD_LIGHT"),Re.shouldRenderCutoff&&Ve.push("RENDER_CUTOFF"),ke&&Ve.push("RENDER_WALL_MODE");const dt=d.renderPass==="shadow",rt=d.shadowRenderer,xt=dt&&!!rt;d.shadowRenderer&&(d.shadowRenderer.useNormalOffset=!0);let Ge=[0,0,0];if(rt){const wt=d.style.directionalLight,Tt=d.style.ambientLight;wt&&Tt&&(Ge=h7(d.style,wt,Tt)),nt=Ve.concat(["SHADOWS_SINGLE_CASCADE"])}const ct=xt?"fillExtrusionDepth":V?"fillExtrusionPattern":"fillExtrusion",at=l.getLayerRenderingStats();for(const wt of p){const Tt=i.getTile(wt),ft=Tt.getBucket(l);if(!ft||ft.projection.name!==F.projection.name)continue;let gt=!1;rt&&(gt=rt.getMaxCascadeForTile(wt.toUnwrapped())===0);const Yt=d.isTileAffectedByFog(wt),It=ft.programConfigurations.get(l.id),jt=d.getOrCreateProgram(ct,{config:It,defines:gt?nt:Ve,overrideFog:Yt});if(d.terrain&&d.terrain.setupElevationDraw(Tt,jt,{useMeterToDem:!0}),!ft.centroidVertexBuffer){const nn=jt.attributes.a_centroid_pos;nn!==void 0&&z.vertexAttrib2f(nn,0,0)}!dt&&rt&&rt.setupShadows(Tt.tileID.toUnwrapped(),jt,"vector-tile",Tt.tileID.overscaledZ),V&&(d.context.activeTexture.set(z.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),It.updatePaintBuffers());const ir=U.constantOr(null);if(ir&&Tt.imageAtlas){const nn=Tt.imageAtlas.patternPositions[ir.toString()];nn&&It.setConstantPatternPositions(nn)}const Wt=l.paint.get("fill-extrusion-vertical-gradient"),tr=1/ft.tileToMeter;let Tr;if(dt&&rt){if(T3(Tt.tileID,ft,d))continue;const nn=rt.calculateShadowPassMatrixFromTile(Tt.tileID.toUnwrapped());Tr=tf(nn,ye,tr,ze)}else{const nn=d.translatePosMatrix(wt.expandedProjMatrix,Tt,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),pn=F.projection.createInversionMatrix(F,wt.canonical);Tr=V?y3(nn,d,Wt,q,re,ye,tr,wt,Tt,de,xe,Ce,pn,Se,ze):g3(nn,d,Wt,q,re,ye,tr,wt,de,xe,Ce,pn,Se,ze,Ie,Ge)}d.uploadCommonUniforms(k,jt,wt.toUnwrapped(),null,Re);let xr=ft.segments;if(F.projection.name==="mercator"&&!dt&&(xr=ft.getVisibleSegments(Tt.tileID,d.terrain,d.transform.getFrustum(0)),!xr.get().length))continue;if(at)if(dt)for(const nn of xr.get())at.numRenderedVerticesInShadowPass+=nn.primitiveLength;else for(const nn of xr.get())at.numRenderedVerticesInTransparentPass+=nn.primitiveLength;const Kr=[];(d.terrain||O)&&Kr.push(ft.centroidVertexBuffer),be&&Kr.push(ft.layoutVertexExtBuffer),ke&&Kr.push(ft.wallVertexBuffer),jt.draw(d,k.gl.TRIANGLES,_,x,A,or.backCCW,Tr,l.id,ft.layoutVertexBuffer,ft.indexBuffer,xr,l.paint,d.transform.zoom,It,Kr)}d.shadowRenderer&&(d.shadowRenderer.useNormalOffset=!1)}function vi(d,i,l,p,_,x,A,O,k,z,F,U,V,q,J,ee,re,oe,me){const ye=d.context,de=ye.gl,be=d.transform,xe=d.transform.zoom,Ce=[],Se=Ja(d,l.paint.get("fill-extrusion-cutoff-fade-range"));z==="clear"?(Ce.push("CLEAR_SUBPASS"),me&&(Ce.push("CLEAR_FROM_TEXTURE"),ye.activeTexture.set(de.TEXTURE0),me.bind(de.LINEAR,de.CLAMP_TO_EDGE))):z==="sdf"&&Ce.push("SDF_SUBPASS"),re&&Ce.push("HAS_CENTROID"),Se.shouldRenderCutoff&&Ce.push("RENDER_CUTOFF");const Ie=l.layout.get("fill-extrusion-edge-radius"),ze=(ke,Re,Ve,nt,dt)=>{const rt=Re.programConfigurations.get(l.id),xt=d.isTileAffectedByFog(ke),Ge=d.getOrCreateProgram("fillExtrusionGroundEffect",{config:rt,defines:Ce,overrideFog:xt}),ct=((wt,Tt,ft,gt,Yt,It,jt,ir,Wt,tr,Tr)=>({u_matrix:Tt,u_opacity:ft,u_ao_pass:gt?1:0,u_meter_to_tile:Yt,u_ao:It,u_flood_light_intensity:jt,u_flood_light_color:ir,u_attenuation:Wt,u_edge_radius:tr,u_fb:0,u_fb_size:Tr,u_dynamic_offset:1}))(0,nt,F,k,dt,[U,V*dt],q,J,ee,xe>=17?0:Ie*dt,me?me.size[0]:0),at=[];re&&at.push(Re.hiddenByLandmarkVertexBuffer),d.uploadCommonUniforms(ye,Ge,ke.toUnwrapped(),null,Se),Ge.draw(d,ye.gl.TRIANGLES,_,x,A,O,ct,l.id,Re.vertexBuffer,Re.indexBuffer,Ve,l.paint,xe,rt,at)};for(const ke of p){const Re=i.getTile(ke),Ve=Re.getBucket(l);if(!Ve||Ve.projection.name!==be.projection.name||!Ve.groundEffect||Ve.groundEffect&&!Ve.groundEffect.hasData())continue;const nt=Ve.groundEffect,dt=1/Ve.tileToMeter;{const rt=d.translatePosMatrix(ke.projMatrix,Re,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),xt=nt.getDefaultSegment();ze(ke,nt,xt,rt,dt)}if(oe)for(let rt=0;rt<4;rt++){const xt=a.c$[rt](ke),Ge=i.getTile(xt);if(!Ge)continue;const ct=Ge.getBucket(l);if(!ct||ct.projection.name!==be.projection.name||!ct.groundEffect||ct.groundEffect&&!ct.groundEffect.hasData())continue;const at=ct.groundEffect;let wt,Tt;rt===0?(wt=[-a.ab,0,0],Tt=1):rt===1?(wt=[a.ab,0,0],Tt=0):rt===2?(wt=[0,-a.ab,0],Tt=3):(wt=[0,a.ab,0],Tt=2);const ft=at.regionSegments[Tt];if(!ft)continue;const gt=new Float32Array(16);a.a6.mat4.translate(gt,ke.projMatrix,wt),ze(ke,at,ft,d.translatePosMatrix(gt,Re,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),dt)}}}function Cs(d,i,l,p,_,x,A){p.centroidVertexArray.length===0&&p.createCentroidsBuffer();const O=x?x.findDEMTileFor(l):null;if(!(O&&O.dem||A))return;const k=oe=>new a.P(Math.ceil((oe+a.d2)*a.d3),0),z=oe=>{const me=i.getSource().minzoom,ye=be=>{const xe=i.getTileByID(be);if(xe&&xe.hasData())return xe.getBucket(_)},de=[0,-1,1];for(const be of de){if(oe.overscaledZ+be<me)continue;const xe=ye(oe.calculateScaledKey(oe.overscaledZ+be));if(xe)return xe}},F=[0,0,0],U=(oe,me)=>(F[0]=Math.min(oe.min.y,me.min.y),F[1]=Math.max(oe.max.y,me.max.y),F[2]=a.ab-me.min.x>oe.max.x?me.min.x-a.ab:oe.max.x,F),V=(oe,me)=>(F[0]=Math.min(oe.min.x,me.min.x),F[1]=Math.max(oe.max.x,me.max.x),F[2]=a.ab-me.min.y>oe.max.y?me.min.y-a.ab:oe.max.y,F),q=[(oe,me)=>U(oe,me),(oe,me)=>U(me,oe),(oe,me)=>V(oe,me),(oe,me)=>V(me,oe)],J=(oe,me,ye,de,be,xe,Ce)=>{if(!x)return 0;const Se=[[xe?ye:oe,xe?oe:ye,0],[xe?ye:me,xe?me:ye,0]],Ie=Ce<0?a.ab+Ce:Ce,ze=[xe?Ie:(oe+me)/2,xe?(oe+me)/2:Ie,0];return ye===0&&Ce<0||ye!==0&&Ce>0?x.getForTilePoints(be,[ze],!0,de):Se.push(ze),x.getForTilePoints(l,Se,!0,O),Math.max(Se[0][2],Se[1][2],ze[2])/x.exaggeration()};for(let oe=0;oe<4;oe++){const me=p.borderFeatureIndices[oe];if(me.length===0)continue;const ye=a.c$[oe](l),de=z(ye);if(!(de&&de instanceof a.d0)||p.borderDoneWithNeighborZ[oe]===de.canonical.z)continue;de.centroidVertexArray.length===0&&de.createCentroidsBuffer();const be=x?x.findDEMTileFor(ye):null;if(!(be&&be.dem||A))continue;const xe=(oe<2?1:5)-oe,Ce=de.borderDoneWithNeighborZ[xe]!==p.canonical.z,Se=de.borderFeatureIndices[xe];let Ie=0;if(p.canonical.z!==de.canonical.z){for(const ze of me)p.showCentroid(p.featuresOnBorder[ze]);if(Ce)for(const ze of Se)de.showCentroid(de.featuresOnBorder[ze]);p.borderDoneWithNeighborZ[oe]=de.canonical.z,de.borderDoneWithNeighborZ[xe]=p.canonical.z}for(const ze of me){const ke=p.featuresOnBorder[ze],Re=p.centroidData[ke.centroidDataIndex],Ve=ke.borders[oe];let nt;for(;Ie<Se.length;){nt=de.featuresOnBorder[Se[Ie]];const dt=nt.borders[xe];if(dt[1]>Ve[0]+3||dt[0]>Ve[0]-3)break;de.showCentroid(nt),Ie++}if(nt&&Ie<Se.length){const dt=Ie;let rt=0;for(;!(nt.borders[xe][0]>Ve[1]-3)&&(rt++,++Ie!==Se.length);)nt=de.featuresOnBorder[Se[Ie]];nt=de.featuresOnBorder[Se[dt]];let xt=!1;if(rt>=1){const at=nt.borders[xe];Math.abs(Ve[0]-at[0])<3&&Math.abs(Ve[1]-at[1])<3&&(rt=1,xt=!0,Ie=dt+1)}else if(rt===0){p.showCentroid(ke);continue}const Ge=de.centroidData[nt.centroidDataIndex];A&&xt&&(((ee=Re).flags|(re=Ge).flags)&a.d1?(ee.flags|=a.d1,re.flags|=a.d1):(ee.flags&=~a.d1,re.flags&=~a.d1));const ct=ke.intersectsCount()>1||nt.intersectsCount()>1;if(rt>1)Ie=dt,Re.centroidXY=Ge.centroidXY=new a.P(0,0);else if(be&&be.dem&&!ct){const at=q[oe](Re,Ge),wt=oe%2?a.ab-1:0,Tt=J(at[0],Math.min(a.ab-1,at[1]),wt,be,ye,oe<2,at[2]);Re.centroidXY=Ge.centroidXY=k(Tt)}else ct?Re.centroidXY=Ge.centroidXY=new a.P(0,0):(Re.centroidXY=p.encodeBorderCentroid(ke),Ge.centroidXY=de.encodeBorderCentroid(nt));p.writeCentroidToBuffer(Re),de.writeCentroidToBuffer(Ge)}else p.showCentroid(ke)}p.borderDoneWithNeighborZ[oe]=de.canonical.z,de.borderDoneWithNeighborZ[xe]=p.canonical.z}var ee,re;(p.needsCentroidUpdate||!p.centroidVertexBuffer&&p.centroidVertexArray.length!==0)&&p.uploadCentroid(d)}const uf=[1,0,0],w3=[0,1,0],A3=[0,0,1];function T3(d,i,l){const p=l.transform,_=l.shadowRenderer;if(!_)return!0;const x=d.toUnwrapped(),A=p.tileSize*_._cascades[l.currentShadowCascade].scale;let O=i.maxHeight;if(p.elevation){const ee=p.elevation.getMinMaxForTile(d);ee&&(O+=ee.max)}const k=[..._.shadowDirection];k[2]=-k[2];const z=_.computeSimplifiedTileShadowVolume(x,O,A,k);if(!z)return!1;const F=[uf,w3,A3,k,[k[0],0,k[2]],[0,k[1],k[2]]],U=p.projection.name==="globe",V=p.scaleZoom(A),q=a.bN.fromInvProjectionMatrix(p.invProjMatrix,p.worldSize,V,!U),J=_.getCurrentCascadeFrustum();return q.intersectsPrecise(z.vertices,z.planes,F)===0||J.intersectsPrecise(z.vertices,z.planes,F)===0}function S3(d){return[d[0]*a.d4,d[1]*a.d4,d[2]*a.d4,0]}function co(d,i,l,p,_,x,A,O,k){const z=p.getSource(),F=l.globeSharedBuffers;if(!F)return;let U,V,q;if(i&&(U=p.getTile(i)),z instanceof a.aD?(V=z.texture,q=a.cD(0,0,l.transform)):U&&i&&(V=U.texture,q=a.cD(i.canonical.z,i.canonical.x,l.transform)),!V||!q)return;d||(q=a.a6.mat4.scale(a.a6.mat4.create(),q,[1,-1,1]));const J=l.context,ee=J.gl,re=_.paint.get("raster-resampling")==="nearest"?ee.NEAREST:ee.LINEAR,oe=l.colorModeForDrapableLayerRenderPass(x),me=A.defines;me.push("GLOBE_POLES");const ye=new Jt(ee.LEQUAL,Jt.ReadWrite,l.depthRangeFor3D),de=Float32Array.from(l.transform.expandedFarZProjMatrix),be=Float32Array.from(a.b5(a.cC(new a.bP(0,0,0))));l.terrain&&l.terrain.prepareDrawTile(),J.activeTexture.set(ee.TEXTURE0),V.bind(re,ee.CLAMP_TO_EDGE),J.activeTexture.set(ee.TEXTURE1),V.bind(re,ee.CLAMP_TO_EDGE),V.useMipmap&&J.extTextureFilterAnisotropic&&l.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,J.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,J.extTextureFilterAnisotropicMax);const[xe,Ce,Se,Ie]=i?F.getPoleBuffers(i.canonical.z,!1):F.getPoleBuffers(0,!0),ze=_.paint.get("raster-elevation");let ke;d?(ke=xe,l.renderDefaultNorthPole=ze!==0):(ke=Ce,l.renderDefaultSouthPole=ze!==0);const Re=S3(A.mix),Ve=((dt,rt,xt,Ge,ct,at,wt,Tt,ft,gt,Yt,It,jt)=>Gc(dt,rt,xt,new Float32Array(16),new Float32Array(9),[0,0],Ge,[0,0],[0,0,0,0],1,{opacity:1,mix:0},at,[0,0],Tt,2,gt,Yt,It,1,0,jt))(de,be,q,a.a9(l.transform.zoom),0,_,0,ze,0,Re,A.offset,A.range,x),nt=l.getOrCreateProgram("raster",{defines:me});l.uploadCommonUniforms(J,nt,null),nt.draw(l,ee.TRIANGLES,ye,k,oe,O,Ve,_.id,ke,Se,Ie)}function On(d){const i=d._nearZ,l=d.projection.farthestPixelDistance(d),p=l-i,_=.2*d.height,x=i+_;return[i,l,(x-_-i)/p,(x-i)/p]}function z7(d,i,l,p){if(d)return i instanceof Zl&&d instanceof e7?i.getTextureDescriptor(d,l,!0):{texture:d.texture,mix:S3(p.mix),offset:p.offset,buffer:0,tileSize:1}}var E3=a.d5([{name:"a_index",type:"Int16",components:1}]);class hf{constructor(i,l,p,_){const x={width:p[0],height:p[1],data:null},A=i.gl;this.targetColorTexture=new a.T(i,x,A.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new a.T(i,x,A.RGBA8,{useMipmap:!1}),this.context=i,this.updateParticleTexture(l,_),this.lastInvalidatedAt=0}updateParticleTexture(i,l){if(this.particleTextureDimension===l.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const p=this.context.gl,_=l.width*l.height;this.particleTexture0=new a.T(this.context,l,p.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new a.T(this.context,l,p.RGBA8,{premultiply:!1,useMipmap:!1});const x=new a.d6;x.reserve(_);for(let A=0;A<_;A++)x.emplaceBack(A);this.particleIndexBuffer=this.context.createVertexBuffer(x,E3.members,!0),this.particleSegment=a.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=l.width}update(i){return!(this.lastInvalidatedAt<i&&(this.lastInvalidatedAt=a.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function ff(d,i,l){if(!d)return null;const p=i.getTextureDescriptor(d,l,!0);if(!p)return null;let{texture:_,mix:x,offset:A,tileSize:O,buffer:k,format:z}=p;if(!_||!z)return null;let F=!1;return z==="uint32"&&(F=!0,x[3]=0,x=P7(a.d7,x,[0,l.paint.get("raster-particle-max-speed")]),A=M7(a.d7,A,[0,l.paint.get("raster-particle-max-speed")])),{texture:_,textureOffset:[k/(O+2*k),O/(O+2*k)],tileSize:O,scalarData:F,scale:x,offset:A,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[z]]}}function df(d){const i=d._nearZ,l=d.projection.farthestPixelDistance(d),p=l-i,_=.2*d.height,x=i+_;return[i,l,(x-_-i)/p,(x-i)/p]}const l8=new a.bz(1,0,0,1),x1=new a.bz(0,1,0,1),b1=new a.bz(0,0,1,1),Et=new a.bz(1,0,1,1),Xt=new a.bz(0,1,1,1);function na(d,i,l,p,_,x,A){const O=d.context,k=d.transform,z=O.gl,F=k.projection.name==="globe",U=F?["PROJECTION_GLOBE_VIEW"]:[];let V=a.a6.mat4.clone(l.projMatrix);if(F&&a.a9(k.zoom)>0){const Re=a.b4(l.canonical,k),Ve=a.d8(Re);V=a.a6.mat4.multiply(new Float32Array(16),k.globeMatrix,Ve),a.a6.mat4.multiply(V,k.projMatrix,V)}const q=a.a6.mat4.create();q[12]+=2*_/(a.q.devicePixelRatio*k.width),q[13]+=2*x/(a.q.devicePixelRatio*k.height),a.a6.mat4.multiply(V,q,V);const J=d.getOrCreateProgram("debug",{defines:U}),ee=i.getTileByID(l.key);d.terrain&&d.terrain.setupElevationDraw(ee,J);const re=Jt.disabled,oe=pr.disabled,me=d.colorModeForRenderPass(),ye="$debug";O.activeTexture.set(z.TEXTURE0),d.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),F?ee._makeGlobeTileDebugBuffers(d.context,k):ee._makeDebugTileBoundsBuffers(d.context,k.projection);const de=ee._tileDebugBuffer||d.debugBuffer,be=ee._tileDebugIndexBuffer||d.debugIndexBuffer,xe=ee._tileDebugSegments||d.debugSegments;if(J.draw(d,z.LINE_STRIP,re,oe,me,or.disabled,of(V,p),ye,de,be,xe,null,null,null,[ee._globeTileDebugBorderBuffer]),A){const Re=ee.latestRawTileData,Ve=Math.floor((Re&&Re.byteLength||0)/1024);let nt=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(nt+=` => ${l.overscaledZ}`),nt+=` ${ee.state}`,nt+=` ${Ve}kb`,function(dt,rt){dt.initDebugOverlayCanvas();const xt=dt.debugOverlayCanvas,Ge=dt.context.gl,ct=dt.debugOverlayCanvas.getContext("2d");ct.clearRect(0,0,xt.width,xt.height),ct.shadowColor="white",ct.shadowBlur=2,ct.lineWidth=1.5,ct.strokeStyle="white",ct.textBaseline="top",ct.font="bold 36px Open Sans, sans-serif",ct.fillText(rt,5,5),ct.strokeText(rt,5,5),dt.debugOverlayTexture.update(xt),dt.debugOverlayTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE)}(d,nt)}const Ce=i.getTile(l).tileSize,Se=512/Math.min(Ce,512)*(l.overscaledZ/k.zoom)*.5,Ie=ee._tileDebugTextBuffer||d.debugBuffer,ze=ee._tileDebugTextIndexBuffer||d.quadTriangleIndexBuffer,ke=ee._tileDebugTextSegments||d.debugSegments;J.draw(d,z.TRIANGLES,re,oe,Pr.alphaBlended,or.disabled,of(V,a.bz.transparent,Se),ye,Ie,ze,ke,null,null,null,[ee._globeTileDebugTextBuffer])}function bn(d,i,l,p){Zc(d,0,i+l/2,d.transform.width,l,p)}function He(d,i,l,p){Zc(d,i-l/2,0,l,d.transform.height,p)}function Zc(d,i,l,p,_,x){const A=d.context,O=A.gl;O.enable(O.SCISSOR_TEST),O.scissor(i*a.q.devicePixelRatio,l*a.q.devicePixelRatio,p*a.q.devicePixelRatio,_*a.q.devicePixelRatio),A.clear({color:x}),O.disable(O.SCISSOR_TEST)}const B7=a.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:P3}=B7;function ia(d,i,l,p){d.emplaceBack(i,l,p)}class M3{constructor(i){this.vertexArray=new a.d9,this.indices=new a.aO,ia(this.vertexArray,-1,-1,1),ia(this.vertexArray,1,-1,1),ia(this.vertexArray,-1,1,1),ia(this.vertexArray,1,1,1),ia(this.vertexArray,-1,-1,-1),ia(this.vertexArray,1,-1,-1),ia(this.vertexArray,-1,1,-1),ia(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,P3),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=a.b1.simpleSegment(0,0,36,12)}}function cl(d,i,l,p,_,x){const A=d.context.gl,O=i.paint.get("sky-atmosphere-color"),k=i.paint.get("sky-atmosphere-halo-color"),z=i.paint.get("sky-atmosphere-sun-intensity"),F=((U,V,q,J,ee)=>({u_matrix_3f:U,u_sun_direction:V,u_sun_intensity:q,u_color_tint_r:[J.r,J.g,J.b,J.a],u_color_tint_m:[ee.r,ee.g,ee.b,ee.a],u_luminance:5e-5}))(a.a6.mat3.fromMat4(a.a6.mat3.create(),p),_,z,O,k);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+x,i.skyboxTexture,0),l.draw(d,A.TRIANGLES,Jt.disabled,pr.disabled,Pr.unblended,or.frontCW,F,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const w1=a.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class c8{constructor(i){const l=new a.da;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const p=new a.aO;p.emplaceBack(0,1,2),p.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(l,w1.members),this.indexBuffer=i.createIndexBuffer(p),this.segments=a.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const u8=a.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class pf{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class F7{constructor(i){this.colorModeAlphaBlendedWriteRGB=new Pr([1,bo,1,bo],a.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Pr([1,0,1,0],a.bz.transparent,[!1,!1,!1,!0]),this.params=new pf,this.updateNeeded=!0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),i.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(i){const l=i.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new c8(l);const p=this.params.sizeRange,_=this.params.intensityRange,x=function(F){const U=a.dd(30),V=[];for(let q=0;q<F;++q){const J=2*Math.PI*U(),ee=Math.acos(1-2*U())-.5*Math.PI;V.push(a.a6.vec3.fromValues(Math.cos(ee)*Math.cos(J),Math.cos(ee)*Math.sin(J),Math.sin(ee)))}return V}(this.params.starsCount),A=a.dd(300),O=new a.db,k=new a.aO;let z=0;for(let F=0;F<x.length;++F){const U=a.a6.vec3.scale([],x[F],200),V=Math.max(0,1+.01*p*(1*A()-.5)),q=Math.max(0,1+.01*_*(1*A()-.5));O.emplaceBack(U[0],U[1],U[2],-1,-1,V,q),O.emplaceBack(U[0],U[1],U[2],1,-1,V,q),O.emplaceBack(U[0],U[1],U[2],1,1,V,q),O.emplaceBack(U[0],U[1],U[2],-1,1,V,q),k.emplaceBack(z+0,z+1,z+2),k.emplaceBack(z+0,z+2,z+3),z+=4}this.starsVx=l.createVertexBuffer(O,u8.members),this.starsIdx=l.createIndexBuffer(k),this.starsSegments=a.b1.simpleSegment(0,0,O.length,k.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,l){const p=i.context,_=p.gl,x=i.transform,A=new Jt(_.LEQUAL,Jt.ReadOnly,[0,1]),O=a.a9(x.zoom),k=i.style.getLut(l.scope),z=l.properties.get("color").toRenderColor(k).toArray01(),F=l.properties.get("high-color").toRenderColor(k).toArray01(),U=l.properties.get("space-color").toRenderColor(k).toArray01PremultipliedAlpha(),V=5e-4,q=a.dc(l.properties.get("horizon-blend"),0,1,V,.25),J=a.cx(i,p,x)&&q===V?x.worldSize/(2*Math.PI*1.025)-1:x.globeRadius,ee=i.frameCounter/1e3%1,re=a.a6.vec3.length(x.globeCenterInViewSpace),oe=Math.sqrt(Math.pow(re,2)-Math.pow(J,2)),me=Math.acos(oe/re),ye=de=>{const be=x.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];de&&be.push("ALPHA_PASS");const xe=i.getOrCreateProgram("globeAtmosphere",{defines:be}),Ce=((Ie,ze,ke,Re,Ve,nt,dt,rt,xt,Ge,ct,at)=>({u_frustum_tl:Ie,u_frustum_tr:ze,u_frustum_br:ke,u_frustum_bl:Re,u_horizon:Ve,u_transition:nt,u_fadeout_range:dt,u_color:rt,u_high_color:xt,u_space_color:Ge,u_temporal_offset:ct,u_horizon_angle:at}))(x.frustumCorners.TL,x.frustumCorners.TR,x.frustumCorners.BR,x.frustumCorners.BL,x.frustumCorners.horizon,O,q,z,F,U,ee,me);i.uploadCommonUniforms(p,xe);const Se=this.atmosphereBuffer;Se&&xe.draw(i,_.TRIANGLES,A,pr.disabled,de?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,or.backCW,Ce,de?"atmosphere_glow_alpha":"atmosphere_glow",Se.vertexBuffer,Se.indexBuffer,Se.segments)};ye(!1),ye(!0)}drawStars(i,l){const p=a.ap(l.properties.get("star-intensity"),0,1);if(p===0)return;const _=i.context,x=_.gl,A=i.transform,O=i.getOrCreateProgram("stars"),k=a.a6.quat.identity([]);a.a6.quat.rotateX(k,k,-A._pitch),a.a6.quat.rotateZ(k,k,-A.angle),a.a6.quat.rotateX(k,k,a.bB(A._center.lat)),a.a6.quat.rotateY(k,k,-a.bB(A._center.lng));const z=a.a6.mat4.fromQuat(new Float32Array(16),k),F=a.a6.mat4.multiply([],A.starsProjMatrix,z),U=a.a6.mat3.fromMat4([],z),V=a.a6.mat3.invert([],U),q=[0,1,0];a.a6.vec3.transformMat3(q,q,V),a.a6.vec3.scale(q,q,this.params.sizeMultiplier);const J=[1,0,0];a.a6.vec3.transformMat3(J,J,V),a.a6.vec3.scale(J,J,this.params.sizeMultiplier);const ee=(re=q,oe=J,me=p,{u_matrix:Float32Array.from(F),u_up:re,u_right:oe,u_intensity_multiplier:me});var re,oe,me;i.uploadCommonUniforms(_,O),this.starsVx&&this.starsIdx&&O.draw(i,x.TRIANGLES,Jt.disabled,pr.disabled,this.colorModeAlphaBlendedWriteRGB,or.disabled,ee,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function N7(d,i){const l=[...d],p=i.cameraWorldSizeForFog/i.worldSize,_=a.a6.mat4.identity([]);return a.a6.mat4.scale(_,_,[p,p,1]),a.a6.mat4.multiply(l,_,l),a.a6.mat4.multiply(l,i.worldToFogMatrix,l),l}function j7(d,i,l,p,_){const x=l.material,A=p.context,{baseColorTexture:O,metallicRoughnessTexture:k}=x.pbrMetallicRoughness,{normalTexture:z,occlusionTexture:F,emissionTexture:U}=x;function V(q,J,ee){if(q&&(d.push(J),A.activeTexture.set(A.gl.TEXTURE0+ee),q.gfxTexture)){const{minFilter:re,magFilter:oe,wrapS:me,wrapT:ye}=q.sampler;q.gfxTexture.bindExtraParam(re,oe,me,ye)}}V(O,"HAS_TEXTURE_u_baseColorTexture",Mi.BaseColor),V(k,"HAS_TEXTURE_u_metallicRoughnessTexture",Mi.MetallicRoughness),V(z,"HAS_TEXTURE_u_normalTexture",Mi.Normal),V(F,"HAS_TEXTURE_u_occlusionTexture",Mi.Occlusion),V(U,"HAS_TEXTURE_u_emissionTexture",Mi.Emission),_&&(_.texture||(_.texture=new a.df(p.context,_.image,[_.image.height,_.image.height,_.image.height],A.gl.RGBA8)),A.activeTexture.set(A.gl.TEXTURE0+Mi.LUT),_.texture&&_.texture.bind(A.gl.LINEAR,A.gl.CLAMP_TO_EDGE),d.push("APPLY_LUT_ON_GPU")),l.texcoordBuffer&&(d.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(l.texcoordBuffer)),l.colorBuffer&&(d.push(l.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(l.colorBuffer)),l.normalBuffer&&(d.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(l.normalBuffer)),l.pbrBuffer&&(d.push("HAS_ATTRIBUTE_a_pbr"),d.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(l.pbrBuffer)),x.alphaMode!=="OPAQUE"&&x.alphaMode!=="MASK"||d.push("UNPREMULT_TEXTURE_IN_SHADER"),x.defined||d.push("DIFFUSE_SHADED"),d.push("USE_STANDARD_DERIVATIVES")}function Xc(d,i,l,p,_,x){const A=l.paint.get("model-opacity"),O=i.context,k=new Jt(i.context.gl.LEQUAL,Jt.ReadWrite,i.depthRangeFor3D),z=i.transform,F=d.mesh,U=F.material,V=U.pbrMetallicRoughness,q=i.style.fog;let J;J=i.transform.projection.zAxisUnit==="pixels"?[...d.nodeModelMatrix]:a.a6.mat4.multiply([],p.zScaleMatrix,d.nodeModelMatrix),a.a6.mat4.multiply(J,p.negCameraPosMatrix,J);const ee=a.a6.mat4.invert([],J);a.a6.mat4.transpose(ee,ee);const re=l.paint.get("model-emissive-strength").constantOr(0),oe=Ut(new Float32Array(d.worldViewProjection),new Float32Array(J),new Float32Array(ee),null,i,A,V.baseColorFactor.toRenderColor(null),U.emissiveFactor,V.metallicFactor,V.roughnessFactor,U,re,l),me={defines:[]},ye=[];j7(me.defines,ye,F,i,l.lut);const de=i.shadowRenderer;de&&(de.useNormalOffset=!1);let be=null;if(q){const Se=N7(d.nodeModelMatrix,i.transform);if(be=new Float32Array(Se),z.projection.name!=="globe"){const Ie=F.aabb.min,ze=F.aabb.max,[ke,Re]=q.getOpacityForBounds(Se,Ie[0],Ie[1],ze[0],ze[1]);me.overrideFog=ke>=Bt||Re>=Bt}}const xe=Ja(i,l.paint.get("model-cutoff-fade-range"));xe.shouldRenderCutoff&&me.defines.push("RENDER_CUTOFF");const Ce=i.getOrCreateProgram("model",me);i.uploadCommonUniforms(O,Ce,null,be,xe),i.renderPass!=="shadow"&&de&&de.setupShadowsFromMatrix(d.nodeModelMatrix,Ce),Ce.draw(i,O.gl.TRIANGLES,k,_,x,F.material.doubleSided?or.disabled:or.backCCW,oe,l.id,F.vertexBuffer,F.indexBuffer,F.segments,l.paint,i.transform.zoom,void 0,ye)}function Yc(d,i,l,p,_,x,A){let O;O=d.projection.name==="globe"?a.dg(l,d):[...l],a.a6.mat4.multiply(O,O,i.matrix);const k=a.a6.mat4.multiply([],p,O);if(i.meshes)for(const z of i.meshes){if(z.material.alphaMode!=="BLEND"){A.push({mesh:z,depth:0,modelIndex:_,worldViewProjection:k,nodeModelMatrix:O});continue}const F=a.a6.vec3.transformMat4([],z.centroid,k);F[2]>0&&x.push({mesh:z,depth:F[2],modelIndex:_,worldViewProjection:k,nodeModelMatrix:O})}if(i.children)for(const z of i.children)Yc(d,z,l,p,_,x,A)}function A1(d,i,l,p){const _=l.shadowRenderer;if(!_)return;const x=_.getShadowPassDepthMode(),A=_.getShadowPassColorMode(),O=_.calculateShadowPassMatrixFromMatrix(i),k=x3(O);l.getOrCreateProgram("modelDepth",{defines:l._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(l,l.context.gl.TRIANGLES,x,pr.disabled,A,or.backCCW,k,p.id,d.vertexBuffer,d.indexBuffer,d.segments,p.paint,l.transform.zoom,void 0,void 0)}function mf(d,i,l){const p=i.updateZoomBasedPaintProperties(),_=function(x,A,O){let k,z,F,U=x.terrain?x.terrain.exaggeration():0;if(x.terrain&&U>0){const V=x.terrain,q=V.findDEMTileFor(O);q&&q.dem?k=a.di.create(V,O,q):U=0}if(U===0&&(A.terrainElevationMin=0,A.terrainElevationMax=0),U===A.validForExaggeration&&(U===0||k&&k._demTile&&k._demTile.tileID===A.validForDEMTile.id&&k._dem._timestamp===A.validForDEMTile.timestamp))return!1;for(const V in A.instancesPerModel){const q=A.instancesPerModel[V];for(let J=0;J<q.instancedDataArray.length;++J){const ee=(k?U*k.getElevationAt(0|q.instancedDataArray.float32[16*J],0|q.instancedDataArray.float32[16*J+1],!0,!0):0)+q.instancesEvaluatedElevation[J];q.instancedDataArray.float32[16*J+6]=ee,z=z?Math.min(A.terrainElevationMin,ee):ee,F=F?Math.max(A.terrainElevationMax,ee):ee}}return A.terrainElevationMin=z||0,A.terrainElevationMax=F||0,A.validForExaggeration=U,A.validForDEMTile=k&&k._demTile?{id:k._demTile.tileID,timestamp:k._dem._timestamp}:{id:void 0,timestamp:0},!0}(d,i,l);(p||_)&&(i.uploaded=!1,i.upload(d.context))}const oa={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.c9([0,0,0],[a.ab,a.ab,0])};function h8(d,i){const l=1<<d.canonical.z,p=i.getFreeCameraOptions().position,_=i.elevation,x=d.canonical.x/l,A=(d.canonical.x+1)/l,O=d.canonical.y/l,k=(d.canonical.y+1)/l;let z=i._centerAltitude;if(_){const q=_.getMinMaxForTile(d);q&&q.max>z&&(z=q.max)}const F=a.ap(p.x,x,A)-p.x,U=a.ap(p.y,O,k)-p.y,V=a.bD(z,i.center.lat)-p.z;return i._zoomFromMercatorZ(Math.sqrt(F*F+U*U+V*V))}function Ni(d,i,l,p,_,x,A){const O=d.context,k=d.renderPass==="shadow",z=d.shadowRenderer,F=k&&z?z.getShadowPassDepthMode():new Jt(O.gl.LEQUAL,Jt.ReadWrite,d.depthRangeFor3D),U=d.isTileAffectedByFog(x);if(l.meshes)for(const V of l.meshes){const q=["MODEL_POSITION_ON_GPU"],J=[];let ee,re,oe;p.instancedDataArray.length>20&&q.push("INSTANCED_ARRAYS");const me=Ja(d,i.paint.get("model-cutoff-fade-range"));if(me.shouldRenderCutoff&&q.push("RENDER_CUTOFF"),k&&z)ee=d.getOrCreateProgram("modelDepth",{defines:q}),re=x3(A.shadowTileMatrix,A.shadowTileMatrix,Float32Array.from(l.matrix)),oe=z.getShadowPassColorMode();else{j7(q,J,V,d,i.lut),ee=d.getOrCreateProgram("model",{defines:q,overrideFog:U});const de=V.material,be=de.pbrMetallicRoughness,xe=i.paint.get("model-opacity"),Ce=i.paint.get("model-emissive-strength").constantOr(0);re=Ut(x.expandedProjMatrix,Float32Array.from(l.matrix),new Float32Array(16),null,d,xe,be.baseColorFactor.toRenderColor(null),de.emissiveFactor,be.metallicFactor,be.roughnessFactor,de,Ce,i,_),z&&(A.shadowUniformsInitialized?ee.setShadowUniformValues(O,z.getShadowUniformValues()):(z.setupShadows(x.toUnwrapped(),ee,"model-tile",x.overscaledZ),A.shadowUniformsInitialized=!0)),oe=me.shouldRenderCutoff||xe<1||de.alphaMode!=="OPAQUE"?Pr.alphaBlended:Pr.unblended}d.uploadCommonUniforms(O,ee,x.toUnwrapped(),null,me);const ye=V.material.doubleSided?or.disabled:or.backCCW;if(p.instancedDataArray.length>20)J.push(p.instancedDataBuffer),ee.draw(d,O.gl.TRIANGLES,F,pr.disabled,oe,ye,re,i.id,V.vertexBuffer,V.indexBuffer,V.segments,i.paint,d.transform.zoom,void 0,J,p.instancedDataArray.length);else{const de=k?"u_instance":"u_normal_matrix";for(let be=0;be<p.instancedDataArray.length;++be)re[de]=new Float32Array(p.instancedDataArray.arrayBuffer,64*be,16),ee.draw(d,O.gl.TRIANGLES,F,pr.disabled,oe,ye,re,i.id,V.vertexBuffer,V.indexBuffer,V.segments,i.paint,d.transform.zoom,void 0,J)}}if(l.children)for(const V of l.children)Ni(d,i,V,p,_,x,A)}const f8=[1,-1,1];function Kc(d,i,l,p){if(!l.modelManager)return!0;const _=l.modelManager;if(!l.shadowRenderer)return!0;const x=l.shadowRenderer,A=i.aabb;let O=!0,k=d.maxHeight;if(k===0){let F=0;for(const U in d.instancesPerModel){const V=_.getModel(U,p);V?F=Math.max(F,Math.max(Math.max(V.aabb.max[0],V.aabb.max[1]),V.aabb.max[2])):O=!1}k=d.maxScale*F*1.41+d.maxVerticalOffset,O&&(d.maxHeight=k)}A.max[2]=k,A.min[2]+=d.terrainElevationMin,A.max[2]+=d.terrainElevationMax,a.a6.vec3.transformMat4(A.min,A.min,i.tileMatrix),a.a6.vec3.transformMat4(A.max,A.max,i.tileMatrix);const z=A.intersects(x.getCurrentCascadeFrustum());return l.currentShadowCascade===0&&(d.isInsideFirstShadowMapFrustum=z===2),z===0}function yn(d,i){const l=d.uniformValues.u_cutoff_params[0],p=d.uniformValues.u_cutoff_params[1],_=d.uniformValues.u_cutoff_params[2],x=d.uniformValues.u_cutoff_params[3];return p===l||x===_?1:a.ap(((i-l)/(p-l)-_)/(x-_),0,1)}function Nr(d,i,l,p){if(i.pitch<20)return 1;const _=i.getWorldToCameraMatrix();a.a6.mat4.multiply(_,_,d);const x=a.a6.vec4.fromValues(l.min[0],l.min[1],l.min[2],1);let A=a.a6.vec4.transformMat4(a.a6.vec4.create(),x,_),O=A,k=A;x[1]=l.max[1],A=a.a6.vec4.transformMat4(a.a6.vec4.create(),x,_),O=A[1]<O[1]?A:O,k=A[1]>k[1]?A:k,x[0]=l.max[0],A=a.a6.vec4.transformMat4(a.a6.vec4.create(),x,_),O=A[1]<O[1]?A:O,k=A[1]>k[1]?A:k,x[1]=l.min[1],A=a.a6.vec4.transformMat4(a.a6.vec4.create(),x,_),O=A[1]<O[1]?A:O,k=A[1]>k[1]?A:k;const z=a.ap(p[0],0,1),F=100*i.pixelsPerMeter*a.ap(p[1],0,1),U=a.ap(p[2],0,1),V=a.a6.vec4.lerp(a.a6.vec4.create(),O,k,z),q=Math.tan(.5*i.fovX),J=-V[2]*q;if(F===0)return V[1]<-Math.abs(J)?U:1;const ee=(-Math.abs(J)-V[1])/F,re=(me,ye,de)=>(1-de)*me+de*ye,oe=a.ap(re(1,U,ee),U,1);return re(1,oe,a.ap((i.pitch-20)/20,0,1))}class gf{}class Is{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,l,p){{const U=this._storage.get(l.id);if(U)return U.lastUsedFrameIdx=i,U.buf}const _=p.gl,x=_.getBufferParameter(_.ELEMENT_ARRAY_BUFFER,_.BUFFER_SIZE),A=new ArrayBuffer(x),O=new Int16Array(A);_.getBufferSubData(_.ELEMENT_ARRAY_BUFFER,0,new Int16Array(A));const k=new a.dk;for(let U=0;U<x/2;U+=3){const V=O[U],q=O[U+1],J=O[U+2];k.emplaceBack(V,q),k.emplaceBack(q,J),k.emplaceBack(J,V)}const z=p.bindVertexArrayOES.current,F=new gf;return F.buf=new lo(p,k),F.lastUsedFrameIdx=i,this._storage.set(l.id,F),p.bindVertexArrayOES.set(z),F.buf}update(i){for(const[l,p]of this._storage)i-p.lastUsedFrameIdx>30&&(p.buf.destroy(),this._storage.delete(l))}destroy(){for(const[i,l]of this._storage)l.buf.destroy(),this._storage.delete(i)}}class $7{constructor(i){this.occluderSize=30,this.depthOffset=-1e-4,i.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),i.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Os={symbol:function(d,i,l,p,_){if(d.renderPass!=="translucent")return;const x=pr.disabled,A=d.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(z,F,U,V,q,J,ee){const re=F.transform,oe=q==="map",me=J==="map";for(const ye of z){const de=V.getTile(ye),be=de.getBucket(U);if(!be||!be.text||!be.text.segments.get().length)continue;const xe=a.bj(be.textSizeData,re.zoom),Ce=Ts(ye,be.getProjection(),re),Se=re.calculatePixelsToTileUnitsMatrix(de),Ie=Ir(Ce,de.tileID.canonical,me,oe,re,be.getProjection(),Se),ze=be.hasIconTextFit()&&be.hasIconData();if(xe){const ke=Math.pow(2,re.zoom-de.tileID.overscaledZ);s8(be,oe,me,ee,a.cS,re,Ie,ye,ke,xe,ze)}}}(p,d,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),_);const O=l.paint.get("icon-opacity").constantOr(1)!==0,k=l.paint.get("text-opacity").constantOr(1)!==0;l.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(O||k)?Wc(d,i,l,p,x,A):(O&&Wc(d,i,l,p,x,A,{onlyIcons:!0}),k&&Wc(d,i,l,p,x,A,{onlyText:!0})),i.map.showCollisionBoxes&&(k7(d,i,l,p,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),k7(d,i,l,p,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(d,i,l,p){if(d.renderPass!=="translucent")return;const _=l.paint.get("circle-opacity"),x=l.paint.get("circle-stroke-width"),A=l.paint.get("circle-stroke-opacity"),O=l.layout.get("circle-sort-key").constantOr(1)!==void 0,k=l.paint.get("circle-emissive-strength");if(_.constantOr(1)===0&&(x.constantOr(1)===0||A.constantOr(1)===0))return;const z=d.context,F=z.gl,U=d.transform,V=d.depthModeForSublayer(0,Jt.ReadOnly),q=pr.disabled,J=d.colorModeForDrapableLayerRenderPass(k),ee=U.projection.name==="globe",re=[a.am(U.center.lng),a.at(U.center.lat)],oe=[];for(let ye=0;ye<p.length;ye++){const de=p[ye],be=i.getTile(de),xe=be.getBucket(l);if(!xe||xe.projection.name!==U.projection.name)continue;const Ce=xe.programConfigurations.get(l.id),Se=a.cT(l),Ie=d.isTileAffectedByFog(de);ee&&Se.push("PROJECTION_GLOBE_VIEW"),Se.push("DEPTH_D24"),d.terrain&&U.depthOcclusionForSymbolsAndCircles&&Se.push("DEPTH_OCCLUSION");const ze=d.getOrCreateProgram("circle",{config:Ce,defines:Se,overrideFog:Ie}),ke=xe.layoutVertexBuffer,Re=xe.globeExtVertexBuffer,Ve=xe.indexBuffer,nt=U.projection.createInversionMatrix(U,de.canonical),dt={programConfiguration:Ce,program:ze,layoutVertexBuffer:ke,globeExtVertexBuffer:Re,indexBuffer:Ve,uniformValues:a.cU(d,de,be,nt,re,l),tile:be};if(O){const rt=xe.segments.get();for(const xt of rt)oe.push({segments:new a.b1([xt]),sortKey:xt.sortKey,state:dt})}else oe.push({segments:xe.segments,sortKey:0,state:dt})}O&&oe.sort((ye,de)=>ye.sortKey-de.sortKey);const me={useDepthForOcclusion:U.depthOcclusionForSymbolsAndCircles};for(const ye of oe){const{programConfiguration:de,program:be,layoutVertexBuffer:xe,globeExtVertexBuffer:Ce,indexBuffer:Se,uniformValues:Ie,tile:ze}=ye.state,ke=ye.segments;d.terrain&&d.terrain.setupElevationDraw(ze,be,me),d.uploadCommonUniforms(z,be,ze.tileID.toUnwrapped()),be.draw(d,F.TRIANGLES,V,q,J,or.disabled,Ie,l.id,xe,Se,ke,l.paint,U.zoom,de,[Ce])}},heatmap:function(d,i,l,p){if(l.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){const _=d.context,x=_.gl,A=pr.disabled,O=new Pr([x.ONE,x.ONE,x.ONE,x.ONE],a.bz.transparent,[!0,!0,!0,!0]);(function(q,J,ee,re){const oe=q.gl,me=J.width*re,ye=J.height*re;q.activeTexture.set(oe.TEXTURE1),q.viewport.set([0,0,me,ye]);let de=ee.heatmapFbo;if(!de||de&&(de.width!==me||de.height!==ye)){de&&de.destroy();const be=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,be),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),de=ee.heatmapFbo=q.createFramebuffer(me,ye,!0,null),function(xe,Ce,Se,Ie,ze,ke){const Re=xe.gl;Re.texImage2D(Re.TEXTURE_2D,0,xe.extRenderToTextureHalfFloat?Re.RGBA16F:Re.RGBA,ze,ke,0,Re.RGBA,xe.extRenderToTextureHalfFloat?Re.HALF_FLOAT:Re.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Se)}(q,0,be,de,me,ye)}else oe.bindTexture(oe.TEXTURE_2D,de.colorAttachment.get()),q.bindFramebuffer.set(de.framebuffer)})(_,d,l,d.transform.projection.name==="globe"?.5:.25),_.clear({color:a.bz.transparent});const k=d.transform,z=k.projection.name==="globe",F=z?["PROJECTION_GLOBE_VIEW"]:[],U=z?or.frontCCW:or.disabled,V=[a.am(k.center.lng),a.at(k.center.lat)];for(let q=0;q<p.length;q++){const J=p[q];if(i.hasRenderableParent(J))continue;const ee=i.getTile(J),re=ee.getBucket(l);if(!re||re.projection.name!==k.projection.name)continue;const oe=d.isTileAffectedByFog(J),me=re.programConfigurations.get(l.id),ye=d.getOrCreateProgram("heatmap",{config:me,defines:F,overrideFog:oe}),{zoom:de}=d.transform;d.terrain&&d.terrain.setupElevationDraw(ee,ye),d.uploadCommonUniforms(_,ye,J.toUnwrapped());const be=k.projection.createInversionMatrix(k,J.canonical);ye.draw(d,x.TRIANGLES,Jt.disabled,A,O,U,i8(d,J,ee,be,V,de,l.paint.get("heatmap-intensity")),l.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,l.paint,d.transform.zoom,me,z?[re.globeExtVertexBuffer]:null)}_.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(_,x){const A=_.context,O=A.gl,k=x.heatmapFbo;if(!k)return;A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,k.colorAttachment.get()),A.activeTexture.set(O.TEXTURE1);let z=x.colorRampTexture;z||(z=x.colorRampTexture=new a.T(A,x.colorRamp,O.RGBA8)),z.bind(O.LINEAR,O.CLAMP_TO_EDGE),_.getOrCreateProgram("heatmapTexture").draw(_,O.TRIANGLES,Jt.disabled,pr.disabled,_.colorModeForRenderPass(),or.disabled,((F,U,V,q)=>({u_image:0,u_color_ramp:1,u_opacity:U.paint.get("heatmap-opacity")}))(0,x),x.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,x.paint,_.transform.zoom)}(d,l))},line:function(d,i,l,p){if(d.renderPass!=="translucent")return;const _=l.paint.get("line-opacity"),x=l.paint.get("line-width");if(_.constantOr(1)===0||x.constantOr(1)===0)return;const A=l.paint.get("line-emissive-strength"),O=l.paint.get("line-occlusion-opacity"),k=d.context,z=k.gl,F=l.layout.get("line-z-offset"),U=!F.isConstant()||!!F.constantOr(0),V=U?new Jt(d.depthOcclusion?z.GREATER:z.LEQUAL,Jt.ReadOnly,d.depthRangeFor3D):d.depthModeForSublayer(0,Jt.ReadOnly),q=d.colorModeForDrapableLayerRenderPass(A),J=d.terrain&&d.terrain.renderingToTexture,ee=J?1:a.q.devicePixelRatio,re=l.paint.get("line-dasharray"),oe=re.constantOr(1),me=l.layout.get("line-cap"),ye=re.constantOr(null),de=me.constantOr(null),be=l.paint.get("line-pattern"),xe=be.constantOr(1),Ce=be.constantOr(null),Se=l.paint.get("line-opacity").constantOr(1);let Ie=!xe&&Se!==1||d.depthOcclusion&&O>0&&O<1;const ze=l.paint.get("line-gradient"),ke=xe?"linePattern":"line",Re=a.cV(l);let Ve;if(J&&d.terrain&&d.terrain.clipOrMaskOverlapStencilType()&&(Ie=!1),O!==0&&d.depthOcclusion){const dt=l.paint._values["line-opacity"];dt&&dt.value&&dt.value.kind==="constant"?Ve=dt.value:a.w(`Occlusion opacity for layer ${l.id} is supported only when line-opacity isn't data-driven.`)}if(U&&(d.forceTerrainMode=!0),!U&&O!==0&&d.terrain&&!J)return void a.w(`Occlusion opacity for layer ${l.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const nt=Ie&&U?d.stencilModeFor3D():pr.disabled;for(const dt of p){const rt=i.getTile(dt);if(xe&&!rt.patternsLoaded())continue;const xt=rt.getBucket(l);if(!xt)continue;d.prepareDrawTile();const Ge=xt.programConfigurations.get(l.id),ct=d.isTileAffectedByFog(dt),at=d.getOrCreateProgram(ke,{config:Ge,defines:U?[...Re,"ELEVATED"]:Re,overrideFog:ct});if(Ce&&rt.imageAtlas){const It=rt.imageAtlas.patternPositions[Ce.toString()];It&&Ge.setConstantPatternPositions(It)}if(!xe&&ye&&de&&rt.lineAtlas){const It=rt.lineAtlas.getDash(ye,de);It&&Ge.setConstantPatternPositions(It)}let[wt,Tt]=l.paint.get("line-trim-offset");(de==="round"||de==="square")&&wt!==Tt&&(wt===0&&(wt-=1),Tt===1&&(Tt+=1));const ft=J?dt.projMatrix:null,gt=xe?a.cW(d,rt,l,ft,ee,[wt,Tt]):a.cX(d,rt,l,ft,xt.lineClipsArray.length,ee,[wt,Tt]);if(ze){const It=xt.gradients[l.id];let jt=It.texture;if(l.gradientVersion!==It.version){let ir=256;if(l.stepInterpolant){const Wt=i.getSource().maxzoom,tr=dt.canonical.z===Wt?Math.ceil(1<<d.transform.maxZoom-dt.canonical.z):1;ir=a.ap(a.cY(xt.maxLineLength/a.ab*1024*tr),256,k.maxTextureSize)}It.gradient=a.cZ({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:ir,image:It.gradient||void 0,clips:xt.lineClipsArray}),It.texture?It.texture.update(It.gradient):It.texture=new a.T(k,It.gradient,z.RGBA8),It.version=l.gradientVersion,jt=It.texture}k.activeTexture.set(z.TEXTURE1),jt.bind(l.stepInterpolant?z.NEAREST:z.LINEAR,z.CLAMP_TO_EDGE)}oe&&(k.activeTexture.set(z.TEXTURE0),rt.lineAtlasTexture&&rt.lineAtlasTexture.bind(z.LINEAR,z.REPEAT),Ge.updatePaintBuffers()),xe&&(k.activeTexture.set(z.TEXTURE0),rt.imageAtlasTexture&&rt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ge.updatePaintBuffers()),U&&d.terrain.setupElevationDraw(rt,at),d.uploadCommonUniforms(k,at,dt.toUnwrapped());const Yt=It=>{Ve!=null&&(Ve.value=Se*O),at.draw(d,z.TRIANGLES,V,It,q,or.disabled,gt,l.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,l.paint,d.transform.zoom,Ge,[xt.layoutVertexBuffer2,xt.patternVertexBuffer,xt.zOffsetVertexBuffer]),Ve!=null&&(Ve.value=Se)};if(Ie&&!U){const It=d.stencilModeForClipping(dt).ref;It===0&&J&&k.clear({stencil:0});const jt={func:z.EQUAL,mask:255};gt.u_alpha_discard_threshold=.8,Yt(new pr(jt,It,255,z.KEEP,z.KEEP,z.INVERT)),gt.u_alpha_discard_threshold=0,Yt(new pr(jt,It,255,z.KEEP,z.KEEP,z.KEEP))}else Ie&&U&&(gt.u_alpha_discard_threshold=.001),Yt(U?nt:d.stencilModeForClipping(dt))}Ie&&(d.resetStencilClippingMasks(),J&&k.clear({stencil:0})),O===0||d.depthOcclusion||J||d.layersWithOcclusionOpacity.push(d.currentLayer),U&&(d.forceTerrainMode=!1)},fill:function(d,i,l,p){const _=l.paint.get("fill-color"),x=l.paint.get("fill-opacity"),A=l.is3D(),O=new Jt(d.context.gl.LEQUAL,Jt.ReadWrite,d.depthRangeFor3D);if(x.constantOr(1)===0)return;const k=l.paint.get("fill-emissive-strength"),z=d.colorModeForDrapableLayerRenderPass(k),F=l.paint.get("fill-pattern"),U=d.opaquePassEnabledForLayer()&&!F.constantOr(1)&&_.constantOr(a.bz.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===U){const V=A?O:d.depthModeForSublayer(1,d.renderPass==="opaque"?Jt.ReadWrite:Jt.ReadOnly);L7(d,i,l,p,V,z,!1)}if(!A&&d.renderPass==="translucent"&&l.paint.get("fill-antialias")){const V=A?O:d.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,Jt.ReadOnly);L7(d,i,l,p,V,z,!0)}},"fill-extrusion":function(d,i,l,p){const _=l.paint.get("fill-extrusion-opacity"),x=d.context,A=x.gl,O=d.terrain,k=O&&O.renderingToTexture;if(_===0)return;const z=d.conflationActive&&d.style.isLayerClipped(l,i.getSource()),F=d.style.order.indexOf(l.fqid);if(z&&function(U,V,q,J,ee){for(const re of J){const oe=V.getTile(re).getBucket(q);oe&&(oe.updateReplacement(re,U.replacementSource,ee),oe.uploadCentroid(U.context))}}(d,i,l,p,F),O||z)for(const U of p){const V=i.getTile(U).getBucket(l);V&&Cs(d.context,i,U,V,l,O,z)}if(d.renderPass==="shadow"&&d.shadowRenderer){const U=d.shadowRenderer;if(O&&_<.65&&l._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.a4)return;const V=U.getShadowPassDepthMode(),q=U.getShadowPassColorMode();v1(d,i,l,p,V,pr.disabled,q,z)}else if(d.renderPass==="translucent"){const U=!l.paint.get("fill-extrusion-pattern").constantOr(1),V=l.paint.get("fill-extrusion-color").constantOr(a.bz.white);if(!k&&V.a!==0){const q=new Jt(d.context.gl.LEQUAL,Jt.ReadWrite,d.depthRangeFor3D);_===1&&U?v1(d,i,l,p,q,pr.disabled,Pr.unblended,z):(v1(d,i,l,p,q,pr.disabled,Pr.disabled,z),v1(d,i,l,p,q,d.stencilModeFor3D(),d.colorModeForRenderPass(),z),d.resetStencilClippingMasks())}if(d.style.enable3dLights()&&U&&(!O&&d.transform.projection.name!=="globe"||k)){const q=l.paint.get("fill-extrusion-opacity"),J=l.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee=l.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),re=l.paint.get("fill-extrusion-flood-light-intensity"),oe=l.paint.get("fill-extrusion-flood-light-color").toRenderColor(l.lut).toArray01().slice(0,3),me=J>0&&ee>0,ye=re>0,de=(xe,Ce,Se)=>(1-Se)*xe+Se*Ce,be=xe=>{const Ce=d.depthModeForSublayer(1,Jt.ReadOnly,A.LEQUAL,!0),Se=l.paint.get(xe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ie=de(.1,3,Se),ze=d._showOverdrawInspector;if(!ze){const ke=new pr({func:A.ALWAYS,mask:255},255,255,A.KEEP,A.KEEP,A.REPLACE),Re=new Pr([A.ONE,A.ONE,A.ONE,A.ONE],a.bz.transparent,[!1,!1,!1,!0],A.MIN);vi(d,i,l,p,Ce,ke,Re,or.disabled,xe,"sdf",q,J,ee,re,oe,Ie,z,!1)}{const ke=ze?pr.disabled:new pr({func:A.EQUAL,mask:255},255,255,A.KEEP,A.DECR,A.DECR),Re=ze?d.colorModeForRenderPass():new Pr([A.ONE_MINUS_DST_ALPHA,A.DST_ALPHA,A.ONE,A.ONE],a.bz.transparent,[!0,!0,!0,!0]);vi(d,i,l,p,Ce,ke,Re,or.disabled,xe,"color",q,J,ee,re,oe,Ie,z,!1)}};if(k){const xe=(Ce,Se,Ie)=>{const ze=d.depthModeForSublayer(1,Jt.ReadOnly,A.LEQUAL,!1),ke=l.paint.get(Ce?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Re=de(.1,3,ke);{const Ve=new Pr([A.ONE,A.ONE,A.ONE,A.ONE],a.bz.transparent,[!1,!1,!1,!0]);vi(d,i,l,p,ze,pr.disabled,Ve,or.disabled,Ce,"clear",q,J,ee,re,oe,Re,z,Se)}{const Ve=new pr({func:A.ALWAYS,mask:255},255,255,A.KEEP,A.KEEP,A.REPLACE),nt=new Pr([A.ONE,A.ONE,A.ONE,A.ONE],a.bz.transparent,[!1,!1,!1,!0],A.MIN);vi(d,i,l,p,ze,Ve,nt,or.disabled,Ce,"sdf",q,J,ee,re,oe,Re,z,Se)}{const Ve=Ce?A.ZERO:A.ONE_MINUS_DST_ALPHA,nt=new pr({func:A.EQUAL,mask:255},255,255,A.KEEP,A.DECR,A.DECR),dt=new Pr([Ve,A.DST_ALPHA,A.ONE_MINUS_DST_ALPHA,A.ZERO],a.bz.transparent,[!0,!0,!0,!0]);vi(d,i,l,p,ze,nt,dt,or.disabled,Ce,"color",q,J,ee,re,oe,Re,z,Se)}{const Ve=new Pr([A.ONE,A.ONE,A.ONE,Ce?A.ZERO:A.ONE],a.bz.transparent,[!1,!1,!1,!0],Ce?A.FUNC_ADD:A.MAX);vi(d,i,l,p,ze,pr.disabled,Ve,or.disabled,Ce,"clear",q,J,ee,re,oe,Re,z,Se,Ie)}};if(me||ye){let Ce;if(d.prepareDrawTile(),O){const Se=O.drapeBufferSize[0],Ie=O.drapeBufferSize[1];Ce=O.framebufferCopyTexture,Ce&&(!Ce||Ce.size[0]===Se&&Ce.size[1]===Ie)||(Ce&&Ce.destroy(),Ce=O.framebufferCopyTexture=new a.T(x,new a.r({width:Se,height:Ie}),A.RGBA8)),Ce.bind(A.LINEAR,A.CLAMP_TO_EDGE),A.copyTexImage2D(A.TEXTURE_2D,0,A.RGBA,0,0,Se,Ie,0)}me&&xe(!0,!1,Ce),ye&&xe(!1,!0,Ce)}}else me&&be(!0),ye&&be(!1),(me||ye)&&d.resetStencilClippingMasks()}}},hillshade:function(d,i,l,p){if(d.renderPass!=="offscreen"&&d.renderPass!=="translucent"||d.style.disableElevatedTerrain)return;const _=d.context,x=d.terrain&&d.terrain.renderingToTexture,[A,O]=d.renderPass!=="translucent"||x?[{},p]:d.stencilConfigForOverlap(p);for(const k of O){const z=i.getTile(k);if(z.needsHillshadePrepare&&d.renderPass==="offscreen")Bc(d,z,l);else if(d.renderPass==="translucent"){const F=d.depthModeForSublayer(0,Jt.ReadOnly),U=l.paint.get("hillshade-emissive-strength"),V=d.colorModeForDrapableLayerRenderPass(U),q=x&&d.terrain?d.terrain.stencilModeForRTTOverlap(k):A[k.overscaledZ];y7(d,k,z,l,F,q,V)}}_.viewport.set([0,0,d.width,d.height]),d.resetStencilClippingMasks()},raster:function(d,i,l,p,_,x){if(d.renderPass!=="translucent"||l.paint.get("raster-opacity")===0)return;const A=d.transform.projection.name==="globe",O=l.paint.get("raster-elevation")!==0,k=O&&A;if(d.renderElevatedRasterBackface&&!k)return;const z=d.context,F=z.gl,U=i.getSource(),V=function(xe,Ce,Se,Ie){const ze=Ce.paint.get("raster-color"),ke=xe.type==="raster-array",Re=[],Ve=Ce.paint.get("raster-resampling"),nt=Ce.paint.get("raster-color-mix");let dt=Ce.paint.get("raster-color-range");const rt=[nt[0],nt[1],nt[2],0],xt=nt[3];let Ge=Ve==="nearest"?Ie.NEAREST:Ie.LINEAR;if(ke&&(Re.push("RASTER_ARRAY"),ze||Re.push("RASTER_COLOR"),Ve==="linear"&&Re.push("RASTER_ARRAY_LINEAR"),Ge=Ie.NEAREST,!dt&&xe.rasterLayers)){const ct=xe.rasterLayers.find(({id:at})=>at===Ce.sourceLayer);ct&&ct.fields&&ct.fields.range&&(dt=ct.fields.range)}if(dt=dt||[0,1],ze){Re.push("RASTER_COLOR"),Se.activeTexture.set(Ie.TEXTURE2),Ce.updateColorRamp(dt);let ct=Ce.colorRampTexture;ct||(ct=Ce.colorRampTexture=new a.T(Se,Ce.colorRamp,Ie.RGBA8)),ct.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE)}return{mix:rt,range:dt,offset:xt,defines:Re,resampling:Ge}}(U,l,z,F);if(U instanceof a.aD&&!p.length&&!A)return;const q=l.paint.get("raster-emissive-strength"),J=d.colorModeForDrapableLayerRenderPass(q),ee=d.terrain&&d.terrain.renderingToTexture,re=!d.options.moving,oe=l.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;if(U instanceof a.aD&&!p.length&&(U.onNorthPole||U.onSouthPole)){const xe=O?d.stencilModeFor3D():pr.disabled;return void co(!!U.onNorthPole,null,d,i,l,q,V,or.disabled,xe)}if(!p.length)return;const[me,ye]=U instanceof a.aD||ee?[{},p]:d.stencilConfigForOverlap(p),de=ye[ye.length-1].overscaledZ;k&&V.defines.push("PROJECTION_GLOBE_VIEW"),O&&V.defines.push("RENDER_CUTOFF");const be=(xe,Ce,Se)=>{for(const Ie of xe){const ze=Ie.toUnwrapped(),ke=i.getTile(Ie);if(ee&&(!ke||!ke.hasData()))continue;z.activeTexture.set(F.TEXTURE0);const Re=z7(ke,U,l,V);if(!Re||!Re.texture)continue;const{texture:Ve,mix:nt,offset:dt,tileSize:rt,buffer:xt}=Re;let Ge,ct;ee?(Ge=Jt.disabled,ct=Ie.projMatrix):O?(Ge=new Jt(F.LEQUAL,Jt.ReadWrite,d.depthRangeFor3D),ct=A?Float32Array.from(d.transform.expandedFarZProjMatrix):d.transform.calculateProjMatrix(ze,re)):(Ge=d.depthModeForSublayer(Ie.overscaledZ-de,l.paint.get("raster-opacity")===1?Jt.ReadWrite:Jt.ReadOnly,F.LESS),ct=d.transform.calculateProjMatrix(ze,re));const at=d.terrain&&ee?d.terrain.stencilModeForRTTOverlap(Ie):me[Ie.overscaledZ],wt=x?0:l.paint.get("raster-fade-duration");ke.registerFadeDuration(wt);const Tt=i.findLoadedParent(Ie,0),ft=T7(ke,Tt,i,d.transform,wt);let gt,Yt;d.terrain&&d.terrain.prepareDrawTile(),z.activeTexture.set(F.TEXTURE0),Ve.bind(oe,F.CLAMP_TO_EDGE),z.activeTexture.set(F.TEXTURE1),Tt?(Tt.texture&&Tt.texture.bind(oe,F.CLAMP_TO_EDGE),gt=Math.pow(2,Tt.tileID.overscaledZ-ke.tileID.overscaledZ),Yt=[ke.tileID.canonical.x*gt%1,ke.tileID.canonical.y*gt%1]):Ve.bind(oe,F.CLAMP_TO_EDGE),Ve.useMipmap&&z.extTextureFilterAnisotropic&&d.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const It=d.transform;let jt;const ir=O?On(It):[0,0,0,0];let Wt,tr,Tr,xr,Kr,nn=0;if(k&&U instanceof a.aD&&U.coordinates.length>3)Wt=Float32Array.from(a.b5(a.cC(new a.bP(0,0,0)))),tr=Float32Array.from(It.globeMatrix),Tr=Float32Array.from(a.cy(It)),xr=[a.am(It.center.lng),a.at(It.center.lat)],jt=U.elevatedGlobePerspectiveTransform,Kr=U.elevatedGlobeGridMatrix||new Float32Array(9);else if(k){const Mr=a.cz(Ie.canonical);nn=a.cA(Mr.getCenter().lat),Wt=Float32Array.from(a.b5(a.cC(Ie.canonical))),tr=Float32Array.from(It.globeMatrix),Tr=Float32Array.from(a.cy(It)),xr=[a.am(It.center.lng),a.at(It.center.lat)],jt=[0,0],Kr=Float32Array.from(a.cB(Ie.canonical,Mr,nn,It.worldSize/It._pixelsPerMercatorPixel))}else jt=U instanceof a.aD?U.perspectiveTransform:[0,0],Wt=new Float32Array(16),tr=new Float32Array(9),Tr=new Float32Array(16),xr=[0,0],Kr=new Float32Array(9);const pn=Gc(ct,Wt,tr,Tr,Kr,Yt||[0,0],a.a9(d.transform.zoom),xr,ir,gt||1,ft,l,jt,O?l.paint.get("raster-elevation"):0,2,nt,dt,V.range,rt,xt,q),No=d.isTileAffectedByFog(Ie),$n=d.getOrCreateProgram("raster",{defines:V.defines,overrideFog:No});if(d.uploadCommonUniforms(z,$n,ze),U instanceof a.aD){const Mr=U.elevatedGlobeVertexBuffer,en=U.elevatedGlobeIndexBuffer;if(ee||!A)U.boundsBuffer&&U.boundsSegments&&$n.draw(d,F.TRIANGLES,Ge,pr.disabled,J,or.disabled,pn,l.id,U.boundsBuffer,d.quadTriangleIndexBuffer,U.boundsSegments);else if(Mr&&en){const wn=It.zoom<=a.c2?U.elevatedGlobeSegments:U.getSegmentsForLongitude(It.center.lng);wn&&$n.draw(d,F.TRIANGLES,Ge,pr.disabled,J,Ce,pn,l.id,Mr,en,wn)}}else if(k){Ge=new Jt(F.LEQUAL,Jt.ReadOnly,d.depthRangeFor3D);const Mr=d.globeSharedBuffers;if(Mr){const[en,wn,Qr]=Mr.getGridBuffers(nn,!1);$n.draw(d,F.TRIANGLES,Ge,Se||at,d.colorModeForRenderPass(),Ce,pn,l.id,en,wn,Qr)}}else{const{tileBoundsBuffer:Mr,tileBoundsIndexBuffer:en,tileBoundsSegments:wn}=d.getTileBoundsBuffers(ke);$n.draw(d,F.TRIANGLES,Ge,at,J,or.disabled,pn,l.id,Mr,en,wn)}}if(!(U instanceof a.aD)&&k)for(const Ie of xe){const ze=Ie.canonical.y===(1<<Ie.canonical.z)-1;Ie.canonical.y===0&&co(!0,Ie,d,i,l,q,V,Ce,Se||pr.disabled),ze&&co(!1,Ie,d,i,l,q,V,Ce===or.frontCW?or.backCW:or.frontCW,Se||pr.disabled)}};k?be(ye,d.renderElevatedRasterBackface?or.backCW:or.frontCW,d.stencilModeFor3D()):be(ye,or.disabled,void 0),d.resetStencilClippingMasks()},"raster-particle":function(d,i,l,p,_,x){d.renderPass==="offscreen"&&function(A,O,k,z){if(!z.length)return;const F=A.context,U=F.gl,V=O.getSource();if(!(V instanceof Zl))return;const q=Math.ceil(Math.sqrt(k.paint.get("raster-particle-count")));let J=k.particlePositionRGBAImage;if(!J||J.width!==q){const ye=function(de){const be=de*de,xe=new Uint8Array(4*be),Ce=function(Ie){return Ie|=0,Ie=Math.imul(2747636419^Ie,2654435769),Ie=Math.imul(Ie^Ie>>>16,2654435769),((Ie=Math.imul(Ie^Ie>>>16,2654435769))>>>0)/4294967296},Se=1/1.1;for(let Ie=0;Ie<be;Ie++){const ze=Se*(Ce(2*Ie+0)+Aa),ke=Se*(Ce(2*Ie+1)+Aa),Re=255*ze%1,Ve=255*ke%1,nt=Re,dt=ke-Ve/255,rt=Ve;xe[4*Ie+0]=255*(ze-Re/255),xe[4*Ie+1]=255*nt,xe[4*Ie+2]=255*dt,xe[4*Ie+3]=255*rt}return xe}(q);J=k.particlePositionRGBAImage=new a.r({width:q,height:q},ye)}let ee=k.particleFramebuffer;ee?ee.width!==q&&(ee.destroy(),ee=k.particleFramebuffer=F.createFramebuffer(q,q,!0,null)):ee=k.particleFramebuffer=F.createFramebuffer(q,q,!0,null);const re=[];for(const ye of z){const de=O.getTile(ye);if(!(de instanceof e7))continue;const be=ff(de,V,k);if(!be)continue;const xe=[de.tileSize,de.tileSize];let Ce=k.tileFramebuffer;Ce||(Ce=k.tileFramebuffer=F.createFramebuffer(xe[0],xe[1],!0,null));let Se=de.rasterParticleState;Se||(Se=de.rasterParticleState=new hf(F,ye,xe,J));const Ie=Se.update(k.lastInvalidatedAt);Se.particleTextureDimension!==q&&Se.updateParticleTexture(ye,J);const ze=Se.targetColorTexture;Se.targetColorTexture=Se.backgroundColorTexture,Se.backgroundColorTexture=ze;const ke=Se.particleTexture0;Se.particleTexture0=Se.particleTexture1,Se.particleTexture1=ke,re.push([ye,be,Se,Ie])}if(re.length===0)return;const oe=a.q.now(),me=k.previousDrawTimestamp?.001*(oe-k.previousDrawTimestamp):.0167;if(k.previousDrawTimestamp=oe,k.hasColorMap()){F.activeTexture.set(U.TEXTURE0+2);let ye=k.colorRampTexture;ye||(ye=k.colorRampTexture=new a.T(F,k.colorRamp,U.RGBA8)),ye.bind(U.LINEAR,U.CLAMP_TO_EDGE)}F.bindFramebuffer.set(k.tileFramebuffer.framebuffer),function(ye,de,be){const xe=ye.context,Ce=xe.gl,Se=de.tileFramebuffer;xe.activeTexture.set(Ce.TEXTURE0);const Ie={u_texture:0,u_opacity:1.05*(ke=de.paint.get("raster-particle-fade-opacity-factor"))/(ke+.05)},ze=ye.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var ke;for(const Re of be){const[,,Ve,nt]=Re;Se.colorAttachment.set(Ve.targetColorTexture.texture),xe.viewport.set([0,0,Se.width,Se.height]),xe.clear({color:a.bz.transparent}),nt&&(Ve.backgroundColorTexture.bind(Ce.NEAREST,Ce.CLAMP_TO_EDGE),ze.draw(ye,Ce.TRIANGLES,Jt.disabled,pr.disabled,Pr.alphaBlended,or.disabled,Ie,de.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments))}}(A,k,re),function(ye,de,be,xe){const Ce=ye.context,Se=Ce.gl,Ie=be.tileFramebuffer,ze=ye.transform.projection.name==="globe",ke=be.paint.get("raster-particle-max-speed");for(const Re of xe){const[Ve,nt,dt]=Re;Ce.activeTexture.set(Se.TEXTURE0+0),nt.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Ie.colorAttachment.set(dt.targetColorTexture.texture);const rt=ye.getOrCreateProgram("rasterParticleDraw",{defines:nt.defines,overrideFog:!1});Ce.activeTexture.set(Se.TEXTURE0+1);const xt=nt.scalarData?[]:[0,1,2,3].map(at=>a.c$[at](Ve));xt.push(Ve);const Ge=Ve.canonical.x,ct=Ve.canonical.y;for(const at of xt){const wt=de.getTile(ze?at.wrapped():at);if(!wt)continue;const Tt=wt.rasterParticleState;if(!Tt)continue;const ft=at.canonical.x+(1<<at.canonical.z)*(at.wrap-Ve.wrap),gt=at.canonical.y;Tt.particleTexture0.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);const Yt=C7(1,Tt.particleTexture0.size[0],[ft-Ge,gt-ct],0,nt.texture.size,2,ke,nt.textureOffset,nt.scale,nt.offset);rt.draw(ye,Se.POINTS,Jt.disabled,pr.disabled,Pr.alphaBlended,or.disabled,Yt,be.id,Tt.particleIndexBuffer,void 0,Tt.particleSegment)}}}(A,O,k,re),F.bindFramebuffer.set(k.particleFramebuffer.framebuffer),function(ye,de,be,xe){const Ce=ye.context,Se=Ce.gl,Ie=de.paint.get("raster-particle-max-speed"),ze=xe*de.paint.get("raster-particle-speed-factor")*.15,ke=function(Ve){return Math.pow(Ve,6)}(.01+1*de.paint.get("raster-particle-reset-rate-factor")),Re=de.particleFramebuffer;Ce.viewport.set([0,0,Re.width,Re.height]);for(const Ve of be){const[,nt,dt]=Ve;Ce.activeTexture.set(Se.TEXTURE0+0),nt.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Ce.activeTexture.set(Se.TEXTURE0+1);const rt=dt.particleTexture0;rt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);const xt=I7(1,rt.size[0],0,nt.texture.size,Ie,ze,ke,nt.textureOffset,nt.scale,nt.offset);Re.colorAttachment.set(dt.particleTexture1.texture),Ce.clear({color:a.bz.transparent}),ye.getOrCreateProgram("rasterParticleUpdate",{defines:nt.defines}).draw(ye,Se.TRIANGLES,Jt.disabled,pr.disabled,Pr.unblended,or.disabled,xt,de.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments)}}(A,k,re,me)}(d,i,l,p),d.renderPass==="translucent"&&(function(A,O,k,z,F){const U=A.context,V=U.gl,q=O.getSource().tileSize,J=5*(1-a.a7(a.bU,a.bU+1,A.transform.zoom))*q+k.paint.get("raster-particle-elevation"),ee=!A.options.moving,re=A.transform.projection.name==="globe";if(!z.length)return;const[oe,me]=A.stencilConfigForOverlap(z),ye=[];re&&ye.push("PROJECTION_GLOBE_VIEW");const de=A.stencilModeFor3D();for(const be of me){const xe=be.toUnwrapped(),Ce=O.getTile(be);if(!Ce.rasterParticleState)continue;const Se=Ce.rasterParticleState,Ie=100;Ce.registerFadeDuration(Ie);const ze=O.findLoadedParent(be,0),ke=T7(Ce,ze,O,A.transform,Ie);let Re,Ve;A.terrain&&A.terrain.prepareDrawTile(),U.activeTexture.set(V.TEXTURE0),Se.targetColorTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),U.activeTexture.set(V.TEXTURE1),ze&&ze.rasterParticleState?(ze.rasterParticleState.targetColorTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Re=Math.pow(2,ze.tileID.overscaledZ-Ce.tileID.overscaledZ),Ve=[Ce.tileID.canonical.x*Re%1,Ce.tileID.canonical.y*Re%1]):Se.targetColorTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE);const nt=re?Float32Array.from(A.transform.expandedFarZProjMatrix):A.transform.calculateProjMatrix(xe,ee),dt=A.transform,rt=df(dt),xt=a.cz(be.canonical),Ge=a.cA(xt.getCenter().lat);let ct,at,wt,Tt,ft;re?(ct=Float32Array.from(a.b5(a.cC(be.canonical))),at=Float32Array.from(dt.globeMatrix),wt=Float32Array.from(a.cy(dt)),Tt=[a.am(dt.center.lng),a.at(dt.center.lat)],ft=Float32Array.from(a.cB(be.canonical,xt,Ge,dt.worldSize/dt._pixelsPerMercatorPixel))):(ct=new Float32Array(16),at=new Float32Array(9),wt=new Float32Array(16),Tt=[0,0],ft=new Float32Array(9));const gt=sf(nt,ct,at,wt,ft,Ve||[0,0],a.a9(A.transform.zoom),Tt,rt,Re||1,ke,J),Yt=A.isTileAffectedByFog(be),It=A.getOrCreateProgram("rasterParticle",{defines:ye,overrideFog:Yt});if(A.uploadCommonUniforms(U,It,xe),re){const jt=new Jt(V.LEQUAL,Jt.ReadOnly,A.depthRangeFor3D),ir=0,Wt=A.globeSharedBuffers;if(Wt){const[tr,Tr,xr]=Wt.getGridBuffers(Ge,ir!==0);It.draw(A,V.TRIANGLES,jt,de,Pr.alphaBlended,A.renderElevatedRasterBackface?or.frontCCW:or.backCCW,gt,k.id,tr,Tr,xr)}}else{const jt=A.depthModeForSublayer(0,Jt.ReadOnly),ir=oe[be.overscaledZ],{tileBoundsBuffer:Wt,tileBoundsIndexBuffer:tr,tileBoundsSegments:Tr}=A.getTileBoundsBuffers(Ce);It.draw(A,V.TRIANGLES,jt,ir,Pr.alphaBlended,or.disabled,gt,k.id,Wt,tr,Tr)}}A.resetStencilClippingMasks()}(d,i,l,p),d.style.map.triggerRepaint())},background:function(d,i,l,p){const _=l.paint.get("background-color"),x=l.paint.get("background-opacity"),A=l.paint.get("background-emissive-strength"),O=l.paint.get("background-pitch-alignment")==="viewport";if(x===0)return;const k=d.context,z=k.gl,F=d.transform,U=F.tileSize,V=l.paint.get("background-pattern");let q;if(V!==void 0&&(V===null||(q=d.imageManager.getPattern(V.toString(),l.scope,d.style.getLut(l.scope)),!q)))return;const J=!V&&_.a===1&&x===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass!==J)return;const ee=pr.disabled,re=d.depthModeForSublayer(0,J==="opaque"?Jt.ReadWrite:Jt.ReadOnly),oe=d.colorModeForDrapableLayerRenderPass(A),me=V?"backgroundPattern":"background";let ye,de=p;if(de||(ye=d.getBackgroundTiles(),de=Object.values(ye).map(be=>be.tileID)),V&&(k.activeTexture.set(z.TEXTURE0),d.imageManager.bind(d.context,l.scope)),O){const be=d.getOrCreateProgram(me,{overrideFog:!1,overrideRtt:!0}),xe=new Float32Array(a.a6.mat4.identity([])),Ce=new a.aA(0,0,0,0,0),Se=V?sl(xe,A,x,d,0,l.scope,q,O,{tileID:Ce,tileSize:U}):lf(xe,A,x,_.toRenderColor(l.lut));be.draw(d,z.TRIANGLES,re,ee,oe,or.disabled,Se,l.id,d.viewportBuffer,d.quadTriangleIndexBuffer,d.viewportSegments)}else for(const be of de){const xe=d.isTileAffectedByFog(be),Ce=d.getOrCreateProgram(me,{overrideFog:xe}),Se=be.toUnwrapped(),Ie=p?be.projMatrix:d.transform.calculateProjMatrix(Se);d.prepareDrawTile();const ze=i?i.getTile(be):ye?ye[be.key]:new xa(be,U,F.zoom,d),ke=V?sl(Ie,A,x,d,0,l.scope,q,O,{tileID:be,tileSize:U}):lf(Ie,A,x,_.toRenderColor(l.lut));d.uploadCommonUniforms(k,Ce,Se);const{tileBoundsBuffer:Re,tileBoundsIndexBuffer:Ve,tileBoundsSegments:nt}=d.getTileBoundsBuffers(ze);Ce.draw(d,z.TRIANGLES,re,ee,oe,or.disabled,ke,l.id,Re,Ve,nt)}},sky:function(d,i,l){const p=d._atmosphere?a.a9(d.transform.zoom):1,_=l.paint.get("sky-opacity")*p;if(_===0)return;const x=d.context,A=l.paint.get("sky-type"),O=new Jt(x.gl.LEQUAL,Jt.ReadOnly,[0,1]),k=d.frameCounter/1e3%1;A==="atmosphere"?d.renderPass==="offscreen"?l.needsSkyboxCapture(d)&&(function(z,F,U,V){const q=z.context,J=q.gl;let ee=F.skyboxFbo;if(!ee){ee=F.skyboxFbo=q.createFramebuffer(32,32,!0,null),F.skyboxGeometry=new M3(q),F.skyboxTexture=q.gl.createTexture(),J.bindTexture(J.TEXTURE_CUBE_MAP,F.skyboxTexture),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_CUBE_MAP,J.TEXTURE_MAG_FILTER,J.LINEAR);for(let ye=0;ye<6;++ye)J.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,J.RGBA,32,32,0,J.RGBA,J.UNSIGNED_BYTE,null)}q.bindFramebuffer.set(ee.framebuffer),q.viewport.set([0,0,32,32]);const re=F.getCenter(z,!0),oe=z.getOrCreateProgram("skyboxCapture"),me=new Float64Array(16);a.a6.mat4.identity(me),a.a6.mat4.rotateY(me,me,.5*-Math.PI),cl(z,F,oe,me,re,0),a.a6.mat4.identity(me),a.a6.mat4.rotateY(me,me,.5*Math.PI),cl(z,F,oe,me,re,1),a.a6.mat4.identity(me),a.a6.mat4.rotateX(me,me,.5*-Math.PI),cl(z,F,oe,me,re,2),a.a6.mat4.identity(me),a.a6.mat4.rotateX(me,me,.5*Math.PI),cl(z,F,oe,me,re,3),a.a6.mat4.identity(me),cl(z,F,oe,me,re,4),a.a6.mat4.identity(me),a.a6.mat4.rotateY(me,me,Math.PI),cl(z,F,oe,me,re,5),q.viewport.set([0,0,z.width,z.height])}(d,l),l.markSkyboxValid(d)):d.renderPass==="sky"&&function(z,F,U,V,q){const J=z.context,ee=J.gl,re=z.transform,oe=z.getOrCreateProgram("skybox");J.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_CUBE_MAP,F.skyboxTexture);const me=((ye,de,be,xe,Ce)=>({u_matrix:ye,u_sun_direction:de,u_cubemap:0,u_opacity:xe,u_temporal_offset:Ce}))(re.skyboxMatrix,F.getCenter(z,!1),0,V,q);z.uploadCommonUniforms(J,oe),oe.draw(z,ee.TRIANGLES,U,pr.disabled,z.colorModeForRenderPass(),or.backCW,me,"skybox",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(d,l,O,_,k):A==="gradient"&&d.renderPass==="sky"&&function(z,F,U,V,q){const J=z.context,ee=J.gl,re=z.transform,oe=z.getOrCreateProgram("skyboxGradient");F.skyboxGeometry||(F.skyboxGeometry=new M3(J)),J.activeTexture.set(ee.TEXTURE0);let me=F.colorRampTexture;me||(me=F.colorRampTexture=new a.T(J,F.colorRamp,ee.RGBA8)),me.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const ye=((de,be,xe,Ce,Se)=>({u_matrix:de,u_color_ramp:0,u_center_direction:be,u_radius:a.bB(xe),u_opacity:Ce,u_temporal_offset:Se}))(re.skyboxMatrix,F.getCenter(z,!1),F.paint.get("sky-gradient-radius"),V,q);z.uploadCommonUniforms(J,oe),oe.draw(z,ee.TRIANGLES,U,pr.disabled,z.colorModeForRenderPass(),or.backCW,ye,"skyboxGradient",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(d,l,O,_,k)},debug:function(d,i,l,p,_,x){for(let A=0;A<l.length;A++)if(_){const z=new a.bz(p.r*.8,p.g*.8,p.b*.8,1);na(d,i,l[A],p,-1,-1,x),na(d,i,l[A],p,-1,1,x),na(d,i,l[A],p,1,1,x),na(d,i,l[A],p,1,-1,x),na(d,i,l[A],z,0,0,x)}else na(d,i,l[A],p,0,0,x)},custom:function(d,i,l,p){const _=d.context,x=l.implementation;if(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes("custom")||d.terrain&&(d.terrain.renderingToTexture||d.renderPass==="offscreen")&&l.isDraped(i)){if(d.renderPass==="offscreen"){const A=x.prerender;if(A){if(d.setCustomLayerDefaults(),_.setColorMode(d.colorModeForRenderPass()),d.transform.projection.name==="globe"){const O=d.transform.pointMerc;A.call(x,_.gl,d.transform.customLayerMatrix(),d.transform.getProjection(),d.transform.globeToMercatorMatrix(),a.a9(d.transform.zoom),[O.x,O.y],d.transform.pixelsPerMeterRatio)}else A.call(x,_.gl,d.transform.customLayerMatrix());_.setDirty(),d.setBaseState()}}else if(d.renderPass==="translucent"){if(d.terrain&&d.terrain.renderingToTexture){const O=x.renderToTile;if(O){const k=p[0].canonical,z=new a.a5(k.x+p[0].wrap*(1<<k.z),k.y,k.z);_.setDepthMode(Jt.disabled),_.setStencilMode(pr.disabled),_.setColorMode(d.colorModeForRenderPass()),d.setCustomLayerDefaults(),O.call(x,_.gl,z),_.setDirty(),d.setBaseState()}return}d.setCustomLayerDefaults(),_.setColorMode(d.colorModeForRenderPass()),_.setStencilMode(pr.disabled);const A=x.renderingMode==="3d"?new Jt(d.context.gl.LEQUAL,Jt.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,Jt.ReadOnly);if(_.setDepthMode(A),d.transform.projection.name==="globe"){const O=d.transform.pointMerc;x.render(_.gl,d.transform.customLayerMatrix(),d.transform.getProjection(),d.transform.globeToMercatorMatrix(),a.a9(d.transform.zoom),[O.x,O.y],d.transform.pixelsPerMeterRatio)}else x.render(_.gl,d.transform.customLayerMatrix());_.setDirty(),d.setBaseState(),_.bindFramebuffer.set(null)}}else a.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(d,i,l,p){if(d.renderPass==="opaque")return;const _=l.paint.get("model-opacity");if(_===0)return;const x=l.paint.get("model-cast-shadows");if(d.renderPass==="shadow"&&(!x||d.terrain&&_<.65&&l._transitionablePaint._values["model-opacity"].value.expression instanceof a.a4))return;const A=d.shadowRenderer,O=l.paint.get("model-receive-shadows");A&&(A.useNormalOffset=!0,O||(A.enabled=!1));const k=()=>{A&&(A.useNormalOffset=!0,O||(A.enabled=!0))},z=i.getSource();if(d.renderPass==="light-beam"&&z.type!=="batched-model")return;if(z.type==="vector"||z.type==="geojson")return function(oe,me,ye,de,be){const xe=oe.transform;if(xe.projection.name!=="mercator")return void a.w(`Drawing 3D models for ${xe.projection.name} projection is not yet implemented`);const Ce=xe.getFreeCameraOptions().position;if(!oe.modelManager)return;const Se=oe.modelManager;ye.modelManager=Se;const Ie=oe.shadowRenderer;if(!ye._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const ze=ye._unevaluatedLayout._values["model-id"],ke={...ye.layout.get("model-id").parameters},Re=oe.style.order.indexOf(ye.fqid);for(const Ve of de){const nt=me.getTile(Ve).getBucket(ye);if(!nt||nt.projection.name!==xe.projection.name)continue;const dt=nt.getModelUris();dt&&!nt.modelsRequested&&(Se.addModelsFromBucket(dt,be),nt.modelsRequested=!0);const rt=h8(Ve,xe);ke.zoom=rt;const xt=ze.possiblyEvaluate(ke);if(mf(oe,nt,Ve),oa.shadowUniformsInitialized=!1,oa.useSingleShadowCascade=!!Ie&&Ie.getMaxCascadeForTile(Ve.toUnwrapped())===0,oe.renderPass==="shadow"&&Ie){if(oe.currentShadowCascade===1&&nt.isInsideFirstShadowMapFrustum)continue;const at=xe.calculatePosMatrix(Ve.toUnwrapped(),xe.worldSize);if(oa.tileMatrix.set(at),oa.shadowTileMatrix=Float32Array.from(Ie.calculateShadowPassMatrixFromMatrix(at)),oa.aabb.min.fill(0),oa.aabb.max[0]=oa.aabb.max[1]=a.ab,oa.aabb.max[2]=0,Kc(nt,oa,oe,ye.scope))continue}const Ge=1<<Ve.canonical.z,ct=[((Ce.x-Ve.wrap)*Ge-Ve.canonical.x)*a.ab,(Ce.y*Ge-Ve.canonical.y)*a.ab,Ce.z*Ge*a.ab];oe.conflationActive&&Object.keys(nt.instancesPerModel).length>0&&oe.style.isLayerClipped(ye,me.getSource())&&nt.updateReplacement(Ve,oe.replacementSource,Re,be)&&(nt.uploaded=!1,nt.upload(oe.context));for(let at in nt.instancesPerModel){const wt=nt.instancesPerModel[at];wt.features.length>0&&(at=xt.evaluate(wt.features[0].feature,{}));const Tt=Se.getModel(at,be);if(Tt&&Tt.uploaded)for(const ft of Tt.nodes)Ni(oe,ye,ft,wt,ct,Ve,oa)}}}(d,i,l,p,z.type==="vector"?l.scope:""),void k();if(!z.loaded())return;if(z.type==="batched-model")return function(oe,me,ye,de){ye.resetLayerRenderingStats(oe);const be=oe.context,xe=oe.transform,Ce=oe.style.fog,Se=oe.shadowRenderer;if(xe.projection.name!=="mercator")return void a.w(`Drawing 3D landmark models for ${xe.projection.name} projection is not yet implemented`);const Ie=oe.transform.getFreeCameraOptions().position,ze=a.a6.vec3.scale([],[Ie.x,Ie.y,Ie.z],oe.transform.worldSize),ke=a.a6.vec3.negate([],ze),Re=a.a6.mat4.identity([]),Ve=a.de(xe.center.lat,xe.zoom),nt=a.a6.mat4.fromScaling([],[1,1,1/Ve]);a.a6.mat4.translate(Re,Re,ke);const dt=ye.paint.get("model-opacity"),rt=new Jt(be.gl.LEQUAL,Jt.ReadWrite,oe.depthRangeFor3D),xt=new Jt(be.gl.LEQUAL,Jt.ReadOnly,oe.depthRangeFor3D),Ge=new a.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),ct=oe.renderPass==="shadow",at=ct&&Se?Se.getCurrentCascadeFrustum():xe.getFrustum(xe.scaleZoom(xe.worldSize)),wt=ye.paint.get("model-front-cutoff"),Tt=wt[2]<1,ft=Ja(oe,ye.paint.get("model-cutoff-fade-range")),gt=ye.getLayerRenderingStats();(function(Yt,It,jt,ir){const Wt=Yt.terrain?Yt.terrain.exaggeration():0,tr=Yt.transform.zoom;for(const Tr of ir){const xr=It.getTile(Tr).getBucket(jt);xr&&(Yt.conflationActive&&xr.updateReplacement(Tr,Yt.replacementSource),xr.evaluateScale(Yt,jt),Yt.terrain&&Wt>0&&xr.elevationUpdate(Yt.terrain,Wt,Tr,jt.source),xr.needsReEvaluation(Yt,tr,jt)&&xr.evaluate(jt))}})(oe,me,ye,de),function(){let Yt,It,jt;Tt?(Yt=de.length-1,It=-1,jt=-1):(Yt=0,It=de.length,jt=1);const ir=new Float64Array(16),Wt=a.a6.vec3.create(),tr=new a.P(0,0);for(let Tr=Yt;Tr!==It;Tr+=jt){const xr=de[Tr],Kr=me.getTile(xr).getBucket(ye);if(!Kr||!Kr.uploaded)continue;let nn=!1;Se&&(nn=Se.getMaxCascadeForTile(xr.toUnwrapped())===0);const pn=xe.calculatePosMatrix(xr.toUnwrapped(),xe.worldSize),No=Kr.modelTraits;!ct&&Tt&&(a.a6.mat4.invert(ir,pn),a.a6.vec3.transformMat4(Wt,ze,ir),tr.x=Wt[0],tr.y=Wt[1]);const $n=[];for(const Mr of Kr.getNodesInfo()){if(Mr.hiddenByReplacement||!Mr.node.meshes)continue;const en=Mr.node;let wn=0;oe.terrain&&en.elevation&&(wn=en.elevation*oe.terrain.exaggeration());const Qr=(()=>{const hn=Mr.aabb;return Ge.min=[...hn.min],Ge.max=[...hn.max],Ge.min[2]+=wn,Ge.max[2]+=wn,a.a6.vec3.transformMat4(Ge.min,Ge.min,pn),a.a6.vec3.transformMat4(Ge.max,Ge.max,pn),Ge})(),wr=Mr.evaluatedScale;if(wr[0]<=1&&wr[1]<=1&&wr[2]<=1&&Qr.intersects(at)===0)continue;if(!ct&&Tt){const hn=.16666666666666666;Mr.cameraCollisionOpacity=ze[0]>Qr.min[0]&&ze[0]<Qr.max[0]&&ze[1]>Qr.min[1]&&ze[1]<Qr.max[1]&&ze[2]*Ve<Qr.max[2]&&en.footprint&&a.bu(tr,en.footprint)?Math.max(Mr.cameraCollisionOpacity-hn,0):Math.min(1,Mr.cameraCollisionOpacity+hn)}const jr=[...pn],Wr=en.anchor?en.anchor[0]:0,Dn=en.anchor?en.anchor[1]:0;a.a6.mat4.translate(jr,jr,[Wr*(wr[0]-1),Dn*(wr[1]-1),wn]),a.a6.vec3.exactEquals(wr,a.dh)||a.a6.mat4.scale(jr,jr,wr);const Un=a.a6.mat4.multiply([],jr,en.matrix),Dr=a.a6.mat4.multiply([],xe.expandedFarZProjMatrix,Un),ai=a.a6.mat4.multiply([],xe.expandedFarZProjMatrix,jr),di=a.a6.vec4.transformMat4([],[Wr,Dn,wn,1],Dr)[2];en.hidden=!1;let si=dt;ct||(Tt&&(si*=Mr.cameraCollisionOpacity,si*=Nr(jr,xe,Mr.aabb,wt)),si*=yn(ft,di)),si!==0?$n.push({nodeInfo:Mr,depth:di,opacity:si,wvpForNode:Dr,wvpForTile:ai,nodeModelMatrix:Un,tileModelMatrix:jr}):en.hidden=!0}ct||$n.sort((Mr,en)=>!Tt||Mr.opacity===1&&en.opacity===1?Mr.depth<en.depth?-1:1:Mr.opacity===1?-1:en.opacity===1?1:Mr.depth>en.depth?-1:1);for(const Mr of $n){const en=Mr.nodeInfo,wn=en.node;let Qr=a.a6.mat4.multiply([],nt,Mr.tileModelMatrix);a.a6.mat4.multiply(Qr,Re,Qr);const wr=a.a6.mat4.invert([],Qr);a.a6.mat4.transpose(wr,wr),a.a6.mat4.scale(wr,wr,f8),Qr=a.a6.mat4.multiply(Qr,Qr,wn.matrix);const jr=oe.renderPass==="light-beam",Wr=No&a.dj.HasMapboxMeshFeatures,Dn=Wr?0:en.evaluatedRMEA[0][2];for(let Un=0;Un<wn.meshes.length;++Un){const Dr=wn.meshes[Un],ai=Un===wn.lightMeshIndex;let di=Mr.wvpForNode;if(ai){if(!jr&&!oe.terrain&&oe.shadowRenderer){oe.currentLayer<oe.firstLightBeamLayer&&(oe.firstLightBeamLayer=oe.currentLayer);continue}di=Mr.wvpForTile}else if(jr)continue;const si={defines:[]},hn=[];if(j7(si.defines,hn,Dr,oe,ye.lut),Wr||si.defines.push("DIFFUSE_SHADED"),nn&&si.defines.push("SHADOWS_SINGLE_CASCADE"),gt&&(ct?gt.numRenderedVerticesInShadowPass+=Dr.vertexArray.length:gt.numRenderedVerticesInTransparentPass+=Dr.vertexArray.length),ct){A1(Dr,Mr.nodeModelMatrix,oe,ye);continue}let Ki=null;if(Ce){const is=N7(Mr.nodeModelMatrix,oe.transform);if(Ki=new Float32Array(is),xe.projection.name!=="globe"){const Ls=Dr.aabb.min,Pa=Dr.aabb.max,[C1,I1]=Ce.getOpacityForBounds(is,Ls[0],Ls[1],Pa[0],Pa[1]);si.overrideFog=C1>=Bt||I1>=Bt}}const Ji=Dr.material;let jo;Ji.occlusionTexture&&Ji.occlusionTexture.offsetScale&&(jo=Ji.occlusionTexture.offsetScale,si.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!ct&&Se&&(Se.useNormalOffset=!!Dr.normalBuffer);const Eo=oe.getOrCreateProgram("model",si);!ct&&Se&&Se.setupShadowsFromMatrix(Mr.tileModelMatrix,Eo,Se.useNormalOffset),oe.uploadCommonUniforms(be,Eo,null,Ki);const uo=Ji.pbrMetallicRoughness;uo.metallicFactor=.9,uo.roughnessFactor=.5;const $o=Ut(new Float32Array(di),new Float32Array(Qr),new Float32Array(wr),new Float32Array(wn.matrix),oe,Mr.opacity,uo.baseColorFactor.toRenderColor(null),Ji.emissiveFactor,uo.metallicFactor,uo.roughnessFactor,Ji,Dn,ye,[0,0,0],jo);!ai&&(en.hasTranslucentParts||Mr.opacity<1)&&Eo.draw(oe,be.gl.TRIANGLES,rt,pr.disabled,Pr.disabled,or.backCCW,$o,ye.id,Dr.vertexBuffer,Dr.indexBuffer,Dr.segments,ye.paint,oe.transform.zoom,void 0,hn),Eo.draw(oe,be.gl.TRIANGLES,ai?xt:rt,pr.disabled,ai||Mr.opacity<1||en.hasTranslucentParts?Pr.alphaBlended:Pr.unblended,or.backCCW,$o,ye.id,Dr.vertexBuffer,Dr.indexBuffer,Dr.segments,ye.paint,oe.transform.zoom,void 0,hn)}}}}()}(d,i,l,p),void k();if(z.type!=="model")return;const F=z.getModels(),U=[],V=d.transform.getFreeCameraOptions().position,q=a.a6.vec3.scale([],[V.x,V.y,V.z],d.transform.worldSize);a.a6.vec3.negate(q,q);const J=[],ee=[];let re=0;for(const oe of F){const me=l.paint.get("model-rotation").constantOr(null),ye=l.paint.get("model-scale").constantOr(null),de=l.paint.get("model-translation").constantOr(null);oe.computeModelMatrix(d,me,ye,de,!0,!0,!1);const be=a.a6.mat4.identity([]),xe=a.de(oe.position.lat,d.transform.zoom),Ce=a.a6.mat4.fromScaling([],[1,1,1/xe]);a.a6.mat4.translate(be,be,q),U.push({zScaleMatrix:Ce,negCameraPosMatrix:be});for(const Se of oe.nodes)Yc(d.transform,Se,oe.matrix,d.transform.expandedFarZProjMatrix,re,J,ee);re++}if(J.sort((oe,me)=>me.depth-oe.depth),d.renderPass!=="shadow"){if(_===1)for(const oe of ee)Xc(oe,d,l,U[oe.modelIndex],pr.disabled,d.colorModeForRenderPass());else{for(const oe of ee)Xc(oe,d,l,U[oe.modelIndex],pr.disabled,Pr.disabled);for(const oe of ee)Xc(oe,d,l,U[oe.modelIndex],d.stencilModeFor3D(),d.colorModeForRenderPass());d.resetStencilClippingMasks()}for(const oe of J)Xc(oe,d,l,U[oe.modelIndex],pr.disabled,d.colorModeForRenderPass());k()}else{for(const oe of ee)A1(oe.mesh,oe.nodeModelMatrix,d,l);for(const oe of J)A1(oe.mesh,oe.nodeModelMatrix,d,l);k()}}},U7={model:function(d,i,l){const p=i.getSource();if(!p.loaded())return;if(p.type==="vector"||p.type==="geojson")return void(l.modelManager&&l.modelManager.upload(l,p.type==="vector"?d.scope:""));if(p.type==="batched-model"||p.type!=="model")return;const _=p.getModels();for(const x of _)x.upload(l.context)},raster:function(d,i,l){const p=i.getSource();if(!(p instanceof Zl&&p.loaded()))return;const _=d.sourceLayer||p.rasterLayerIds&&p.rasterLayerIds[0];if(!_)return;const x=d.paint.get("raster-array-band")||p.getInitialBand(_);if(x==null)return;const A=i.getIds().map(O=>i.getTileByID(O));for(const O of A)O.updateNeeded(_,x)&&p.prepareTile(O,_,x)},"raster-particle":function(d,i,l){const p=i.getSource();if(!(p instanceof Zl&&p.loaded()))return;const _=d.sourceLayer||p.rasterLayerIds&&p.rasterLayerIds[0];if(!_)return;const x=d.paint.get("raster-particle-array-band")||p.getInitialBand(_);if(x==null)return;const A=i.getIds().map(O=>i.getTileByID(O));for(const O of A)O.updateNeeded(_,x)&&p.prepareTile(O,_,x)}};class C3{constructor(i,l,p,_){this.context=new o8(i,l),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=_,this._timeStamp=a.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const x=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const O of x)this._debugParams.enabledLayers[O]=!0;_.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),_.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),_.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),_.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),_.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const O of x)_.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],O);this.occlusionParams=new $7(_),this.setup(),this.numSublayers=oo.maxUnderzooming+oo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new O6(this),this._wireframeDebugCache=new Is,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const A=new a.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new a.T(this.context,A,i.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(i,l){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new d3(this,i));const _=this._terrain;this.transform.elevation=p?_:null,_.update(i,this.transform,l),this.transform.elevation&&!_.enabled&&(this.transform.elevation=null)}_updateFog(i){const l=i.fog;if(!l||this.transform.projection.name==="globe"||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,_]=l.getFovAdjustedRange(this.transform._fov);if(p>_)return void(this.transform.fogCullDistSq=null);const x=p+.78*(_-p);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(i){i&&!this._terrain&&(this._terrain=new d3(this,this.style)),this._forceTerrainMode=i}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,l){if(this.width=i*a.q.devicePixelRatio,this.height=l*a.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._mergedLayers[p].resize()}setup(){const i=this.context,l=new a.a_;l.emplaceBack(0,0),l.emplaceBack(a.ab,0),l.emplaceBack(0,a.ab),l.emplaceBack(a.ab,a.ab),this.tileExtentBuffer=i.createVertexBuffer(l,a.b0.members),this.tileExtentSegments=a.b1.simpleSegment(0,0,4,2);const p=new a.a_;p.emplaceBack(0,0),p.emplaceBack(a.ab,0),p.emplaceBack(0,a.ab),p.emplaceBack(a.ab,a.ab),this.debugBuffer=i.createVertexBuffer(p,a.b0.members),this.debugSegments=a.b1.simpleSegment(0,0,4,5);const _=new a.a_;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,a.b0.members),this.viewportSegments=a.b1.simpleSegment(0,0,4,2);const x=new a.aN;x.emplaceBack(0,0,0,0),x.emplaceBack(a.ab,0,a.ab,0),x.emplaceBack(0,a.ab,0,a.ab),x.emplaceBack(a.ab,a.ab,a.ab,a.ab),this.mercatorBoundsBuffer=i.createVertexBuffer(x,a.b3.members),this.mercatorBoundsSegments=a.b1.simpleSegment(0,0,4,2);const A=new a.aO;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const O=new a.a$;for(const z of[0,1,3,2,0])O.emplaceBack(z);this.debugIndexBuffer=i.createIndexBuffer(O),this.emptyTexture=new a.T(i,new a.r({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA8),this.identityMat=a.a6.mat4.create();const k=this.context.gl;this.stencilClearMode=new pr({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,Jt.disabled,this.stencilClearMode,Pr.disabled,or.disabled,Uc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,l,p){if(!l||this.currentStencilSource===l.id||!i.isTileClipped()||!p||p.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const k of p)if(this._tileClippingMaskIDs[k.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=l.id;const _=this.context,x=_.gl;this.nextStencilID+p.length>256&&this.clearStencil(),_.setColorMode(Pr.disabled),_.setDepthMode(Jt.disabled);const A=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of p){const k=l.getTile(O),z=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:F,tileBoundsIndexBuffer:U,tileBoundsSegments:V}=this.getTileBoundsBuffers(k);A.draw(this,x.TRIANGLES,Jt.disabled,new pr({func:x.ALWAYS,mask:0},z,255,x.KEEP,x.KEEP,x.REPLACE),Pr.disabled,or.disabled,Uc(O.projMatrix),"$clipping",F,U,V)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new pr({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const l=this.context.gl;return new pr({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,p=i.sort((A,O)=>O.overscaledZ-A.overscaledZ),_=p[p.length-1].overscaledZ,x=p[0].overscaledZ-_+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const A={};for(let O=0;O<x;O++)A[O+_]=new pr({func:l.GEQUAL,mask:255},O+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=x,[A,p]}return[{[_]:pr.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Pr([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new a.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pr.unblended:Pr.alphaBlended}colorModeForDrapableLayerRenderPass(i){const l=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Pr([l.ONE,l.ONE_MINUS_SRC_ALPHA,l.CONSTANT_ALPHA,l.ONE_MINUS_SRC_ALPHA],new a.bz(0,0,0,i===void 0?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,l,p,_=!1){if(this.depthOcclusion)return new Jt(this.context.gl.GREATER,Jt.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!_)return Jt.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Jt(p||this.context.gl.LEQUAL,l,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const i=this.context.gl,l=Math.ceil(this.width),p=Math.ceil(this.height),_=this.context.bindFramebuffer.get(),x=i.getParameter(i.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===l&&this.depthFBO.height===p||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),l!==0&&p!==0&&(this.depthFBO=new R7(this.context,l,p,!1,"texture"),this.depthTexture=new a.T(this.context,{width:l,height:p,data:null},i.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(_),i.bindTexture(i.TEXTURE_2D,x),this.depthFBO&&(i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),i.blitFramebuffer(0,0,l,p,0,0,l,p,i.DEPTH_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((i,l)=>i+l/this._fpsHistory.length,0))}render(i,l){const p=a.q.now();this._dt=p-this._timeStamp,this._timeStamp=p,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=i.map.repaint,this.style=i,this.options=l;const _=this.style._mergedLayers,x=this.style.order.filter(ke=>{const Re=_[ke];return!(Re.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Re.type]});let A=!1,O=!1;for(const ke of x){const Re=_[ke];Re.type==="circle"&&(A=!0),Re.type==="symbol"&&(Re.hasInitialOcclusionOpacityProperties?O=!0:A=!0)}const k=x.map(ke=>_[ke]),z=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.q.now()),this.imageManager.beginFrame();let F=0,U=!1;for(const ke in z){const Re=z[ke];Re.used&&(Re.prepare(this.context),Re.getSource().usedInConflation&&++F)}let V=!1;for(const ke of k)ke.isHidden(this.transform.zoom)||(ke.type==="clip"&&(V=!0),this.prepareLayer(ke));const q={},J={},ee={},re={},oe={};for(const ke in z){const Re=z[ke];q[ke]=Re.getVisibleCoordinates(),J[ke]=q[ke].slice().reverse(),ee[ke]=Re.getVisibleCoordinates(!0).reverse(),re[ke]=Re.getShadowCasterCoordinates(),oe[ke]=Re.sortCoordinatesByDistance(q[ke])}const me=ke=>{const Re=this.style.getLayerSourceCache(ke);return Re&&Re.used?Re.getSource():null};if(F||V||this._clippingActiveLastFrame){const ke=[],Re=[];let Ve=0;for(const nt of k)this.isSourceForClippingOrConflation(nt,me(nt))&&(ke.push(nt),Re.push(Ve)),Ve++;if(ke&&(V||ke.length>1)||this._clippingActiveLastFrame){V=!1;const nt=[];for(let dt=0;dt<ke.length;dt++){const rt=ke[dt],xt=Re[dt],Ge=this.style.getLayerSourceCache(rt);if(!Ge||!Ge.used||!Ge.getSource().usedInConflation&&rt.type!=="clip")continue;let ct=a.dn,at=a.bs.None;const wt=[];let Tt=!0;if(rt.type==="clip"){ct=xt;for(const ft of rt.layout.get("clip-layer-types"))at|=ft==="model"?a.bs.Model:ft==="symbol"?a.bs.Symbol:a.bs.FillExtrusion;for(const ft of rt.layout.get("clip-layer-scope"))wt.push(ft);rt.isHidden(this.transform.zoom)?Tt=!1:V=!0}Tt&&nt.push({layer:rt.fqid,cache:Ge,order:ct,clipMask:at,clipScope:wt})}this.replacementSource.setSources(nt),U=!0}}this._clippingActiveLastFrame=V,U||this.replacementSource.clear(),this.conflationActive=U,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let ke=0;ke<k.length;ke++){const Re=k[ke],Ve=Re.cutoffRange();if(this.longestCutoffRange=Math.max(Ve,this.longestCutoffRange),Ve>0){const nt=me(Re);nt&&(this.minCutoffZoom=Math.max(nt.minzoom,this.minCutoffZoom)),Re.minzoom&&(this.minCutoffZoom=Math.max(Re.minzoom,this.minCutoffZoom))}Re.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=ke),this._lastOcclusionLayer=ke)}const ye=this.style&&this.style.fog;ye?(this._fogVisible=ye.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ye.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(ee),this.opaquePassCutoff=0);const de=this._shadowRenderer;if(de){de.updateShadowParameters(this.transform,this.style.directionalLight);for(const ke in z)for(const Re of q[ke]){let Ve={min:0,max:0};this.terrain&&(Ve=this.terrain.getMinMaxForTile(Re)||Ve),de.addShadowReceiver(Re.toUnwrapped(),Ve.min,Ve.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new F7(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!Nt.has(this.context.gl))return;this.renderPass="offscreen";for(const ke of k){const Re=i.getLayerSourceCache(ke);if(!ke.hasOffscreenPass()||ke.isHidden(this.transform.zoom))continue;const Ve=Re?J[Re.id]:void 0;(ke.type==="custom"||ke.type==="raster"||ke.type==="raster-particle"||ke.isSky()||Ve&&Ve.length)&&this.renderLayer(this,Re,ke,Ve)}this.depthRangeFor3D=[0,1-(k.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,re)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const be=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),xe=(()=>{if(l.showOverdrawInspector)return a.bz.black;const ke=this.style.fog;if(ke&&this.transform.projection.supportsFog){const Re=this.style.getLut(ke.scope);if(!be){const Ve=ke.properties.get("color").toRenderColor(Re).toArray01();return new a.bz(...Ve)}if(be){const Ve=ke.properties.get("space-color").toRenderColor(Re).toArray01();return new a.bz(...Ve)}}return a.bz.transparent})();if(this.context.clear({color:xe,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&be&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const ke=k[this.currentLayer],Re=i.getLayerSourceCache(ke);if(ke.isSky())continue;const Ve=Re?(ke.is3D()?oe:J)[Re.id]:void 0;this._renderTileClippingMasks(ke,Re,Ve),this.renderLayer(this,Re,ke,Ve)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&be&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const ke=k[this.currentLayer],Re=i.getLayerSourceCache(ke);ke.isSky()&&this.renderLayer(this,Re,ke,Re?J[Re.id]:void 0)}function Ce(ke,Re){let Ve;return Re&&(Ve=(ke.type==="symbol"?ee:ke.is3D()?oe:J)[Re.id]),Ve}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<x.length;){const ke=k[this.currentLayer];if(ke.type==="raster"||ke.type==="raster-particle"){const Re=i.getLayerSourceCache(ke);this.renderLayer(this,Re,ke,Ce(ke,Re))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Se=0;de&&(Se=de.getShadowCastingLayerCount());let Ie=!1,ze=-1;for(let ke=0;ke<x.length;++ke){const Re=k[ke];Re.isHidden(this.transform.zoom)||Re.is3D()&&(ze=ke)}for(O&&ze===-1&&(A=!0);this.currentLayer<x.length;){const ke=k[this.currentLayer],Re=i.getLayerSourceCache(ke);if(ke.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(ke)){if(ke.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(A&&!Ie&&this.terrain&&!this.transform.isOrthographic&&(Ie=!0,this.blitDepth()),O&&ze!==-1&&this.currentLayer===ze+1&&!this.transform.isOrthographic&&this.blitDepth(),ke.is3D()||this.terrain||this._renderTileClippingMasks(ke,Re,Re?q[Re.id]:void 0),this.renderLayer(this,Re,ke,Ce(ke,Re)),!this.terrain&&de&&Se>0&&ke.hasShadowPass()&&--Se==0&&(de.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Ve=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Ve;this.currentLayer++){const nt=k[this.currentLayer];if(!nt.hasLightBeamPass())continue;const dt=i.getLayerSourceCache(nt);this.renderLayer(this,dt,nt,dt?J[dt.id]:void 0)}this.currentLayer=Ve,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Ve=this.currentLayer;this.depthOcclusion=!0;for(const nt of this.layersWithOcclusionOpacity){this.currentLayer=nt;const dt=k[this.currentLayer],rt=i.getLayerSourceCache(dt),xt=rt?J[rt.id]:void 0;dt.is3D()||this.terrain||this._renderTileClippingMasks(dt,rt,rt?q[rt.id]:void 0),this.renderLayer(this,rt,dt,xt)}this.depthOcclusion=!1,this.currentLayer=Ve,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ke=null;k.forEach(Re=>{const Ve=i.getLayerSourceCache(Re);Ve&&!Re.isHidden(this.transform.zoom)&&Ve.getVisibleCoordinates().length&&(!ke||ke.getSource().maxzoom<Ve.getSource().maxzoom)&&(ke=Ve)}),ke&&this.options.showTileBoundaries&&Os.debug(this,ke,ke.getVisibleCoordinates(),a.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Os.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(ke){const Re=ke.transform.padding;bn(ke,ke.transform.height-(Re.top||0),3,l8),bn(ke,Re.bottom||0,3,x1),He(ke,Re.left||0,3,b1),He(ke,ke.transform.width-(Re.right||0),3,Et);const Ve=ke.transform.centerPoint;(function(nt,dt,rt,xt){Zc(nt,dt-1,rt-10,2,20,xt),Zc(nt,dt-10,rt-1,20,2,xt)})(ke,Ve.x,ke.transform.height-Ve.y,Xt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),U||(this.conflationActive=!1)}prepareLayer(i){this.gpuTimingStart(i);const{unsupportedLayers:l}=this.transform.projection,p=!l||!l.includes(i.type);if(U7[i.type]&&(p||this.terrain&&i.type==="custom")){const _=this.style.getLayerSourceCache(i);U7[i.type](i,_,this)}this.gpuTimingEnd()}renderLayer(i,l,p,_){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="sky"||p.type==="custom"||p.type==="model"||p.type==="raster"||p.type==="raster-particle"||_&&_.length)&&(this.id=p.id,this.gpuTimingStart(p),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(p.type)&&(!i.terrain||p.type!=="custom")||p.type==="clip"||Os[p.type](i,l,p,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery,p=this.context.gl;let _=this.gpuTimers[i.id];_||(_=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:p.createQuery()}),_.calls++,p.beginQuery(l.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,l=this.context.gl,p=l.createQuery();this.deferredRenderGpuTimeQueries.push(p),l.beginQuery(i.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const l={};for(const p in i){const _=i[p],x=this.context.extTimerQuery,A=x.getQueryParameter(_.query,this.context.gl.QUERY_RESULT)/1e6;x.deleteQueryEXT(_.query),l[p]=A}return l}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery,p=this.context.gl;let _=0;for(const x of i)_+=l.getQueryParameter(x,p.QUERY_RESULT)/1e6,l.deleteQueryEXT(x);return _}translatePosMatrix(i,l,p,_,x){if(!p[0]&&!p[1])return i;const A=x?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(A){const z=Math.sin(A),F=Math.cos(A);p=[p[0]*F-p[1]*z,p[0]*z+p[1]*F]}const O=[x?p[0]:a.ak(l,p[0],this.transform.zoom),x?p[1]:a.ak(l,p[1],this.transform.zoom),0],k=new Float32Array(16);return a.a6.mat4.translate(k,i,O),k}saveTileTexture(i){const l=i.size[0],p=this._tileTextures[l];p?p.push(i):this._tileTextures[l]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(i,l,p){const _=p===void 0?this.terrain&&this.terrain.renderingToTexture:p,x=[];return this.style&&this.style.enable3dLights()&&(i==="globeRaster"||i==="terrainRaster"?(x.push("LIGHTING_3D_MODE"),x.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):_||x.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||x.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?x.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):x.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(x.push("TERRAIN"),this.linearFloatFilteringSupported()&&x.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&x.push("GLOBE"),!this._fogVisible||_||l!==void 0&&!l||x.push("FOG","FOG_DITHERING"),_&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}getOrCreateProgram(i,l){this.cache=this.cache||{};const p=l&&l.defines||[],_=l&&l.config,x=this.currentGlobalDefines(i,l&&l.overrideFog,l&&l.overrideRtt).concat(p),A=Ms.cacheKey(Es[i],i,x,_);return this.cache[A]||(this.cache[A]=new Ms(this.context,i,Es[i],_,cf[i],x)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,l){if(this.style.enable3dLights()){const p=this.style.directionalLight,_=this.style.ambientLight;if(p&&_){const x=((A,O,k)=>{const z=A.properties.get("direction"),F=A.properties.get("color").toRenderColor(k.getLut(A.scope)).toArray01(),U=A.properties.get("intensity"),V=O.properties.get("color").toRenderColor(k.getLut(O.scope)).toArray01(),q=O.properties.get("intensity"),J=[z.x,z.y,z.z],ee=a.cH(V,q),re=a.cH(F,U);return{u_lighting_ambient_color:ee,u_lighting_directional_dir:J,u_lighting_directional_color:re,u_ground_radiance:p3(J,re,ee)}})(p,_,this.style);l.setLightsUniformValues(i,x)}}}uploadCommonUniforms(i,l,p,_,x){if(this.uploadCommonLightUniforms(i,l),this.terrain&&this.terrain.renderingToTexture)return;const A=this.style.fog;if(A){const O=A.getOpacity(this.transform.pitch),k=((z,F,U,V,q,J,ee,re,oe,me,ye,de)=>{const be=z.transform,xe=F.properties.get("color").toRenderColor(z.style.getLut(F.scope)).toArray01();xe[3]=V;const Ce=z.frameCounter/1e3%1,[Se,Ie]=F.properties.get("vertical-range");return{u_fog_matrix:U?be.calculateFogTileMatrix(U):de||z.identityMat,u_fog_range:F.getFovAdjustedRange(be._fov),u_fog_color:xe,u_fog_horizon_blend:F.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Se,Ie),Ie],u_fog_temporal_offset:Ce,u_frustum_tl:q,u_frustum_tr:J,u_frustum_br:ee,u_frustum_bl:re,u_globe_pos:oe,u_globe_radius:me,u_viewport:ye,u_globe_transition:a.a9(be.zoom),u_is_globe:+(be.projection.name==="globe")}})(this,A,p,O,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.q.devicePixelRatio,this.transform.height*a.q.devicePixelRatio],_);l.setFogUniformValues(i,k)}x&&l.setCutoffUniformValues(i,x.uniformValues)}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,l=i.createTexture();return i.bindTexture(i.TEXTURE_2D,l),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,l=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const _ of p)l[_.key]=i[_.key]||new xa(_,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(i,l){return!(!i.is3D()||i.type!=="clip"&&(i.minzoom&&i.minzoom>this.transform.zoom||(this.style._clipLayerPresent||i.sourceLayer!=="building")&&(!l||l.type!=="batched-model")))}isTileAffectedByFog(i){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let l=this._cachedTileFogOpacities[i.key];return l||(this._cachedTileFogOpacities[i.key]=l=this.style.fog.getOpacityForTile(i)),l[0]>=Bt||l[1]>=Bt}setupDepthForOcclusion(i,l,p){const _=this.context,x=_.gl,A=!!p;var O;p||(p={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),_.activeTexture.set(x.TEXTURE3),i&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),p.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],p.u_depth_range_unpack=[2/((O=this.depthRangeFor3D)[1]-O[0]),-1-2*O[0]/(O[1]-O[0])],p.u_occluder_half_size=.5*this.occlusionParams.occluderSize,p.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),_.activeTexture.set(x.TEXTURE0),A||l.setTerrainUniformValues(_,p)}}function es(d,i){let l=!1,p=null;const _=()=>{p=null,l&&(d(),p=setTimeout(_,i),l=!1)};return()=>(l=!0,p||_(),p)}class Rs{constructor(i){this._hashName=i&&encodeURIComponent(i),a.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=es(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const l=ts(i);if(this._hashName){const p=this._hashName;let _=!1;const x=location.hash.slice(1).split("&").map(A=>{const O=A.split("=")[0];return O===p?(_=!0,`${O}=${l}`):A}).filter(A=>A);return _||x.push(`${p}=${l}`),`#${x.join("&")}`}return`#${l}`}_getCurrentHash(){const i=location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(l=p)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(p=>isNaN(p))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(l[3]||0):i.getBearing();return i.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ts(d,i){const l=d.getCenter(),p=Math.round(100*d.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,_),A=Math.round(l.lng*x)/x,O=Math.round(l.lat*x)/x,k=d.getBearing(),z=d.getPitch();let F=i?`/${A}/${O}/${p}`:`${p}/${O}/${A}`;return(k||z)&&(F+="/"+Math.round(10*k)/10),z&&(F+=`/${Math.round(z)}`),F}const ul={linearity:.3,easing:a.dp(0,0,.3,1)},V7=a.l({deceleration:2500,maxSpeed:1400},ul),I3=a.l({deceleration:20,maxSpeed:1400},ul),O3=a.l({deceleration:1e3,maxSpeed:360},ul),R3=a.l({deceleration:1e3,maxSpeed:90},ul);class Ds{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.q.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=a.q.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(l.pan.mag()){const x=hl(l.pan.mag(),p,a.l({},V7,i||{}));_.offset=l.pan.mult(x.amount/l.pan.mag()),_.center=this._map.transform.center,T1(_,x)}if(l.zoom){const x=hl(l.zoom,p,I3);_.zoom=this._map.transform.zoom+x.amount,T1(_,x)}if(l.bearing){const x=hl(l.bearing,p,O3);_.bearing=this._map.transform.bearing+a.ap(x.amount,-179,179),T1(_,x)}if(l.pitch){const x=hl(l.pitch,p,R3);_.pitch=this._map.transform.pitch+x.amount,T1(_,x)}if(_.zoom||_.bearing){const x=l.pinchAround===void 0?l.around:l.pinchAround;_.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function T1(d,i){(!d.duration||d.duration<i.duration)&&(d.duration=i.duration,d.easing=i.easing)}function hl(d,i,l){const{maxSpeed:p,linearity:_,deceleration:x}=l,A=a.ap(d*_/(i/1e3),-p,p),O=Math.abs(A)/(x*_);return{easing:l.easing,duration:1e3*O,amount:A*(O/2)}}class Yi extends a.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,p,_={}){const x=Ze(l.getCanvasContainer(),p),A=l.unproject(x);super(i,a.l({point:x,lngLat:A,originalEvent:p},_)),this._defaultPrevented=!1,this.target=l}}class S1 extends a.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,p){const _=i==="touchend"?p.changedTouches:p.touches,x=st(l.getCanvasContainer(),_),A=x.map(k=>l.unproject(k)),O=x.reduce((k,z,F,U)=>k.add(z.div(U.length)),new a.P(0,0));super(i,{points:x,point:O,lngLats:A,lngLat:l.unproject(O),originalEvent:p}),this._defaultPrevented=!1}}class Ti extends a.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l){super("wheel",{originalEvent:l}),this._defaultPrevented=!1}}class D3{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new Ti(this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new Yi(i.type,this._map,i))}mouseup(i){this._map.fire(new Yi(i.type,this._map,i))}preclick(i){const l=a.l({},i);l.type="preclick",this._map.fire(new Yi(l.type,this._map,l))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Yi(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Yi(i.type,this._map,i))}mouseover(i){this._map.fire(new Yi(i.type,this._map,i))}mouseout(i){this._map.fire(new Yi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new S1(i.type,this._map,i))}touchmove(i){this._map.fire(new S1(i.type,this._map,i))}touchend(i){this._map.fire(new S1(i.type,this._map,i))}touchcancel(i){this._map.fire(new S1(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class k3{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Yi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Yi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class E1{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(le(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const p=l,_=this._startPos,x=this._lastPos;if(!_||!x||x.equals(p)||!this._box&&p.dist(_)<this._clickTolerance)return;this._lastPos=p,this._box||(this._box=ne("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const A=Math.min(_.x,p.x),O=Math.max(_.x,p.x),k=Math.min(_.y,p.y),z=Math.max(_.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${A}px,${k}px)`,this._box.style.width=O-A+"px",this._box.style.height=z-k+"px")})}mouseupWindow(i,l){if(!this._active)return;const p=this._startPos,_=l;if(p&&i.button===0){if(this.reset(),Ee(),p.x!==_.x||p.y!==_.y)return this._map.fire(new a.x("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),fe(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new a.x(i,{originalEvent:l}))}}function rs(d,i){const l={};for(let p=0;p<d.length;p++)l[d[p].identifier]=i[p];return l}class L3{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const x=new a.P(0,0);for(const A of _)x._add(A);return x.div(_.length)}(l),this.touches=rs(p,l)))}touchmove(i,l,p){if(this.aborted||!this.centroid)return;const _=rs(p,l);for(const x in this.touches){const A=_[x];(!A||A.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,l,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Jc{constructor(i){this.singleTap=new L3(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,l,p){this.singleTap.touchstart(i,l,p)}touchmove(i,l,p){this.singleTap.touchmove(i,l,p)}touchend(i,l,p){const _=this.singleTap.touchend(i,l,p);if(_){const x=i.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(x&&A||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class z3{constructor(){this._zoomIn=new Jc({numTouches:1,numTaps:2}),this._zoomOut=new Jc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,p){this._zoomIn.touchstart(i,l,p),this._zoomOut.touchstart(i,l,p)}touchmove(i,l,p){this._zoomIn.touchmove(i,l,p),this._zoomOut.touchmove(i,l,p)}touchend(i,l,p){const _=this._zoomIn.touchend(i,l,p),x=this._zoomOut.touchend(i,l,p);return _?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()+1,around:A.unproject(_)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()-1,around:A.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Qc={0:1,2:2};class eu{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const p=We(i);this._correctButton(i,p)&&(this._lastPoint=l,this._eventButton=p)}mousemoveWindow(i,l){const p=this._lastPoint;if(p){if(i.preventDefault(),this._eventButton!=null&&function(_,x){const A=Qc[x];return _.buttons===void 0||(_.buttons&A)!==A}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(p,l)}}mouseupWindow(i){this._lastPoint&&We(i)===this._eventButton&&(this._moved&&Ee(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class G7 extends eu{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class q7 extends eu{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=.8*(l.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class W7 extends eu{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=-.5*(l.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class yf{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),a.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(i,l,p){return this._calculateTransform(i,l,p)}touchmove(i,l,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(p.length===1&&!a.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,l,p)}}touchend(i,l,p){this._calculateTransform(i,l,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,p){p.length>0&&(this._active=!0);const _=rs(p,l),x=new a.P(0,0),A=new a.P(0,0);let O=0;for(const z in _){const F=_[z],U=this._touches[z];U&&(x._add(F),A._add(F.sub(U)),O++,_[z]=F)}if(this._touches=_,O<this._minTouches||!A.mag())return;const k=A.div(O);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(O),panDelta:k}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ne("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class H7{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,l,p){return{}}touchstart(i,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,p){const _=this._firstTwoTouches;if(!_)return;i.preventDefault();const[x,A]=_,O=tu(p,l,x),k=tu(p,l,A);if(!O||!k)return;const z=this._aroundCenter?null:O.add(k).div(2);return this._move([O,k],z,i)}touchend(i,l,p){if(!this._firstTwoTouches)return;const[_,x]=this._firstTwoTouches,A=tu(p,l,_),O=tu(p,l,x);A&&O||(this._active&&Ee(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function tu(d,i,l){for(let p=0;p<d.length;p++)if(d[p].identifier===l)return i[p]}function B3(d,i){return Math.log(d/i)/Math.LN2}class _f extends H7{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(B3(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:B3(this._distance,p),pinchAround:l}}}function F3(d,i){return 180*d.angleWith(i)/Math.PI}class vf extends H7{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const p=this._vector;if(this._vector=i[0].sub(i[1]),p&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:F3(this._vector,p),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,p=this._startVector;if(!p)return!1;const _=F3(i,p);return Math.abs(_)<l}}function Z7(d){return Math.abs(d.y)>Math.abs(d.x)}class xf extends H7{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Z7(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,p){const _=this._lastPoints;if(!_)return;const x=i[0].sub(_[0]),A=i[1].sub(_[1]);return this._map._cooperativeGestures&&!a.dq()&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(x,A,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(x.y+A.y)/2*-.5})}gestureBeginsVertically(i,l,p){if(this._valid!==void 0)return this._valid;const _=i.mag()>=2,x=l.mag()>=2;if(!_&&!x)return;if(!_||!x)return this._firstMove==null&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=i.y>0==l.y>0;return Z7(i)&&Z7(l)&&A}}const bf={panStep:100,bearingStep:15,pitchStep:10};class wf{constructor(){const i=bf;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,p=0,_=0,x=0,A=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?_=1:(i.preventDefault(),A=-1);break;case 40:i.shiftKey?_=-1:(i.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:O=>{const k=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Af,zoom:l?Math.round(k)+l*(i.shiftKey?2:1):k,bearing:O.getBearing()+p*this._bearingStep,pitch:O.getPitch()+_*this._pitchStep,offset:[-x*this._panStep,-A*this._panStep],center:O.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Af(d){return d*(2-d)}const N3=4.000244140625,d8=1/450;class p8{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=d8,a.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||a.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=a.q.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%N3==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=l,this._timeout=window.setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(_*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=Ze(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>N3?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&F!==0&&(F=1/F);const U=l(),V=Math.pow(2,U),q=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):V;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(q*F))),this._type==="wheel"&&(this._startZoom=U,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:l(),_=this._startZoom,x=this._easing;let A,O=!1;if(this._type==="wheel"&&_&&x){const z=Math.min((a.q.now()-this._lastWheelEventTime)/200,1),F=x(z);A=a.aa(_,p,F),z<1?this._frameId||(this._frameId=!0):O=!0}else A=p,O=!0;this._active=!0,O&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let k=A-l();return k*this._lastDelta<0&&(k=0),{noInertia:!0,needsRenderFrame:!O,zoomDelta:k,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=a.dr;if(this._prevEase){const p=this._prevEase,_=(a.q.now()-p.start)/p.duration,x=p.easing(_+.01)-p.easing(_),A=.27/Math.sqrt(x*x+1e-4)*.01,O=Math.sqrt(.0729-A*A);l=a.dp(A,O,.25,1)}return this._prevEase={start:a.q.now(),duration:i,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ne("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Rn{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tf{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,l){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class m8{constructor(){this._tap=new Jc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,l,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=l[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,l,p))}touchmove(i,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=l[0],x=_.y-this._swipePoint.y;return this._swipePoint=_,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,l,p)}touchend(i,l,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,l,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class g8{constructor(i,l,p){this._el=i,this._mousePan=l,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ru{constructor(i,l,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Sf{constructor(i,l,p,_){this._el=i,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const P1=d=>d.zoom||d.drag||d.pitch||d.rotate;class X7 extends a.x{}class ns{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,l){const p=a.a6.vec3.sub([],l,i);this.radius=a.a6.vec3.length(p[2]<0?a.a6.vec3.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){a.a6.vec3.div(i,i,this.constants),a.a6.vec3.normalize(i,i),a.a6.vec3.mul(i,i,this.constants);const l=a.a6.vec3.scale([],i,this.radius);if(l[2]>0){const p=a.a6.vec3.scale([],[0,0,1],a.a6.vec3.dot(l,[0,0,1])),_=a.a6.vec3.scale([],a.a6.vec3.normalize([],[l[0],l[1],0]),this.radius),x=a.a6.vec3.add([],l,a.a6.vec3.scale([],a.a6.vec3.sub([],a.a6.vec3.add([],_,p),l),2));l[0]=x[0],l[1]=x[1]}return l}}function fl(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}class ji{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ds(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ns,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),a.aJ(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,x,A]of this._listeners){const O=_===document?this.handleWindowEvent:this.handleEvent;_.addEventListener(x,O,A)}}destroy(){for(const[i,l,p]of this._listeners){const _=i===document?this.handleWindowEvent:this.handleEvent;i.removeEventListener(l,_,p)}}_addDefaultHandlers(i){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new D3(l,i));const _=l.boxZoom=new E1(l,i);this._add("boxZoom",_);const x=new z3,A=new Tf;l.doubleClickZoom=new Rn(A,x),this._add("tapZoom",x),this._add("clickZoom",A);const O=new m8;this._add("tapDragZoom",O);const k=l.touchPitch=new xf(l);this._add("touchPitch",k);const z=new q7(i),F=new W7(i);l.dragRotate=new ru(i,z,F),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);const U=new G7(i),V=new yf(l,i);l.dragPan=new g8(p,U,V),this._add("mousePan",U),this._add("touchPan",V,["touchZoom","touchRotate"]);const q=new vf,J=new _f;l.touchZoomRotate=new Sf(p,J,q,O),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),this._add("blockableMapEvent",new k3(l));const ee=l.scrollZoom=new p8(l,this);this._add("scrollZoom",ee,["mousePan"]);const re=l.keyboard=new wf;this._add("keyboard",re);for(const oe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[oe]&&l[oe].enable(i[oe])}_add(i,l,p){this._handlers.push({handlerName:i,handler:l,allowed:p}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!P1(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,l,p){for(const _ in i)if(_!==p&&(!l||l.indexOf(_)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const p of i)this._el.contains(p.target)&&l.push(p);return l}handleEvent(i,l){this._updatingCamera=!0;const p=i.type==="renderFrame",_=p?void 0:i,x={needsRenderFrame:!1},A={},O={},k=i.touches?this._getMapTouches(i.touches):void 0,z=k?st(this._el,k):p?void 0:Ze(this._el,i);for(const{handlerName:V,handler:q,allowed:J}of this._handlers){if(!q.isEnabled())continue;let ee;this._blockedByActive(O,J,V)?q.reset():q[l||i.type]&&(ee=q[l||i.type](i,z,k),this.mergeHandlerResult(x,A,ee,V,_),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||q.isActive())&&(O[V]=q)}const F={};for(const V in this._previousActiveHandlers)O[V]||(F[V]=_);this._previousActiveHandlers=O,(Object.keys(F).length||fl(x))&&(this._changes.push([x,A,F]),this._triggerRenderFrame()),(Object.keys(O).length||fl(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=x;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))}mergeHandlerResult(i,l,p,_,x){if(!p)return;a.l(i,p);const A={handlerName:_,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(l.zoom=A),p.panDelta!==void 0&&(l.drag=A),p.pitchDelta!==void 0&&(l.pitch=A),p.bearingDelta!==void 0&&(l.rotate=A)}_applyChanges(){const i={},l={},p={};for(const[_,x,A]of this._changes)_.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(_.panDelta)),_.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(i.around=_.around),_.aroundCoord!==void 0&&(i.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(i.pinchAround=_.pinchAround),_.noInertia&&(i.noInertia=_.noInertia),a.l(l,x),a.l(p,A);this._updateMapTransform(i,l,p),this._changes=[]}_updateMapTransform(i,l,p){const _=this._map,x=_.transform,A=me=>[me.x,me.y,me.z];if((me=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!fl(i)){const me=x.zoom;x.cameraElevationReference="sea",this._originalZoom!=null&&x._orthographicProjectionAtLowPitch&&x.projection.name!=="globe"&&x.pitch===0?(x.cameraElevationReference="ground",x.zoom=this._originalZoom):(x.recenterOnTerrain(),x.cameraElevationReference="ground"),me!==x.zoom&&this._map._update(!0)}if(x._isCameraConstrained&&_._stop(!0),!fl(i))return void this._fireEvents(l,p,!0);let{panDelta:O,zoomDelta:k,bearingDelta:z,pitchDelta:F,around:U,aroundCoord:V,pinchAround:q}=i;x._isCameraConstrained&&(k>0&&(k=0),x._isCameraConstrained=!1),q!==void 0&&(U=q),(k||(me=>l[me]&&!this._eventsInProgress[me])("drag"))&&U&&(this._dragOrigin=A(x.pointCoordinate3D(U)),this._originalZoom=x.zoom,this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",_._stop(!0),U=U||_.transform.centerPoint,z&&(x.bearing+=z),F&&(x.pitch+=F),x._updateCameraState();const J=[0,0,0];if(O)if(x.projection.name==="mercator"){const me=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(U).dir),ye=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(U.sub(O)).dir);J[0]=ye[0]-me[0],J[1]=ye[1]-me[1]}else{const me=x.pointCoordinate(U);if(x.projection.name==="globe"){O=O.rotate(-x.angle);const ye=x._pixelsPerMercatorPixel/x.worldSize;J[0]=-O.x*a.ds(a.aM(me.y))*ye,J[1]=-O.y*a.ds(x.center.lat)*ye}else{const ye=x.pointCoordinate(U.sub(O));me&&ye&&(J[0]=ye.x-me.x,J[1]=ye.y-me.y)}}const ee=x.zoom,re=[0,0,0];if(k){const me=A(V||x.pointCoordinate3D(U)),ye={dir:a.a6.vec3.normalize([],a.a6.vec3.sub([],me,x._camera.position))};if(ye.dir[2]<0){const de=x.zoomDeltaToMovement(me,k);a.a6.vec3.scale(re,ye.dir,de)}}const oe=a.a6.vec3.add(J,J,re);x._translateCameraConstrained(oe),k&&Math.abs(x.zoom-ee)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,p,!0)}_fireEvents(i,l,p){const _=P1(this._eventsInProgress),x=P1(i),A={};for(const F in i){const{originalEvent:U}=i[F];this._eventsInProgress[F]||(A[`${F}start`]=U),this._eventsInProgress[F]=i[F]}!_&&x&&this._fireEvent("movestart",x.originalEvent);for(const F in A)this._fireEvent(F,A[F]);x&&this._fireEvent("move",x.originalEvent);for(const F in i){const{originalEvent:U}=i[F];this._fireEvent(F,U)}const O={};let k;for(const F in this._eventsInProgress){const{handlerName:U,originalEvent:V}=this._eventsInProgress[F];this._handlersById[U].isActive()||(delete this._eventsInProgress[F],k=l[U]||V,O[`${F}end`]=k)}for(const F in O)this._fireEvent(F,O[F]);const z=P1(this._eventsInProgress);if(p&&(_||x)&&!z){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=V=>V!==0&&-this._bearingSnap<V&&V<this._bearingSnap;F?(U(F.bearing||this._map.getBearing())&&(F.bearing=0),this._map.easeTo(F,{originalEvent:k})):(this._map.fire(new a.x("moveend",{originalEvent:k})),U(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new a.x(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new X7("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ta="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class j3 extends a.E{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=l.respectPrefersReducedMotion!==!1,a.aJ(["_renderFrameCallback"],this)}getCenter(){return new a.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,p){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.l({offset:i},l),p)}panTo(i,l,p){return this.easeTo(a.l({center:i},l),p)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,p){return this.easeTo(a.l({zoom:i},l),p)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,p){return this.easeTo(a.l({bearing:i},l),p)}resetNorth(i,l){return this.rotateTo(0,a.l({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(a.l({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=a.as.convert(i);const p=l&&l.bearing||0,_=l&&l.pitch||0,x=i.getNorthWest(),A=i.getSouthEast();return this._cameraForBounds(this.transform,x,A,p,_,l)}_extendPadding(i){const l={top:0,right:0,bottom:0,left:0};return i==null?a.l({},l,this.transform.padding):typeof i=="number"?{top:i,bottom:i,right:i,left:i}:a.l({},l,i)}_extendCameraOptions(i){return(i=a.l({offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=this._extendPadding(i.padding),i}_minimumAABBFrustumDistance(i,l){const p=l.max[0]-l.min[0],_=l.max[1]-l.min[1];return p/_>i.aspect?p/(2*Math.tan(.5*i.fovX)*i.aspect):_/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,l,p,_,x,A){const O=i.clone(),k=this._extendCameraOptions(A);O.bearing=_,O.pitch=x;const z=a.bK.convert(l),F=a.bK.convert(p),U=.5*(z.lat+F.lat),V=.5*(z.lng+F.lng),q=a.dt(U,V),J=a.a6.vec3.normalize([],q),ee=a.a6.vec3.normalize([],a.a6.vec3.cross([],J,[0,1,0])),re=a.a6.vec3.cross([],ee,J),oe=[ee[0],ee[1],ee[2],0,re[0],re[1],re[2],0,J[0],J[1],J[2],0,0,0,0,1],me=[q,a.dt(z.lat,z.lng),a.dt(F.lat,z.lng),a.dt(F.lat,F.lng),a.dt(z.lat,F.lng),a.dt(U,z.lng),a.dt(U,F.lng),a.dt(z.lat,V),a.dt(F.lat,V)];let ye=a.c9.fromPoints(me.map(at=>[a.a6.vec3.dot(ee,at),a.a6.vec3.dot(re,at),a.a6.vec3.dot(J,at)]));const de=a.a6.vec3.transformMat4([],ye.center,oe);a.a6.vec3.squaredLength(de)===0&&a.a6.vec3.set(de,0,0,1),a.a6.vec3.normalize(de,de),a.a6.vec3.scale(de,de,a.aq),O.center=a.du(de);const be=O.getWorldToCameraMatrix(),xe=a.a6.mat4.invert(new Float64Array(16),be);ye=a.c9.applyTransform(ye,a.a6.mat4.multiply([],be,oe));const Ce=this._extendAABB(ye,O,k,_);if(!Ce)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ye=Ce,a.a6.vec3.transformMat4(de,de,be);const Se=.5*(ye.max[2]-ye.min[2]),Ie=this._minimumAABBFrustumDistance(O,ye),ze=a.a6.vec3.scale([],[0,0,1],Se),ke=a.a6.vec3.add(ze,de,ze),Re=Ie+(O.pitch===0?0:a.a6.vec3.distance(de,ke)),Ve=O.globeCenterInViewSpace,nt=a.a6.vec3.sub([],de,[Ve[0],Ve[1],Ve[2]]);a.a6.vec3.normalize(nt,nt),a.a6.vec3.scale(nt,nt,Re);const dt=a.a6.vec3.add([],de,nt);a.a6.vec3.transformMat4(dt,dt,xe);const rt=a.dw/a.aq,xt=a.a6.vec3.length(dt),Ge=a.bD(Math.max(xt*rt-a.dw,Number.EPSILON),0),ct=Math.min(O.zoomFromMercatorZAdjusted(Ge),k.maxZoom);return ct>.5*(a.c2+a.bU)?(O.setProjection({name:"mercator"}),O.zoom=ct,this._cameraForBounds(O,l,p,_,x,A)):{center:O.center,zoom:ct,bearing:_,pitch:x}}_extendAABB(i,l,p,_){const x=.5*((p.padding.left||0)+(p.padding.right||0)),A=.5*((p.padding.top||0)+(p.padding.bottom||0)),O=A,k=x,z=x,F=A,U=l.width-(k+z),V=l.height-(O+F),q=a.a6.vec3.sub([],i.max,i.min),J=Math.min(U/q[0],V/q[1]),ee=Math.min(l.scaleZoom(l.scale*J),p.maxZoom);if(isNaN(ee))return null;const re=l.scale/l.zoomScale(ee),oe=new a.c9([i.min[0]-k*re,i.min[1]-F*re,i.min[2]],[i.max[0]+z*re,i.max[1]+O*re,i.max[2]]),me=(typeof p.offset.x=="number"&&typeof p.offset.y=="number"?new a.P(p.offset.x,p.offset.y):a.P.convert(p.offset)).rotate(-a.bB(_));return oe.center[0]-=me.x*re,oe.center[1]+=me.y*re,oe}queryTerrainElevation(i,l){const p=this.transform.elevation;return p?(l=a.l({},{exaggerated:!0},l),p.getAtPoint(a.a5.fromLngLat(i),null,l.exaggerated)):null}_cameraForBounds(i,l,p,_,x,A){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,l,p,_,x,A);const O=i.clone(),k=this._extendCameraOptions(A);O.bearing=_,O.pitch=x;const z=a.bK.convert(l),F=a.bK.convert(p),U=new a.bK(z.lng,F.lat),V=new a.bK(F.lng,z.lat),q=O.project(z),J=O.project(F),ee=this.queryTerrainElevation(z),re=this.queryTerrainElevation(F),oe=this.queryTerrainElevation(U),me=this.queryTerrainElevation(V),ye=[[q.x,q.y,Math.min(ee||0,re||0,oe||0,me||0)],[J.x,J.y,Math.max(ee||0,re||0,oe||0,me||0)]];let de=a.c9.fromPoints(ye);const be=O.getWorldToCameraMatrix(),xe=a.a6.mat4.invert(new Float64Array(16),be);de=a.c9.applyTransform(de,be);const Ce=this._extendAABB(de,O,k,_);if(!Ce)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");de=Ce;const Se=.5*a.a6.vec3.sub([],de.max,de.min)[2],Ie=this._minimumAABBFrustumDistance(O,de),ze=[0,0,1,0];a.a6.vec4.transformMat4(ze,ze,be),a.a6.vec4.normalize(ze,ze);const ke=a.a6.vec3.scale([],ze,Ie+Se),Re=a.a6.vec3.add([],de.center,ke);a.a6.vec3.transformMat4(de.center,de.center,xe),a.a6.vec3.transformMat4(Re,Re,xe);const Ve=O.unproject(new a.P(de.center[0],de.center[1])),nt=a.dv(O.projection,Ve),dt=Math.pow(2,nt),rt=Math.min(O._zoomFromMercatorZ(Re[2]*O.pixelsPerMeter*dt/O.worldSize),k.maxZoom);return O.mercatorFromTransition&&rt<.5*(a.c2+a.bU)?(O.setProjection({name:"globe"}),O.zoom=rt,this._cameraForBounds(O,l,p,_,x,A)):{center:Ve,zoom:rt,bearing:_,pitch:x}}fitBounds(i,l,p){const _=this.cameraForBounds(i,l);return this._fitInternal(_,l,p)}fitScreenCoordinates(i,l,p,_,x){const A=a.P.convert(i),O=a.P.convert(l),k=new a.P(Math.min(A.x,O.x),Math.min(A.y,O.y)),z=new a.P(Math.max(A.x,O.x),Math.max(A.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(A,O))return this;const F=this.transform.pointLocation3D(k),U=this.transform.pointLocation3D(z),V=this.transform.pointLocation3D(new a.P(k.x,z.y)),q=this.transform.pointLocation3D(new a.P(z.x,k.y)),J=[Math.min(F.lng,U.lng,V.lng,q.lng),Math.min(F.lat,U.lat,V.lat,q.lat)],ee=[Math.max(F.lng,U.lng,V.lng,q.lng),Math.max(F.lat,U.lat,V.lat,q.lat)],re=_&&_.pitch?_.pitch:this.getPitch(),oe=this._cameraForBounds(this.transform,J,ee,p,re,_);return this._fitInternal(oe,_,x)}_fitInternal(i,l,p){return i?(l=a.l(i,l)).linear?this.easeTo(l,p):this.flyTo(l,p):this}jumpTo(i,l){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let _=!1,x=!1,A=!1;"zoom"in i&&p.zoom!==+i.zoom&&(_=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=a.bK.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(A=!0,p.pitch=+i.pitch);const O=typeof i.padding=="number"?this._extendPadding(i.padding):i.padding;if(i.padding!=null&&!p.isPaddingEqual(O))if(i.retainPadding===!1){const k=p.clone();k.padding=O,p.setLocationAtPoint(p.center,k.centerPoint)}else p.padding=O;return i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new a.x("movestart",l)).fire(new a.x("move",l)),_&&this.fire(new a.x("zoomstart",l)).fire(new a.x("zoom",l)).fire(new a.x("zoomend",l)),x&&this.fire(new a.x("rotatestart",l)).fire(new a.x("rotate",l)).fire(new a.x("rotateend",l)),A&&this.fire(new a.x("pitchstart",l)).fire(new a.x("pitch",l)).fire(new a.x("pitchend",l)),this.fire(new a.x("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.w(Ta),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,l){const p=this.transform;if(!p.projection.supportsFreeCamera)return a.w(Ta),this;this.stop();const _=p.zoom,x=p.pitch,A=p.bearing;p.setFreeCameraOptions(i);const O=_!==p.zoom,k=x!==p.pitch,z=A!==p.bearing;return this.fire(new a.x("movestart",l)).fire(new a.x("move",l)),O&&this.fire(new a.x("zoomstart",l)).fire(new a.x("zoom",l)).fire(new a.x("zoomend",l)),z&&this.fire(new a.x("rotatestart",l)).fire(new a.x("rotate",l)).fire(new a.x("rotateend",l)),k&&this.fire(new a.x("pitchstart",l)).fire(new a.x("pitch",l)).fire(new a.x("pitchend",l)),this.fire(new a.x("moveend",l)),this}easeTo(i,l){this._stop(!1,i.easeId),((i=a.l({offset:[0,0],duration:500,easing:a.dr},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const p=this.transform,_=this.getZoom(),x=this.getBearing(),A=this.getPitch(),O=this.getPadding(),k="zoom"in i?+i.zoom:_,z="bearing"in i?this._normalizeBearing(i.bearing,x):x,F="pitch"in i?+i.pitch:A,U=this._extendPadding(i.padding),V=a.P.convert(i.offset);let q,J,ee;if(p.projection.name==="globe"){const ze=a.a5.fromLngLat(p.center),ke=V.rotate(-p.angle);ze.x+=ke.x/p.worldSize,ze.y+=ke.y/p.worldSize;const Re=ze.toLngLat(),Ve=a.bK.convert(i.center||Re);this._normalizeCenter(Ve),q=p.centerPoint.add(ke),J=new a.P(ze.x,ze.y).mult(p.worldSize),ee=new a.P(a.am(Ve.lng),a.at(Ve.lat)).mult(p.worldSize).sub(J)}else{q=p.centerPoint.add(V);const ze=p.pointLocation(q),ke=a.bK.convert(i.center||ze);this._normalizeCenter(ke),J=p.project(ze),ee=p.project(ke).sub(J)}const re=p.zoomScale(k-_);let oe,me;i.around&&(oe=a.bK.convert(i.around),me=p.locationPoint(oe));const ye=this._zooming||k!==_,de=this._rotating||x!==z,be=this._pitching||F!==A,xe=!p.isPaddingEqual(U),Ce=i.retainPadding===!1?p.clone():p,Se=ze=>ke=>{if(ye&&(ze.zoom=a.aa(_,k,ke)),de&&(ze.bearing=a.aa(x,z,ke)),be&&(ze.pitch=a.aa(A,F,ke)),xe&&(Ce.interpolatePadding(O,U,ke),q=Ce.centerPoint.add(V)),oe)ze.setLocationAtPoint(oe,me);else{const Re=ze.zoomScale(ze.zoom-_),Ve=k>_?Math.min(2,re):Math.max(.5,re),nt=Math.pow(Ve,1-ke),dt=ze.unproject(J.add(ee.mult(ke*nt)).mult(Re));ze.setLocationAtPoint(ze.renderWorldCopies?dt.wrap():dt,q)}return i.preloadOnly||this._fireMoveEvents(l),ze};if(i.preloadOnly){const ze=this._emulate(Se,i.duration,p);return this._preloadTiles(ze),this}const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=de,this._pitching=be,this._padding=xe,this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,Ie),this._ease(Se(p),ze=>{p.cameraElevationReference==="sea"&&p.recenterOnTerrain(),this._afterEase(l,ze)},i),this}_prepareEase(i,l,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),l||p.moving||this.fire(new a.x("movestart",i)),this._zooming&&!p.zooming&&this.fire(new a.x("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new a.x("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new a.x("pitchstart",i))}_fireMoveEvents(i){this.fire(new a.x("move",i)),this._zooming&&this.fire(new a.x("zoom",i)),this._rotating&&this.fire(new a.x("rotate",i)),this._pitching&&this.fire(new a.x("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,_=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new a.x("zoomend",i)),_&&this.fire(new a.x("rotateend",i)),x&&this.fire(new a.x("pitchend",i)),this.fire(new a.x("moveend",i))}flyTo(i,l){if(this._prefersReducedMotion(i)){const at=a.ar(i,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(at,l)}this.stop(),i=a.l({offset:[0,0],speed:1.2,curve:1.42,easing:a.dr},i);const p=this.transform,_=this.getZoom(),x=this.getBearing(),A=this.getPitch(),O=this.getPadding(),k="zoom"in i?a.ap(+i.zoom,p.minZoom,p.maxZoom):_,z="bearing"in i?this._normalizeBearing(i.bearing,x):x,F="pitch"in i?+i.pitch:A,U=this._extendPadding(i.padding),V=p.zoomScale(k-_),q=a.P.convert(i.offset);let J=p.centerPoint.add(q);const ee=p.pointLocation(J),re=a.bK.convert(i.center||ee);this._normalizeCenter(re);const oe=p.project(ee),me=p.project(re).sub(oe);let ye=i.curve;const de=Math.max(p.width,p.height),be=de/V,xe=me.mag();if("minZoom"in i){const at=a.ap(Math.min(i.minZoom,_,k),p.minZoom,p.maxZoom),wt=de/p.zoomScale(at-_);ye=Math.sqrt(wt/xe*2)}const Ce=ye*ye;function Se(at){const wt=(be*be-de*de+(at?-1:1)*Ce*Ce*xe*xe)/(2*(at?be:de)*Ce*xe);return Math.log(Math.sqrt(wt*wt+1)-wt)}function Ie(at){return(Math.exp(at)-Math.exp(-at))/2}function ze(at){return(Math.exp(at)+Math.exp(-at))/2}const ke=Se(0);let Re=function(at){return ze(ke)/ze(ke+ye*at)},Ve=function(at){return de*((ze(ke)*(Ie(wt=ke+ye*at)/ze(wt))-Ie(ke))/Ce)/xe;var wt},nt=(Se(1)-ke)/ye;if(Math.abs(xe)<1e-6||!isFinite(nt)){if(Math.abs(de-be)<1e-6)return this.easeTo(i,l);const at=be<de?-1:1;nt=Math.abs(Math.log(be/de))/ye,Ve=function(){return 0},Re=function(wt){return Math.exp(at*ye*wt)}}i.duration="duration"in i?+i.duration:1e3*nt/("screenSpeed"in i?+i.screenSpeed/ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const dt=x!==z,rt=F!==A,xt=!p.isPaddingEqual(U),Ge=i.retainPadding===!1?p.clone():p,ct=at=>wt=>{const Tt=wt*nt,ft=1/Re(Tt);at.zoom=wt===1?k:_+at.scaleZoom(ft),dt&&(at.bearing=a.aa(x,z,wt)),rt&&(at.pitch=a.aa(A,F,wt)),xt&&(Ge.interpolatePadding(O,U,wt),J=Ge.centerPoint.add(q));const gt=wt===1?re:at.unproject(oe.add(me.mult(Ve(Tt))).mult(ft));return at.setLocationAtPoint(at.renderWorldCopies?gt.wrap():gt,J),at._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(l),at};if(i.preloadOnly){const at=this._emulate(ct,i.duration,p);return this._preloadTiles(at),this}return this._zooming=!0,this._rotating=dt,this._pitching=rt,this._padding=xt,this._prepareEase(l,!1),this._ease(ct(p),()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(i){}_cancelRenderFrame(i){}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,l)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,l,p){p.animate===!1||p.duration===0?(i(1),l()):(this._easeStart=a.q.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((a.q.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=a.bA(i,-180,180);const p=Math.abs(i-l);return Math.abs(i-360-l)<p&&(i-=360),Math.abs(i+360-l)<p&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(l.maxBounds||l.projection.name!=="globe"&&!l.renderWorldCopies)return;const p=i.lng-l.center.lng;i.lng+=p>180?-360:p<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&a.q.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,l,p){const _=Math.ceil(15*l/1e3),x=[],A=i(p.clone());for(let O=0;O<=_;O++){const k=A(O/_);x.push(k.clone())}return x}_preloadTiles(i,l){}}class Y7{constructor(i={}){this.options=i,a.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const l=this.options&&this.options.compact,p=i._getUIString("AttributionControl.ToggleAttribution");this._map=i,this._container=ne("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ne("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",p);const _=ne("span","mapboxgl-ctrl-icon",this._compactButton);return _.setAttribute("aria-hidden","true"),_.setAttribute("title",p),this._innerContainer=ne("div","mapboxgl-ctrl-attrib-inner",this._container),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.e.ACCESS_TOKEN}];if(i){const p=l.reduce((_,x,A)=>(x.value&&(_+=`${x.key}=${x.value}${A<l.length-1?"&":""}`),_),"?");i.href=`${a.e.FEEDBACK_URL}/${p}#${ts(this._map,!0)}`,i.rel="noopener nofollow"}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const l=this._map.style._mergedSourceCaches;for(const _ in l){const x=l[_];if(x.used){const A=x.getSource();A.attribution&&i.indexOf(A.attribution)<0&&i.push(A.attribution)}}i.sort((_,x)=>_.length-x.length),i=i.filter((_,x)=>{for(let A=x+1;A<i.length;A++)if(i[A].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class $3{constructor(){a.aJ(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=ne("div","mapboxgl-ctrl");const l=ne("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const l in i){const p=i[l].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class Ef{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const _ of p)if(_.id===i)return void(_.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class nu{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const l=a.cw((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,l,p){this._start=this.getValue(l),this._end=i,this._startTime=l,this._endTime=l+p}}const y8={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class _8{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class U3{constructor(i){this.map=i,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(i,l){if(this.typeById.has(i))throw new Error(`Interaction id "${i}" already exists.`);const{type:p,filter:_}=l;if(_){const A=a.M(_,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(A.result==="error")throw new Error(A.value.map(O=>`${O.key}: ${O.message}`).join(", "));this.filters.set(i,A.value)}const x=this.interactionsByType.get(p)||new Map;x.size===0&&(this.map.on(p,this.handleType),this.interactionsByType.set(p,x)),x.set(i,l),this.typeById.set(i,p)}remove(i){const l=this.typeById.get(i);if(!l)return;this.typeById.delete(i),this.filters.delete(i);const p=this.interactionsByType.get(l);p&&(p.delete(i),p.size===0&&this.map.off(l,this.handleType))}handleType(i){const l=i.features||this.map.queryRenderedFeatures(i.point);if(!l)return;const p=this.interactionsByType.get(i.type),_={zoom:0};for(const[x,A]of p){const O=this.filters.get(x),{handler:k,layers:z}=A;for(const F of l)if((!z||z.includes(F.layer.id))&&(!O||O.evaluate(_,F))&&k({id:x,feature:F,interaction:A})!==!1)break}}}const V3={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},iu={showCompass:!0,showZoom:!0,visualizePitch:!1};class M1{constructor(i,l,p=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new q7({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new W7({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),a.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),le()}move(i,l){const p=this.map,_=this.mouseRotate.mousemoveWindow(i,l),x=_&&_.bearingDelta;if(x&&p.setBearing(p.getBearing()+x),this.mousePitch){const A=this.mousePitch.mousemoveWindow(i,l),O=A&&A.pitchDelta;O&&p.setPitch(p.getPitch()+O)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){fe(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(a.l({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Ze(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Ze(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=st(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=st(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Sa(d,i,l){if(d=new a.bK(d.lng,d.lat),i){const p=new a.bK(d.lng-360,d.lat),_=new a.bK(d.lng+360,d.lat),x=360*Math.ceil(Math.abs(d.lng-l.center.lng)/360),A=l.locationPoint(d).distSqr(i),O=i.x<0||i.y<0||i.x>l.width||i.y>l.height;l.locationPoint(p).distSqr(i)<A&&(O||Math.abs(p.lng-l.center.lng)<x)?d=p:l.locationPoint(_).distSqr(i)<A&&(O||Math.abs(_.lng-l.center.lng)<x)&&(d=_)}for(;Math.abs(d.lng-l.center.lng)>180;){const p=l.locationPoint(d);if(p.x>=0&&p.y>=0&&p.x<=l.width&&p.y<=l.height)break;d.lng>l.center.lng?d.lng-=360:d.lng+=360}return d}const So={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ea extends a.E{constructor(i,l){if(super(),(i instanceof HTMLElement||l)&&(i=a.l({element:i},l)),a.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=ne("div");const x=41,A=27,O=te("svg",{display:"block",height:x*this._scale+"px",width:A*this._scale+"px",viewBox:`0 0 ${A} ${x}`},this._element),k=te("radialGradient",{id:"shadowGradient"},te("defs",{},O));te("stop",{offset:"10%","stop-opacity":.4},k),te("stop",{offset:"100%","stop-opacity":.05},k),te("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},O),te("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},O),te("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},O),te("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},O),this._offset=a.P.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const p=this._element.classList;for(const x in So)p.remove(`mapboxgl-marker-anchor-${x}`);p.add(`mapboxgl-marker-anchor-${this._anchor}`);const _=i&&i.className?i.className.trim().split(/\s+/):[];p.add(..._),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.bK.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const l=i.code,p=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,p=this._element;this._popup&&(l===p||p.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,l=this._pos;if(!i||!l)return!1;const p=i.unproject(l),_=i.getFreeCameraOptions();if(!_.position)return!1;const x=_.position.toLngLat();return x.distanceTo(p)<.9*x.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const l=this._pos;if(!l||l.x<0||l.x>i.transform.width||l.y<0||l.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(l);let _;i._showingGlobe()&&a.dz(i.transform,this._lngLat)?_=0:(_=1-i._queryFogOpacity(p),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${So[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${l.x}px,${l.y}px)
        `}_calculateXYTransform(){const i=this._pos,l=this._map,p=this.getPitchAlignment();if(!l||!i||p!=="map")return"";if(!l._showingGlobe()){const k=l.getPitch();return k?`rotateX(${k}deg)`:""}const _=a.c0(a.dA(l.transform,this._lngLat)),x=i.sub(a.dB(l.transform)),A=Math.abs(x.x)+Math.abs(x.y);if(A===0)return"";const O=_/A;return`rotateX(${-x.y*O}deg) rotateY(${x.x*O}deg)`}_calculateZTransform(){const i=this._pos,l=this._map;if(!l||!i)return"";let p=0;const _=this.getRotationAlignment();if(_==="map")if(l._showingGlobe()){const x=l.project(new a.bK(this._lngLat.lng,this._lngLat.lat+.001)),A=l.project(new a.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(x);p=a.c0(Math.atan2(A.y,A.x))-90}else p=-l.getBearing();else if(_==="horizon"){const x=a.a7(4,6,l.getZoom()),A=a.dB(l.transform);A.y+=x*l.transform.height;const O=i.sub(A),k=a.c0(Math.atan2(O.y,O.x));p=(k>90?k-270:k+90)*(1-x)}return p+=this._rotation,p?`rotateZ(${p}deg)`:""}_update(i){cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=Sa(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),i===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){return this._element.classList.add(i),this}removeClassName(i){return this._element.classList.remove(i),this}toggleClassName(i){return this._element.classList.toggle(i)}_onMove(i){const l=this._map;if(!l)return;const p=this._pointerdownPos,_=this._positionDelta;if(p&&_){if(!this._isDragging){const x=this._clickTolerance||l._clickTolerance;if(i.point.dist(p)<x)return;this._isDragging=!0}this._pos=i.point.sub(_),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.x("dragstart"))),this.fire(new a.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.x("dragend")),this._state="inactive"}_addDragHandler(i){const l=this._map,p=this._pos;l&&p&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(p),this._pointerdownPos=i.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const l=this._map;return l&&(i?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const dl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ks={maxWidth:100,unit:"metric"},v8={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},x8={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},b8=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pf(d=new a.P(0,0),i="bottom"){if(typeof d=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(d,2)));switch(i){case"top":return new a.P(0,d);case"top-left":return new a.P(l,l);case"top-right":return new a.P(-l,l);case"bottom":return new a.P(0,-d);case"bottom-left":return new a.P(l,-l);case"bottom-right":return new a.P(-l,-l);case"left":return new a.P(d,0);case"right":return new a.P(-d,0)}return new a.P(0,0)}return d instanceof a.P||Array.isArray(d)?a.P.convert(d):a.P.convert(d[i]||[0,0])}return{version:D,supported:Q.supported,setRTLTextPlugin:a.dC,getRTLTextPluginStatus:a.dD,Map:class extends j3{constructor(d){B.mark(j.create);const i=d;if((d=a.l({},V3,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(d.antialias&&a.dx(window)&&(d.antialias=!1,a.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new c7(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies),d),this._repaint=!!d.repaint,this._interactive=d.interactive,this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=d.crossSourceCollisions,this._collectResourceTiming=d.collectResourceTiming,this._language=this._parseLanguage(d.language),this._worldview=d.worldview,this._renderTaskQueue=new Ef,this._domRenderTaskQueue=new Ef,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.aP(),this._locale=a.l({},y8,d.locale),this._clickTolerance=d.clickTolerance,this._cooperativeGestures=d.cooperativeGestures,this._performanceMetricsCollection=d.performanceMetricsCollection,this._tessellationStep=d.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=d.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new nu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new Pt(d.transformRequest,d.accessToken,d.testMode),this._silenceAuthErrors=!!d.testMode,this._contextCreateOptions=d.contextCreateOptions?{...d.contextCreateOptions}:{},typeof d.container=="string"){const l=document.getElementById(d.container);if(!l)throw new Error(`Container '${d.container.toString()}' not found.`);this._container=l}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(this._container.childNodes.length>0&&a.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),d.maxBounds&&this.setMaxBounds(d.maxBounds),a.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new _8),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new ji(this,d),this._localFontFamily=d.localFontFamily,this._localIdeographFontFamily=d.localIdeographFontFamily,(d.style||!d.testMode)&&this.setStyle(d.style||a.e.DEFAULT_STYLE,{config:d.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),d.projection&&this.setProjection(d.projection),d.hash&&(this._hash=new Rs(typeof d.hash=="string"&&d.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){i.center==null&&i.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch});const l=d.bounds;l&&(this.resize(),this.fitBounds(l,a.l({},d.fitBoundsOptions,{duration:0})))}this.resize(),d.attributionControl&&this.addControl(new Y7({customAttribution:d.customAttribution})),this._logoControl=new $3,this.addControl(this._logoControl,d.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new a.x(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new a.x(`${l.dataType}dataloading`,l))}),this._interactions=new U3(this)}_getMapId(){return this._mapId}addControl(d,i){if(i===void 0&&(i=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new a.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=d.onAdd(this);this._controls.push(d);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(d){if(!d||!d.onRemove)return this.fire(new a.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(d);return i>-1&&this._controls.splice(i,1),d.onRemove(this),this}hasControl(d){return this._controls.indexOf(d)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(d){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new a.x("movestart",d)).fire(new a.x("move",d)),this.fire(new a.x("resize",d)),i&&this.fire(new a.x("moveend",d)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(d){return this.transform.setMaxBounds(a.as.convert(d)),this._update()}setMinZoom(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d?this.setZoom(d):this.fire(new a.x("zoomstart")).fire(new a.x("zoom")).fire(new a.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d?this.setZoom(d):this.fire(new a.x("zoomstart")).fire(new a.x("zoom")).fire(new a.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d?this.setPitch(d):this.fire(new a.x("pitchstart")).fire(new a.x("pitch")).fire(new a.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(d){if((d=d??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d?this.setPitch(d):this.fire(new a.x("pitchstart")).fire(new a.x("pitch")).fire(new a.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(d){return this.transform.renderWorldCopies=d,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(d){return d==="auto"?navigator.language:Array.isArray(d)?d.length===0?void 0:d.map(i=>i==="auto"?navigator.language:i):d}setLanguage(d){const i=this._parseLanguage(d);if(!this.style||i===this._language)return this;this._language=i,this.style.reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(d){return this.style&&d!==this._worldview?(this._worldview=d,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(d){return this._lazyInitEmptyStyle(),d?typeof d=="string"&&(d={name:d}):d=null,this._useExplicitProjection=!!d,this._prioritizeAndUpdateProjection(d,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const d=this.transform,i=d.projection.name;let l;i==="globe"&&d.zoom>=a.bU?(d.setMercatorFromTransition(),l=!0):i==="mercator"&&d.zoom<a.bU&&(d.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(d,i){return this._updateProjection(d||i||{name:"mercator"})}_updateProjection(d){let i;return i=d.name==="globe"&&this.transform.zoom>=a.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(d),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(d){return this.transform.locationPoint3D(a.bK.convert(d))}unproject(d){return this.transform.pointLocation3D(a.P.convert(d))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(d,i,l){if(d==="mouseenter"||d==="mouseover"){let p=!1;const _=A=>{const O=i.filter(z=>this.getLayer(z)),k=O.length?this.queryRenderedFeatures(A.point,{layers:O}):[];k.length?p||(p=!0,l.call(this,new Yi(d,this,A.originalEvent,{features:k}))):p=!1},x=()=>{p=!1};return{layers:new Set(i),listener:l,delegates:{mousemove:_,mouseout:x}}}if(d==="mouseleave"||d==="mouseout"){let p=!1;const _=A=>{const O=i.filter(k=>this.getLayer(k));(O.length?this.queryRenderedFeatures(A.point,{layers:O}):[]).length?p=!0:p&&(p=!1,l.call(this,new Yi(d,this,A.originalEvent)))},x=A=>{p&&(p=!1,l.call(this,new Yi(d,this,A.originalEvent)))};return{layers:new Set(i),listener:l,delegates:{mousemove:_,mouseout:x}}}{const p=_=>{const x=i.filter(O=>this.getLayer(O)),A=x.length?this.queryRenderedFeatures(_.point,{layers:x}):[];A.length&&(_.features=A,l.call(this,_),delete _.features)};return{layers:new Set(i),listener:l,delegates:{[d]:p}}}}on(d,i,l){if(typeof i=="function"||l===void 0)return super.on(d,i);if(Array.isArray(i)||(i=[i]),i){for(const _ of i)if(!this._isValidId(_))return this}const p=this._createDelegatedListener(d,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return this}once(d,i,l){if(typeof i=="function"||l===void 0)return super.once(d,i);if(Array.isArray(i)||(i=[i]),i){for(const _ of i)if(!this._isValidId(_))return this}const p=this._createDelegatedListener(d,i,l);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(d,i,l){if(typeof i=="function"||l===void 0)return super.off(d,i);const p=new Set(Array.isArray(i)?i:[i]);for(const A of p)if(!this._isValidId(A))return this;const _=(A,O)=>{if(A.size!==O.size)return!1;for(const k of A)if(!O.has(k))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[d]:void 0;return x&&(A=>{for(let O=0;O<A.length;O++){const k=A[O];if(k.listener===l&&_(k.layers,p)){for(const z in k.delegates)this.off(z,k.delegates[z]);return A.splice(O,1),this}}})(x),this}queryRenderedFeatures(d,i){if(!this.style)return[];if(i!==void 0||d===void 0||d instanceof a.P||Array.isArray(d)||(i=d,d=void 0),d=d||[[0,0],[this.transform.width,this.transform.height]],(i=i||{}).layers&&Array.isArray(i.layers)){for(const l of i.layers)if(!this._isValidId(l))return[]}return this.style.queryRenderedFeatures(d,i,this.transform)}querySourceFeatures(d,i){return this._isValidId(d)?this.style.querySourceFeatures(d,i):[]}isPointOnSurface(d){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&a.w(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(d))}addInteraction(d,i){return this._interactions.add(d,i),this}removeInteraction(d){return this._interactions.remove(d),this}setStyle(d,i){return i=a.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i),this.style&&d&&i.diff!==!1&&i.localFontFamily===this._localFontFamily&&i.localIdeographFontFamily===this._localIdeographFontFamily&&!i.config?(this.style._diffStyle(d,(l,p)=>{l?(a.w(`Unable to perform style diff: ${String(l.message||l.error||l)}. Rebuilding the style from scratch.`),this._updateStyle(d,i)):p&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(d,i))}_getUIString(d){const i=this._locale[d];if(i==null)throw new Error(`Missing UI string '${d}'`);return i}_updateStyle(d,i){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),d){const l=a.l({},i);i&&i.config&&(l.initialConfig=i.config,delete l.config),this.style=new Ao(this,l).load(d),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ao(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.w("There is no style added to the map."),!1)}_isValidId(d){return d==null?(this.fire(new a.t(new Error("IDs can't be empty."))),!1):!a.cn(d)||(this.fire(new a.t(new Error(`IDs can't contain special symbols: "${d}".`))),!1)}addSource(d,i){return this._isValidId(d)?(this._lazyInitEmptyStyle(),this.style.addSource(d,i),this._update(!0)):this}isSourceLoaded(d){return!!this._isValidId(d)&&!!this.style&&this.style._isSourceCacheLoaded(d)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(d,i,l){this._lazyInitEmptyStyle(),this.style.addSourceType(d,i,l)}removeSource(d){return this._isValidId(d)?(this.style.removeSource(d),this._updateTerrain(),this._update(!0)):this}getSource(d){return this._isValidId(d)?this.style.getOwnSource(d):null}addImage(d,i,{pixelRatio:l=1,sdf:p=!1,stretchX:_,stretchY:x,content:A}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){const{width:O,height:k,data:z}=a.q.getImageData(i);this.style.addImage(d,{data:new a.r({width:O,height:k},z),pixelRatio:l,stretchX:_,stretchY:x,content:A,sdf:p,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new a.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:k}=i,z=i;this.style.addImage(d,{data:new a.r({width:O,height:k},new Uint8Array(z.data)),pixelRatio:l,stretchX:_,stretchY:x,content:A,sdf:p,version:0,userImage:z}),z.onAdd&&z.onAdd(this,d)}}updateImage(d,i){this._lazyInitEmptyStyle();const l=this.style.getImage(d);if(!l)return void this.fire(new a.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?a.q.getImageData(i):i,{width:_,height:x,data:A}=p;if(_===void 0||x===void 0)return void this.fire(new a.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==l.data.width||x!==l.data.height)return void this.fire(new a.t(new Error(`The width and height of the updated image (${_}, ${x})
                must be that same as the previous version of the image
                (${l.data.width}, ${l.data.height})`)));const O=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);l.data.replace(A,O),this.style.updateImage(d,l)}hasImage(d){return d?!!this.style&&!!this.style.getImage(d):(this.fire(new a.t(new Error("Missing required image id"))),!1)}removeImage(d){this.style.removeImage(d)}loadImage(d,i){a.o(this._requestManager.transformRequest(d,a.R.Image),(l,p)=>{i(l,p instanceof HTMLImageElement?a.q.getImageData(p):p)})}listImages(){return this.style.listImages()}addModel(d,i){this._lazyInitEmptyStyle(),this.style.addModel(d,i)}hasModel(d){return d?this.style.hasModel(d):(this.fire(new a.t(new Error("Missing required model id"))),!1)}removeModel(d){this.style.removeModel(d)}listModels(){return this.style.listModels()}addLayer(d,i){return this._isValidId(d.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(d,i),this._update(!0)):this}getSlot(d){const i=this.getLayer(d);return i&&i.slot||null}setSlot(d,i){return this.style.setSlot(d,i),this.style.mergeLayers(),this._update(!0)}addImport(d,i){return this.style.addImport(d,i),this}updateImport(d,i){return typeof i!="string"&&i.id!==d?(this.removeImport(d),this.addImport(i)):(this.style.updateImport(d,i),this._update(!0))}removeImport(d){return this.style.removeImport(d),this}moveImport(d,i){return this.style.moveImport(d,i),this._update(!0)}moveLayer(d,i){return this._isValidId(d)?(this.style.moveLayer(d,i),this._update(!0)):this}removeLayer(d){return this._isValidId(d)?(this.style.removeLayer(d),this._update(!0)):this}getLayer(d){if(!this._isValidId(d))return null;const i=this.style.getOwnLayer(d);return i?i.type==="custom"?i.implementation:i.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(d,i,l){return this._isValidId(d)?(this.style.setLayerZoomRange(d,i,l),this._update(!0)):this}setFilter(d,i,l={}){return this._isValidId(d)?(this.style.setFilter(d,i,l),this._update(!0)):this}getFilter(d){return this._isValidId(d)?this.style.getFilter(d):null}setPaintProperty(d,i,l,p={}){return this._isValidId(d)?(this.style.setPaintProperty(d,i,l,p),this._update(!0)):this}getPaintProperty(d,i){return this._isValidId(d)?this.style.getPaintProperty(d,i):null}setLayoutProperty(d,i,l,p={}){return this._isValidId(d)?(this.style.setLayoutProperty(d,i,l,p),this._update(!0)):this}getLayoutProperty(d,i){return this._isValidId(d)?this.style.getLayoutProperty(d,i):null}getSchema(d){return this.style.getSchema(d)}setSchema(d,i){return this.style.setSchema(d,i),this._update(!0)}getConfig(d){return this.style.getConfig(d)}setConfig(d,i){return this.style.setConfig(d,i),this._update(!0)}getConfigProperty(d,i){return this.style.getConfigProperty(d,i)}setConfigProperty(d,i,l){return this.style.setConfigProperty(d,i,l),this._update(!0)}setLights(d){if(this._lazyInitEmptyStyle(),d&&d.length===1&&d[0].type==="flat"){const i=d[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(d),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const d=this.style.getLights()||[];return d.length===0&&d.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),d}setLight(d,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:d}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(d){return this._lazyInitEmptyStyle(),!d&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(d),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(d){return this._lazyInitEmptyStyle(),this.style.setFog(d),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(d){return this._lazyInitEmptyStyle(),this.style.setColorTheme(d),this._update(!0)}setCamera(d){return this.style.setCamera(d),this._triggerCameraUpdate(d)}_triggerCameraUpdate(d){return this._update(this.transform.setOrthographicProjectionAtLowPitch(d["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(d){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.bK.convert(d),this.transform):0}setFeatureState(d,i){return this._isValidId(d.source)?(this.style.setFeatureState(d,i),this._update()):this}removeFeatureState(d,i){return this._isValidId(d.source)?(this.style.removeFeatureState(d,i),this._update()):this}getFeatureState(d){return this._isValidId(d.source)?this.style.getFeatureState(d):null}_updateContainerDimensions(){if(!this._container)return;const d=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let l,p,_,x=this._container;for(;x&&(!p||!_);){const A=window.getComputedStyle(x).transform;A&&A!=="none"&&(l=A.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&l[0]!=="0"&&l[0]!=="1"&&(p=l[0]),l[3]&&l[3]!=="0"&&l[3]!=="1"&&(_=l[3])),x=x.parentElement}this._containerWidth=p?Math.abs(d/p):d,this._containerHeight=_?Math.abs(i/_):i}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=ne("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=ne("div","mapboxgl-canvas-container",d);this._canvas=ne("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=ne("div","mapboxgl-control-container",d),p=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(_=>{p[_]=ne("div",`mapboxgl-ctrl-${_}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(d,i){const l=a.q.devicePixelRatio||1;this._canvas.width=l*Math.ceil(d),this._canvas.height=l*Math.ceil(i),this._canvas.style.width=`${d}px`,this._canvas.style.height=`${i}px`}_addMarker(d){this._markers.push(d)}_removeMarker(d){const i=this._markers.indexOf(d);i!==-1&&this._markers.splice(i,1)}_addPopup(d){this._popups.push(d)}_removePopup(d){const i=this._popups.indexOf(d);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const d=a.l({},Q.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",d);i?(gn(i,!0),this.painter=new C3(i,this._contextCreateOptions,this.transform,this._tp),this.on("data",l=>{l.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.m.testSupport(i)):this.fire(new a.t(new Error("Failed to initialize WebGL")))}_contextLost(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.x("webglcontextlost",{originalEvent:d}))}_contextRestored(d){this._setupPainter(),this.resize(),this._update(),this.fire(new a.x("webglcontextrestored",{originalEvent:d}))}_onMapScroll(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(d){return this._update(),this._renderTaskQueue.add(d)}_cancelRenderFrame(d){this._renderTaskQueue.remove(d)}_requestDomTask(d){!this.loaded()||this.loaded()&&!this.isMoving()?d():this._domRenderTaskQueue.add(d)}_render(d){let i;this.fire(new a.x("renderstart")),++this._frameId;const l=this.painter.context.extTimerQuery,p=a.q.now(),_=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(i=_.createQuery(),_.beginQuery(l.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(d),this._domRenderTaskQueue.run(d),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,F=this.transform.pitch,U=a.q.now(),V=new a.a3(z,{now:U,fadeDuration:x,pitch:F,transition:this.style.transition});this.style.update(V)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let A=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),A=this._updateAverageElevation(p),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):A=this._updateAverageElevation(p);const O=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions,this.painter.replacementSource);if(O&&(this._placementDirty=O.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,B.mark(j.load),this.fire(new a.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const z=a.q.now()-p;_.endQuery(l.TIME_ELAPSED_EXT),setTimeout(()=>{const F=_.getQueryParameter(i,_.QUERY_RESULT)/1e6;_.deleteQuery(i),this.fire(new a.x("gpu-timing-frame",{cpuTime:z,gpuTime:F}))},50)}if(this.listens("gpu-timing-layer")){const z=this.painter.collectGpuTimers();setTimeout(()=>{const F=this.painter.queryGpuTimers(z);this.fire(new a.x("gpu-timing-layer",{layerTimes:F}))},50)}if(this.listens("gpu-timing-deferred-render")){const z=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const F=this.painter.queryGpuTimeDeferredRender(z);this.fire(new a.x("gpu-timing-deferred-render",{gpuTime:F}))},50)}const k=this._sourcesDirty||this._styleDirty||this._placementDirty||A;if(k||this._repaint)this.triggerRepaint();else{const z=this.idle();if(z&&(A=this._updateAverageElevation(p,!0)),A)this.triggerRepaint();else if(this._triggerFrame(!1),z&&(this.fire(new a.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const F=this._calculateSpeedIndex();this.fire(new a.x("speedindexcompleted",{speedIndex:F})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,B.mark(j.fullLoad),this._performanceMetricsCollection&&er(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(d){for(const i of this._markers)d&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!d||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(d,i=!1){const l=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&l(0);const p=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(p||(i||d-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(d)){const _=this.transform.averageElevation;let x=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=d;const A=Math.abs(_-x);if(A>1){if(this._isInitialLoad||p)return this._averageElevation.jumpTo(x),l(x);this._averageElevation.easeTo(x,d,300)}else if(A>1e-4)return this._averageElevation.jumpTo(x),l(x)}return!!this._averageElevation.isEasing(d)&&l(this._averageElevation.getValue(d))}_authenticate(){Pe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,d=>{if(d&&(d.message===Mt||d.status===401)){const i=this.painter.context.gl;gn(i,!1),this._logoControl instanceof $3&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),vn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Ln(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const d=this._isDragging();this.painter.updateTerrain(this.style,d)}_calculateSpeedIndex(){const d=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const l=this.painter.context.gl,p=l.createFramebuffer();function _(x){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,x,0);const A=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,A),A}return l.bindFramebuffer(l.FRAMEBUFFER,p),this._canvasPixelComparison(_(d),i.canvasCopies.map(_),i.timeStamps)}_canvasPixelComparison(d,i,l){let p=l[1]-l[0];const _=d.length/4;for(let x=0;x<i.length;x++){const A=i[x];let O=0;for(let k=0;k<A.length;k+=4)A[k]===d[k]&&A[k+1]===d[k+1]&&A[k+2]===d[k+2]&&A[k+3]===d[k+3]&&(O+=1);p+=(l[x+2]-l[x+1])*(1-O/_)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Nt.delete(this.painter.context.gl),Cr.remove(),Gt.remove(),this._removed=!0,this.fire(new a.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(d){this._renderNextFrame=this._renderNextFrame||d,this.style&&!this._frame&&(this._frame=a.q.frame(i=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(i)}))}_preloadTiles(d){const i=this.style?this.style.getSourceCaches():[];return a.bf(i,(l,p)=>l._preloadTiles(d,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(d){this._trackResize&&this.resize({originalEvent:d})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(d){this._showParseStatus!==d&&(this._showParseStatus=d,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(d){this._showTerrainWireframe!==d&&(this._showTerrainWireframe=d,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(d){this._showLayers2DWireframe!==d&&(this._showLayers2DWireframe=d,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(d){this._showLayers3DWireframe!==d&&(this._showLayers3DWireframe=d,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(d){this._speedIndexTiming!==d&&(this._speedIndexTiming=d,this._update())}get showPadding(){return!!this._showPadding}set showPadding(d){this._showPadding!==d&&(this._showPadding=d,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,this._tp.refreshUI(),d?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(d){this._repaint!==d&&(this._repaint=d,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(d){this._vertices=d,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(d){this._showTileAABBs!==d&&(this._showTileAABBs=d,this._tp.refreshUI(),d&&this._update())}_setCacheLimits(d,i){a.dy(d,i)}get version(){return D}},NavigationControl:class{constructor(d={}){this.options=a.l({},iu,d),this._container=ne("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(a.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),ne("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),ne("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:i}):l.resetNorth({},{originalEvent:i}))}),this._compassIcon=ne("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const d=this._map;if(!d)return;const i=d.getZoom(),l=i===d.getMaxZoom(),p=i===d.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const d=this._map;if(!d)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(d.transform.pitch*(Math.PI/180)),.5)}) rotateX(${d.transform.pitch}deg) rotateZ(${d.transform.angle*(180/Math.PI)}deg)`:`rotate(${d.transform.angle*(180/Math.PI)}deg)`;d._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),d.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&d.on("pitch",this._rotateCompassArrow),d.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new M1(d,this._compass,this.options.visualizePitch)),this._container}onRemove(){const d=this._map;d&&(this._container.remove(),this.options.showZoom&&d.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&d.off("pitch",this._rotateCompassArrow),d.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(d,i){const l=ne("button",d,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(d,i){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${i}`);d.setAttribute("aria-label",l),d.firstElementChild&&d.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends a.E{constructor(d={}){super();const i=navigator.geolocation;this.options=a.l({geolocation:i},dl,d),a.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=es(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(d){return this._map=d,this._container=ne("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(d){const i=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,d(l)};this._supportsGeolocation!==void 0?d(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(l=>i(l.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(d){const i=this._map.getMaxBounds(),l=d.coords;return!!i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(d){if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new a.x("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(d),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.x("geolocate",d)),this._finish()}}_updateCamera(d){const i=new a.bK(d.coords.longitude,d.coords.latitude),l=d.coords.accuracy,p=this._map.getBearing(),_=a.l({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),_,{geolocateSource:!0})}_updateMarker(d){if(d){const i=new a.bK(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const d=this._map.transform,i=a.bD(1,d._center.lat)*d.worldSize,l=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.x("error",d)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(d){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=ne("button","mapboxgl-ctrl-geolocate",this._container),ne("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",d===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ne("div","mapboxgl-user-location"),this._dotElement.appendChild(ne("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ne("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ea({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ne("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ea({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.x("trackuserlocationend")))})}}_onDeviceOrientation(d){this._userLocationDotMarker&&(d.webkitCompassHeading?this._heading=d.webkitCompassHeading:d.absolute===!0&&(this._heading=-1*d.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let d;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(d={maximumAge:6e5,timeout:0},this._noTimeout=!0):(d=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,d),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const d=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&d()}).catch(console.error):d()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Y7,ScaleControl:class{constructor(d={}){this.options=a.l({},ks,d),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const d=this.options.maxWidth||100,i=this._map,l=i._containerHeight/2,p=i._containerWidth/2-d/2,_=i.unproject([p,l]),x=i.unproject([p+d,l]),A=_.distanceTo(x);if(this.options.unit==="imperial"){const O=3.2808*A;O>5280?this._setScale(d,O/5280,"mile"):this._setScale(d,O,"foot")}else this.options.unit==="nautical"?this._setScale(d,A/1852,"nautical-mile"):A>=1e3?this._setScale(d,A/1e3,"kilometer"):this._setScale(d,A,"meter")}_setScale(d,i,l){this._map._requestDomTask(()=>{const p=function(x){const A=Math.pow(10,`${Math.floor(x)}`.length-1);let O=x/A;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(k){const z=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*z)/z}(O),A*O}(i),_=p/i;this._container.innerHTML=this._isNumberFormatSupported&&l!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(p):`${p}&nbsp;${v8[l]}`,this._container.style.width=d*_+"px"})}onAdd(d){return this._map=d,this._language=d.getLanguage(),this._container=ne("div","mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(d){this._language=d,this._update()}setUnit(d){this.options.unit=d,this._update()}},FullscreenControl:class{constructor(d={}){this._fullscreen=!1,d&&d.container&&(d.container instanceof HTMLElement?this._container=d.container:a.w("Full screen control 'container' must be a DOM element.")),a.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=ne("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const d=this._fullscreenButton=ne("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ne("span","mapboxgl-ctrl-icon",d).setAttribute("aria-hidden","true"),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",d)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.E{constructor(d){super(),this.options=a.l(Object.create(x8),d),a.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(d&&d.className?d.className.trim().split(/\s+/):[])}addTo(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&d.on("preclick",this._onClose),this.options.closeOnMove&&d.on("move",this._onClose),d.on("remove",this.remove),this._update(),d._addPopup(this),this._focusFirstElement(),this._trackPointer?(d.on("mousemove",this._onMouseEvent),d.on("mouseup",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")):d.on("move",this._update),this.fire(new a.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const d=this._map;return d&&(d.off("move",this._update),d.off("move",this._onClose),d.off("preclick",this._onClose),d.off("click",this._onClose),d.off("remove",this.remove),d.off("mousemove",this._onMouseEvent),d.off("mouseup",this._onMouseEvent),d.off("drag",this._onMouseEvent),d._canvasContainer&&d._canvasContainer.classList.remove("mapboxgl-track-pointer"),d._removePopup(this),this._map=void 0),this.fire(new a.x("close")),this}getLngLat(){return this._lngLat}setLngLat(d){this._lngLat=a.bK.convert(d),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const d=this._map;return d&&(d.off("move",this._update),d.on("mousemove",this._onMouseEvent),d.on("drag",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(d){return this.setDOMContent(document.createTextNode(d))}setHTML(d){const i=document.createDocumentFragment(),l=document.createElement("body");let p;for(l.innerHTML=d;p=l.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(d){return this.options.maxWidth=d,this._update(),this}setDOMContent(d){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=ne("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(d),this.options.closeButton){const l=this._closeButton=ne("button","mapboxgl-popup-close-button",i);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(d){return this._classList.add(d),this._updateClassList(),this}removeClassName(d){return this._classList.delete(d),this._updateClassList(),this}setOffset(d){return this.options.offset=d,this._update(),this}toggleClassName(d){let i;return this._classList.delete(d)?i=!1:(this._classList.add(d),i=!0),this._updateClassList(),i}_onMouseEvent(d){this._update(d.point)}_getAnchor(d){if(this.options.anchor)return this.options.anchor;const i=this._map,l=this._container,p=this._pos;if(!i||!l||!p)return"bottom";const _=l.offsetWidth,x=l.offsetHeight,A=p.x<_/2,O=p.x>i.transform.width-_/2;if(p.y+d<x)return A?"top-left":O?"top-right":"top";if(p.y>i.transform.height-x){if(A)return"bottom-left";if(O)return"bottom-right"}return A?"left":O?"right":"bottom"}_updateClassList(){const d=this._container;if(!d)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),d.className=i.join(" ")}_update(d){const i=this._map,l=this._content;if(!i||!this._lngLat&&!this._trackPointer||!l)return;let p=this._container;if(p||(p=this._container=ne("div","mapboxgl-popup",i.getContainer()),this._tip=ne("div","mapboxgl-popup-tip",p),p.appendChild(l)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sa(this._lngLat,this._pos,i.transform)),!this._trackPointer||d){const _=this._pos=this._trackPointer&&d instanceof a.P?d:i.project(this._lngLat),x=Pf(this.options.offset),A=this._anchor=this._getAnchor(x.y),O=Pf(this.options.offset,A),k=_.add(O).round();i._requestDomTask(()=>{this._container&&A&&(this._container.style.transform=`${So[A]} translate(${k.x}px,${k.y}px)`)})}if(!this._marker&&i._showingGlobe()){const _=a.dz(i.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const d=this._container.querySelector(b8);d&&d.focus()}_onClose(){this.remove()}_setOpacity(d){this._container&&(this._container.style.opacity=`${d}`),this._content&&(this._content.style.pointerEvents=d?"auto":"none")}},Marker:Ea,Style:Ao,LngLat:a.bK,LngLatBounds:a.as,Point:a.P,MercatorCoordinate:a.a5,FreeCameraOptions:Ss,Evented:a.E,config:a.e,prewarm:a.dE,clearPrewarmedResources:a.dF,get accessToken(){return a.e.ACCESS_TOKEN},set accessToken(d){a.e.ACCESS_TOKEN=d},get baseApiUrl(){return a.e.API_URL},set baseApiUrl(d){a.e.API_URL=d},get workerCount(){return a.dG.workerCount},set workerCount(d){a.dG.workerCount=d},get maxParallelImageRequests(){return a.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){a.e.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage(d){a.dH(d)},get workerUrl(){return a.dI.workerUrl},set workerUrl(d){a.dI.workerUrl=d},get workerClass(){return a.dI.workerClass},set workerClass(d){a.dI.workerClass=d},get workerParams(){return a.dI.workerParams},set workerParams(d){a.dI.workerParams=d},get dracoUrl(){return a.dJ()},set dracoUrl(d){a.dK(d)},get meshoptUrl(){return a.dL()},set meshoptUrl(d){a.dM(d)},setNow:a.q.setNow,restoreNow:a.q.restoreNow}});var C=y;return C})})(sR);var rU=sR.exports;const Dp=Cn(rU),nU="FeatureCollection",iU=[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.06027547260382,37.513903342198184],[127.0570565910057,37.51334593843142],[127.05700506975246,37.513265686079635],[127.05857989048052,37.510380551229034],[127.05991981228244,37.50792565447077],[127.06002419097261,37.50789082155713],[127.06257374902839,37.50867271170524],[127.06289276797845,37.50927943837497],[127.06156802776177,37.51170667705016],[127.06039604784763,37.51385403507078],[127.06027547260382,37.513903342198184]]]},properties:{CATEGORY:"",AREA_CD:"POI001",AREA_NM:" MICE "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.01759028830955,37.56949795219521],[127.01710035550093,37.56965489232008],[127.01167262628695,37.569757399646925],[127.01015676727415,37.5696579076639],[127.00859460642342,37.56955535607392],[127.00844929024726,37.569557164984886],[127.00522317178225,37.56954753525869],[127.0051427298473,37.569544523695065],[127.00484717295625,37.56954619184136],[127.00452457596182,37.5695373959982],[127.00451948839762,37.569518828078145],[127.00451118159594,37.56949109313259],[127.0044852536665,37.56941738004489],[127.0044793353608,37.56941518562979],[127.00446726397035,37.569377384323175],[127.00445797364242,37.569351400365285],[127.00445550341148,37.56934066984943],[127.00445952167784,37.569327077717155],[127.00442539056309,37.5692380301647],[127.0044207750861,37.56922754581206],[127.00439966736243,37.5691779296681],[127.00434100772206,37.569060182240776],[127.0042855322836,37.56902568907122],[127.00427706375045,37.56901119296493],[127.00427956808517,37.56895441005222],[127.00449185435993,37.56641409460379],[127.00447783364497,37.56641027391056],[127.00449689480308,37.56638180898155],[127.00449950093412,37.566377765066534],[127.00449748399876,37.56637462858549],[127.00447501227495,37.5663435055541],[127.00448648525554,37.56633750556715],[127.00450041659187,37.56633888970631],[127.00456468835722,37.565555614338976],[127.00457404228648,37.565466160950386],[127.0045633016567,37.565431664462665],[127.00454631935133,37.56535650904285],[127.00458030266942,37.56534593625978],[127.00458521525503,37.56527992568908],[127.00461537225551,37.56490298454427],[127.00461922648924,37.56490046539686],[127.00462434763114,37.56489741058989],[127.00465550296772,37.56487947821652],[127.00466944021483,37.56487155695732],[127.00470451056177,37.564850912271076],[127.00471200040943,37.56485151047047],[127.00490306943155,37.564866601772934],[127.00655497649056,37.56499919963331],[127.00810338658242,37.56479701631518],[127.00867620619182,37.564661872929086],[127.00900788663702,37.56459424646359],[127.00925855531818,37.56462348358272],[127.00985700529151,37.56457293960174],[127.01094641522712,37.56474267294616],[127.0125010053088,37.56498617774443],[127.01611651486223,37.5653648350138],[127.01765145951447,37.56555012459151],[127.0178031288685,37.565561720663226],[127.01800389875964,37.565764729305705],[127.01775394919522,37.568952269033936],[127.01773129983349,37.56921117045667],[127.01771620773675,37.56938246436044],[127.01759028830955,37.56949795219521]]]},properties:{CATEGORY:"",AREA_CD:"POI002",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97668652128944,37.562551782892044],[126.9760601080263,37.56088495983605],[126.97601237474468,37.56079242215283],[126.97601639399005,37.5606853824605],[126.97600605147264,37.56066567164939],[126.9760775531688,37.56056422466741],[126.97605249722446,37.56031560591908],[126.97599147048842,37.56022423258498],[126.97603804761417,37.55985960213439],[126.97594273539254,37.55963265223602],[126.97579949875414,37.55946531062837],[126.97564035199812,37.559267545378624],[126.97562697030122,37.559118584923624],[126.97565321141852,37.55893293073778],[126.97583338008728,37.558735499735825],[126.97616925265686,37.5584412622591],[126.97651342906725,37.557680845026816],[126.97714530026187,37.55789602343869],[126.97738945698812,37.55801769434858],[126.97781240956897,37.55831994398687],[126.97822254698822,37.55876627630726],[126.97862097210881,37.55911102759257],[126.97907703379222,37.55936396631452],[126.97959041663562,37.55953596546365],[126.97984029069994,37.55959995148039],[126.98001401526304,37.5598626692443],[126.98016987400449,37.5598582020557],[126.98039762331626,37.55985159457999],[126.98106460711448,37.56007036610756],[126.98115509018328,37.560014459688674],[126.9816032933282,37.56031937450002],[126.98195039682118,37.56046117396058],[126.98195778725135,37.560526186988454],[126.98189775512641,37.56066244394168],[126.98212627145556,37.56073326468248],[126.98227935235386,37.56074932199957],[126.9834263937449,37.560833118404055],[126.98469810772248,37.56092766168877],[126.98507523032346,37.56097285606317],[126.98662904852213,37.56114942114989],[126.98691075691399,37.56116819778922],[126.98821184333215,37.561287626177354],[126.98860921441052,37.561315447635714],[126.98872817175936,37.56132571711326],[126.98876630744994,37.56137604019882],[126.9887885534953,37.56140539779575],[126.98879687662684,37.561416381624795],[126.98870560688567,37.5621412469229],[126.98869273918079,37.562134008253956],[126.98868717829133,37.56217430994698],[126.98864598995803,37.562453204799525],[126.98856205263272,37.56274528320987],[126.98851637717857,37.56283472316627],[126.98829369301244,37.56320633355366],[126.98798966853062,37.563616046437474],[126.98762657947859,37.56412682059105],[126.98747902522838,37.56453433318451],[126.98738257562694,37.56456683617456],[126.98736457260223,37.56467567766859],[126.98735360127542,37.564741308544434],[126.98739688769675,37.56478079532306],[126.98740303874644,37.564899235788566],[126.98739764999527,37.565372900874486],[126.98739402008715,37.56552684524199],[126.98738549062926,37.565682759083394],[126.98739365221657,37.56568402375635],[126.98742502625112,37.56570937587222],[126.9874998025259,37.565737945807385],[126.9875046150777,37.56573475316389],[126.98754471705924,37.56574550912464],[126.98758402123221,37.565768366617625],[126.98762623976255,37.56578682241263],[126.98762719182992,37.56579140946981],[126.98764102002625,37.565794385416055],[126.98763366374736,37.56589498088568],[126.98759433290232,37.56589937933521],[126.98759432360494,37.56590859860276],[126.98760960537948,37.5659108316858],[126.98760700424303,37.56593043852893],[126.98760413837978,37.56593016666445],[126.98761159967734,37.56596791686987],[126.98763117974465,37.56596746826092],[126.98763085801485,37.566017390279626],[126.98743720089455,37.56621144307643],[126.98732709501445,37.56638282234427],[126.9873628754406,37.56711619325619],[126.98740248164584,37.567814604801576],[126.98746572438596,37.56784009211681],[126.98748155787153,37.56790721591306],[126.98738786155734,37.56795019772784],[126.9873888560634,37.56802042660325],[126.9871577991533,37.56802082480254],[126.98664690648519,37.5680663411589],[126.9866621816803,37.568233289524265],[126.98628390147934,37.56830145736687],[126.98526607053526,37.56848449031968],[126.98439080031139,37.568636809238605],[126.98393036731817,37.56875906251549],[126.9837950778506,37.56878843213785],[126.9832194171558,37.56890501912464],[126.98269865658635,37.56901723016996],[126.98260828539547,37.56901935551965],[126.98236657103512,37.56905205649802],[126.98202265535797,37.56906264130342],[126.98168826486499,37.56901201119857],[126.98142070970597,37.569004778472014],[126.98100029202428,37.56897403403232],[126.98058715645507,37.56899160515941],[126.98014760079471,37.56901993409316],[126.9799088381656,37.56903119621931],[126.97957753582914,37.569070936756944],[126.97869534428797,37.56910600598099],[126.9781855695955,37.56916650770738],[126.97761584530663,37.569293480114816],[126.97733759615589,37.569249481213724],[126.97735338019669,37.5690605555975],[126.97734396524396,37.568652422179674],[126.97740818632093,37.56711116934307],[126.97742170655685,37.56668732467936],[126.97718855480785,37.566687233719094],[126.97717634936288,37.566545760342365],[126.9772428080476,37.56645203903928],[126.97722690690668,37.566251224534746],[126.97765944185858,37.56578550546128],[126.97810932202846,37.565600471393815],[126.97748985790919,37.56460655418853],[126.9773352344994,37.56421261760528],[126.97668652128944,37.562551782892044]]]},properties:{CATEGORY:"",AREA_CD:"POI003",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.99124563997569,37.53030452088333],[126.9913245591785,37.53068972155012],[126.99135959848324,37.530803286446414],[126.99138631520862,37.53091032533822],[126.99140152354737,37.530961849733835],[126.99152561520481,37.531406652801586],[126.99162861910766,37.53153722247559],[126.99165225133467,37.53157020490363],[126.99168425205087,37.531615064958714],[126.9917594763363,37.53169984697754],[126.99184734491782,37.53180586935705],[126.99206008020936,37.53193785475033],[126.9922014792136,37.53199377735789],[126.99290775319355,37.53180881463802],[126.99312266562772,37.531773047976635],[126.99333132297656,37.531712672547165],[126.99362701590309,37.53161544588719],[126.9937242449184,37.53158764219084],[126.99379383450828,37.53156423536419],[126.99394464109793,37.531563435476876],[126.99418670474118,37.53156944638931],[126.9942236719323,37.53156819710723],[126.99429974144154,37.53157706895466],[126.99449110819938,37.531589805304215],[126.99475510189114,37.531611108762334],[126.9948453073551,37.531701179665134],[126.99486210456129,37.531754291500384],[126.99486526117119,37.5317571301732],[126.99481831904855,37.5318223393884],[126.9947582126397,37.53193077332202],[126.99474501591463,37.53196080598849],[126.99473797624992,37.53197588987284],[126.99471051944853,37.53204699217722],[126.99469783026176,37.53207773813153],[126.9946215445709,37.53227209050471],[126.99452589019863,37.53257824761501],[126.99428129710427,37.533153339330454],[126.99543074805283,37.53319706699679],[126.99562758983394,37.53319312350308],[126.99565652334583,37.533181465508505],[126.99568250222005,37.53317280740721],[126.99572107933987,37.533165159563225],[126.99574957228432,37.53315917762846],[126.99580643252413,37.53315118833508],[126.99583157531669,37.53314954083927],[126.9958894079047,37.53314957133074],[126.99589443181189,37.53315057184794],[126.99598660484544,37.53316729265241],[126.99631215295175,37.5332237740805],[126.99659477152063,37.53327596309514],[126.99678163046785,37.533306817519595],[126.99694372251585,37.53330961022792],[126.99699940579062,37.53330359370398],[126.99704361548753,37.533295206697225],[126.99710384797625,37.53328318904261],[126.99724107022311,37.53326815641019],[126.99728443109619,37.53326143630244],[126.99734340863496,37.53323441519564],[126.99762426256946,37.53316061581115],[126.99775969561465,37.533128906623084],[126.99782143014613,37.53315572596194],[126.99783739315438,37.53319778083253],[126.99785473634032,37.533228318871515],[126.99786934706664,37.5332495115397],[126.99789890600408,37.53328503365149],[126.9979264560412,37.53331145923907],[126.99796384390577,37.53334045726342],[126.9980277805119,37.53343758891533],[126.99802387526591,37.533459701680066],[126.99781088927541,37.533690983594916],[126.99778206877379,37.53374780823378],[126.99777158159941,37.53376981135722],[126.99776487520616,37.53382374281309],[126.9977653824488,37.53385533572106],[126.99777060115402,37.53388396394545],[126.99778227703524,37.53392094428281],[126.99779482827314,37.53394808362817],[126.99781222054105,37.53397881840945],[126.9978181094116,37.53402933343218],[126.9977351940213,37.53420090361672],[126.9976979903937,37.53424250381964],[126.99768328037302,37.53430287975258],[126.99769442469865,37.534323425261036],[126.99771395298326,37.53435592869756],[126.99777603774555,37.534405221432046],[126.9978491911318,37.53439533483441],[126.99824873877118,37.53447429215795],[126.99847848255523,37.53460614380988],[126.99858975686678,37.53467446794823],[126.9986386358515,37.53468816399729],[126.99867500657759,37.53469029715472],[126.99872206255424,37.53468583439882],[126.99876061440999,37.534674073250805],[126.99877505630043,37.53466382236198],[126.99878610315747,37.53465651511859],[126.99881615328928,37.53462881142415],[126.9988314520369,37.53460003716184],[126.99884024695736,37.53457337709836],[126.99884559125006,37.53453522573377],[126.99888649401446,37.534502755687306],[126.99949163000832,37.534452299862195],[126.99955224614796,37.534467725143905],[126.99973215749831,37.5347029373467],[126.99981554947425,37.53482017885505],[127.0001194151033,37.53467446255236],[127.00026868776875,37.53459131713251],[127.00043124339714,37.53447603198178],[127.00059950811574,37.53469569977977],[127.00066478849047,37.53479046120335],[127.00068275218847,37.5348344182894],[127.00068458349581,37.53487795193097],[127.0006803413818,37.534905167116754],[127.00066143053513,37.53493723418541],[127.00064737399603,37.53495747297453],[127.00050213240175,37.53513227061485],[127.00024850660319,37.53544588994765],[127.00013680773571,37.5355870636839],[127.00021409106385,37.53561984699603],[127.00028076663062,37.53560470121247],[127.00082595500294,37.535864358530205],[127.00084471074335,37.53587707392928],[127.00096903073617,37.53593636167414],[127.0010472856343,37.536000796452974],[127.00108897970925,37.536057612287955],[127.00134801711411,37.536436653454864],[127.00164963945957,37.53688472058655],[127.00180272945835,37.53695425010733],[127.00186267372952,37.53701590939414],[127.0018890653775,37.53702943184117],[127.00221058922388,37.53745347897006],[127.00220939164119,37.53767191351105],[127.00239949263297,37.53785658768053],[127.00251456864514,37.538001249611526],[127.00253662269911,37.538088542212876],[127.00260133079966,37.538439024996705],[127.00264265080128,37.538598674519314],[127.00271261672135,37.53887912081856],[127.00182422576096,37.53893696297997],[127.0018019174117,37.53878992750029],[127.00178391887204,37.53867891925713],[127.00173879861427,37.53851503098423],[127.00173474188395,37.538456902947054],[127.00142653233496,37.53852633776838],[127.00137558349563,37.53837264202141],[127.00085015557272,37.53837274774492],[127.00078438192527,37.538361950080656],[127.0006629730143,37.53831996938768],[127.00062355929019,37.53827930010658],[127.00060074708628,37.53820018141828],[127.00057822795266,37.53811515908807],[127.0005455309432,37.538049563288766],[127.0004137300713,37.537872757480805],[127.00021755069865,37.537610878736714],[126.99997765104598,37.53728774311317],[126.9998751271753,37.537165633627126],[126.99950102517371,37.536780533802734],[126.99923803451553,37.53651118521515],[126.99922631227923,37.53650036180175],[126.99918299352281,37.53645810571355],[126.99917778584475,37.53645348872928],[126.99913890451906,37.53641817384496],[126.99905425121364,37.53634268735605],[126.99894830783556,37.536266191443225],[126.99877342630468,37.53610391537748],[126.99861715827149,37.535958252713606],[126.99845502907769,37.53584329372144],[126.99826722202526,37.5357425760181],[126.99814822748716,37.53566456543071],[126.99793761147905,37.535529535093715],[126.997928740773,37.53552428725806],[126.99775292617292,37.53544102756555],[126.99764896434901,37.53540058307114],[126.99760147155453,37.535386102845855],[126.9975802666368,37.53538044307297],[126.99739942673287,37.53533985117824],[126.99719737112235,37.535305093248915],[126.99677648220096,37.53523424603522],[126.99677210793044,37.53523417515447],[126.99673048663446,37.53522815682883],[126.99660014937646,37.53521957517738],[126.99639250838301,37.5352304679832],[126.99635797461916,37.535249590663135],[126.99568601181294,37.53521863681798],[126.99538035329715,37.53514677235068],[126.99526528946156,37.53509630931902],[126.99516719641056,37.53520913039588],[126.99510249793101,37.535283452997284],[126.99506824908671,37.53530046867186],[126.99502021887493,37.53531579970187],[126.99456058707857,37.535317945858324],[126.99443240204579,37.535338930560656],[126.99434255068402,37.53537212791964],[126.99427918507762,37.53540472100209],[126.9941387652023,37.535495942936954],[126.993511473865,37.53544524969084],[126.99326714900546,37.535406483864634],[126.99283425938788,37.535330568777056],[126.99246472424012,37.53543181688017],[126.99234442186628,37.53551298571026],[126.99212779393409,37.53559855270362],[126.99212758775859,37.53560869721583],[126.99223266272959,37.53568720621213],[126.99220836751627,37.53573512748678],[126.99221272323318,37.53579739518892],[126.99228177173974,37.53589428290595],[126.99226146513716,37.53596123749243],[126.9922963072993,37.53609011959803],[126.99229605759159,37.5360954811022],[126.99238940572488,37.53614462627665],[126.99240359622988,37.53622141901413],[126.99228694103844,37.536227004377],[126.99219772542452,37.53624083715599],[126.99211412118301,37.53626315871323],[126.99188270952435,37.536365592015414],[126.99180416007269,37.53640908058919],[126.99169872877178,37.53642172201525],[126.99163504936118,37.53646620806972],[126.99152555412047,37.53648557627036],[126.99123153157839,37.53659938894316],[126.99118084179308,37.536586467796475],[126.99101562168114,37.53630792475598],[126.99091323447728,37.53623525675066],[126.9908848494529,37.5362191078567],[126.99069324803934,37.53613270802117],[126.99059592478554,37.536105250896206],[126.99006418825229,37.536016400364126],[126.99000742528649,37.535935258395114],[126.9899744804005,37.53590417319736],[126.98992423759232,37.53587091679812],[126.98992886470548,37.53585923606609],[126.98981964004565,37.53575629145976],[126.9897735156461,37.535725810565744],[126.98973182745608,37.535689981446154],[126.98971434095948,37.53567696164266],[126.98964680137041,37.53563547888617],[126.98960473068051,37.53561710830725],[126.98955100068508,37.535602167852836],[126.98954162421788,37.53559288266755],[126.98944177143927,37.535537974973465],[126.98925247327604,37.53532118838731],[126.98921496674777,37.53529070805926],[126.98913209445242,37.535245691509296],[126.9887874311299,37.53503676124138],[126.98859024067592,37.535071861376416],[126.98835756783298,37.53510049899883],[126.98829167468676,37.53507344674078],[126.98827444645646,37.53503227093714],[126.98829016176336,37.535023795482296],[126.98825823243033,37.534988673226465],[126.98806011716891,37.534466307475725],[126.98813110007941,37.53435873723819],[126.98817166054597,37.53430424619359],[126.99081532152935,37.53070053670942],[126.99082089884722,37.53068661060394],[126.99114687162243,37.53023674774913],[126.99120668209916,37.53023836690555],[126.99124563997569,37.53030452088333]]]},properties:{CATEGORY:"",AREA_CD:"POI004",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.0930735179394,37.51051251319657],[127.09329113161432,37.51036838269352],[127.09750899278401,37.51005875187169],[127.09728862854139,37.50671454691095],[127.09722315551396,37.50583744156247],[127.09851608497742,37.505953036015356],[127.09967970866413,37.506117458213296],[127.10286247447556,37.507465574104344],[127.10464858967383,37.50821809664012],[127.10479308527971,37.50832999366396],[127.104500206387,37.50865496629966],[127.10804294156034,37.51141753379699],[127.1088702555959,37.51108436037687],[127.10905470749152,37.51136768387452],[127.10857199595613,37.51156383347964],[127.10966483308874,37.51324954340724],[127.10917257394009,37.51439782687124],[127.11003690683003,37.514692137347616],[127.11033870953867,37.51457350783001],[127.1105022705949,37.51483567030759],[127.11032560437238,37.51525585118013],[127.11181799086854,37.51576602846944],[127.1145773475653,37.51468553166552],[127.11583602560736,37.51669656553756],[127.12311381699728,37.51410202130544],[127.12741852551338,37.5123330997381],[127.12743447059307,37.512332215420216],[127.12749828169815,37.51233122843716],[127.12756132338536,37.5123354065527],[127.12762391696019,37.512344042919274],[127.12768294047785,37.51235885260319],[127.12774414767136,37.51237062337977],[127.12785620877008,37.51242198008635],[127.12791884944022,37.512460091627524],[127.1309530531167,37.51743219158102],[127.13041001558095,37.517672194211606],[127.12997751642177,37.517873418620354],[127.12983912307628,37.51795673186725],[127.12970798131118,37.51806132011186],[127.12965904518485,37.51811069492632],[127.1296544057204,37.518115357618385],[127.12959392016636,37.518176558501075],[127.1294935138123,37.51831048725062],[127.1294092220052,37.518453032932506],[127.12934870144741,37.518605759968864],[127.12931345762934,37.51874272876097],[127.12918210493983,37.519447172107604],[127.12911822796718,37.519745341571536],[127.12906505493818,37.51993614961808],[127.129000329584,37.520122294250726],[127.12892890476859,37.520282661812615],[127.12889504660465,37.52035424462975],[127.12877453990038,37.52059572152694],[127.12873929322086,37.52069382829842],[127.12858229046599,37.52106623328164],[127.12797367433724,37.52199810324564],[127.12796725507569,37.522007862990456],[127.12775600446844,37.52306920424254],[127.1286786218806,37.52329963023651],[127.12299792212255,37.52581164738589],[127.12296016566037,37.52582827887653],[127.12295878264085,37.52582870849373],[127.12294940864854,37.52583149289661],[127.12294562633646,37.52583263363056],[127.12294128689408,37.525833939568706],[127.12293744911528,37.52583507051865],[127.12282380007359,37.52586913089793],[127.12280751174183,37.525871555757725],[127.1227441904267,37.525882011268735],[127.12272394096986,37.52588516263418],[127.12254686067878,37.52590256085533],[127.12237948249299,37.525912007638276],[127.12220044010155,37.5259126105007],[127.12203701965508,37.5259074004523],[127.12186753313105,37.525893863546834],[127.1216971888652,37.525872591556805],[127.12164563542875,37.52586366627945],[127.12153296733284,37.52584515166833],[127.12147399502035,37.525832761782766],[127.12146795622061,37.525831531424075],[127.1213507644322,37.52580966733346],[127.12114895301498,37.52575470877971],[127.12094334482596,37.52569597213261],[127.12074387461777,37.52563675283706],[127.1206394162493,37.525606742211345],[127.119968257076,37.52541602165685],[127.11976300188883,37.525358746679885],[127.11959673471952,37.525321920551896],[127.11943825141236,37.52529225375052],[127.1192792905364,37.52526877109102],[127.11910306108678,37.5252509511444],[127.11905911498197,37.52524739396579],[127.1189360226271,37.52523970950301],[127.11889970069355,37.52523840377473],[127.11881870005043,37.525236126685414],[127.11876678826673,37.52523441041103],[127.11866434817027,37.52523494160443],[127.11859607028191,37.525235118549595],[127.11845547802193,37.5252414747609],[127.11842657069359,37.52524270094767],[127.11825850846529,37.52525607004428],[127.1180916578062,37.52527561720872],[127.11792363787349,37.5253020721354],[127.11780921755727,37.52532288026552],[127.1175505577083,37.52524825325555],[127.11255657049843,37.517167563299026],[127.11227465684202,37.51716969148476],[127.11185209573603,37.5170264144332],[127.10699969612253,37.51537819413812],[127.10619541222803,37.515105509016905],[127.10515124729983,37.51474922045114],[127.10156506213141,37.513530923761515],[127.10120214452606,37.51340736474636],[127.10119453345784,37.51340528268378],[127.1011605326865,37.51339093115947],[127.09897928464073,37.51274893179041],[127.09642073336632,37.512115760207976],[127.09617225059999,37.51206809126827],[127.09611898480881,37.51205967987522],[127.0959181856207,37.512028316695805],[127.09562452394115,37.511992972495754],[127.09290849022653,37.51172346401625],[127.09272111558306,37.51149776510975],[127.0930735179394,37.51051251319657]]]},properties:{CATEGORY:"",AREA_CD:"POI005",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97757889424061,37.57008219988491],[126.97752930899671,37.570082189230625],[126.97751181305455,37.570068255735556],[126.97752665312156,37.569313731795184],[126.9776287566106,37.569262678027044],[126.97760542891997,37.569244100050184],[126.97787963028333,37.56916290175426],[126.97803713905111,37.56914900532526],[126.97808089404624,37.56913740642875],[126.97811297821069,37.569137413175035],[126.97825298719718,37.56912119115724],[126.97831715627595,37.56911888292552],[126.97844257995966,37.56910730088665],[126.97852424870928,37.56910731779165],[126.97881884628954,37.569086483702634],[126.97886551712021,37.56907720673263],[126.9791688632301,37.56906101679671],[126.97927095057264,37.56905639404698],[126.97930595437364,37.56904711456506],[126.9794897110955,37.56904018631179],[126.97955096260321,37.56904019845255],[126.98049017327934,37.56897073196837],[126.98093716576697,37.568961529560184],[126.98113112664385,37.56896853038513],[126.98140967356821,37.56897322471172],[126.98186321423496,37.569015095679646],[126.98198525661773,37.56903245700089],[126.98230318300287,37.56902554808488],[126.98265611772975,37.568990784860226],[126.98272904366547,37.56896293788846],[126.98281654885092,37.56895134471094],[126.98310240303553,37.568897995731106],[126.98314323729737,37.5688980025789],[126.98377036877237,37.568765773501106],[126.98377036045075,37.56879827621239],[126.98388120206658,37.56877507791689],[126.98387245720306,37.56875418190521],[126.98446458150777,37.56863819483952],[126.98538484350237,37.5684851080389],[126.98539505037968,37.5684920744219],[126.98594196252225,37.56837026916421],[126.98623218706646,37.5683180740403],[126.98660188745751,37.56828446219525],[126.9871035737002,37.56822648991245],[126.98741275040427,37.56819867145968],[126.98763442051853,37.56819637874741],[126.9886144447372,37.56813846101017],[126.98884486605769,37.56812920221747],[126.98902861878392,37.568126902360454],[126.98925028481817,37.56814550121713],[126.98943403715357,37.56814552235169],[126.98961778866337,37.56815018644535],[126.99014278902443,37.56818739039754],[126.99142612298381,37.56829431696226],[126.99226028802306,37.56839190337991],[126.99333362604979,37.56848950356724],[126.9936661318098,37.568489530101175],[126.99508947765095,37.56860571422215],[126.99625032420818,37.568703293661734],[126.99626782621348,37.568684721670174],[126.9963144938107,37.5686847242909],[126.99632615866308,37.56870794116704],[126.99779034160578,37.56890303015539],[126.99791284285185,37.56892625163869],[126.99882285630713,37.56906558407189],[127.00074789290275,37.56946495421508],[127.00119707139474,37.56954389677951],[127.00133124089706,37.569608904079956],[127.00146541135544,37.56963676527488],[127.00150624567173,37.5696553387475],[127.00211293186045,37.569697133655325],[127.0026262824546,37.569678563077055],[127.00284212294137,37.56969713639471],[127.0035888146082,37.569697134532525],[127.00414883358692,37.56971105976867],[127.00445217760821,37.56973427244419],[127.00509969960918,37.56973426227053],[127.00607389957135,37.569738883517104],[127.00657558444846,37.56976208527306],[127.00666892168569,37.56977601207873],[127.00675059307456,37.56981315540918],[127.00686726431819,37.56982243805481],[127.00689643102305,37.56980386410062],[127.00697226675197,37.569799218278725],[127.00705976954394,37.56979457199965],[127.00713560473004,37.56978063958498],[127.00749145065744,37.569785269589296],[127.00852982485041,37.56985023023889],[127.0089090061018,37.56986414134725],[127.00923568678556,37.56989198378908],[127.00975487133566,37.569882668389894],[127.00995321572917,37.56992444593663],[127.00999988409981,37.569924443147585],[127.01018655848445,37.56993371829455],[127.0106007388946,37.56991976234717],[127.01122493295095,37.569961509287495],[127.01135910379689,37.56995453490835],[127.01207079687434,37.56995564270682],[127.01269061188145,37.569959075475744],[127.01356710261575,37.56995899969067],[127.01409358058302,37.56996011185188],[127.01461130860449,37.569963544153936],[127.01490006957364,37.56996525642376],[127.01539081846713,37.56997449209648],[127.01552717799507,37.5699762188313],[127.01563803133826,37.570069652222394],[127.0156562639233,37.57008561140716],[127.0156467982649,37.57016715939434],[127.01566011671238,37.57022955154364],[127.0156582442959,37.57025711646985],[127.01565351497946,37.570318567405906],[127.01563286360468,37.570551529858825],[127.01562703789756,37.570597962918896],[127.01562995874046,37.57062175922621],[127.01562704617997,37.570646716972156],[127.01561027457258,37.57064671877603],[127.01559609165813,37.57086205070068],[127.01562197898471,37.570865820553465],[127.0156088633834,37.57092502331251],[127.01559026871833,37.570925097860126],[127.01558863311098,37.57095520656448],[127.01558627069443,37.57099946272756],[127.01560960504244,37.57099844451255],[127.01561434779727,37.57101571106244],[127.01558590877075,37.5710152788127],[127.01558045047416,37.57107868868425],[127.01557426664539,37.57116386383342],[127.01556953750953,37.5712271285234],[127.01557161889254,37.5712726719823],[127.0155733966707,37.57127466693516],[127.01556301101878,37.57130744281184],[127.01555339967774,37.57133747981692],[127.01555052999313,37.57134676660932],[127.01555783368542,37.57141554385963],[127.01555619301682,37.57141583423788],[127.01555437357572,37.571437019227055],[127.0155616653617,37.571435277230556],[127.01556389512551,37.57168456107441],[127.0155449566191,37.571808769834476],[127.01554644051701,37.57195967504929],[127.0155493659937,37.5720107504004],[127.0156311395159,37.572608559022676],[127.01555683287584,37.57304503170246],[127.01510979736581,37.57291390713417],[127.0143510034626,37.572665569615154],[127.01413221831861,37.5725379014481],[127.01084190086227,37.57176042501489],[127.00922592345472,37.571221906236374],[127.0092142444387,37.571082609573736],[127.00163051896052,37.5709527594511],[126.99779200732587,37.57073906590567],[126.992810145942,37.57043229029633],[126.99115341632005,37.57037641786225],[126.98803831893072,37.57019962300841],[126.98786330068418,37.57025531973804],[126.98477151207246,37.57023631193588],[126.98325478621692,37.57022678253361],[126.97775954815557,37.57027217167125],[126.97761954240522,37.57027214174906],[126.97762539717792,37.57020945921686],[126.97759039576968,37.57020945171211],[126.97758159730625,37.57008241358269],[126.97757889424061,37.57008219988491]]]},properties:{CATEGORY:"",AREA_CD:"POI006",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.915029,37.55011],[126.91497,37.550065],[126.914914,37.550023],[126.914843,37.54997],[126.914811,37.549946],[126.914769,37.549915],[126.914726,37.549884],[126.914683,37.549852],[126.914602,37.549791],[126.914504,37.549718],[126.914468,37.549691],[126.914309,37.549573],[126.914174,37.549473],[126.914008,37.549653],[126.914297,37.549853],[126.914536,37.550018],[126.915078,37.55041],[126.915554,37.550749],[126.915556,37.55075],[126.915604,37.550787],[126.915824,37.550954],[126.915884,37.551],[126.916053,37.551132],[126.916493,37.551448],[126.916634,37.551549],[126.916675,37.55158],[126.91676,37.551644],[126.916861,37.551721],[126.91703,37.551848],[126.917112,37.55191],[126.917889,37.552495],[126.918113,37.552667],[126.918188,37.55272],[126.918323,37.552815],[126.918504,37.552952],[126.91873,37.553122],[126.919152,37.55344],[126.919881,37.553968],[126.919911,37.55399],[126.920727,37.5546],[126.921364,37.555078],[126.921523,37.555191],[126.921734,37.555342],[126.922716,37.556074],[126.922763,37.556109],[126.923545,37.5567],[126.924093,37.557101],[126.924099,37.557105],[126.924884,37.557681],[126.924899,37.557692],[126.924955,37.557734],[126.924971,37.557746],[126.925497,37.558139],[126.925662,37.558262],[126.92568,37.558276],[126.925681,37.558276],[126.925687,37.558281],[126.925784,37.558352],[126.92581,37.558372],[126.925839,37.558393],[126.926194,37.558656],[126.926594,37.558849],[126.926595,37.558918],[126.926601,37.559452],[126.926612,37.559636],[126.926662,37.56041],[126.926679,37.560504],[126.926676,37.560568],[126.926676,37.560569],[126.926674,37.560609],[126.926672,37.560653],[126.926672,37.560656],[126.926659,37.560628],[126.926668,37.560676],[126.92668,37.560741],[126.926693,37.560811],[126.926697,37.560833],[126.926709,37.560898],[126.92671,37.560906],[126.926715,37.560936],[126.926721,37.560967],[126.926761,37.561072],[126.926774,37.561108],[126.926813,37.5612],[126.926844,37.561269],[126.926848,37.561281],[126.926894,37.561358],[126.926929,37.561417],[126.926939,37.561435],[126.926941,37.561439],[126.926946,37.561445],[126.926986,37.561504],[126.927061,37.561611],[126.92712,37.561698],[126.927169,37.561769],[126.927181,37.561788],[126.927188,37.56179],[126.927189,37.561791],[126.927191,37.561793],[126.927166,37.561784],[126.92716,37.561781],[126.92709,37.561765],[126.926979,37.561705],[126.926941,37.561668],[126.926918,37.561655],[126.926803,37.561594],[126.926795,37.56159],[126.926775,37.561579],[126.926747,37.561564],[126.92667,37.56152],[126.92656,37.561459],[126.926532,37.561443],[126.926496,37.561422],[126.926444,37.561382],[126.926358,37.561314],[126.926348,37.561306],[126.926281,37.561254],[126.926257,37.561236],[126.926246,37.561228],[126.926167,37.56117],[126.926068,37.561097],[126.926059,37.561091],[126.926042,37.561078],[126.92602,37.561061],[126.925925,37.560973],[126.92586,37.560911],[126.925852,37.560903],[126.925845,37.56089],[126.925819,37.56084],[126.925802,37.560808],[126.925755,37.560719],[126.925745,37.5607],[126.925742,37.560694],[126.925729,37.56067],[126.925683,37.560587],[126.925667,37.560557],[126.925657,37.560538],[126.925641,37.560509],[126.925616,37.560465],[126.925607,37.56045],[126.925605,37.560447],[126.925589,37.560417],[126.925581,37.560412],[126.925529,37.560379],[126.925526,37.560379],[126.925476,37.56039],[126.92539,37.560393],[126.925389,37.560393],[126.925287,37.560401],[126.925255,37.560402],[126.92525,37.560402],[126.925218,37.560406],[126.925137,37.56043],[126.925134,37.560425],[126.925055,37.560445],[126.924973,37.560512],[126.924962,37.560507],[126.924947,37.560517],[126.924908,37.560547],[126.924887,37.560573],[126.924885,37.560576],[126.924881,37.560576],[126.924871,37.560576],[126.924802,37.560597],[126.92478,37.560606],[126.924759,37.560627],[126.924753,37.560632],[126.92475,37.560631],[126.924742,37.560627],[126.924666,37.560662],[126.924652,37.560694],[126.924644,37.560713],[126.924622,37.560763],[126.924605,37.560766],[126.924604,37.560766],[126.924572,37.560773],[126.924506,37.560787],[126.924405,37.560815],[126.924254,37.560857],[126.924249,37.560858],[126.924234,37.560862],[126.924144,37.560887],[126.924128,37.560864],[126.924072,37.560785],[126.924048,37.560748],[126.924039,37.560721],[126.924033,37.560706],[126.923994,37.560605],[126.923968,37.560553],[126.923967,37.560551],[126.923956,37.560378],[126.923955,37.560356],[126.923949,37.560289],[126.923943,37.56027],[126.923905,37.560144],[126.923873,37.560148],[126.923866,37.560149],[126.92385,37.560083],[126.923838,37.560073],[126.923831,37.560067],[126.923807,37.56005],[126.923787,37.560015],[126.923768,37.559982],[126.92369,37.560077],[126.923406,37.560426],[126.923273,37.560589],[126.923269,37.560586],[126.923191,37.560533],[126.922866,37.560312],[126.922699,37.560198],[126.922505,37.560067],[126.921744,37.559548],[126.921597,37.559449],[126.921563,37.559425],[126.921229,37.559198],[126.920568,37.558747],[126.919898,37.55829],[126.919776,37.558206],[126.91934,37.557909],[126.918953,37.557645],[126.918912,37.557619],[126.918791,37.557535],[126.918882,37.557453],[126.919286,37.557108],[126.919392,37.557013],[126.919601,37.556825],[126.919868,37.556593],[126.920003,37.556478],[126.920031,37.556455],[126.920409,37.55613],[126.92055,37.556018],[126.920387,37.55597],[126.920139,37.5559],[126.91992,37.555831],[126.919909,37.555828],[126.919541,37.555713],[126.919411,37.555673],[126.919353,37.555655],[126.919123,37.555583],[126.919093,37.555574],[126.919087,37.555572],[126.919076,37.555569],[126.918805,37.55548],[126.918734,37.555461],[126.918725,37.555459],[126.918629,37.555434],[126.918506,37.555413],[126.91806,37.555338],[126.918003,37.555328],[126.917946,37.555318],[126.91785,37.5553],[126.917827,37.555296],[126.917618,37.55526],[126.917377,37.555219],[126.917183,37.555186],[126.916732,37.555109],[126.916557,37.55508],[126.916494,37.555069],[126.916406,37.555054],[126.916173,37.555014],[126.916006,37.554985],[126.915756,37.554944],[126.915642,37.554925],[126.915147,37.554842],[126.915111,37.554836],[126.915006,37.55482],[126.914656,37.554765],[126.914471,37.554733],[126.914304,37.554704],[126.913857,37.554627],[126.913758,37.55461],[126.913704,37.5546],[126.913647,37.554588],[126.913637,37.554586],[126.913623,37.554583],[126.91321,37.554511],[126.912843,37.554446],[126.912765,37.554432],[126.912753,37.55443],[126.912472,37.554381],[126.912321,37.554356],[126.912216,37.554339],[126.911914,37.55429],[126.911698,37.55424],[126.911679,37.554187],[126.911723,37.554036],[126.912078,37.552868],[126.912079,37.552866],[126.912107,37.552778],[126.912115,37.552753],[126.912121,37.552732],[126.912134,37.552689],[126.912164,37.552594],[126.912202,37.552471],[126.912228,37.552384],[126.912253,37.552305],[126.91226,37.55228],[126.912274,37.552235],[126.912381,37.551883],[126.912414,37.551779],[126.912433,37.551718],[126.91247,37.551596],[126.912521,37.551429],[126.912616,37.55112],[126.912683,37.550897],[126.912766,37.550624],[126.912798,37.550517],[126.9128,37.55051],[126.912818,37.550433],[126.912928,37.550075],[126.912994,37.54986],[126.913022,37.549771],[126.913086,37.54956],[126.913118,37.549455],[126.913212,37.549145],[126.91326,37.548987],[126.913261,37.548983],[126.913422,37.54895],[126.913529,37.549013],[126.913643,37.54908],[126.913669,37.548992],[126.914071,37.548908],[126.914341,37.548852],[126.914387,37.548843],[126.914483,37.548823],[126.914661,37.548786],[126.914838,37.54875],[126.914923,37.548733],[126.915403,37.548633],[126.91561,37.54859],[126.915751,37.548559],[126.916052,37.548494],[126.916364,37.54843],[126.916455,37.548414],[126.916963,37.548311],[126.917353,37.548229],[126.917718,37.548153],[126.91781,37.548134],[126.918379,37.548015],[126.9184,37.548011],[126.918504,37.548008],[126.918661,37.548004],[126.918744,37.548001],[126.91877,37.547999],[126.918877,37.547994],[126.918895,37.547993],[126.919013,37.547988],[126.91912,37.547984],[126.919742,37.547961],[126.919931,37.547954],[126.92,37.547951],[126.920262,37.547934],[126.920332,37.547932],[126.920408,37.54793],[126.920441,37.547929],[126.920453,37.547954],[126.920527,37.547953],[126.920607,37.54795],[126.920595,37.547925],[126.920628,37.547923],[126.920762,37.547919],[126.920795,37.547916],[126.920821,37.547914],[126.920905,37.54791],[126.921034,37.547905],[126.921139,37.547902],[126.921159,37.547922],[126.921164,37.547928],[126.92125,37.547924],[126.921287,37.547923],[126.921294,37.547899],[126.921356,37.547898],[126.921418,37.547896],[126.921486,37.547894],[126.921556,37.547892],[126.921558,37.547914],[126.921575,37.547915],[126.921706,37.547908],[126.921773,37.547905],[126.921839,37.547902],[126.921839,37.547881],[126.921891,37.54788],[126.921891,37.547902],[126.921954,37.5479],[126.922037,37.547897],[126.922108,37.547894],[126.922204,37.547891],[126.922398,37.547885],[126.92247,37.547882],[126.922558,37.547879],[126.922615,37.547877],[126.922688,37.547874],[126.922752,37.547872],[126.922977,37.547864],[126.922981,37.548019],[126.923057,37.549973],[126.923181,37.550041],[126.923187,37.550033],[126.923398,37.550147],[126.923537,37.550222],[126.923562,37.550234],[126.923759,37.550338],[126.923873,37.550402],[126.923899,37.550414],[126.924034,37.550487],[126.924136,37.550543],[126.924171,37.55056],[126.92421,37.550581],[126.924211,37.550622],[126.924245,37.550861],[126.924246,37.550896],[126.924254,37.550924],[126.92426,37.551063],[126.924249,37.551143],[126.924221,37.551144],[126.924235,37.551282],[126.924223,37.551422],[126.924199,37.551534],[126.924196,37.551546],[126.924091,37.551833],[126.924051,37.552068],[126.924035,37.552087],[126.92412,37.55225],[126.924142,37.552293],[126.92419,37.552269],[126.924228,37.552341],[126.924268,37.552416],[126.924279,37.552544],[126.924291,37.552679],[126.924269,37.552714],[126.924335,37.552791],[126.924256,37.552859],[126.925415,37.553303],[126.92552,37.553323],[126.925629,37.553323],[126.926363,37.553225],[126.926604,37.553247],[126.926849,37.553297],[126.927429,37.553427],[126.928531,37.553668],[126.92881,37.553793],[126.929113,37.553995],[126.929815,37.554479],[126.93002,37.554671],[126.930156,37.554842],[126.931641,37.556852],[126.931472,37.556915],[126.931308,37.556974],[126.931269,37.556989],[126.931206,37.557012],[126.931106,37.557048],[126.931099,37.557051],[126.931034,37.557074],[126.930996,37.557088],[126.930994,37.557088],[126.930866,37.557134],[126.930724,37.557186],[126.930609,37.557229],[126.930407,37.557303],[126.930285,37.557348],[126.930092,37.557419],[126.930069,37.557428],[126.929778,37.557535],[126.929627,37.55759],[126.929421,37.557665],[126.929186,37.557752],[126.928979,37.557827],[126.928969,37.557831],[126.928792,37.557896],[126.928708,37.557928],[126.928139,37.558137],[126.928107,37.558148],[126.927884,37.55823],[126.927662,37.558311],[126.927579,37.558342],[126.927237,37.558469],[126.927088,37.558522],[126.926975,37.55851],[126.926896,37.558503],[126.926806,37.558493],[126.926626,37.558474],[126.92635,37.558445],[126.926237,37.558435],[126.92623,37.558433],[126.926067,37.558312],[126.925972,37.558242],[126.925921,37.558204],[126.925812,37.55812],[126.925713,37.558047],[126.925637,37.557991],[126.925612,37.557972],[126.925543,37.557921],[126.925489,37.557881],[126.925419,37.55783],[126.925296,37.557738],[126.925237,37.557695],[126.925178,37.557649],[126.925103,37.557593],[126.92504,37.557546],[126.924928,37.557464],[126.924738,37.557322],[126.924596,37.557218],[126.924395,37.557067],[126.92432,37.557011],[126.924278,37.556982],[126.92419,37.556918],[126.924095,37.556847],[126.923949,37.55674],[126.923812,37.556637],[126.923808,37.556634],[126.92367,37.556532],[126.92359,37.556471],[126.92346,37.556374],[126.923331,37.55628],[126.923222,37.556198],[126.922949,37.555994],[126.922884,37.555946],[126.922748,37.555846],[126.92272,37.555825],[126.922581,37.555719],[126.922413,37.555594],[126.92228,37.555497],[126.922092,37.555355],[126.921929,37.555235],[126.921826,37.55516],[126.921522,37.554937],[126.921395,37.554842],[126.921204,37.554699],[126.920922,37.554489],[126.92081,37.554405],[126.920706,37.554328],[126.920602,37.554251],[126.92037,37.554077],[126.920322,37.554042],[126.920189,37.553945],[126.920069,37.553855],[126.920002,37.553805],[126.919895,37.553727],[126.919784,37.553645],[126.919717,37.553595],[126.919387,37.553349],[126.919243,37.553243],[126.91909,37.553129],[126.918938,37.553017],[126.918784,37.552901],[126.918717,37.552852],[126.918489,37.552681],[126.918205,37.55247],[126.918082,37.552377],[126.917959,37.55229],[126.91789,37.552238],[126.917663,37.55207],[126.917549,37.551986],[126.91745,37.551912],[126.917296,37.551798],[126.917048,37.551613],[126.917013,37.551587],[126.916675,37.551335],[126.916625,37.551299],[126.916198,37.550983],[126.916062,37.550881],[126.916029,37.550857],[126.915935,37.550788],[126.915914,37.550772],[126.915796,37.550684],[126.915715,37.550624],[126.915685,37.550597],[126.915575,37.550517],[126.915472,37.55044],[126.915465,37.550435],[126.915312,37.550321],[126.915255,37.550278],[126.915195,37.550232],[126.915112,37.550171],[126.915067,37.550137],[126.915029,37.55011]]]},properties:{CATEGORY:"",AREA_CD:"POI007",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.974232834459,37.57592477838023],[126.97685417570085,37.57570178692703],[126.97893898235567,37.575901994246706],[126.97938637588838,37.57642333483907],[126.9794404308676,37.578325948794564],[126.97950575479815,37.578951473837],[126.97953843619194,37.579194734809754],[126.9796147867681,37.57942062793486],[126.98010558394114,37.581019246210474],[126.98011643322756,37.58127119094284],[126.98011627149351,37.5818793289163],[126.98012710477448,37.5821920874022],[126.98010519787479,37.5824700896196],[126.98002872899082,37.582669893444795],[126.97985399193549,37.58293918195346],[126.97966834882565,37.583165029896364],[126.97943905716726,37.58332136847905],[126.97928620515734,37.5833908432206],[126.97862025561925,37.58351235204391],[126.97668793760953,37.58373786599659],[126.97530152999764,37.58370283332384],[126.97430816580781,37.58354624301098],[126.97387152075657,37.58348533338841],[126.97360284352135,37.58358393001671],[126.97359983842865,37.58355272573567],[126.97373348842103,37.58087404511662],[126.97380634001972,37.57953950618876],[126.974232834459,37.57592477838023]]]},properties:{CATEGORY:"",AREA_CD:"POI008",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98284202000518,37.570097873756794],[126.9828835842787,37.570099287617964],[126.98287494612273,37.57013431966451],[126.98284347347666,37.57039060801186],[126.9827796978825,37.575734039697075],[126.98263181574896,37.575725610789526],[126.98038177926465,37.576053140778725],[126.98007544440044,37.57606149671544],[126.97988530915003,37.57605305722868],[126.97711785785522,37.57570785628892],[126.97686064247789,37.575715117100685],[126.97272238031492,37.57604743830892],[126.97262016512711,37.57607452969326],[126.97267160960789,37.57513906511876],[126.97267349705062,37.5699736532739],[126.9744240191872,37.56994418335477],[126.974333,37.569445],[126.974323,37.569243],[126.974323,37.569241],[126.974285,37.568915],[126.974235,37.568698],[126.974134,37.568568],[126.974113,37.568541],[126.974007,37.568421],[126.973754,37.568139],[126.973532,37.567882],[126.97342,37.56775],[126.973303,37.567612],[126.973293,37.56758],[126.973275,37.567522],[126.97327,37.567509],[126.973281,37.567381],[126.973369,37.567034],[126.973473,37.566688],[126.973504,37.566583],[126.973504,37.566223],[126.973504,37.566206],[126.973495,37.565615],[126.973492,37.56525],[126.973737,37.565036],[126.973907,37.564811],[126.974067,37.564751],[126.974265,37.564759],[126.975085,37.564827],[126.975123,37.56483],[126.975895,37.564902],[126.976162,37.564902],[126.97626,37.564893],[126.976347,37.564885],[126.976495,37.564871],[126.97664,37.564857],[126.976705,37.564853],[126.977172,37.564826],[126.977168,37.564987],[126.977167,37.565025],[126.977135,37.56621],[126.977124,37.566626],[126.977124,37.566648],[126.977122,37.566722],[126.977114,37.566993],[126.977113,37.567032],[126.97711,37.567141],[126.977107,37.567277],[126.977102,37.567447],[126.977088,37.567978],[126.977078,37.568266],[126.977072,37.568434],[126.977071,37.568439],[126.977067,37.568561],[126.977067,37.568571],[126.977062,37.568716],[126.977059,37.56879],[126.977057,37.568833],[126.977048,37.569089],[126.977047,37.569135],[126.977046,37.569142],[126.977061,37.569188],[126.977057,37.569247],[126.97699758031196,37.5700700070225],[126.98284202000518,37.570097873756794]]]},properties:{CATEGORY:"",AREA_CD:"POI009",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98053042152277,37.57168845182166],[126.98100390883326,37.57061153685107],[126.98102907870694,37.570292026259516],[126.9807029304368,37.57027200373355],[126.98100427652876,37.56916373606411],[126.98264759006416,37.569022156789245],[126.98260291202716,37.56903256718416],[126.98309919407669,37.56898432752663],[126.98440532570318,37.56873213882985],[126.98440516470856,37.56872962998063],[126.98568338507262,37.56847544258085],[126.98569560642798,37.57016288108382],[126.98563260661204,37.57161067404291],[126.98586465782512,37.57173551243637],[126.9857830590557,37.57204503237067],[126.98588341254036,37.572065014072884],[126.98572653568867,37.57242444907134],[126.98555718678423,37.57239946640157],[126.98539405087458,37.57267902154226],[126.98498011179419,37.57248925785373],[126.98301069107589,37.572039673535414],[126.98123473474928,37.57229181699503],[126.9810976437175,37.57198945857826],[126.98089697144408,37.57182467658206],[126.98053042152277,37.57168845182166]]]},properties:{CATEGORY:"",AREA_CD:"POI010",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.13024488561626,37.558718111184305],[127.13024863661806,37.55871689769751],[127.1304989610301,37.55863591642372],[127.13056960937683,37.55799098947585],[127.13074012289684,37.55805246411827],[127.13111245785764,37.558360367885],[127.13151478556586,37.55810298989],[127.13233703239533,37.55878036773066],[127.1310976294214,37.5598893903602],[127.13113680806734,37.559945096051365],[127.13121091838957,37.56005482270354],[127.13130718162948,37.56019183618571],[127.1313628465476,37.56027032995801],[127.13147733986376,37.56041577001837],[127.13160973839193,37.56058624899085],[127.1316864826209,37.56068442850973],[127.13175152740908,37.56076657201791],[127.1318901339099,37.56094689838264],[127.13197202111867,37.56105295568265],[127.13209272605006,37.561209650621734],[127.13209378957731,37.561211057240534],[127.13218029746875,37.56132977943528],[127.13218047480579,37.56133006079801],[127.13218135313261,37.56132668111827],[127.13224287982105,37.56141896436237],[127.13224252662178,37.561419246312376],[127.1322425271137,37.56141952787082],[127.13233937869096,37.56158751131273],[127.13239279548802,37.56169388140797],[127.13247036112811,37.56185597337112],[127.1325314542049,37.56200316093299],[127.13257961251634,37.56213600331147],[127.13260448705658,37.56220214205011],[127.13264825897444,37.56235469839122],[127.13270221656526,37.56256721544716],[127.13275369408757,37.56287799928776],[127.13277484579278,37.563039590588495],[127.13281230288321,37.56332195251542],[127.1328316043082,37.56343680707658],[127.13287818601803,37.563778849294934],[127.1328649335497,37.56378533989216],[127.13278718670989,37.563823999919414],[127.13276244926425,37.56383641600933],[127.13260256607343,37.56373016436996],[127.13231749624768,37.56353620488938],[127.13203933487816,37.56334786825428],[127.13180666891888,37.56318453950486],[127.13180348121061,37.563182008992186],[127.13180436791083,37.563183415808304],[127.13153115113936,37.562989441328234],[127.13152247231443,37.562981848793896],[127.13151808288076,37.56300015495583],[127.13150326031032,37.563019035721695],[127.131511134882,37.56297088047906],[127.13147925359807,37.56294304124257],[127.1314751386292,37.562915734557436],[127.13143054771562,37.56290142412357],[127.13130072441419,37.5627903511219],[127.13108181599951,37.56260391797123],[127.1306935873151,37.562270132885295],[127.13056075834169,37.562158217667736],[127.13015532983663,37.56179516744679],[127.12989904214035,37.56156766517365],[127.12966149486661,37.56133620017118],[127.12951838510462,37.561208527613914],[127.1293796709704,37.561065645933766],[127.1293027861855,37.56098717420292],[127.12911890076721,37.560799291644564],[127.12893271155154,37.56060803257092],[127.12870522883989,37.56036388458436],[127.12859041933388,37.560237306627144],[127.12854559349896,37.560187518908165],[127.12847737816405,37.560110445095034],[127.12842705890534,37.56005390581902],[127.12832659745837,37.55994082701078],[127.12828868121711,37.559898352306384],[127.12825607742967,37.559860095273415],[127.12823782647325,37.559838716372596],[127.12814302977418,37.559728728473836],[127.12801968573724,37.55957372163157],[127.12798831678613,37.55953349228577],[127.12814154468873,37.55947814248457],[127.12819668524743,37.559458092644476],[127.12829388863675,37.559423074992374],[127.12845011999131,37.55936631376982],[127.12851957588097,37.559341180325085],[127.12862102983694,37.55931009965864],[127.12872848144926,37.55927028411149],[127.12904924883497,37.55915365418767],[127.12922933709112,37.559087856271404],[127.12954091446598,37.55897545833564],[127.12972206241493,37.5589093769585],[127.12989419509216,37.55884555757777],[127.13001985014836,37.558800089878375],[127.13024488561626,37.558718111184305]]]},properties:{CATEGORY:"",AREA_CD:"POI011",AREA_NM:"  "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.989293,37.577407],[126.990041,37.577449],[126.990171,37.577064],[126.990305,37.576669],[126.990438,37.576233],[126.990446,37.576205],[126.990551,37.575856],[126.99061,37.575655],[126.990853,37.574828],[126.990883,37.574728],[126.990971,37.574435],[126.991023,37.574258],[126.991055,37.574153],[126.991148,37.57384],[126.991164,37.573786],[126.99123,37.573562],[126.991273,37.573417],[126.991445,37.572865],[126.991452,37.572843],[126.991532,37.572591],[126.991735,37.572008],[126.991741,37.571989],[126.991893,37.571512],[126.991939,37.571367],[126.991955,37.571314],[126.992008,37.571144],[126.992057,37.570953],[126.992088,37.570828],[126.992132,37.570451],[126.992647,37.570465],[126.992729,37.570469],[126.993262,37.570486],[126.993636,37.570498],[126.993786,37.570515],[126.994162,37.570519],[126.99443,37.570532],[126.994783,37.570556],[126.995347,37.570575],[126.995563,37.570589],[126.995715,37.570596],[126.996444,37.57064],[126.996843,37.570664],[126.997074,37.570677],[126.997464,37.570699],[126.997754,37.570715],[126.998843,37.570777],[126.998951,37.570786],[126.999216,37.570808],[126.999532,37.57083],[126.999998,37.570866],[127.000257,37.570885],[127.000317,37.570885],[127.000308,37.570897],[127.000296,37.57093],[127.000272,37.570992],[127.000257,37.57103],[127.000243,37.571074],[127.000225,37.571123],[127.000207,37.571167],[127.000192,37.571203],[127.000179,37.571235],[127.000169,37.571243],[127.000129,37.571278],[127.000087,37.571314],[127.000048,37.571348],[127.000044,37.571351],[127.000028,37.571374],[126.999995,37.571423],[126.999965,37.571467],[126.999931,37.571517],[126.999892,37.571573],[126.999882,37.571592],[126.999864,37.571629],[126.999837,37.571681],[126.999814,37.571709],[126.999777,37.571754],[126.999758,37.571778],[126.999746,37.571796],[126.999744,37.5718],[126.999711,37.571853],[126.999686,37.571894],[126.999667,37.571933],[126.999644,37.571976],[126.999624,37.572015],[126.999618,37.572025],[126.999597,37.572052],[126.999589,37.572063],[126.999568,37.57209],[126.999525,37.572128],[126.999466,37.572182],[126.999332,37.572295],[126.999284,37.572351],[126.999205,37.572445],[126.999196,37.572456],[126.999016,37.572667],[126.998936,37.572758],[126.998925,37.572771],[126.9988,37.572916],[126.998726,37.572986],[126.998628,37.57309],[126.998474,37.573251],[126.998376,37.573354],[126.99837,37.573365],[126.997595,37.573352],[126.997585,37.573532],[126.997206,37.573535],[126.997204,37.573569],[126.996981,37.573581],[126.996821,37.573579],[126.996679,37.573583],[126.996646,37.573588],[126.99662,37.573605],[126.996596,37.573688],[126.996466,37.573669],[126.996371,37.574091],[126.996307,37.574282],[126.996255,37.574445],[126.996242,37.574497],[126.996217,37.574685],[126.996196,37.574751],[126.99614,37.574833],[126.996048,37.574967],[126.995929,37.575141],[126.995894,37.575205],[126.995859,37.575306],[126.99583,37.575401],[126.995809,37.575522],[126.995767,37.575853],[126.996201,37.575945],[126.996457,37.576009],[126.996493,37.576128],[126.997351,37.575863],[126.997784,37.575858],[126.998392,37.575866],[126.99856,37.575869],[126.998669,37.57587],[126.999337,37.575887],[126.999396,37.57589],[126.999429,37.575893],[126.999458,37.575942],[126.999497,37.575973],[126.999546,37.575996],[126.999588,37.576011],[126.999599,37.576015],[126.999592,37.576027],[126.999583,37.576042],[126.999558,37.576088],[126.999545,37.576126],[126.999532,37.57613],[126.999491,37.576144],[126.999482,37.576147],[126.999458,37.576155],[126.999448,37.576159],[126.99943,37.576161],[126.999416,37.576164],[126.999402,37.576159],[126.999394,37.576144],[126.999386,37.576128],[126.999363,37.576133],[126.999341,37.576124],[126.999303,37.576129],[126.999296,37.57613],[126.999288,37.57613],[126.999271,37.576132],[126.999174,37.57614],[126.999145,37.576144],[126.999101,37.576227],[126.999101,37.576229],[126.999094,37.576241],[126.999047,37.576326],[126.999046,37.576328],[126.999046,37.576337],[126.999046,37.576339],[126.999044,37.576359],[126.99904,37.576412],[126.998978,37.576393],[126.998973,37.576399],[126.998939,37.576451],[126.99898,37.57647],[126.99897,37.576479],[126.99892,37.576544],[126.998884,37.576592],[126.998875,37.576603],[126.998869,37.576611],[126.998864,37.576617],[126.998847,37.576639],[126.998807,37.57669],[126.998804,37.576709],[126.9988,37.576727],[126.998786,37.576818],[126.998844,37.57683],[126.998839,37.576848],[126.998822,37.576911],[126.998424,37.576831],[126.998457,37.576716],[126.99847,37.576675],[126.998426,37.576666],[126.998362,37.576651],[126.998342,37.576647],[126.99834,37.576655],[126.998269,37.576642],[126.998219,37.576633],[126.998189,37.576618],[126.998084,37.576564],[126.998058,37.576587],[126.998034,37.576631],[126.99803,37.576638],[126.998037,37.576644],[126.998018,37.576662],[126.998002,37.576694],[126.997958,37.576685],[126.997895,37.576673],[126.997873,37.576724],[126.997869,37.576733],[126.997855,37.576766],[126.997854,37.576769],[126.997836,37.576811],[126.997793,37.576908],[126.997754,37.576994],[126.997727,37.577054],[126.997639,37.577033],[126.997663,37.57698],[126.997571,37.576957],[126.997548,37.576952],[126.997476,37.576933],[126.997443,37.576928],[126.99737,37.576925],[126.997333,37.576923],[126.99722,37.576919],[126.997165,37.576917],[126.997127,37.577072],[126.996994,37.577496],[126.996872,37.577887],[126.996756,37.578273],[126.996746,37.578306],[126.996727,37.578385],[126.996632,37.578769],[126.996595,37.579004],[126.996542,37.579298],[126.996438,37.579943],[126.996366,37.580355],[126.996362,37.580373],[126.996322,37.580555],[126.996313,37.58066],[126.996333,37.5809],[126.996354,37.580999],[126.996415,37.5811],[126.996355,37.5811],[126.996372,37.581129],[126.996466,37.581242],[126.996488,37.581264],[126.996497,37.581273],[126.996505,37.581279],[126.996537,37.581308],[126.99662,37.581383],[126.996659,37.581419],[126.996668,37.581428],[126.996544,37.581558],[126.996541,37.581571],[126.996518,37.581662],[126.996519,37.581667],[126.99656,37.581962],[126.996525,37.582206],[126.996506,37.582344],[126.996492,37.582446],[126.996282,37.582838],[126.996279,37.582846],[126.99626,37.582841],[126.996241,37.582901],[126.996211,37.583004],[126.996163,37.583149],[126.996138,37.583146],[126.996073,37.583294],[126.996041,37.583366],[126.99607,37.583372],[126.996048,37.583445],[126.996035,37.583501],[126.996007,37.583552],[126.996001,37.58356],[126.996002,37.583561],[126.995997,37.583571],[126.99597,37.583556],[126.995913,37.58362],[126.995834,37.583584],[126.995723,37.583714],[126.995704,37.583737],[126.995684,37.583772],[126.995567,37.583885],[126.995473,37.583973],[126.995416,37.584026],[126.995269,37.584163],[126.995244,37.584188],[126.995179,37.584256],[126.995127,37.584323],[126.9951,37.584355],[126.995044,37.584425],[126.994985,37.5845],[126.994924,37.584577],[126.994874,37.58464],[126.994832,37.584694],[126.994829,37.584699],[126.994836,37.584703],[126.994872,37.584731],[126.994867,37.584734],[126.994832,37.584703],[126.99483,37.584706],[126.994769,37.58478],[126.994687,37.584891],[126.994579,37.585095],[126.994561,37.58509],[126.994495,37.585176],[126.994444,37.585225],[126.99434,37.585317],[126.994246,37.585398],[126.994152,37.585493],[126.994141,37.585509],[126.994062,37.585624],[126.99404,37.585655],[126.994014,37.585691],[126.993928,37.585807],[126.993848,37.585963],[126.993887,37.585972],[126.993864,37.586033],[126.993796,37.586218],[126.993781,37.586241],[126.993752,37.586288],[126.993691,37.586386],[126.993674,37.586419],[126.993671,37.586496],[126.99366,37.586505],[126.99361,37.586555],[126.993609,37.586556],[126.993584,37.586582],[126.993555,37.586612],[126.993486,37.586681],[126.993384,37.586846],[126.993352,37.586886],[126.993314,37.586934],[126.99328,37.586952],[126.99323,37.58695],[126.993179,37.586947],[126.992991,37.587023],[126.99301,37.587039],[126.992981,37.587047],[126.993044,37.587084],[126.993081,37.587117],[126.993062,37.587153],[126.992981,37.587303],[126.992969,37.587302],[126.992296,37.587251],[126.992107,37.587236],[126.992124,37.58723],[126.991552,37.587186],[126.991013,37.587145],[126.990991,37.587143],[126.990628,37.587116],[126.99049,37.587105],[126.990428,37.587104],[126.990356,37.587133],[126.990332,37.587131],[126.990328,37.587145],[126.990101,37.587238],[126.989964,37.587299],[126.989719,37.587408],[126.989588,37.587466],[126.989531,37.587492],[126.989466,37.587552],[126.989374,37.587636],[126.989329,37.587631],[126.988771,37.587607],[126.988731,37.587607],[126.988408,37.587438],[126.988191,37.587325],[126.988124,37.587326],[126.987973,37.587315],[126.987933,37.587313],[126.987877,37.587292],[126.987727,37.587268],[126.987674,37.587259],[126.987713,37.587143],[126.987704,37.587118],[126.987738,37.587034],[126.987743,37.587018],[126.987816,37.586785],[126.98786,37.586697],[126.987875,37.586666],[126.987854,37.586505],[126.98784,37.586416],[126.987806,37.586294],[126.987797,37.586262],[126.98779,37.586219],[126.987786,37.586198],[126.987837,37.586019],[126.987851,37.585968],[126.987917,37.5858],[126.98792,37.585792],[126.987939,37.585744],[126.987947,37.585723],[126.987948,37.585709],[126.987954,37.585557],[126.987963,37.585556],[126.988068,37.585545],[126.988111,37.58554],[126.988112,37.585542],[126.988148,37.585611],[126.988399,37.585661],[126.988719,37.585625],[126.988871,37.585607],[126.9889,37.585604],[126.98886,37.585494],[126.988828,37.585307],[126.988799,37.585134],[126.988774,37.585029],[126.988778,37.585],[126.988794,37.58489],[126.988805,37.584863],[126.988832,37.584792],[126.988845,37.584757],[126.988866,37.584703],[126.988872,37.584679],[126.988877,37.584664],[126.988932,37.58448],[126.98892,37.58442],[126.98892,37.584417],[126.98892,37.584414],[126.98892,37.584411],[126.988958,37.584312],[126.988982,37.58425],[126.989002,37.584197],[126.98904,37.584097],[126.989069,37.584052],[126.989077,37.58404],[126.989135,37.583939],[126.989202,37.58386],[126.989249,37.583787],[126.989264,37.583767],[126.989326,37.583682],[126.989369,37.58351],[126.989365,37.583408],[126.989366,37.583318],[126.989379,37.583258],[126.989382,37.583161],[126.989388,37.583098],[126.989376,37.582982],[126.989375,37.582919],[126.989375,37.582912],[126.989395,37.582865],[126.989441,37.5828],[126.989466,37.582767],[126.989484,37.582743],[126.989557,37.582689],[126.989598,37.582637],[126.989661,37.582548],[126.989682,37.582495],[126.989703,37.582423],[126.98974,37.582318],[126.989737,37.582306],[126.989735,37.582297],[126.989739,37.582296],[126.989722,37.582219],[126.989715,37.582216],[126.989705,37.582171],[126.989678,37.582109],[126.989652,37.582056],[126.989609,37.581987],[126.989573,37.581926],[126.989501,37.581793],[126.98949,37.581772],[126.989478,37.581654],[126.989473,37.581607],[126.989472,37.581595],[126.989436,37.581591],[126.989439,37.581405],[126.98946,37.581407],[126.989498,37.581353],[126.989502,37.581347],[126.989502,37.581334],[126.989504,37.581219],[126.989485,37.581216],[126.989486,37.581168],[126.989487,37.581098],[126.989488,37.581069],[126.989509,37.581058],[126.989508,37.580919],[126.989476,37.58092],[126.989467,37.58092],[126.989426,37.580922],[126.989418,37.580921],[126.989359,37.58092],[126.989314,37.580921],[126.989301,37.580921],[126.989285,37.580916],[126.989278,37.580914],[126.989277,37.580913],[126.989246,37.580918],[126.989202,37.580888],[126.989189,37.580862],[126.989186,37.580846],[126.989183,37.580792],[126.989188,37.580641],[126.989194,37.580417],[126.989196,37.580369],[126.989221,37.580134],[126.989242,37.580028],[126.989253,37.579978],[126.989274,37.579882],[126.989279,37.579715],[126.98928,37.579598],[126.98928,37.579501],[126.989288,37.579298],[126.989289,37.579297],[126.989263,37.579018],[126.989236,37.578988],[126.989225,37.578772],[126.989228,37.578759],[126.989249,37.578654],[126.989282,37.578503],[126.989292,37.578338],[126.9893,37.578195],[126.989266,37.578111],[126.989265,37.577648],[126.989263,37.577648],[126.989293,37.577407]]]},properties:{CATEGORY:"",AREA_CD:"POI012",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.873379,37.482434],[126.873442,37.482292],[126.873517,37.482125],[126.873573,37.482001],[126.873629,37.481878],[126.873659,37.481811],[126.873695,37.481731],[126.873755,37.481601],[126.87381,37.481478],[126.87388,37.481323],[126.873939,37.481194],[126.873993,37.481075],[126.874065,37.480918],[126.874137,37.480757],[126.874182,37.480656],[126.874208,37.480606],[126.874179,37.480552],[126.874199,37.48048],[126.874235,37.480442],[126.874266,37.480417],[126.874285,37.48038],[126.874406,37.480146],[126.874557,37.479853],[126.87475,37.479478],[126.874785,37.479407],[126.874852,37.479281],[126.874959,37.479072],[126.875071,37.478856],[126.875132,37.478738],[126.875271,37.478468],[126.87532,37.478373],[126.875361,37.478298],[126.875499,37.47804],[126.875546,37.477952],[126.875634,37.47778],[126.875672,37.477707],[126.875821,37.47742],[126.875928,37.477215],[126.875986,37.477104],[126.876144,37.476845],[126.876251,37.476673],[126.87637,37.476479],[126.87643,37.476383],[126.876574,37.476148],[126.876695,37.475954],[126.876791,37.4758],[126.876841,37.47572],[126.876993,37.475472],[126.877114,37.475278],[126.877236,37.47508],[126.877325,37.474937],[126.878176,37.475132],[126.878186,37.475135],[126.878248,37.475151],[126.878513,37.475223],[126.879063,37.475372],[126.879493,37.475491],[126.879901,37.475585],[126.880845,37.475841],[126.881686,37.476069],[126.883281,37.476527],[126.883301,37.476532],[126.884897,37.477],[126.886622,37.477495],[126.887351,37.477706],[126.887925,37.477882],[126.888019,37.477919],[126.888109,37.477955],[126.888248,37.478052],[126.888626,37.478362],[126.888927,37.478604],[126.88897,37.478638],[126.889135,37.478774],[126.889382,37.478977],[126.889471,37.47905],[126.889767,37.479293],[126.889858,37.479367],[126.889885,37.479389],[126.889882,37.47939],[126.889852,37.4794],[126.889851,37.4794],[126.889775,37.479429],[126.889666,37.479469],[126.889565,37.479505],[126.88948,37.479536],[126.889194,37.479641],[126.889133,37.479663],[126.889113,37.47967],[126.888839,37.47977],[126.888785,37.47979],[126.888771,37.479798],[126.888755,37.479807],[126.888649,37.479871],[126.888561,37.479924],[126.888466,37.479981],[126.888362,37.480042],[126.888249,37.48011],[126.888211,37.480134],[126.887995,37.480272],[126.887843,37.480369],[126.88773,37.480441],[126.8877,37.480476],[126.887664,37.480521],[126.887647,37.480542],[126.887594,37.480607],[126.887545,37.480666],[126.887507,37.480713],[126.887452,37.48078],[126.887447,37.480786],[126.887401,37.480842],[126.887374,37.480875],[126.88736,37.480892],[126.887355,37.480899],[126.887341,37.480916],[126.887254,37.481022],[126.887238,37.481042],[126.887183,37.48111],[126.887165,37.481132],[126.887076,37.48124],[126.887065,37.481254],[126.88704,37.481285],[126.886997,37.481338],[126.886928,37.481422],[126.88691,37.481444],[126.886888,37.481471],[126.886748,37.481642],[126.886649,37.481764],[126.886513,37.481931],[126.88651,37.481934],[126.886407,37.482055],[126.886363,37.482107],[126.886241,37.48225],[126.886165,37.482337],[126.886155,37.48235],[126.886149,37.482354],[126.886103,37.482391],[126.886056,37.482428],[126.886043,37.482438],[126.885881,37.482565],[126.885809,37.482621],[126.885736,37.482677],[126.88573,37.482683],[126.885715,37.482692],[126.885681,37.482714],[126.885675,37.482718],[126.885639,37.482741],[126.885631,37.482746],[126.885563,37.482791],[126.885488,37.48284],[126.885476,37.482848],[126.885437,37.482874],[126.885278,37.482977],[126.885272,37.482981],[126.885211,37.483021],[126.885143,37.483066],[126.885071,37.483114],[126.885067,37.483117],[126.88497,37.483182],[126.884889,37.483237],[126.884705,37.483359],[126.88462,37.483416],[126.884588,37.483437],[126.884516,37.483486],[126.884463,37.483522],[126.884434,37.483542],[126.884418,37.483552],[126.884366,37.483587],[126.88435,37.483598],[126.884294,37.483638],[126.884267,37.483656],[126.884162,37.483732],[126.883824,37.48397],[126.883802,37.483985],[126.883759,37.484016],[126.883612,37.48412],[126.883507,37.484193],[126.883455,37.484229],[126.883424,37.484251],[126.883369,37.484291],[126.883349,37.484305],[126.883277,37.484356],[126.883169,37.484433],[126.883101,37.484482],[126.8831,37.484483],[126.883095,37.484486],[126.882923,37.484607],[126.882916,37.484612],[126.882795,37.484698],[126.88279,37.484702],[126.882783,37.484707],[126.882745,37.484734],[126.882724,37.48475],[126.882648,37.484793],[126.882641,37.484797],[126.882617,37.484812],[126.882614,37.484813],[126.882601,37.484821],[126.882582,37.484833],[126.882426,37.484927],[126.882396,37.484945],[126.88239,37.484948],[126.882372,37.484959],[126.882364,37.484963],[126.882361,37.484965],[126.88218,37.485074],[126.882171,37.485079],[126.881907,37.485235],[126.881479,37.48549],[126.881408,37.485531],[126.881354,37.485563],[126.881208,37.485613],[126.881101,37.485651],[126.880973,37.485696],[126.880891,37.485724],[126.880886,37.485726],[126.880848,37.48574],[126.880597,37.485827],[126.880299,37.485929],[126.87982,37.486099],[126.87966,37.486156],[126.879516,37.486206],[126.879439,37.486233],[126.879392,37.486254],[126.879247,37.486319],[126.87908,37.486394],[126.878973,37.486443],[126.878856,37.486495],[126.878676,37.486575],[126.878618,37.4866],[126.878489,37.486658],[126.878458,37.486672],[126.878349,37.486586],[126.878335,37.486573],[126.87831,37.486548],[126.878221,37.486463],[126.878145,37.48639],[126.878135,37.486386],[126.877993,37.486323],[126.877892,37.486237],[126.87788,37.486227],[126.877952,37.486237],[126.877943,37.486227],[126.87793,37.486219],[126.877831,37.486159],[126.877807,37.486145],[126.8777,37.486113],[126.877665,37.486102],[126.877661,37.4861],[126.87766,37.486094],[126.877655,37.486067],[126.877584,37.486059],[126.877583,37.486059],[126.877422,37.486041],[126.877357,37.486018],[126.877313,37.486008],[126.877312,37.486012],[126.877309,37.486027],[126.877308,37.486031],[126.877099,37.485989],[126.87706,37.485981],[126.877029,37.485974],[126.876917,37.485952],[126.876884,37.485945],[126.876899,37.485922],[126.876795,37.485889],[126.87661,37.485835],[126.876545,37.485822],[126.876505,37.485811],[126.87642,37.48579],[126.876382,37.48578],[126.876343,37.48577],[126.876318,37.485764],[126.876145,37.48572],[126.876096,37.485709],[126.876076,37.485704],[126.87603,37.485692],[126.875884,37.485655],[126.875747,37.485621],[126.875543,37.485568],[126.875465,37.485547],[126.875262,37.485491],[126.875226,37.485481],[126.875182,37.485471],[126.874762,37.485394],[126.874749,37.485392],[126.874573,37.485367],[126.874562,37.485366],[126.874559,37.485367],[126.874556,37.485367],[126.874421,37.485274],[126.874219,37.485188],[126.874126,37.485189],[126.87409,37.4852],[126.87394,37.485249],[126.873813,37.485322],[126.873751,37.485426],[126.873667,37.485567],[126.873625,37.48564],[126.873558,37.485713],[126.873436,37.485844],[126.8733,37.485988],[126.873214,37.486075],[126.873137,37.486152],[126.873042,37.486198],[126.872895,37.486252],[126.872735,37.48624],[126.872687,37.486224],[126.872674,37.48622],[126.872614,37.486191],[126.872445,37.48611],[126.872378,37.486013],[126.872232,37.485762],[126.872031,37.4856],[126.871763,37.485269],[126.871797,37.484997],[126.871895,37.484847],[126.872014,37.484662],[126.872208,37.484433],[126.872443,37.484396],[126.872747,37.484373],[126.872784,37.48437],[126.872976,37.484313],[126.873144,37.484257],[126.87319,37.484239],[126.873297,37.484181],[126.873305,37.484123],[126.873295,37.484092],[126.873234,37.484001],[126.873148,37.483915],[126.873011,37.483805],[126.872947,37.483753],[126.872873,37.483673],[126.872858,37.483657],[126.872801,37.483524],[126.872787,37.483489],[126.872765,37.483383],[126.872769,37.483234],[126.872773,37.483128],[126.872779,37.482964],[126.872781,37.482803],[126.87278,37.482795],[126.872769,37.482665],[126.872744,37.482425],[126.872971,37.48227],[126.873189,37.482284],[126.873204,37.482296],[126.873379,37.482434]]]},properties:{CATEGORY:"",AREA_CD:"POI013",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.0282955333511,37.49253225180931],[127.03338944770844,37.49409179589015],[127.0292689048955,37.502548575236766],[127.0299424971439,37.50324575658364],[127.02834929759673,37.504104426684634],[127.02709228990838,37.50374710625487],[127.02653163537721,37.50501676810871],[127.02282796637594,37.50396257653859],[127.0282955333511,37.49253225180931]]]},properties:{CATEGORY:"",AREA_CD:"POI014",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.070077,37.543802],[127.06982,37.544069],[127.069757,37.544121],[127.06973,37.544095],[127.069714,37.54408],[127.069702,37.544063],[127.069654,37.543973],[127.06953,37.543739],[127.069421,37.543532],[127.06942,37.543531],[127.069218,37.543147],[127.069183,37.543081],[127.069056,37.542841],[127.069055,37.542838],[127.069025,37.542789],[127.068915,37.542584],[127.06887,37.542501],[127.068809,37.542388],[127.068694,37.542175],[127.068682,37.542153],[127.068655,37.542102],[127.068701,37.542086],[127.069054,37.541959],[127.069055,37.541948],[127.069,37.541845],[127.068952,37.541754],[127.068585,37.541877],[127.068542,37.541891],[127.068525,37.541859],[127.068314,37.541454],[127.068281,37.541388],[127.06821,37.541412],[127.06807,37.541458],[127.068069,37.541458],[127.067892,37.541517],[127.067798,37.541545],[127.067793,37.541547],[127.067486,37.541651],[127.067484,37.541652],[127.067501,37.541684],[127.067515,37.54171],[127.067666,37.541987],[127.067635,37.541998],[127.067404,37.542075],[127.067391,37.54208],[127.067152,37.542166],[127.066991,37.542224],[127.066922,37.542248],[127.066893,37.542259],[127.066966,37.542397],[127.066936,37.542407],[127.066455,37.542568],[127.066204,37.542651],[127.066175,37.542661],[127.066174,37.54266],[127.066103,37.542528],[127.066089,37.542503],[127.065954,37.54225],[127.065938,37.542219],[127.065922,37.542187],[127.065924,37.542186],[127.06619,37.542096],[127.066437,37.542012],[127.066647,37.541941],[127.066704,37.541921],[127.066673,37.541856],[127.066583,37.541704],[127.06648,37.5415],[127.066408,37.541358],[127.0664,37.541361],[127.066398,37.541362],[127.066398,37.541361],[127.066169,37.541438],[127.066104,37.54146],[127.066104,37.541461],[127.06585,37.541547],[127.06476,37.541917],[127.064441,37.542025],[127.064356,37.542054],[127.064265,37.542084],[127.063998,37.542175],[127.064023,37.542219],[127.064026,37.542225],[127.06402,37.542226],[127.064014,37.542228],[127.064012,37.542229],[127.063983,37.542178],[127.063965,37.542148],[127.063871,37.541982],[127.063822,37.541896],[127.063777,37.541815],[127.063727,37.541729],[127.063669,37.541625],[127.063604,37.541509],[127.063564,37.54144],[127.063534,37.541386],[127.063501,37.541327],[127.063468,37.541269],[127.063418,37.541179],[127.063335,37.541032],[127.063269,37.540916],[127.063206,37.540805],[127.063141,37.54069],[127.063071,37.540566],[127.063021,37.540477],[127.062988,37.540417],[127.062971,37.540385],[127.062893,37.540246],[127.062863,37.540194],[127.063013,37.540141],[127.063628,37.539925],[127.063821,37.539858],[127.063798,37.539816],[127.063718,37.53967],[127.063671,37.539596],[127.063717,37.539594],[127.063836,37.539541],[127.063932,37.539481],[127.064077,37.539301],[127.06406,37.539292],[127.063666,37.539092],[127.063637,37.539077],[127.063711,37.538978],[127.063762,37.538914],[127.063777,37.538895],[127.063778,37.538893],[127.063789,37.538859],[127.063836,37.538798],[127.063837,37.538796],[127.063817,37.538786],[127.063588,37.538661],[127.063412,37.538881],[127.063272,37.53907],[127.063095,37.539312],[127.063075,37.539301],[127.062993,37.539265],[127.062885,37.539221],[127.062861,37.539209],[127.062844,37.539205],[127.062872,37.539173],[127.062939,37.539081],[127.062954,37.539056],[127.062962,37.539042],[127.063036,37.538937],[127.063077,37.538874],[127.063094,37.538849],[127.063167,37.538729],[127.063192,37.53868],[127.063207,37.53865],[127.063207,37.538627],[127.0632,37.538604],[127.063182,37.538557],[127.063178,37.538528],[127.063167,37.538518],[127.063119,37.538483],[127.063095,37.538466],[127.063096,37.538465],[127.063228,37.538341],[127.063387,37.538192],[127.063419,37.538212],[127.063565,37.538306],[127.063572,37.538311],[127.063585,37.538301],[127.063805,37.5381],[127.063817,37.538084],[127.063835,37.538096],[127.063991,37.5382],[127.064003,37.538208],[127.064161,37.538312],[127.064185,37.538326],[127.064254,37.538245],[127.06427,37.538232],[127.064311,37.538232],[127.064577,37.538326],[127.064651,37.538353],[127.064835,37.538419],[127.064964,37.538472],[127.064981,37.53848],[127.064974,37.538501],[127.064968,37.538521],[127.06506,37.538551],[127.065285,37.538613],[127.06532,37.538622],[127.065318,37.538613],[127.065318,37.538611],[127.065337,37.538576],[127.065552,37.538215],[127.065573,37.53818],[127.065591,37.538151],[127.06559,37.538149],[127.065576,37.538113],[127.065444,37.537899],[127.065442,37.537896],[127.065438,37.537881],[127.065482,37.537869],[127.065527,37.537857],[127.065747,37.537806],[127.065826,37.537787],[127.065831,37.537786],[127.066128,37.537701],[127.066204,37.537685],[127.066277,37.537672],[127.066492,37.537604],[127.066669,37.537544],[127.066673,37.537543],[127.066725,37.537524],[127.066778,37.537492],[127.066794,37.537499],[127.066847,37.537518],[127.066983,37.537557],[127.067289,37.537625],[127.067291,37.537626],[127.067285,37.537646],[127.067185,37.537993],[127.067175,37.538027],[127.067178,37.538026],[127.067892,37.5378],[127.067956,37.537796],[127.067994,37.537794],[127.068289,37.53769],[127.068371,37.537651],[127.068376,37.537664],[127.068408,37.537711],[127.068426,37.53773],[127.068556,37.537793],[127.068677,37.53785],[127.068684,37.537853],[127.06871,37.537828],[127.068795,37.537742],[127.068787,37.537725],[127.06888,37.53762],[127.069025,37.537458],[127.069136,37.537335],[127.069202,37.537371],[127.069234,37.537342],[127.069356,37.537306],[127.069439,37.537501],[127.069446,37.537516],[127.069457,37.537512],[127.069579,37.537472],[127.069701,37.537433],[127.070249,37.537246],[127.070329,37.537219],[127.071091,37.536959],[127.071101,37.536956],[127.071336,37.536878],[127.071338,37.536991],[127.071344,37.53735],[127.071452,37.537696],[127.071516,37.537822],[127.071651,37.538084],[127.071588,37.538193],[127.071733,37.538507],[127.07253,37.538265],[127.072833,37.538174],[127.073717,37.537907],[127.074105,37.53779],[127.074108,37.5378],[127.074203,37.53809],[127.074376,37.538617],[127.074426,37.53877],[127.074479,37.538926],[127.074355,37.538957],[127.074334,37.538962],[127.074213,37.53899],[127.074201,37.538828],[127.073571,37.538985],[127.07355,37.53899],[127.073077,37.539108],[127.073076,37.539108],[127.072937,37.539142],[127.072907,37.53915],[127.072902,37.539151],[127.072397,37.539323],[127.072396,37.539323],[127.072212,37.539385],[127.071942,37.539477],[127.07194,37.539477],[127.071506,37.539624],[127.071494,37.539629],[127.070613,37.539929],[127.070613,37.53993],[127.070715,37.540085],[127.070907,37.540496],[127.070958,37.540605],[127.071165,37.541045],[127.071385,37.541516],[127.071499,37.541762],[127.071554,37.54188],[127.071724,37.542242],[127.071564,37.542298],[127.071281,37.542571],[127.071279,37.542573],[127.071247,37.542605],[127.071243,37.54261],[127.071053,37.5428],[127.071026,37.542827],[127.071021,37.542833],[127.070827,37.543034],[127.070825,37.543037],[127.070715,37.54315],[127.070473,37.543388],[127.070467,37.543394],[127.070423,37.543439],[127.07037,37.543492],[127.070369,37.543493],[127.070077,37.543802]]]},properties:{CATEGORY:"",AREA_CD:"POI015",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.15331269276994,37.55302103075354],[127.15331206990628,37.5530073924901],[127.15330868742139,37.55300243238423],[127.15281570160916,37.552279939591855],[127.15280881024933,37.551910686690654],[127.15430639720333,37.551812325509765],[127.15492303009707,37.55177827050217],[127.15552509321903,37.55174745682205],[127.15624922843755,37.55171042008334],[127.15632903084295,37.55170365174546],[127.15632920495473,37.551706329316744],[127.15637932918902,37.55239682733332],[127.1564101998668,37.55288281680928],[127.15641022337677,37.55288324024365],[127.15643362753983,37.55326095851876],[127.15647412682699,37.55391501489578],[127.1564755243353,37.55393407800291],[127.1565006575173,37.554277475233725],[127.15650087448118,37.55427841197816],[127.15655237563723,37.555077435906476],[127.1565720725,37.55538302175079],[127.15631776439662,37.55536720067392],[127.15406574089278,37.555034891362084],[127.15333381239519,37.55493359938486],[127.15332192739648,37.55493196836396],[127.15333254515562,37.55487794689047],[127.15332224158836,37.554424097138075],[127.15331269276994,37.55302103075354]]]},properties:{CATEGORY:"",AREA_CD:"POI016",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00954048844196,37.50643462163355],[127.00936989343772,37.50675938419055],[127.0092986092507,37.50689508572955],[127.00921031998142,37.50706315820752],[127.0091067417042,37.507260334084926],[127.00904033046598,37.507386763616566],[127.00896916187774,37.50736523632945],[127.00896783617864,37.5073648360242],[127.0044159695841,37.50598844500959],[127.00115423269638,37.50500202422726],[127.00114438508335,37.50502188730598],[127.00110900830101,37.50501045831834],[127.00107561854963,37.504999670465416],[127.00107433826862,37.50499925854585],[127.00107972516217,37.50499225251681],[127.00109102963893,37.504977551358564],[127.0011778633316,37.50486463552969],[127.00142990830177,37.50453687645029],[127.00143042304703,37.50453620260508],[127.00149966870751,37.50444615633758],[127.00167477035436,37.50422541278812],[127.0017194777605,37.50416905294137],[127.00175467748036,37.504124680684136],[127.00176907635729,37.50410653129862],[127.00178495389595,37.504086519634434],[127.0021916072348,37.503600012142165],[127.00219460890723,37.503596420264266],[127.00219740528279,37.50359307629573],[127.00225510753353,37.50352403572322],[127.00248140832508,37.50325328392906],[127.00255662257963,37.503163297306216],[127.00255854307636,37.50316099972162],[127.00289961534334,37.50275294346361],[127.00293853465244,37.50269016184516],[127.00329275482501,37.50221277773908],[127.00383202860527,37.50237859718858],[127.00443867348451,37.50254085434298],[127.00517618454995,37.50280402370032],[127.00654673337431,37.50333527621502],[127.00660316110802,37.50335714810295],[127.00789764169654,37.503864067658334],[127.00863647766482,37.50414419801122],[127.00973137649166,37.5045593183559],[127.00978705530345,37.5045804248698],[127.01005875700972,37.504683443344824],[127.01038331771477,37.504764475364965],[127.0104162851299,37.50476736024599],[127.01041609954505,37.50476771190753],[127.01038762208837,37.50482191778089],[127.01002601122103,37.50551033347312],[127.00993075605417,37.50569167536639],[127.00968804771776,37.506153715167905],[127.00967696081199,37.50617482219584],[127.00962372025073,37.506276173313395],[127.00954048844196,37.50643462163355]]]},properties:{CATEGORY:"",AREA_CD:"POI017",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.01441646442078,37.48849575080566],[127.01432251220618,37.49131931240173],[127.01558246985309,37.491444644024234],[127.01522060051808,37.493226664347496],[127.01603959833544,37.49332694883034],[127.01791393457398,37.49390393826746],[127.017756630816,37.494719653673165],[127.0173630063711,37.49524677442276],[127.01654395537247,37.49500845904774],[127.01542568787102,37.4948956684462],[127.01082651176712,37.49346558173076],[127.01172393664278,37.49153293369877],[127.01249546297898,37.49042853297145],[127.01263703235912,37.489412039852986],[127.01229045101101,37.488746973392274],[127.01265251864739,37.487855947985466],[127.01441646442078,37.48849575080566]]]},properties:{CATEGORY:"",AREA_CD:"POI018",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.89963781741088,37.48500927080042],[126.89423227252635,37.48787830242977],[126.8931778269139,37.487387938420504],[126.89138393880047,37.48640747208408],[126.89237682430924,37.48588131790188],[126.89198382954784,37.48539154376889],[126.89225170558844,37.48527884632517],[126.89226761561463,37.485165918788404],[126.8922212013915,37.484588617081585],[126.89207959840714,37.48450064400025],[126.8916706296718,37.48417399266484],[126.89206469921193,37.48391082183124],[126.89203342078302,37.48376020382423],[126.89162403937502,37.483722181662095],[126.8914982588181,37.483584025907035],[126.89074347555974,37.48283038313755],[126.89244611247317,37.4814891891999],[126.89323435795802,37.480862447863444],[126.89399063575576,37.4805619498069],[126.89446311216494,37.48051217626941],[126.89543917207953,37.48068873183735],[126.89608449904527,37.480902636301906],[126.8965722907295,37.481166595941],[126.89691841417033,37.48139278267003],[126.89710722373337,37.48150588936651],[126.89735881621039,37.481769639806735],[126.89770441444603,37.48238484657483],[126.8998002727597,37.48128231965063],[126.90080657207237,37.482425139057916],[126.90139062230539,37.48135895239509],[126.902915307876,37.48350611510539],[126.9016387253966,37.48429565379275],[126.9014964364008,37.48472220528215],[126.90062986212065,37.485060305801376],[126.89996793553061,37.485448769851445],[126.89963781741088,37.48500927080042]]]},properties:{CATEGORY:"",AREA_CD:"POI019",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.87979388808915,37.502992417711084],[126.88056770755367,37.50229184456324],[126.88155196249863,37.501467844849095],[126.88156224781456,37.50146059986212],[126.88161748110811,37.501421702708086],[126.8820235360405,37.50109721530278],[126.88244577203118,37.50071316131914],[126.88254427253176,37.500623564352246],[126.88255485054982,37.500613946322055],[126.88255565079449,37.50061321499921],[126.88271946936696,37.5004641969226],[126.88271958333036,37.50046409385071],[126.88271981927188,37.50046387874022],[126.88288866919859,37.50029082507662],[126.88290899309763,37.5002699964475],[126.8829090307534,37.50026995696521],[126.88309534294577,37.50031693515492],[126.8836269671122,37.50045096712982],[126.88360437429571,37.5008085051623],[126.88369228111749,37.500807646964354],[126.8838051030329,37.50081248992504],[126.88380409108393,37.50120462541727],[126.88380353909132,37.50124564041266],[126.8839225459752,37.501204866520524],[126.88408452756653,37.50115245837559],[126.8840876062923,37.501171152269436],[126.88408795159896,37.50117387342245],[126.88409716912778,37.50124571874416],[126.88411762058357,37.501423253980036],[126.88413609378335,37.501549916468356],[126.88415264206697,37.501663422686015],[126.8841787069039,37.5018385585417],[126.88415678244868,37.50187881533046],[126.88389308522171,37.50196645465269],[126.88391056355283,37.50208196625148],[126.88373712455169,37.50212126129916],[126.88368115869851,37.502274135469946],[126.88352626473099,37.50233318127355],[126.88216870809232,37.502323811647294],[126.88199007624553,37.502444472359],[126.88311738946841,37.50337909235636],[126.88191553131999,37.504456011887974],[126.88039753858583,37.50341042608775],[126.87982152379789,37.50301511432845],[126.87979388808915,37.502992417711084]]]},properties:{CATEGORY:"",AREA_CD:"POI020",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.08399798926435,37.55457616405624],[127.08399809208575,37.55457612433777],[127.08440659884278,37.55523932755697],[127.08440478868577,37.55523986944944],[127.08482748782072,37.55593693848679],[127.08466255182364,37.55600039697899],[127.08435914998518,37.55611684279272],[127.08403753421338,37.55624050876833],[127.08354849095758,37.55642880386105],[127.08220399072883,37.55695899335122],[127.08248701703599,37.55744884830303],[127.08190891707734,37.55766008408133],[127.08133822938079,37.5579048445989],[127.08089011801582,37.55807277970353],[127.0801044988442,37.55838328351418],[127.0788854943226,37.55884332880269],[127.07832067828754,37.557843348690405],[127.077634671083,37.55812253781747],[127.07763434403743,37.55812143443616],[127.07704972393198,37.55833256304245],[127.0764058370679,37.55700100683372],[127.07719389729438,37.55670541080534],[127.07684088217593,37.55613332759966],[127.0774292516468,37.55589129573578],[127.07674252400784,37.555241043746214],[127.07663367162084,37.55515011370081],[127.0765786287927,37.555110235224255],[127.07662176351877,37.55479413731325],[127.07701783933958,37.554657558693165],[127.07726899275477,37.5545716196339],[127.0774358616876,37.55451384646999],[127.07793069903435,37.55434422345882],[127.07794589236677,37.55437142355736],[127.0783308802726,37.55424205582502],[127.07857424346906,37.554068812482186],[127.07889964789658,37.55464072895816],[127.07918735719161,37.55519987560246],[127.07947672361578,37.55571685369798],[127.08076602553582,37.555217276737416],[127.08108966177406,37.55507731020933],[127.0810922276736,37.55508141866318],[127.0836804787679,37.554054117022574],[127.08399798926435,37.55457616405624]]]},properties:{CATEGORY:"",AREA_CD:"POI021",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.88952989607225,37.4842870154882],[126.88961839249504,37.48582191502682],[126.88964525878518,37.48722460712021],[126.8896080832791,37.487206596380624],[126.88956285968878,37.48723014627127],[126.88709637649832,37.48818063780838],[126.88567007162301,37.48580847407345],[126.88571818453431,37.48569677015158],[126.8859210402705,37.485225718500814],[126.88593241019852,37.48519931228841],[126.88594131777093,37.48517862501955],[126.88589727809116,37.48509080646195],[126.88588637804476,37.485069099702415],[126.88583856227574,37.4849738261514],[126.8858077809702,37.484910915182695],[126.88577353135308,37.48483155754738],[126.8857634954798,37.48481406830492],[126.88574399255042,37.484776837873085],[126.88567154020159,37.48471815677252],[126.88559821217103,37.48466283550019],[126.88551161451426,37.48459751806804],[126.88545028026118,37.48455124551383],[126.88539604958262,37.48451034086246],[126.88516293124671,37.484495965824195],[126.88501042077368,37.484486580287864],[126.88491737304317,37.48448338005219],[126.8847667667186,37.4844855739384],[126.88464335677244,37.48444878120935],[126.88449401061199,37.48441872017194],[126.88436812827025,37.484394178315135],[126.88424831492097,37.48437135424888],[126.8842482470961,37.48437134517155],[126.88413417466816,37.48435034670833],[126.88412036210208,37.484347801173875],[126.88407737260265,37.48430584390384],[126.88406570326589,37.48429205600505],[126.88405324394691,37.48427733027904],[126.88388497759897,37.48412785806309],[126.88375835748991,37.48401544967903],[126.8838476833525,37.48395250105798],[126.88393963823442,37.48388783767508],[126.88403691314784,37.483819233126255],[126.88420351703975,37.483701142308846],[126.88426736766306,37.483655588017356],[126.88429371750927,37.48363731483595],[126.8843439393361,37.48360187422956],[126.88436587480692,37.48358670510688],[126.88441521244776,37.483552687174374],[126.8844673897256,37.48351752776302],[126.88450098167031,37.48349533334542],[126.88453052243658,37.4834753693892],[126.88458711302872,37.483437682481735],[126.88462123761987,37.48341464161588],[126.88467022278171,37.48338174947799],[126.88470753924373,37.483356441221545],[126.88476183140197,37.48332072514891],[126.88482797345023,37.483277164026845],[126.8848891589131,37.4832363910778],[126.88495052606397,37.48319506866554],[126.88505380411722,37.483125622251265],[126.88507131332615,37.48311380936675],[126.88510721403847,37.48308991415886],[126.88525205123477,37.482992919859726],[126.88527503785569,37.4829777335809],[126.88533781658398,37.48293724127491],[126.88545894999436,37.48285825243832],[126.8855433008632,37.482803148953856],[126.88567415550133,37.48271795252926],[126.88571447961631,37.482692088279414],[126.88572987085078,37.482682543742634],[126.88573738543641,37.4826766632751],[126.8860343225294,37.48291769379737],[126.88708142422522,37.483023097164185],[126.88952989607225,37.4842870154882]]]},properties:{CATEGORY:"",AREA_CD:"POI022",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.89433839924867,37.494909316711116],[126.89276144708872,37.49399579599564],[126.89255131372543,37.494388240237754],[126.89189945355109,37.49472612413942],[126.89167878051356,37.494567965344636],[126.89185475219186,37.49430185674426],[126.89148133946902,37.49401267926006],[126.89115371363765,37.493398603292576],[126.89050261348541,37.49321747967493],[126.89079212895912,37.49277095582276],[126.89160906016969,37.49186007218802],[126.89257338021802,37.490845516701455],[126.89291376468543,37.49045770336151],[126.89153871819657,37.48958543013482],[126.89312007320314,37.48876549586971],[126.89591222697841,37.490583734818],[126.89620522563534,37.48989199647987],[126.89689026246143,37.49009568364138],[126.89696970420337,37.48998743971588],[126.89721871864106,37.490127561203835],[126.89763849162344,37.489649542193625],[126.89826120424068,37.48987121960628],[126.8981987435603,37.4899885051397],[126.89808532088392,37.490096720584454],[126.89965447767946,37.49127340426852],[126.89932331492618,37.49156876669272],[126.8995157956065,37.49173852488275],[126.89906982985308,37.491848151853624],[126.89914429797066,37.49208198058158],[126.89908381024624,37.49214609974747],[126.89829390715438,37.49298065012545],[126.90039731267566,37.49428166728939],[126.89983675437867,37.49488232724828],[126.89942151045594,37.49600667641152],[126.89776721726223,37.49551077541133],[126.89758173691546,37.49579222944894],[126.89706421163046,37.4956267690766],[126.89655813095733,37.495507152727484],[126.89594828589833,37.49554328618721],[126.89570590432511,37.496093107686825],[126.89497006972329,37.49571659838351],[126.89411858945631,37.49558109981796],[126.89433839924867,37.494909316711116]]]},properties:{CATEGORY:"",AREA_CD:"POI023",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.01231843461875,37.56974547950057],[127.0126431911017,37.56974808287489],[127.01264499685851,37.56979047527497],[127.01262987848557,37.569972251030535],[127.01259810966083,37.570157803481806],[127.0125818821533,37.57026550910464],[127.01259411791699,37.57049079999132],[127.012595310644,37.57051900981113],[127.01259925474231,37.57070493730446],[127.01258692839059,37.5710917415578],[127.0125791573498,37.57135879507215],[127.01254792880803,37.571528426961706],[127.01250799860077,37.57164365800869],[127.01233277427426,37.57206646267135],[127.01257159607681,37.57212651841326],[127.0122865198392,37.57244636834106],[127.01223479276264,37.57247762830783],[127.0121550393667,37.57252020718432],[127.01201047314781,37.57259579495968],[127.01185864761293,37.57273156015358],[127.0117031099063,37.57296000104857],[127.01166672185803,37.57299985486062],[127.01164727695256,37.57301965122648],[127.01144898566373,37.57318590026826],[127.01139973963562,37.573238693257764],[127.01134877599145,37.573314957093345],[127.01130093979965,37.573416051861635],[127.01126083268032,37.57349916226161],[127.01122771795592,37.57355709848273],[127.01122748776788,37.57355939162265],[127.01113231695882,37.573612634073896],[127.01094901807036,37.57363183095136],[127.01087914038715,37.573636972140505],[127.01061159829077,37.57368627706127],[127.01033611543797,37.573692523779584],[127.01023137370244,37.57368811714816],[127.01001059752237,37.57365352502887],[127.01000826926746,37.57365316022596],[127.00969783953052,37.57361193134684],[127.00961188609786,37.57360512580506],[127.00956842828396,37.573601687003936],[127.00943662667912,37.57357372025643],[127.00932408126148,37.573553419493386],[127.00919563124394,37.57353224570039],[127.0090357836153,37.57352431809678],[127.00902232121932,37.57351983064286],[127.00902507225877,37.57352374233591],[127.00902507299983,37.573523786898654],[127.00902507426562,37.57352386301793],[127.00867573943158,37.573460982525084],[127.008603753761,37.5734612777071],[127.00845469066735,37.573193780722185],[127.00844254513088,37.57310147464486],[127.00755304344537,37.57312637188459],[127.00745801144619,37.57300808556425],[127.00734456455352,37.57286687763438],[127.00710239823664,37.572343825514785],[127.00690867118256,37.57196392520618],[127.00666703792886,37.57179976790944],[127.00666784983191,37.57178140372116],[127.00667379676959,37.57167647443045],[127.00667982283701,37.571570220682034],[127.0067010708566,37.57109418285095],[127.00672702791563,37.570461066536694],[127.00671500286566,37.570081570939514],[127.00673110420634,37.569829491805805],[127.0067337183372,37.56965774535075],[127.00673405992086,37.56963530350136],[127.00690528727054,37.56964402227597],[127.00694171319374,37.56964571446604],[127.00727210451859,37.569657808107586],[127.00758126124428,37.569675812398565],[127.00780977817836,37.56968734210017],[127.00798912339577,37.56969521605305],[127.00810443455697,37.569700273230154],[127.00815130836544,37.56970224377003],[127.00817235120505,37.56970308951483],[127.00823602305728,37.56970561768579],[127.00829350317625,37.56970786687158],[127.00837380328879,37.569710961635394],[127.00841783591548,37.56971265292812],[127.00846117805985,37.56971433523515],[127.00855508416018,37.5697179876874],[127.00881189974588,37.56972810821806],[127.00882180425229,37.56972839592194],[127.00882906001739,37.56972867477924],[127.00883578377062,37.56972895366905],[127.00885929428297,37.56973007844471],[127.00888088046983,37.56973092402938],[127.00889183768064,37.56973120265192],[127.00895073279224,37.56973373073567],[127.00898275552899,37.569735143266726],[127.00898841525928,37.56973542221509],[127.0089958408168,37.56973570105137],[127.00901759682588,37.56973682590661],[127.00906482158283,37.569738796061515],[127.00908374768507,37.56973935346289],[127.0091364510662,37.569741602544276],[127.0091638667821,37.56974272700727],[127.00927741209358,37.56974609830534],[127.009597899513,37.5697559336186],[127.00968059583977,37.56975897045925],[127.00970490189955,37.56975986334946],[127.0097646799135,37.56976183235338],[127.00978342494808,37.569762677971426],[127.00983471344044,37.56976492684012],[127.0098472893463,37.569765304368616],[127.00986284226701,37.56976577178428],[127.00994176145016,37.56976808171961],[127.01003509595628,37.56977082303755],[127.01024309564654,37.56976968161573],[127.01080518337909,37.56976795389496],[127.01161257362659,37.56976338268862],[127.01212866956148,37.569754886169896],[127.01231843461875,37.56974547950057]]]},properties:{CATEGORY:"",AREA_CD:"POI024",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.04448827179779,37.54808435316106],[127.04033859458254,37.547888596330665],[127.03970387189386,37.548073730855364],[127.03926986903788,37.54718626282714],[127.03928531350805,37.54711228992033],[127.04379025346994,37.54592722078738],[127.0440071825285,37.54621068330538],[127.04462642510842,37.54607484330316],[127.04461103020878,37.5462227846818],[127.0453851397565,37.546148521909245],[127.04586497149312,37.54591410520127],[127.0460043262833,37.54592637895563],[127.04738203471184,37.54548202745845],[127.0474906576875,37.54586415071655],[127.04776960365407,37.546258533032386],[127.04685674924136,37.54729444760579],[127.04890008697778,37.54659092528269],[127.04860649922225,37.54750331564145],[127.04950433796104,37.5472070715878],[127.04990747062767,37.54805753113829],[127.0492731272837,37.548785147094435],[127.05021804143979,37.54940114686517],[127.04983126791448,37.549882101003696],[127.05068320486652,37.55036252863713],[127.05021895125913,37.55075722152526],[127.05034308879507,37.551151663164056],[127.0487020061378,37.55150986206822],[127.04754074738575,37.551596630995355],[127.04692136396886,37.5515722228468],[127.04696765409359,37.5513133174452],[127.04630159201058,37.550919086011525],[127.0464248833546,37.54998211306856],[127.04654869294266,37.54988344068182],[127.04564991568607,37.54871263567744],[127.04551056326139,37.54871268946917],[127.04510774443325,37.54830602140699],[127.04448827179779,37.54808435316106]]]},properties:{CATEGORY:"",AREA_CD:"POI025",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.02894767881742,37.61661084227139],[127.0290160824045,37.61517357874185],[127.02847818853506,37.61517370977437],[127.02847802117203,37.61473485578095],[127.02835385088875,37.614625172167],[127.02839477231832,37.613429284897066],[127.02861520615033,37.61281483581353],[127.02849096770441,37.612518639285504],[127.02933219433386,37.61235386286018],[127.02929061289981,37.61182724809231],[127.02919395637659,37.611531045405805],[127.02853196544328,37.611531207313114],[127.02857294951448,37.610510861087064],[127.0288072321648,37.61007194974969],[127.02904164857719,37.60998412141552],[127.02900009182173,37.60951236313174],[127.02793777455551,37.60843742592152],[127.02826853209085,37.607844893526185],[127.0291787075569,37.607800786544416],[127.0316891151933,37.608941160917475],[127.0320892002905,37.609281165020136],[127.032465026976,37.61021450305495],[127.0350580684801,37.61161046750015],[127.03492105826115,37.61194331698919],[127.03450970009622,37.612248967433196],[127.034399941357,37.612194440652026],[127.03386516111293,37.61257105122055],[127.03324874352509,37.61173842844993],[127.03286297697022,37.612638187688106],[127.0326843861648,37.61424005490537],[127.03229845280131,37.614799700093556],[127.0318158328035,37.61504120091584],[127.0315815708309,37.615524003248645],[127.03136090460842,37.615546004797004],[127.03127856490552,37.61653344803779],[127.02894767881742,37.61661084227139]]]},properties:{CATEGORY:"",AREA_CD:"POI026",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.83894477444633,37.56335567704884],[126.83814905875577,37.56083804447119],[126.8334928310712,37.561279721480446],[126.83317334923987,37.55890061824599],[126.8374611671307,37.55854463000202],[126.83649358800298,37.555457939006104],[126.83774955167189,37.555356251833985],[126.83839453003436,37.557460004306016],[126.83870580540167,37.557402730040046],[126.84091548954255,37.55717718995018],[126.84192045535546,37.55707420714842],[126.84185867885402,37.5567760313092],[126.84255782706549,37.55668256950591],[126.842607062303,37.55701053758045],[126.84361809811288,37.556987039911455],[126.8434628823722,37.55660428138503],[126.84365040162538,37.55646045149613],[126.84351350331542,37.55627147780947],[126.84395659484537,37.5562670960126],[126.84396319800169,37.55609321706331],[126.84462445034035,37.556213326351056],[126.84471158127181,37.556327710021876],[126.84471758474254,37.55644198695877],[126.84434233267675,37.556833982142955],[126.84462212930306,37.55733117253812],[126.84485953221265,37.55720727925545],[126.84487228131184,37.55707812232427],[126.84564631632449,37.556984740603184],[126.84562734842517,37.557103953053314],[126.84571949340264,37.55781452871584],[126.84457717537914,37.557942204199875],[126.84524276431502,37.558991372367025],[126.84116186693812,37.55935978748256],[126.84144144116934,37.56025646714655],[126.83996851043025,37.56053026565795],[126.84082924279572,37.563047973831196],[126.83894477444633,37.56335567704884]]]},properties:{CATEGORY:"",AREA_CD:"POI027",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00999813998594,37.663568172713234],[127.01011224962522,37.66298908407841],[127.00940348463001,37.6628608062959],[127.00961996277684,37.66221284641258],[127.008572577048,37.66200946698394],[127.0087024578113,37.66153993391433],[127.00999395822565,37.66174642193346],[127.0110374155004,37.66200926209993],[127.01185646110048,37.6623722808102],[127.01292738094428,37.66197150823061],[127.0132896270589,37.661980858445574],[127.01264015325627,37.66318290997222],[127.0120693551167,37.66404689283348],[127.01114001117,37.663496076809125],[127.0107501917114,37.663461681262554],[127.01082889205905,37.66311735687636],[127.01046269751748,37.663067307424285],[127.01035644727229,37.663514929144476],[127.00999813998594,37.663568172713234]]]},properties:{CATEGORY:"",AREA_CD:"POI028",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97835703696273,37.47727785506455],[126.9783575533163,37.47660043280123],[126.97872350823572,37.476607527140104],[126.97873210141968,37.47620486744469],[126.97834613945909,37.476192543610836],[126.97834734362152,37.47593022695997],[126.97834129979645,37.47477122065033],[126.97862771531673,37.474771272802926],[126.97871427293367,37.474888077899145],[126.97973445186604,37.47513541843213],[126.9801060786609,37.47521994262154],[126.98023163901782,37.474086853535034],[126.98029226171283,37.473551213148504],[126.98070451837383,37.47369048725552],[126.98124599320506,37.47382860918747],[126.98124619890444,37.47382824779023],[126.98195336545884,37.47401392280998],[126.98208272115238,37.474048388880746],[126.9819913319535,37.47430418815206],[126.981855561719,37.47475575359765],[126.98181417598876,37.47525887118305],[126.98176644137106,37.47583343780967],[126.98170679803167,37.476561084067406],[126.98303013210285,37.47641252483138],[126.98457100092526,37.47614531639105],[126.98478227308345,37.476826867536346],[126.98529714126052,37.476739534787306],[126.98554267605259,37.47678656684598],[126.9851991812385,37.47734769581629],[126.98451971515766,37.47759278169186],[126.98387671656131,37.47782551656151],[126.98391510015072,37.478612012939],[126.98392455641942,37.47880131629502],[126.98392537068987,37.478817807792346],[126.98526111635462,37.47875374442141],[126.98536735984729,37.480473746649444],[126.97806645587764,37.48075928169788],[126.97790727097899,37.47842346449499],[126.9782671483477,37.47781834976643],[126.97801409200123,37.47759534134056],[126.97835703696273,37.47727785506455]]]},properties:{CATEGORY:"",AREA_CD:"POI029",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97384643217823,37.53690622789671],[126.97396492280234,37.5364447249942],[126.97387564891785,37.53622706504731],[126.97372327315746,37.5361014695651],[126.97342370176348,37.5360679194142],[126.97207278582614,37.5365070735254],[126.97184170829115,37.53602569890645],[126.973262940474,37.53557553436012],[126.97326094841462,37.53556982133298],[126.97203872188216,37.5342962624869],[126.97232562612076,37.53411658724052],[126.97314044588356,37.53402865888512],[126.97314324429077,37.53403166374211],[126.97370035834571,37.533994472879606],[126.97371623899204,37.53399646585497],[126.973744964179,37.53419712197989],[126.9750955642102,37.534553172712755],[126.97571332756581,37.53417647578065],[126.975907507796,37.53476470335685],[126.97526622020199,37.53502406497344],[126.97507419563014,37.53528443256445],[126.97507733818355,37.53528612909879],[126.97505219219182,37.53537099805532],[126.97499671324532,37.535948276891986],[126.97496745655037,37.537020656746705],[126.97384643217823,37.53690622789671]]]},properties:{CATEGORY:"",AREA_CD:"POI030",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.95467623066996,37.48225415440141],[126.95536047642433,37.48317158365881],[126.95400086064228,37.48356163495043],[126.95331538116336,37.483183059222604],[126.95253873688668,37.48218698998821],[126.95227143316966,37.482226245067594],[126.95197530240868,37.482256308865416],[126.95183339953027,37.482270306838245],[126.95069234287192,37.48238519789543],[126.95014877144195,37.47889798956234],[126.95057409250501,37.47885649431904],[126.95133332305433,37.4787827465115],[126.95142954113578,37.47877341560653],[126.9523072414743,37.47871980268682],[126.95228511784751,37.47816949766252],[126.95349813780938,37.47807250169404],[126.95384471722267,37.47804014438787],[126.9543079535016,37.47892982566239],[126.95561796825994,37.47857696150833],[126.95538167283605,37.47961680164222],[126.95547137065492,37.48026437613767],[126.95581809227598,37.480128363824825],[126.95575870641676,37.48056199726439],[126.95567637471727,37.48077231025043],[126.95564664537918,37.48083236868397],[126.95542338492814,37.48129736485396],[126.95505063171547,37.482035149887686],[126.95467623066996,37.48225415440141]]]},properties:{CATEGORY:"",AREA_CD:"POI031",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.82439378558908,37.56342111378824],[126.82614527293978,37.564457901789304],[126.83394213645812,37.5637107153806],[126.83449653624133,37.56758972760752],[126.8375869850619,37.57040358298054],[126.83439950154794,37.57229517839614],[126.83123716927184,37.57256648525481],[126.83049059015956,37.56754957065158],[126.83003640085622,37.567307605416715],[126.82793571530145,37.56740798201318],[126.8280636987397,37.568252761216435],[126.82507487162334,37.56847244614928],[126.82439378558908,37.56342111378824]]]},properties:{CATEGORY:"",AREA_CD:"POI032",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.976832,37.555967],[126.976858,37.55605],[126.976857,37.556066],[126.976852,37.556148],[126.97683,37.556184],[126.976795,37.556242],[126.976785,37.556259],[126.976743,37.556328],[126.97672,37.556367],[126.976707,37.556385],[126.976682,37.556418],[126.976637,37.556479],[126.976541,37.556611],[126.976533,37.556636],[126.976445,37.556825],[126.97641,37.557028],[126.976409,37.557033],[126.976405,37.557054],[126.976337,37.557422],[126.976277,37.557747],[126.97622,37.557919],[126.976217,37.557931],[126.976126,37.558204],[126.976101,37.558265],[126.976076,37.558322],[126.976043,37.558402],[126.976028,37.558437],[126.976016,37.558465],[126.976013,37.558473],[126.976004,37.558493],[126.975934,37.558659],[126.975933,37.558661],[126.97591,37.558718],[126.97582,37.558943],[126.9758,37.558995],[126.975767,37.559076],[126.975683,37.559287],[126.975604,37.559485],[126.975582,37.559473],[126.975434,37.559473],[126.975407,37.559529],[126.975398,37.559528],[126.975368,37.559587],[126.975323,37.559573],[126.975323,37.559641],[126.97493,37.559644],[126.974827,37.559644],[126.974818,37.559644],[126.974812,37.559641],[126.974786,37.559657],[126.974715,37.559701],[126.974644,37.559701],[126.974572,37.559668],[126.974578,37.559657],[126.974498,37.559624],[126.974175,37.559511],[126.974122,37.559588],[126.974098,37.559622],[126.974063,37.559675],[126.974056,37.559686],[126.973943,37.559676],[126.973861,37.559669],[126.97376,37.559661],[126.973739,37.55966],[126.973736,37.559659],[126.973682,37.559654],[126.973592,37.559647],[126.973537,37.559643],[126.973527,37.559642],[126.973463,37.559636],[126.973396,37.559632],[126.973371,37.559629],[126.973327,37.559626],[126.973266,37.559621],[126.973206,37.559617],[126.973061,37.559606],[126.973054,37.559605],[126.972927,37.559595],[126.972708,37.559578],[126.972624,37.559574],[126.972566,37.559569],[126.972518,37.559567],[126.972493,37.559562],[126.972487,37.559561],[126.972443,37.55957],[126.972303,37.559537],[126.972293,37.559529],[126.972289,37.559524],[126.972266,37.559502],[126.972232,37.559472],[126.972196,37.559442],[126.972192,37.559438],[126.972172,37.559421],[126.972101,37.559361],[126.972035,37.559303],[126.971975,37.559251],[126.971968,37.55924],[126.971955,37.559217],[126.971948,37.559213],[126.97186,37.559159],[126.971813,37.55913],[126.971802,37.559122],[126.971677,37.559021],[126.971624,37.558978],[126.971617,37.558972],[126.971586,37.558937],[126.971571,37.558923],[126.971534,37.558889],[126.971367,37.558734],[126.971345,37.558714],[126.971336,37.558719],[126.971311,37.558734],[126.97131,37.558735],[126.971233,37.558782],[126.971075,37.558879],[126.971061,37.558933],[126.971006,37.558976],[126.970921,37.559061],[126.971004,37.559085],[126.970957,37.559195],[126.970935,37.559276],[126.970884,37.559348],[126.97088,37.559366],[126.97083,37.559363],[126.970724,37.559356],[126.970686,37.559353],[126.970572,37.559314],[126.970084,37.559269],[126.970084,37.559267],[126.970084,37.559265],[126.970088,37.559217],[126.969642,37.559214],[126.969483,37.559213],[126.969483,37.559192],[126.969484,37.559008],[126.969486,37.558801],[126.969486,37.558795],[126.969486,37.55879],[126.969487,37.558783],[126.969491,37.558768],[126.969492,37.558726],[126.969495,37.558622],[126.969497,37.558529],[126.969504,37.558323],[126.969491,37.55832],[126.969488,37.558292],[126.96949,37.558227],[126.969493,37.558126],[126.969478,37.557999],[126.969446,37.557875],[126.96941,37.557782],[126.969368,37.55767],[126.969349,37.557615],[126.969298,37.557479],[126.969293,37.557463],[126.969285,37.557437],[126.969272,37.557396],[126.969255,37.557305],[126.969248,37.557267],[126.969246,37.557255],[126.969239,37.557073],[126.969238,37.557038],[126.969231,37.556856],[126.969228,37.556836],[126.969228,37.556834],[126.969225,37.556818],[126.969222,37.556729],[126.969222,37.5567],[126.969222,37.556699],[126.969217,37.55655],[126.969217,37.556538],[126.969215,37.55647],[126.969206,37.556207],[126.969201,37.556056],[126.9692,37.55603],[126.969199,37.555987],[126.969197,37.55593],[126.969193,37.555868],[126.969186,37.555663],[126.969186,37.555662],[126.969172,37.554878],[126.969171,37.554876],[126.969172,37.554876],[126.969173,37.554876],[126.969177,37.554876],[126.969322,37.554876],[126.969328,37.554309],[126.969328,37.554307],[126.969329,37.554306],[126.96933,37.554304],[126.969331,37.554303],[126.969332,37.554302],[126.969334,37.554301],[126.969335,37.5543],[126.969337,37.5543],[126.969339,37.5543],[126.969725,37.554293],[126.969726,37.554293],[126.969728,37.554293],[126.96973,37.554294],[126.969731,37.554295],[126.969733,37.554296],[126.969734,37.554297],[126.969735,37.554298],[126.969736,37.554299],[126.969737,37.554301],[126.969737,37.554302],[126.969726,37.554877],[126.969947,37.554877],[126.969948,37.554464],[126.969668,37.554112],[126.969668,37.554111],[126.969667,37.55411],[126.969667,37.554108],[126.969667,37.554107],[126.969667,37.554105],[126.969668,37.554104],[126.969668,37.554103],[126.96967,37.554101],[126.969671,37.5541],[126.969672,37.5541],[126.969789,37.554047],[126.96979,37.554047],[126.969891,37.55401],[126.969891,37.554009],[126.969892,37.554009],[126.970045,37.553959],[126.970046,37.553959],[126.970246,37.553915],[126.970438,37.553884],[126.970439,37.553884],[126.97051,37.55388],[126.970585,37.553876],[126.970586,37.553876],[126.970587,37.553876],[126.970676,37.553878],[126.970797,37.553881],[126.970798,37.553881],[126.970799,37.553881],[126.970987,37.553901],[126.971122,37.553925],[126.971123,37.553925],[126.971124,37.553925],[126.971255,37.55396],[126.971256,37.55396],[126.971439,37.55402],[126.97144,37.554021],[126.971585,37.554084],[126.971586,37.554084],[126.971691,37.554138],[126.971692,37.554139],[126.971785,37.554193],[126.971786,37.554194],[126.971787,37.554194],[126.971788,37.554196],[126.971789,37.554197],[126.97179,37.554198],[126.97179,37.5542],[126.97179,37.554201],[126.97179,37.554202],[126.97179,37.554204],[126.971789,37.554205],[126.971788,37.554206],[126.971788,37.554207],[126.971465,37.554535],[126.971468,37.55486],[126.971491,37.554877],[126.972408,37.554877],[126.972412,37.554652],[126.972413,37.55465],[126.97281,37.554424],[126.972947,37.554345],[126.972948,37.554344],[126.972979,37.554302],[126.97309,37.554262],[126.973105,37.554256],[126.973114,37.554251],[126.973339,37.554123],[126.973354,37.554114],[126.97433,37.553559],[126.974347,37.553549],[126.974351,37.553548],[126.97447,37.553535],[126.975348,37.553441],[126.97583,37.553389],[126.975832,37.553388],[126.975902,37.553353],[126.976014,37.553296],[126.976346,37.553129],[126.9764,37.553102],[126.976426,37.553089],[126.976429,37.553087],[126.976429,37.553089],[126.976432,37.553163],[126.976434,37.55323],[126.976456,37.553511],[126.976456,37.553517],[126.9765,37.554066],[126.976503,37.554177],[126.976503,37.554198],[126.976504,37.554213],[126.976505,37.554221],[126.976523,37.554651],[126.976548,37.555219],[126.976608,37.555464],[126.976789,37.555829],[126.976832,37.555967]]]},properties:{CATEGORY:"",AREA_CD:"POI033",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.05296731611183,37.50852565746439],[127.0519518592951,37.50938571973545],[127.05009421233197,37.51118103877265],[127.04606063955703,37.5100030682328],[127.04439036876875,37.509250763592874],[127.04500428010175,37.508497587056695],[127.04555536701662,37.50807070736971],[127.04635847323881,37.50761862829892],[127.04692536914943,37.50730467762074],[127.04731899544478,37.50700961735428],[127.0468145256831,37.506382364603546],[127.047672715018,37.505892607402124],[127.04790086535262,37.505490944635696],[127.04724698249073,37.50522140280202],[127.04686909387941,37.50547880943933],[127.04671149846064,37.50535965562375],[127.04550688258621,37.50605032507948],[127.04517583612092,37.50563633260653],[127.04530968766092,37.50556726141477],[127.04501770428992,37.504619917614306],[127.04181250057822,37.505185804174396],[127.04322842353619,37.5021295930996],[127.04466995425616,37.50259337291785],[127.04489024997655,37.50221681687896],[127.04760782958462,37.502937325245],[127.04886776784102,37.50264818183694],[127.04986820210885,37.50296776536562],[127.05063100578893,37.50126703991184],[127.05232464810899,37.50181846165354],[127.05182132063831,37.50285398296708],[127.05606744539509,37.5042951883056],[127.05580006533316,37.50483492531569],[127.05642244311588,37.50506678763184],[127.05724960649233,37.50530482212652],[127.05562936361862,37.50829855051091],[127.05419544563604,37.507715685253444],[127.05367636969243,37.508776318804316],[127.05296731611183,37.50852565746439]]]},properties:{CATEGORY:"",AREA_CD:"POI034",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.01662418095002,37.59460337081534],[127.01552842137552,37.5937666331286],[127.01511224221814,37.59342782015559],[127.01488206367728,37.592958522741334],[127.01488138745097,37.59295851626151],[127.01466304941036,37.59245927844713],[127.0148490560913,37.59237621796565],[127.01486307763439,37.592377013139966],[127.0149340457866,37.592339890764194],[127.01493693493842,37.59233837949053],[127.01495704634992,37.59224490963556],[127.01519469912576,37.59126350489639],[127.01550298527589,37.59116438748026],[127.01602763618489,37.59095474662208],[127.01681037356747,37.59044431573483],[127.01694636823126,37.590487724116024],[127.01694768027473,37.59048215367846],[127.01886474981498,37.59103598246102],[127.018669969705,37.59141507173651],[127.0186267197984,37.591639067556926],[127.01879999091611,37.591828569222415],[127.018940920904,37.59256081829718],[127.01843550767587,37.593310978031695],[127.01843076699821,37.59330698092934],[127.01773537148483,37.593803691363256],[127.0177347984777,37.5938034276867],[127.01723170182552,37.594175219476526],[127.01723413451718,37.594176433760744],[127.01664513419689,37.59457773414182],[127.0166530329588,37.59458378236009],[127.01662418095002,37.59460337081534]]]},properties:{CATEGORY:"",AREA_CD:"POI035",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.030109,37.643341],[127.029755,37.643565],[127.029486,37.643735],[127.029162,37.64394],[127.029114,37.64397],[127.028898,37.64411],[127.028814,37.644165],[127.028746,37.644209],[127.028645,37.644273],[127.028581,37.644313],[127.028572,37.644319],[127.028488,37.644372],[127.028418,37.644417],[127.028301,37.644491],[127.028274,37.644509],[127.028162,37.64458],[127.028035,37.64466],[127.027977,37.644698],[127.027939,37.644722],[127.027846,37.64478],[127.027765,37.644831],[127.027695,37.644876],[127.027455,37.644641],[127.027403,37.64459],[127.027164,37.644373],[127.02706,37.644268],[127.027161,37.6442],[127.027336,37.644088],[127.0274,37.644042],[127.027296,37.643942],[127.027081,37.643746],[127.026995,37.643667],[127.027043,37.643634],[127.027022,37.643607],[127.026965,37.643537],[127.026952,37.643546],[127.026884,37.643586],[127.026858,37.643614],[127.026755,37.643651],[127.026677,37.643672],[127.026449,37.643719],[127.026394,37.643736],[127.025935,37.643913],[127.025916,37.643922],[127.025867,37.643967],[127.025836,37.644],[127.025821,37.644033],[127.025777,37.644122],[127.025403,37.643913],[127.025367,37.643891],[127.025164,37.643776],[127.024947,37.643718],[127.024795,37.643723],[127.024793,37.643723],[127.024711,37.643792],[127.024696,37.643804],[127.024695,37.643802],[127.024652,37.643727],[127.024651,37.643726],[127.024649,37.64372],[127.024516,37.643719],[127.02442,37.643718],[127.024345,37.643718],[127.024146,37.643699],[127.024133,37.643698],[127.023956,37.643681],[127.02395,37.643681],[127.023948,37.64368],[127.023683,37.643617],[127.023635,37.643605],[127.023631,37.643604],[127.023583,37.643593],[127.023576,37.643591],[127.023523,37.643578],[127.023446,37.643517],[127.023327,37.643422],[127.023308,37.643406],[127.023057,37.643205],[127.022749,37.642957],[127.022745,37.642956],[127.022705,37.642945],[127.022702,37.642944],[127.022691,37.642941],[127.022667,37.642934],[127.022504,37.642889],[127.02235,37.64278],[127.022333,37.642768],[127.02232,37.642721],[127.022307,37.642671],[127.022301,37.642647],[127.022297,37.642632],[127.022293,37.642616],[127.022329,37.642617],[127.022332,37.642574],[127.022379,37.642151],[127.022399,37.641973],[127.022432,37.641673],[127.022432,37.641672],[127.022464,37.64139],[127.02254,37.640708],[127.022557,37.64055],[127.022598,37.640184],[127.02264,37.639801],[127.02265,37.639715],[127.022662,37.639609],[127.022668,37.639555],[127.022724,37.639047],[127.022725,37.639036],[127.022726,37.639029],[127.022766,37.638671],[127.022813,37.63825],[127.02283,37.638094],[127.022855,37.63787],[127.022864,37.637789],[127.02287,37.637743],[127.022871,37.637742],[127.022895,37.637518],[127.022922,37.637259],[127.022991,37.636583],[127.023023,37.636247],[127.023028,37.63623],[127.023048,37.636029],[127.023099,37.636032],[127.023103,37.636116],[127.023185,37.636148],[127.023197,37.636014],[127.023205,37.635915],[127.023282,37.635899],[127.023446,37.636004],[127.023504,37.636041],[127.023569,37.636083],[127.023586,37.636093],[127.02362,37.636115],[127.023644,37.636138],[127.023679,37.63617],[127.023704,37.636194],[127.023822,37.636305],[127.023931,37.636406],[127.023991,37.636463],[127.024101,37.636565],[127.024188,37.636647],[127.024291,37.636743],[127.02439,37.636836],[127.024441,37.636884],[127.02452,37.636958],[127.024584,37.637018],[127.024703,37.637128],[127.024889,37.637301],[127.025071,37.637471],[127.02535,37.637731],[127.025607,37.637971],[127.025618,37.637981],[127.025973,37.638313],[127.026279,37.638598],[127.026452,37.63876],[127.026481,37.63879],[127.026491,37.6388],[127.026532,37.638838],[127.026609,37.63891],[127.026688,37.638984],[127.026805,37.639093],[127.026902,37.639183],[127.027051,37.639322],[127.027069,37.639338],[127.027266,37.639522],[127.027374,37.639622],[127.027515,37.639754],[127.027625,37.639856],[127.027689,37.639915],[127.027775,37.639995],[127.027841,37.640057],[127.027965,37.640172],[127.028097,37.640295],[127.028284,37.640468],[127.02835,37.64053],[127.028383,37.640561],[127.028431,37.640608],[127.028477,37.640651],[127.028523,37.640693],[127.028603,37.640768],[127.028614,37.640778],[127.028686,37.640846],[127.028811,37.640962],[127.028833,37.640982],[127.028892,37.641037],[127.029004,37.641143],[127.029088,37.641221],[127.029113,37.64124],[127.029148,37.641273],[127.029394,37.641503],[127.029627,37.641721],[127.029877,37.641956],[127.02998,37.642053],[127.030311,37.642363],[127.030411,37.642456],[127.030609,37.642641],[127.030639,37.642668],[127.030838,37.642854],[127.030855,37.642869],[127.030853,37.64287],[127.030722,37.642952],[127.030109,37.643341]]]},properties:{CATEGORY:"",AREA_CD:"POI036",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.02105776414432,37.511022074915424],[127.02105434969963,37.5110301228491],[127.01982694064934,37.51067695707283],[127.0208103402677,37.50859384996446],[127.02098574434169,37.50815653547901],[127.02179642529944,37.50840553855091],[127.02188098358347,37.50835976069602],[127.02227674350506,37.50845629585763],[127.02422945620577,37.504422859822526],[127.02648042248708,37.505058927406814],[127.02600812044595,37.50609006506679],[127.02650335162598,37.506251334011786],[127.02546873458938,37.50845707443882],[127.02437697585334,37.508179374355464],[127.02282489919803,37.51150588330716],[127.02105776414432,37.511022074915424]]]},properties:{CATEGORY:"",AREA_CD:"POI037",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.89228351954584,37.50906435123613],[126.89234045790029,37.50908856425808],[126.89233191086595,37.50909637287166],[126.8921435008551,37.50926854864414],[126.89210543432459,37.50930333872136],[126.89207462411122,37.509437718655164],[126.8920734774452,37.50944293607285],[126.89205517794272,37.509526106091876],[126.89199543270813,37.50979768506704],[126.89199515036385,37.50979901760379],[126.89194337655691,37.509918218073935],[126.89186352418106,37.510082538054505],[126.8918531384494,37.510098557482635],[126.89169202649755,37.51025831722778],[126.89166406524545,37.51028354719305],[126.89144524241264,37.510352251308134],[126.8914167455903,37.5103490795323],[126.89127153040482,37.510332915450356],[126.89110160792957,37.51031398823525],[126.89106185620399,37.51031110449597],[126.89102305777578,37.51034546769196],[126.89100648899546,37.510360139193175],[126.89089735330538,37.51044454508335],[126.89075496413943,37.51037288336189],[126.89056372180059,37.51027663112338],[126.89040261476171,37.51019555241829],[126.89036245760892,37.51017533153117],[126.88999608139366,37.509999041943125],[126.88935385506656,37.509690018296276],[126.88918704583936,37.50960975302539],[126.88860988300276,37.50930815272154],[126.88792116066543,37.50885915398533],[126.8883777332372,37.508409147579435],[126.88858723208727,37.50841619372198],[126.88896572728648,37.50803467388219],[126.88927545364155,37.507722465472824],[126.88940792775296,37.50759652928349],[126.89022094932353,37.50810168629221],[126.89038891921018,37.50820605017796],[126.8909368854103,37.50846424620691],[126.89102795103491,37.508507132449814],[126.89140285449498,37.5086801133997],[126.89145695290343,37.50870551279542],[126.89160437294655,37.508774726294995],[126.89211708541292,37.50899342372728],[126.8922825633512,37.509063944300536],[126.89228351954584,37.50906435123613]]]},properties:{CATEGORY:"",AREA_CD:"POI038",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.92766972655346,37.48418269155996],[126.92604397196425,37.48399031099912],[126.92746235337987,37.48285549467593],[126.92873090356122,37.48192135683206],[126.92918007072196,37.48152632941736],[126.92975544993634,37.48087411823634],[126.92996792237535,37.48099346108599],[126.92993635813966,37.481068737143445],[126.92992840847758,37.48115030176267],[126.9298335275082,37.48157691579633],[126.9297460725608,37.48248040091927],[126.93062818698853,37.48219229224711],[126.93085627880431,37.48245595758873],[126.93118698880662,37.48243732697256],[126.931197933356,37.48338165496461],[126.93129202457453,37.48381151718277],[126.93084314399403,37.48389282458876],[126.93046887743198,37.48417496017298],[126.93038195396527,37.484510597983814],[126.93343273221758,37.48489510441],[126.93343230354905,37.48537824528483],[126.93238518214719,37.48525215947795],[126.93228236798397,37.48575406535613],[126.93088104183133,37.48548972237198],[126.93054927278584,37.48663777208842],[126.93009942154718,37.48774182894228],[126.92951673140136,37.48774148275963],[126.92842250023033,37.487445920712574],[126.92713136353447,37.487212972815406],[126.9277477094266,37.48496705931871],[126.9271887721663,37.484853774107656],[126.92766972655346,37.48418269155996]]]},properties:{CATEGORY:"",AREA_CD:"POI039",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.936862,37.555101],[126.936868,37.555103],[126.936875,37.55504],[126.936925,37.554593],[126.936932,37.554561],[126.936985,37.554296],[126.93699,37.554268],[126.937003,37.554196],[126.937017,37.554112],[126.937053,37.553902],[126.937068,37.553811],[126.937106,37.553589],[126.937117,37.553508],[126.937124,37.553457],[126.937125,37.553453],[126.937171,37.553186],[126.937322,37.553196],[126.937401,37.553237],[126.93759,37.553329],[126.937675,37.55337],[126.937693,37.553379],[126.937767,37.553413],[126.937795,37.553427],[126.93787,37.553463],[126.93809,37.55357],[126.938255,37.553654],[126.938317,37.553686],[126.93852,37.553789],[126.938574,37.553818],[126.938661,37.553839],[126.938706,37.55385],[126.938825,37.553893],[126.938844,37.553902],[126.938937,37.55394],[126.939038,37.553972],[126.939064,37.55398],[126.939171,37.554015],[126.939186,37.55402],[126.939528,37.554134],[126.939578,37.554151],[126.939702,37.554192],[126.939954,37.554274],[126.940301,37.554385],[126.940333,37.554394],[126.94032,37.554412],[126.94027,37.55452],[126.940213,37.554628],[126.940207,37.554636],[126.940151,37.554728],[126.940109,37.554801],[126.940089,37.554836],[126.940046,37.554911],[126.940018,37.554949],[126.939991,37.55499],[126.939983,37.555032],[126.939972,37.555077],[126.939951,37.555119],[126.939943,37.555133],[126.939965,37.555151],[126.940002,37.555165],[126.940064,37.555133],[126.940113,37.555107],[126.940163,37.555078],[126.940201,37.555053],[126.940273,37.555009],[126.940279,37.554998],[126.940295,37.554985],[126.94031,37.554972],[126.940359,37.554938],[126.940392,37.554919],[126.940427,37.554904],[126.940457,37.554892],[126.94046,37.5549],[126.940455,37.554927],[126.940485,37.554969],[126.940529,37.555021],[126.940561,37.555036],[126.940478,37.555157],[126.940466,37.5552],[126.940466,37.555202],[126.940437,37.555265],[126.940407,37.555331],[126.940348,37.555435],[126.94028,37.555561],[126.940231,37.555652],[126.940274,37.555659],[126.940325,37.555677],[126.940483,37.55573],[126.940599,37.555768],[126.940891,37.55587],[126.94093,37.555884],[126.940951,37.555891],[126.941059,37.555926],[126.941167,37.555963],[126.941224,37.555978],[126.941254,37.555983],[126.941231,37.556043],[126.94114,37.556275],[126.941073,37.556445],[126.941062,37.556482],[126.941068,37.556483],[126.941372,37.556548],[126.942252,37.556597],[126.942497,37.556611],[126.942868,37.556633],[126.943319,37.556659],[126.943503,37.556671],[126.944201,37.556716],[126.94469,37.556742],[126.944694,37.556743],[126.945311,37.556776],[126.945384,37.55678],[126.945403,37.556781],[126.945888,37.55681],[126.945883,37.556906],[126.945881,37.556935],[126.94585,37.557343],[126.945849,37.557353],[126.945931,37.557358],[126.946075,37.557367],[126.94624,37.557376],[126.946604,37.557397],[126.946622,37.557398],[126.946643,37.557399],[126.94664,37.557429],[126.9466,37.557793],[126.946578,37.558087],[126.946553,37.558422],[126.946549,37.558475],[126.946542,37.558597],[126.946139,37.558587],[126.946129,37.558723],[126.946126,37.558767],[126.945819,37.558756],[126.945726,37.558752],[126.945725,37.558771],[126.945634,37.558767],[126.944994,37.558736],[126.944929,37.558733],[126.944581,37.558719],[126.94457,37.558719],[126.944063,37.558699],[126.943985,37.558696],[126.943844,37.558688],[126.943687,37.558678],[126.943664,37.558667],[126.943632,37.559134],[126.94361,37.559133],[126.943448,37.559127],[126.943376,37.559126],[126.942734,37.559117],[126.942384,37.559111],[126.941582,37.559108],[126.9412,37.559106],[126.940853,37.559105],[126.940552,37.559103],[126.940535,37.559107],[126.940446,37.559124],[126.940411,37.559195],[126.940402,37.559258],[126.9404,37.559347],[126.94039,37.559705],[126.940384,37.559944],[126.94037,37.560241],[126.939451,37.560106],[126.936916,37.560067],[126.936916,37.559805],[126.936916,37.559597],[126.936916,37.559342],[126.936916,37.559324],[126.936788,37.559318],[126.936509,37.559304],[126.93598,37.559264],[126.935531,37.559221],[126.935078,37.559181],[126.934613,37.559135],[126.934566,37.559129],[126.934461,37.559116],[126.934548,37.559035],[126.934873,37.558957],[126.934968,37.558925],[126.934966,37.558532],[126.934947,37.558129],[126.934947,37.557787],[126.934929,37.557711],[126.934742,37.557328],[126.934541,37.556983],[126.934495,37.556999],[126.934237,37.557092],[126.934026,37.556713],[126.933866,37.556771],[126.933754,37.55681],[126.933492,37.556902],[126.932896,37.557119],[126.932855,37.556895],[126.932834,37.556744],[126.93281,37.556572],[126.932884,37.556544],[126.933081,37.556473],[126.933228,37.556421],[126.933474,37.556332],[126.933683,37.556257],[126.933765,37.556227],[126.934039,37.556128],[126.934046,37.556126],[126.934394,37.556001],[126.934509,37.555959],[126.934592,37.555929],[126.934805,37.555852],[126.934818,37.555847],[126.934808,37.55583],[126.934727,37.555693],[126.934687,37.555625],[126.934639,37.555543],[126.934615,37.5555],[126.934606,37.555485],[126.934557,37.555401],[126.934537,37.555367],[126.934467,37.555391],[126.934442,37.5554],[126.934258,37.555468],[126.934313,37.555423],[126.934212,37.555249],[126.934115,37.555082],[126.934101,37.555056],[126.93416,37.555034],[126.934247,37.555003],[126.934608,37.554876],[126.934632,37.554867],[126.934674,37.554853],[126.934614,37.554735],[126.934576,37.554662],[126.934573,37.554658],[126.934473,37.554476],[126.93447,37.554471],[126.93444,37.554412],[126.934321,37.554197],[126.934276,37.554096],[126.934244,37.554107],[126.934099,37.554155],[126.933769,37.554269],[126.93368,37.554301],[126.933514,37.554359],[126.933489,37.554369],[126.933504,37.554395],[126.933548,37.554472],[126.933594,37.55455],[126.93365,37.554647],[126.933699,37.554727],[126.933659,37.554763],[126.93343,37.554849],[126.933379,37.554867],[126.933335,37.554881],[126.933305,37.554829],[126.933214,37.554675],[126.933176,37.554611],[126.933125,37.554524],[126.93311,37.554514],[126.933108,37.554513],[126.933072,37.554503],[126.933004,37.554474],[126.932902,37.55443],[126.932882,37.554421],[126.932867,37.554439],[126.932839,37.554472],[126.932818,37.554506],[126.932787,37.554556],[126.932757,37.554608],[126.932736,37.554649],[126.932687,37.55476],[126.932666,37.554789],[126.932664,37.554793],[126.932637,37.55479],[126.932406,37.554769],[126.932392,37.554768],[126.93234,37.554764],[126.932258,37.554758],[126.932096,37.554745],[126.932101,37.554694],[126.932117,37.554654],[126.93251,37.554385],[126.932541,37.554401],[126.932557,37.55439],[126.932578,37.554375],[126.932691,37.554295],[126.932871,37.554203],[126.932886,37.554195],[126.932936,37.554166],[126.932974,37.554149],[126.933039,37.554108],[126.933147,37.554034],[126.933386,37.553868],[126.933652,37.553671],[126.933825,37.553542],[126.933838,37.553532],[126.933857,37.553517],[126.933944,37.553451],[126.934016,37.553397],[126.934062,37.553362],[126.934115,37.553322],[126.934163,37.553285],[126.934195,37.553314],[126.934228,37.553345],[126.934253,37.553366],[126.934279,37.55339],[126.934296,37.553405],[126.934308,37.553415],[126.934374,37.553466],[126.934385,37.553475],[126.934403,37.553489],[126.934413,37.553497],[126.934468,37.553538],[126.934509,37.553568],[126.934582,37.553615],[126.934593,37.553622],[126.934593,37.553623],[126.93469,37.553683],[126.934794,37.553747],[126.934929,37.553824],[126.934943,37.553831],[126.935051,37.553895],[126.93517,37.553962],[126.93517,37.553963],[126.935194,37.553977],[126.935199,37.55398],[126.935228,37.553997],[126.935322,37.554051],[126.93571,37.554282],[126.935715,37.554285],[126.935788,37.554328],[126.935954,37.554427],[126.936053,37.554485],[126.936085,37.554505],[126.936126,37.554529],[126.936411,37.554697],[126.936621,37.554885],[126.936862,37.555101]]]},properties:{CATEGORY:"",AREA_CD:"POI040",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.03523389213235,37.481837246743744],[127.03533302327568,37.48182141615209],[127.03624502848835,37.48238407057252],[127.03623237133782,37.48239584245303],[127.03600857339747,37.48260399113708],[127.03602551362209,37.482615704927554],[127.03622049089958,37.48274305543788],[127.03622847548331,37.482748152760294],[127.0367231827694,37.483064537176425],[127.03746878259746,37.48340480105338],[127.03748649224643,37.48341288665488],[127.03801102376272,37.48363530015005],[127.03805214221043,37.48365273964797],[127.03805057407814,37.483656732417785],[127.03789513098296,37.48405095905694],[127.0378472167154,37.48417107740869],[127.03774288358825,37.48443256970015],[127.03772346904589,37.484458128579384],[127.03767913093841,37.48451651805473],[127.03759709200465,37.48468093074011],[127.0374910356584,37.48482185448076],[127.03748814698832,37.484836424586874],[127.03748701058694,37.48484210735983],[127.03747811733416,37.48484083107712],[127.03734233397492,37.4849956019288],[127.03732074899592,37.48502020626642],[127.03750332332906,37.485492379024244],[127.03736279928333,37.48565618172015],[127.0372819366945,37.48570838745681],[127.036887004075,37.48586318364936],[127.03674178685488,37.48600624530342],[127.03668997146389,37.48607307046999],[127.0363328667118,37.486533616716684],[127.03610292341769,37.48640834983018],[127.03606500741972,37.48645156744456],[127.035238912858,37.48739315365966],[127.0352031337149,37.487462346471396],[127.03513566079698,37.48763058161997],[127.03486548201877,37.48811331714482],[127.03443302021549,37.48851852979868],[127.034011159039,37.488458320065945],[127.0323669041187,37.48802783959178],[127.0324728190942,37.48784481123328],[127.0307658194247,37.48732152180875],[127.03158380840307,37.48549927563589],[127.02937549757763,37.48615833096057],[127.02982889892688,37.48397764776368],[127.0322057586018,37.48425313176503],[127.0322434473059,37.484257499578895],[127.0335612093674,37.48441020958812],[127.0336112144039,37.48415994174971],[127.03366592283466,37.48383480059683],[127.03404619931486,37.48306904365204],[127.03441090112716,37.48282305040506],[127.03444124575412,37.48280258582793],[127.03444128341599,37.482802553171666],[127.03453352956097,37.48267004418781],[127.03461409599804,37.482511814810785],[127.0346750017545,37.48238179223856],[127.03481457945064,37.482234511330034],[127.03498364099272,37.482082527687915],[127.03506031542784,37.48202298578759],[127.03523389213235,37.481837246743744]]]},properties:{CATEGORY:"",AREA_CD:"POI041",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.0331945015844,37.50151793353989],[127.03396549028227,37.49969809653119],[127.03289425277735,37.499296828763036],[127.03306734576289,37.49892030768379],[127.03369745990162,37.49910836600562],[127.0347517210723,37.49686177272038],[127.03632655716136,37.496459727857925],[127.03676809863155,37.497551362627654],[127.03779195380807,37.49770162866727],[127.03971383823259,37.498315903818],[127.03894301629185,37.50016087686027],[127.04162112478966,37.50095055622205],[127.04333626828581,37.49795070679952],[127.04443917743234,37.498577751722635],[127.04179614337903,37.50410031456804],[127.04115022210613,37.503924854206744],[127.0405514505129,37.50354858882133],[127.03547865155767,37.50196903671835],[127.03522681815883,37.50237068281147],[127.0335726784996,37.501844102912536],[127.0331945015844,37.50151793353989]]]},properties:{CATEGORY:"",AREA_CD:"POI042",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.918667,37.619116],[126.91896,37.61899],[126.918964,37.618988],[126.918956,37.618975],[126.918628,37.618501],[126.918573,37.618415],[126.91856,37.618389],[126.918251,37.617931],[126.918416,37.61786],[126.918665,37.617753],[126.918547,37.617573],[126.918416,37.617371],[126.918028,37.616793],[126.918018,37.616778],[126.917972,37.616713],[126.918618,37.616449],[126.918781,37.616382],[126.918809,37.616371],[126.918871,37.616466],[126.919018,37.616404],[126.919195,37.61633],[126.919454,37.616232],[126.919462,37.616229],[126.919523,37.616206],[126.919877,37.616049],[126.919904,37.616031],[126.92022,37.616494],[126.9203,37.61661],[126.920337,37.616666],[126.92054,37.616967],[126.920583,37.616938],[126.920683,37.616857],[126.92103,37.617072],[126.921295,37.617234],[126.921171,37.617369],[126.921399,37.6175],[126.921589,37.617602],[126.921687,37.617471],[126.921748,37.617443],[126.921823,37.617421],[126.921849,37.617437],[126.921868,37.617437],[126.921886,37.617431],[126.92191,37.617422],[126.921974,37.61738],[126.922068,37.617461],[126.922187,37.617386],[126.922107,37.617302],[126.922063,37.617321],[126.92199,37.617369],[126.921777,37.617166],[126.921958,37.617061],[126.922256,37.617249],[126.922335,37.617301],[126.922481,37.617411],[126.922422,37.617477],[126.922264,37.617653],[126.922227,37.617695],[126.922094,37.617856],[126.922039,37.617922],[126.921901,37.618093],[126.921842,37.618172],[126.9219,37.618208],[126.922185,37.61836],[126.922389,37.618455],[126.922533,37.618483],[126.922667,37.618483],[126.92288,37.618459],[126.923168,37.618443],[126.923199,37.618445],[126.923303,37.618445],[126.923428,37.618435],[126.923508,37.618413],[126.923546,37.618365],[126.923592,37.618302],[126.923617,37.618277],[126.923705,37.618199],[126.923791,37.618118],[126.923864,37.618333],[126.923997,37.618499],[126.924109,37.618622],[126.924293,37.618753],[126.924326,37.618768],[126.924344,37.618777],[126.924588,37.618873],[126.924667,37.618904],[126.924682,37.618912],[126.92488,37.619022],[126.925399,37.619311],[126.925418,37.619322],[126.925494,37.619355],[126.925432,37.619428],[126.925398,37.619482],[126.925393,37.619559],[126.925435,37.6197],[126.925375,37.619769],[126.925325,37.619777],[126.925216,37.619724],[126.925081,37.619819],[126.92506,37.619831],[126.925044,37.619819],[126.924996,37.619779],[126.924979,37.619766],[126.924947,37.61975],[126.92486,37.619674],[126.924846,37.619662],[126.92492,37.619599],[126.924961,37.619575],[126.925018,37.619559],[126.925011,37.619426],[126.924973,37.619408],[126.924865,37.619348],[126.924845,37.619335],[126.924742,37.619281],[126.924613,37.619212],[126.924498,37.619152],[126.924404,37.619095],[126.924351,37.619077],[126.924361,37.61912],[126.924386,37.619267],[126.924134,37.61927],[126.92409,37.619271],[126.924048,37.619272],[126.923943,37.619276],[126.923894,37.619278],[126.923825,37.619281],[126.923787,37.619289],[126.923767,37.6193],[126.923739,37.61931],[126.92377,37.619355],[126.923865,37.619402],[126.924223,37.619582],[126.924528,37.619732],[126.92442,37.619987],[126.92443,37.620005],[126.924351,37.620103],[126.92425,37.620053],[126.924184,37.62002],[126.924059,37.619956],[126.923965,37.619908],[126.923947,37.6199],[126.924027,37.61979],[126.923384,37.619491],[126.923379,37.619495],[126.923264,37.619582],[126.923168,37.619646],[126.923062,37.619701],[126.922938,37.619796],[126.922928,37.619803],[126.922917,37.619793],[126.922902,37.61978],[126.92269,37.619588],[126.922662,37.619557],[126.922659,37.619555],[126.922655,37.61955],[126.922537,37.619421],[126.922484,37.619364],[126.922339,37.619205],[126.922312,37.619176],[126.922311,37.619174],[126.92231,37.619174],[126.922307,37.619173],[126.9223,37.619185],[126.921996,37.619613],[126.921778,37.619919],[126.921705,37.620022],[126.921893,37.620096],[126.921849,37.620185],[126.921825,37.620241],[126.92177,37.620343],[126.921709,37.620472],[126.921695,37.620516],[126.921676,37.620575],[126.92163,37.62073],[126.921603,37.620754],[126.92158,37.62085],[126.921532,37.620841],[126.921446,37.621038],[126.921437,37.62103],[126.921161,37.620957],[126.920953,37.620904],[126.920843,37.620877],[126.920812,37.620874],[126.9208,37.620874],[126.920795,37.620854],[126.920882,37.620757],[126.920565,37.620704],[126.920582,37.620644],[126.920612,37.620474],[126.920612,37.620459],[126.920611,37.620344],[126.920572,37.620229],[126.920555,37.620211],[126.920539,37.620194],[126.920562,37.620123],[126.920672,37.619941],[126.9207,37.619924],[126.920528,37.619883],[126.920423,37.619854],[126.9204,37.619903],[126.920305,37.620067],[126.920298,37.620075],[126.919616,37.619701],[126.919477,37.619932],[126.919405,37.620094],[126.919396,37.620124],[126.919378,37.620183],[126.91935,37.620274],[126.919327,37.620388],[126.919316,37.620462],[126.919291,37.620564],[126.919237,37.620557],[126.919049,37.620534],[126.918968,37.62095],[126.918656,37.620905],[126.918432,37.620875],[126.918523,37.620461],[126.918497,37.620457],[126.918312,37.620428],[126.9184,37.62001],[126.917877,37.619938],[126.917941,37.61957],[126.917968,37.619413],[126.917969,37.619413],[126.918042,37.619383],[126.918044,37.619382],[126.918052,37.619379],[126.918055,37.619377],[126.918207,37.619315],[126.918507,37.619186],[126.918508,37.619185],[126.918517,37.619181],[126.918581,37.619154],[126.918583,37.619153],[126.918584,37.619153],[126.918667,37.619116]]]},properties:{CATEGORY:"",AREA_CD:"POI043",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.88547541491005,37.53245154731936],[126.88529954165422,37.53231114533074],[126.88489642282718,37.53150570849809],[126.88487036775335,37.53151080936611],[126.88353175538298,37.53177286393306],[126.8835167375256,37.53177580418769],[126.88351273126155,37.531776584049126],[126.88229792864263,37.53188222184676],[126.88167610006835,37.531900333177404],[126.88145375378446,37.53189944061903],[126.88083065798651,37.53188930907971],[126.88081106321054,37.53188899172727],[126.88047864220852,37.53188357892595],[126.87912361121273,37.53175411528117],[126.87776659971213,37.53157993573672],[126.87708002079442,37.53149141254727],[126.87707886704709,37.53149126717272],[126.87707908052357,37.53149215938106],[126.8775839968548,37.53365272354901],[126.8775920400231,37.53368713967316],[126.87767714151684,37.53401681216979],[126.87790807471255,37.534419347435005],[126.87818628727294,37.53469426091927],[126.8783853574744,37.53486769144795],[126.88287691488217,37.53637114535068],[126.8822034193099,37.53793104491066],[126.8770063264152,37.535981784822276],[126.87671855414727,37.535753638056846],[126.87648242905823,37.53554144779453],[126.87647595571984,37.535535629538046],[126.87645555283444,37.53551729976259],[126.87613973754597,37.53513287170907],[126.87588175737726,37.53472494336425],[126.87576188837856,37.53443284905637],[126.87562904266446,37.53397275065046],[126.87561315737365,37.53389703024941],[126.87540366663455,37.53289843642451],[126.87540258865543,37.53289359694049],[126.87539985989591,37.53288142160978],[126.87528495111664,37.532367804836746],[126.87514628335883,37.531747980432094],[126.87506768088096,37.531396644063605],[126.87502330115151,37.53122706563301],[126.87502306507314,37.53122617339671],[126.87501524358467,37.53119628578979],[126.87082717946288,37.530631093741086],[126.86931519082451,37.52336190452947],[126.87465712476083,37.522623298521665],[126.87724455317397,37.52228572074377],[126.87836632357441,37.5221380020957],[126.87824846758025,37.52414421779962],[126.87791215221878,37.525515215671405],[126.88035971754995,37.528623791271144],[126.88104252482816,37.52907277975502],[126.88377651885034,37.529139544609244],[126.88574545523616,37.529941999262526],[126.88610065238122,37.53027561497349],[126.88654259216916,37.531145951797605],[126.88698875445718,37.532024581964116],[126.886827531999,37.53228059816196],[126.8858025881333,37.53249018732513],[126.88547541491005,37.53245154731936]]]},properties:{CATEGORY:"",AREA_CD:"POI044",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.03665011935131,37.56593126402867],[127.03632132738468,37.56313728845647],[127.0360195660184,37.56203226045848],[127.03561316532067,37.56118790477198],[127.03680423148967,37.55971752025867],[127.03749799725423,37.55903963339482],[127.03871563721812,37.55844497713524],[127.03976311507478,37.55804845347261],[127.04043096780781,37.557964821286156],[127.04069311500636,37.55838175811735],[127.04166440291696,37.562291045009204],[127.04161374971852,37.56540833586245],[127.04161374391904,37.565397910205064],[127.03665011935131,37.56593126402867]]]},properties:{CATEGORY:"",AREA_CD:"POI045",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.96489100333457,37.53453903386473],[126.96471674837993,37.53446424597513],[126.9637591474203,37.53437922087098],[126.96327831522792,37.5341418139937],[126.96289119873902,37.53374852199907],[126.96258904794406,37.533677249160036],[126.96224128148339,37.53426626113903],[126.96223123633911,37.534263502340465],[126.96163817908726,37.535180789022206],[126.96151983862353,37.53546312188049],[126.96147571760251,37.53545607987511],[126.96146366587172,37.53545415633954],[126.9568000084508,37.533285087683424],[126.95663141327029,37.53314650195202],[126.95703764821323,37.532390775395086],[126.95622437256927,37.532058257039715],[126.95622579102307,37.53205232673391],[126.95575901202,37.53186155598164],[126.95576224804609,37.53186155718119],[126.95565662811536,37.53180141650066],[126.95545180853702,37.53175114333041],[126.95510529845721,37.53148748264939],[126.95493213116565,37.53121133819439],[126.95472751089673,37.53083478923045],[126.95469620852921,37.53048340455061],[126.95457030939237,37.53021982666704],[126.95450742493905,37.52998137097915],[126.95453909941045,37.52971785363287],[126.95457080410108,37.529404140170804],[126.95458675144658,37.529090420625344],[126.9546972938563,37.528688894186985],[126.95471322534347,37.52840027263808],[126.95480786536172,37.528237171511584],[126.95493408664224,37.52796114109168],[126.95524951582621,37.52747184884592],[126.9553441909053,37.52724600211967],[126.95545454743522,37.52714565154242],[126.95565956240227,37.52684455192289],[126.955896081418,37.52655601273347],[126.95613254717315,37.5263553162703],[126.95652665637677,37.52601663808549],[126.95684195852421,37.525715576898065],[126.957832091263,37.524840164880494],[126.95880803453106,37.525203322766586],[126.9587960243728,37.52521431337538],[126.96068016943796,37.52627821123832],[126.9610952556225,37.525264256804036],[126.96370874780281,37.52821655965366],[126.96371052603632,37.52821514453888],[126.96409919726695,37.52862025313317],[126.96462061040984,37.528333511594525],[126.96511802182671,37.52805996936232],[126.96608186851196,37.52752991965931],[126.96814073803992,37.529726829494855],[126.96541201366297,37.5317536389584],[126.96691619068052,37.53278218498331],[126.96673729826483,37.53415754071684],[126.96672467858431,37.534160591546424],[126.96669664951337,37.53435837005355],[126.96501051037285,37.53483549407037],[126.96489100333457,37.53453903386473]]]},properties:{CATEGORY:"",AREA_CD:"POI046",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.99008419397866,37.53424490567995],[126.9912404361766,37.53287089909878],[126.99440352666893,37.53307565091469],[126.99559002535135,37.53313128270045],[126.99565976648961,37.534048380275536],[126.99554107636664,37.53469312133799],[126.9953386434664,37.53509885848802],[126.9951109460899,37.53531099082267],[126.99476368611485,37.53531456731638],[126.99439838448986,37.53534687297988],[126.99412778082203,37.53549410643923],[126.99345581471418,37.535429426263505],[126.99275228311214,37.53533960066609],[126.99260796272,37.535386279668884],[126.99238245857333,37.535490415375584],[126.9920261687049,37.53558017636943],[126.99161125667807,37.535605287288796],[126.9914804802494,37.5355154934132],[126.9914264110413,37.53508452381932],[126.99126856493464,37.5350952863967],[126.99101599848944,37.535217374398876],[126.99099797372352,37.53509526608028],[126.9910972007473,37.53500908046247],[126.9911062315329,37.53491570523997],[126.99047486908535,37.53479354905187],[126.99052902889338,37.534463146347896],[126.99008419397866,37.53424490567995]]]},properties:{CATEGORY:"",AREA_CD:"POI047",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.11983241938364,37.47861774431436],[127.11931179864794,37.47903328631625],[127.11904798057361,37.47935566306637],[127.11847959274318,37.48018768522266],[127.11686887406239,37.47948920562396],[127.11800457146632,37.47785040307979],[127.12100023697221,37.4770189855802],[127.12344553639664,37.47662767071624],[127.12517819581564,37.47634986871503],[127.12548584679482,37.47630097799147],[127.12702734307952,37.47623851272855],[127.1270266074232,37.4762423070734],[127.12785507995594,37.47623689106176],[127.12782318662994,37.476405512476525],[127.12778487206043,37.47687660148129],[127.1277494341839,37.47731110636056],[127.12742912851732,37.47803180889426],[127.12723901355889,37.47845900187898],[127.12698728832272,37.479024745806846],[127.12685843875406,37.4793138377175],[127.12684980675229,37.47969173002574],[127.12683204644429,37.479886457058186],[127.1267403221827,37.48053618266472],[127.12611717536329,37.48046378067631],[127.12623740403552,37.48022121506793],[127.12553604542315,37.47998305684405],[127.12423372705075,37.48251107145509],[127.1217716549309,37.481664786008245],[127.12269286438338,37.479757848600926],[127.11983241938364,37.47861774431436]]]},properties:{CATEGORY:"",AREA_CD:"POI048",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.05797491075755,37.562948091984886],[127.05943547257765,37.56222642213011],[127.05908944970369,37.56100229568571],[127.05914555111322,37.56098558666744],[127.06428639088006,37.560228019347015],[127.06795528079907,37.55810330668586],[127.07011926676925,37.55984487891866],[127.07112985920206,37.56119456940029],[127.06513725289602,37.56462304260156],[127.06477620919388,37.56415423070902],[127.0629426369925,37.56517211395589],[127.06252324985073,37.56472287078572],[127.0627581671767,37.564560043507214],[127.06257146867316,37.56433439268471],[127.06231609191819,37.564472825002206],[127.06132681973175,37.563421882828145],[127.06132052178383,37.563414974734755],[127.05959592382787,37.5644424340223],[127.05898078060788,37.56400707164752],[127.05801412697654,37.563023143307916],[127.05797491075755,37.562948091984886]]]},properties:{CATEGORY:"",AREA_CD:"POI049",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.12782542009622,37.54031451897783],[127.12396925407013,37.54141917105127],[127.12368900480186,37.541156145338256],[127.123391521014,37.54072434233456],[127.12334881386708,37.54053533696927],[127.12290693539497,37.53994839236029],[127.12249874785249,37.53921962356995],[127.12199691548906,37.53825463748036],[127.12255616680405,37.538038001191474],[127.12339549385793,37.53798986463069],[127.12392921331896,37.537719234202996],[127.12493751476998,37.53731306443991],[127.12591148105541,37.536942465411364],[127.12652374918184,37.53772998648546],[127.12741614871513,37.53897810766761],[127.12784181342528,37.53998366374988],[127.12782542009622,37.54031451897783]]]},properties:{CATEGORY:"",AREA_CD:"POI050",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.9793640131132,37.488625300039544],[126.9792805295915,37.488472380045835],[126.9792407231038,37.48849066351794],[126.97902212738799,37.48858730305],[126.97866941712188,37.48871887714234],[126.97825925879792,37.488090259279744],[126.9783048873099,37.48788060311829],[126.97877391121027,37.48786663258976],[126.97914139966561,37.487842731229186],[126.97956872588966,37.487733243330375],[126.97992982428687,37.487500394654816],[126.980036700212,37.48741004165671],[126.97996358458984,37.48725622720586],[126.97986595272408,37.48702906647196],[126.97944423670393,37.48607482620376],[126.97898240229969,37.48508579822347],[126.97897416718546,37.48501876173362],[126.97897666253724,37.4849906507155],[126.97898777651146,37.48487135917856],[126.97917627917445,37.48439088474061],[126.9789231488694,37.48430308162744],[126.97888753649262,37.4842910017551],[126.97829354788738,37.484084202764926],[126.97827952908082,37.48407960504501],[126.97824915393171,37.48355332034352],[126.9782102277351,37.48288449443191],[126.97908160503852,37.48285264600662],[126.98274691092212,37.482753575662265],[126.9827763370003,37.48325952730823],[126.98278678296924,37.483560375619355],[126.98279913706462,37.48392258287621],[126.98294399059405,37.48434616799106],[126.98303226530227,37.484478178446416],[126.98346194367736,37.48486981764853],[126.983539745555,37.48554581868801],[126.98218317429851,37.48543343872942],[126.9821989903201,37.48664612984374],[126.98307203911375,37.486739585981546],[126.98318391874554,37.487561155446734],[126.98318070839616,37.487561630115536],[126.98319791286836,37.48798744893721],[126.98325339654323,37.48814170937423],[126.98326285924966,37.48830001780612],[126.98322140217722,37.488625185669626],[126.98320947602154,37.488721971905036],[126.98332575798997,37.48895617684748],[126.98330147124946,37.48954006026678],[126.98241549430911,37.48949958991289],[126.98169904739697,37.489591153621966],[126.98081153742434,37.48999206220814],[126.980809557658,37.48998534022872],[126.9807461867529,37.48973638150095],[126.98066563300368,37.489472102786735],[126.98059921258213,37.48911165592485],[126.98054580079895,37.48863172665161],[126.9793640131132,37.488625300039544]]]},properties:{CATEGORY:"",AREA_CD:"POI051",AREA_NM:"()"}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.96366435775245,37.55756599579626],[126.9640462958353,37.55744543022994],[126.96416460428065,37.55775607521974],[126.96402365680619,37.55801322452872],[126.96425883433726,37.55818475739598],[126.96419576637201,37.55841687069332],[126.9642038697456,37.55879408829006],[126.96447888105287,37.55882186896192],[126.96457821634193,37.5589722572802],[126.96449201226172,37.55908104343848],[126.96551486591714,37.55890078106981],[126.96555578270825,37.558965043110476],[126.96579890437151,37.55957199646844],[126.96581917443159,37.559596221197665],[126.96617911246565,37.55979682667348],[126.96623608015582,37.55983487447711],[126.9662122491942,37.559849220116575],[126.9661751566175,37.5599051694774],[126.96598752231866,37.560041959965204],[126.96648852300606,37.560330907986405],[126.96705374172909,37.560725836453145],[126.96762620684602,37.56091786589109],[126.96746209269766,37.561244292298056],[126.96715783542564,37.56136336870753],[126.96670349048978,37.56124748914578],[126.96637789527028,37.561600015776136],[126.96606720192757,37.56154392326071],[126.96566752795552,37.561116971099494],[126.96530412941758,37.56086365669118],[126.96510413558478,37.56099381909947],[126.96478739669632,37.5608764284308],[126.9646041445363,37.56132645814185],[126.96442602880647,37.5613023254238],[126.96441325339401,37.5614204495039],[126.96369530999044,37.56141299640418],[126.96407933294185,37.562055608647356],[126.96355403468209,37.56225939151409],[126.96313000807942,37.56219943747365],[126.96245511186271,37.56080490892958],[126.96185396303683,37.560785601936004],[126.96193425054446,37.55929127593806],[126.96194174003946,37.55923234593101],[126.96166927781175,37.55907092824838],[126.961487144712,37.55885192594062],[126.96124864287427,37.55870940303041],[126.96035021768014,37.55800413446658],[126.96160409622921,37.55694742304222],[126.96173682547789,37.55738469287321],[126.96177813490483,37.55759837360893],[126.96206972376855,37.55759582977394],[126.96208268100898,37.55818144072376],[126.96253331979091,37.55818158458368],[126.96254190532122,37.55757883437342],[126.96304223571802,37.55759350032155],[126.96304222594684,37.557613284332625],[126.9634166528537,37.55760944413746],[126.96366435775245,37.55756599579626]]]},properties:{CATEGORY:"",AREA_CD:"POI052",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.90497589872405,37.55208328601432],[126.90509441020218,37.55202370177312],[126.90689382017983,37.55050927341602],[126.90905037997446,37.54864059607043],[126.90918983999629,37.548606089241744],[126.90957962218866,37.548596839628324],[126.9101132622422,37.54863544200033],[126.91090465476978,37.5487554009712],[126.91116295687617,37.548373646183954],[126.91077943425434,37.54816328483795],[126.91055787416305,37.547905301351946],[126.91045185614621,37.54755549852941],[126.91034625489603,37.54671831827295],[126.91031947058748,37.54621679517624],[126.91048415814603,37.545900755333],[126.91060062166765,37.54583543015395],[126.91082473063877,37.545922817491906],[126.91207780977585,37.54573296804409],[126.91729007317267,37.54544782790741],[126.91840257553324,37.548012438195336],[126.91366876415408,37.54899139823932],[126.91364317711522,37.549079705323024],[126.91342595409239,37.5489494447506],[126.91326101438693,37.54898035709149],[126.91306844846243,37.549563881848066],[126.91168378336688,37.554189213875475],[126.90497589872405,37.55208328601432]]]},properties:{CATEGORY:"",AREA_CD:"POI053",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00441107169057,37.58048965463597],[127.00434388338867,37.58054981617957],[127.00420511728082,37.581219988639376],[127.0045088957216,37.58122491130437],[127.00455576392092,37.5813175208767],[127.00463821307302,37.58152717824993],[127.0046744454994,37.58162490724084],[127.00467712160415,37.58171724060421],[127.00466001957659,37.58209077109258],[127.00465827854401,37.58242619045928],[127.0046190952637,37.58270674102153],[127.00460312698891,37.582813211194654],[127.00458632496203,37.583101715400886],[127.004454681695,37.58311788276948],[127.00436950926307,37.58310920035649],[127.00430498266508,37.58325343125815],[127.00427845817303,37.58331064537453],[127.00424919307038,37.58334647937849],[127.00416129587568,37.58361896804996],[127.00384667332804,37.58385832411846],[127.00309247857875,37.58400195351961],[127.002884269089,37.58415293049368],[127.00287039624021,37.58436650055144],[127.00300221601854,37.584484307740915],[127.00300119878874,37.58448451764418],[127.00299627168863,37.5845865491464],[127.00291737714274,37.58470427963242],[127.00216291337132,37.58506532994994],[127.00166486075659,37.58512812655902],[127.00159988188754,37.58516078694666],[127.00083262307844,37.5851008266681],[127.00064160211032,37.58488334875902],[127.00061516620572,37.584853250967434],[127.00050437373285,37.584719949210736],[127.00007949202738,37.58424339500868],[126.99992639357927,37.58408592780761],[126.99949757642524,37.58368670373699],[126.99931165919995,37.58350853962303],[126.99914213678869,37.583355791463944],[126.99878531822841,37.58303217673938],[126.99861272965484,37.582875058600635],[126.99850403731766,37.582769180954806],[126.99835771371058,37.58265439215147],[126.99813024127013,37.582475926942564],[126.99784530538275,37.58225238395465],[126.99772431962663,37.58215074006161],[126.99752349041557,37.582006867113336],[126.99753920320556,37.581996911426046],[126.99776223000758,37.58188100409228],[126.99810462067835,37.581807365325346],[126.99825269122687,37.58135077007049],[126.99888194114735,37.58139864680611],[126.99934462615475,37.58135078118313],[126.99935223498156,37.58124583302501],[126.99936332121668,37.581245300742225],[126.9994347243594,37.5812430221031],[126.99958072370673,37.58123925880818],[126.99970894320248,37.58123595175505],[126.99971651911093,37.58123575672542],[126.99975228378678,37.5812096106571],[126.99975751844255,37.58120623656672],[126.99976418173445,37.58120194374917],[126.99977220951082,37.58119514918661],[126.99977356753423,37.58119496923571],[126.99982768364698,37.58115639023276],[126.9998565419296,37.581135649986315],[126.99996625351726,37.58116239258562],[126.99998894202754,37.58116796301903],[127.000956458909,37.58133109289905],[127.0009501457005,37.5817484609085],[127.00198193735375,37.58175581257046],[127.00212834122388,37.58088004210272],[127.00213631632987,37.58087999285062],[127.00212762171438,37.579577765789054],[127.00334677817628,37.57975647210535],[127.00335297224674,37.57975738000992],[127.00442944296239,37.57994040243676],[127.00441107169057,37.58048965463597]]]},properties:{CATEGORY:"",AREA_CD:"POI054",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.92511170954577,37.55764686360526],[126.92437989436628,37.557956560466806],[126.92347839419362,37.55875539729889],[126.92334313663778,37.55840262598438],[126.92255596989139,37.55896352694798],[126.92214664831893,37.558499477209836],[126.9211419311288,37.55754943970226],[126.92187527464785,37.55687145203926],[126.92153694159965,37.55632765395053],[126.92068002541762,37.55604140757975],[126.92167935255821,37.55506266385205],[126.92169883286694,37.5550488288048],[126.92207001741023,37.55472554260616],[126.92208908176103,37.55470894117417],[126.92213268167882,37.55467095772177],[126.92246460766036,37.55438662970433],[126.92254229041924,37.5543200804935],[126.92260878117179,37.55441387297167],[126.92284168387532,37.55466423334286],[126.92299215962305,37.55482288974647],[126.92310157741672,37.55493824414198],[126.92314042029793,37.55497920190988],[126.9233480210456,37.555197261989704],[126.92352525567544,37.55537493729154],[126.92357920867943,37.5554256536035],[126.92366437814978,37.55550570869092],[126.92366703510548,37.55550820618496],[126.92395575394752,37.55572228219723],[126.92418370766829,37.555863670896585],[126.92425419885413,37.555900720699384],[126.92440662835449,37.55598084626699],[126.92468529062613,37.55610613036772],[126.92487444099712,37.55615780793649],[126.9249443430257,37.55617398100751],[126.92512196084756,37.556215073078754],[126.9246332858943,37.55664003836277],[126.92574453641521,37.55743967894485],[126.92511170954577,37.55764686360526]]]},properties:{CATEGORY:"",AREA_CD:"POI055",AREA_NM:"(2)"}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.05414215214367,37.590266389129916],[127.05437665599283,37.590162578201486],[127.05460485269913,37.590139772826696],[127.05461899990584,37.58998086608279],[127.05472593307313,37.589924066480805],[127.05499978183234,37.589314807560456],[127.05378852415508,37.58835829977109],[127.0551723191466,37.58776604963379],[127.05588271657543,37.58809442652961],[127.05617131553088,37.587789505174385],[127.0565783140578,37.58787159950828],[127.056755913415,37.58771327464042],[127.0572443116473,37.58796542149329],[127.05741451103128,37.587889191139496],[127.05780670961178,37.58874531216639],[127.05912390484436,37.58915577765943],[127.05994530187138,37.589061957174884],[127.06041150018406,37.58920855163002],[127.06123289721111,37.589267189331245],[127.06176569528273,37.58980079028932],[127.06234289319366,37.58996497442984],[127.06242907755943,37.59034592627039],[127.06230557011793,37.59070887816827],[127.0624523440821,37.59102571063368],[127.06238435489495,37.59115382421246],[127.06203343902907,37.59101279536797],[127.06194668146468,37.59090446755435],[127.06124506764247,37.590881845397305],[127.06111295977877,37.590829369201835],[127.0609353022391,37.59058972599259],[127.06088143975164,37.5903303144655],[127.05934590404082,37.59021124996155],[127.05871690631744,37.589865291244855],[127.05869470639777,37.59032852373783],[127.05990830200533,37.591190480323085],[127.06034490042511,37.591612659498146],[127.05956050326412,37.59171820391771],[127.05854669348899,37.59177975802822],[127.05860495156506,37.59239056077444],[127.05871431228222,37.59238065430155],[127.05873523819619,37.59275009849157],[127.05851428367237,37.59255480780536],[127.0582398045544,37.5925221031493],[127.05784174091657,37.59278502216055],[127.05721471175444,37.59297886180214],[127.05606771590584,37.59127843451538],[127.053373419747,37.592451203957644],[127.05155431712214,37.592774347328316],[127.05071282047285,37.59287686196022],[127.05049107518268,37.591906531181706],[127.04981356246604,37.5919238440733],[127.04978240322878,37.5915091605628],[127.04975599775037,37.59115774257429],[127.05071161518627,37.59110058581374],[127.05071861985489,37.59091330759739],[127.05142463451944,37.590873277070976],[127.052230306242,37.590566472958585],[127.05243020495136,37.590867159678815],[127.05414215214367,37.590266389129916]]]},properties:{CATEGORY:"",AREA_CD:"POI056",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.01046578065052,37.647331562994225],[127.01010322526965,37.64727394005493],[127.00948496512083,37.647104062192334],[127.00921399584595,37.64699484347051],[127.00803469916801,37.646360729612844],[127.0068287082498,37.64571750209383],[127.00569525077945,37.645144051067106],[127.00457324709043,37.64437334932068],[127.00469916992589,37.64421858735478],[127.00478692127169,37.643912104231326],[127.00505023138027,37.643884783189954],[127.00512654844533,37.64380891860955],[127.00543565711789,37.643860490449235],[127.0054051246985,37.64381194062708],[127.00556918209624,37.64333855853261],[127.00573325443665,37.64308669116741],[127.00646598939214,37.64365106131862],[127.00648890078547,37.6438209893508],[127.00683616907953,37.64384524535199],[127.00704604692154,37.643757233908346],[127.00738569760388,37.643930176872736],[127.00778639677632,37.64399690904019],[127.00792377063692,37.64393621086391],[127.00819854203307,37.644036328988086],[127.00758798201365,37.644227540275935],[127.00776358438084,37.64480710903089],[127.00809176403027,37.64471301899474],[127.00869089985777,37.644706907477754],[127.00844676002662,37.64553836475398],[127.01066018246611,37.64572935590395],[127.01046578065052,37.647331562994225]]]},properties:{CATEGORY:"",AREA_CD:"POI057",AREA_NM:"419 "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.11282441329656,37.49709625020131],[127.11226988142002,37.49687121610985],[127.1116365202985,37.49666152148212],[127.11134530695023,37.49657142539251],[127.11103327828789,37.49647558170897],[127.11072238139386,37.49637982623906],[127.11035797424432,37.496268892942105],[127.10977057393139,37.496085454722575],[127.10953536593085,37.49601215092518],[127.10910579281664,37.49587820839766],[127.108973085738,37.49583670439241],[127.1088610829484,37.49580202880914],[127.1084083195656,37.49566071685395],[127.10814177600591,37.4955775279555],[127.10781006856075,37.49547430549669],[127.10752847976741,37.495386533807334],[127.10724010347093,37.495296515090544],[127.10664185903138,37.49511063840011],[127.10617281752283,37.49496744043468],[127.10577063763101,37.494844453405896],[127.10554675203674,37.49477572664248],[127.10521222617628,37.494673580596704],[127.1049277040603,37.494586345908715],[127.10433513143451,37.49440504760346],[127.10364435654887,37.49418689124137],[127.10548235216929,37.49320794249796],[127.10639787421141,37.4925926348782],[127.10774920879956,37.49152380703087],[127.10858426183302,37.490573290931074],[127.10918650630362,37.489644608351014],[127.10927689611023,37.489674618422896],[127.11161753773762,37.490441169608786],[127.11192026811091,37.4905358493632],[127.11483761150545,37.49142270400296],[127.11522586522838,37.49062648486798],[127.11707146971081,37.49116490624763],[127.11924837613928,37.491803473761905],[127.11808571633658,37.49327665730207],[127.11744745492065,37.493972510242806],[127.11656105441786,37.49494242060267],[127.11608365960686,37.495477818144295],[127.11574194948703,37.49586099099918],[127.11552418835048,37.49610546694185],[127.11488862766025,37.496905319008704],[127.113717854183,37.4971853838244],[127.11282441329656,37.49709625020131]]]},properties:{CATEGORY:"",AREA_CD:"POI058",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.024632,37.525277],[127.024218,37.525066],[127.024072,37.524988],[127.023951,37.524927],[127.02391,37.524909],[127.023833,37.524869],[127.023696,37.5248],[127.023672,37.524787],[127.023433,37.524666],[127.023195,37.524545],[127.023069,37.524475],[127.022957,37.524423],[127.02272,37.5243],[127.02265,37.524263],[127.022389,37.524127],[127.022247,37.524053],[127.022181,37.524019],[127.022056,37.523956],[127.021903,37.52388],[127.021715,37.523787],[127.021213,37.523534],[127.021199,37.523527],[127.021042,37.523447],[127.020984,37.523418],[127.020765,37.523307],[127.020755,37.523302],[127.020727,37.523287],[127.020471,37.523156],[127.020326,37.523082],[127.019586,37.522702],[127.019562,37.52269],[127.019291,37.522551],[127.018664,37.522241],[127.017816,37.521821],[127.017822,37.521812],[127.017963,37.521341],[127.018254,37.520366],[127.018348,37.520051],[127.018663,37.518999],[127.018838,37.518413],[127.018972,37.517966],[127.019064,37.517657],[127.019279,37.516937],[127.019496,37.516211],[127.019525,37.516112],[127.019784,37.516221],[127.020422,37.516488],[127.020642,37.51658],[127.021177,37.516805],[127.021907,37.517111],[127.021915,37.517114],[127.022274,37.517264],[127.022702,37.517444],[127.022774,37.517474],[127.023239,37.517669],[127.023385,37.51773],[127.023411,37.517741],[127.02417,37.518059],[127.025279,37.518524],[127.025612,37.518663],[127.025674,37.518689],[127.026135,37.518882],[127.026246,37.518929],[127.026269,37.518938],[127.027161,37.519312],[127.027922,37.519631],[127.027937,37.519637],[127.027941,37.519639],[127.028062,37.51969],[127.028065,37.519691],[127.028084,37.519697],[127.028085,37.519701],[127.0281,37.519988],[127.028136,37.520651],[127.028137,37.520669],[127.028138,37.520688],[127.028139,37.520695],[127.028139,37.5207],[127.028139,37.520701],[127.028156,37.521007],[127.028163,37.521134],[127.028175,37.521344],[127.028175,37.521346],[127.028199,37.521763],[127.0282,37.521771],[127.028201,37.521789],[127.02822,37.522129],[127.028221,37.522137],[127.028221,37.522138],[127.028222,37.522159],[127.028246,37.52257],[127.02825,37.522625],[127.028253,37.522657],[127.028261,37.522764],[127.028275,37.522952],[127.028275,37.522953],[127.028276,37.52296],[127.028276,37.522962],[127.028277,37.522973],[127.028306,37.52335],[127.028326,37.523719],[127.028329,37.523765],[127.028329,37.523769],[127.028329,37.52377],[127.028329,37.523772],[127.02833,37.523787],[127.028345,37.524064],[127.028357,37.524277],[127.028373,37.524576],[127.028373,37.524578],[127.028373,37.524579],[127.028374,37.524584],[127.028374,37.524586],[127.028374,37.524595],[127.028375,37.524603],[127.028416,37.525354],[127.028425,37.525552],[127.028425,37.52556],[127.028426,37.525565],[127.028427,37.525599],[127.02843,37.525669],[127.028438,37.525852],[127.02844,37.525901],[127.028442,37.525941],[127.028442,37.525942],[127.028443,37.525962],[127.028458,37.526301],[127.028458,37.526304],[127.028465,37.526473],[127.028463,37.526525],[127.028462,37.526526],[127.028462,37.52653],[127.028462,37.526536],[127.02846,37.526572],[127.028442,37.526891],[127.028436,37.526987],[127.028378,37.527131],[127.028365,37.527164],[127.028364,37.527166],[127.028355,37.527162],[127.027336,37.526655],[127.026422,37.526189],[127.026368,37.526162],[127.02548,37.525709],[127.025389,37.525663],[127.024632,37.525277]]]},properties:{CATEGORY:"",AREA_CD:"POI059",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.99785248939912,37.57006251231689],[126.99787909650637,37.56973754185359],[126.99796794877075,37.56889037247712],[126.99797289102803,37.56884324954111],[126.99797371213452,37.56884338469464],[126.99823006004897,37.568885584488456],[126.99854381690758,37.56893993140731],[126.99872633913014,37.568973164308524],[126.99894882966365,37.56901456075673],[126.99919873561868,37.5690615794933],[126.99944422731002,37.56911029148076],[126.99979635815251,37.56917900649764],[126.9999795945689,37.569215327859716],[127.00019837370587,37.569260659221186],[127.00037046098632,37.56929585361581],[127.00050947339754,37.56932429007057],[127.00063717791994,37.569349915194756],[127.0007878607617,37.5693806128881],[127.00112249441099,37.569443116029106],[127.00130748662733,37.56947690355809],[127.00144561455265,37.56950928433498],[127.00157202250952,37.56953245685785],[127.00162531187331,37.56954222533439],[127.00172029280255,37.569559965665505],[127.0018085500295,37.569568696056216],[127.00193323306699,37.56958136357653],[127.00201000116846,37.56958980554021],[127.00202888870406,37.569591749792345],[127.00203364119447,37.56959223908567],[127.0020298764327,37.56963538876958],[127.0019639681248,37.570390786381715],[127.00191050933543,37.571006810011234],[127.00145799714038,37.5709725370672],[127.00118805891393,37.57095276894582],[127.00047061277031,37.5709002281534],[127.00035768886619,37.57088490129319],[127.00033021623945,37.57088481297835],[127.00025693329994,37.57088458491345],[126.99999834922784,37.57086556201241],[126.99953181386152,37.5708295606167],[126.99921571552879,37.57080768789767],[126.99895067993177,37.57078586951337],[126.9988427708469,37.57077699238611],[126.99871926326719,37.57076999607697],[126.99785248939912,37.57006251231689]]]},properties:{CATEGORY:"",AREA_CD:"POI060",AREA_NM:"()"}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.80459442848822,37.5697687052747],[126.79369042546057,37.561126608239476],[126.80027457324411,37.55993088126013],[126.80589809532205,37.55537338299506],[126.80834595854478,37.55776659323218],[126.80459442848822,37.5697687052747]]]},properties:{CATEGORY:"",AREA_CD:"POI061",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00745438346077,37.58330014346031],[127.00648026211138,37.58317578322779],[127.00644417657765,37.58308964985095],[127.00629986592055,37.58310879883045],[127.00560233061711,37.582764292575575],[127.00583074418424,37.581740227727224],[127.00591488545,37.58124255247761],[127.00568638793243,37.581127716531334],[127.00553003958449,37.58093631199685],[127.00537370510659,37.58092674861882],[127.00525343154857,37.58068748907046],[127.00500087846642,37.58046737626592],[127.0053856956218,37.58043864753909],[127.00533757410689,37.5801706729442],[127.00518123462233,37.580065403314016],[127.0051932515167,37.57994098498861],[127.00555401842061,37.5799601097657],[127.00578248552021,37.5797304043941],[127.005818571649,37.57985482042268],[127.00626351523026,37.57985479765259],[127.00625145051869,37.579385838871794],[127.00680462276247,37.57941452008342],[127.00684065790352,37.57896469974847],[127.0072014076128,37.57884983107349],[127.0072133738632,37.57823731180464],[127.00698481469799,37.57738554185133],[127.00730948317889,37.57728981615341],[127.00739362095428,37.57690698673336],[127.00804299614667,37.57712706818251],[127.00854803240074,37.57698347362419],[127.00857210332694,37.57716531336499],[127.00839176594913,37.577509868070486],[127.00850004973469,37.5780171023045],[127.00813934041744,37.578447804845986],[127.00823562062973,37.579156022696566],[127.00844008142406,37.57941441448073],[127.00889710703245,37.57991205213684],[127.00899337674008,37.58045756901222],[127.00852445803218,37.5811562574943],[127.00827192656251,37.5812328402432],[127.0080675212722,37.58152954291365],[127.007682712319,37.58168269814036],[127.00749032451024,37.58193154602303],[127.00714158623104,37.58204641479536],[127.00697325640138,37.58239096632195],[127.00717773178931,37.58275463669896],[127.00745434624373,37.58292689026817],[127.00745438346077,37.58330014346031]]]},properties:{CATEGORY:"",AREA_CD:"POI062",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.95149173984471,37.51498406633297],[126.95206002769153,37.513202331929264],[126.95166617617971,37.51321472048376],[126.9513984195738,37.513126767186066],[126.95120936675558,37.51313923830752],[126.95062601605164,37.51384174329446],[126.95043687831604,37.513979703738],[126.95015322465767,37.51410507496719],[126.94974353843169,37.514230391955195],[126.94928642756364,37.51459411927577],[126.94980561292665,37.51563591278033],[126.94794608002167,37.516400600272085],[126.94737885084037,37.51650074136132],[126.94668558454678,37.516600822901125],[126.94328301288989,37.516084726827515],[126.94314129999309,37.51598426625661],[126.94295220995089,37.516034371299575],[126.93554862532328,37.51492624657639],[126.9350933758949,37.51305618756059],[126.94401162179508,37.51085211633321],[126.94443671744001,37.51117859276249],[126.94525556875898,37.51161819237198],[126.94571211748617,37.51203252218959],[126.94586959800365,37.51210788884259],[126.94654684659523,37.512321531333875],[126.94692483405697,37.51245974147115],[126.94746039418706,37.512547824340565],[126.94813754709774,37.51291204639707],[126.94840514360708,37.51322589012047],[126.95001225955376,37.51287520746585],[126.95242261058421,37.51281345762126],[126.95428151896512,37.51285183893483],[126.95442324852182,37.51293973714076],[126.95476979166605,37.51300261565716],[126.95494299933301,37.51314072153299],[126.95530523771498,37.51330399695267],[126.95539973039844,37.51335422891431],[126.95560446993608,37.51345469853202],[126.95547829052191,37.51370563225043],[126.95510002537144,37.51399411744596],[126.95149173984471,37.51498406633297]]]},properties:{CATEGORY:"",AREA_CD:"POI063",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.96975395905808,37.56863072686804],[126.96937562026854,37.56874594898168],[126.96790976479129,37.5672567084674],[126.96838951124948,37.56695227731603],[126.96851346533336,37.566932292372826],[126.96861227217003,37.56690944089255],[126.96888350827439,37.566926671035404],[126.96912604420507,37.5668452325805],[126.96920494475069,37.567178411008925],[126.96956059037666,37.56724141716215],[126.96968285377754,37.56696119569463],[126.9697834635404,37.56692118535418],[126.9699633233631,37.56635214617942],[126.97070587704462,37.56600063523651],[126.97109843394396,37.566116477929846],[126.97191755864279,37.56575367449433],[126.97196075939952,37.56544501920793],[126.97198694563504,37.565422996634204],[126.9720229302782,37.56539273358774],[126.9722807317763,37.5651759217614],[126.97232912960217,37.564894021558224],[126.97239255277553,37.564790722224274],[126.97248174288778,37.564783643533545],[126.97277410669032,37.56482785176689],[126.97278771813912,37.56475935888245],[126.97279477474409,37.564723849957446],[126.97279703520488,37.56459348893465],[126.97409459403818,37.56449695012833],[126.97425397188674,37.564457774371476],[126.97616513073385,37.56462721704865],[126.97623414848917,37.56450786243396],[126.97624497868087,37.56448913339811],[126.97666443587573,37.56418417245375],[126.97682910489489,37.56428147638532],[126.97683379381124,37.564284247087606],[126.97704590926907,37.564480574763344],[126.97709005074508,37.564815166243555],[126.97709278054526,37.56482635611347],[126.977096929114,37.56497829847428],[126.9765990358477,37.56499906017012],[126.97581726905237,37.56505075993969],[126.97505415382615,37.56498392747869],[126.97465394975735,37.56505051592501],[126.9735592236955,37.565389449901126],[126.97347162593519,37.56615407596896],[126.97280616623176,37.56619088034161],[126.97267123964359,37.56618352615169],[126.97194520907381,37.566472275094945],[126.97117199433703,37.56697157773917],[126.97134791484899,37.56728047072936],[126.97138019284083,37.567426324464115],[126.97114283739815,37.5680496863983],[126.97053931887646,37.567917990064494],[126.97026605510571,37.568472707862576],[126.9699946837794,37.56837940289908],[126.96975395905808,37.56863072686804]]]},properties:{CATEGORY:"",AREA_CD:"POI064",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.99589787814466,37.48164454424946],[126.99620171598,37.48099899617672],[126.99767140887676,37.481472815632195],[126.99575997804777,37.48440875530389],[126.99444931509964,37.483876481427444],[126.99589787814466,37.48164454424946]]]},properties:{CATEGORY:"",AREA_CD:"POI065",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.9881936016654,37.58368100395479],[126.9881073637988,37.58365846400819],[126.9880971668783,37.58370595779895],[126.9876677476071,37.58376846786777],[126.9875832928943,37.58393990371999],[126.9875701779884,37.5840256246907],[126.9873575612228,37.58458627259158],[126.9872541655036,37.58485153736314],[126.9875787658715,37.58490370041537],[126.98753798922,37.58501490347327],[126.9875510528299,37.58523847796694],[126.9875947228166,37.58523616574465],[126.9877242533288,37.58537403006311],[126.9878360345608,37.58553580350543],[126.9879527614585,37.58555939918305],[126.987949823623,37.58572389307797],[126.9878493433443,37.58596714883188],[126.9877881673149,37.58619969327312],[126.987843447439,37.58641748000115],[126.9878725207478,37.58666538265587],[126.9878171863603,37.58677890109953],[126.9877443607862,37.58703142684777],[126.9877006756506,37.58711946142903],[126.9877152287434,37.5871426311351],[126.9876715377767,37.58726541798847],[126.9876947922489,37.58748783503531],[126.9878315659325,37.58786780750477],[126.9877325407562,37.58809484548971],[126.9878256682106,37.58832769540427],[126.987693187023,37.58839602781374],[126.9874005465421,37.5886438965203],[126.987237498417,37.58868789855423],[126.9870307852909,37.58869250965962],[126.9868808316264,37.58877474014241],[126.9868167508338,37.58893922710753],[126.9866420484575,37.58902492974421],[126.9863887806246,37.58886735716344],[126.9862374279802,37.58863565777165],[126.9861995805551,37.58862870289734],[126.9861122425555,37.58860089083214],[126.9860685791937,37.58855686613559],[126.9859172238054,37.58834833450661],[126.9859988123552,37.5879822868663],[126.9859114760589,37.58794984101232],[126.985649425814,37.58807028401684],[126.9855096831837,37.58804246512042],[126.9850904004618,37.58823702567143],[126.9848575447756,37.58794971051369],[126.9845314780967,37.58789406458406],[126.9842437712262,37.58762398153936],[126.9840715681014,37.58745844147715],[126.9840482571788,37.58755111108525],[126.9839492517766,37.58763450314327],[126.9838036687203,37.58769472054694],[126.983634806365,37.58769933089367],[126.983366976916,37.58761125434098],[126.983314559319,37.58766685059536],[126.9833145396667,37.58775488970769],[126.9834891799418,37.58795416067871],[126.9838676355695,37.58808395485671],[126.9838734434092,37.58815346021012],[126.9837569354329,37.58838889092518],[126.9836200515387,37.58860201931221],[126.9835938475817,37.58860664930991],[126.9834249810984,37.58862052662882],[126.9833201543198,37.58868769959721],[126.983273584742,37.58862745572765],[126.9831338505813,37.58856140651748],[126.982598138235,37.58859608103157],[126.9825661164752,37.58857870016779],[126.9823621972616,37.58908141946045],[126.9818308604082,37.58906512114051],[126.9818075242135,37.58924814618744],[126.981771127537,37.58926204148139],[126.9818948240463,37.589430029837],[126.9814986651269,37.59023390424493],[126.9811114474575,37.59018634815006],[126.9809119792741,37.59030563217901],[126.9806965013447,37.590408695527],[126.9798827946998,37.59018614514027],[126.979722616662,37.59035408702223],[126.9793936190451,37.59034476277365],[126.9793033989405,37.59021268837438],[126.9793412817456,37.59009222048287],[126.9793325905016,37.58993583375324],[126.9792743741999,37.58988717036877],[126.9794519985197,37.58980147915913],[126.9795043957096,37.58983624053862],[126.9797722937835,37.58968337676426],[126.9796981122474,37.58945805347073],[126.9796355282447,37.58941170632728],[126.979626825728,37.58929470550846],[126.9796712526597,37.58919508998554],[126.9797084091646,37.5890647753525],[126.9796778802963,37.5889124392969],[126.9797594134382,37.58886611693931],[126.9797317628495,37.58883599355595],[126.9797303423099,37.58870625148221],[126.9797492873952,37.58862979972583],[126.9797813266959,37.58857999362144],[126.9798774119083,37.58855104981001],[126.9798949163552,37.58841783572893],[126.9799153147339,37.58834949305459],[126.9800565369123,37.58828232926137],[126.9800609145566,37.5882429440849],[126.9801788517922,37.5881502912035],[126.9800493186415,37.58805643822539],[126.979969259035,37.58804020693583],[126.9799125002798,37.58798864807453],[126.9798826830739,37.58789654945253],[126.9797291072841,37.58789246874568],[126.9796883843726,37.58775692784766],[126.9797939226395,37.58775752516592],[126.9798790723432,37.58779055437907],[126.9798936231417,37.58781372504624],[126.9800497816612,37.5876851680998],[126.9799930177713,37.5876535918357],[126.9799770080926,37.58764229462923],[126.9798209222462,37.58750152130302],[126.9798085520256,37.58748964549081],[126.9795907031483,37.58697035096747],[126.9798353887295,37.58648791542392],[126.9799067614633,37.5863222750135],[126.9798805842659,37.58622959777971],[126.9797751168723,37.58597501922009],[126.9798228493194,37.5857552191357],[126.9798254551926,37.58553859694673],[126.9798298234986,37.58553367445145],[126.9800809761642,37.58534055225746],[126.9798295562448,37.58517543615442],[126.9797778715069,37.58520902119841],[126.979784073812,37.58515066736202],[126.9797586001828,37.58514964938792],[126.9797167516131,37.58514442935979],[126.9795695619128,37.58509661956707],[126.9795761274528,37.58504130662944],[126.9793253995943,37.58501317154036],[126.9793750383564,37.58448147004063],[126.9794914511324,37.58395788896312],[126.9794841791894,37.58393529870168],[126.9793408315262,37.5838205910951],[126.9792877079267,37.58379625517212],[126.979233854136,37.583780607173],[126.9792469743766,37.58370994645927],[126.979245521165,37.58370125812734],[126.9792644812191,37.58356804428593],[126.9792688590035,37.58352865910732],[126.9792972469628,37.58351650078217],[126.9792616077355,37.583431930579],[126.9792310375012,37.58344003407598],[126.9792237628703,37.58342757988569],[126.9793657100131,37.58333927600214],[126.9800026783576,37.58283026429524],[126.9803324297515,37.58261543457036],[126.9803932150456,37.582562447406],[126.9804150570302,37.58253204275835],[126.9804467420213,37.58243387272685],[126.9804489390515,37.5823817446206],[126.9804424040134,37.58232382301512],[126.9804358626197,37.58229022802759],[126.9804234970306,37.58226358253661],[126.9803180888792,37.58179817358138],[126.9794832797371,37.57925647810814],[126.9794193301753,37.57891473570187],[126.9793497129849,37.57801579643617],[126.9794317334316,37.57615540189763],[126.9794608439165,37.57615193173102],[126.9795584339872,37.57588435556659],[126.9794842364168,37.5757696599329],[126.9795366542228,37.57569321385471],[126.9795846893948,37.57567584599499],[126.9796298117175,37.57566542808373],[126.9796563775352,37.57565240053234],[126.9796876653501,37.57566978209662],[126.9797458779931,37.57569209152516],[126.9798455696338,37.57572135848439],[126.9798986911825,37.57573266205638],[126.9799710985583,37.57574078324582],[126.9799714634338,37.5757370184695],[126.9800049390517,37.57573760335013],[126.9800154905783,37.57573992196036],[126.9800147619154,37.57574339707228],[126.9801472104719,37.57573994418544],[126.9802418173742,37.57573445760188],[126.9809513819419,37.57564132208199],[126.9816864186389,37.57553486451407],[126.9818465284471,37.57549897847782],[126.9823399535062,37.57540232593694],[126.9826310441346,37.57540989880116],[126.983032745086,37.57543891751605],[126.9834446286933,37.5754945797641],[126.9840471446973,37.57571012731638],[126.9841199141558,37.57572867171602],[126.9841228231247,37.57573793940144],[126.9843789642742,37.57583991380773],[126.9867613694108,37.57696965636705],[126.9872503868185,37.57713420462967],[126.9875123681,37.57718172750477],[126.9878675034328,37.57721767529399],[126.987953377211,37.57722115932289],[126.9883580058281,37.57721888309786],[126.9893346413669,37.57724098519186],[126.9893375356792,37.57735798501129],[126.9898062006767,37.57740204604704],[126.989696257447,37.5777860498836],[126.9896838857861,37.57778489039173],[126.9893329402195,37.57896296344645],[126.989332079159,37.57989722187725],[126.989327708129,37.57992791937236],[126.9893189714365,37.57995166600656],[126.9892934991372,37.57995282210997],[126.9892869445955,37.57998467781616],[126.989321877657,37.57998583939222],[126.9893603172275,37.58091720518255],[126.989502962529,37.58092069318559],[126.989511666207,37.58113268312321],[126.9895007197178,37.58134409210109],[126.9894868913235,37.58134698689701],[126.9894716009884,37.58139505957683],[126.9894534009453,37.58143270629847],[126.9894468214064,37.58164121962414],[126.9894759327478,37.58164353904433],[126.9894861047268,37.58176517306363],[126.9895675970025,37.58191229843651],[126.9896549127663,37.58205363220732],[126.9897087521081,37.58218106207034],[126.9897407570521,37.58231312365236],[126.989665033849,37.58254595754862],[126.9895587549965,37.58268901188257],[126.9894866951976,37.58274171315988],[126.9893949744305,37.58286623407139],[126.9893753169832,37.58291372712868],[126.9893883910663,37.58309965316469],[126.9893803629872,37.58325603783439],[126.9893665258315,37.5833180115391],[126.9893708653394,37.58351030803346],[126.9893737765789,37.58351030829557],[126.9893286278937,37.58368174893613],[126.9892019629166,37.5838601325868],[126.9891335363442,37.58394353183952],[126.9890796645636,37.5840361996799],[126.9890272642639,37.5840199770786],[126.9889981612169,37.58395510340134],[126.9888904550423,37.58388558870395],[126.9888613397393,37.58390412052282],[126.9888526018291,37.58393192154188],[126.9888365885376,37.58394118730985],[126.9887856446801,37.58392033109811],[126.9888133088877,37.58387168049607],[126.9887710997124,37.58384503305438],[126.9887594590566,37.58381607169198],[126.9887419920713,37.58381259479685],[126.9887317993743,37.58383460361775],[126.9881936016654,37.58368100395479]]]},properties:{CATEGORY:"",AREA_CD:"POI066",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.96566004071238,37.57955609758424],[126.96565930090783,37.579456284911416],[126.96567371434114,37.57938069244165],[126.96573695487416,37.57944486214409],[126.96577297570227,37.57935667427791],[126.96609874480573,37.57944029303668],[126.96619951128642,37.57944039412312],[126.96621678189592,37.57935806927248],[126.96635186000101,37.579380955266615],[126.96646093665107,37.579426311251865],[126.96646086650573,37.57958268962546],[126.9669411739471,37.579582825112375],[126.96739960378015,37.5796872048655],[126.967454252316,37.57953084155375],[126.96746527801413,37.57927890162076],[126.96746538764022,37.57902695866793],[126.96762914264234,37.57899225292923],[126.96776014578552,37.57896622571222],[126.96783654649263,37.57899230962131],[126.96790201633931,37.579053141266165],[126.96793475689108,37.57907052554249],[126.96793473081145,37.57913133935953],[126.96817483871232,37.579235656604716],[126.96826222224831,37.579105364794835],[126.96834959812479,37.57899244829395],[126.96829507710414,37.5788534306325],[126.96824053045547,37.57877522676354],[126.96821873915329,37.578679656311934],[126.96818603197413,37.57858408291343],[126.96816424079712,37.57848851244869],[126.96816427778619,37.57840163555737],[126.96816431107622,37.578323446354055],[126.9681752380636,37.5782973862294],[126.96819709201544,37.57824526597669],[126.9684809232874,37.57820190364926],[126.96844162925838,37.57802585776993],[126.96817468737127,37.578051736388346],[126.96815672797823,37.577927518937905],[126.96770835540484,37.57793592950099],[126.96768264081939,37.57790649252605],[126.96767718157209,37.57788352520785],[126.9676138645075,37.577888215717074],[126.96760493583194,37.57802068204517],[126.96727227889309,37.578050280716305],[126.96729799347855,37.578179350193906],[126.96718707381827,37.57822188808048],[126.96697441827821,37.57822399071303],[126.96697298969012,37.57816236738068],[126.96689196833749,37.578164146532735],[126.96669278234224,37.57821687411033],[126.96662747545854,37.57811400677707],[126.96646828992954,37.57805319206038],[126.96629971653593,37.57802084378658],[126.96618991933774,37.57797167438349],[126.96600297838316,37.5778442219638],[126.96595481455641,37.57783257655418],[126.96598828433429,37.577722592040054],[126.96667645562128,37.577690890591114],[126.96682911046196,37.577626840683706],[126.96720789038739,37.57762101796212],[126.96723482947692,37.57760419676387],[126.96759605817738,37.5775702308712],[126.96758612644116,37.5774979583744],[126.96758619422799,37.577341579943656],[126.96758624318481,37.577228639963316],[126.96766272846746,37.577054907098926],[126.96776101854347,37.57694199398331],[126.96792479492763,37.57684647398008],[126.9680776774809,37.57669882464668],[126.96829603851195,37.57658594348643],[126.96845980976879,37.57649911042653],[126.96885283390338,37.57635152399617],[126.96903842799465,37.57628207127249],[126.96925677207255,37.576203939096125],[126.96947511214809,37.57613449420735],[126.96968248342014,37.57619536150106],[126.97022825570576,37.576212875791136],[126.97109061392385,37.57614358857627],[126.97423284107558,37.57590557613577],[126.97380333079882,37.57952030328689],[126.97360285284414,37.583557526965045],[126.97323829604322,37.58365025749742],[126.97022523559158,37.58379722654249],[126.96906799774486,37.58396199493],[126.9686203831398,37.58403137824266],[126.96831468898208,37.584092110355506],[126.96808543009186,37.58410942395763],[126.96792164917952,37.584178881016754],[126.96767054140065,37.58423093859963],[126.96750677494133,37.584265644359526],[126.96722291627383,37.584317691969396],[126.96708097148971,37.58437846623938],[126.96702637610149,37.58440451404534],[126.96696097907501,37.58416992835914],[126.96680816003192,37.58413513476049],[126.96670989387093,37.58416985781505],[126.96662253661407,37.58422195923587],[126.96644790361715,37.584143720592714],[126.96621870695117,37.58402202767863],[126.96579298642679,37.58395240362256],[126.96550912775885,37.58400444711402],[126.96545454012588,37.58401311883318],[126.96515981284549,37.583960906120566],[126.9650288325581,37.5839174289791],[126.9649742612145,37.58389134975314],[126.96505086092837,37.583500426753126],[126.96505086498976,37.58349173907172],[126.96497448101044,37.58342221497045],[126.9649635969439,37.583352710278284],[126.96499637530313,37.583291906222726],[126.96501827764956,37.58314422210419],[126.96497465195932,37.583057332335855],[126.9648000152275,37.58299646660582],[126.96467994930458,37.582961680008026],[126.96449436759222,37.582961624333514],[126.96443982605881,37.582874731081105],[126.96443986324942,37.582796541940226],[126.96438530948382,37.58273571170775],[126.9642870979894,37.58265749288164],[126.96407971319803,37.58259661616997],[126.96402513478873,37.582587911865346],[126.96397055639216,37.582579207535495],[126.96398152313363,37.58247495867414],[126.9639924898444,37.582370709809915],[126.96399254005472,37.58226645761341],[126.96397075316908,37.58217088643649],[126.96407998451095,37.582031916771236],[126.96388347608179,37.582057919865505],[126.96379618243037,37.58197970396216],[126.96410192166762,37.58181473132192],[126.96416756165836,37.58151936996562],[126.96420041057812,37.58131087547658],[126.9642004729762,37.5811805602069],[126.96418966485368,37.58095467708821],[126.96417880268582,37.580841733869086],[126.9641351793128,37.5807548437577],[126.96410246393512,37.580685332320044],[126.96397150674603,37.580607103242265],[126.96387327749021,37.580572322473486],[126.96391700527013,37.58044202054303],[126.9640698780412,37.58034650261393],[126.96409838985628,37.580192048956036],[126.96388614248428,37.580083361822616],[126.96385022369826,37.57979611649194],[126.96395471471216,37.57968225317128],[126.96444941435604,37.57957680005421],[126.96460370186877,37.57946875897568],[126.96490492986977,37.579480404129406],[126.9648820724605,37.57969260438944],[126.9649163585744,37.57961561716988],[126.9650632990627,37.579579387862545],[126.96529350582769,37.57962596839731],[126.96566004071238,37.57955609758424]]]},properties:{CATEGORY:"",AREA_CD:"POI067",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.04966626659281,37.54442385479431],[127.04952716676011,37.544032608523885],[127.05156771441736,37.542897970076034],[127.05103789406355,37.542025301413204],[127.05362101618168,37.54206429000316],[127.05450228893248,37.54102042111258],[127.05505569818297,37.53965563239967],[127.05729932199546,37.540718097372306],[127.0574255244121,37.54097890245414],[127.0618474804847,37.53961589583887],[127.06222550369584,37.53918618431581],[127.06298909789017,37.54049077009335],[127.0639259426638,37.54219533299058],[127.0642346518065,37.54275702065274],[127.05063031025925,37.5468911777073],[127.05001817618083,37.54532451377897],[127.04966626659281,37.54442385479431]]]},properties:{CATEGORY:"",AREA_CD:"POI068",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.02379538672297,37.644936485137116],[127.02230287951996,37.64318973699516],[127.02234158746673,37.642776940672356],[127.02270133941124,37.642944262815654],[127.02323878793611,37.642552295713685],[127.02371445090036,37.64220983597727],[127.02372034149427,37.64220560004867],[127.02400282607859,37.642003214613965],[127.02409065237441,37.6419402914968],[127.02446299887579,37.64167352166492],[127.02448520065424,37.64165747992818],[127.02516985843546,37.64115996028151],[127.02517437814204,37.641156670559646],[127.02539617345742,37.64099985603844],[127.0255901023817,37.64086268818662],[127.02570994902572,37.6407779711576],[127.02590724112166,37.64063845027945],[127.02591780944651,37.64063097917424],[127.02612700587653,37.64048302236997],[127.02613201219225,37.64047948040404],[127.02664355807897,37.640113035725534],[127.02664856585616,37.640109439623906],[127.02666273507636,37.640099282537776],[127.02667232927195,37.640092396957165],[127.02695426646063,37.63988997783348],[127.02723980069985,37.63970779211915],[127.02737004420922,37.63962468425727],[127.02737366806942,37.639622149803415],[127.027515358308,37.63975411429239],[127.0276246147279,37.639855721505626],[127.02768853654324,37.6399145409402],[127.02777478674693,37.63999497812509],[127.02784052278133,37.64005695129082],[127.02796485578676,37.64017206826947],[127.02809678081361,37.64029511301606],[127.02828356219649,37.64046823713257],[127.02834963854136,37.64052957954532],[127.02838296093294,37.64056137674037],[127.02843147080547,37.640608396906856],[127.02847737333083,37.64065118298918],[127.02852282366705,37.64069306771075],[127.02860272894713,37.64076801054118],[127.02861394985526,37.64077848564919],[127.02868648582584,37.6408461954724],[127.02881138872881,37.64096248375319],[127.0288326475235,37.640982147532],[127.02889231187703,37.64103733489973],[127.02900418291695,37.6411431749417],[127.02908782732437,37.641221178864754],[127.02911276087785,37.641240320056035],[127.02914777842516,37.64127302333446],[127.02939396125373,37.64150293261733],[127.02962653701091,37.64172133656901],[127.02987691784516,37.64195646049653],[127.0299804407748,37.64205337915261],[127.03031102629461,37.642362875548855],[127.0304106066986,37.64245568603591],[127.03060946626798,37.64264102437049],[127.03063882330967,37.64266831647676],[127.03083809596865,37.64285357674361],[127.03085453534739,37.64286886029512],[127.03085258703123,37.642870094608995],[127.03072236881862,37.642952497004494],[127.03010867175064,37.643340849655274],[127.02975485910126,37.64356474078177],[127.0294860061336,37.64373486786519],[127.02916216977552,37.64393978731809],[127.0291137701737,37.643970413555856],[127.02889824710233,37.644110460916366],[127.02881403219618,37.64416518362538],[127.02874561097892,37.6442088974003],[127.02864490517601,37.64427261977679],[127.02858124071707,37.644312997650225],[127.02857177385968,37.64431903843885],[127.02848801094133,37.64437248283527],[127.0284184563619,37.64441718693987],[127.02830132142957,37.64449118531648],[127.02827388953517,37.64450865617437],[127.0281616455067,37.64458014208623],[127.02803522282295,37.64466044844565],[127.02797689909187,37.64469774588069],[127.02793882048815,37.644722096340445],[127.02784592924804,37.64478023038141],[127.02776549738451,37.64483124317986],[127.027694712078,37.644876297035786],[127.02767147280619,37.64489108868246],[127.02761052786056,37.64492930468148],[127.02755490548527,37.644964724392935],[127.0273621569714,37.64505669717055],[127.02731914981759,37.64507721867016],[127.02708923358787,37.645182003291175],[127.02708623237775,37.645183371198236],[127.02695186103803,37.64524461008305],[127.02667736310495,37.64536773848609],[127.02662229656546,37.645392439523434],[127.02630077564855,37.64553828671238],[127.02615872653442,37.64560150655032],[127.02594551832314,37.64569639716132],[127.0257997661733,37.64555853606308],[127.02572586611343,37.64548863596762],[127.02558428708275,37.645310000488664],[127.02545869481646,37.64516650013687],[127.02544686895335,37.6451701625062],[127.02488287837738,37.64548231216202],[127.02462935977121,37.64522884151167],[127.02468655884327,37.64514432160455],[127.02401605803296,37.6447479226717],[127.02379538672297,37.644936485137116]]]},properties:{CATEGORY:"",AREA_CD:"POI069",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.030853,37.64287],[127.031073,37.643074],[127.031252,37.643239],[127.031334,37.643317],[127.03137,37.643353],[127.031391,37.643374],[127.031407,37.64339],[127.031591,37.643591],[127.031666,37.643683],[127.031729,37.643755],[127.031732,37.643758],[127.031797,37.643842],[127.031829,37.643884],[127.031946,37.644047],[127.031946,37.644048],[127.032034,37.644164],[127.032219,37.644467],[127.032224,37.644475],[127.032247,37.644513],[127.032287,37.64458],[127.032298,37.644599],[127.032356,37.644698],[127.032434,37.644828],[127.032467,37.644884],[127.032547,37.645018],[127.032642,37.645178],[127.032656,37.645202],[127.032712,37.645296],[127.032759,37.645375],[127.032816,37.64547],[127.032875,37.645569],[127.032939,37.645677],[127.033005,37.645787],[127.033049,37.64586],[127.033109,37.645966],[127.033225,37.646158],[127.033352,37.646373],[127.033437,37.646515],[127.033445,37.646529],[127.03345,37.646536],[127.033519,37.646651],[127.03373,37.647005],[127.033983,37.647428],[127.034103,37.647627],[127.034187,37.647768],[127.034193,37.647777],[127.034204,37.647797],[127.034291,37.647946],[127.034414,37.648155],[127.034517,37.648327],[127.034563,37.648404],[127.03463,37.648514],[127.034781,37.648771],[127.035055,37.649233],[127.035082,37.649277],[127.035256,37.649569],[127.035286,37.64962],[127.03556,37.65008],[127.035752,37.650403],[127.035998,37.650818],[127.036011,37.65084],[127.036073,37.650943],[127.036312,37.651345],[127.036328,37.651371],[127.036329,37.651373],[127.036291,37.65137],[127.035217,37.65129],[127.035215,37.651289],[127.035214,37.651289],[127.03504,37.651276],[127.035037,37.651276],[127.035029,37.651275],[127.034022,37.6512],[127.03402,37.6512],[127.033977,37.651196],[127.033964,37.651195],[127.033742,37.651179],[127.033727,37.651178],[127.033273,37.651144],[127.033274,37.651137],[127.033282,37.65103],[127.033303,37.650873],[127.033309,37.650827],[127.033318,37.650758],[127.033327,37.650683],[127.033331,37.650656],[127.033336,37.650613],[127.033596,37.650634],[127.033616,37.650474],[127.033522,37.650467],[127.033374,37.650456],[127.03338,37.650391],[127.033382,37.650379],[127.033389,37.650307],[127.03339,37.650299],[127.033395,37.65025],[127.033398,37.650222],[127.033401,37.650186],[127.033406,37.650144],[127.033411,37.650094],[127.033419,37.650019],[127.033439,37.64982],[127.033469,37.649817],[127.033488,37.649815],[127.033511,37.649811],[127.033585,37.649791],[127.033644,37.649772],[127.033677,37.649759],[127.033764,37.649726],[127.033776,37.649721],[127.033871,37.649684],[127.033933,37.649661],[127.033981,37.649642],[127.034125,37.649587],[127.034184,37.649562],[127.034079,37.649382],[127.034021,37.649283],[127.033963,37.649185],[127.033907,37.649088],[127.03385,37.64899],[127.033796,37.648897],[127.033732,37.648788],[127.033693,37.648721],[127.033685,37.648707],[127.033672,37.648685],[127.033626,37.648676],[127.033434,37.648751],[127.033426,37.648754],[127.033363,37.648778],[127.033324,37.648793],[127.033297,37.648803],[127.033204,37.64884],[127.03314,37.648864],[127.033069,37.648892],[127.033051,37.648899],[127.033002,37.648917],[127.032906,37.648952],[127.032802,37.64899],[127.032767,37.649005],[127.032659,37.649048],[127.032639,37.649056],[127.032571,37.649054],[127.032524,37.649053],[127.0325,37.64905],[127.032481,37.649048],[127.032418,37.649042],[127.03237,37.649039],[127.032364,37.649039],[127.032356,37.649038],[127.032323,37.649037],[127.032326,37.648976],[127.032329,37.648953],[127.032341,37.648848],[127.032342,37.648837],[127.03235,37.648787],[127.032354,37.648754],[127.032363,37.648695],[127.032369,37.648656],[127.032372,37.648633],[127.032377,37.648601],[127.03239,37.648508],[127.03239,37.648506],[127.032393,37.648485],[127.03235,37.648483],[127.032307,37.648481],[127.032211,37.648476],[127.032195,37.648475],[127.0321,37.648466],[127.032032,37.64846],[127.031982,37.648457],[127.031954,37.648456],[127.031911,37.648453],[127.031903,37.648505],[127.031892,37.648584],[127.031883,37.648653],[127.031881,37.648665],[127.031881,37.648673],[127.031877,37.648724],[127.031876,37.648739],[127.031869,37.648812],[127.031866,37.648845],[127.031864,37.64886],[127.031859,37.648916],[127.031856,37.648946],[127.031854,37.648961],[127.031847,37.64902],[127.031844,37.64904],[127.03184,37.649075],[127.031714,37.649069],[127.031587,37.64906],[127.031592,37.649041],[127.031593,37.649038],[127.031623,37.648929],[127.0315,37.648904],[127.031416,37.648889],[127.031329,37.648874],[127.031246,37.648858],[127.031225,37.648854],[127.031178,37.648845],[127.030995,37.648808],[127.031008,37.648763],[127.03102,37.648723],[127.031024,37.648706],[127.03105,37.648625],[127.031059,37.648597],[127.031074,37.648547],[127.031076,37.64854],[127.031087,37.648506],[127.031099,37.64847],[127.031128,37.648381],[127.031129,37.648378],[127.03113,37.648348],[127.031197,37.648363],[127.031231,37.648366],[127.031301,37.648373],[127.031323,37.648375],[127.031383,37.648381],[127.031408,37.648383],[127.031431,37.648238],[127.031435,37.648214],[127.031437,37.6482],[127.031453,37.648099],[127.031457,37.648075],[127.03147,37.647997],[127.031471,37.647989],[127.031474,37.647972],[127.031481,37.647936],[127.031602,37.64794],[127.031632,37.647939],[127.031732,37.647931],[127.031744,37.647929],[127.031743,37.647923],[127.031733,37.647874],[127.031729,37.647856],[127.031723,37.647822],[127.031722,37.647816],[127.031712,37.647755],[127.031702,37.647702],[127.03169,37.647635],[127.031682,37.64759],[127.03168,37.647578],[127.031674,37.647551],[127.03165,37.647449],[127.031643,37.647416],[127.031635,37.647382],[127.031622,37.647311],[127.031609,37.647236],[127.031603,37.647201],[127.031579,37.64707],[127.031574,37.647016],[127.031574,37.647015],[127.03157,37.646978],[127.031531,37.646978],[127.031467,37.64698],[127.031347,37.646983],[127.03134,37.646983],[127.031236,37.646986],[127.031233,37.646986],[127.03123,37.646986],[127.031255,37.646941],[127.031257,37.646938],[127.031297,37.646866],[127.031357,37.64673],[127.031391,37.646651],[127.031395,37.646643],[127.031419,37.646592],[127.031429,37.646569],[127.031483,37.646451],[127.03149,37.646436],[127.031511,37.64639],[127.03154,37.646328],[127.031598,37.646208],[127.03162,37.646162],[127.031656,37.646087],[127.031659,37.646082],[127.031662,37.646075],[127.031646,37.645999],[127.03155,37.645563],[127.031541,37.645522],[127.031676,37.645471],[127.031736,37.645448],[127.031676,37.645345],[127.031436,37.644929],[127.031321,37.64473],[127.031312,37.644714],[127.031261,37.644626],[127.031258,37.644622],[127.031218,37.644551],[127.031187,37.644498],[127.031161,37.644457],[127.031153,37.644443],[127.031115,37.644382],[127.03111,37.644375],[127.031074,37.644318],[127.031054,37.644283],[127.031004,37.6442],[127.03099,37.644176],[127.030939,37.64412],[127.030929,37.644112],[127.03088,37.644072],[127.030876,37.644068],[127.030838,37.644032],[127.03083,37.644025],[127.030749,37.643947],[127.030686,37.643888],[127.030613,37.643818],[127.03058,37.643786],[127.03054,37.643748],[127.030491,37.643702],[127.030453,37.643666],[127.030376,37.643599],[127.030121,37.643377],[127.030093,37.64335],[127.030109,37.643341],[127.030722,37.642952],[127.030853,37.64287]]]},properties:{CATEGORY:"",AREA_CD:"POI070",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.033599,37.527899],[127.033586,37.527803],[127.033553,37.527562],[127.033505,37.527206],[127.033423,37.526609],[127.033392,37.526378],[127.033324,37.52588],[127.033284,37.525587],[127.033114,37.524377],[127.0331,37.524026],[127.033104,37.52397],[127.033118,37.523776],[127.033127,37.523666],[127.033158,37.523433],[127.033175,37.523316],[127.033193,37.5232],[127.033235,37.52302],[127.033237,37.52301],[127.033305,37.52275],[127.03344,37.522396],[127.033449,37.522374],[127.033703,37.52182],[127.033837,37.521523],[127.033849,37.521527],[127.034523,37.521741],[127.034725,37.521805],[127.035936,37.522189],[127.036967,37.522517],[127.036988,37.522523],[127.037377,37.522647],[127.037533,37.522696],[127.038188,37.522904],[127.038224,37.522916],[127.038426,37.52298],[127.039056,37.52318],[127.039058,37.523181],[127.039259,37.5232],[127.039452,37.523219],[127.039776,37.523261],[127.039959,37.523291],[127.04008,37.523302],[127.040303,37.523331],[127.040525,37.52336],[127.040526,37.52336],[127.041365,37.523471],[127.042013,37.523556],[127.042336,37.523598],[127.042414,37.523609],[127.042615,37.523635],[127.042816,37.523662],[127.042894,37.523672],[127.042984,37.523681],[127.042995,37.523681],[127.043018,37.523684],[127.043332,37.523714],[127.04349,37.523729],[127.043501,37.52373],[127.043522,37.523733],[127.04465,37.523864],[127.044973,37.523907],[127.045308,37.52395],[127.045586,37.523984],[127.045643,37.523994],[127.045737,37.524006],[127.045978,37.524038],[127.046228,37.52407],[127.046254,37.524073],[127.046313,37.52408],[127.046437,37.524093],[127.046627,37.524119],[127.046884,37.524151],[127.046947,37.524158],[127.047141,37.524183],[127.047341,37.524208],[127.047342,37.524209],[127.047253,37.524372],[127.047234,37.524405],[127.047167,37.524531],[127.047141,37.524579],[127.047123,37.524612],[127.04703,37.524786],[127.047013,37.524819],[127.046951,37.524938],[127.046935,37.52497],[127.046921,37.524995],[127.046901,37.525026],[127.04688,37.525064],[127.046804,37.525209],[127.04679,37.525234],[127.046692,37.525426],[127.046683,37.525442],[127.046668,37.525471],[127.046659,37.525488],[127.04662,37.525558],[127.046593,37.525612],[127.046547,37.52569],[127.046526,37.525725],[127.046456,37.525837],[127.046384,37.525934],[127.046356,37.525965],[127.046288,37.526039],[127.046219,37.526109],[127.0462,37.526127],[127.046104,37.526208],[127.046024,37.526269],[127.04599,37.526294],[127.045893,37.526358],[127.045812,37.526412],[127.045695,37.526478],[127.045666,37.526492],[127.045587,37.526521],[127.045433,37.526581],[127.045413,37.526588],[127.045381,37.526601],[127.045347,37.526614],[127.04518,37.52666],[127.044707,37.526783],[127.044551,37.526824],[127.043819,37.527011],[127.043777,37.527024],[127.043761,37.527029],[127.043659,37.527055],[127.042336,37.527392],[127.040694,37.527811],[127.040276,37.527917],[127.039833,37.52803],[127.039125,37.528211],[127.03837,37.528403],[127.038242,37.528436],[127.038054,37.528484],[127.037979,37.528503],[127.037903,37.528523],[127.037705,37.528575],[127.037436,37.528645],[127.037168,37.52871],[127.036921,37.528773],[127.036898,37.528779],[127.036851,37.528791],[127.036625,37.528848],[127.036367,37.528914],[127.036316,37.528926],[127.036212,37.52895],[127.036087,37.528979],[127.036031,37.528992],[127.035803,37.529036],[127.03574,37.529047],[127.035694,37.529054],[127.035518,37.529084],[127.035418,37.529096],[127.035283,37.529113],[127.035172,37.529127],[127.035092,37.529133],[127.034824,37.529155],[127.034474,37.52917],[127.03432,37.52917],[127.034124,37.52917],[127.034112,37.529169],[127.033938,37.529162],[127.03378,37.529156],[127.033774,37.529156],[127.03377,37.52913],[127.033716,37.528753],[127.033674,37.528451],[127.033664,37.528377],[127.033599,37.527899]]]},properties:{CATEGORY:"",AREA_CD:"POI071",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.91365038328485,37.535467583902474],[126.91317731101152,37.53574331528706],[126.91245224559985,37.53589336811672],[126.91147504085552,37.53604322775039],[126.91059298284279,37.535691190967185],[126.91027811448028,37.53543997195125],[126.9098064808737,37.534510985803706],[126.91005972734118,37.533582551915046],[126.91002911582092,37.53282958765489],[126.91006123428987,37.532327651437456],[126.91040850510643,37.53182595466953],[126.91066116619068,37.53137438138199],[126.91085160095487,37.530245113407716],[126.9112003147031,37.528513610814024],[126.91180105841606,37.52683249127462],[126.91259032283648,37.525603273034335],[126.9143582166219,37.522818682399944],[126.9165985219648,37.52013479080185],[126.91722936693597,37.51955797851507],[126.91785998210078,37.519181947381284],[126.9183959795179,37.518881141801856],[126.91877431524406,37.518680617834235],[126.9192157224049,37.518429939610485],[126.91940488828641,37.51832967645612],[126.91972017259393,37.51815420449423],[126.91997232928945,37.518079081320536],[126.92047666780034,37.517903735273165],[126.92167436722411,37.517578260298144],[126.92321909416536,37.51682633151095],[126.9255830403504,37.51604980328372],[126.9287343594859,37.51557488263053],[126.93125503619626,37.51557637659484],[126.9336177483883,37.5160545921684],[126.93746126087889,37.51670924052471],[126.93979237809816,37.51738810061732],[126.94269063208111,37.518167583582134],[126.94413941687978,37.5190467111088],[126.94429664934437,37.51947345299533],[126.94410730789458,37.51984983495817],[126.94379177223425,37.52042694133479],[126.94357091516869,37.520803307372795],[126.94268798304297,37.521631119117544],[126.93969249757833,37.524039043269184],[126.93748500149091,37.52602064301307],[126.93474134980167,37.52835327853852],[126.93319609750989,37.529557121132605],[126.93168251642045,37.53053507915619],[126.93016910641084,37.53128713532329],[126.92862429415044,37.53188856477484],[126.92660645300812,37.53276575932534],[126.92317011050055,37.533867887212025],[126.92061679715978,37.53434306105334],[126.9156677138061,37.53524315952133],[126.91365038328485,37.535467583902474]]]},properties:{CATEGORY:"",AREA_CD:"POI072",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.9229582831332,37.56417076087729],[126.92183933659832,37.5635724725812],[126.92179631578081,37.563550585554374],[126.92164157453081,37.56347186069296],[126.9216009296102,37.56345118273403],[126.92125562215273,37.56327550776474],[126.92115095300183,37.56320889854431],[126.9211524310499,37.56320712418],[126.92043489168749,37.5627792669121],[126.92044033580268,37.56277379252144],[126.9193068921824,37.562131348721394],[126.9162890925129,37.56031164809451],[126.91884699878852,37.55757208275649],[126.92174688269421,37.55956373087729],[126.92327437612308,37.56058796001305],[126.92376867229937,37.55998449978763],[126.92380763391277,37.56005170495781],[126.9238508518149,37.560082803598974],[126.92386555244791,37.56014915334881],[126.92390458682681,37.56014497976205],[126.92394874531696,37.56028860550382],[126.92396535783897,37.56054977851634],[126.92399799067618,37.560616979541585],[126.9240474367916,37.560748012386476],[126.92414223347282,37.56088831160577],[126.92450837874168,37.56078693651874],[126.92462127509485,37.56076265589599],[126.92466567967672,37.56066359371802],[126.92474166700235,37.56062753292095],[126.92475168408805,37.56063173805651],[126.92477966401461,37.56060614350538],[126.92480261702461,37.56059671093696],[126.92487199607883,37.56057576134987],[126.92488623687571,37.560575770410665],[126.92490789128698,37.560546392928586],[126.92496199355367,37.56050653919181],[126.92497306445597,37.56051179466617],[126.92505488587179,37.5604431970533],[126.9251348100691,37.560425613005194],[126.92513691582155,37.5604296031539],[126.92521869209523,37.56040593203426],[126.92525086944985,37.56040217353441],[126.92528937372349,37.5604007283426],[126.92538933053304,37.560393023861586],[126.92547596486884,37.5603900344825],[126.9255285876464,37.56037894099595],[126.92558973133583,37.56041802793171],[126.92585033271456,37.560901887987036],[126.92601262788345,37.561059862827086],[126.92649330202939,37.56141789660922],[126.92694032923136,37.56166841959451],[126.92698037404672,37.56171043186947],[126.92708581229655,37.56176256153423],[126.92718494259412,37.56179285371371],[126.92740127653597,37.56212743769685],[126.92814116430915,37.56311054877682],[126.92667143294177,37.56441952358956],[126.92532708390351,37.565272588936395],[126.9242206886459,37.56480184028141],[126.92298374154933,37.56418348783681],[126.9229582831332,37.56417076087729]]]},properties:{CATEGORY:"",AREA_CD:"POI073",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.90346647160544,37.51414463103957],[126.90394396950829,37.51352796199814],[126.90467171543838,37.513416700853476],[126.90639407043533,37.514150192121754],[126.9093155275829,37.515596362033776],[126.9100939566006,37.51581049023804],[126.90999128410323,37.516267982993426],[126.91006787677527,37.51626804133553],[126.90940228707447,37.5173541279329],[126.909851,37.517506],[126.910448,37.517716],[126.91074,37.517824],[126.911138,37.517966],[126.911225,37.517997],[126.911228,37.517998],[126.911351,37.518042],[126.911526,37.518104],[126.91153,37.518106],[126.91217,37.518334],[126.912336,37.518394],[126.912427,37.518426],[126.912337,37.518429],[126.912206,37.518433],[126.911891,37.518488],[126.911335,37.518607],[126.910646,37.518753],[126.909496,37.518998],[126.908387,37.519234],[126.907938,37.51933],[126.907799,37.51936],[126.907753,37.519367],[126.907655,37.519384],[126.907037,37.519518],[126.906424,37.51965],[126.906058,37.519729],[126.905846,37.519775],[126.904931,37.519965],[126.904844,37.519983],[126.904917,37.519774],[126.905264,37.519081],[126.905485,37.51864],[126.905729,37.518152],[126.90575706887353,37.518098765929516],[126.90109076405918,37.518538550898896],[126.9018165621482,37.51687840003973],[126.901829,37.516843],[126.90187,37.516725],[126.901919,37.516588],[126.901951,37.516497],[126.901976,37.516423],[126.901989,37.516385],[126.90202,37.516309],[126.902034,37.516276],[126.902053,37.516226],[126.902063,37.516201],[126.902094,37.516138],[126.9021,37.51613],[126.90216,37.516049],[126.902227,37.515957],[126.902268,37.515901],[126.902286,37.515878],[126.902333,37.515814],[126.902398,37.515727],[126.902451,37.515655],[126.902496,37.515593],[126.902528,37.515552],[126.902571,37.515497],[126.902575,37.515492],[126.902613,37.515451],[126.902641,37.51542],[126.902646,37.515415],[126.902745,37.515355],[126.902845,37.515294],[126.902861,37.515284],[126.902881,37.515272],[126.902887,37.515269],[126.902889,37.515268],[126.902901,37.515261],[126.902906,37.515258],[126.902912,37.515255],[126.902917,37.515253],[126.903013,37.515222],[126.903072,37.515197],[126.903091,37.51519],[126.903099,37.515186],[126.903209,37.515141],[126.903344,37.515085],[126.903444,37.51504],[126.903478,37.515027],[126.903558,37.514996],[126.90363,37.514968],[126.903659,37.514958],[126.903715,37.514939],[126.903825,37.51492],[126.903831,37.514919],[126.903856,37.514918],[126.903885,37.514917],[126.904038,37.514909],[126.90421,37.514909],[126.90422,37.514909],[126.90423457896603,37.514909134990425],[126.90407018764441,37.51464657166539],[126.90364043451743,37.514457245218416],[126.90374496842777,37.51430495837361],[126.90346647160544,37.51414463103957]]]},properties:{CATEGORY:"",AREA_CD:"POI074",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.06431817371185,37.59584871415005],[127.06382699631753,37.596074958228044],[127.06360363667574,37.596177840080976],[127.06327192541289,37.59570270927631],[127.06146855568223,37.59646517520053],[127.0613611190074,37.596640321203715],[127.06132843026717,37.59669361103736],[127.06122530968022,37.59688217411678],[127.06089983160702,37.59730258329468],[127.06060396087128,37.59692885416551],[127.06032028891757,37.596584165952294],[127.06031555804054,37.59657841745697],[127.05994456722391,37.596024098408755],[127.05953087045127,37.59541288793338],[127.05863919341077,37.59405054816094],[127.05834427955003,37.59365937049607],[127.05784703104305,37.592775296739624],[127.0579238574498,37.59274703612919],[127.05832611926577,37.59311373615551],[127.05864858213937,37.59348282637574],[127.05902873539809,37.593915388440486],[127.05917951394086,37.59395999923967],[127.05922815240231,37.59379416514276],[127.05943803730354,37.593828162340266],[127.05952083187245,37.59387045500922],[127.05941456711362,37.59404925375461],[127.05969717037202,37.594153731456885],[127.05974127375485,37.59416903628186],[127.0598268429369,37.593984367961596],[127.0600944026906,37.59406419699855],[127.06000441743299,37.59427003494952],[127.0600605939255,37.59429117357135],[127.06022903166038,37.5942405216654],[127.0602496025285,37.59409234080437],[127.06041363837979,37.594081673359746],[127.06041947763192,37.59399229776944],[127.06061014170031,37.59401454316582],[127.06061366281556,37.59419861831891],[127.06105407696653,37.594127212990685],[127.06145461968045,37.59390229781366],[127.06153777494684,37.59381738107645],[127.06184824121455,37.59352646879159],[127.06197601633791,37.593723989241155],[127.062418811016,37.594359123824105],[127.06266012327674,37.59421338506858],[127.0625151159446,37.59400414192566],[127.06261261436228,37.59395470012356],[127.0623551325067,37.593557363530515],[127.06290765080986,37.5933148235361],[127.0628277572807,37.59320903010215],[127.06301101192103,37.59320893241427],[127.0632166478322,37.59346106489124],[127.06335330149462,37.59340336980772],[127.06348042225713,37.59343211241422],[127.06351929980538,37.593095768249086],[127.06365806016828,37.59290989252899],[127.06389141835146,37.59274278076016],[127.06436151262112,37.592902455307815],[127.06475496208128,37.593295009226686],[127.06439764787858,37.593676214256185],[127.06452603669474,37.59435043866201],[127.06457392357414,37.59460367933371],[127.06481080064218,37.595182967184094],[127.0653110963663,37.59587007484652],[127.06465921725281,37.59618379971632],[127.06431817371185,37.59584871415005]]]},properties:{CATEGORY:"",AREA_CD:"POI075",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.9688252649816,37.53043199201579],[126.96952450719984,37.52930825019097],[126.9714286896733,37.530148941509715],[126.97237742354528,37.530010346284],[126.97349943961743,37.53117570697262],[126.9733277525037,37.53131886539559],[126.97348656151765,37.53239726958281],[126.97207855332114,37.532732485450595],[126.97136247848196,37.5331005899681],[126.9688252649816,37.53043199201579]]]},properties:{CATEGORY:"",AREA_CD:"POI076",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.99210051209266,37.53224466990928],[126.99209192818894,37.53226084459501],[126.99194363437671,37.53232364923794],[126.99180116671688,37.532153431559635],[126.99117082664732,37.53198417214886],[126.99071046148963,37.5319108107798],[126.99002958501013,37.53189121525211],[126.99002850958513,37.531890685870934],[126.98993474023422,37.531889744470085],[126.99140266494,37.52993150156265],[126.99173334235941,37.52947530358977],[126.99179970373704,37.529390888405246],[126.99179272249343,37.52960698776523],[126.99171139872966,37.529691977950755],[126.99165713419137,37.52997415661778],[126.99161173155628,37.530443669245216],[126.99210559779377,37.53165718671562],[126.99225170651637,37.53170152454895],[126.99371982240751,37.531413478718875],[126.99368506587209,37.53103114648208],[126.99371290465261,37.53093695062272],[126.99410254119522,37.530876019498756],[126.99446433975835,37.53090374211333],[126.99464522587003,37.531103227182754],[126.99486091344919,37.53113094186614],[126.99515312546463,37.53132488992194],[126.99590459290961,37.5307597343092],[126.99640556118374,37.53046053550497],[126.99657254718359,37.5304162123029],[126.99671866365516,37.530288772972945],[126.99671865876815,37.53040032969419],[126.99671865714605,37.53043735771765],[126.99667763428802,37.53145989212437],[126.99555848087509,37.533106871234395],[126.99567175266127,37.53402063063643],[126.99565756794587,37.534347777003376],[126.99554379577218,37.53452072524044],[126.99396144811273,37.53442451062316],[126.99309473065426,37.5343718007933],[126.99314264669897,37.53395240328591],[126.99342993588533,37.53366819791068],[126.99365193311858,37.5334186495174],[126.99372594086874,37.53322801694543],[126.99372657062084,37.53322225403449],[126.99377818635246,37.533033917057544],[126.99369550379451,37.53287100508473],[126.99363893344504,37.53273928953012],[126.99364694178682,37.532526123637936],[126.99339521682462,37.53252610982806],[126.9933168660975,37.53260929227897],[126.99283810092855,37.53260926421516],[126.9924768672103,37.532446334156575],[126.99210051209266,37.53224466990928]]]},properties:{CATEGORY:"",AREA_CD:"POI077",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98309540000939,37.5757448896062],[126.98304821917365,37.57550620191512],[126.98304272705352,37.575504889692645],[126.98300214755186,37.5752216141743],[126.98320388480195,37.57203573247272],[126.9831398463531,37.57106045317316],[126.9831423178926,37.57106001638122],[126.98313757160346,37.570188020867306],[126.98330576319795,37.57019580409384],[126.98330617700259,37.57018727982572],[126.98399240518432,37.57019010702355],[126.98409085039876,37.570187169602484],[126.98769938580719,37.57019328361886],[126.98765062835436,37.57162605693015],[126.98781126855208,37.57260302693727],[126.98787488843243,37.57302784731646],[126.98767130481549,37.573509391522194],[126.98726095658765,37.57418506086488],[126.98786852644437,37.57439179428968],[126.98787936882803,37.574541636167446],[126.98818047705177,37.57460297623362],[126.98817586560445,37.57467636142619],[126.98835381251551,37.57471135068527],[126.98835600726413,37.574725448815826],[126.98865492498699,37.57475176124135],[126.98853096808429,37.575430744105056],[126.99060569717116,37.575666548358676],[126.99005265186445,37.577412676707965],[126.98739261937156,37.57733417373939],[126.98685492666716,37.577174120227795],[126.98663579798857,37.57704164085737],[126.98627936268471,37.576878545086046],[126.98539732108453,37.57658730105512],[126.98420777604017,37.57597252274288],[126.98309540000939,37.5757448896062]]]},properties:{CATEGORY:"",AREA_CD:"POI078",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.046642,37.651291],[127.046669,37.651298],[127.046695,37.651306],[127.046808,37.651337],[127.046912,37.651366],[127.046999,37.651385],[127.047033,37.651392],[127.047082,37.651403],[127.047103,37.651405],[127.047714,37.651535],[127.04791,37.651577],[127.048298,37.65166],[127.048297,37.651662],[127.048289,37.651679],[127.048283,37.651694],[127.04901,37.651865],[127.049087,37.651882],[127.049331,37.65194],[127.049851,37.652062],[127.049971,37.65209],[127.050342,37.652177],[127.050505,37.652219],[127.051179,37.652389],[127.051184,37.65239],[127.052033,37.652605],[127.052452,37.652711],[127.052814,37.652803],[127.053324,37.652919],[127.053361,37.652927],[127.053899,37.652977],[127.053907,37.652977],[127.05421,37.653005],[127.054831,37.653062],[127.054833,37.653062],[127.05487,37.65307],[127.054949,37.653086],[127.056189,37.653332],[127.056313,37.653357],[127.056991,37.653491],[127.057059,37.653506],[127.057513,37.653608],[127.05759,37.653626],[127.057646,37.653474],[127.05777,37.653138],[127.057839,37.652951],[127.057856,37.652905],[127.057877,37.652854],[127.05898,37.653102],[127.059324,37.653178],[127.060032,37.653334],[127.060048,37.653337],[127.060057,37.653306],[127.060219,37.652724],[127.060226,37.652701],[127.060278,37.652612],[127.060305,37.652491],[127.060355,37.652357],[127.060373,37.652288],[127.059675,37.652136],[127.059733,37.651966],[127.059847,37.651628],[127.060611,37.651786],[127.06063,37.651714],[127.060635,37.651698],[127.060708,37.651396],[127.060732,37.651299],[127.060873,37.651331],[127.061152,37.65139],[127.06136,37.651435],[127.061608,37.651489],[127.061774,37.651526],[127.062001,37.651581],[127.062406,37.651679],[127.062782,37.651765],[127.062673,37.652092],[127.062608,37.652289],[127.061853,37.652121],[127.061924,37.652179],[127.061957,37.652304],[127.061884,37.652621],[127.061865,37.652705],[127.061824,37.652885],[127.061728,37.652992],[127.061674,37.65319],[127.061592,37.653495],[127.061563,37.65364],[127.061557,37.65369],[127.06217,37.653827],[127.062346,37.65335],[127.063569,37.653643],[127.063666,37.653388],[127.063735,37.653406],[127.064343,37.653536],[127.064236,37.653837],[127.064345,37.653944],[127.064179,37.654428],[127.06423,37.654438],[127.064184,37.654569],[127.064382,37.654616],[127.064366,37.654677],[127.064411,37.654688],[127.06442,37.654663],[127.0645,37.654684],[127.064392,37.654985],[127.064335,37.655131],[127.064328,37.655156],[127.064381,37.655169],[127.064453,37.655187],[127.064476,37.655192],[127.064754,37.655261],[127.064782,37.655268],[127.064991,37.655319],[127.065255,37.655374],[127.065258,37.655375],[127.065441,37.655413],[127.065506,37.655426],[127.065628,37.655453],[127.065644,37.655456],[127.066162,37.65557],[127.066224,37.655583],[127.066405,37.655623],[127.066974,37.655744],[127.066898,37.656008],[127.066843,37.656221],[127.066841,37.656226],[127.066833,37.656256],[127.066826,37.656281],[127.066758,37.656534],[127.066727,37.656645],[127.0667,37.656743],[127.066664,37.656888],[127.06662,37.657092],[127.0666,37.657115],[127.066315,37.657011],[127.065871,37.656905],[127.065657,37.656854],[127.065572,37.656834],[127.064941,37.656688],[127.064922,37.656683],[127.064601,37.65661],[127.064141,37.656504],[127.064091,37.656493],[127.06406,37.656623],[127.064037,37.656866],[127.064002,37.657015],[127.063977,37.657121],[127.063454,37.657023],[127.063441,37.657065],[127.063282,37.657608],[127.063235,37.657784],[127.063183,37.657978],[127.063148,37.658235],[127.063118,37.658219],[127.06299,37.658149],[127.062736,37.657977],[127.062656,37.657936],[127.062549,37.657931],[127.062547,37.657944],[127.062538,37.65802],[127.062549,37.658306],[127.062054,37.658307],[127.062047,37.658352],[127.062021,37.658624],[127.062563,37.658649],[127.062572,37.658896],[127.062573,37.658914],[127.062576,37.658976],[127.062551,37.65899],[127.062543,37.658966],[127.062541,37.658966],[127.062561,37.65959],[127.062562,37.659635],[127.062563,37.659639],[127.062331,37.659658],[127.062293,37.659661],[127.062299,37.659616],[127.062368,37.659114],[127.062358,37.659062],[127.06221,37.659058],[127.062214,37.659026],[127.062002,37.659013],[127.062,37.659039],[127.061853,37.659026],[127.061844,37.659085],[127.061724,37.659072],[127.061695,37.659069],[127.061637,37.659584],[127.061667,37.659587],[127.061769,37.659597],[127.061777,37.659556],[127.061899,37.659567],[127.061899,37.659586],[127.061924,37.659588],[127.061913,37.659674],[127.061911,37.659691],[127.061896,37.659693],[127.061622,37.659715],[127.061621,37.659715],[127.061341,37.659737],[127.061375,37.65941],[127.061387,37.659303],[127.061435,37.658841],[127.061436,37.658835],[127.061436,37.658829],[127.061438,37.658812],[127.061473,37.65849],[127.061473,37.658487],[127.061474,37.658479],[127.061476,37.658467],[127.061484,37.658394],[127.061529,37.657978],[127.061531,37.65796],[127.061531,37.657958],[127.061537,37.657903],[127.06155,37.657789],[127.06155,37.657787],[127.06155,37.657786],[127.061581,37.657431],[127.061584,37.657397],[127.06159,37.65733],[127.06159,37.657321],[127.061624,37.656941],[127.061629,37.656876],[127.061644,37.656709],[127.061664,37.656475],[127.06167,37.65641],[127.06167,37.656405],[127.061672,37.656393],[127.061672,37.656388],[127.061621,37.656383],[127.061591,37.656377],[127.060771,37.656239],[127.060625,37.656782],[127.060495,37.657267],[127.059804,37.657162],[127.059661,37.657669],[127.059628,37.657785],[127.059439,37.658473],[127.059425,37.658524],[127.059292,37.659011],[127.059216,37.659274],[127.059202,37.659322],[127.059127,37.659562],[127.059126,37.659564],[127.05894,37.659518],[127.057943,37.659275],[127.057824,37.659247],[127.057604,37.659833],[127.056256,37.659532],[127.056194,37.659699],[127.056287,37.659721],[127.056187,37.66],[127.056183,37.660012],[127.057429,37.660298],[127.057424,37.660312],[127.057277,37.660701],[127.057772,37.660808],[127.058353,37.660942],[127.058433,37.66095],[127.05872,37.661031],[127.058724,37.661032],[127.058697,37.661195],[127.058219,37.661554],[127.058031,37.66139],[127.057575,37.661427],[127.057399,37.661442],[127.057252,37.661454],[127.056985,37.661475],[127.056436,37.66152],[127.056363,37.661526],[127.056263,37.661534],[127.055884,37.661565],[127.055593,37.661589],[127.055081,37.66163],[127.054191,37.661703],[127.054139,37.661707],[127.052745,37.66182],[127.051691,37.661906],[127.051691,37.661891],[127.051694,37.6618],[127.0517,37.661597],[127.051703,37.661495],[127.051704,37.661464],[127.051706,37.661451],[127.051712,37.661409],[127.051725,37.661334],[127.051769,37.66108],[127.051787,37.660979],[127.051786,37.660603],[127.051786,37.660375],[127.051786,37.660062],[127.050781,37.660325],[127.050668,37.660357],[127.049792,37.660608],[127.049044,37.660814],[127.048973,37.660831],[127.048894,37.660861],[127.048842,37.661292],[127.048838,37.661324],[127.048835,37.661427],[127.048387,37.661553],[127.048048,37.661647],[127.047758,37.661728],[127.047649,37.661759],[127.046861,37.661979],[127.046714,37.66202],[127.046747,37.66191],[127.046748,37.661907],[127.046763,37.661879],[127.046869,37.661679],[127.04696,37.6616],[127.047033,37.661535],[127.047514,37.661295],[127.047537,37.661283],[127.047871,37.661107],[127.048284,37.66089],[127.048761,37.660638],[127.048762,37.660638],[127.049028,37.660498],[127.049365,37.660321],[127.049776,37.660108],[127.049929,37.660029],[127.049913,37.659923],[127.049896,37.659818],[127.049891,37.659741],[127.049863,37.659284],[127.049851,37.659087],[127.049845,37.658995],[127.049835,37.658755],[127.049825,37.658534],[127.049822,37.65848],[127.049813,37.658345],[127.049808,37.658249],[127.049798,37.658083],[127.049781,37.65781],[127.049754,37.657367],[127.049737,37.657084],[127.049732,37.657014],[127.049717,37.656786],[127.049713,37.656735],[127.04969,37.656439],[127.049743,37.656114],[127.049817,37.655927],[127.04967,37.655872],[127.049428,37.65578],[127.049228,37.655775],[127.048335,37.655755],[127.047537,37.655736],[127.047158,37.655727],[127.047071,37.655726],[127.046868,37.656038],[127.046617,37.656451],[127.04658,37.656536],[127.046552,37.6566],[127.046567,37.656729],[127.046572,37.656776],[127.04659,37.656936],[127.046631,37.657065],[127.046639,37.657224],[127.047097,37.657189],[127.047111,37.65742],[127.047142,37.657934],[127.047151,37.658086],[127.047175,37.658489],[127.047179,37.658553],[127.047143,37.658543],[127.046962,37.658492],[127.046913,37.658478],[127.046698,37.658418],[127.046325,37.658311],[127.046283,37.6583],[127.046149,37.658261],[127.045892,37.658188],[127.045848,37.658176],[127.045738,37.65835],[127.045633,37.658549],[127.045707,37.658569],[127.04613,37.658689],[127.045912,37.659154],[127.045864,37.659257],[127.045762,37.659506],[127.045708,37.659637],[127.045752,37.659646],[127.045715,37.659772],[127.045553,37.660313],[127.045152,37.660251],[127.045087,37.660241],[127.04489,37.66021],[127.044938,37.660008],[127.045041,37.659575],[127.045051,37.659543],[127.045053,37.659537],[127.045097,37.659399],[127.045176,37.659152],[127.045187,37.659118],[127.045345,37.658624],[127.045355,37.658592],[127.045391,37.658479],[127.045431,37.658385],[127.045538,37.658131],[127.045553,37.658095],[127.045554,37.658094],[127.045594,37.657998],[127.045661,37.65784],[127.045773,37.657575],[127.045858,37.657372],[127.045921,37.657225],[127.045968,37.657113],[127.046013,37.657007],[127.046015,37.657001],[127.046026,37.656975],[127.046099,37.656803],[127.046103,37.656792],[127.046219,37.656517],[127.046306,37.656311],[127.046325,37.656264],[127.046336,37.656238],[127.046462,37.655929],[127.046463,37.655925],[127.046511,37.655807],[127.046528,37.655765],[127.046541,37.655733],[127.046544,37.655725],[127.046546,37.65572],[127.046592,37.655607],[127.046746,37.655228],[127.046791,37.655118],[127.0468,37.655096],[127.046875,37.654911],[127.047008,37.654584],[127.047049,37.654484],[127.047092,37.654378],[127.047094,37.654372],[127.047133,37.654277],[127.047182,37.654155],[127.047237,37.654021],[127.047286,37.653899],[127.047472,37.653487],[127.047481,37.653467],[127.047519,37.653384],[127.047539,37.653339],[127.046576,37.653091],[127.04657,37.65309],[127.046629,37.652952],[127.046588,37.652942],[127.046577,37.652939],[127.046499,37.65292],[127.046363,37.652887],[127.046156,37.652836],[127.046126,37.652829],[127.046051,37.65281],[127.046032,37.652806],[127.045835,37.652756],[127.045814,37.652891],[127.045798,37.652989],[127.04571,37.652986],[127.045329,37.652974],[127.045325,37.653128],[127.045325,37.653154],[127.045312,37.653171],[127.045313,37.653438],[127.045314,37.65354],[127.045539,37.653543],[127.045545,37.653604],[127.045551,37.653665],[127.045585,37.653812],[127.045644,37.653944],[127.045619,37.653947],[127.045479,37.653966],[127.045443,37.653971],[127.045411,37.65386],[127.045398,37.653819],[127.045079,37.653815],[127.045079,37.653829],[127.044878,37.653879],[127.044852,37.653885],[127.044738,37.653913],[127.044633,37.653939],[127.044611,37.653944],[127.044536,37.653961],[127.044524,37.653964],[127.044361,37.654001],[127.044341,37.654005],[127.044242,37.654027],[127.04413,37.654054],[127.044103,37.65406],[127.043991,37.654087],[127.043901,37.654109],[127.043875,37.654115],[127.043822,37.654128],[127.043752,37.654144],[127.043744,37.654071],[127.043732,37.653946],[127.043766,37.653821],[127.043798,37.653764],[127.043826,37.653704],[127.043807,37.653669],[127.044122,37.653579],[127.044287,37.653533],[127.044396,37.653585],[127.044423,37.653576],[127.044708,37.653508],[127.045089,37.653416],[127.045092,37.653322],[127.045097,37.653205],[127.0451,37.653125],[127.045101,37.653093],[127.045105,37.652993],[127.045106,37.652961],[127.045107,37.652931],[127.04503,37.652906],[127.044732,37.652807],[127.044052,37.652738],[127.043961,37.652788],[127.043885,37.652828],[127.043734,37.652819],[127.043769,37.652787],[127.04385,37.652685],[127.043956,37.652418],[127.043987,37.652319],[127.043643,37.65224],[127.04279,37.652045],[127.042202,37.65191],[127.04205,37.65187],[127.042154,37.651635],[127.042352,37.651604],[127.042504,37.651578],[127.04272,37.651539],[127.042894,37.651509],[127.043667,37.651378],[127.043774,37.65136],[127.043808,37.651354],[127.043971,37.651327],[127.043982,37.651325],[127.04402,37.651319],[127.044023,37.651318],[127.044276,37.651279],[127.044662,37.651219],[127.045057,37.651158],[127.045163,37.651141],[127.045304,37.651127],[127.045324,37.651125],[127.045417,37.651122],[127.045506,37.651118],[127.045513,37.651119],[127.045747,37.651123],[127.04594,37.651138],[127.046122,37.651162],[127.046382,37.651222],[127.046609,37.651282],[127.046623,37.651285],[127.046642,37.651291]]]},properties:{CATEGORY:"",AREA_CD:"POI079",AREA_NM:"  "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.03913681418663,37.52319187471211],[127.04828540866113,37.524333429452334],[127.04826245700929,37.52437527075521],[127.04826704097893,37.52437574347151],[127.04723395577804,37.52626330880547],[127.04676420225586,37.52687756746912],[127.0455420913576,37.527297411075054],[127.04405971532573,37.52765796424195],[127.04399649966716,37.52746701136521],[127.04396280330855,37.52747922494254],[127.0439625151619,37.52747773790464],[127.04254539743623,37.527859409357504],[127.04263831966193,37.52809865991438],[127.04255213075525,37.528120144738274],[127.04255244750956,37.52812228069021],[127.03946868333605,37.5289021739577],[127.03922385846666,37.5282432519251],[127.04074693043134,37.527853325014256],[127.0404456321109,37.52710456072111],[127.04516516399039,37.52594959349821],[127.04561635668786,37.525724759675754],[127.04603610106852,37.524883730944794],[127.03937281307532,37.52407860734757],[127.03913681418663,37.52319187471211]]]},properties:{CATEGORY:"",AREA_CD:"POI080",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.03500529518062,37.578743975426605],[127.03491522182331,37.57820549024058],[127.03830477871624,37.57822144844069],[127.03917288675001,37.57830858139781],[127.04590247597353,37.580392614789474],[127.04479141756701,37.58313631209449],[127.03592202090043,37.582902372833956],[127.03549172162138,37.58114487767876],[127.03500529518062,37.578743975426605]]]},properties:{CATEGORY:"",AREA_CD:"POI081",AREA_NM:"   "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98667093063696,37.53829060628014],[126.98731396751703,37.538348063388874],[126.98857740468908,37.53878758076545],[126.9886349274811,37.538820996253506],[126.98862568669354,37.53865497849687],[126.98864561388089,37.538558520504594],[126.9886484145,37.53854496402537],[126.98869254499769,37.53833134839104],[126.98885955928513,37.538388998168216],[126.9889152250837,37.53844663730921],[126.9894496915697,37.538499886793346],[126.9897781748412,37.538468882043745],[126.9900073385666,37.53879181888242],[126.9900095205281,37.53878985517437],[126.99024444652183,37.538990999459905],[126.99038495965523,37.53898320472872],[126.99060207846938,37.53908518987071],[126.99078023634567,37.53909850404449],[126.99084703804657,37.53916500989011],[126.99113654966463,37.539147298468414],[126.99138707751032,37.539227117784584],[126.99156522537677,37.53933353167931],[126.99176564818221,37.53940004647119],[126.99199952923021,37.539305738172324],[126.99209689994895,37.5395419371479],[126.9922472110217,37.539657214894376],[126.99225712164709,37.539720391155306],[126.99235730486275,37.539848054283894],[126.99243648321769,37.539892196103324],[126.99279838471863,37.53977695095015],[126.99311573673197,37.539750369620435],[126.99349521223293,37.53974330896861],[126.9934414190435,37.53996097352074],[126.99369195057521,37.540058521440216],[126.993703073759,37.5402003900614],[126.99339817280246,37.54075634759527],[126.99314628553283,37.54054394567378],[126.99306277409771,37.54051734054399],[126.9926173632947,37.54055278054237],[126.99217197339102,37.54038428358482],[126.99198267277445,37.54041087113842],[126.99141466653056,37.54023201081038],[126.99137909900911,37.54022081078132],[126.99111418378058,37.53995564906418],[126.9906687949192,37.53983443576549],[126.99022707058234,37.540085624673885],[126.98968516881735,37.5400323780725],[126.98946114314117,37.5400644676456],[126.9894605974006,37.540062025802925],[126.98937339243659,37.53998506108461],[126.98915448726072,37.53939687994347],[126.98891110135638,37.53933686730729],[126.9888883486015,37.53933739804642],[126.98818947889009,37.53941682973581],[126.98824879477299,37.53968052937295],[126.98775512748301,37.53976027998646],[126.98767716010538,37.539893273158235],[126.98753964207384,37.5399690623236],[126.98828968550036,37.5418793246243],[126.98865369011206,37.54303930059328],[126.98866611179503,37.54304919381007],[126.98835952210031,37.54335546764071],[126.98775466028718,37.54338259462748],[126.98732469027239,37.5438746026165],[126.9873258977357,37.54387975703021],[126.98724888739295,37.54390907341166],[126.98721278691971,37.54439660487936],[126.98699661754524,37.544769402411895],[126.98658825520492,37.54567751069465],[126.98670157319931,37.54608380286759],[126.98644859249463,37.54612909414871],[126.98556161072402,37.54635133536701],[126.98473309058322,37.54682920680923],[126.98472212944327,37.54683010511041],[126.98442088754838,37.54702991579506],[126.98404641755594,37.54689299588735],[126.98368856557884,37.54676215055255],[126.98340413848014,37.54697481567985],[126.98334643803875,37.54654223399789],[126.98310647455574,37.54583479589461],[126.98316664018944,37.54523255505444],[126.98293860128832,37.54490749879756],[126.98332282396505,37.54475460143191],[126.98335890107064,37.54448694006567],[126.98378272892737,37.54400903529277],[126.98438491297316,37.54420951256635],[126.98518658739182,37.5447061535835],[126.98583255303548,37.5442362953599],[126.98588824842629,37.54414763457344],[126.98635599077866,37.5439171541541],[126.98657867433893,37.54408564784487],[126.98675691319177,37.543704397890494],[126.98725808563975,37.54330544943588],[126.98693520902512,37.542986211257954],[126.98686841283418,37.542888669626954],[126.98599594512585,37.54224060512863],[126.98629378739336,37.54198259396344],[126.9862887823189,37.541977942987884],[126.98649291074742,37.54177721657679],[126.98606437785261,37.54151346082965],[126.98638494652714,37.5413135673947],[126.98639574189434,37.54130964788344],[126.98630081365803,37.54117732262481],[126.98650125750045,37.54112857858214],[126.98637341486058,37.53995815276103],[126.98608947559485,37.53992708602347],[126.98598375443649,37.539594570314286],[126.98635082562784,37.53949275772899],[126.98667093063696,37.53829060628014]]]},properties:{CATEGORY:"",AREA_CD:"POI082",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00955977171857,37.565488413992966],[127.00983577956293,37.565506378790346],[127.01023016273149,37.56574401875617],[127.01048387528475,37.56584030976596],[127.01060256224166,37.56588966460816],[127.0118228447756,37.566178095171125],[127.01232189516439,37.56646089034892],[127.01254246748013,37.56666449556344],[127.01270160059539,37.567165297563704],[127.01257727977298,37.567924774286794],[127.01241611579069,37.567908341338914],[127.01196182653104,37.5678556295284],[127.01173157747635,37.56788854475304],[127.0109915439427,37.568242676826145],[127.01094150379795,37.56825812376925],[127.0098328688472,37.5687459986093],[127.00970721780283,37.568670447625585],[127.00962005595918,37.568559404185635],[127.00897609126615,37.56773903371559],[127.00893957122494,37.5676925089783],[127.0083243183778,37.56690870414579],[127.00797390091485,37.566462275008746],[127.0077198900493,37.566013875618445],[127.00843623168744,37.565834989580424],[127.00847855175229,37.565824418496696],[127.00848484486552,37.56582284139542],[127.00856376909273,37.565803141100815],[127.0089063221855,37.56569489340751],[127.00898772438087,37.565669174069725],[127.0090290366531,37.565656125133316],[127.00907329170059,37.565642138965885],[127.00911720717991,37.56562826993224],[127.009233809486,37.565591411933944],[127.00935229053316,37.565553977062855],[127.00939994097779,37.565538918370926],[127.00944735371777,37.56552394076463],[127.00947234471654,37.56551603741304],[127.00955977171857,37.565488413992966]]]},properties:{CATEGORY:"",AREA_CD:"POI083",AREA_NM:"DDP()"}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.887859,37.579807],[126.888053,37.5797],[126.888929,37.579167],[126.888964,37.579145],[126.889462,37.578853],[126.889488,37.578838],[126.88987,37.578609],[126.890356,37.578318],[126.890575,37.578195],[126.890425,37.578047],[126.889928,37.577565],[126.889483,37.577134],[126.889445,37.577097],[126.889416,37.577069],[126.88895,37.576607],[126.888348,37.57601],[126.888326,37.575988],[126.888265,37.575928],[126.888133,37.575798],[126.886607,37.574291],[126.886412,37.574099],[126.886462,37.574071],[126.886769,37.573883],[126.887135,37.573681],[126.887431,37.573513],[126.887708,37.573315],[126.88798,37.573076],[126.888073,37.572982],[126.888347,37.573212],[126.888764,37.573628],[126.889383,37.574244],[126.889526,37.574158],[126.890057,37.573839],[126.890074,37.573868],[126.890602,37.574396],[126.890602,37.574406],[126.890683,37.574491],[126.890546,37.574574],[126.890173,37.57482],[126.890047,37.574903],[126.890104,37.57496],[126.89059,37.575433],[126.891133,37.575962],[126.891265,37.575878],[126.891616,37.575652],[126.892188,37.575283],[126.892456,37.57511],[126.892464,37.575079],[126.892531,37.575146],[126.892714,37.575331],[126.892805,37.575422],[126.89246,37.575646],[126.892795,37.575972],[126.892832,37.576008],[126.892887,37.576062],[126.89311,37.575988],[126.893143,37.576024],[126.893293,37.57619],[126.893461,37.57627],[126.893607,37.576394],[126.893611,37.576392],[126.893906,37.576219],[126.894119,37.576093],[126.894597,37.575811],[126.894718,37.575741],[126.894739,37.575729],[126.895003,37.575575],[126.895099,37.57552],[126.895339,37.575381],[126.895465,37.575308],[126.895753,37.575141],[126.895782,37.575124],[126.895788,37.575121],[126.896069,37.574953],[126.896189,37.574882],[126.896364,37.574779],[126.896657,37.574604],[126.896744,37.574553],[126.896914,37.574451],[126.897023,37.574386],[126.897086,37.574349],[126.89724,37.574257],[126.897336,37.5742],[126.897507,37.5741],[126.897527,37.574088],[126.898462,37.573574],[126.898467,37.573571],[126.898573,37.573684],[126.898588,37.5737],[126.898597,37.573709],[126.898619,37.573732],[126.898597,37.573765],[126.898596,37.573767],[126.898635,37.57377],[126.898735,37.573784],[126.898767,37.573788],[126.899132,37.574197],[126.899157,37.574224],[126.899248,37.574323],[126.899312,37.574395],[126.899319,37.574402],[126.899329,37.574414],[126.899341,37.574408],[126.899444,37.574361],[126.899579,37.574298],[126.899594,37.57429],[126.899667,37.574262],[126.899774,37.574214],[126.899833,37.574168],[126.899855,37.574148],[126.899897,37.574097],[126.899923,37.573988],[126.899937,37.573938],[126.899939,37.573932],[126.899967,37.573849],[126.9,37.5737],[126.900043,37.57351],[126.900068,37.573454],[126.90008,37.573427],[126.900148,37.573348],[126.900285,37.573244],[126.90047,37.573244],[126.900611,37.573243],[126.90061,37.573378],[126.900603,37.57357],[126.900597,37.573688],[126.900596,37.573711],[126.900588,37.573849],[126.900651,37.574036],[126.90068,37.574086],[126.900714,37.574142],[126.900939,37.57442],[126.90096,37.574446],[126.901109,37.574637],[126.901245,37.574868],[126.901261,37.574924],[126.901286,37.575016],[126.901297,37.575047],[126.90133,37.575138],[126.901347,37.575187],[126.901352,37.575196],[126.901473,37.575404],[126.901539,37.575499],[126.901603,37.575592],[126.901655,37.575668],[126.901764,37.575765],[126.901878,37.575866],[126.902085,37.576001],[126.902086,37.576002],[126.902081,37.576006],[126.90208,37.576006],[126.902082,37.576007],[126.901864,37.576153],[126.901827,37.576178],[126.901758,37.576231],[126.901626,37.576334],[126.901501,37.576418],[126.900726,37.576933],[126.900598,37.577028],[126.900229,37.577274],[126.899946,37.577452],[126.899462,37.577769],[126.899437,37.577786],[126.89896,37.578119],[126.898902,37.578159],[126.898448,37.57847],[126.898072,37.578728],[126.89794,37.578817],[126.897864,37.578869],[126.897768,37.578938],[126.897694,37.578987],[126.897527,37.579096],[126.897527,37.579097],[126.897149,37.579349],[126.897064,37.579402],[126.896934,37.579483],[126.896553,37.579729],[126.896254,37.579922],[126.896178,37.579971],[126.896145,37.579992],[126.896144,37.579993],[126.895639,37.580321],[126.895277,37.580556],[126.895034,37.580711],[126.895033,37.580712],[126.894508,37.581051],[126.894438,37.5811],[126.894365,37.581144],[126.893859,37.581463],[126.893819,37.581488],[126.893236,37.581855],[126.893236,37.581863],[126.892122,37.582575],[126.890325,37.583729],[126.889983,37.58395],[126.889451,37.584289],[126.888887,37.58465],[126.888125,37.585239],[126.88757,37.585669],[126.887405,37.585802],[126.886722,37.586344],[126.886521,37.586511],[126.886473,37.586551],[126.886466,37.586547],[126.885545,37.585858],[126.885504,37.585825],[126.88466,37.585163],[126.884339,37.58493],[126.884114,37.584767],[126.883594,37.584375],[126.8832,37.584091],[126.883092,37.584014],[126.882761,37.583779],[126.882703,37.583737],[126.882382,37.583509],[126.882109,37.583315],[126.882036,37.583265],[126.882035,37.583265],[126.882098,37.583228],[126.882194,37.583173],[126.882456,37.583019],[126.882606,37.582927],[126.882942,37.582721],[126.88316,37.582588],[126.883258,37.582529],[126.883637,37.582302],[126.883929,37.582128],[126.88408,37.582037],[126.884488,37.581798],[126.884783,37.581625],[126.884929,37.581539],[126.884935,37.581535],[126.88517,37.581397],[126.8855,37.581204],[126.88582,37.581016],[126.885958,37.580935],[126.886033,37.580891],[126.886404,37.580669],[126.88685,37.5804],[126.886903,37.580368],[126.88732,37.58012],[126.887685,37.579902],[126.887838,37.579818],[126.887859,37.579807]]]},properties:{CATEGORY:"",AREA_CD:"POI084",AREA_NM:"DMC()"}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.81993092314939,37.584771019334255],[126.82255243833261,37.58359516106714],[126.82256275946557,37.58359402760147],[126.82257759510003,37.583587423347836],[126.82277012831798,37.58350170883528],[126.82309264057375,37.583358097741005],[126.82328243449778,37.583273580161595],[126.82354328873016,37.583157391695565],[126.82368247118099,37.583095395655995],[126.82370156453347,37.58308691551704],[126.82387832659252,37.583008406734244],[126.82402087951417,37.58294470709803],[126.82406869977213,37.58292330942217],[126.82408912939732,37.58291416810399],[126.8241726396582,37.58287680180901],[126.82436087865605,37.5827928991268],[126.82444641026476,37.582754735595934],[126.82467927651328,37.58265062717478],[126.82483391950863,37.582581551366054],[126.824835265905,37.5825809497213],[126.82490983783819,37.58254764017361],[126.82494059055294,37.58253396958273],[126.82508217981051,37.58247103575655],[126.82512121703064,37.582453683461765],[126.82516678215022,37.58243343072464],[126.82525692063419,37.58239721961273],[126.82537766343395,37.58234871420989],[126.82550178889055,37.58229876133895],[126.82579925319558,37.58217897885892],[126.82592873706757,37.58212683240654],[126.82613709008177,37.58204292706076],[126.8261969515845,37.5820181442872],[126.82628617828195,37.5819812057387],[126.82653068240248,37.581878510150645],[126.82653566751101,37.58187641644288],[126.82654071041634,37.58187429759302],[126.82672371436186,37.58179743267072],[126.82681212918988,37.58176032944235],[126.82691803195407,37.58171588646087],[126.82695796020279,37.58169913132554],[126.82706669359786,37.58165350129338],[126.8271699237767,37.58161023622774],[126.82727291245872,37.58156707252626],[126.8272956415497,37.5815575466207],[126.8274116200063,37.581516325570774],[126.82750055233376,37.58148471769572],[126.82754077121302,37.58147042518307],[126.82754809867248,37.581467820421885],[126.82780746290561,37.58137585228322],[126.82814082598419,37.5812575240341],[126.82830617638396,37.58120004694926],[126.82846621121394,37.581144548512334],[126.82857863291692,37.58110556184789],[126.82881479701129,37.581023693581976],[126.8288232332974,37.58102083808764],[126.82895978408541,37.580974632522434],[126.82913857551303,37.58091829924438],[126.8291401412219,37.58091780688973],[126.82936887875647,37.58084571316872],[126.82936642562807,37.58086236700636],[126.82936564358751,37.580867669065015],[126.82915464005303,37.58094092391492],[126.82915292580125,37.5809415187652],[126.82911124668175,37.580955989893475],[126.8290705005324,37.58098267702629],[126.82899110307005,37.58104760133719],[126.82897105280713,37.58106895151065],[126.82889499288767,37.58114994700169],[126.82880402211836,37.581246952758214],[126.82874602277343,37.5813689675947],[126.82871097076041,37.58144270066563],[126.828710738685,37.5814431868579],[126.82870838602327,37.581448138832194],[126.82839923775174,37.58165012732358],[126.82817760856145,37.5817950859465],[126.82784669804677,37.58207503028351],[126.8278251694122,37.58209165511956],[126.82774294836197,37.58215514636058],[126.82767019404454,37.58221132647706],[126.82757762204959,37.58228293014308],[126.82756156219978,37.582295352685335],[126.82750801627637,37.58234820663672],[126.82734666701317,37.582508737746195],[126.82724484024261,37.582578900331875],[126.82723600673253,37.58258498785995],[126.82722729569264,37.582590989073644],[126.82710446100529,37.58267562547497],[126.82705501272093,37.58270959882507],[126.82692657420651,37.582797839706764],[126.82654811291354,37.58305828297497],[126.82636154107377,37.583153784588596],[126.82632708148732,37.58317142339023],[126.82616799661092,37.58326973330976],[126.82601547983437,37.583358478012215],[126.82596242714591,37.58338370328548],[126.82578348400108,37.58346878552339],[126.82578281075207,37.58346910617274],[126.82559856683706,37.583556923736126],[126.8253017815287,37.58369838167971],[126.82529120317952,37.58370394838997],[126.82480354423744,37.58396061180273],[126.82466272362454,37.58403951908351],[126.82465908243685,37.5840439005228],[126.82464905469453,37.584055965901456],[126.82461592179094,37.5840958325787],[126.82447573499333,37.58426451109076],[126.82438881024213,37.584369097632965],[126.8244338203125,37.584411681724866],[126.82437074933826,37.58445156648542],[126.82430282278602,37.58437572596345],[126.82414692528634,37.584469780766184],[126.8239276100694,37.584602098490784],[126.82389900346243,37.58461315017586],[126.82378897036878,37.584655667808114],[126.82377096874515,37.58464967814332],[126.82371003583886,37.58470770920105],[126.82232868223518,37.58511398966958],[126.82114234325904,37.585699033545836],[126.82025508117582,37.58631229028538],[126.82024386411362,37.5863376272415],[126.82022581625674,37.5863575419112],[126.82022004815843,37.58636390751621],[126.82021228092275,37.586372478362954],[126.8201095856751,37.586485802259325],[126.81998908350506,37.58657092850895],[126.81983193523891,37.58666726053964],[126.81982920681865,37.58666951961262],[126.81977446036659,37.58671480710021],[126.81968959454481,37.586785014444295],[126.81940544926046,37.58687101414529],[126.81934526528008,37.586874612614125],[126.8192309950802,37.5868814449677],[126.8191721508758,37.58689880344546],[126.81915788169668,37.58690301242451],[126.81899686485592,37.58698835526391],[126.818844632506,37.58709821013597],[126.81844306647687,37.58731044553073],[126.81823451277606,37.58742928785891],[126.81819661205817,37.58745102561255],[126.81788812933061,37.58762680925538],[126.81764223460178,37.58776776835483],[126.81749277804795,37.587859311486966],[126.8174675403175,37.58787476906463],[126.81728003096174,37.588050281958004],[126.81702752292708,37.588146179343575],[126.8168789143265,37.58829123155091],[126.81671328975932,37.58866403556562],[126.8167122374699,37.588664676319695],[126.8165504659308,37.588763169872884],[126.81637918398395,37.5888476515026],[126.81626825366389,37.58887425290471],[126.81615755890653,37.58890079871129],[126.8159930368877,37.58897746895222],[126.815712062106,37.58910840847413],[126.81571016342065,37.589109292053486],[126.81570079897452,37.58911420299118],[126.81569143565714,37.589119114830844],[126.81549846086592,37.589220320223],[126.81546234187543,37.58923926324431],[126.81528036999185,37.58935300749125],[126.8152724698971,37.589357291818324],[126.81526529880963,37.58936118266426],[126.81506247301645,37.58947119873188],[126.8150058793639,37.58953558642265],[126.8149589517853,37.58962392039052],[126.81495878371858,37.5896245724371],[126.81492697827812,37.58974690998813],[126.81490246191534,37.589787697505365],[126.8148492804026,37.58983125526425],[126.81476479883143,37.5898685683197],[126.81464311476816,37.589899644379194],[126.81462296040287,37.58990479312659],[126.81462016990533,37.58990550499038],[126.81446857908622,37.589965800165494],[126.8143271433573,37.59007031440693],[126.81421923252711,37.590148852259645],[126.814092834327,37.59024084838413],[126.81380618324403,37.59047239616308],[126.81372018995225,37.59053856997022],[126.81362325473872,37.59061316580992],[126.81352784983879,37.590690583183424],[126.81340023984315,37.5907941344422],[126.81323305976046,37.59093211119624],[126.8131591207028,37.59099285737016],[126.81314105090358,37.59100770287055],[126.81306471007258,37.59104333924756],[126.81290726014738,37.59111150575169],[126.81273724367124,37.59118162510155],[126.81261575356726,37.59123154704311],[126.8124345051017,37.59133543305516],[126.81236658964556,37.59125440602426],[126.8122877538076,37.591160349444834],[126.81225728316755,37.591129168913206],[126.81216083119902,37.591030463758024],[126.81204147101636,37.59090831870778],[126.81194144981744,37.59080595955888],[126.81187214310967,37.59073503453275],[126.81180496530848,37.590666286959916],[126.81163982604183,37.59049727353254],[126.8115495959848,37.59040492620735],[126.81153156423206,37.59038647027158],[126.81149250920026,37.59034649834069],[126.81144849541154,37.59030144857781],[126.8113971761615,37.59024892598726],[126.81138083052225,37.59023220353317],[126.8113276694072,37.59017781921601],[126.8112350831543,37.59008310186701],[126.81122654560656,37.59007436658316],[126.81115875468646,37.5900049761475],[126.81105750388289,37.58990133755991],[126.81100862674842,37.5898513036506],[126.81099356303437,37.58983589324102],[126.81085307681876,37.58969242442726],[126.810734148072,37.58957059947911],[126.81072050063831,37.58955662298614],[126.81066145027555,37.5894961499078],[126.81088632040675,37.58938126665143],[126.8109913078665,37.58932762760582],[126.81100315742252,37.5893215732],[126.81122972623633,37.5892048125744],[126.81127469808023,37.589181865828934],[126.81156363707345,37.58903444457509],[126.81216299210394,37.58872803601992],[126.81220329541702,37.58874077029842],[126.81230001226291,37.58869165326985],[126.81230239875713,37.58865730618665],[126.81260821267685,37.5885010040821],[126.8126148742191,37.588497600914884],[126.81280592743427,37.58839951816277],[126.81305730136651,37.58827047360349],[126.81318538745744,37.58820471699752],[126.81320520880182,37.58819454047231],[126.8132229827031,37.58818541663091],[126.81343137397593,37.58807843176401],[126.81369081414125,37.587945239756465],[126.81385926926585,37.5878587600404],[126.81390240088012,37.58783667520681],[126.81454984591925,37.58750515467469],[126.81461969293386,37.5874693890005],[126.81463704584425,37.587460503939894],[126.81464520931627,37.587456324584856],[126.81498053333462,37.587284621939325],[126.81533603588437,37.58710258253818],[126.81537240668546,37.58708396069487],[126.81576559745513,37.58688263799002],[126.81584745761283,37.586840723250766],[126.81614425742623,37.586688761208244],[126.81618522018273,37.58666778574517],[126.81637812252856,37.586569018929424],[126.81656569404159,37.58647298243608],[126.8170412748314,37.586229351758675],[126.81724037936058,37.58612780467003],[126.81727832160993,37.586108349476056],[126.81768105470991,37.58590181583685],[126.8181980797177,37.585636900682765],[126.81831162253631,37.585578723801056],[126.8183640419764,37.585553023475924],[126.81894021143886,37.58527050507018],[126.81913340355041,37.585178542907975],[126.81947573918275,37.58501557958789],[126.81955158736744,37.58497947515245],[126.81986460417961,37.584807463763276],[126.81993092314939,37.584771019334255]]]},properties:{CATEGORY:"",AREA_CD:"POI085",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.8666113636916,37.49608682227252],[126.86599468849069,37.495832589213656],[126.86616679896282,37.49562752464722],[126.8662246367357,37.495296894005946],[126.86642536909496,37.49509186144969],[126.86678005956658,37.49525725272521],[126.86737539545773,37.49553809846901],[126.86769718706122,37.495687127604896],[126.8679205607489,37.49579360821339],[126.86801174448765,37.49583479575671],[126.86806448195314,37.49584983032221],[126.8682395689252,37.49589975145413],[126.86809749192449,37.496439331414734],[126.86808241756762,37.496872640492306],[126.86812453206244,37.49734022332651],[126.86898235316211,37.499486346233155],[126.868806802302,37.4995257557978],[126.8685422491494,37.499587140064456],[126.86836180944829,37.49961738111354],[126.86817679184149,37.49963908502178],[126.86792147406793,37.49964488667222],[126.86775332384732,37.49963860667176],[126.86766234048666,37.49962826697919],[126.86754765820915,37.49961523602219],[126.86731842424113,37.49957358372963],[126.86720229278072,37.49954300704867],[126.86698536661328,37.49946118366528],[126.86683339594335,37.499393534845304],[126.86675776742301,37.49935986863547],[126.86657481499883,37.499259261300026],[126.86650555759046,37.49921577371323],[126.86628926475892,37.499079959638394],[126.8661885015729,37.499005565837166],[126.86604116718972,37.498890645760106],[126.86487191454194,37.49790759139007],[126.86498597844677,37.4973503512483],[126.86506804787545,37.49690145202643],[126.86639615916894,37.497088751705355],[126.8666113636916,37.49608682227252]]]},properties:{CATEGORY:"",AREA_CD:"POI086",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.15827913516728,37.572515876421456],[127.15670331959694,37.5720002735523],[127.15570988055191,37.57167461637245],[127.15560616145328,37.57118429558655],[127.15238440395169,37.56928116280307],[127.15180047250819,37.56830099950865],[127.15138947560921,37.56819253662637],[127.15108067837703,37.56783871264019],[127.1504302317461,37.56781229556792],[127.15002005921046,37.56811254174464],[127.15043132768841,37.56835724733907],[127.14991812993307,37.56849413843003],[127.14710652210717,37.56770067430239],[127.14149636629666,37.56806856997597],[127.13855224985008,37.5679494473783],[127.13400966984678,37.56606016022822],[127.13400736686611,37.566064630717285],[127.13361322317435,37.565906614940545],[127.13292264362593,37.56563061371468],[127.1326697235668,37.56552164922078],[127.13163695176888,37.56504949111438],[127.13119685346564,37.56481411100452],[127.13113104244049,37.564778918588054],[127.13054435603404,37.564434932256866],[127.13038926475363,37.56433740026695],[127.13024000955933,37.5642404266287],[127.1299790359464,37.564069522169355],[127.12968351932959,37.5638648684649],[127.12925339671011,37.563542668097796],[127.12923178593256,37.56352185521653],[127.12876960885089,37.56317096872437],[127.12861515803662,37.56305045127393],[127.12852098089587,37.56297696257155],[127.12834973920039,37.56284256057556],[127.12807188843084,37.562627172857674],[127.12784309929506,37.56244919149974],[127.12737613148659,37.562080565939446],[127.12651968048279,37.56135308311019],[127.12636085452947,37.56120534302155],[127.12582005795748,37.56070229413763],[127.12519830999265,37.56008408565096],[127.12486348825789,37.559723755562175],[127.12463849696391,37.559480441316396],[127.1241572778609,37.55891895012731],[127.12356364591228,37.55817258924645],[127.12315416419699,37.55759808505879],[127.12309519430318,37.55751534936844],[127.12296541100494,37.55732121608827],[127.1225873294882,37.55675566131165],[127.12236678046733,37.556405627543484],[127.12201958430911,37.55581217072852],[127.12196108867623,37.55569898771645],[127.12189734945912,37.55557565856759],[127.12175953860293,37.55530900780649],[127.12152780185129,37.5548122900113],[127.12142359775508,37.5546707719778],[127.12131808425806,37.55445405585682],[127.12127208788728,37.5543307795186],[127.12125907889684,37.55419424498302],[127.12118719948761,37.554140258453394],[127.12117292875554,37.55406171830312],[127.12109794522367,37.55394607381175],[127.12094548527958,37.55358613303104],[127.12084140075973,37.55329566895835],[127.1207425910918,37.55320792223028],[127.12072506737937,37.553086024246845],[127.12064167740743,37.55279779155437],[127.12057098320936,37.552709454090255],[127.12055802276521,37.552564744705535],[127.12050683744442,37.55251242713944],[127.12048521034254,37.55236744536556],[127.12045880206412,37.552328616764385],[127.12032129362528,37.55194816788981],[127.12021261971933,37.55174434702686],[127.12021327969109,37.551717657546504],[127.11976102638975,37.55030436481252],[127.11968681937675,37.550079094788096],[127.11957847237073,37.54975018353647],[127.11955469836663,37.54967801189533],[127.11908639268546,37.548416191252905],[127.11885585187459,37.54812964201863],[127.11884373784837,37.548097804026625],[127.11857817270919,37.54739983382097],[127.11852986587039,37.547272492378006],[127.11832961236959,37.54674460805173],[127.11827592549831,37.546559112833535],[127.11811324313038,37.546058144072965],[127.11809346330232,37.545997243078716],[127.11803619952589,37.54585393026294],[127.1180198013298,37.545812894576834],[127.11755894973574,37.54495689209636],[127.11693144883711,37.54408893503855],[127.11670062796638,37.54376965617521],[127.11659313101298,37.54362096221138],[127.11656955608373,37.543588353067214],[127.11635158512182,37.543306992721774],[127.11585993367271,37.542672342699404],[127.11553620683897,37.54225445404725],[127.11555355622849,37.54224919925343],[127.11539743435232,37.5420844038784],[127.1154052704181,37.542082227226],[127.11284903765889,37.53878315555903],[127.1128546639776,37.5387813835339],[127.11008571594326,37.535268210361785],[127.11009320945769,37.535265076739904],[127.10925671942668,37.53382022979371],[127.10848298934368,37.53228382293161],[127.1080298045809,37.53141061327616],[127.10758767310546,37.53064793648837],[127.10759421670993,37.53064162393667],[127.10705446047186,37.5298859643601],[127.1067365700172,37.52959787424387],[127.10674966486816,37.52958507387591],[127.1062833852571,37.529277328926746],[127.10553729831895,37.5284213045396],[127.10346479711005,37.526292941494226],[127.10177364422313,37.52476758791709],[127.10147520547932,37.524690214909135],[127.10179575079344,37.52409333742437],[127.10206102967688,37.52415965714546],[127.10245894800072,37.524004911131534],[127.10323267807914,37.52456862875816],[127.10587441363391,37.526834552550504],[127.10589121672403,37.52684948882516],[127.10632759839413,37.5271661511544],[127.10656521567478,37.527403769200596],[127.10657077070474,37.527398270176974],[127.10746608693954,37.52832674626712],[127.10771555386465,37.52864089011272],[127.10772031253734,37.52863623829709],[127.10781609225545,37.52877416334809],[127.10815743862324,37.52926570536343],[127.10850366795087,37.52976427123304],[127.10852720247867,37.52974156697536],[127.10896933395463,37.5306147766308],[127.10922355955469,37.53138850670495],[127.10937830557465,37.532405409087794],[127.1094998917319,37.53292491356606],[127.1099199166344,37.53382022979502],[127.11061627370752,37.53487029203923],[127.11068472102163,37.535017717365484],[127.11069364671575,37.53501398476734],[127.11125736434522,37.535621915540624],[127.11437171053102,37.53844018068331],[127.11771248386032,37.54122593194403],[127.11859379754634,37.54219905240627],[127.11876008982512,37.54232880433682],[127.11875385521982,37.54233838273806],[127.11890746698307,37.54247618149401],[127.11908431957286,37.54269724722968],[127.11921941530123,37.54287901239011],[127.11945218105849,37.54343019516909],[127.11981138022226,37.54413171822483],[127.12005946510627,37.54467210113393],[127.12026333684273,37.54514862060829],[127.12025057853751,37.545153952477655],[127.12066862402847,37.545814274101005],[127.1209633783451,37.54625149300037],[127.12124830751904,37.546929427922635],[127.12124636069431,37.546929905450774],[127.12164131327617,37.54785299143993],[127.12190167959099,37.54860952751246],[127.12208835732635,37.5491941235685],[127.12208619674871,37.5491943233614],[127.12258452709568,37.55056473112856],[127.12263378586657,37.55075519862033],[127.12324772431248,37.55245607130999],[127.12382528198702,37.55468798931058],[127.1242695392852,37.55572784419494],[127.12455446845873,37.55631244025118],[127.12455230510885,37.556318449617606],[127.12483939763234,37.5569117740231],[127.12526187881997,37.557643747236504],[127.1259594640356,37.55859678618574],[127.12624930577994,37.55895049136287],[127.12696654128297,37.559859317165106],[127.12740830812726,37.56041638977082],[127.12976280913765,37.562781712864705],[127.13146645717175,37.564076760146996],[127.13211491666596,37.56454099819246],[127.13277811387546,37.56491680994384],[127.13421504116252,37.56569054002031],[127.13420612695985,37.565705892306816],[127.1366161455924,37.56683454938503],[127.13855086195296,37.56720013823521],[127.13964619905843,37.567171600039195],[127.14725527874997,37.566648539215144],[127.14731204744795,37.56665336747093],[127.15005183085916,37.56688635661297],[127.15131930425491,37.567347949142025],[127.15327219754165,37.56819010735511],[127.1589490704963,37.57071512353192],[127.16499083970322,37.57340585883347],[127.16335202751594,37.57542446209299],[127.160883560315,37.573765746898246],[127.15827913516728,37.572515876421456]]]},properties:{CATEGORY:"",AREA_CD:"POI087",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97439568446683,37.576161375024945],[126.97439591377982,37.57549163767049],[126.97525767671786,37.57546761405558],[126.9757950322095,37.57538703419789],[126.9758777651342,37.57034384523689],[126.9781384560391,37.57032007811532],[126.97805585428016,37.57543589086003],[126.97908992335115,37.575565184565065],[126.97913032118255,37.576121961366205],[126.97906947284021,37.576186503593135],[126.97890729050026,37.57607350697643],[126.9781570839393,37.5759604027969],[126.97462891110278,37.576032319380154],[126.97439568446683,37.576161375024945]]]},properties:{CATEGORY:"",AREA_CD:"POI088",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98442919792988,37.524901516750596],[126.9774151751391,37.52526527006203],[126.97728430619804,37.52516967950697],[126.97670663906683,37.523675270552694],[126.97679399936555,37.52336252798255],[126.97703407398109,37.52303243958091],[126.97723048893204,37.522789219988205],[126.97735052725014,37.52261548761833],[126.97744873643954,37.522485189819704],[126.97748149887092,37.52235487947655],[126.97709991398047,37.521746661963526],[126.98240141644368,37.5201055813694],[126.98263048008747,37.520070864172055],[126.98291408645649,37.52001009110333],[126.98324131608162,37.519975386880596],[126.98365580637915,37.5199320060817],[126.98413573310475,37.519923383742125],[126.98445204539584,37.519932113581234],[126.98479017076767,37.519949533160926],[126.98517191725671,37.520010396140144],[126.98580452972384,37.52009735163186],[126.98580452314037,37.52013210273686],[126.98570632990732,37.52027109531553],[126.98559719712792,37.52057515421769],[126.98546619280908,37.52116590689246],[126.98537886109914,37.52153078264799],[126.98529153535983,37.52186090722166],[126.98521508399081,37.52235610076591],[126.98511681771828,37.52284260369955],[126.98505128593744,37.52326829625665],[126.98506211586029,37.52365924734452],[126.98512751513049,37.523902513186975],[126.9851927757434,37.524849488334205],[126.98442919792988,37.524901516750596]]]},properties:{CATEGORY:"",AREA_CD:"POI089",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.8643902952328,37.572889989561006],[126.86485052409733,37.572667954437854],[126.86498337227782,37.57260386191377],[126.86525715056786,37.572471776922804],[126.86531370586927,37.572364558279894],[126.8660759563717,37.57191297125966],[126.86614254268751,37.571867154053784],[126.86632241588023,37.57186932972601],[126.866378172968,37.57187020715306],[126.86641898505779,37.571870848513186],[126.86650401136485,37.571799711041116],[126.86660038150569,37.57169502200009],[126.86662411899934,37.57166923404302],[126.86662924894036,37.57166366369527],[126.8666466712422,37.57164473674253],[126.86665193827038,37.57156815885842],[126.86670127057926,37.57149591549362],[126.86670726771958,37.571487132311674],[126.86672719388598,37.57146317078657],[126.86683754936081,37.571330452485626],[126.86687851367482,37.57128283969328],[126.86697331569131,37.57117265252776],[126.86703332063395,37.57111617494132],[126.8671143407689,37.57103991755175],[126.86716347208177,37.570962545338894],[126.86723084981585,37.57087354139246],[126.86726999173786,37.5708218332025],[126.86730743163456,37.57077237553227],[126.8673513803427,37.57077649073799],[126.86749010650713,37.57078947656066],[126.86767110537745,37.570750720506446],[126.867709859114,37.570742424897205],[126.86802216375916,37.570768117803034],[126.86831326830469,37.57077914492342],[126.86858908678558,37.57063360848671],[126.8691662686768,37.57029835806744],[126.86921953282017,37.570268096840174],[126.86960498386493,37.57004910708992],[126.86996763072642,37.569815373035574],[126.87000254426106,37.56979286832691],[126.87026260968514,37.569625249724915],[126.8706153894926,37.56936069522695],[126.87066388482074,37.56923911567807],[126.8706860258847,37.569216842577504],[126.87069436024565,37.56920845911449],[126.87073065719629,37.569194618715294],[126.87081877792083,37.56916101306028],[126.87088067218482,37.56916474317499],[126.87103408935833,37.56903185139218],[126.8710494796833,37.569018517567486],[126.87132307141374,37.568756425887045],[126.87135685002633,37.56872406632166],[126.87141965183184,37.56866397299731],[126.8716192269026,37.56847299506986],[126.87166212097382,37.56843195001268],[126.87168553740702,37.56840954297574],[126.871929069533,37.56817650068242],[126.87233971410417,37.56778248657147],[126.8723453842275,37.56777701927475],[126.87240353214237,37.567720949541474],[126.87245163001587,37.56767456972787],[126.8725069682309,37.56762120974511],[126.87259115002027,37.56754003260576],[126.87263107190691,37.56750153554091],[126.87270239514083,37.567432759894174],[126.87291047293103,37.56723211150533],[126.87292686400117,37.567216308012775],[126.87300439753592,37.56714154016663],[126.87342053068484,37.56673823720511],[126.87366891844313,37.56650623265223],[126.87373035136459,37.56644884946552],[126.8741233843969,37.566088543848636],[126.87416627844807,37.56604922325483],[126.87424251480657,37.56598900503701],[126.87441297084192,37.565854367518575],[126.87454922101816,37.56576566678717],[126.8746595822637,37.56569382259965],[126.87478300825995,37.56561346898526],[126.87500660374599,37.56547698113686],[126.87525127410872,37.5653276249643],[126.87553489531301,37.565150265691265],[126.87559320934663,37.565119961895945],[126.87563800491337,37.56509668398113],[126.87590041901008,37.56496031959776],[126.87613474326861,37.564860053526566],[126.87622062930822,37.56483096349573],[126.87628105198795,37.56481049858562],[126.87653996778121,37.564722800445736],[126.8769410960992,37.56460300009714],[126.87695255735363,37.56460026958131],[126.87730091245227,37.564517312292786],[126.8774257256358,37.5644875901932],[126.8774401953935,37.56448414470422],[126.87794098422603,37.56430559668979],[126.8780467196289,37.56427433399579],[126.87807239135238,37.56426674478496],[126.87859476056646,37.56411229996782],[126.87873996336576,37.56406919910428],[126.8789857787932,37.56399633025047],[126.87942638242644,37.56386566224074],[126.88029883806121,37.563617664039306],[126.88041174056103,37.56357385491039],[126.88065986139958,37.56348996133369],[126.88077536812216,37.56345090543362],[126.88080351984595,37.56344078548499],[126.88083915173316,37.563427975615824],[126.88110963226906,37.5633307395805],[126.88117788672577,37.56330341821553],[126.88117940776878,37.563302809796596],[126.88130818787329,37.5632512602799],[126.88149166626037,37.563173615948536],[126.88159293168006,37.563130761517165],[126.88176591156972,37.56304469536592],[126.88201027617734,37.56292311218676],[126.88231977659629,37.562754949194584],[126.88251561733826,37.56264853996979],[126.88292911246266,37.56241188336987],[126.88304759944604,37.56234376684224],[126.88307379340877,37.56232870967067],[126.88338331686445,37.562150769968014],[126.8844336886878,37.56153907991178],[126.88459334758367,37.56144609840944],[126.8846762185676,37.561397836990054],[126.88468503662627,37.56139270016871],[126.88504655563975,37.56118207548632],[126.88549013601474,37.560923633787034],[126.88607911201508,37.560580480212785],[126.88636153125366,37.560415930872935],[126.88665775026568,37.560243342138286],[126.88666388669685,37.56023976487425],[126.88683651870511,37.560139159753795],[126.8872912641187,37.559874150262765],[126.88780238755932,37.55957626396599],[126.8880610821659,37.559425496236095],[126.88835437196063,37.5592545681267],[126.88853446895696,37.55914960596927],[126.88904404608134,37.55884910531146],[126.88946918613372,37.558601175252335],[126.88962225982048,37.55852895926041],[126.88976432520673,37.55848657882214],[126.88986056540894,37.55845992129925],[126.89015136618248,37.558407825929315],[126.89032380374952,37.5583947556117],[126.89057857939747,37.558400942692565],[126.8906843427495,37.55840351072634],[126.89073387847414,37.55840471408337],[126.89076993138333,37.55840978083044],[126.89090131035046,37.55842824001568],[126.89103443101772,37.55845370497533],[126.89127271199264,37.558520939673734],[126.89154628848921,37.55863691424998],[126.89181678854159,37.55880075399126],[126.89206053967364,37.55897812730263],[126.89201490018857,37.55901718791845],[126.89206153241994,37.559053832942226],[126.89199000947052,37.55910810888268],[126.89181838129905,37.559171862125176],[126.891692569695,37.55922552341495],[126.89155964426303,37.55930564360186],[126.89144347989316,37.55941140159432],[126.89143075956447,37.559424623464096],[126.89142913523497,37.55942631130434],[126.89134128830844,37.5595163282824],[126.89125771719728,37.55958551381268],[126.89121646322175,37.559619543483166],[126.89112456852529,37.55969575966896],[126.89100808836946,37.55977617841337],[126.89079033279478,37.55993787043602],[126.89068448097811,37.5600073157671],[126.89050075273522,37.56011779543202],[126.8902329695713,37.56026508030579],[126.8900972270456,37.56033534205786],[126.88986748805144,37.56044374917686],[126.88966683988428,37.56051451215733],[126.88946036572213,37.56059601175823],[126.8893313673969,37.56064741321754],[126.88913264838713,37.56073141715257],[126.8889388640623,37.56082188464642],[126.88887346892307,37.56085685092397],[126.88864233416822,37.560980438681625],[126.88864187881262,37.5609806833153],[126.88849520205848,37.56107520720434],[126.88837794671211,37.561150773467624],[126.88820834850586,37.56127027296702],[126.8881766874925,37.561325373185895],[126.88815843075294,37.56135714705076],[126.88811055667007,37.56144046597106],[126.88810373306961,37.56145234165756],[126.8879270791324,37.56155916516485],[126.88784173841597,37.56162440291911],[126.88774722762543,37.56167471049995],[126.88767779943257,37.56172692705926],[126.88762346992213,37.561767788565206],[126.88757290505451,37.56180104122484],[126.88749264877082,37.56185381935179],[126.88731668594892,37.56196937048262],[126.88725425163422,37.56201802203485],[126.88691526441308,37.56228217963268],[126.88676413087659,37.56239994973674],[126.88663536256516,37.56250029196063],[126.88659060224596,37.562530387372234],[126.88647663468964,37.562607017191475],[126.88640663769837,37.5626540823886],[126.88629828437998,37.5627243655374],[126.88613401661435,37.56283091641182],[126.88593937396486,37.56294141428939],[126.88549437058748,37.56319403849877],[126.88532673865227,37.563289199142204],[126.88528439191049,37.56331323728122],[126.88526412580508,37.56332518966418],[126.8849719834754,37.56349746257803],[126.88488228148823,37.563550360232064],[126.88451755517592,37.563765432923596],[126.88442304340623,37.56382116447408],[126.88416725675374,37.56397040522507],[126.88410492968295,37.564006769321566],[126.8839898143116,37.56407393429724],[126.88386943643768,37.56414416989046],[126.88380826576365,37.564179859240056],[126.88341847821164,37.56440728039828],[126.88332055004031,37.564464413183465],[126.88328772752615,37.56448356416424],[126.8832466019316,37.56450755864094],[126.88291193929741,37.564700148853774],[126.88288330531431,37.56471662709252],[126.88263959477561,37.56485687396546],[126.88237143520311,37.56501118982063],[126.88202753256077,37.56520909392342],[126.88169958299771,37.565397811414925],[126.88162016991011,37.56544350820483],[126.88124806211201,37.56566140223125],[126.8807205189766,37.56597030893457],[126.88026446596812,37.566237350214635],[126.88023880324015,37.56625237576259],[126.87958965658076,37.566632477311806],[126.87829898555233,37.56738819425409],[126.878293755856,37.567391124214424],[126.87800636567297,37.56755203857045],[126.87773586783523,37.56770689457241],[126.87751301491348,37.56783414237984],[126.87743562643959,37.56787832930433],[126.87715182953332,37.56805231687026],[126.87707092270439,37.56810122102315],[126.87664604104815,37.56834826562102],[126.87636614054284,37.5685171873472],[126.876263112718,37.56857282670025],[126.87609262830887,37.56867203635828],[126.87568543931293,37.56891149012752],[126.87517345809981,37.56920320208773],[126.87472838775896,37.569453904062],[126.87462217523895,37.56951373174785],[126.87460840971839,37.56952176276991],[126.8735627575722,37.570131736967184],[126.8734422510683,37.57016651956302],[126.87335159431925,37.5702182270552],[126.87295584556836,37.57044394639917],[126.87245957195162,37.57072700150998],[126.87203754743803,37.57096769947323],[126.87201388198125,37.570981200037856],[126.87200719897707,37.57098507686289],[126.87190017675582,37.57104716807658],[126.87186580306152,37.571067111526816],[126.8716360633581,37.57120039972861],[126.87151869293584,37.571261368291886],[126.87144169340586,37.571305644486124],[126.87135332994107,37.57135645737708],[126.87128215887702,37.57139738281409],[126.87114441781851,37.57147606626361],[126.87103429237662,37.57153957681885],[126.87081564010379,37.57166547405551],[126.8706735695613,37.57174730471206],[126.87066390864722,37.571752870213835],[126.87045328554741,37.571874125678505],[126.87043888025184,37.571882419489455],[126.87040824202852,37.57190000607308],[126.87038930091539,37.57191087887162],[126.87022836809166,37.5720032557138],[126.87018962678083,37.57202553548035],[126.86987442077572,37.57220680449616],[126.86978662853416,37.572257292486604],[126.86955866830971,37.57238832883405],[126.86926060937284,37.572559661258005],[126.8690407099901,37.57268583308966],[126.8690235316075,37.57269571205473],[126.86877194258321,37.57284038832249],[126.86865870341225,37.57290461213029],[126.86865864109062,37.572904647198655],[126.86851380096294,37.5729867892657],[126.8684230041872,37.573020474849926],[126.86830689477097,37.57306567524941],[126.86822406359717,37.573096835191535],[126.8680878937772,37.57314465712072],[126.8679387645374,37.573197028629394],[126.8677632621721,37.57332015249868],[126.86771930645905,37.57334694669255],[126.86756993522933,37.573437993218135],[126.86752581393242,37.573464884458026],[126.86743547014848,37.573494733391556],[126.86736954209015,37.573516514634996],[126.86734493684548,37.57352859323349],[126.86728385515512,37.57356090526417],[126.867084665422,37.57367555262769],[126.86691079113827,37.573776997528654],[126.86689265793153,37.57378751389232],[126.86666335435407,37.5739204991175],[126.86665883519808,37.573923121232596],[126.8663084329856,37.57412459732925],[126.86602894194083,37.57426731694462],[126.86517279644045,37.57474852728313],[126.8640600187257,37.573140390825074],[126.8641532604393,37.57299249784464],[126.86420654125256,37.57290798753501],[126.86437924298106,37.5728870431604],[126.8643902952328,37.572889989561006]]]},properties:{CATEGORY:"",AREA_CD:"POI090",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.976548,37.555219],[126.97655,37.555221],[126.976775,37.555154],[126.976781,37.555152],[126.976792,37.555149],[126.976827,37.555139],[126.976829,37.555138],[126.976837,37.555136],[126.976845,37.555133],[126.977258,37.555011],[126.977263,37.555008],[126.977706,37.554673],[126.977751,37.554639],[126.977782,37.554617],[126.977825,37.554586],[126.977857,37.554567],[126.9781,37.554417],[126.978102,37.554415],[126.978105,37.554414],[126.978156,37.554384],[126.978202,37.554363],[126.978471,37.554238],[126.978661,37.554149],[126.978795,37.554087],[126.978797,37.554085],[126.978799,37.554082],[126.978797,37.554071],[126.978796,37.554068],[126.978783,37.554023],[126.978716,37.553803],[126.978715,37.553801],[126.978713,37.553799],[126.978713,37.553795],[126.978714,37.553765],[126.978716,37.5537],[126.978732,37.553205],[126.978895,37.55325],[126.979193,37.553285],[126.979364,37.553299],[126.979357,37.553108],[126.97935,37.5529],[126.97966,37.552633],[126.980032,37.552367],[126.980224,37.552236],[126.980627,37.552118],[126.981655,37.552218],[126.981744,37.552225],[126.982055,37.552134],[126.982104,37.552091],[126.982288,37.551926],[126.982342,37.551876],[126.98264,37.551599],[126.982841,37.551366],[126.982997,37.551158],[126.982914,37.551115],[126.982638,37.550971],[126.982594,37.550941],[126.982629,37.550906],[126.982546,37.550795],[126.982401,37.550642],[126.982275,37.550576],[126.982357,37.550473],[126.982388,37.550433],[126.982402,37.550433],[126.982452,37.550426],[126.982493,37.550406],[126.982524,37.550384],[126.982673,37.550235],[126.982645,37.550216],[126.982417,37.550063],[126.982321,37.549995],[126.982249,37.549936],[126.982222,37.549914],[126.982187,37.549893],[126.982194,37.549893],[126.982255,37.549898],[126.982314,37.549884],[126.982342,37.54986],[126.982367,37.549817],[126.982397,37.549735],[126.9824,37.549715],[126.982405,37.549679],[126.982479,37.549621],[126.98254,37.549584],[126.982561,37.549566],[126.98261,37.549526],[126.98271,37.549422],[126.982746,37.549383],[126.982765,37.549335],[126.982854,37.549054],[126.982882,37.548948],[126.98292,37.548808],[126.982973,37.548627],[126.982996,37.548592],[126.983027,37.548545],[126.983048,37.548516],[126.983076,37.548476],[126.983213,37.548347],[126.983225,37.548334],[126.983243,37.548328],[126.983248,37.548305],[126.983249,37.5483],[126.983253,37.548285],[126.983277,37.548235],[126.983294,37.548158],[126.983287,37.548113],[126.983262,37.548028],[126.983324,37.548037],[126.983355,37.548041],[126.983372,37.548046],[126.983468,37.548069],[126.983796,37.548177],[126.98389,37.548213],[126.983895,37.54823],[126.983863,37.548267],[126.983798,37.548319],[126.983701,37.548418],[126.98364,37.548494],[126.983607,37.548523],[126.983582,37.548536],[126.983546,37.548541],[126.983787,37.548616],[126.984104,37.548716],[126.984121,37.548693],[126.984267,37.548473],[126.984312,37.548372],[126.984335,37.548293],[126.984367,37.548143],[126.984399,37.547907],[126.984407,37.547613],[126.98443,37.547214],[126.984444,37.547112],[126.984464,37.547048],[126.984469,37.547042],[126.984495,37.547004],[126.984499,37.546998],[126.984722,37.546875],[126.985118,37.546646],[126.985298,37.546542],[126.985592,37.546408],[126.985698,37.546372],[126.986011,37.546289],[126.986345,37.546214],[126.986468,37.546189],[126.986694,37.546144],[126.98731,37.546029],[126.987331,37.546026],[126.98744,37.546012],[126.987443,37.546011],[126.987686,37.546025],[126.987876,37.546036],[126.988604,37.546195],[126.988732,37.546214],[126.988835,37.546218],[126.98891,37.546212],[126.988972,37.546207],[126.989112,37.54618],[126.989246,37.54612],[126.98942,37.546035],[126.989423,37.546034],[126.989663,37.5459],[126.990021,37.545661],[126.990104,37.545605],[126.990236,37.54551],[126.990333,37.54542],[126.990336,37.545418],[126.990347,37.545407],[126.990447,37.54531],[126.990524,37.545205],[126.990543,37.545176],[126.990571,37.545129],[126.990848,37.544683],[126.99096,37.544478],[126.991007,37.544391],[126.991023,37.544362],[126.991108,37.544186],[126.991131,37.544079],[126.991143,37.543976],[126.991131,37.543801],[126.991132,37.543659],[126.991132,37.543552],[126.991136,37.54348],[126.991147,37.543396],[126.991192,37.543228],[126.991253,37.543062],[126.99131,37.542969],[126.991396,37.542873],[126.991487,37.542789],[126.991608,37.542735],[126.991752,37.542687],[126.991968,37.54265],[126.992206,37.542638],[126.992387,37.542636],[126.992895,37.542632],[126.993341,37.542617],[126.993451,37.542596],[126.993632,37.542548],[126.993887,37.542448],[126.993984,37.542404],[126.994181,37.542315],[126.994261,37.542285],[126.994401,37.542243],[126.994522,37.542213],[126.995087,37.54211],[126.995344,37.54205],[126.995465,37.542005],[126.995684,37.541885],[126.996089,37.541626],[126.996392,37.541433],[126.996638,37.541258],[126.996778,37.541171],[126.996888,37.541125],[126.996899,37.54112],[126.997004,37.541078],[126.997144,37.541033],[126.99756,37.540935],[126.997568,37.540933],[126.997596,37.540926],[126.997634,37.540924],[126.997913,37.540905],[126.998197,37.540938],[126.998757,37.541152],[126.999222,37.541498],[127.00038,37.542498],[127.000872,37.542887],[127.000983,37.542974],[127.001264,37.542468],[127.001565,37.542039],[127.001706,37.541891],[127.001892,37.541731],[127.001986,37.541672],[127.002041,37.541916],[127.002092,37.542077],[127.002112,37.542128],[127.002175,37.542283],[127.002029,37.54258],[127.002016,37.542856],[127.002012,37.543114],[127.002017,37.543178],[127.002024,37.543277],[127.002186,37.544052],[127.002243,37.544307],[127.002256,37.544369],[127.002265,37.544407],[127.002546,37.545681],[127.002576,37.545817],[127.00267,37.546304],[127.002799,37.546872],[127.002941,37.54741],[127.003581,37.550048],[127.003722,37.550066],[127.003996,37.550113],[127.004185,37.550145],[127.004209,37.550151],[127.004322,37.550205],[127.004302,37.550241],[127.004285,37.550271],[127.004226,37.550375],[127.004226,37.550376],[127.004341,37.550496],[127.004342,37.550498],[127.004359,37.55056],[127.004375,37.550622],[127.004386,37.550667],[127.004387,37.550668],[127.004396,37.550706],[127.004317,37.550784],[127.004258,37.550825],[127.004118,37.550906],[127.00402,37.551075],[127.004016,37.55108],[127.003857,37.551354],[127.003836,37.551495],[127.003824,37.551581],[127.003822,37.551597],[127.003804,37.551717],[127.003788,37.551826],[127.003788,37.551827],[127.003776,37.55191],[127.003794,37.551958],[127.003884,37.551935],[127.003909,37.552009],[127.003948,37.552123],[127.003971,37.55219],[127.004151,37.55242],[127.00416,37.552431],[127.004178,37.55251],[127.004193,37.552576],[127.004248,37.552546],[127.00429,37.552533],[127.004271,37.552649],[127.004319,37.552848],[127.004324,37.552871],[127.004347,37.552968],[127.004412,37.553005],[127.004472,37.553039],[127.004503,37.553057],[127.004486,37.553159],[127.004475,37.553226],[127.004455,37.553345],[127.004449,37.553378],[127.004449,37.553379],[127.004434,37.553477],[127.004485,37.55354],[127.004533,37.553599],[127.00454,37.553609],[127.004523,37.553687],[127.004515,37.553724],[127.00451,37.553751],[127.004508,37.553785],[127.004508,37.553796],[127.004568,37.553837],[127.004634,37.553882],[127.004695,37.553925],[127.004716,37.553941],[127.004782,37.554026],[127.004797,37.554046],[127.004834,37.554093],[127.00485,37.554113],[127.00489,37.554167],[127.005017,37.554313],[127.005017,37.554315],[127.005025,37.554323],[127.005041,37.554343],[127.005075,37.554384],[127.005083,37.554394],[127.005083,37.5544],[127.005083,37.554404],[127.005061,37.554419],[127.005057,37.554421],[127.005061,37.554425],[127.005128,37.554486],[127.005225,37.554574],[127.005278,37.554609],[127.005448,37.55472],[127.005749,37.554917],[127.005795,37.554947],[127.005806,37.554955],[127.005824,37.554966],[127.005868,37.554997],[127.00592,37.555031],[127.005938,37.555047],[127.006016,37.555117],[127.006058,37.555186],[127.006076,37.555216],[127.006083,37.555228],[127.006157,37.555351],[127.006333,37.555564],[127.006509,37.555635],[127.006531,37.555642],[127.00679,37.555721],[127.006801,37.555724],[127.006881,37.5558],[127.006887,37.555805],[127.00699,37.555903],[127.007152,37.556177],[127.007265,37.556278],[127.007446,37.55634],[127.007448,37.55634],[127.007485,37.55634],[127.007497,37.556339],[127.007514,37.556339],[127.007616,37.556343],[127.007834,37.556426],[127.007932,37.556509],[127.007973,37.55658],[127.008141,37.556827],[127.00837,37.55714],[127.008367,37.557303],[127.00834,37.557363],[127.00829,37.557476],[127.008239,37.557579],[127.00819,37.557679],[127.008182,37.557713],[127.00816,37.557799],[127.00816,37.557801],[127.008179,37.557875],[127.008205,37.557968],[127.008215,37.558001],[127.008208,37.558008],[127.008184,37.558034],[127.00818,37.558037],[127.00815,37.558069],[127.008037,37.558128],[127.007888,37.558207],[127.007789,37.558259],[127.007769,37.55827],[127.007603,37.558358],[127.007557,37.558382],[127.007553,37.558384],[127.007545,37.558389],[127.007301,37.558517],[127.007147,37.558599],[127.006936,37.55871],[127.006926,37.558716],[127.006887,37.558732],[127.006526,37.558888],[127.006351,37.558963],[127.006226,37.558983],[127.006218,37.558985],[127.006195,37.558989],[127.006077,37.559008],[127.005722,37.559067],[127.005612,37.559064],[127.005373,37.559056],[127.005323,37.559055],[127.00516,37.55905],[127.005146,37.55905],[127.00503,37.559046],[127.005,37.559045],[127.00491,37.559042],[127.004766,37.559038],[127.004753,37.559038],[127.004729,37.559037],[127.004522,37.559031],[127.004463,37.559029],[127.004448,37.559028],[127.004381,37.559026],[127.004174,37.55902],[127.003944,37.559013],[127.003754,37.559007],[127.003608,37.559003],[127.003444,37.558998],[127.003385,37.559025],[127.003255,37.559084],[127.003212,37.559104],[127.003092,37.559159],[127.003058,37.559175],[127.002866,37.559052],[127.00285,37.559042],[127.002682,37.559017],[127.002624,37.559008],[127.002534,37.558994],[127.002463,37.558983],[127.002408,37.558975],[127.002302,37.558933],[127.002264,37.558918],[127.002255,37.558911],[127.002212,37.558879],[127.002132,37.558819],[127.0021,37.558795],[127.002061,37.558766],[127.00205,37.558761],[127.002035,37.558754],[127.001985,37.558732],[127.001977,37.558732],[127.001874,37.558732],[127.001837,37.558751],[127.001725,37.55881],[127.001715,37.558816],[127.001649,37.55885],[127.00162,37.558865],[127.001612,37.55887],[127.001571,37.558752],[127.001561,37.558732],[127.001548,37.558705],[127.001523,37.558655],[127.001502,37.558613],[127.001459,37.558513],[127.001431,37.558456],[127.001412,37.558452],[127.001391,37.558406],[127.001394,37.558406],[127.001535,37.558374],[127.001585,37.558362],[127.001688,37.558338],[127.001758,37.558321],[127.001869,37.558298],[127.001932,37.558284],[127.002053,37.55826],[127.002141,37.558242],[127.002201,37.558219],[127.002204,37.558218],[127.002207,37.558226],[127.002242,37.558304],[127.002268,37.558365],[127.002335,37.558384],[127.002338,37.558385],[127.002342,37.558392],[127.002361,37.558435],[127.002368,37.558451],[127.002388,37.5585],[127.002435,37.558482],[127.002438,37.55848],[127.002451,37.558472],[127.002507,37.558525],[127.002622,37.558472],[127.002629,37.558475],[127.002721,37.558514],[127.002716,37.558542],[127.002723,37.558544],[127.002807,37.558577],[127.002973,37.558643],[127.003109,37.558696],[127.003149,37.558712],[127.003215,37.55874],[127.003344,37.558794],[127.003345,37.558792],[127.0034,37.558748],[127.003423,37.558729],[127.003441,37.558714],[127.003582,37.558594],[127.003585,37.558591],[127.003593,37.558556],[127.003617,37.558453],[127.003619,37.558452],[127.003628,37.558439],[127.003737,37.558297],[127.003803,37.55821],[127.003797,37.558196],[127.00373,37.558034],[127.003634,37.5578],[127.003762,37.557835],[127.003844,37.557858],[127.003826,37.557838],[127.003656,37.557642],[127.00337,37.557711],[127.003312,37.557725],[127.003302,37.557705],[127.003201,37.557495],[127.003314,37.557475],[127.003252,37.557369],[127.003603,37.557193],[127.003485,37.557],[127.003654,37.556932],[127.003591,37.55666],[127.003513,37.556621],[127.003431,37.556642],[127.00343,37.556642],[127.003387,37.556593],[127.003283,37.556475],[127.003282,37.556474],[127.003122,37.556273],[127.002917,37.556176],[127.00293,37.555978],[127.002937,37.555869],[127.002512,37.555849],[127.002374,37.555808],[127.002337,37.555797],[127.001926,37.555675],[127.001897,37.555667],[127.001107,37.555823],[127.000387,37.555997],[126.999866,37.556198],[126.999572,37.556531],[126.999651,37.556738],[126.999281,37.556928],[126.99937,37.557157],[126.99922,37.557259],[126.999294,37.557508],[126.999178,37.557508],[126.999002,37.557559],[126.998779,37.557908],[126.998782,37.55805],[126.998454,37.557881],[126.998204,37.557888],[126.99786,37.558081],[126.997541,37.558355],[126.99735,37.558518],[126.997491,37.558504],[126.99753,37.558496],[126.997646,37.558542],[126.997883,37.558658],[126.997963,37.558697],[126.99798,37.558712],[126.997985,37.558732],[126.997997,37.558775],[126.997998,37.558808],[126.997999,37.558828],[126.997996,37.558843],[126.997981,37.558913],[126.997978,37.558931],[126.997971,37.558966],[126.997955,37.559004],[126.997938,37.55904],[126.997898,37.559126],[126.997891,37.559141],[126.997876,37.559166],[126.997853,37.559188],[126.997818,37.559196],[126.997784,37.559187],[126.997696,37.559165],[126.997632,37.559146],[126.997424,37.55909],[126.997372,37.559085],[126.997339,37.559103],[126.997313,37.559122],[126.997273,37.559186],[126.997242,37.559238],[126.997222,37.55927],[126.997214,37.559283],[126.997204,37.5593],[126.997161,37.559365],[126.997151,37.559379],[126.997144,37.559395],[126.997102,37.559488],[126.997086,37.559525],[126.99707,37.55956],[126.996908,37.559516],[126.996803,37.559445],[126.996784,37.55943],[126.996697,37.559354],[126.996681,37.559339],[126.996645,37.559289],[126.996623,37.559218],[126.996623,37.559205],[126.996632,37.559186],[126.996647,37.559176],[126.996659,37.559173],[126.996682,37.559169],[126.996741,37.559155],[126.996755,37.559147],[126.996769,37.559132],[126.996791,37.559066],[126.996841,37.558977],[126.996856,37.558937],[126.996883,37.558871],[126.996915,37.55879],[126.996948,37.558706],[126.997014,37.558541],[126.997,37.558542],[126.996728,37.55856],[126.996705,37.558561],[126.996561,37.558571],[126.996385,37.558588],[126.996118,37.558616],[126.99606,37.558289],[126.996058,37.558282],[126.995981,37.557847],[126.995936,37.557644],[126.995935,37.557636],[126.995884,37.557323],[126.995742,37.556945],[126.995604,37.556553],[126.9956,37.556544],[126.995599,37.556542],[126.995594,37.556485],[126.995585,37.556396],[126.995593,37.556205],[126.995631,37.556035],[126.995647,37.55596],[126.995699,37.555821],[126.995728,37.555752],[126.995728,37.55575],[126.99573,37.555748],[126.995778,37.555682],[126.99585,37.555583],[126.995853,37.555571],[126.995872,37.555498],[126.995992,37.555273],[126.996106,37.555085],[126.996162,37.555],[126.996166,37.554997],[126.996024,37.555012],[126.995741,37.555043],[126.995564,37.555061],[126.995465,37.555072],[126.995395,37.555079],[126.995341,37.555047],[126.995025,37.555028],[126.994787,37.555034],[126.99477,37.555035],[126.994728,37.554987],[126.994659,37.554951],[126.994631,37.55492],[126.994525,37.554807],[126.994504,37.554824],[126.994391,37.554901],[126.994327,37.554945],[126.994229,37.55502],[126.99414,37.555089],[126.993927,37.555252],[126.993898,37.555273],[126.993753,37.555376],[126.993702,37.555412],[126.993667,37.555437],[126.993654,37.555446],[126.993497,37.555526],[126.993564,37.555615],[126.993646,37.555726],[126.993704,37.555804],[126.993742,37.555855],[126.993757,37.555873],[126.99376,37.555868],[126.994595,37.555269],[126.994612,37.55524],[126.994622,37.555319],[126.994627,37.555791],[126.994626,37.555992],[126.9945,37.55606],[126.994498,37.556061],[126.994528,37.556073],[126.994565,37.556087],[126.994721,37.556109],[126.994866,37.556135],[126.994972,37.556137],[126.99513,37.556136],[126.995284,37.556139],[126.99527,37.556191],[126.995248,37.556346],[126.995243,37.556378],[126.995242,37.556402],[126.995239,37.556425],[126.995238,37.556454],[126.995238,37.556476],[126.995265,37.556555],[126.995279,37.556598],[126.995315,37.556676],[126.995344,37.556744],[126.9954,37.556899],[126.995432,37.557004],[126.995463,37.55705],[126.995517,37.557149],[126.995549,37.557234],[126.995587,37.557313],[126.995618,37.557384],[126.995672,37.55754],[126.995678,37.557576],[126.995689,37.557697],[126.995691,37.557736],[126.995696,37.557842],[126.995698,37.557893],[126.995675,37.558],[126.995669,37.558017],[126.995668,37.55802],[126.995666,37.558028],[126.995658,37.558053],[126.995656,37.55806],[126.995652,37.558074],[126.995637,37.55812],[126.995634,37.558132],[126.995624,37.558162],[126.995624,37.558163],[126.995623,37.558167],[126.99562,37.558175],[126.995617,37.558186],[126.995615,37.55819],[126.99561,37.558207],[126.995593,37.558258],[126.995585,37.558284],[126.995579,37.558308],[126.995578,37.558311],[126.995577,37.558314],[126.99557,37.558336],[126.995564,37.558355],[126.995541,37.55843],[126.99554,37.558436],[126.995527,37.558479],[126.995493,37.558601],[126.995474,37.558676],[126.995471,37.558687],[126.995466,37.558705],[126.995459,37.558734],[126.995451,37.558762],[126.995451,37.558765],[126.995449,37.558835],[126.99544,37.558923],[126.99544,37.558995],[126.995429,37.559183],[126.995429,37.559282],[126.99543,37.559335],[126.995429,37.559397],[126.995428,37.55949],[126.995427,37.559525],[126.995427,37.559531],[126.995427,37.559543],[126.995427,37.559546],[126.995428,37.559695],[126.995424,37.559756],[126.995421,37.559788],[126.995419,37.559862],[126.995418,37.559912],[126.995417,37.560022],[126.995417,37.560048],[126.995413,37.560176],[126.995417,37.560241],[126.995425,37.560333],[126.995398,37.560343],[126.995381,37.560349],[126.995365,37.560354],[126.995334,37.560364],[126.995329,37.560366],[126.995274,37.560383],[126.995265,37.560386],[126.99526,37.560388],[126.99513,37.560429],[126.995087,37.560443],[126.995048,37.560456],[126.994948,37.560488],[126.99449,37.560624],[126.994263,37.560678],[126.993672,37.560783],[126.993473,37.560826],[126.993438,37.560859],[126.993325,37.561104],[126.993276,37.561103],[126.993251,37.561102],[126.993214,37.561101],[126.993104,37.561099],[126.993051,37.561097],[126.992848,37.561092],[126.992664,37.561088],[126.992649,37.561087],[126.992591,37.561086],[126.992412,37.561081],[126.992366,37.56108],[126.992248,37.561077],[126.992208,37.561076],[126.992166,37.561075],[126.992064,37.561073],[126.992061,37.56074],[126.992058,37.560248],[126.992055,37.560247],[126.991864,37.560182],[126.991843,37.560158],[126.991882,37.560064],[126.991828,37.559707],[126.991822,37.559605],[126.991769,37.559507],[126.991765,37.559499],[126.991722,37.559478],[126.991549,37.559393],[126.991311,37.559578],[126.991302,37.559585],[126.99122,37.559614],[126.991124,37.559648],[126.990942,37.559713],[126.990567,37.559846],[126.990422,37.559898],[126.990409,37.559902],[126.990191,37.55998],[126.990158,37.559992],[126.990151,37.559995],[126.990137,37.56],[126.990067,37.560027],[126.989917,37.560083],[126.989831,37.560116],[126.989705,37.560229],[126.989692,37.560241],[126.989529,37.560388],[126.989497,37.560435],[126.989464,37.560481],[126.98933,37.560673],[126.989239,37.560803],[126.989057,37.561182],[126.98905,37.561221],[126.989039,37.56122],[126.98897,37.561215],[126.988922,37.561211],[126.988863,37.561204],[126.988838,37.561355],[126.98876,37.561359],[126.988749,37.561299],[126.988768,37.561195],[126.988708,37.561189],[126.988669,37.561187],[126.988522,37.561174],[126.988388,37.561164],[126.98826,37.561153],[126.988239,37.561153],[126.988247,37.561114],[126.988256,37.561074],[126.988295,37.560952],[126.988345,37.560857],[126.988399,37.560755],[126.988419,37.560612],[126.988419,37.560428],[126.988418,37.560306],[126.988409,37.560259],[126.988394,37.560218],[126.988317,37.560003],[126.988265,37.559879],[126.988228,37.559792],[126.988222,37.559778],[126.988181,37.559683],[126.988165,37.559646],[126.988156,37.559618],[126.988107,37.559475],[126.988078,37.559412],[126.988052,37.559377],[126.987788,37.559276],[126.987691,37.559239],[126.987526,37.559209],[126.987476,37.5592],[126.987435,37.559175],[126.987391,37.559112],[126.98734,37.559004],[126.987343,37.558845],[126.987343,37.558843],[126.987344,37.558674],[126.987346,37.558433],[126.987347,37.558377],[126.987348,37.558325],[126.987346,37.558285],[126.987345,37.558266],[126.987344,37.558241],[126.987393,37.558153],[126.987349,37.558082],[126.987296,37.55801],[126.98726,37.557972],[126.987222,37.557934],[126.987154,37.557848],[126.98712,37.557796],[126.987119,37.557793],[126.987091,37.557707],[126.987088,37.557673],[126.987085,37.557639],[126.987077,37.557558],[126.987068,37.557477],[126.987053,37.557431],[126.987046,37.557416],[126.987024,37.557381],[126.98697,37.557318],[126.986933,37.557286],[126.986891,37.557259],[126.986849,37.557238],[126.986794,37.557217],[126.986732,37.557204],[126.986641,37.55719],[126.986609,37.557184],[126.986575,37.557179],[126.986524,37.557168],[126.986484,37.557156],[126.986437,37.557143],[126.986404,37.557131],[126.986374,37.557121],[126.98634,37.557106],[126.986333,37.557103],[126.986293,37.557082],[126.986255,37.557047],[126.986183,37.556983],[126.986171,37.556966],[126.986103,37.556872],[126.986059,37.556812],[126.98597,37.556721],[126.985918,37.556674],[126.985854,37.556616],[126.985745,37.556595],[126.985577,37.556565],[126.985457,37.556542],[126.985279,37.556516],[126.985148,37.556476],[126.985064,37.556416],[126.98503,37.556392],[126.984939,37.556328],[126.984896,37.5563],[126.984891,37.556261],[126.984937,37.556136],[126.984939,37.55613],[126.984955,37.556065],[126.984971,37.555999],[126.984991,37.555909],[126.985004,37.555851],[126.984915,37.555841],[126.984822,37.55583],[126.984807,37.555929],[126.984794,37.556023],[126.984792,37.556041],[126.98478,37.556062],[126.984774,37.556083],[126.984775,37.556085],[126.984762,37.556084],[126.984741,37.556083],[126.984752,37.556056],[126.984734,37.556039],[126.984684,37.555994],[126.984644,37.556084],[126.984625,37.55612],[126.984611,37.556133],[126.984554,37.556186],[126.984506,37.556271],[126.984495,37.556304],[126.984447,37.556441],[126.984417,37.556527],[126.984404,37.556562],[126.984369,37.556608],[126.984363,37.556648],[126.984356,37.556701],[126.984356,37.556702],[126.984349,37.556751],[126.984354,37.556782],[126.98432,37.55685],[126.98431,37.556849],[126.984245,37.55693],[126.984223,37.556943],[126.984183,37.556965],[126.984142,37.557012],[126.98413,37.557026],[126.984052,37.557036],[126.983952,37.557068],[126.983923,37.557075],[126.983885,37.557084],[126.983883,37.557075],[126.983878,37.557075],[126.98383,37.556938],[126.983797,37.556894],[126.983739,37.556821],[126.983707,37.556779],[126.983663,37.556721],[126.983507,37.55652],[126.983483,37.556701],[126.983478,37.556805],[126.98348,37.556834],[126.983486,37.556878],[126.983496,37.55695],[126.983504,37.557078],[126.983511,37.557183],[126.98351,37.557209],[126.983547,37.557219],[126.983565,37.557225],[126.983573,37.557227],[126.983594,37.557267],[126.983657,37.557382],[126.983643,37.557381],[126.983601,37.557404],[126.983554,37.557536],[126.983558,37.557561],[126.983566,37.557575],[126.983553,37.557585],[126.983548,37.557585],[126.983543,37.557586],[126.983504,37.55759],[126.983473,37.557595],[126.983458,37.557595],[126.983386,37.557625],[126.983384,37.557625],[126.983358,37.557619],[126.983242,37.557592],[126.983228,37.557681],[126.983226,37.557688],[126.983213,37.557585],[126.983203,37.557503],[126.983186,37.557361],[126.983175,37.557272],[126.983167,37.557204],[126.983158,37.557133],[126.983147,37.557042],[126.983121,37.556826],[126.982923,37.556845],[126.982889,37.55653],[126.983082,37.556509],[126.983043,37.556187],[126.983022,37.556018],[126.982984,37.555564],[126.983028,37.555472],[126.983246,37.555016],[126.983356,37.55466],[126.983202,37.554562],[126.982936,37.554473],[126.982839,37.554442],[126.982667,37.554386],[126.982128,37.554665],[126.981866,37.554779],[126.981543,37.554868],[126.981397,37.554908],[126.98128,37.554961],[126.981185,37.555004],[126.981171,37.55501],[126.980888,37.555137],[126.980645,37.555299],[126.980469,37.555394],[126.97965,37.555837],[126.979488,37.555939],[126.979454,37.555962],[126.978985,37.556178],[126.978824,37.556183],[126.978769,37.556184],[126.978694,37.556186],[126.978542,37.556173],[126.977322,37.556068],[126.977299,37.556066],[126.976832,37.555967],[126.976789,37.555829],[126.976608,37.555464],[126.976548,37.555219]]]},properties:{CATEGORY:"",AREA_CD:"POI091",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.95873017456903,37.516563465588135],[126.96078719033969,37.51605078753191],[126.9620572429106,37.5160587520351],[126.96243629615017,37.516194767604965],[126.96253097097078,37.516406188978955],[126.9624739701889,37.516670410000984],[126.96210416350735,37.51698737885675],[126.96090958959216,37.5176136136581],[126.95916520029105,37.518337793428216],[126.95700378776215,37.518956100665115],[126.95575250527685,37.51918212910444],[126.95527866046953,37.51905360598532],[126.9550038998621,37.51886475948688],[126.95493766010748,37.51868354176883],[126.95500425799227,37.51826833440575],[126.95523189084116,37.518011731551454],[126.95873017456903,37.516563465588135]]]},properties:{CATEGORY:"",AREA_CD:"POI092",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.05909892372942,37.53330083662747],[127.05868854808345,37.532447708004284],[127.06174429542868,37.53091516934276],[127.06341394847367,37.53016134321048],[127.06543020303751,37.52938220382228],[127.06624928544403,37.529055472516355],[127.068234172647,37.52850218522453],[127.06946286548803,37.52812499811333],[127.07292876552509,37.527495457325806],[127.07683566326459,37.526740038399105],[127.07900983224802,37.52651272136764],[127.08049089171948,37.526461525149635],[127.08149949976908,37.526636519878764],[127.08742419666395,37.52683306730816],[127.088054578259,37.52693299123082],[127.08903199519125,37.527358925427514],[127.0884026453536,37.52813743789031],[127.08723616975271,37.527736736399184],[127.08606982195813,37.52743641548776],[127.08484062742266,37.52728671654817],[127.0833594429999,37.527237575169956],[127.08115356255246,37.527289307639755],[127.07992478182389,37.52751602811524],[127.07816047244314,37.52794387587896],[127.0746006540079,37.5291759827614],[127.07145009814056,37.53008146063194],[127.06662953125121,37.53138937704731],[127.06549522860331,37.531666090023414],[127.06420312568864,37.531691897574525],[127.05909892372942,37.53330083662747]]]},properties:{CATEGORY:"",AREA_CD:"POI093",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.89606075024136,37.56050118241026],[126.89357144714066,37.559545243999374],[126.8927842807488,37.55884179012381],[126.89234334115075,37.55854021385972],[126.89193411272068,37.558113175356915],[126.89184004161773,37.557761718303695],[126.89187200299409,37.55746057249141],[126.89190400036512,37.55713432876199],[126.89209377111358,37.556707837591475],[126.89263021280082,37.556356955630875],[126.90711326541683,37.54605397853767],[126.90865618432989,37.547385374757674],[126.90941194887063,37.54801340621385],[126.9101679670515,37.54844064923658],[126.90682626275975,37.548714137293274],[126.90550191074429,37.54903935838361],[126.90323024521464,37.55061868997359],[126.8969819538975,37.555482405122305],[126.89612955355666,37.556360085946466],[126.89587333257046,37.559246121515],[126.89606075024136,37.56050118241026]]]},properties:{CATEGORY:"",AREA_CD:"POI094",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00504801992258,37.51737823982686],[127.00476442718627,37.51722766296347],[127.00470139151234,37.51695158629995],[127.00466984178846,37.51629903668882],[127.00463831746819,37.516048056810654],[127.00328338150818,37.51461750965629],[127.00236963926385,37.51436655032985],[127.00129835423016,37.51356342707698],[126.99956543713218,37.513061470928555],[126.99821062322863,37.51283557504225],[126.99717090405795,37.51223319965452],[126.99452444708102,37.51035074666077],[126.99313820726363,37.509949104064404],[126.99276016779659,37.50959770754918],[126.98942074051256,37.50814176337102],[126.98683745107896,37.507288166733495],[126.98564033807662,37.506886456865445],[126.98453766906256,37.50688631767515],[126.98428568830222,37.50661020475118],[126.9820489498666,37.50620831556685],[126.98170238151107,37.506283556854136],[126.98082025341135,37.506283416919445],[126.98025368668648,37.50432566724803],[126.98107278424379,37.50432580132872],[126.9828054445842,37.50452685153371],[126.98806644165083,37.50543103391067],[126.99335895687081,37.507614989336695],[126.99628886992213,37.5089202212995],[126.99893533068985,37.510099887399114],[127.00249557923456,37.51160575391761],[127.00378740424435,37.51250925222512],[127.00744256514149,37.51579693227016],[127.00504801992258,37.51737823982686]]]},properties:{CATEGORY:"",AREA_CD:"POI095",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.036998,37.620361],[127.036822,37.619961],[127.036816,37.619946],[127.03686,37.619806],[127.03684,37.619769],[127.036789,37.619677],[127.036778,37.619659],[127.036573,37.619329],[127.036346,37.618985],[127.036245,37.618839],[127.036157,37.618712],[127.036142,37.618688],[127.036036,37.618535],[127.035934,37.618378],[127.03593,37.618371],[127.036653,37.618138],[127.037293,37.617932],[127.037216,37.61735],[127.037176,37.617048],[127.037255,37.616948],[127.037283,37.616925],[127.037381,37.616812],[127.037376,37.616706],[127.037665,37.616536],[127.037676,37.616548],[127.037713,37.616593],[127.03777,37.616665],[127.037804,37.616693],[127.037847,37.616655],[127.037891,37.616614],[127.037894,37.616611],[127.037934,37.616574],[127.037967,37.616541],[127.037983,37.616518],[127.037985,37.616512],[127.037986,37.61651],[127.037988,37.616501],[127.03799,37.616473],[127.037983,37.616346],[127.037983,37.616344],[127.037981,37.61622],[127.037977,37.616108],[127.037975,37.616011],[127.037975,37.616008],[127.037979,37.615941],[127.037979,37.615938],[127.03798,37.61591],[127.03798,37.615868],[127.037977,37.615804],[127.037977,37.615802],[127.037975,37.615726],[127.037972,37.615631],[127.037971,37.615614],[127.037966,37.615421],[127.037966,37.615419],[127.037967,37.615268],[127.037967,37.615266],[127.037962,37.615118],[127.037962,37.615086],[127.037962,37.615084],[127.038036,37.615085],[127.038097,37.615084],[127.038139,37.615084],[127.038169,37.615101],[127.038173,37.615103],[127.038192,37.615114],[127.038237,37.615112],[127.038334,37.615111],[127.038357,37.615111],[127.038363,37.615111],[127.03837,37.615113],[127.038373,37.615116],[127.038373,37.615122],[127.038374,37.615166],[127.038376,37.615195],[127.038382,37.615254],[127.038387,37.61527],[127.038398,37.615287],[127.038451,37.615347],[127.038561,37.615465],[127.038648,37.615552],[127.038778,37.61567],[127.038853,37.615733],[127.038883,37.615757],[127.038991,37.615697],[127.039138,37.615877],[127.039143,37.615879],[127.039151,37.615888],[127.039265,37.615829],[127.03925,37.61581],[127.039272,37.615786],[127.039323,37.615731],[127.039467,37.615703],[127.039571,37.615662],[127.039598,37.615665],[127.039633,37.615668],[127.039699,37.615676],[127.039709,37.615677],[127.039713,37.615672],[127.039762,37.615613],[127.039816,37.615601],[127.039835,37.615597],[127.039842,37.615595],[127.039843,37.615593],[127.039851,37.61559],[127.039966,37.615687],[127.039985,37.615761],[127.039989,37.615848],[127.039995,37.616013],[127.039996,37.616044],[127.039993,37.616109],[127.039986,37.616185],[127.040041,37.616247],[127.040072,37.616195],[127.040372,37.616081],[127.040409,37.616067],[127.040558,37.616107],[127.040942,37.616514],[127.040981,37.616556],[127.040996,37.616575],[127.041121,37.616651],[127.041157,37.616673],[127.041344,37.616808],[127.04139,37.616841],[127.041428,37.616869],[127.041446,37.616876],[127.041472,37.616886],[127.041526,37.616904],[127.041856,37.617132],[127.042089,37.617311],[127.042198,37.617395],[127.042339,37.617503],[127.042378,37.617531],[127.042495,37.617614],[127.042578,37.617672],[127.042696,37.617756],[127.042875,37.617883],[127.043028,37.617991],[127.043054,37.61801],[127.043136,37.618068],[127.043302,37.618185],[127.043566,37.618373],[127.043616,37.618408],[127.043677,37.618451],[127.043732,37.61849],[127.043776,37.618521],[127.043912,37.618618],[127.043944,37.618641],[127.043949,37.618644],[127.043968,37.618665],[127.044023,37.618726],[127.044531,37.619281],[127.044571,37.619324],[127.044572,37.619326],[127.044605,37.619362],[127.044679,37.619442],[127.044734,37.619546],[127.044747,37.61957],[127.044845,37.619754],[127.044899,37.619856],[127.044977,37.620001],[127.045028,37.620097],[127.04505,37.620138],[127.045056,37.620149],[127.045212,37.620448],[127.045214,37.620447],[127.045225,37.620467],[127.045223,37.620468],[127.045368,37.620735],[127.045517,37.621014],[127.045552,37.621078],[127.045576,37.621123],[127.045585,37.62114],[127.045622,37.621208],[127.045627,37.621218],[127.045659,37.621278],[127.045678,37.621313],[127.0457,37.621354],[127.045703,37.621359],[127.045723,37.621388],[127.045787,37.621474],[127.045887,37.621609],[127.046069,37.621859],[127.04608,37.621875],[127.046097,37.621891],[127.046303,37.622095],[127.046324,37.622116],[127.046339,37.622131],[127.046434,37.622227],[127.046424,37.622232],[127.046418,37.622241],[127.046323,37.622383],[127.04627,37.622461],[127.046211,37.622614],[127.046172,37.62279],[127.046139,37.622952],[127.046118,37.623053],[127.04608,37.623154],[127.046009,37.623292],[127.045864,37.623574],[127.045702,37.623916],[127.045665,37.62397],[127.045618,37.624046],[127.04556,37.624127],[127.04543,37.624311],[127.045347,37.624277],[127.045319,37.624265],[127.045284,37.624243],[127.045257,37.62423],[127.045217,37.624213],[127.045207,37.624247],[127.045204,37.624261],[127.045203,37.624264],[127.04518,37.624346],[127.044964,37.624435],[127.044642,37.624551],[127.044439,37.624624],[127.04393,37.624809],[127.043949,37.624841],[127.044196,37.624963],[127.044215,37.62497],[127.04425,37.624981],[127.044302,37.625003],[127.044314,37.625051],[127.044327,37.625068],[127.044368,37.625107],[127.044415,37.625133],[127.044469,37.625068],[127.044736,37.625137],[127.044812,37.625157],[127.044714,37.625267],[127.044615,37.625377],[127.044555,37.625451],[127.044495,37.625525],[127.044428,37.625607],[127.044369,37.625694],[127.044312,37.625792],[127.044301,37.62581],[127.044295,37.625824],[127.044252,37.625914],[127.044201,37.626023],[127.044102,37.626272],[127.044067,37.626403],[127.044061,37.626443],[127.044063,37.626468],[127.044064,37.626579],[127.044004,37.626624],[127.043536,37.626979],[127.043132,37.627285],[127.043155,37.627314],[127.043207,37.627382],[127.043126,37.627445],[127.043078,37.62747],[127.043168,37.627664],[127.043213,37.627723],[127.043227,37.627741],[127.043263,37.627754],[127.043434,37.627813],[127.043485,37.62787],[127.043519,37.62791],[127.043621,37.627997],[127.043763,37.628119],[127.043816,37.628086],[127.043953,37.627967],[127.04402,37.627903],[127.044085,37.627837],[127.044156,37.627931],[127.044768,37.628731],[127.044749,37.628743],[127.044619,37.628818],[127.044461,37.628909],[127.044439,37.628921],[127.044406,37.628938],[127.044321,37.629005],[127.044173,37.629125],[127.043909,37.629337],[127.043844,37.629389],[127.043722,37.629523],[127.042952,37.628936],[127.043132,37.628445],[127.042941,37.628436],[127.042893,37.628432],[127.042781,37.628409],[127.042761,37.628401],[127.042587,37.628335],[127.042365,37.628254],[127.042333,37.62824],[127.042295,37.628218],[127.042108,37.628078],[127.042081,37.628059],[127.042037,37.628028],[127.041872,37.627912],[127.041707,37.62779],[127.041448,37.62761],[127.041285,37.627499],[127.041223,37.627456],[127.041206,37.627445],[127.041159,37.627424],[127.041053,37.627414],[127.040951,37.627404],[127.040856,37.627393],[127.040794,37.627382],[127.040741,37.627365],[127.040696,37.62735],[127.040623,37.62732],[127.040664,37.627242],[127.040708,37.627159],[127.040949,37.627088],[127.041018,37.627059],[127.041244,37.626847],[127.041302,37.626807],[127.04134,37.626854],[127.041389,37.626883],[127.041491,37.626856],[127.041502,37.626852],[127.041521,37.626845],[127.041538,37.626833],[127.041594,37.626822],[127.041895,37.626736],[127.042306,37.626558],[127.042306,37.626552],[127.042278,37.626495],[127.042077,37.626196],[127.042002,37.626107],[127.041897,37.626128],[127.041781,37.626145],[127.041617,37.62617],[127.041499,37.626197],[127.04145,37.626202],[127.041346,37.626208],[127.041274,37.626309],[127.041232,37.626322],[127.041211,37.626347],[127.041211,37.626366],[127.041224,37.626384],[127.041237,37.626404],[127.041179,37.626424],[127.041115,37.626445],[127.041101,37.626446],[127.041089,37.626445],[127.041054,37.626426],[127.041032,37.626413],[127.041,37.62641],[127.040917,37.626438],[127.040805,37.626509],[127.040631,37.626649],[127.040502,37.626734],[127.040493,37.626736],[127.040378,37.626699],[127.040371,37.62668],[127.040359,37.62667],[127.040278,37.626627],[127.04019,37.626602],[127.040196,37.62658],[127.040188,37.626534],[127.04013,37.626507],[127.040101,37.626493],[127.039961,37.626514],[127.03995,37.626473],[127.039926,37.626431],[127.0399,37.626385],[127.039778,37.626263],[127.039756,37.626214],[127.039642,37.626169],[127.039599,37.626152],[127.039549,37.626086],[127.039536,37.626068],[127.039519,37.626043],[127.039346,37.625659],[127.039332,37.625637],[127.039326,37.625621],[127.039309,37.625569],[127.03929,37.625497],[127.039286,37.625477],[127.039285,37.62546],[127.039282,37.625444],[127.039254,37.625377],[127.039239,37.625352],[127.039205,37.625321],[127.039188,37.625307],[127.039161,37.625307],[127.039093,37.625327],[127.038945,37.625369],[127.038931,37.625372],[127.038829,37.625404],[127.038911,37.625556],[127.038941,37.625638],[127.039023,37.625789],[127.039063,37.625863],[127.039067,37.625942],[127.039049,37.626008],[127.039045,37.626222],[127.039042,37.626411],[127.039042,37.626412],[127.039055,37.626478],[127.039055,37.626479],[127.039071,37.626509],[127.039092,37.626547],[127.039092,37.626598],[127.039145,37.626644],[127.03921,37.62669],[127.039421,37.626782],[127.039501,37.62681],[127.039603,37.6268],[127.039683,37.62679],[127.039723,37.626787],[127.039754,37.62678],[127.039827,37.626784],[127.039868,37.626786],[127.039825,37.62684],[127.039906,37.627074],[127.039803,37.627041],[127.039795,37.627045],[127.039323,37.626888],[127.038967,37.626771],[127.038937,37.626761],[127.038806,37.626718],[127.038586,37.626628],[127.038312,37.626517],[127.038076,37.626338],[127.037991,37.626238],[127.037839,37.626058],[127.037776,37.625968],[127.037548,37.625639],[127.037465,37.625547],[127.037306,37.625433],[127.037085,37.625377],[127.037094,37.625353],[127.03712,37.625286],[127.037173,37.625146],[127.037214,37.625042],[127.037265,37.624912],[127.037276,37.624884],[127.037366,37.624658],[127.03738,37.62462],[127.037382,37.624616],[127.037392,37.62459],[127.037473,37.624387],[127.037481,37.624366],[127.037522,37.624156],[127.037523,37.62415],[127.037527,37.624129],[127.037536,37.624134],[127.037767,37.624249],[127.037862,37.624304],[127.038019,37.624319],[127.038391,37.624187],[127.038594,37.624095],[127.03877,37.623916],[127.038127,37.623695],[127.037645,37.62353],[127.037642,37.623529],[127.037646,37.623502],[127.037646,37.6235],[127.037646,37.623497],[127.037647,37.623495],[127.037669,37.623345],[127.037673,37.623315],[127.037669,37.623242],[127.037661,37.623103],[127.037665,37.623101],[127.037722,37.623069],[127.037772,37.623041],[127.037769,37.622869],[127.037816,37.62288],[127.037808,37.62283],[127.037806,37.622804],[127.037794,37.622754],[127.037786,37.622658],[127.037822,37.622666],[127.0378,37.622624],[127.037763,37.622614],[127.037762,37.622549],[127.037741,37.622509],[127.037733,37.622493],[127.037643,37.622271],[127.037626,37.622103],[127.037623,37.622074],[127.037621,37.622059],[127.037624,37.622028],[127.037626,37.621999],[127.03764,37.621872],[127.037628,37.621746],[127.037626,37.621726],[127.037619,37.621624],[127.037621,37.6216],[127.03758,37.621432],[127.037572,37.6214],[127.037571,37.621398],[127.03757,37.621397],[127.037489,37.621287],[127.037486,37.621284],[127.037399,37.621271],[127.037317,37.621083],[127.037241,37.620909],[127.037171,37.620747],[127.037167,37.620738],[127.037092,37.620619],[127.037083,37.620599],[127.037082,37.620597],[127.037076,37.620578],[127.036998,37.620361]],[[127.043173,37.626137],[127.043186,37.626146],[127.043361,37.626258],[127.0434,37.626282],[127.04355,37.626082],[127.043579,37.626042],[127.043681,37.626032],[127.043695,37.626009],[127.043746,37.625927],[127.043751,37.625928],[127.043767,37.625897],[127.043765,37.625896],[127.04378,37.625872],[127.043789,37.62587],[127.043767,37.625807],[127.043746,37.625811],[127.043719,37.625739],[127.043727,37.625714],[127.043731,37.625701],[127.04365,37.625673],[127.043549,37.625675],[127.043447,37.625666],[127.043328,37.625612],[127.043237,37.625597],[127.043124,37.625498],[127.042921,37.625484],[127.042867,37.625435],[127.042827,37.625388],[127.042725,37.625374],[127.04264,37.625329],[127.042632,37.625402],[127.042634,37.625414],[127.042665,37.625462],[127.042631,37.625511],[127.042626,37.625562],[127.042643,37.625739],[127.042732,37.625758],[127.042791,37.625853],[127.042748,37.62589],[127.042734,37.625939],[127.042766,37.626001],[127.042789,37.626057],[127.042814,37.626129],[127.042943,37.626135],[127.042966,37.626128],[127.043093,37.626137],[127.043173,37.626137]]]},properties:{CATEGORY:"",AREA_CD:"POI096",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.91741734060581,37.59933564826624],[126.9174423232928,37.59943484496735],[126.91742228783652,37.59943050192325],[126.91714514664123,37.599370424793115],[126.9168515059204,37.59931129922944],[126.9167565429061,37.59929217527662],[126.91642881444956,37.59922618571383],[126.9163311089421,37.59920632275506],[126.91590594342655,37.59911988802501],[126.91567542099828,37.59907303164179],[126.91467776561795,37.59886045364794],[126.91466681692278,37.59885812151111],[126.91428953723704,37.59738903390916],[126.91390574422118,37.5958945234279],[126.9135781114623,37.5946186555827],[126.91325239461827,37.59335020450484],[126.91319884055197,37.59321612449782],[126.91310967856421,37.59317469507495],[126.91306835806662,37.59314857161868],[126.91306832596827,37.593148614448054],[126.91306282873256,37.59314737125902],[126.91291977400564,37.59222981315497],[126.91275625537185,37.59180255966061],[126.91275380736084,37.59179975177703],[126.91261514430876,37.59170353606943],[126.91230203964852,37.59128443584006],[126.91183274142583,37.590357229246926],[126.91177719546381,37.58997396798949],[126.91182228827348,37.58972446322675],[126.91156323956491,37.58902633317908],[126.91154316399145,37.58899346312127],[126.91199165475655,37.58890719394207],[126.91198935719382,37.5889011860745],[126.91199412077432,37.588900259753935],[126.91199511737345,37.588900062293085],[126.91233863646235,37.58883327102927],[126.91243261062299,37.58881499793771],[126.91252010117095,37.588793278121095],[126.91247618802107,37.5887407175904],[126.91237208112614,37.58861607786317],[126.91227109042906,37.588489566349246],[126.91225617747357,37.58847191378995],[126.91225453807456,37.588469966422934],[126.91217797224999,37.58837929645217],[126.91211958697643,37.58831015571954],[126.91197775250461,37.588140942364205],[126.9119743946208,37.58813693043424],[126.9118645803501,37.58800592368815],[126.91226401070054,37.58779444960234],[126.9118217429155,37.587162489350696],[126.91093698474248,37.586104210768184],[126.90973883612045,37.584937966378874],[126.9072948785486,37.58266166127989],[126.90535386188006,37.58077879375289],[126.90293595378625,37.57844488268289],[126.90190890549846,37.57799116100674],[126.90256537516409,37.57739901940922],[126.90256434614138,37.57739801630813],[126.90345203835119,37.576616942477756],[126.90387886551346,37.57711330778789],[126.90420011860584,37.57684598386909],[126.9042006172339,37.576845578836185],[126.9042114321248,37.5768365333748],[126.90711079775328,37.579595902093985],[126.90710573333362,37.5795992349726],[126.90708704399555,37.57961152749559],[126.90707664186803,37.57961841788607],[126.9097583808884,37.57786395832039],[126.91320716364302,37.58236252755724],[126.916381896889,37.58690361782603],[126.91719612280824,37.590192677760456],[126.9183343607729,37.59496562585579],[126.91905970883529,37.596006621793755],[126.91754674493154,37.59672921177906],[126.91677705353086,37.59686140974856],[126.91741734060581,37.59933564826624]]]},properties:{CATEGORY:"",AREA_CD:"POI097",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00219850975229,37.4933638729022],[127.00173341725755,37.49351211416262],[127.00169219275371,37.49354273106918],[127.00152898181746,37.49346506855853],[127.00132748068648,37.49343223052232],[127.00119009261833,37.493344657393685],[127.00079167036806,37.4932169477852],[127.00065899586039,37.49326593814481],[127.00054275671927,37.493235479527954],[127.00049522999238,37.493223089478555],[127.00034891826034,37.49326228071391],[127.00028777529837,37.49327827374138],[127.00027708032646,37.49327832678871],[127.00021936391929,37.49327685934165],[127.00014360116401,37.493344965059826],[127.00004951806328,37.49342923353753],[127.00002600630158,37.493450290508896],[126.99989344301524,37.49354766881663],[126.99979146750543,37.49358637432124],[126.99975498818532,37.4935873910118],[126.9996322634465,37.49358985785792],[126.99955082395866,37.49358848701164],[126.99858474195968,37.4935670916732],[126.99853420695874,37.49356693723856],[126.99851136485988,37.49357043253885],[126.99816511427396,37.49357932420186],[126.99817868579223,37.493558989922676],[126.99820675310204,37.49350833740704],[126.99866697973435,37.49276490652344],[126.99884439293791,37.49245312415939],[126.9980269946363,37.491983334985434],[126.99786241509634,37.491888751139555],[126.99783552334867,37.49184063149831],[126.99779670981304,37.49172782507996],[126.99773497360889,37.49168243884757],[126.99771773170416,37.49166112153457],[126.99737688550486,37.491225078306755],[126.99730921428372,37.49114572573753],[126.99723988235296,37.4910624717378],[126.99719004225109,37.491002489443225],[126.99717630564122,37.49098712778802],[126.99681320085038,37.49055810175717],[126.99674493271664,37.49047791901081],[126.99672454694431,37.49045392454984],[126.99671785234732,37.49044559092706],[126.99671526321573,37.49044137414081],[126.99732103199547,37.48950413253997],[126.99731964123735,37.48950344773033],[126.99734918898082,37.489450677184],[126.99736471386369,37.489450902980565],[126.99755185013099,37.48945746869027],[126.99769342840003,37.48946131251828],[126.99783424905735,37.48946593732035],[126.99798053221546,37.4894719415497],[126.99812733998378,37.48947952146269],[126.99827285757354,37.48948818776426],[126.99841664184437,37.489495534776644],[126.99855787979337,37.48950158320874],[126.99877136104381,37.489510869565656],[126.99900937917997,37.4895197776398],[126.99913708470741,37.48952421230096],[126.99931496969745,37.489530405621274],[126.99938197551582,37.48953262331149],[126.99957452833624,37.48953999771652],[126.99959820337668,37.489369734259064],[126.99960904761822,37.48930275406486],[126.99962620462833,37.48919280616108],[126.99966671355934,37.488933424992865],[126.99972116374147,37.48858789755126],[126.99973255175911,37.48851563658097],[126.999733399796,37.488515574424746],[126.99974994479567,37.488402769406235],[126.9997451620026,37.48839770481061],[126.9996851102245,37.48833732064052],[126.99961690859081,37.48826873450044],[126.99947254232855,37.488123914269394],[126.99939156445294,37.488042669617705],[126.99933429695766,37.48798516581468],[126.99935713707428,37.48795082910095],[126.99943259219599,37.48783735032828],[126.99951040919183,37.48772140190254],[126.99961451683855,37.48756672884056],[126.99963075542176,37.487542600302724],[126.9996911245346,37.48745168127167],[126.99970783757529,37.48739664750523],[126.99983233828227,37.48695845755002],[126.99987487803958,37.486812918592086],[126.99988372000257,37.48681379358634],[126.99998600823925,37.4864553849398],[127.00007521496528,37.4861415863803],[126.99969985880736,37.48583187115275],[126.99958450140451,37.48573639028365],[126.99946512701742,37.485748202842586],[126.99941305952017,37.48575335508457],[126.99930567768774,37.485763980778636],[126.99929717147806,37.48575356202023],[126.99836467311177,37.48585701962274],[126.99835681411358,37.48576305582292],[126.99835601414881,37.48575349126622],[126.99856615880374,37.48556510655281],[126.99903322772026,37.485316982953414],[126.99914312800624,37.48506885544567],[126.99927134170254,37.48502506894829],[126.9993058597046,37.48496088796516],[126.99935376579111,37.48487181367232],[126.99939856464431,37.48487181390898],[126.99938949678031,37.484717473670266],[126.99944922666221,37.48469269719952],[126.99948815928724,37.48462358117723],[126.99951016438082,37.48452846286336],[126.99945885524508,37.48448961171302],[126.99935954090803,37.48441157423265],[126.99934476359567,37.48440086105829],[126.99923321622627,37.48434775304645],[126.99922219133778,37.48434479845013],[126.99910319193955,37.48432944211927],[126.99894346501918,37.484325933855246],[126.99891998028686,37.484325510772095],[126.99888905848658,37.484282722444],[126.99891352715372,37.48427499149435],[126.99904264978886,37.48423630437594],[126.99918124158239,37.48419415836009],[126.99931059011,37.48415411134202],[126.99942915314442,37.48411794730724],[126.99949540848849,37.484098496743776],[126.99956762350172,37.484076621647276],[126.99965082930544,37.48405140705531],[126.99948855677617,37.4838049002477],[126.99946515283571,37.48376934736954],[126.99913399071454,37.48326627553706],[126.99913399164076,37.483185998689194],[126.9992466322107,37.48323620623239],[126.99979035191842,37.48338191659672],[126.99993072533152,37.48341953448999],[127.0003428302917,37.483404938223885],[127.00077324958426,37.483266276184644],[127.00134103287587,37.483003546872375],[127.00138681761727,37.48276271578629],[127.00184470646802,37.48269702846275],[127.00214691641693,37.482784598108935],[127.00217703929069,37.48304378719365],[127.00217837450418,37.48304370835164],[127.00227161601215,37.483559784936006],[127.00228232603261,37.48361907976152],[127.00229020830636,37.48367542022083],[127.00229233074819,37.48369752086704],[127.00233715415521,37.48392815796287],[127.00239333522887,37.48396797370431],[127.0024554251818,37.48428767507765],[127.00193600338743,37.48516878330857],[127.0018720796981,37.485211167873814],[127.00164956864845,37.48535347063468],[127.00150026415585,37.48542432542845],[127.00156228132556,37.48553321229141],[127.00186667000258,37.48580850271345],[127.00197282023058,37.485870166854866],[127.00243921304876,37.48614214927643],[127.00250782398226,37.48616134003934],[127.00257478458039,37.486210318767355],[127.00282522913443,37.486289477293504],[127.00318087692021,37.48640018780306],[127.00318243747338,37.48640973028112],[127.00320463178569,37.48641648747236],[127.00322623012504,37.486468131629174],[127.00312752219394,37.486500660048016],[127.00305409610118,37.486524852899095],[127.00304638488882,37.48652739382156],[127.00301560863797,37.486632278821155],[127.00303051307073,37.48673122653989],[127.00304789361638,37.486768230418626],[127.00301353211027,37.48733910493535],[127.00343735474463,37.48735458340165],[127.00341754043515,37.48771201159212],[127.00371163799348,37.48778111234146],[127.00376252188236,37.48778111138495],[127.00392181016247,37.487656247578954],[127.00391742149327,37.48764316423765],[127.00386845870719,37.4874972950158],[127.0037847003204,37.48724780865816],[127.00397528847846,37.4872287135406],[127.00417698105286,37.4872086438842],[127.0041815750791,37.487237884039374],[127.0042510497978,37.48722914023298],[127.00441803874406,37.4885960989562],[127.00368548897866,37.48872173704726],[127.00419558350895,37.49026602045059],[127.00424198477877,37.49090147243569],[127.004117905002,37.49115158445336],[127.00412220838602,37.491158973345584],[127.00396944166364,37.49144687227697],[127.00386010263573,37.49165198716058],[127.00384925993976,37.49165754744648],[127.00367271901548,37.49182558730657],[127.0035460005588,37.491944175379125],[127.00251754203869,37.492875458683216],[127.00266450554012,37.492992551974716],[127.00321375212518,37.49356276642787],[127.00406257440427,37.49389426823922],[127.00476160544515,37.494093158895055],[127.00497799174606,37.49443793901144],[127.00544402376259,37.49466335743009],[127.00522769475349,37.49518055069583],[127.00489483438666,37.49535295944381],[127.00477834510629,37.49560492537898],[127.00509461457256,37.4961884011396],[127.00529434490885,37.49625469791965],[127.00588009493804,37.49605123064934],[127.00588119509986,37.49604913847688],[127.00594880989374,37.496023899465975],[127.00604463445231,37.496052022631204],[127.00686895924689,37.49578925391669],[127.0068975761412,37.4957253965972],[127.0069376405669,37.495635994427964],[127.00804066818283,37.49593195117515],[127.00986762992247,37.49642212109774],[127.00969933407266,37.49671953503493],[127.01016702073018,37.49729830773792],[127.01016263870675,37.497302217979886],[127.01029023433003,37.49753319844307],[127.01034523630351,37.4978543002413],[127.0102719890788,37.49807324294225],[127.0101803982379,37.49811703813137],[127.00970409089744,37.498087886708994],[127.00977734930973,37.4979419231303],[127.00945534090734,37.49793339746206],[127.0088413214075,37.49848145790206],[127.00880858460023,37.49851066941357],[127.00879255471855,37.49853837558808],[127.00873779819216,37.49854772835271],[127.00794102283513,37.499697199997634],[127.00725207946904,37.50119282724738],[127.00696566915488,37.501561868262414],[127.00687415040481,37.50245951187754],[127.00656276635509,37.50318201881366],[127.00649864297102,37.50316742661738],[127.00655351865964,37.502182210978624],[127.00710293176795,37.50009498752587],[127.00706416035594,37.499980288031175],[127.0070386885858,37.49997833376684],[127.00700671231479,37.499664418668935],[127.00649830426302,37.499259415657825],[127.0064454161336,37.49767283385259],[127.00531285018084,37.497311952432966],[127.00531106386299,37.4973155860554],[127.00481174307083,37.49732886855689],[127.00442890702989,37.49694431133035],[127.00276449316712,37.49649348421789],[127.00253147313424,37.4963210949852],[127.00256475626685,37.49618848314452],[127.00279776854269,37.49616195563168],[127.00299746921479,37.49553867841403],[127.00211534959868,37.495339780788505],[127.00233169434493,37.494623676499195],[127.00234832119182,37.4940932315079],[127.00219852452533,37.49386779539435],[127.00219850975229,37.4933638729022]]]},properties:{CATEGORY:"",AREA_CD:"POI098",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97856975536918,37.56616512574096],[126.97763392284885,37.566163690413184],[126.97753057938037,37.56616369041297],[126.97743728319372,37.566211056169074],[126.97734685765884,37.56621823279865],[126.9773468576586,37.5661623756587],[126.97734451161521,37.56613896523608],[126.97740182106614,37.565914878570865],[126.97741578768301,37.565780391754],[126.9774169321714,37.56576936388693],[126.97742122346052,37.56544504488942],[126.97738904830163,37.56530961971929],[126.97738951816615,37.56527410013798],[126.97739226913762,37.565247917968506],[126.97740438794635,37.56521326931963],[126.9774311938456,37.5651717851622],[126.97746176444059,37.56514399769502],[126.97751165610201,37.56511602764523],[126.97754491403269,37.56510487565748],[126.9775818514787,37.56509783922186],[126.97762368627552,37.56509511229401],[126.97778523146808,37.565087524314244],[126.97800590525885,37.565077158442115],[126.9780764409565,37.565074106403024],[126.97822706956354,37.56506890146891],[126.97828405565708,37.565073054541955],[126.97832705228122,37.565083100009716],[126.97837460860961,37.56510244275736],[126.97840389487912,37.56511993218063],[126.97843687258494,37.56514715840239],[126.97846362915055,37.56517935145198],[126.97847815225155,37.565204891911044],[126.97849738280767,37.5652488621091],[126.97851537706234,37.56529018676008],[126.97854422627829,37.56535642856094],[126.97855850515474,37.565388698446284],[126.97862578275947,37.56554371219512],[126.9786862697574,37.56568261040684],[126.97872896493381,37.56578065162447],[126.97876862001148,37.56587389864648],[126.97883385534345,37.56600436923531],[126.97865443959992,37.56608474748804],[126.97856975536918,37.56616512574096]]]},properties:{CATEGORY:"",AREA_CD:"POI099",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.00189816802721,37.43726113578532],[127.00137809113866,37.43647783137528],[127.00316927460011,37.43352885813382],[127.00253360740564,37.43154755439154],[127.00374697601879,37.431178904581465],[127.00536497853523,37.433436624509966],[127.00732947833572,37.432607129712224],[127.00669387341094,37.432468935851176],[127.00553812359951,37.43071806223342],[127.00600036115902,37.430718039673685],[127.00617366240336,37.43025725871189],[127.00854276197737,37.43154727285533],[127.00923601273611,37.4306256767416],[127.00929370691394,37.429934514139916],[127.01079598315901,37.43007261810659],[127.010622541393,37.42933539846328],[127.01108470930046,37.428920661100484],[127.01085346966192,37.428045215391045],[127.01148895328802,37.42758438309178],[127.01258679113978,37.42799896631768],[127.01264446025202,37.427353879005814],[127.01310666105284,37.42726167420673],[127.01547543421015,37.42684669276707],[127.0156486396911,37.426247665921096],[127.01524410312523,37.425740869155824],[127.0141463876342,37.42587923733319],[127.01316422026252,37.42601758250356],[127.01287523728193,37.42541861020058],[127.0131639782475,37.42463526521451],[127.01437718316286,37.424266505886656],[127.01535934425144,37.424220305106],[127.01697706704599,37.424358315607996],[127.01784367818871,37.424312110725516],[127.01830565199514,37.42339049498995],[127.01766993159592,37.42251512373972],[127.01651444357374,37.42242313627056],[127.01657205442086,37.421685891900665],[127.01870961184345,37.421547341112685],[127.01905613095106,37.421086513015446],[127.0186514506416,37.41998072281056],[127.01876686704291,37.419473854385025],[127.01997994896033,37.41905895997503],[127.01997980206723,37.41850603246489],[127.01899741584937,37.417354261875666],[127.01928592032993,37.41601797314433],[127.02015231048965,37.41551097813683],[127.02182759607555,37.41555675802393],[127.02344520178713,37.41587898953211],[127.02413870222094,37.4167543189269],[127.02477420632414,37.416892419391836],[127.02627613766417,37.41670778587918],[127.02604531726425,37.41744507387355],[127.03032025948714,37.4174440547883],[127.03037815925201,37.41776658104446],[127.02968508609995,37.41818145280239],[127.02685474824054,37.41928798466964],[127.02650852884092,37.4204399949478],[127.02529546070537,37.420854956246664],[127.02546907354125,37.42173038718684],[127.0258157576939,37.42186854380032],[127.02639345423812,37.4217762616949],[127.02726014672257,37.42205252863734],[127.02830014795542,37.422282670584295],[127.02945563011711,37.42232846559353],[127.02910932957373,37.423204019361584],[127.02760717397557,37.423112225183466],[127.02668318488966,37.424218291491336],[127.02558559112656,37.42458715214145],[127.02518152120257,37.42564701553131],[127.0244305706423,37.42606186826095],[127.02454630337972,37.426614771108476],[127.02425762882474,37.42725991192471],[127.02327541927045,37.42726010939691],[127.02281328689452,37.42753666284711],[127.02194682996513,37.42822798523532],[127.02032907710984,37.42832042895391],[127.01871150375564,37.42915008596846],[127.01871152669227,37.429242240391424],[127.01998270394877,37.42942634119054],[127.02044504631792,37.429840957018115],[127.02108079639963,37.43048592622992],[127.02321859566203,37.43034729404466],[127.02420041539807,37.42901085805508],[127.02552892692196,37.42785864814603],[127.02604890838283,37.42781245748447],[127.02708885278174,37.4276739920787],[127.02824429589936,37.42739725830419],[127.02853328650102,37.42767365225544],[127.02853353132475,37.42831873330179],[127.02818695063647,37.42854920254252],[127.02743583635598,37.428549379256175],[127.02662712356137,37.42905641355815],[127.02576073157843,37.42988599532952],[127.02535646472646,37.430439009200114],[127.02420102355362,37.43090002341475],[127.02292983917796,37.430808122431166],[127.0215437984059,37.43315831992281],[127.02264166204974,37.43320419191392],[127.02668665218548,37.43398665994134],[127.02680257805636,37.43500033147935],[127.02472263322359,37.43573801943696],[127.02356689000511,37.435507869701034],[127.02281566420238,37.43536978559731],[127.02223789970034,37.435600281524785],[127.02148684665227,37.43606119204864],[127.02096683102626,37.43619951690968],[127.01917544766812,37.43587728097266],[127.01877103110772,37.43615380884717],[127.0186556577963,37.43693713876238],[127.01819346008978,37.43725975086785],[127.01721103541367,37.43689128078429],[127.01680656495348,37.43698349329185],[127.01657550821315,37.43735214312801],[127.0169801266844,37.437905011465695],[127.01674906796416,37.438273661584],[127.01570897709628,37.438504190097575],[127.01547781540228,37.438412066310995],[127.0146686729956,37.43767493518458],[127.01461081629266,37.4373063251605],[127.01414857292528,37.43749068999221],[127.01374427243572,37.43855051202177],[127.01299311390514,37.4388731369543],[127.0121263765016,37.439195769010134],[127.0117797603482,37.43984088392448],[127.009179229052,37.43878134038824],[127.00848580353524,37.438827469343366],[127.00640521949497,37.43541789115837],[127.00189816802721,37.43726113578532]]]},properties:{CATEGORY:"",AREA_CD:"POI100",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.0320948864932,37.54524536783655],[127.03177951174746,37.544856434319435],[127.02774396139603,37.54246059298981],[127.02758629309292,37.54227239493031],[127.02750738777709,37.54198378632877],[127.0275388288997,37.541770445985456],[127.02764906836643,37.54155708720246],[127.02782235050692,37.54135626247451],[127.02809022239366,37.54124325803913],[127.02947705574624,37.54120527299521],[127.03059592795354,37.541054400373504],[127.03155719997993,37.540903559368864],[127.03267602513812,37.54066482402233],[127.03497659203656,37.539973969808926],[127.03634745621397,37.53955943865021],[127.0378601125794,37.53909465015203],[127.0406331706391,37.53806470992842],[127.04282327954513,37.53738628954444],[127.04353230990928,37.53718524614121],[127.04378508877603,37.538276916485],[127.04376032898855,37.53930494534353],[127.04375125081333,37.54042066425397],[127.04398559107557,37.54180747331271],[127.04203005255032,37.54229631090009],[127.04319931886708,37.54508517599941],[127.04140914919194,37.545635926578456],[127.04181831910753,37.546480316184656],[127.03936645290075,37.547147488388745],[127.03925928884132,37.54691508360742],[127.03768306139965,37.54732624195161],[127.03820588322984,37.54843848688679],[127.03921196284251,37.54815705000338],[127.0394018902007,37.5484556630424],[127.04241999850757,37.54876837611786],[127.04193275045573,37.55117795492022],[127.04038780994593,37.55063888727566],[127.03977283358026,37.550124587746375],[127.03851155794689,37.54943481174789],[127.03797541699639,37.54893302599401],[127.0375969577661,37.548556677525184],[127.03726574190279,37.54809247000738],[127.03704468934347,37.54728940431886],[127.03666540720799,37.545206390144585],[127.03652321400169,37.544491141536724],[127.03652296300032,37.543976632795314],[127.03647556619778,37.54373821651391],[127.0320948864932,37.54524536783655]]]},properties:{CATEGORY:"",AREA_CD:"POI101",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.10323133055864,37.578951937304105],[127.09617884279362,37.57941908309187],[127.0947865989497,37.57824747113139],[127.09331586407593,37.57716155400208],[127.09210734740516,37.57722838731141],[127.09096022894387,37.5767318511795],[127.09060386695712,37.576396115861286],[127.09019822989342,37.57638324965472],[127.08935255319591,37.57527703824898],[127.09085931568144,37.57543401025487],[127.092083524628,37.574688570155274],[127.09249401255711,37.573611042323606],[127.09352751063274,37.57264172992583],[127.09345985342195,37.571492103545786],[127.0923996085935,37.57089997990284],[127.09105115049127,37.571520339552755],[127.09080363508815,37.57218596103781],[127.08871805243142,37.572484025849064],[127.08840283577858,37.571917657856055],[127.0880219899213,37.571848763975225],[127.0885167673564,37.5702671719798],[127.08901977361677,37.56866251179495],[127.08962353815951,37.56827333773712],[127.08992510521449,37.567818506851324],[127.08980044745827,37.56740023649469],[127.09038818919898,37.56746237805074],[127.09051212089634,37.56727780708277],[127.09020131331205,37.56692885819225],[127.08944822248307,37.567021669190055],[127.08948862988063,37.56620467323124],[127.08957066478355,37.5655918869444],[127.09013174793363,37.56414859330877],[127.08984086335481,37.56314737313507],[127.08963322424,37.5625413949955],[127.0897482646932,37.56184952192011],[127.09034386126343,37.561598707119664],[127.09091526534989,37.561874982791],[127.0916311470993,37.560164730143995],[127.09336400929791,37.55936287739608],[127.09401768854377,37.55925694367143],[127.09475989174713,37.560435680627215],[127.09472723313885,37.5607881881924],[127.0949364510066,37.56097908479964],[127.09516900800341,37.56162456428207],[127.09570756895516,37.56209190783321],[127.09608847791695,37.5622431324416],[127.09622080735915,37.562170551887604],[127.09585555654081,37.56132094084443],[127.09612746443982,37.56037857338875],[127.09579496523341,37.55924563239377],[127.0955458161887,37.55856722511641],[127.09561960148095,37.55802032493428],[127.09604959561325,37.55774326145457],[127.09624763291983,37.557288497826534],[127.09589124294878,37.55687701027699],[127.09545244789409,37.55673900857179],[127.09550143848833,37.556218482102516],[127.09620401324199,37.55554589067389],[127.09611239696763,37.55509136275714],[127.097337172226,37.55507718254071],[127.09756034777803,37.554872756622125],[127.09702184441112,37.554418597766045],[127.09752630951856,37.55415464442453],[127.09795683492847,37.55430582223759],[127.0985698321101,37.554766503112795],[127.09900797630466,37.554416949043116],[127.09874057262789,37.55402516057489],[127.09956714150023,37.55328656071179],[127.0993017859424,37.55287830059913],[127.09973170179317,37.55257486977763],[127.09980549460796,37.55206090866769],[127.1009044736072,37.55084770046471],[127.10162507397135,37.55133462753826],[127.10356008284407,37.5518237855266],[127.10507452036212,37.551868566682266],[127.10564515101343,37.55161110811458],[127.10605055361779,37.551551448682865],[127.10672936678378,37.55172213665156],[127.10711884097076,37.552097325367015],[127.10727684585551,37.55263743442201],[127.10790266065908,37.553348416180604],[127.10786991029836,37.553592218529054],[127.10813509613953,37.55384892526424],[127.10867349051038,37.55418444156744],[127.1089388921987,37.554586092008435],[127.10865795344034,37.55488283078844],[127.10827736171164,37.55494247639903],[127.1080213314955,37.55529848678095],[127.10841129848693,37.55599650415828],[127.10914814518553,37.556206655408424],[127.10976204814258,37.557227294530165],[127.10814034188323,37.55747915168495],[127.10798332823764,37.557637417932725],[127.10812463738702,37.5580655371447],[127.10995454689366,37.55869304304305],[127.10964917412969,37.55926652110795],[127.11076712799559,37.55972666816836],[127.11010696669287,37.561038384434646],[127.1105548592494,37.561696809377835],[127.11120024817504,37.56158419989382],[127.11137495848679,37.56219346538439],[127.11221125591162,37.562446328212914],[127.11253426475355,37.562597554747306],[127.1130080924019,37.56396749614982],[127.11507758732296,37.564189503800755],[127.11666055064877,37.566879323861606],[127.11926349597053,37.56938032527074],[127.12082339813318,37.57172421807645],[127.12084084722989,37.57227762769826],[127.12016204831536,37.57225196688022],[127.1191335268416,37.57092873627001],[127.11601546185138,37.5725460052595],[127.11643042657913,37.573243969427644],[127.11737429321514,37.57338139160578],[127.1166836311097,37.575042358162634],[127.11264433927906,37.57523734571839],[127.11074509482872,37.57559162312742],[127.10972772654215,37.5761460003263],[127.10323133055864,37.578951937304105]]]},properties:{CATEGORY:"",AREA_CD:"POI102",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.88970066168471,37.5474018053037],[126.89105639722413,37.54509568676685],[126.89199621111366,37.544085698865544],[126.90166278356962,37.53864433450495],[126.90210475569344,37.538315075949676],[126.90390034204718,37.53688817223639],[126.90682745271572,37.53530831355151],[126.90679892777798,37.5360554431723],[126.90627357055081,37.53689007964759],[126.90596965934694,37.53717551379778],[126.88970066168471,37.5474018053037]]]},properties:{CATEGORY:"",AREA_CD:"POI103",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.07833271178194,37.552929458140255],[127.07828080425541,37.55298712872035],[127.07825021113574,37.55302778312787],[127.07823341279004,37.553045390513134],[127.07818303202454,37.55308102125753],[127.07814773658515,37.5531048846734],[127.07814761269962,37.5531049653423],[127.07813313910421,37.553073286979235],[127.0780448856536,37.55288043288041],[127.07797449819459,37.5527290587885],[127.07794192808876,37.5527388374257],[127.07790047494437,37.552751270296646],[127.07779777246701,37.552782079084366],[127.07740541786089,37.55289390151081],[127.07728004214901,37.55292962941416],[127.07739773117181,37.552865941102866],[127.0773355282219,37.55273820505298],[127.07725860612229,37.5525802921919],[127.07717631041142,37.55241130854584],[127.07713461187546,37.55232751731028],[127.0770929627191,37.55224382361099],[127.0770692400497,37.55219614903799],[127.07706094955105,37.55217950471592],[127.07705323898487,37.55216401261076],[127.07698763906478,37.552032186477405],[127.07693450057343,37.551925407560276],[127.07692180357553,37.551899809628814],[127.07690984760266,37.55187570698909],[127.07686883187326,37.55179300242979],[127.07682933460441,37.55170485916257],[127.07677519144833,37.55158403261619],[127.07675989036788,37.55154988499884],[127.07678723759255,37.55155513066508],[127.07672555083111,37.55152186864583],[127.07664140652662,37.55131303732105],[127.07658778230231,37.551173029920854],[127.07653847634431,37.551049393973884],[127.07652644510752,37.55101922852774],[127.0764623978469,37.55085863736082],[127.07639500431006,37.55068564419809],[127.07632277349046,37.55049687887728],[127.07626158474598,37.55038263551157],[127.07624872806412,37.55033593716323],[127.0762202768983,37.55023262027497],[127.07604561893349,37.55002833988246],[127.07596273387439,37.54988761421563],[127.07559322503509,37.54925310624612],[127.0753650499741,37.548869363299865],[127.07520299656046,37.54891817993081],[127.0751879337893,37.54889173054263],[127.07518785755572,37.548891603185545],[127.07516569189784,37.548858812437054],[127.07476026265377,37.54825902782176],[127.07475471906935,37.54825082717529],[127.07474272933392,37.54823308863948],[127.07471636541902,37.54819408498914],[127.07448541509746,37.54785241809793],[127.07412748405046,37.54732288889123],[127.07417043449492,37.54731249347403],[127.07425626731337,37.54729172122398],[127.07426418175987,37.54728869416698],[127.07488620820673,37.54705054892564],[127.07488871386792,37.54705307003353],[127.07489406062145,37.54705843608078],[127.07490501447946,37.54705482776361],[127.07492828090015,37.54704716256262],[127.07499501583995,37.54701875508752],[127.07506997581272,37.54697446558193],[127.07511872009894,37.54694566430731],[127.07512225943653,37.54694357237043],[127.07534227434257,37.54680609537454],[127.07556085829201,37.54668526349473],[127.07558215656061,37.54667348998505],[127.07573963408551,37.546586437151575],[127.07591235231104,37.546500519598794],[127.07593446475572,37.546489484420526],[127.07606103880667,37.546428658640494],[127.07625780213466,37.54633471739364],[127.07647336458511,37.54623180090003],[127.07647839265805,37.546229479935555],[127.07662982212413,37.54615961555124],[127.07690244808992,37.54599706472756],[127.0770592123072,37.545922137993934],[127.07720654006636,37.545871579584926],[127.07731281297997,37.54583511182467],[127.07743261200666,37.54580333616032],[127.07773997315869,37.54572694816902],[127.07782090345543,37.54571345493535],[127.07799691181447,37.54568411408843],[127.07814396383131,37.54565376279494],[127.07822659739935,37.54564012304705],[127.07833774837869,37.54562177638736],[127.07850924983698,37.54558014586317],[127.07865075155254,37.54554428487255],[127.07894950609467,37.54547691347453],[127.07912767665835,37.545439735989355],[127.07927771941912,37.545408428543155],[127.07942424549965,37.54537801339909],[127.07954571399272,37.545351039426095],[127.07962971720448,37.54533408119182],[127.07993332794437,37.54530073264066],[127.08023517454602,37.545320309030686],[127.08048552610684,37.545346235650385],[127.08050151384991,37.54534721992136],[127.08100069657365,37.5453779446577],[127.08156166520283,37.545382845252654],[127.08155116020698,37.54530463724563],[127.08155069693879,37.54530204869631],[127.08161344780869,37.545299135239794],[127.08198983282635,37.54528165612538],[127.08248477896197,37.54525405823587],[127.08250289701424,37.54525304786834],[127.08339399306648,37.545203352388036],[127.08378136943193,37.545181747467126],[127.08379724532584,37.54518086240718],[127.08408385830496,37.545164877247075],[127.08409648200802,37.54516417269148],[127.08427101483312,37.545154436158086],[127.08443627814609,37.54514477942087],[127.08444966074397,37.54514399724625],[127.08506427664106,37.5451080610781],[127.08508484889245,37.54518220841612],[127.08511889673574,37.54530497343196],[127.08528519656957,37.545498548244915],[127.08528520074927,37.54549861224805],[127.08528156033145,37.54571926882618],[127.08531866237534,37.545747729578125],[127.08544523370864,37.54584483965683],[127.08544525980741,37.5458450317482],[127.08544526420187,37.545845057001415],[127.08545473183517,37.5459118246604],[127.08545546256883,37.545913559624594],[127.0854668300982,37.54594060767887],[127.08547022668246,37.54594870023377],[127.08547575833161,37.54595555733987],[127.0855015298369,37.545987521450016],[127.0856532153219,37.54611237931794],[127.08568713511247,37.54614029879287],[127.08583022061227,37.546258079446645],[127.08583157739213,37.54625919827853],[127.08591047901211,37.54632414531724],[127.08594899908873,37.54635584939369],[127.08594887629896,37.54635594630397],[127.08588758354279,37.54640415208628],[127.08590647522405,37.5464213133976],[127.08590707446463,37.54642185632351],[127.08590511654847,37.5464234015812],[127.08589240481173,37.54643343502764],[127.08589582961386,37.54643766446505],[127.08597785387785,37.546539008247464],[127.08594297044318,37.546562454516206],[127.08594290225675,37.54656250114238],[127.08573277269885,37.54674282800413],[127.08573022936686,37.54674501298052],[127.0857655968911,37.54674744181118],[127.08576487347868,37.5467492897463],[127.08574307398656,37.54680466993249],[127.08573997146779,37.54681256572961],[127.08569607788391,37.54685421378731],[127.08567326028,37.54690003695745],[127.08567320951344,37.546900205329216],[127.08565775899483,37.546950982040435],[127.0856578677405,37.54704873059419],[127.08575440837852,37.54731316583587],[127.08576349165406,37.547348006173884],[127.08578998097904,37.547449621207186],[127.08579537450838,37.54749701887086],[127.08578160266391,37.547587299675754],[127.08572818393579,37.54778268881177],[127.08569585006694,37.54788902969917],[127.08559890841583,37.54814435833472],[127.08558426678638,37.54817575064214],[127.08545691893164,37.548420901659775],[127.08536532084214,37.5485582058406],[127.08539435389977,37.548574168905276],[127.0854252792563,37.54859391437071],[127.08542866959704,37.548638718101834],[127.08544147936391,37.54869078556086],[127.08541938893552,37.54870983111877],[127.08539612231431,37.54872989556645],[127.08531159902938,37.54881737793718],[127.0852629098106,37.54887227328176],[127.08521315365942,37.54899549283318],[127.0852266520197,37.549043397604244],[127.08524674912599,37.54908378482132],[127.08538731590245,37.54898025150643],[127.08561923381029,37.54889031199483],[127.08566279698948,37.5489474384927],[127.08569828572703,37.54897479739768],[127.08585102441083,37.54909254428892],[127.08586982741072,37.549107027368414],[127.08592159399674,37.54908556742154],[127.08595391209839,37.54907217039275],[127.08595530941366,37.549072114880026],[127.08599911940811,37.54907035492738],[127.08599920095565,37.54908344646687],[127.08608848352345,37.549260373286344],[127.08610773911123,37.54927655878212],[127.08608834227698,37.54928509601093],[127.08615900232662,37.54930724567114],[127.08623274044486,37.54931651851236],[127.08626566901602,37.54938479871834],[127.0862374299336,37.549402056203846],[127.08619911232245,37.54950011082649],[127.08620260214946,37.54950244132143],[127.08629642527875,37.549565092360055],[127.0864030741485,37.549676684819936],[127.08653321589627,37.54954123457686],[127.08654602348403,37.54954877507738],[127.08657431551993,37.549578496203765],[127.08662557393153,37.54960849062199],[127.08663878121824,37.54961622000707],[127.08675100147592,37.549652197316895],[127.08682639354458,37.54956535981871],[127.08683567089828,37.54952415898511],[127.08698111511545,37.54950935021143],[127.08708481796037,37.54948902054415],[127.0875318970003,37.549398785747044],[127.0875647255802,37.54939216011133],[127.08762696898286,37.54937959811531],[127.08769803550908,37.54945589434024],[127.08776486153211,37.54952763831601],[127.0877737592167,37.54953719127579],[127.08784315255392,37.54961640375427],[127.08796243133801,37.54973866224497],[127.08831605741307,37.550113064880485],[127.08831614972605,37.55011316254314],[127.08815480184522,37.55021503143559],[127.08816958542731,37.55022725936478],[127.0880696389479,37.55032232614521],[127.08803003673366,37.550359996120676],[127.08804784941692,37.5503780682033],[127.08812635030137,37.5504577196961],[127.0881499480677,37.55047826182875],[127.08837563011502,37.550710568482934],[127.08848552826433,37.55082176117649],[127.08853903980877,37.55087589903393],[127.0885416288197,37.55087777296893],[127.08854910944271,37.55088319001665],[127.08863995528264,37.55094895740205],[127.0887823359552,37.55105205162509],[127.08891025416047,37.55114465947221],[127.08895029175002,37.551173659280344],[127.08900918827767,37.551254993273346],[127.08901496801694,37.5512629822337],[127.08925390314377,37.55151963202969],[127.08940822638804,37.551615065873],[127.08941625891546,37.55166229946698],[127.08969577448195,37.551856556294595],[127.08968009191108,37.55189627218478],[127.0895886114783,37.552127957909555],[127.08958223274611,37.55214411321399],[127.08955358841152,37.552216637445476],[127.08951130696153,37.55232372888532],[127.08948375147345,37.55231660072222],[127.08919994405468,37.55224691346085],[127.08870217955841,37.55227547324202],[127.0886459036298,37.552279587491206],[127.08858792582636,37.552286425038034],[127.0885402036805,37.552305469292875],[127.08851294152278,37.552324492856215],[127.08844989740338,37.552374777746465],[127.08844764256024,37.55237388745939],[127.08837824047096,37.552346322801746],[127.08771796961615,37.552095619912166],[127.08737774093765,37.55198500994918],[127.08730159137254,37.55194833995359],[127.08716550342209,37.55188280280558],[127.08700631109583,37.551815659558535],[127.08692460010528,37.55178119171872],[127.08656972383291,37.55163481296383],[127.08619268228115,37.55150067334943],[127.08612106894256,37.55150886895552],[127.08611361209364,37.55151063019435],[127.08607503222225,37.55151975903645],[127.08594294428373,37.551570335028295],[127.08571298752226,37.55165837382916],[127.08545768030663,37.55175612358169],[127.08544261489814,37.55176189163744],[127.08486474965349,37.55199583814102],[127.08484093680033,37.55205559163581],[127.08483975088625,37.55206773587235],[127.0848341900838,37.55212484495015],[127.08482230877699,37.55216558756733],[127.08480528487132,37.55219274766274],[127.08477630498177,37.55220635353776],[127.08426507437626,37.55241371616422],[127.08385751463435,37.552579017145575],[127.08364272775624,37.55266741992796],[127.08362688432315,37.55266930286196],[127.08359669523564,37.55267288382859],[127.08355746958694,37.5526715493755],[127.08284116995853,37.55264761102738],[127.08280972844145,37.552646559815244],[127.08270286871841,37.55247126394078],[127.08259920340167,37.552301220631804],[127.08258039396155,37.5522801508206],[127.0825601208021,37.55226412609964],[127.0825345304406,37.55225107961107],[127.08250894481723,37.55224307707522],[127.0824746033572,37.55223667680601],[127.08219393919958,37.55221803012472],[127.08198211797115,37.55221433659342],[127.08192764294961,37.55221743725007],[127.08185890402157,37.55223739584194],[127.08179170824184,37.55226158721823],[127.08175664471806,37.552277649535554],[127.08170688809307,37.552313812175115],[127.0815330232345,37.55247742792514],[127.08110300139244,37.55257150773852],[127.08094019854856,37.552552015167066],[127.08061401778545,37.55261570935389],[127.08032562247448,37.55259847021563],[127.08006092519085,37.55259212460244],[127.08006868250612,37.55241921511184],[127.0800083357141,37.55228659632492],[127.07983877599543,37.552261672782876],[127.0796833541313,37.55213682039917],[127.07945952156841,37.55210630039913],[127.07942585547076,37.55205754261837],[127.07920859980759,37.552064875316894],[127.0791401892736,37.552159205897766],[127.0790498680171,37.55227132225438],[127.07914769279436,37.55232615409629],[127.0791656743676,37.552336233106104],[127.07927311738108,37.552381482645636],[127.07929010684427,37.5523952563265],[127.0794032941386,37.55252276199664],[127.07942868185327,37.55254801818433],[127.07943023321324,37.552549566823544],[127.0794933558619,37.55261235088229],[127.07949385491744,37.55261279253237],[127.07946116372477,37.552637708447236],[127.07936919698514,37.55270780261523],[127.0792955267242,37.552764568701996],[127.07925830986879,37.55277927956795],[127.07911829987789,37.5528033649658],[127.07896407130178,37.55282281970358],[127.07892496337068,37.55282571870995],[127.0787973993932,37.552869212757244],[127.07869787547047,37.55290980432174],[127.07865617366748,37.552920958453655],[127.07865402394772,37.55292132034008],[127.07855089972381,37.55293878555187],[127.0784926846806,37.55293744472833],[127.07844228238207,37.55291884566327],[127.07839640894598,37.552901810365505],[127.07836783406475,37.55289069291028],[127.07833271178194,37.552929458140255]]]},properties:{CATEGORY:"",AREA_CD:"POI104",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.92159053321691,37.53395200756203],[126.92129223473943,37.53401590918121],[126.92049148988716,37.53417051537936],[126.92044078406403,37.53417969954417],[126.92021736732774,37.53422016273508],[126.91983638482262,37.53428916461516],[126.91648648492199,37.53496763396633],[126.91614593077317,37.5350297505215],[126.91610414343569,37.53503737244198],[126.91593197625761,37.5350687744518],[126.91574381189122,37.53510309372177],[126.91487449467397,37.53526164752178],[126.91188483028841,37.53580690837275],[126.91163997894137,37.53585150163907],[126.91144409955596,37.53585135150753],[126.91119045633059,37.53581455494881],[126.91091388735904,37.5357318463818],[126.91057996355529,37.53556631338741],[126.91048805151317,37.5354999952692],[126.91033815769738,37.53539184066965],[126.91027461463001,37.53531028776747],[126.91013093776863,37.53512588846626],[126.91002744429098,37.53488735331801],[126.90997296173866,37.53448045685053],[126.90994167512318,37.534333176077126],[126.90992021608201,37.53421265159972],[126.90989514558729,37.53407185286835],[126.90983514412004,37.533843460386144],[126.90980184904332,37.5337485491347],[126.90973984808498,37.53367413298721],[126.90973565338719,37.53366909677913],[126.90962227156542,37.533578908384804],[126.90951485560123,37.5335239209296],[126.90948074610041,37.533517700925664],[126.90942258336896,37.53351962695929],[126.90927838080032,37.533478123694806],[126.9092161532638,37.53347892021051],[126.90930054801903,37.533421265803774],[126.9094057751489,37.53338643442898],[126.90957303884585,37.53336150633693],[126.90966815819985,37.53335228840532],[126.90967747063773,37.53335139285191],[126.90976681346494,37.533342792034134],[126.9099438004422,37.533317588959],[126.91001930515083,37.533301598985474],[126.91010029779353,37.53327852239414],[126.91027716926392,37.53320396411685],[126.91029697871764,37.53319561549764],[126.91052960502826,37.53306289842359],[126.91066100868613,37.53301626055328],[126.91072339617173,37.53302785205779],[126.91090378901387,37.53310992423211],[126.91095075408644,37.53313698194758],[126.91098257706967,37.533155315432126],[126.91117582817454,37.53327630734363],[126.911209967803,37.53330073055054],[126.91155840445246,37.533549994076246],[126.91179653467665,37.53368954626533],[126.9118316221142,37.53370793245519],[126.91192620970254,37.533757503013405],[126.91203991388727,37.53378875366841],[126.91217964195113,37.53382715706565],[126.91245832488235,37.53390375375024],[126.91262342826121,37.53391176182632],[126.9127618219845,37.533903228990006],[126.91339495770573,37.53386419274271],[126.91458108623107,37.5337721280486],[126.91478343767315,37.53375643916665],[126.91551713114862,37.53371108180864],[126.91593355268346,37.533633750214904],[126.9161715499436,37.53358958275686],[126.91618019014312,37.53358781944934],[126.9168359294799,37.533454228138005],[126.91785548408797,37.53323956058945],[126.91867033245862,37.53301263416151],[126.91937109194963,37.53284447028874],[126.92000714697737,37.53268667219712],[126.92025583734957,37.532625639982975],[126.92111691695031,37.532414347167126],[126.92159207218175,37.532271241414136],[126.92178570552649,37.532212921236734],[126.92215010036591,37.53212857599135],[126.9223751246156,37.53214026962279],[126.9224898384046,37.53215470647219],[126.92256640916601,37.53212941723857],[126.92271640558903,37.531987174841305],[126.92283739687097,37.531915740039004],[126.92426696799761,37.531480216287434],[126.92638663638407,37.53080821790064],[126.92686269254537,37.530620582372116],[126.92751870697975,37.53036224148878],[126.92803211359832,37.53012351664639],[126.92848618457576,37.52992474980985],[126.92888438023056,37.52981546873191],[126.9290834489222,37.52979109476139],[126.92929182967781,37.529798229404484],[126.92990498359781,37.52993541149529],[126.9299855962638,37.52993039135366],[126.93019603189474,37.529849710269154],[126.93029278113085,37.52978951468077],[126.93058210260403,37.52949648642998],[126.9306306531234,37.529375163395144],[126.93061147320739,37.529198771482726],[126.93054122182778,37.52909060909593],[126.93053535220098,37.529074219188956],[126.93049784174369,37.52896944526347],[126.93048233728176,37.52892614317243],[126.93054014006671,37.52873978386122],[126.93085288708866,37.528506840051946],[126.93217833620211,37.527507814813426],[126.93306809579799,37.52684200250296],[126.93393675070236,37.52619195765927],[126.93584160492163,37.52471259073158],[126.93727393859207,37.523616974924366],[126.93748618559616,37.52345575621273],[126.9376865259841,37.52336689049147],[126.93783623746778,37.52336838045843],[126.93815523524795,37.52342373705609],[126.9382449974466,37.52345926185232],[126.93830812974664,37.523424382098135],[126.93857030374271,37.523161794663444],[126.93865203298095,37.5230799341369],[126.93859284635641,37.52304808668338],[126.93857040928977,37.523036157266574],[126.938371825235,37.52293055826143],[126.93831880650407,37.522809980366816],[126.93831448782515,37.52280016441741],[126.93831460461624,37.52266304473742],[126.93855231587469,37.52248072018044],[126.9404160812053,37.5210972684267],[126.94063241851468,37.52088846273352],[126.9406535096917,37.52085792715604],[126.94084901362244,37.52057491514734],[126.94102262099331,37.520306957134196],[126.94110006313942,37.52005499913786],[126.94114698332221,37.51981682242915],[126.94121629943555,37.51946483795542],[126.94123783936263,37.51937063363858],[126.9414412132673,37.518481246356885],[126.9414644792201,37.51833991447356],[126.94150729269805,37.51824800853121],[126.94154185024347,37.518173833582054],[126.94162682250746,37.51800184235252],[126.94187421033733,37.51784823600685],[126.9419436846325,37.51782996823578],[126.94202869774777,37.517830011981744],[126.94215221106248,37.51786695818923],[126.94227568803335,37.5179528968003],[126.94239151991864,37.51809458057245],[126.94264608383372,37.51846348440527],[126.94270794611566,37.51846351522106],[126.94282367919537,37.51850665119508],[126.94284473996174,37.51851585001312],[126.94306308697645,37.51861122865947],[126.94324843061187,37.51870345876371],[126.94356741839991,37.51890337815693],[126.9435725989204,37.518906624282955],[126.9435762163388,37.518911104006186],[126.94371156640342,37.51907872669085],[126.94378870569085,37.51920800143507],[126.94384268660737,37.51934317715436],[126.9438888507,37.519527621780504],[126.94391189619398,37.519668976708836],[126.94391955967998,37.5198165184743],[126.94391885139058,37.519818207495646],[126.94387316609316,37.51992714891091],[126.94378801897939,37.52009942362716],[126.94357142957492,37.52041888716641],[126.94342456752076,37.52062773515536],[126.9433240914753,37.52073214530681],[126.94312300364926,37.520891971853],[126.94295497594658,37.5210397086738],[126.94163833181102,37.52217123383389],[126.94014180913321,37.523420299978476],[126.93856898826152,37.524732990353286],[126.93733166921382,37.52576559870314],[126.93585644470882,37.527021956296615],[126.93485795642432,37.52787227354667],[126.93402758968699,37.528568703010116],[126.93331259034846,37.529118742942146],[126.9329084141479,37.529400073102614],[126.93244887145804,37.529719935647826],[126.93194774153417,37.53002736881412],[126.93161988726195,37.530228499633786],[126.93091092242628,37.53062307094949],[126.93079873548533,37.53068550937643],[126.9297955391508,37.53116180225802],[126.92886161100961,37.531555697293065],[126.92778040274315,37.5319909729973],[126.92724898818228,37.53220557475205],[126.92628155640669,37.53259582785978],[126.92500181146565,37.53304387434475],[126.92403326580158,37.53335496408727],[126.92294971072,37.53363872157254],[126.92263036625431,37.53371865385888],[126.92253788747448,37.533740835775106],[126.92221305970473,37.53381832787931],[126.92159053321691,37.53395200756203]]]},properties:{CATEGORY:"",AREA_CD:"POI105",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.86577525968362,37.575347425551215],[126.87459519571024,37.57009744060959],[126.8746205173378,37.570083989222034],[126.87527571383244,37.56970597958387],[126.87627036431947,37.569128902295745],[126.87712338931848,37.568617124178324],[126.8788678411845,37.56758830039424],[126.88011289451758,37.56685560646178],[126.88061049150444,37.56658694692731],[126.88080868378883,37.566475967803534],[126.88119926731056,37.5662424339525],[126.88173267082107,37.56593027940414],[126.8819396237152,37.56580309847872],[126.88280083637271,37.56531164061003],[126.88512602388539,37.56394150720106],[126.886730697449,37.56301102357162],[126.88760590396949,37.5625343382125],[126.88768874122334,37.56248321491663],[126.88821675443478,37.56215975427109],[126.88873219903832,37.561814322141764],[126.88884425794032,37.56174840467185],[126.8889964864226,37.56165887442644],[126.8895602430081,37.56132726079802],[126.8895612738729,37.56132664910307],[126.88983504929736,37.561166568398875],[126.88998818088459,37.56107701969886],[126.89091239282396,37.56053378184646],[126.89111467391147,37.56041487843308],[126.89158346675006,37.560144073089845],[126.8916528820148,37.560103971606914],[126.8920241738704,37.55989051179037],[126.89206574301573,37.55986834995973],[126.89222143193732,37.55979100010313],[126.8923188615512,37.55976418671387],[126.89240008225644,37.55976358920752],[126.89282438053962,37.55994628928526],[126.89625002328545,37.56142134874409],[126.89879185398506,37.562515844491145],[126.8988504968334,37.56259265587555],[126.89889336151953,37.56264880671826],[126.89890393459054,37.56267228666391],[126.89892519355276,37.56271952595659],[126.89894390240518,37.56276106878111],[126.89900557144622,37.56296270054045],[126.89905106280266,37.563109411973805],[126.89907882324341,37.56330216654283],[126.89909515522389,37.563546275430646],[126.89909609341312,37.563562694527],[126.89915611631955,37.56461314557586],[126.8992355981015,37.566004143216944],[126.89971402993302,37.574377100298314],[126.89363303199677,37.567668446987305],[126.89044161812738,37.57022240639847],[126.8888416518269,37.57219829489916],[126.887724511533,37.57334734859519],[126.88314075523624,37.57610597273249],[126.88304804832948,37.57620232761311],[126.87703277223754,37.57978338263774],[126.87650845910724,37.580024946181986],[126.86956982645609,37.57807826755294],[126.86849534450886,37.577616879980795],[126.8673880512156,37.57681466805055],[126.86577525968362,37.575347425551215]]]},properties:{CATEGORY:"",AREA_CD:"POI106",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.02477225907114,37.54474570104196],[127.02542278274136,37.54386756191081],[127.0285525121276,37.54498381406632],[127.03111570789441,37.545863852179046],[127.03300483170653,37.54745286923302],[127.03564978480449,37.54977195407503],[127.03516483101642,37.55118978745201],[127.0342490258049,37.55445503367574],[127.03289918534894,37.552608128077914],[127.03223411026674,37.550994617804704],[127.03192367400715,37.55058657987018],[127.03150534762919,37.550232270231284],[127.02790295224462,37.54837514562787],[127.02709343375453,37.54791351136166],[127.02644594529222,37.54788143795599],[127.0260008049892,37.54788153681279],[127.02577145331091,37.5477741864385],[127.0255284520709,37.54719427566019],[127.02454305608,37.54505721095398],[127.02477225907114,37.54474570104196]]]},properties:{CATEGORY:"",AREA_CD:"POI107",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.95224676780032,37.53041396362938],[126.9510690372222,37.5297532117098],[126.95194223254339,37.528989047198856],[126.95216060626701,37.52867637639421],[126.95216080600638,37.52836361699508],[126.95216109451334,37.52791185338921],[126.95216142739801,37.5273905876471],[126.95216160493301,37.527112579232465],[126.95224916030246,37.52666085084601],[126.95242435613987,37.525618389527565],[126.95264289374714,37.52502770912947],[126.9528615153634,37.524298023988656],[126.95360405670722,37.523012527974764],[126.95438986465577,37.522283061194024],[126.95495733783808,37.521831514779116],[126.9558300938343,37.521588586735525],[126.95665913342454,37.52148464058069],[126.95740085071184,37.52148491042887],[126.95801175461615,37.52134612480313],[126.95849176545626,37.521207290085464],[126.95962635840611,37.52082542129144],[126.96119729203254,37.52033943242014],[126.96896475780699,37.51704037309445],[126.97223732272423,37.51575539594852],[126.97446251800582,37.51513037762364],[126.97655673185025,37.51471379820912],[126.97799642660787,37.51464457290411],[126.97891265061868,37.51440148206165],[126.980090561106,37.51440168647976],[126.98126846291947,37.51443663028909],[126.98205373695558,37.51443675221104],[126.98270813198921,37.51443684982463],[126.98301328792247,37.51544467705373],[126.9829695425455,37.51596593772972],[126.98131169930744,37.516000438189124],[126.98004652769811,37.51593072897689],[126.97921760117613,37.51596533716608],[126.97803965593614,37.51599987516271],[126.9769925273967,37.51624293373834],[126.97568363818559,37.516451178294325],[126.9744619614354,37.51676368060197],[126.97345841385008,37.51707621947297],[126.97158223099176,37.51756229867279],[126.96137118405109,37.521555777889226],[126.96019293975895,37.52197239978565],[126.9590584272632,37.522180518517146],[126.95740037652736,37.52231893649056],[126.95626566849133,37.52283978810424],[126.95547985229891,37.52360401837944],[126.9540393466122,37.5246807500615],[126.95320966032486,37.52575770753795],[126.95272847028706,37.52770357550363],[126.95285845392067,37.52916317172462],[126.95285801651163,37.52985819250174],[126.95224676780032,37.53041396362938]]]},properties:{CATEGORY:"",AREA_CD:"POI108",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.07210033352028,37.51805908837422],[127.07121804361046,37.51803452556047],[127.07058778284218,37.51795960960611],[127.07002042493198,37.51775916251281],[127.06989420015321,37.5175584524676],[127.06973620993155,37.517081681909275],[127.0701126753646,37.515324591547376],[127.07070716675905,37.510906968030596],[127.07083312158954,37.51083159817794],[127.078143850212,37.51200659987625],[127.07691994729474,37.51675094673385],[127.07600679871425,37.51735389233687],[127.07386461817545,37.5178070172253],[127.07210033352028,37.51805908837422]]]},properties:{CATEGORY:"",AREA_CD:"POI109",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.06917198851218,37.52026947195659],[127.06813225830905,37.52039556675098],[127.06775395091177,37.52019499965307],[127.0676908847604,37.52014483963307],[127.06769065803257,37.519893858852015],[127.0678785374567,37.51858865011875],[127.07276247170655,37.518510448086],[127.07550328365546,37.51798166777794],[127.07638526729644,37.51770502159059],[127.07966157249177,37.51707540481393],[127.0826233707556,37.5170231739037],[127.08334802325747,37.516972468567666],[127.08760215358527,37.51732076340731],[127.08889438716923,37.51762097510395],[127.09419022113126,37.51942393334872],[127.09623966420078,37.5204262046752],[127.10090669579982,37.52300741170546],[127.10188430494792,37.5235587299983],[127.10191608986423,37.523759487133454],[127.09930020501038,37.52346053860357],[127.09829140092494,37.52313510752441],[127.09772373355165,37.522784205553606],[127.09592639090182,37.52185705018122],[127.09431825162318,37.521005010595],[127.09362448259354,37.52057889515466],[127.09170126429802,37.51970197097],[127.09050357441035,37.519451913887096],[127.08924284266479,37.51917679420299],[127.08813981697456,37.51902703392498],[127.08684776575546,37.51890250057445],[127.08609141412603,37.518802661924646],[127.08435803582303,37.51850273552358],[127.08202620959453,37.518403985553945],[127.08010420202216,37.51848059898872],[127.06917198851218,37.52026947195659]]]},properties:{CATEGORY:"",AREA_CD:"POI110",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.02121362212917,37.53021943258426],[127.02120777582972,37.530223055567404],[127.02014704238853,37.529379557900604],[127.01510921592165,37.52518213151296],[127.01304958080568,37.52343019959627],[127.01251490936423,37.5230248293292],[127.01121787214869,37.52180652433246],[127.01027411090159,37.52098453873015],[127.00904620648338,37.519888557927096],[127.00796490225194,37.51895883847036],[127.00782884461887,37.518844087892695],[127.00720942384119,37.518290252589296],[127.00681872698085,37.51793507362535],[127.00668680336568,37.517828519936174],[127.00668041035432,37.51783018767998],[127.00661069358767,37.517767632113774],[127.00641788215012,37.51762556052819],[127.00624012579496,37.51761445086797],[127.00630817292586,37.517565175631795],[127.00779457355715,37.51648879753347],[127.0099659449644,37.5184326918094],[127.01061852383589,37.51894025315391],[127.01129181949702,37.519582473630635],[127.01236441487939,37.52069174172059],[127.01402378596401,37.5229177270911],[127.01473414389191,37.52342512561105],[127.01570749546234,37.524336681841454],[127.01570749674603,37.524336683043636],[127.01601278816216,37.524622586118085],[127.02047121370741,37.527210201588744],[127.02116575568665,37.52799259102754],[127.02170407565337,37.528915447390425],[127.02217390976149,37.529569903978135],[127.02260124872313,37.53026674729391],[127.0235259996307,37.53146420898067],[127.02371925655535,37.53178280905529],[127.0235676149294,37.53217839091816],[127.02121362212917,37.53021943258426]]]},properties:{CATEGORY:"",AREA_CD:"POI111",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[127.04946326831785,37.454245926140764],[127.04727189324464,37.45200717819044],[127.0465861668807,37.45200745047862],[127.04547934514957,37.45066762128948],[127.04231626171908,37.450756971174265],[127.041410330214,37.45253842738683],[127.04086606037545,37.454687539311045],[127.04031461505396,37.455174498034715],[127.03945512940976,37.45599062046628],[127.03867248149028,37.45635733596549],[127.03805011640787,37.45664851071931],[127.0367225977204,37.456190420962294],[127.03475226367088,37.45289327276874],[127.03762616680609,37.4493830267513],[127.03826531302589,37.44483298717981],[127.0351226804332,37.440848446088445],[127.03540930301656,37.438943776397025],[127.03689071841777,37.438167381450064],[127.04095989471139,37.43781334052571],[127.04701615615937,37.43216786986723],[127.04732475808306,37.430580591011115],[127.05006662307206,37.430191490054696],[127.0522766769644,37.428285945841814],[127.05811587593857,37.42997618601122],[127.05988460803293,37.42951679145862],[127.06130025108676,37.4299745775727],[127.06572216139439,37.429019908136375],[127.0677577733323,37.43032375380772],[127.06983696339341,37.4308515956434],[127.06166150612977,37.43903880690353],[127.04946326831785,37.454245926140764]]]},properties:{CATEGORY:"",AREA_CD:"POI112",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97924316968938,37.583727746091114],[126.97953320392394,37.58394507814054],[126.97933923923986,37.58491396715734],[126.97951981544351,37.585326205678015],[126.97953163417844,37.58533577612723],[126.97955436158732,37.58536545943149],[126.97958562633882,37.58538205242061],[126.9796033791578,37.58544448405567],[126.97961383926956,37.585491516631436],[126.97961147630085,37.58551392260034],[126.97958465666943,37.58559456638808],[126.979575641786,37.58564073142463],[126.9795629541598,37.58570777396173],[126.97955258212667,37.585784309061154],[126.97957334811113,37.585860166953445],[126.97955090744634,37.58597350691272],[126.97939173225791,37.58625197155828],[126.97932026171026,37.58630661062936],[126.97918328544648,37.586542678833254],[126.97918373185293,37.586933465145364],[126.97917522927554,37.586935059381425],[126.97920026367079,37.58713806040834],[126.97900648118737,37.58741328813037],[126.97766424450701,37.58785346099373],[126.97611213764189,37.58736503485424],[126.97611091195466,37.58737375890161],[126.9754091694826,37.58715935245532],[126.97401182417761,37.58687278055752],[126.97401186628518,37.586751665266114],[126.97351390640131,37.58636618769989],[126.97341705090207,37.58637717641002],[126.97308510324847,37.586057797181006],[126.97285572906459,37.58604596804363],[126.97297508269673,37.58542241792615],[126.9729616879595,37.58518811337943],[126.97269713913316,37.584584271556906],[126.97278715744402,37.58437843628073],[126.97264515701407,37.583745567229144],[126.97310080510316,37.583740352971994],[126.9736551077219,37.583707887441854],[126.97366017038324,37.58352037545775],[126.97430118823118,37.583565168844665],[126.97555878909486,37.58376788560862],[126.97652127664992,37.583804412087225],[126.97928668578422,37.583489803901784],[126.97928670381658,37.58348984172973],[126.97929695842161,37.58351296991845],[126.9792994920355,37.58351868294512],[126.97929951206245,37.583518724192736],[126.97928769266964,37.58352231018341],[126.97926754862924,37.58352842092799],[126.97926753616571,37.58352850616295],[126.97926436551461,37.58356898339023],[126.97926005976294,37.583599397451096],[126.9792514766293,37.5836600617016],[126.97924840904095,37.58368158986799],[126.97924557827564,37.58370144247834],[126.97924610587991,37.5837118211828],[126.97924316968938,37.583727746091114]]]},properties:{CATEGORY:"",AREA_CD:"POI113",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97668652128944,37.562551782892044],[126.9760601080263,37.56088495983605],[126.97601237474468,37.56079242215283],[126.97601639399005,37.5606853824605],[126.97600605147264,37.56066567164939],[126.9760775531688,37.56056422466741],[126.97605249722446,37.56031560591908],[126.97797086361442,37.56085988151766],[126.9811148049511,37.56157246372037],[126.98154843306402,37.561766724304256],[126.97947428682778,37.564053531893954],[126.97810550524582,37.563869882490366],[126.97776666302768,37.56394533825637],[126.97727873257226,37.56404234133316],[126.97668652128944,37.562551782892044]]]},properties:{CATEGORY:"",AREA_CD:"POI114",AREA_NM:" "}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.97605249722446,37.56031560591908],[126.97599147048842,37.56022423258498],[126.97603804761417,37.55985960213439],[126.97594273539254,37.55963265223602],[126.97579949875414,37.55946531062837],[126.97564035199812,37.559267545378624],[126.97562697030122,37.559118584923624],[126.97565321141852,37.55893293073778],[126.97583338008728,37.558735499735825],[126.97616925265686,37.5584412622591],[126.97651342906725,37.557680845026816],[126.97714530026187,37.55789602343869],[126.97738945698812,37.55801769434858],[126.97781240956897,37.55831994398687],[126.97822254698822,37.55876627630726],[126.97862097210881,37.55911102759257],[126.97907703379222,37.55936396631452],[126.97959041663562,37.55953596546365],[126.97984029069994,37.55959995148039],[126.98001401526304,37.5598626692443],[126.98016987400449,37.5598582020557],[126.98039762331626,37.55985159457999],[126.98106460711448,37.56007036610756],[126.98115509018328,37.560014459688674],[126.9816032933282,37.56031937450002],[126.98195039682118,37.56046117396058],[126.98195778725135,37.560526186988454],[126.98189775512641,37.56066244394168],[126.98212627145556,37.56073326468248],[126.98155521192884,37.561755936918104],[126.98109447638845,37.56157246046696],[126.97795731295783,37.560854484765095],[126.97605249722446,37.56031560591908]]]},properties:{CATEGORY:"",AREA_CD:"POI115",AREA_NM:""}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[[126.98853125163433,37.575430636927805],[126.98865499368297,37.57475148803258],[126.98835621326167,37.574725230263816],[126.98835401849598,37.57471124141943],[126.9881760715851,37.574676252160685],[126.9881804770777,37.57460281230435],[126.98787950614556,37.574541581538455],[126.98786865906293,37.57439164451144],[126.98726107025946,37.574185060071656],[126.98767145940819,37.57350929420298],[126.98787501804625,37.57302785699805],[126.98765065746954,37.57162603351144],[126.98769982258989,37.5701933967935],[126.9921286726781,37.570464391397664],[126.99208095776791,37.57084510201094],[126.99060566986873,37.57566643705051],[126.98853125163433,37.575430636927805]]]},properties:{CATEGORY:"",AREA_CD:"POI116",AREA_NM:""}}],NS={type:nU,features:iU};Dp.accessToken="pk.eyJ1Ijoia2diNDg1NCIsImEiOiJjbTJ1NDlmZ2YwOWljMmtvaWltZjFlZXdkIn0.aLnwIt7wXc7ir6vjkogdnQ";const oU=()=>{const e=ut.useRef(null),[t,n]=ut.useState({}),[o,h]=ut.useState(null),[y,w]=ut.useState(null),[C,a]=ut.useState(!0),[D,j]=ut.useState(""),B=async()=>{a(!0),console.log("Fetching population data...");const ne={},te=NS.features.map(K=>{const se=`http://openapi.seoul.go.kr:8088/4b766c79436b67623632504c436862/xml/citydata_ppltn/1/5/${encodeURIComponent(K.properties.AREA_NM)}`;return fetch(se).then(ve=>ve.text()).then(ve=>{var St,Mt,Pt,ht,kt;const fe=new DOMParser().parseFromString(ve,"application/xml"),Te=(St=fe.getElementsByTagName("AREA_NM")[0])==null?void 0:St.textContent,Ee=(Mt=fe.getElementsByTagName("AREA_PPLTN_MIN")[0])==null?void 0:Mt.textContent,Ze=(Pt=fe.getElementsByTagName("AREA_PPLTN_MAX")[0])==null?void 0:Pt.textContent,st=(ht=fe.getElementsByTagName("AREA_CONGEST_LVL")[0])==null?void 0:ht.textContent;ne[Te]={populationMin:Ee,populationMax:Ze};const We=(kt=fe.getElementsByTagName("PPLTN_TIME")[0])==null?void 0:kt.textContent;j(We||"Unknown time");let Xe="";st===""?Xe="":st===" "?Xe=" ":st===""?Xe="":st===""&&(Xe=""),ne[K.properties.AREA_NM]={populationMin:parseInt(Ee)||0,populationMax:parseInt(Ze)||0,congestionLevel:Xe}}).catch(ve=>{console.error(`Error fetching data for ${K.properties.AREA_NM}:`,ve)})});await Promise.all(te),console.log("Finished fetching population data:",ne),n(ne),a(!1)};ut.useEffect(()=>{if(o)return;const ne=new Dp.Map({container:e.current,style:"mapbox://styles/kgb4854/cm2xeuvps002q01oj8wpfham3",center:[126.978,37.5665],zoom:11,language:"ko"});return ne.on("load",()=>{h(ne)}),()=>{o&&o.remove()}},[o]),ut.useEffect(()=>{if(!o)return;B();const ne=setInterval(B,30*60*1e3);return()=>{clearInterval(ne)}},[o]),ut.useEffect(()=>{if(!o||Object.keys(t).length===0)return;const ne={type:"FeatureCollection",features:NS.features.map(te=>{const K=t[te.properties.AREA_NM];return K?{type:"Feature",geometry:te.geometry,properties:{congestionLevel:K.congestionLevel,populationMin:K.populationMin,populationMax:K.populationMax,AREA_NM:te.properties.AREA_NM}}:null}).filter(Boolean)};o.getSource("populationDensity")?o.getSource("populationDensity").setData(ne):(o.addSource("populationDensity",{type:"geojson",data:ne}),o.addLayer({id:"population-polygon",type:"fill-extrusion",source:"populationDensity",paint:{"fill-extrusion-color":["match",["get","congestionLevel"],"","green","","yellow"," ","orange","","red","gray"],"fill-extrusion-height":["match",["get","congestionLevel"],"",30,"",60," ",90,"",120,50],"fill-extrusion-opacity":.3}})),o.on("click","population-polygon",te=>{const{AREA_NM:K,populationMin:se,populationMax:ve,congestionLevel:le}=te.features[0].properties,fe=te.lngLat,Te=t[K],Ee=`
    <strong>${K}</strong><br>
     : ${(Te==null?void 0:Te.populationMin)||"N/A"}<br>
     : ${(Te==null?void 0:Te.populationMax)||"N/A"}<br>
    : ${le}
  `;y&&y.remove();const Ze=new Dp.Popup({closeButton:!0}).setLngLat(fe).setHTML(Ee).addTo(o);w(Ze);const st=Ze.getElement().querySelector(".mapboxgl-popup-close-button");st&&st.removeAttribute("aria-hidden")}),o.on("mouseenter","population-polygon",()=>{o.getCanvas().style.cursor="pointer"}),o.on("mouseleave","population-polygon",()=>{o.getCanvas().style.cursor=""}),console.log("3D polygon data added to map")},[o,t]);const H={position:"fixed",top:0,left:0,width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",fontSize:"1.5rem",color:"#333",zIndex:1e3},X={position:"absolute",bottom:"20px",right:"20px",backgroundColor:"#fff",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},ie={display:"flex",alignItems:"center",marginBottom:"5px"},Q=ne=>({width:"15px",height:"15px",backgroundColor:ne,marginRight:"10px"});return Ne.jsxs("div",{children:[C&&Ne.jsx("div",{style:H,children:"Loading data..."}),Ne.jsx("div",{ref:e,style:{width:"100%",height:"100vh"}}),Ne.jsxs("div",{style:X,children:[Ne.jsxs("div",{style:ie,children:[Ne.jsx("div",{style:Q("green")}),Ne.jsx("span",{children:""})]}),Ne.jsxs("div",{style:ie,children:[Ne.jsx("div",{style:Q("yellow")}),Ne.jsx("span",{children:""})]}),Ne.jsxs("div",{style:ie,children:[Ne.jsx("div",{style:Q("orange")}),Ne.jsx("span",{children:" "})]}),Ne.jsxs("div",{style:ie,children:[Ne.jsx("div",{style:Q("red")}),Ne.jsx("span",{children:""})]}),Ne.jsxs("div",{style:{marginTop:"10px",fontSize:"0.9rem",color:"#666"},children:[Ne.jsx("strong",{children:" :"})," ",D]})]})]})},aU="/assets/terra_logo-DKIbOhoC.svg";function Qv(){return Ne.jsxs("div",{className:"div_top",children:[Ne.jsx("div",{className:"img_container",children:Ne.jsx(Oh,{to:"/",children:Ne.jsx("img",{src:aU,alt:"Logo",className:"img_style"})})}),Ne.jsx("div",{className:"search_container",children:Ne.jsxs("div",{className:"search_div",children:[Ne.jsx("svg",{className:"search_icon",width:"22",height:"22",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ne.jsx("path",{d:"M24.5 24.5L19.425 19.425M22.1667 12.8333C22.1667 17.988 17.988 22.1667 12.8333 22.1667C7.67868 22.1667 3.5 17.988 3.5 12.8333C3.5 7.67868 7.67868 3.5 12.8333 3.5C17.988 3.5 22.1667 7.67868 22.1667 12.8333Z",stroke:"#B3B3B3",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),Ne.jsx("input",{type:"text",placeholder:"   ",className:"search_box"})]})}),Ne.jsxs("ul",{className:"ul_container",children:[Ne.jsx("li",{children:Ne.jsx(Oh,{to:"/home",className:({isActive:e})=>e?"active":"",children:""})}),Ne.jsx("li",{children:Ne.jsx(Oh,{to:"/Question",className:({isActive:e})=>e?"active":"",children:""})}),Ne.jsx("li",{children:Ne.jsx(Oh,{to:"/recommend",className:({isActive:e})=>e?"active":"",children:""})}),Ne.jsx("li",{children:Ne.jsx(Oh,{to:"/trend",className:({isActive:e})=>e?"active":"",children:""})})]})]})}function sU(){return Ne.jsxs("div",{children:[Ne.jsx(Qv,{}),Ne.jsx("div",{children:Ne.jsx(oU,{})})]})}const lU={:{lng:127.02761,lat:37.49794},:{lng:127.1465,lat:37.5302},:{lng:127.0256,lat:37.6396},:{lng:126.8495,lat:37.5509},:{lng:126.9514,lat:37.4784},:{lng:127.0823,lat:37.5384},:{lng:126.889,lat:37.4955},:{lng:126.9002,lat:37.4569},:{lng:127.0774,lat:37.6544},:{lng:127.0395,lat:37.5744},:{lng:126.9532,lat:37.5124},:{lng:126.9084,lat:37.5647},:{lng:126.9368,lat:37.5795}},cU=()=>{const e=jl(),[t,n]=ut.useState(""),[o,h]=ut.useState("");return ut.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Ne.jsx("div",{children:Ne.jsxs("div",{className:"wrapper2",children:[Ne.jsx("h3",{className:"h3",children:"   ."}),Ne.jsxs("div",{className:"select_container",children:[Ne.jsxs("select",{onChange:n,value:t,children:[Ne.jsx("option",{value:"",disabled:!0,selected:!0,children:"  ?"}),Object.keys(lU).map((y,w)=>Ne.jsx("option",{value:y,children:y},w))]}),Ne.jsxs("select",{onClick:y=>h(y.target.value),children:[Ne.jsx("option",{value:"",disabled:!0,selected:!0,children:"  ?"}),Ne.jsx("option",{value:"1",children:""}),Ne.jsx("option",{value:"2",children:""}),Ne.jsx("option",{value:"3",children:"/"}),Ne.jsx("option",{value:"4",children:""})]})]}),Ne.jsx("div",{className:"btn_container",children:Ne.jsx("button",{className:"startBtn2",onClick:()=>e("/Analysing"),children:" "})})]})})},uU="data:image/svg+xml,%3csvg%20width='204'%20height='204'%20viewBox='0%200%20204%20204'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_f_21_102)'%3e%3ccircle%20cx='102'%20cy='102'%20r='82'%20fill='%23F5F6F8'%20fill-opacity='0.74'/%3e%3c/g%3e%3cg%20opacity='0.9'%3e%3cpath%20d='M131.25%20131.25L117.112%20117.112M124.75%2098.75C124.75%20113.109%20113.109%20124.75%2098.75%20124.75C84.3906%20124.75%2072.75%20113.109%2072.75%2098.75C72.75%2084.3906%2084.3906%2072.75%2098.75%2072.75C113.109%2072.75%20124.75%2084.3906%20124.75%2098.75Z'%20stroke='%23436EAC'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_f_21_102'%20x='0'%20y='0'%20width='204'%20height='204'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='10'%20result='effect1_foregroundBlur_21_102'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",hU="data:image/svg+xml,%3csvg%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_f_91_26)'%3e%3ccircle%20cx='160'%20cy='160'%20r='151.5'%20stroke='white'%20stroke-width='3'/%3e%3c/g%3e%3cg%20filter='url(%23filter1_f_91_26)'%3e%3ccircle%20cx='160.5'%20cy='159.5'%20r='112'%20stroke='white'%20stroke-width='3'/%3e%3c/g%3e%3ccircle%20cx='229.5'%20cy='26.5'%20r='13.5'%20fill='white'/%3e%3ccircle%20cx='130.5'%20cy='269.5'%20r='18.5'%20fill='white'/%3e%3ccircle%20cx='7.5'%20cy='7.5'%20r='7.5'%20transform='matrix(1%200%200%20-1%20295%20111)'%20fill='white'/%3e%3cdefs%3e%3cfilter%20id='filter0_f_91_26'%20x='0'%20y='0'%20width='320'%20height='320'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='3.5'%20result='effect1_foregroundBlur_91_26'/%3e%3c/filter%3e%3cfilter%20id='filter1_f_91_26'%20x='40'%20y='39'%20width='241'%20height='241'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='3.5'%20result='effect1_foregroundBlur_91_26'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",ex="/assets/logo_01-BIxHckK7.svg",fU=()=>{const e=jl();return ut.useEffect(()=>{const t=setTimeout(()=>{e("/AnalysingResult")},4e3);return()=>clearTimeout(t)},[e]),Ne.jsxs("div",{className:"backgroundAnalysng",children:[Ne.jsxs("div",{className:"circle",children:[Ne.jsx("img",{src:hU,alt:"back",className:"rotating"}),Ne.jsx("img",{src:uU,alt:"icon",className:"icon"})]}),Ne.jsx("h3",{className:"ing",children:""}),Ne.jsx("img",{src:ex,className:"imgLogo"})]})},dU="/assets/6-removebg-preview-_i6MrhJW.png",jS=()=>{const e=jl();return ut.useEffect(()=>{const t=setTimeout(()=>{e("/Main")},3e3);return()=>clearTimeout(t)},[e]),Ne.jsx("div",{className:"Logo_container",children:Ne.jsx("img",{src:dU,alt:"logo"})})},pU="/assets/Group24-5_aPSia2.png",mU=()=>{const e=jl();return Ne.jsxs("div",{className:"wrapper_Result",children:[Ne.jsxs("div",{className:"rowText",children:[Ne.jsx("p",{className:"p1",children:""})," ",Ne.jsx("p",{className:"p2",children:"  "})]}),Ne.jsxs("div",{className:"Result",children:[Ne.jsx("img",{src:pU,className:"circleResult"}),Ne.jsx("p",{className:"p3",children:""})," "]}),Ne.jsx("button",{className:"startBtn",onClick:()=>e("/design"),children:Ne.jsx("a",{children:"  "})})]})};function cR(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(n=cR(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function tn(){for(var e,t,n=0,o="",h=arguments.length;n<h;n++)(e=arguments[n])&&(t=cR(e))&&(o&&(o+=" "),o+=t);return o}var gU=Array.isArray,Yo=gU,yU=typeof Uh=="object"&&Uh&&Uh.Object===Object&&Uh,uR=yU,_U=uR,vU=typeof self=="object"&&self&&self.Object===Object&&self,xU=_U||vU||Function("return this")(),Ys=xU,bU=Ys,wU=bU.Symbol,g6=wU,$S=g6,hR=Object.prototype,AU=hR.hasOwnProperty,TU=hR.toString,Rh=$S?$S.toStringTag:void 0;function SU(e){var t=AU.call(e,Rh),n=e[Rh];try{e[Rh]=void 0;var o=!0}catch{}var h=TU.call(e);return o&&(t?e[Rh]=n:delete e[Rh]),h}var EU=SU,PU=Object.prototype,MU=PU.toString;function CU(e){return MU.call(e)}var IU=CU,US=g6,OU=EU,RU=IU,DU="[object Null]",kU="[object Undefined]",VS=US?US.toStringTag:void 0;function LU(e){return e==null?e===void 0?kU:DU:VS&&VS in Object(e)?OU(e):RU(e)}var $l=LU;function zU(e){return e!=null&&typeof e=="object"}var Ul=zU,BU=$l,FU=Ul,NU="[object Symbol]";function jU(e){return typeof e=="symbol"||FU(e)&&BU(e)==NU}var S2=jU,$U=Yo,UU=S2,VU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GU=/^\w*$/;function qU(e,t){if($U(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||UU(e)?!0:GU.test(e)||!VU.test(e)||t!=null&&e in Object(t)}var tx=qU;function WU(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mc=WU;const E2=Cn(mc);var HU=$l,ZU=mc,XU="[object AsyncFunction]",YU="[object Function]",KU="[object GeneratorFunction]",JU="[object Proxy]";function QU(e){if(!ZU(e))return!1;var t=HU(e);return t==YU||t==KU||t==XU||t==JU}var rx=QU;const Xr=Cn(rx);var eV=Ys,tV=eV["__core-js_shared__"],rV=tV,lg=rV,GS=function(){var e=/[^.]+$/.exec(lg&&lg.keys&&lg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function nV(e){return!!GS&&GS in e}var iV=nV,oV=Function.prototype,aV=oV.toString;function sV(e){if(e!=null){try{return aV.call(e)}catch{}try{return e+""}catch{}}return""}var fR=sV,lV=rx,cV=iV,uV=mc,hV=fR,fV=/[\\^$.*+?()[\]{}|]/g,dV=/^\[object .+?Constructor\]$/,pV=Function.prototype,mV=Object.prototype,gV=pV.toString,yV=mV.hasOwnProperty,_V=RegExp("^"+gV.call(yV).replace(fV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vV(e){if(!uV(e)||cV(e))return!1;var t=lV(e)?_V:dV;return t.test(hV(e))}var xV=vV;function bV(e,t){return e==null?void 0:e[t]}var wV=bV,AV=xV,TV=wV;function SV(e,t){var n=TV(e,t);return AV(n)?n:void 0}var Zu=SV,EV=Zu,PV=EV(Object,"create"),J9=PV,qS=J9;function MV(){this.__data__=qS?qS(null):{},this.size=0}var CV=MV;function IV(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var OV=IV,RV=J9,DV="__lodash_hash_undefined__",kV=Object.prototype,LV=kV.hasOwnProperty;function zV(e){var t=this.__data__;if(RV){var n=t[e];return n===DV?void 0:n}return LV.call(t,e)?t[e]:void 0}var BV=zV,FV=J9,NV=Object.prototype,jV=NV.hasOwnProperty;function $V(e){var t=this.__data__;return FV?t[e]!==void 0:jV.call(t,e)}var UV=$V,VV=J9,GV="__lodash_hash_undefined__";function qV(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=VV&&t===void 0?GV:t,this}var WV=qV,HV=CV,ZV=OV,XV=BV,YV=UV,KV=WV;function P2(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}P2.prototype.clear=HV;P2.prototype.delete=ZV;P2.prototype.get=XV;P2.prototype.has=YV;P2.prototype.set=KV;var JV=P2;function QV(){this.__data__=[],this.size=0}var eG=QV;function tG(e,t){return e===t||e!==e&&t!==t}var nx=tG,rG=nx;function nG(e,t){for(var n=e.length;n--;)if(rG(e[n][0],t))return n;return-1}var Q9=nG,iG=Q9,oG=Array.prototype,aG=oG.splice;function sG(e){var t=this.__data__,n=iG(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():aG.call(t,n,1),--this.size,!0}var lG=sG,cG=Q9;function uG(e){var t=this.__data__,n=cG(t,e);return n<0?void 0:t[n][1]}var hG=uG,fG=Q9;function dG(e){return fG(this.__data__,e)>-1}var pG=dG,mG=Q9;function gG(e,t){var n=this.__data__,o=mG(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}var yG=gG,_G=eG,vG=lG,xG=hG,bG=pG,wG=yG;function M2(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}M2.prototype.clear=_G;M2.prototype.delete=vG;M2.prototype.get=xG;M2.prototype.has=bG;M2.prototype.set=wG;var e4=M2,AG=Zu,TG=Ys,SG=AG(TG,"Map"),ix=SG,WS=JV,EG=e4,PG=ix;function MG(){this.size=0,this.__data__={hash:new WS,map:new(PG||EG),string:new WS}}var CG=MG;function IG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var OG=IG,RG=OG;function DG(e,t){var n=e.__data__;return RG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var t4=DG,kG=t4;function LG(e){var t=kG(this,e).delete(e);return this.size-=t?1:0,t}var zG=LG,BG=t4;function FG(e){return BG(this,e).get(e)}var NG=FG,jG=t4;function $G(e){return jG(this,e).has(e)}var UG=$G,VG=t4;function GG(e,t){var n=VG(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}var qG=GG,WG=CG,HG=zG,ZG=NG,XG=UG,YG=qG;function C2(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}C2.prototype.clear=WG;C2.prototype.delete=HG;C2.prototype.get=ZG;C2.prototype.has=XG;C2.prototype.set=YG;var ox=C2,dR=ox,KG="Expected a function";function ax(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(KG);var n=function(){var o=arguments,h=t?t.apply(this,o):o[0],y=n.cache;if(y.has(h))return y.get(h);var w=e.apply(this,o);return n.cache=y.set(h,w)||y,w};return n.cache=new(ax.Cache||dR),n}ax.Cache=dR;var pR=ax;const JG=Cn(pR);var QG=pR,eq=500;function tq(e){var t=QG(e,function(o){return n.size===eq&&n.clear(),o}),n=t.cache;return t}var rq=tq,nq=rq,iq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oq=/\\(\\)?/g,aq=nq(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(iq,function(n,o,h,y){t.push(h?y.replace(oq,"$1"):o||n)}),t}),sq=aq;function lq(e,t){for(var n=-1,o=e==null?0:e.length,h=Array(o);++n<o;)h[n]=t(e[n],n,e);return h}var sx=lq,HS=g6,cq=sx,uq=Yo,hq=S2,fq=1/0,ZS=HS?HS.prototype:void 0,XS=ZS?ZS.toString:void 0;function mR(e){if(typeof e=="string")return e;if(uq(e))return cq(e,mR)+"";if(hq(e))return XS?XS.call(e):"";var t=e+"";return t=="0"&&1/e==-fq?"-0":t}var dq=mR,pq=dq;function mq(e){return e==null?"":pq(e)}var gR=mq,gq=Yo,yq=tx,_q=sq,vq=gR;function xq(e,t){return gq(e)?e:yq(e,t)?[e]:_q(vq(e))}var yR=xq,bq=S2,wq=1/0;function Aq(e){if(typeof e=="string"||bq(e))return e;var t=e+"";return t=="0"&&1/e==-wq?"-0":t}var r4=Aq,Tq=yR,Sq=r4;function Eq(e,t){t=Tq(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[Sq(t[n++])];return n&&n==o?e:void 0}var lx=Eq,Pq=lx;function Mq(e,t,n){var o=e==null?void 0:Pq(e,t);return o===void 0?n:o}var _R=Mq;const pa=Cn(_R);function Cq(e){return e==null}var Iq=Cq;const an=Cn(Iq);var Oq=$l,Rq=Yo,Dq=Ul,kq="[object String]";function Lq(e){return typeof e=="string"||!Rq(e)&&Dq(e)&&Oq(e)==kq}var zq=Lq;const y6=Cn(zq);var vR={exports:{}},In={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx=Symbol.for("react.element"),ux=Symbol.for("react.portal"),n4=Symbol.for("react.fragment"),i4=Symbol.for("react.strict_mode"),o4=Symbol.for("react.profiler"),a4=Symbol.for("react.provider"),s4=Symbol.for("react.context"),Bq=Symbol.for("react.server_context"),l4=Symbol.for("react.forward_ref"),c4=Symbol.for("react.suspense"),u4=Symbol.for("react.suspense_list"),h4=Symbol.for("react.memo"),f4=Symbol.for("react.lazy"),Fq=Symbol.for("react.offscreen"),xR;xR=Symbol.for("react.module.reference");function qa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case cx:switch(e=e.type,e){case n4:case o4:case i4:case c4:case u4:return e;default:switch(e=e&&e.$$typeof,e){case Bq:case s4:case l4:case f4:case h4:case a4:return e;default:return t}}case ux:return t}}}In.ContextConsumer=s4;In.ContextProvider=a4;In.Element=cx;In.ForwardRef=l4;In.Fragment=n4;In.Lazy=f4;In.Memo=h4;In.Portal=ux;In.Profiler=o4;In.StrictMode=i4;In.Suspense=c4;In.SuspenseList=u4;In.isAsyncMode=function(){return!1};In.isConcurrentMode=function(){return!1};In.isContextConsumer=function(e){return qa(e)===s4};In.isContextProvider=function(e){return qa(e)===a4};In.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===cx};In.isForwardRef=function(e){return qa(e)===l4};In.isFragment=function(e){return qa(e)===n4};In.isLazy=function(e){return qa(e)===f4};In.isMemo=function(e){return qa(e)===h4};In.isPortal=function(e){return qa(e)===ux};In.isProfiler=function(e){return qa(e)===o4};In.isStrictMode=function(e){return qa(e)===i4};In.isSuspense=function(e){return qa(e)===c4};In.isSuspenseList=function(e){return qa(e)===u4};In.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===n4||e===o4||e===i4||e===c4||e===u4||e===Fq||typeof e=="object"&&e!==null&&(e.$$typeof===f4||e.$$typeof===h4||e.$$typeof===a4||e.$$typeof===s4||e.$$typeof===l4||e.$$typeof===xR||e.getModuleId!==void 0)};In.typeOf=qa;vR.exports=In;var Nq=vR.exports,jq=$l,$q=Ul,Uq="[object Number]";function Vq(e){return typeof e=="number"||$q(e)&&jq(e)==Uq}var bR=Vq;const Gq=Cn(bR);var qq=bR;function Wq(e){return qq(e)&&e!=+e}var Hq=Wq;const _6=Cn(Hq);var Io=function(t){return t===0?0:t>0?1:-1},Eu=function(t){return y6(t)&&t.indexOf("%")===t.length-1},rr=function(t){return Gq(t)&&!_6(t)},ki=function(t){return rr(t)||y6(t)},Zq=0,v6=function(t){var n=++Zq;return"".concat(t||"").concat(n)},Oo=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!rr(t)&&!y6(t))return o;var y;if(Eu(t)){var w=t.indexOf("%");y=n*parseFloat(t.slice(0,w))/100}else y=+t;return _6(y)&&(y=o),h&&y>n&&(y=n),y},m0=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Xq=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,o={},h=0;h<n;h++)if(!o[t[h]])o[t[h]]=!0;else return!0;return!1},q1=function(t,n){return rr(t)&&rr(n)?function(o){return t+o*(n-t)}:function(){return n}};function Ry(e,t,n){return!e||!e.length?null:e.find(function(o){return o&&(typeof t=="function"?t(o):pa(o,t))===n})}function N0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var o in t)if({}.hasOwnProperty.call(t,o)&&!{}.hasOwnProperty.call(e,o))return!1;return!0}function Dy(e){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(e)}var Yq=["viewBox","children"],Kq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],YS=["points","pathLength"],cg={svg:Yq,polygon:YS,polyline:YS},hx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],kp=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var o=t;if(ut.isValidElement(t)&&(o=t.props),!E2(o))return null;var h={};return Object.keys(o).forEach(function(y){hx.includes(y)&&(h[y]=n||function(w){return o[y](o,w)})}),h},Jq=function(t,n,o){return function(h){return t(n,o,h),null}},ju=function(t,n,o){if(!E2(t)||Dy(t)!=="object")return null;var h=null;return Object.keys(t).forEach(function(y){var w=t[y];hx.includes(y)&&typeof w=="function"&&(h||(h={}),h[y]=Jq(w,n,o))}),h},Qq=["children"],eW=["children"];function KS(e,t){if(e==null)return{};var n=tW(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function tW(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var JS={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Pl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},QS=null,ug=null,fx=function e(t){if(t===QS&&Array.isArray(ug))return ug;var n=[];return ut.Children.forEach(t,function(o){an(o)||(Nq.isFragment(o)?n=n.concat(e(o.props.children)):n.push(o))}),ug=n,QS=t,n};function ja(e,t){var n=[],o=[];return Array.isArray(t)?o=t.map(function(h){return Pl(h)}):o=[Pl(t)],fx(e).forEach(function(h){var y=pa(h,"type.displayName")||pa(h,"type.name");o.indexOf(y)!==-1&&n.push(h)}),n}function ua(e,t){var n=ja(e,t);return n&&n[0]}var eE=function(t){if(!t||!t.props)return!1;var n=t.props,o=n.width,h=n.height;return!(!rr(o)||o<=0||!rr(h)||h<=0)},rW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],nW=function(t){return t&&t.type&&y6(t.type)&&rW.indexOf(t.type)>=0},iW=function(t,n,o,h){var y,w=(y=cg==null?void 0:cg[h])!==null&&y!==void 0?y:[];return!Xr(t)&&(h&&w.includes(n)||Kq.includes(n))||o&&hx.includes(n)},zr=function(t,n,o){if(!t||typeof t=="function"||typeof t=="boolean")return null;var h=t;if(ut.isValidElement(t)&&(h=t.props),!E2(h))return null;var y={};return Object.keys(h).forEach(function(w){var C;iW((C=h)===null||C===void 0?void 0:C[w],w,n,o)&&(y[w]=h[w])}),y},ky=function e(t,n){if(t===n)return!0;var o=ut.Children.count(t);if(o!==ut.Children.count(n))return!1;if(o===0)return!0;if(o===1)return tE(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var h=0;h<o;h++){var y=t[h],w=n[h];if(Array.isArray(y)||Array.isArray(w)){if(!e(y,w))return!1}else if(!tE(y,w))return!1}return!0},tE=function(t,n){if(an(t)&&an(n))return!0;if(!an(t)&&!an(n)){var o=t.props||{},h=o.children,y=KS(o,Qq),w=n.props||{},C=w.children,a=KS(w,eW);return h&&C?N0(y,a)&&ky(h,C):!h&&!C?N0(y,a):!1}return!1},rE=function(t,n){var o=[],h={};return fx(t).forEach(function(y,w){if(nW(y))o.push(y);else if(y){var C=Pl(y.type),a=n[C]||{},D=a.handler,j=a.once;if(D&&(!j||!h[C])){var B=D(y,C,w);o.push(B),h[C]=!0}}}),o},oW=function(t){var n=t&&t.type;return n&&JS[n]?JS[n]:null},aW=function(t,n){return fx(n).indexOf(t)},sW=["children","width","height","viewBox","className","style","title","desc"];function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ly.apply(this,arguments)}function lW(e,t){if(e==null)return{};var n=cW(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function cW(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function zy(e){var t=e.children,n=e.width,o=e.height,h=e.viewBox,y=e.className,w=e.style,C=e.title,a=e.desc,D=lW(e,sW),j=h||{width:n,height:o,x:0,y:0},B=tn("recharts-surface",y);return tt.createElement("svg",Ly({},zr(D,!0,"svg"),{className:B,width:n,height:o,style:w,viewBox:"".concat(j.x," ").concat(j.y," ").concat(j.width," ").concat(j.height)}),tt.createElement("title",null,C),tt.createElement("desc",null,a),t)}var uW=["children","className"];function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},By.apply(this,arguments)}function hW(e,t){if(e==null)return{};var n=fW(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function fW(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var Pn=tt.forwardRef(function(e,t){var n=e.children,o=e.className,h=hW(e,uW),y=tn("recharts-layer",o);return tt.createElement("g",By({className:y},zr(h,!0),{ref:t}),n)}),Ml=function(t,n){for(var o=arguments.length,h=new Array(o>2?o-2:0),y=2;y<o;y++)h[y-2]=arguments[y]};function dW(e,t,n){var o=-1,h=e.length;t<0&&(t=-t>h?0:h+t),n=n>h?h:n,n<0&&(n+=h),h=t>n?0:n-t>>>0,t>>>=0;for(var y=Array(h);++o<h;)y[o]=e[o+t];return y}var pW=dW,mW=pW;function gW(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:mW(e,t,n)}var yW=gW,_W="\\ud800-\\udfff",vW="\\u0300-\\u036f",xW="\\ufe20-\\ufe2f",bW="\\u20d0-\\u20ff",wW=vW+xW+bW,AW="\\ufe0e\\ufe0f",TW="\\u200d",SW=RegExp("["+TW+_W+wW+AW+"]");function EW(e){return SW.test(e)}var wR=EW;function PW(e){return e.split("")}var MW=PW,AR="\\ud800-\\udfff",CW="\\u0300-\\u036f",IW="\\ufe20-\\ufe2f",OW="\\u20d0-\\u20ff",RW=CW+IW+OW,DW="\\ufe0e\\ufe0f",kW="["+AR+"]",Fy="["+RW+"]",Ny="\\ud83c[\\udffb-\\udfff]",LW="(?:"+Fy+"|"+Ny+")",TR="[^"+AR+"]",SR="(?:\\ud83c[\\udde6-\\uddff]){2}",ER="[\\ud800-\\udbff][\\udc00-\\udfff]",zW="\\u200d",PR=LW+"?",MR="["+DW+"]?",BW="(?:"+zW+"(?:"+[TR,SR,ER].join("|")+")"+MR+PR+")*",FW=MR+PR+BW,NW="(?:"+[TR+Fy+"?",Fy,SR,ER,kW].join("|")+")",jW=RegExp(Ny+"(?="+Ny+")|"+NW+FW,"g");function $W(e){return e.match(jW)||[]}var UW=$W,VW=MW,GW=wR,qW=UW;function WW(e){return GW(e)?qW(e):VW(e)}var HW=WW,ZW=yW,XW=wR,YW=HW,KW=gR;function JW(e){return function(t){t=KW(t);var n=XW(t)?YW(t):void 0,o=n?n[0]:t.charAt(0),h=n?ZW(n,1).join(""):t.slice(1);return o[e]()+h}}var QW=JW,eH=QW,tH=eH("toUpperCase"),rH=tH;const d4=Cn(rH);function Gn(e){return function(){return e}}const CR=Math.cos,Lp=Math.sin,ws=Math.sqrt,zp=Math.PI,p4=2*zp,jy=Math.PI,$y=2*jy,vu=1e-6,nH=$y-vu;function IR(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function iH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IR;const n=10**t;return function(o){this._+=o[0];for(let h=1,y=o.length;h<y;++h)this._+=Math.round(arguments[h]*n)/n+o[h]}}class oH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IR:iH(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,o,h){this._append`Q${+t},${+n},${this._x1=+o},${this._y1=+h}`}bezierCurveTo(t,n,o,h,y,w){this._append`C${+t},${+n},${+o},${+h},${this._x1=+y},${this._y1=+w}`}arcTo(t,n,o,h,y){if(t=+t,n=+n,o=+o,h=+h,y=+y,y<0)throw new Error(`negative radius: ${y}`);let w=this._x1,C=this._y1,a=o-t,D=h-n,j=w-t,B=C-n,H=j*j+B*B;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(H>vu)if(!(Math.abs(B*a-D*j)>vu)||!y)this._append`L${this._x1=t},${this._y1=n}`;else{let X=o-w,ie=h-C,Q=a*a+D*D,ne=X*X+ie*ie,te=Math.sqrt(Q),K=Math.sqrt(H),se=y*Math.tan((jy-Math.acos((Q+H-ne)/(2*te*K)))/2),ve=se/K,le=se/te;Math.abs(ve-1)>vu&&this._append`L${t+ve*j},${n+ve*B}`,this._append`A${y},${y},0,0,${+(B*X>j*ie)},${this._x1=t+le*a},${this._y1=n+le*D}`}}arc(t,n,o,h,y,w){if(t=+t,n=+n,o=+o,w=!!w,o<0)throw new Error(`negative radius: ${o}`);let C=o*Math.cos(h),a=o*Math.sin(h),D=t+C,j=n+a,B=1^w,H=w?h-y:y-h;this._x1===null?this._append`M${D},${j}`:(Math.abs(this._x1-D)>vu||Math.abs(this._y1-j)>vu)&&this._append`L${D},${j}`,o&&(H<0&&(H=H%$y+$y),H>nH?this._append`A${o},${o},0,1,${B},${t-C},${n-a}A${o},${o},0,1,${B},${this._x1=D},${this._y1=j}`:H>vu&&this._append`A${o},${o},0,${+(H>=jy)},${B},${this._x1=t+o*Math.cos(y)},${this._y1=n+o*Math.sin(y)}`)}rect(t,n,o,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${o=+o}v${+h}h${-o}Z`}toString(){return this._}}function dx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);t=o}return e},()=>new oH(t)}function px(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OR(e){this._context=e}OR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m4(e){return new OR(e)}function RR(e){return e[0]}function DR(e){return e[1]}function kR(e,t){var n=Gn(!0),o=null,h=m4,y=null,w=dx(C);e=typeof e=="function"?e:e===void 0?RR:Gn(e),t=typeof t=="function"?t:t===void 0?DR:Gn(t);function C(a){var D,j=(a=px(a)).length,B,H=!1,X;for(o==null&&(y=h(X=w())),D=0;D<=j;++D)!(D<j&&n(B=a[D],D,a))===H&&((H=!H)?y.lineStart():y.lineEnd()),H&&y.point(+e(B,D,a),+t(B,D,a));if(X)return y=null,X+""||null}return C.x=function(a){return arguments.length?(e=typeof a=="function"?a:Gn(+a),C):e},C.y=function(a){return arguments.length?(t=typeof a=="function"?a:Gn(+a),C):t},C.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Gn(!!a),C):n},C.curve=function(a){return arguments.length?(h=a,o!=null&&(y=h(o)),C):h},C.context=function(a){return arguments.length?(a==null?o=y=null:y=h(o=a),C):o},C}function Rd(e,t,n){var o=null,h=Gn(!0),y=null,w=m4,C=null,a=dx(D);e=typeof e=="function"?e:e===void 0?RR:Gn(+e),t=typeof t=="function"?t:Gn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?DR:Gn(+n);function D(B){var H,X,ie,Q=(B=px(B)).length,ne,te=!1,K,se=new Array(Q),ve=new Array(Q);for(y==null&&(C=w(K=a())),H=0;H<=Q;++H){if(!(H<Q&&h(ne=B[H],H,B))===te)if(te=!te)X=H,C.areaStart(),C.lineStart();else{for(C.lineEnd(),C.lineStart(),ie=H-1;ie>=X;--ie)C.point(se[ie],ve[ie]);C.lineEnd(),C.areaEnd()}te&&(se[H]=+e(ne,H,B),ve[H]=+t(ne,H,B),C.point(o?+o(ne,H,B):se[H],n?+n(ne,H,B):ve[H]))}if(K)return C=null,K+""||null}function j(){return kR().defined(h).curve(w).context(y)}return D.x=function(B){return arguments.length?(e=typeof B=="function"?B:Gn(+B),o=null,D):e},D.x0=function(B){return arguments.length?(e=typeof B=="function"?B:Gn(+B),D):e},D.x1=function(B){return arguments.length?(o=B==null?null:typeof B=="function"?B:Gn(+B),D):o},D.y=function(B){return arguments.length?(t=typeof B=="function"?B:Gn(+B),n=null,D):t},D.y0=function(B){return arguments.length?(t=typeof B=="function"?B:Gn(+B),D):t},D.y1=function(B){return arguments.length?(n=B==null?null:typeof B=="function"?B:Gn(+B),D):n},D.lineX0=D.lineY0=function(){return j().x(e).y(t)},D.lineY1=function(){return j().x(e).y(n)},D.lineX1=function(){return j().x(o).y(t)},D.defined=function(B){return arguments.length?(h=typeof B=="function"?B:Gn(!!B),D):h},D.curve=function(B){return arguments.length?(w=B,y!=null&&(C=w(y)),D):w},D.context=function(B){return arguments.length?(B==null?y=C=null:C=w(y=B),D):y},D}class LR{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function aH(e){return new LR(e,!0)}function sH(e){return new LR(e,!1)}const mx={draw(e,t){const n=ws(t/zp);e.moveTo(n,0),e.arc(0,0,n,0,p4)}},lH={draw(e,t){const n=ws(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},zR=ws(1/3),cH=zR*2,uH={draw(e,t){const n=ws(t/cH),o=n*zR;e.moveTo(0,-n),e.lineTo(o,0),e.lineTo(0,n),e.lineTo(-o,0),e.closePath()}},hH={draw(e,t){const n=ws(t),o=-n/2;e.rect(o,o,n,n)}},fH=.8908130915292852,BR=Lp(zp/10)/Lp(7*zp/10),dH=Lp(p4/10)*BR,pH=-CR(p4/10)*BR,mH={draw(e,t){const n=ws(t*fH),o=dH*n,h=pH*n;e.moveTo(0,-n),e.lineTo(o,h);for(let y=1;y<5;++y){const w=p4*y/5,C=CR(w),a=Lp(w);e.lineTo(a*n,-C*n),e.lineTo(C*o-a*h,a*o+C*h)}e.closePath()}},hg=ws(3),gH={draw(e,t){const n=-ws(t/(hg*3));e.moveTo(0,n*2),e.lineTo(-hg*n,-n),e.lineTo(hg*n,-n),e.closePath()}},Oa=-.5,Ra=ws(3)/2,Uy=1/ws(12),yH=(Uy/2+1)*3,_H={draw(e,t){const n=ws(t/yH),o=n/2,h=n*Uy,y=o,w=n*Uy+n,C=-y,a=w;e.moveTo(o,h),e.lineTo(y,w),e.lineTo(C,a),e.lineTo(Oa*o-Ra*h,Ra*o+Oa*h),e.lineTo(Oa*y-Ra*w,Ra*y+Oa*w),e.lineTo(Oa*C-Ra*a,Ra*C+Oa*a),e.lineTo(Oa*o+Ra*h,Oa*h-Ra*o),e.lineTo(Oa*y+Ra*w,Oa*w-Ra*y),e.lineTo(Oa*C+Ra*a,Oa*a-Ra*C),e.closePath()}};function vH(e,t){let n=null,o=dx(h);e=typeof e=="function"?e:Gn(e||mx),t=typeof t=="function"?t:Gn(t===void 0?64:+t);function h(){let y;if(n||(n=y=o()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),y)return n=null,y+""||null}return h.type=function(y){return arguments.length?(e=typeof y=="function"?y:Gn(y),h):e},h.size=function(y){return arguments.length?(t=typeof y=="function"?y:Gn(+y),h):t},h.context=function(y){return arguments.length?(n=y??null,h):n},h}function Bp(){}function Fp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function FR(e){this._context=e}FR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xH(e){return new FR(e)}function NR(e){this._context=e}NR.prototype={areaStart:Bp,areaEnd:Bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bH(e){return new NR(e)}function jR(e){this._context=e}jR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,o=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wH(e){return new jR(e)}function $R(e){this._context=e}$R.prototype={areaStart:Bp,areaEnd:Bp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AH(e){return new $R(e)}function nE(e){return e<0?-1:1}function iE(e,t,n){var o=e._x1-e._x0,h=t-e._x1,y=(e._y1-e._y0)/(o||h<0&&-0),w=(n-e._y1)/(h||o<0&&-0),C=(y*h+w*o)/(o+h);return(nE(y)+nE(w))*Math.min(Math.abs(y),Math.abs(w),.5*Math.abs(C))||0}function oE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fg(e,t,n){var o=e._x0,h=e._y0,y=e._x1,w=e._y1,C=(y-o)/3;e._context.bezierCurveTo(o+C,h+C*t,y-C,w-C*n,y,w)}function Np(e){this._context=e}Np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fg(this,this._t0,oE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fg(this,oE(this,n=iE(this,e,t)),n);break;default:fg(this,this._t0,n=iE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function UR(e){this._context=new VR(e)}(UR.prototype=Object.create(Np.prototype)).point=function(e,t){Np.prototype.point.call(this,t,e)};function VR(e){this._context=e}VR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,o,h,y){this._context.bezierCurveTo(t,e,o,n,y,h)}};function TH(e){return new Np(e)}function SH(e){return new UR(e)}function GR(e){this._context=e}GR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var o=aE(e),h=aE(t),y=0,w=1;w<n;++y,++w)this._context.bezierCurveTo(o[0][y],h[0][y],o[1][y],h[1][y],e[w],t[w]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function aE(e){var t,n=e.length-1,o,h=new Array(n),y=new Array(n),w=new Array(n);for(h[0]=0,y[0]=2,w[0]=e[0]+2*e[1],t=1;t<n-1;++t)h[t]=1,y[t]=4,w[t]=4*e[t]+2*e[t+1];for(h[n-1]=2,y[n-1]=7,w[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o=h[t]/y[t-1],y[t]-=o,w[t]-=o*w[t-1];for(h[n-1]=w[n-1]/y[n-1],t=n-2;t>=0;--t)h[t]=(w[t]-h[t+1])/y[t];for(y[n-1]=(e[n]+h[n-1])/2,t=0;t<n-1;++t)y[t]=2*e[t+1]-h[t+1];return[h,y]}function EH(e){return new GR(e)}function g4(e,t){this._context=e,this._t=t}g4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function PH(e){return new g4(e,.5)}function MH(e){return new g4(e,0)}function CH(e){return new g4(e,1)}function K0(e,t){if((w=e.length)>1)for(var n=1,o,h,y=e[t[0]],w,C=y.length;n<w;++n)for(h=y,y=e[t[n]],o=0;o<C;++o)y[o][1]+=y[o][0]=isNaN(h[o][1])?h[o][0]:h[o][1]}function Vy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function IH(e,t){return e[t]}function OH(e){const t=[];return t.key=e,t}function RH(){var e=Gn([]),t=Vy,n=K0,o=IH;function h(y){var w=Array.from(e.apply(this,arguments),OH),C,a=w.length,D=-1,j;for(const B of y)for(C=0,++D;C<a;++C)(w[C][D]=[0,+o(B,w[C].key,D,y)]).data=B;for(C=0,j=px(t(w));C<a;++C)w[j[C]].index=C;return n(w,j),w}return h.keys=function(y){return arguments.length?(e=typeof y=="function"?y:Gn(Array.from(y)),h):e},h.value=function(y){return arguments.length?(o=typeof y=="function"?y:Gn(+y),h):o},h.order=function(y){return arguments.length?(t=y==null?Vy:typeof y=="function"?y:Gn(Array.from(y)),h):t},h.offset=function(y){return arguments.length?(n=y??K0,h):n},h}function DH(e,t){if((o=e.length)>0){for(var n,o,h=0,y=e[0].length,w;h<y;++h){for(w=n=0;n<o;++n)w+=e[n][h][1]||0;if(w)for(n=0;n<o;++n)e[n][h][1]/=w}K0(e,t)}}function kH(e,t){if((h=e.length)>0){for(var n=0,o=e[t[0]],h,y=o.length;n<y;++n){for(var w=0,C=0;w<h;++w)C+=e[w][n][1]||0;o[n][1]+=o[n][0]=-C/2}K0(e,t)}}function LH(e,t){if(!(!((w=e.length)>0)||!((y=(h=e[t[0]]).length)>0))){for(var n=0,o=1,h,y,w;o<y;++o){for(var C=0,a=0,D=0;C<w;++C){for(var j=e[t[C]],B=j[o][1]||0,H=j[o-1][1]||0,X=(B-H)/2,ie=0;ie<C;++ie){var Q=e[t[ie]],ne=Q[o][1]||0,te=Q[o-1][1]||0;X+=ne-te}a+=B,D+=X*B}h[o-1][1]+=h[o-1][0]=n,a&&(n-=D/a)}h[o-1][1]+=h[o-1][0]=n,K0(e,t)}}function M5(e){"@babel/helpers - typeof";return M5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M5(e)}var zH=["type","size","sizeType"];function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gy.apply(this,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function lE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(o){BH(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function BH(e,t,n){return t=FH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FH(e){var t=NH(e,"string");return M5(t)=="symbol"?t:t+""}function NH(e,t){if(M5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(M5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jH(e,t){if(e==null)return{};var n=$H(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function $H(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var qR={symbolCircle:mx,symbolCross:lH,symbolDiamond:uH,symbolSquare:hH,symbolStar:mH,symbolTriangle:gH,symbolWye:_H},UH=Math.PI/180,VH=function(t){var n="symbol".concat(d4(t));return qR[n]||mx},GH=function(t,n,o){if(n==="area")return t;switch(o){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var h=18*UH;return 1.25*t*t*(Math.tan(h)-Math.tan(h*2)*Math.pow(Math.tan(h),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},qH=function(t,n){qR["symbol".concat(d4(t))]=n},gx=function(t){var n=t.type,o=n===void 0?"circle":n,h=t.size,y=h===void 0?64:h,w=t.sizeType,C=w===void 0?"area":w,a=jH(t,zH),D=lE(lE({},a),{},{type:o,size:y,sizeType:C}),j=function(){var ne=VH(o),te=vH().type(ne).size(GH(y,C,o));return te()},B=D.className,H=D.cx,X=D.cy,ie=zr(D,!0);return H===+H&&X===+X&&y===+y?tt.createElement("path",Gy({},ie,{className:tn("recharts-symbols",B),transform:"translate(".concat(H,", ").concat(X,")"),d:j()})):null};gx.registerSymbol=qH;function J0(e){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J0(e)}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qy.apply(this,arguments)}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function WH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(o){C5(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function HH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZH(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,HR(o.key),o)}}function XH(e,t,n){return t&&ZH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YH(e,t,n){return t=jp(t),KH(e,WR()?Reflect.construct(t,n||[],jp(e).constructor):t.apply(e,n))}function KH(e,t){if(t&&(J0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JH(e)}function JH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WR=function(){return!!e})()}function jp(e){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jp(e)}function QH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},Wy(e,t)}function C5(e,t,n){return t=HR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HR(e){var t=eZ(e,"string");return J0(t)=="symbol"?t:t+""}function eZ(e,t){if(J0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(J0(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Da=32,yx=function(e){function t(){return HH(this,t),YH(this,t,arguments)}return QH(t,e),XH(t,[{key:"renderIcon",value:function(o){var h=this.props.inactiveColor,y=Da/2,w=Da/6,C=Da/3,a=o.inactive?h:o.color;if(o.type==="plainline")return tt.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:o.payload.strokeDasharray,x1:0,y1:y,x2:Da,y2:y,className:"recharts-legend-icon"});if(o.type==="line")return tt.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(y,"h").concat(C,`
            A`).concat(w,",").concat(w,",0,1,1,").concat(2*C,",").concat(y,`
            H`).concat(Da,"M").concat(2*C,",").concat(y,`
            A`).concat(w,",").concat(w,",0,1,1,").concat(C,",").concat(y),className:"recharts-legend-icon"});if(o.type==="rect")return tt.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(Da/8,"h").concat(Da,"v").concat(Da*3/4,"h").concat(-Da,"z"),className:"recharts-legend-icon"});if(tt.isValidElement(o.legendIcon)){var D=WH({},o);return delete D.legendIcon,tt.cloneElement(o.legendIcon,D)}return tt.createElement(gx,{fill:a,cx:y,cy:y,size:Da,sizeType:"diameter",type:o.type})}},{key:"renderItems",value:function(){var o=this,h=this.props,y=h.payload,w=h.iconSize,C=h.layout,a=h.formatter,D=h.inactiveColor,j={x:0,y:0,width:Da,height:Da},B={display:C==="horizontal"?"inline-block":"block",marginRight:10},H={display:"inline-block",verticalAlign:"middle",marginRight:4};return y.map(function(X,ie){var Q=X.formatter||a,ne=tn(C5(C5({"recharts-legend-item":!0},"legend-item-".concat(ie),!0),"inactive",X.inactive));if(X.type==="none")return null;var te=Xr(X.value)?null:X.value;Ml(!Xr(X.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var K=X.inactive?D:X.color;return tt.createElement("li",qy({className:ne,style:B,key:"legend-item-".concat(ie)},ju(o.props,X,ie)),tt.createElement(zy,{width:w,height:w,viewBox:j,style:H},o.renderIcon(X)),tt.createElement("span",{className:"recharts-legend-item-text",style:{color:K}},Q?Q(te,X,ie):te))})}},{key:"render",value:function(){var o=this.props,h=o.payload,y=o.layout,w=o.align;if(!h||!h.length)return null;var C={padding:0,margin:0,textAlign:y==="horizontal"?w:"left"};return tt.createElement("ul",{className:"recharts-default-legend",style:C},this.renderItems())}}])}(ut.PureComponent);C5(yx,"displayName","Legend");C5(yx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var tZ=e4;function rZ(){this.__data__=new tZ,this.size=0}var nZ=rZ;function iZ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var oZ=iZ;function aZ(e){return this.__data__.get(e)}var sZ=aZ;function lZ(e){return this.__data__.has(e)}var cZ=lZ,uZ=e4,hZ=ix,fZ=ox,dZ=200;function pZ(e,t){var n=this.__data__;if(n instanceof uZ){var o=n.__data__;if(!hZ||o.length<dZ-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new fZ(o)}return n.set(e,t),this.size=n.size,this}var mZ=pZ,gZ=e4,yZ=nZ,_Z=oZ,vZ=sZ,xZ=cZ,bZ=mZ;function I2(e){var t=this.__data__=new gZ(e);this.size=t.size}I2.prototype.clear=yZ;I2.prototype.delete=_Z;I2.prototype.get=vZ;I2.prototype.has=xZ;I2.prototype.set=bZ;var ZR=I2,wZ="__lodash_hash_undefined__";function AZ(e){return this.__data__.set(e,wZ),this}var TZ=AZ;function SZ(e){return this.__data__.has(e)}var EZ=SZ,PZ=ox,MZ=TZ,CZ=EZ;function $p(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new PZ;++t<n;)this.add(e[t])}$p.prototype.add=$p.prototype.push=MZ;$p.prototype.has=CZ;var XR=$p;function IZ(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var YR=IZ;function OZ(e,t){return e.has(t)}var KR=OZ,RZ=XR,DZ=YR,kZ=KR,LZ=1,zZ=2;function BZ(e,t,n,o,h,y){var w=n&LZ,C=e.length,a=t.length;if(C!=a&&!(w&&a>C))return!1;var D=y.get(e),j=y.get(t);if(D&&j)return D==t&&j==e;var B=-1,H=!0,X=n&zZ?new RZ:void 0;for(y.set(e,t),y.set(t,e);++B<C;){var ie=e[B],Q=t[B];if(o)var ne=w?o(Q,ie,B,t,e,y):o(ie,Q,B,e,t,y);if(ne!==void 0){if(ne)continue;H=!1;break}if(X){if(!DZ(t,function(te,K){if(!kZ(X,K)&&(ie===te||h(ie,te,n,o,y)))return X.push(K)})){H=!1;break}}else if(!(ie===Q||h(ie,Q,n,o,y))){H=!1;break}}return y.delete(e),y.delete(t),H}var JR=BZ,FZ=Ys,NZ=FZ.Uint8Array,jZ=NZ;function $Z(e){var t=-1,n=Array(e.size);return e.forEach(function(o,h){n[++t]=[h,o]}),n}var UZ=$Z;function VZ(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var _x=VZ,uE=g6,hE=jZ,GZ=nx,qZ=JR,WZ=UZ,HZ=_x,ZZ=1,XZ=2,YZ="[object Boolean]",KZ="[object Date]",JZ="[object Error]",QZ="[object Map]",eX="[object Number]",tX="[object RegExp]",rX="[object Set]",nX="[object String]",iX="[object Symbol]",oX="[object ArrayBuffer]",aX="[object DataView]",fE=uE?uE.prototype:void 0,dg=fE?fE.valueOf:void 0;function sX(e,t,n,o,h,y,w){switch(n){case aX:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oX:return!(e.byteLength!=t.byteLength||!y(new hE(e),new hE(t)));case YZ:case KZ:case eX:return GZ(+e,+t);case JZ:return e.name==t.name&&e.message==t.message;case tX:case nX:return e==t+"";case QZ:var C=WZ;case rX:var a=o&ZZ;if(C||(C=HZ),e.size!=t.size&&!a)return!1;var D=w.get(e);if(D)return D==t;o|=XZ,w.set(e,t);var j=qZ(C(e),C(t),o,h,y,w);return w.delete(e),j;case iX:if(dg)return dg.call(e)==dg.call(t)}return!1}var lX=sX;function cX(e,t){for(var n=-1,o=t.length,h=e.length;++n<o;)e[h+n]=t[n];return e}var QR=cX,uX=QR,hX=Yo;function fX(e,t,n){var o=t(e);return hX(e)?o:uX(o,n(e))}var dX=fX;function pX(e,t){for(var n=-1,o=e==null?0:e.length,h=0,y=[];++n<o;){var w=e[n];t(w,n,e)&&(y[h++]=w)}return y}var mX=pX;function gX(){return[]}var yX=gX,_X=mX,vX=yX,xX=Object.prototype,bX=xX.propertyIsEnumerable,dE=Object.getOwnPropertySymbols,wX=dE?function(e){return e==null?[]:(e=Object(e),_X(dE(e),function(t){return bX.call(e,t)}))}:vX,AX=wX;function TX(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var SX=TX,EX=$l,PX=Ul,MX="[object Arguments]";function CX(e){return PX(e)&&EX(e)==MX}var IX=CX,pE=IX,OX=Ul,eD=Object.prototype,RX=eD.hasOwnProperty,DX=eD.propertyIsEnumerable,kX=pE(function(){return arguments}())?pE:function(e){return OX(e)&&RX.call(e,"callee")&&!DX.call(e,"callee")},vx=kX,Up={exports:{}};function LX(){return!1}var zX=LX;Up.exports;(function(e,t){var n=Ys,o=zX,h=t&&!t.nodeType&&t,y=h&&!0&&e&&!e.nodeType&&e,w=y&&y.exports===h,C=w?n.Buffer:void 0,a=C?C.isBuffer:void 0,D=a||o;e.exports=D})(Up,Up.exports);var tD=Up.exports,BX=9007199254740991,FX=/^(?:0|[1-9]\d*)$/;function NX(e,t){var n=typeof e;return t=t??BX,!!t&&(n=="number"||n!="symbol"&&FX.test(e))&&e>-1&&e%1==0&&e<t}var xx=NX,jX=9007199254740991;function $X(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jX}var bx=$X,UX=$l,VX=bx,GX=Ul,qX="[object Arguments]",WX="[object Array]",HX="[object Boolean]",ZX="[object Date]",XX="[object Error]",YX="[object Function]",KX="[object Map]",JX="[object Number]",QX="[object Object]",eY="[object RegExp]",tY="[object Set]",rY="[object String]",nY="[object WeakMap]",iY="[object ArrayBuffer]",oY="[object DataView]",aY="[object Float32Array]",sY="[object Float64Array]",lY="[object Int8Array]",cY="[object Int16Array]",uY="[object Int32Array]",hY="[object Uint8Array]",fY="[object Uint8ClampedArray]",dY="[object Uint16Array]",pY="[object Uint32Array]",Kn={};Kn[aY]=Kn[sY]=Kn[lY]=Kn[cY]=Kn[uY]=Kn[hY]=Kn[fY]=Kn[dY]=Kn[pY]=!0;Kn[qX]=Kn[WX]=Kn[iY]=Kn[HX]=Kn[oY]=Kn[ZX]=Kn[XX]=Kn[YX]=Kn[KX]=Kn[JX]=Kn[QX]=Kn[eY]=Kn[tY]=Kn[rY]=Kn[nY]=!1;function mY(e){return GX(e)&&VX(e.length)&&!!Kn[UX(e)]}var gY=mY;function yY(e){return function(t){return e(t)}}var rD=yY,Vp={exports:{}};Vp.exports;(function(e,t){var n=uR,o=t&&!t.nodeType&&t,h=o&&!0&&e&&!e.nodeType&&e,y=h&&h.exports===o,w=y&&n.process,C=function(){try{var a=h&&h.require&&h.require("util").types;return a||w&&w.binding&&w.binding("util")}catch{}}();e.exports=C})(Vp,Vp.exports);var _Y=Vp.exports,vY=gY,xY=rD,mE=_Y,gE=mE&&mE.isTypedArray,bY=gE?xY(gE):vY,nD=bY,wY=SX,AY=vx,TY=Yo,SY=tD,EY=xx,PY=nD,MY=Object.prototype,CY=MY.hasOwnProperty;function IY(e,t){var n=TY(e),o=!n&&AY(e),h=!n&&!o&&SY(e),y=!n&&!o&&!h&&PY(e),w=n||o||h||y,C=w?wY(e.length,String):[],a=C.length;for(var D in e)(t||CY.call(e,D))&&!(w&&(D=="length"||h&&(D=="offset"||D=="parent")||y&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||EY(D,a)))&&C.push(D);return C}var OY=IY,RY=Object.prototype;function DY(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||RY;return e===n}var kY=DY;function LY(e,t){return function(n){return e(t(n))}}var iD=LY,zY=iD,BY=zY(Object.keys,Object),FY=BY,NY=kY,jY=FY,$Y=Object.prototype,UY=$Y.hasOwnProperty;function VY(e){if(!NY(e))return jY(e);var t=[];for(var n in Object(e))UY.call(e,n)&&n!="constructor"&&t.push(n);return t}var GY=VY,qY=rx,WY=bx;function HY(e){return e!=null&&WY(e.length)&&!qY(e)}var y4=HY,ZY=OY,XY=GY,YY=y4;function KY(e){return YY(e)?ZY(e):XY(e)}var wx=KY,JY=dX,QY=AX,eK=wx;function tK(e){return JY(e,eK,QY)}var rK=tK,yE=rK,nK=1,iK=Object.prototype,oK=iK.hasOwnProperty;function aK(e,t,n,o,h,y){var w=n&nK,C=yE(e),a=C.length,D=yE(t),j=D.length;if(a!=j&&!w)return!1;for(var B=a;B--;){var H=C[B];if(!(w?H in t:oK.call(t,H)))return!1}var X=y.get(e),ie=y.get(t);if(X&&ie)return X==t&&ie==e;var Q=!0;y.set(e,t),y.set(t,e);for(var ne=w;++B<a;){H=C[B];var te=e[H],K=t[H];if(o)var se=w?o(K,te,H,t,e,y):o(te,K,H,e,t,y);if(!(se===void 0?te===K||h(te,K,n,o,y):se)){Q=!1;break}ne||(ne=H=="constructor")}if(Q&&!ne){var ve=e.constructor,le=t.constructor;ve!=le&&"constructor"in e&&"constructor"in t&&!(typeof ve=="function"&&ve instanceof ve&&typeof le=="function"&&le instanceof le)&&(Q=!1)}return y.delete(e),y.delete(t),Q}var sK=aK,lK=Zu,cK=Ys,uK=lK(cK,"DataView"),hK=uK,fK=Zu,dK=Ys,pK=fK(dK,"Promise"),mK=pK,gK=Zu,yK=Ys,_K=gK(yK,"Set"),oD=_K,vK=Zu,xK=Ys,bK=vK(xK,"WeakMap"),wK=bK,Hy=hK,Zy=ix,Xy=mK,Yy=oD,Ky=wK,aD=$l,O2=fR,_E="[object Map]",AK="[object Object]",vE="[object Promise]",xE="[object Set]",bE="[object WeakMap]",wE="[object DataView]",TK=O2(Hy),SK=O2(Zy),EK=O2(Xy),PK=O2(Yy),MK=O2(Ky),xu=aD;(Hy&&xu(new Hy(new ArrayBuffer(1)))!=wE||Zy&&xu(new Zy)!=_E||Xy&&xu(Xy.resolve())!=vE||Yy&&xu(new Yy)!=xE||Ky&&xu(new Ky)!=bE)&&(xu=function(e){var t=aD(e),n=t==AK?e.constructor:void 0,o=n?O2(n):"";if(o)switch(o){case TK:return wE;case SK:return _E;case EK:return vE;case PK:return xE;case MK:return bE}return t});var CK=xu,pg=ZR,IK=JR,OK=lX,RK=sK,AE=CK,TE=Yo,SE=tD,DK=nD,kK=1,EE="[object Arguments]",PE="[object Array]",Dd="[object Object]",LK=Object.prototype,ME=LK.hasOwnProperty;function zK(e,t,n,o,h,y){var w=TE(e),C=TE(t),a=w?PE:AE(e),D=C?PE:AE(t);a=a==EE?Dd:a,D=D==EE?Dd:D;var j=a==Dd,B=D==Dd,H=a==D;if(H&&SE(e)){if(!SE(t))return!1;w=!0,j=!1}if(H&&!j)return y||(y=new pg),w||DK(e)?IK(e,t,n,o,h,y):OK(e,t,a,n,o,h,y);if(!(n&kK)){var X=j&&ME.call(e,"__wrapped__"),ie=B&&ME.call(t,"__wrapped__");if(X||ie){var Q=X?e.value():e,ne=ie?t.value():t;return y||(y=new pg),h(Q,ne,n,o,y)}}return H?(y||(y=new pg),RK(e,t,n,o,h,y)):!1}var BK=zK,FK=BK,CE=Ul;function sD(e,t,n,o,h){return e===t?!0:e==null||t==null||!CE(e)&&!CE(t)?e!==e&&t!==t:FK(e,t,n,o,sD,h)}var Ax=sD,NK=ZR,jK=Ax,$K=1,UK=2;function VK(e,t,n,o){var h=n.length,y=h,w=!o;if(e==null)return!y;for(e=Object(e);h--;){var C=n[h];if(w&&C[2]?C[1]!==e[C[0]]:!(C[0]in e))return!1}for(;++h<y;){C=n[h];var a=C[0],D=e[a],j=C[1];if(w&&C[2]){if(D===void 0&&!(a in e))return!1}else{var B=new NK;if(o)var H=o(D,j,a,e,t,B);if(!(H===void 0?jK(j,D,$K|UK,o,B):H))return!1}}return!0}var GK=VK,qK=mc;function WK(e){return e===e&&!qK(e)}var lD=WK,HK=lD,ZK=wx;function XK(e){for(var t=ZK(e),n=t.length;n--;){var o=t[n],h=e[o];t[n]=[o,h,HK(h)]}return t}var YK=XK;function KK(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var cD=KK,JK=GK,QK=YK,eJ=cD;function tJ(e){var t=QK(e);return t.length==1&&t[0][2]?eJ(t[0][0],t[0][1]):function(n){return n===e||JK(n,e,t)}}var rJ=tJ;function nJ(e,t){return e!=null&&t in Object(e)}var iJ=nJ,oJ=yR,aJ=vx,sJ=Yo,lJ=xx,cJ=bx,uJ=r4;function hJ(e,t,n){t=oJ(t,e);for(var o=-1,h=t.length,y=!1;++o<h;){var w=uJ(t[o]);if(!(y=e!=null&&n(e,w)))break;e=e[w]}return y||++o!=h?y:(h=e==null?0:e.length,!!h&&cJ(h)&&lJ(w,h)&&(sJ(e)||aJ(e)))}var fJ=hJ,dJ=iJ,pJ=fJ;function mJ(e,t){return e!=null&&pJ(e,t,dJ)}var gJ=mJ,yJ=Ax,_J=_R,vJ=gJ,xJ=tx,bJ=lD,wJ=cD,AJ=r4,TJ=1,SJ=2;function EJ(e,t){return xJ(e)&&bJ(t)?wJ(AJ(e),t):function(n){var o=_J(n,e);return o===void 0&&o===t?vJ(n,e):yJ(t,o,TJ|SJ)}}var PJ=EJ;function MJ(e){return e}var R2=MJ;function CJ(e){return function(t){return t==null?void 0:t[e]}}var IJ=CJ,OJ=lx;function RJ(e){return function(t){return OJ(t,e)}}var DJ=RJ,kJ=IJ,LJ=DJ,zJ=tx,BJ=r4;function FJ(e){return zJ(e)?kJ(BJ(e)):LJ(e)}var NJ=FJ,jJ=rJ,$J=PJ,UJ=R2,VJ=Yo,GJ=NJ;function qJ(e){return typeof e=="function"?e:e==null?UJ:typeof e=="object"?VJ(e)?$J(e[0],e[1]):jJ(e):GJ(e)}var gc=qJ;function WJ(e,t,n,o){for(var h=e.length,y=n+(o?1:-1);o?y--:++y<h;)if(t(e[y],y,e))return y;return-1}var HJ=WJ;function ZJ(e){return e!==e}var XJ=ZJ;function YJ(e,t,n){for(var o=n-1,h=e.length;++o<h;)if(e[o]===t)return o;return-1}var KJ=YJ,JJ=HJ,QJ=XJ,eQ=KJ;function tQ(e,t,n){return t===t?eQ(e,t,n):JJ(e,QJ,n)}var rQ=tQ,nQ=rQ;function iQ(e,t){var n=e==null?0:e.length;return!!n&&nQ(e,t,0)>-1}var oQ=iQ;function aQ(e,t,n){for(var o=-1,h=e==null?0:e.length;++o<h;)if(n(t,e[o]))return!0;return!1}var sQ=aQ;function lQ(){}var cQ=lQ,mg=oD,uQ=cQ,hQ=_x,fQ=1/0,dQ=mg&&1/hQ(new mg([,-0]))[1]==fQ?function(e){return new mg(e)}:uQ,pQ=dQ,mQ=XR,gQ=oQ,yQ=sQ,_Q=KR,vQ=pQ,xQ=_x,bQ=200;function wQ(e,t,n){var o=-1,h=gQ,y=e.length,w=!0,C=[],a=C;if(n)w=!1,h=yQ;else if(y>=bQ){var D=t?null:vQ(e);if(D)return xQ(D);w=!1,h=_Q,a=new mQ}else a=t?[]:C;e:for(;++o<y;){var j=e[o],B=t?t(j):j;if(j=n||j!==0?j:0,w&&B===B){for(var H=a.length;H--;)if(a[H]===B)continue e;t&&a.push(B),C.push(j)}else h(a,B,n)||(a!==C&&a.push(B),C.push(j))}return C}var AQ=wQ,TQ=gc,SQ=AQ;function EQ(e,t){return e&&e.length?SQ(e,TQ(t)):[]}var PQ=EQ;const IE=Cn(PQ);function uD(e,t,n){return t===!0?IE(e,n):Xr(t)?IE(e,t):e}function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}var MQ=["ref"];function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(o){_4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function CQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,fD(o.key),o)}}function IQ(e,t,n){return t&&RE(e.prototype,t),n&&RE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function OQ(e,t,n){return t=Gp(t),RQ(e,hD()?Reflect.construct(t,n||[],Gp(e).constructor):t.apply(e,n))}function RQ(e,t){if(t&&(Q0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DQ(e)}function DQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hD=function(){return!!e})()}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gp(e)}function kQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}function Jy(e,t){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},Jy(e,t)}function _4(e,t,n){return t=fD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fD(e){var t=LQ(e,"string");return Q0(t)=="symbol"?t:t+""}function LQ(e,t){if(Q0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Q0(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zQ(e,t){if(e==null)return{};var n=BQ(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function BQ(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function FQ(e){return e.value}function NQ(e,t){if(tt.isValidElement(e))return tt.cloneElement(e,t);if(typeof e=="function")return tt.createElement(e,t);t.ref;var n=zQ(t,MQ);return tt.createElement(yx,n)}var DE=1,qs=function(e){function t(){var n;CQ(this,t);for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];return n=OQ(this,t,[].concat(h)),_4(n,"lastBoundingBox",{width:-1,height:-1}),n}return kQ(t,e),IQ(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();return o.height=this.wrapperNode.offsetHeight,o.width=this.wrapperNode.offsetWidth,o}return null}},{key:"updateBBox",value:function(){var o=this.props.onBBoxUpdate,h=this.getBBox();h?(Math.abs(h.width-this.lastBoundingBox.width)>DE||Math.abs(h.height-this.lastBoundingBox.height)>DE)&&(this.lastBoundingBox.width=h.width,this.lastBoundingBox.height=h.height,o&&o(h)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,o&&o(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(o){var h=this.props,y=h.layout,w=h.align,C=h.verticalAlign,a=h.margin,D=h.chartWidth,j=h.chartHeight,B,H;if(!o||(o.left===void 0||o.left===null)&&(o.right===void 0||o.right===null))if(w==="center"&&y==="vertical"){var X=this.getBBoxSnapshot();B={left:((D||0)-X.width)/2}}else B=w==="right"?{right:a&&a.right||0}:{left:a&&a.left||0};if(!o||(o.top===void 0||o.top===null)&&(o.bottom===void 0||o.bottom===null))if(C==="middle"){var ie=this.getBBoxSnapshot();H={top:((j||0)-ie.height)/2}}else H=C==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0};return yl(yl({},B),H)}},{key:"render",value:function(){var o=this,h=this.props,y=h.content,w=h.width,C=h.height,a=h.wrapperStyle,D=h.payloadUniqBy,j=h.payload,B=yl(yl({position:"absolute",width:w||"auto",height:C||"auto"},this.getDefaultPosition(a)),a);return tt.createElement("div",{className:"recharts-legend-wrapper",style:B,ref:function(X){o.wrapperNode=X}},NQ(y,yl(yl({},this.props),{},{payload:uD(j,D,FQ)})))}}],[{key:"getWithHeight",value:function(o,h){var y=yl(yl({},this.defaultProps),o.props),w=y.layout;return w==="vertical"&&rr(o.props.height)?{height:o.props.height}:w==="horizontal"?{width:o.props.width||h}:null}}])}(ut.PureComponent);_4(qs,"displayName","Legend");_4(qs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var kE=g6,jQ=vx,$Q=Yo,LE=kE?kE.isConcatSpreadable:void 0;function UQ(e){return $Q(e)||jQ(e)||!!(LE&&e&&e[LE])}var VQ=UQ,GQ=QR,qQ=VQ;function dD(e,t,n,o,h){var y=-1,w=e.length;for(n||(n=qQ),h||(h=[]);++y<w;){var C=e[y];t>0&&n(C)?t>1?dD(C,t-1,n,o,h):GQ(h,C):o||(h[h.length]=C)}return h}var pD=dD;function WQ(e){return function(t,n,o){for(var h=-1,y=Object(t),w=o(t),C=w.length;C--;){var a=w[e?C:++h];if(n(y[a],a,y)===!1)break}return t}}var HQ=WQ,ZQ=HQ,XQ=ZQ(),YQ=XQ,KQ=YQ,JQ=wx;function QQ(e,t){return e&&KQ(e,t,JQ)}var mD=QQ,eee=y4;function tee(e,t){return function(n,o){if(n==null)return n;if(!eee(n))return e(n,o);for(var h=n.length,y=t?h:-1,w=Object(n);(t?y--:++y<h)&&o(w[y],y,w)!==!1;);return n}}var ree=tee,nee=mD,iee=ree,oee=iee(nee),Tx=oee,aee=Tx,see=y4;function lee(e,t){var n=-1,o=see(e)?Array(e.length):[];return aee(e,function(h,y,w){o[++n]=t(h,y,w)}),o}var gD=lee;function cee(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var uee=cee,zE=S2;function hee(e,t){if(e!==t){var n=e!==void 0,o=e===null,h=e===e,y=zE(e),w=t!==void 0,C=t===null,a=t===t,D=zE(t);if(!C&&!D&&!y&&e>t||y&&w&&a&&!C&&!D||o&&w&&a||!n&&a||!h)return 1;if(!o&&!y&&!D&&e<t||D&&n&&h&&!o&&!y||C&&n&&h||!w&&h||!a)return-1}return 0}var fee=hee,dee=fee;function pee(e,t,n){for(var o=-1,h=e.criteria,y=t.criteria,w=h.length,C=n.length;++o<w;){var a=dee(h[o],y[o]);if(a){if(o>=C)return a;var D=n[o];return a*(D=="desc"?-1:1)}}return e.index-t.index}var mee=pee,gg=sx,gee=lx,yee=gc,_ee=gD,vee=uee,xee=rD,bee=mee,wee=R2,Aee=Yo;function Tee(e,t,n){t.length?t=gg(t,function(y){return Aee(y)?function(w){return gee(w,y.length===1?y[0]:y)}:y}):t=[wee];var o=-1;t=gg(t,xee(yee));var h=_ee(e,function(y,w,C){var a=gg(t,function(D){return D(y)});return{criteria:a,index:++o,value:y}});return vee(h,function(y,w){return bee(y,w,n)})}var See=Tee;function Eee(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Pee=Eee,Mee=Pee,BE=Math.max;function Cee(e,t,n){return t=BE(t===void 0?e.length-1:t,0),function(){for(var o=arguments,h=-1,y=BE(o.length-t,0),w=Array(y);++h<y;)w[h]=o[t+h];h=-1;for(var C=Array(t+1);++h<t;)C[h]=o[h];return C[t]=n(w),Mee(e,this,C)}}var Iee=Cee;function Oee(e){return function(){return e}}var Ree=Oee,Dee=Zu,kee=function(){try{var e=Dee(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yD=kee,Lee=Ree,FE=yD,zee=R2,Bee=FE?function(e,t){return FE(e,"toString",{configurable:!0,enumerable:!1,value:Lee(t),writable:!0})}:zee,Fee=Bee,Nee=800,jee=16,$ee=Date.now;function Uee(e){var t=0,n=0;return function(){var o=$ee(),h=jee-(o-n);if(n=o,h>0){if(++t>=Nee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Vee=Uee,Gee=Fee,qee=Vee,Wee=qee(Gee),Hee=Wee,Zee=R2,Xee=Iee,Yee=Hee;function Kee(e,t){return Yee(Xee(e,t,Zee),e+"")}var Jee=Kee,Qee=nx,ete=y4,tte=xx,rte=mc;function nte(e,t,n){if(!rte(n))return!1;var o=typeof t;return(o=="number"?ete(n)&&tte(t,n.length):o=="string"&&t in n)?Qee(n[t],e):!1}var v4=nte,ite=pD,ote=See,ate=Jee,NE=v4,ste=ate(function(e,t){if(e==null)return[];var n=t.length;return n>1&&NE(e,t[0],t[1])?t=[]:n>2&&NE(t[0],t[1],t[2])&&(t=[t[0]]),ote(e,ite(t,1),[])}),lte=ste;const Sx=Cn(lte);function I5(e){"@babel/helpers - typeof";return I5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I5(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qy.apply(this,arguments)}function cte(e,t){return dte(e)||fte(e,t)||hte(e,t)||ute()}function ute(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(e,t){if(e){if(typeof e=="string")return jE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jE(e,t)}}function jE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function fte(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function dte(e){if(Array.isArray(e))return e}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function yg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(o){pte(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function pte(e,t,n){return t=mte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mte(e){var t=gte(e,"string");return I5(t)=="symbol"?t:t+""}function gte(e,t){if(I5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(I5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yte(e){return Array.isArray(e)&&ki(e[0])&&ki(e[1])?e.join(" ~ "):e}var _te=function(t){var n=t.separator,o=n===void 0?" : ":n,h=t.contentStyle,y=h===void 0?{}:h,w=t.itemStyle,C=w===void 0?{}:w,a=t.labelStyle,D=a===void 0?{}:a,j=t.payload,B=t.formatter,H=t.itemSorter,X=t.wrapperClassName,ie=t.labelClassName,Q=t.label,ne=t.labelFormatter,te=t.accessibilityLayer,K=te===void 0?!1:te,se=function(){if(j&&j.length){var Xe={padding:0,margin:0},St=(H?Sx(j,H):j).map(function(Mt,Pt){if(Mt.type==="none")return null;var ht=yg({display:"block",paddingTop:4,paddingBottom:4,color:Mt.color||"#000"},C),kt=Mt.formatter||B||yte,mt=Mt.value,Ct=Mt.name,_t=mt,Qt=Ct;if(kt&&_t!=null&&Qt!=null){var qt=kt(mt,Ct,Mt,Pt,j);if(Array.isArray(qt)){var gr=cte(qt,2);_t=gr[0],Qt=gr[1]}else _t=qt}return tt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Pt),style:ht},ki(Qt)?tt.createElement("span",{className:"recharts-tooltip-item-name"},Qt):null,ki(Qt)?tt.createElement("span",{className:"recharts-tooltip-item-separator"},o):null,tt.createElement("span",{className:"recharts-tooltip-item-value"},_t),tt.createElement("span",{className:"recharts-tooltip-item-unit"},Mt.unit||""))});return tt.createElement("ul",{className:"recharts-tooltip-item-list",style:Xe},St)}return null},ve=yg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},y),le=yg({margin:0},D),fe=!an(Q),Te=fe?Q:"",Ee=tn("recharts-default-tooltip",X),Ze=tn("recharts-tooltip-label",ie);fe&&ne&&j!==void 0&&j!==null&&(Te=ne(Q,j));var st=K?{role:"status","aria-live":"assertive"}:{};return tt.createElement("div",Qy({className:Ee,style:ve},st),tt.createElement("p",{className:Ze,style:le},tt.isValidElement(Te)?Te:"".concat(Te)),se())};function O5(e){"@babel/helpers - typeof";return O5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O5(e)}function kd(e,t,n){return t=vte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vte(e){var t=xte(e,"string");return O5(t)=="symbol"?t:t+""}function xte(e,t){if(O5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(O5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dh="recharts-tooltip-wrapper",bte={visibility:"hidden"};function wte(e){var t=e.coordinate,n=e.translateX,o=e.translateY;return tn(Dh,kd(kd(kd(kd({},"".concat(Dh,"-right"),rr(n)&&t&&rr(t.x)&&n>=t.x),"".concat(Dh,"-left"),rr(n)&&t&&rr(t.x)&&n<t.x),"".concat(Dh,"-bottom"),rr(o)&&t&&rr(t.y)&&o>=t.y),"".concat(Dh,"-top"),rr(o)&&t&&rr(t.y)&&o<t.y))}function UE(e){var t=e.allowEscapeViewBox,n=e.coordinate,o=e.key,h=e.offsetTopLeft,y=e.position,w=e.reverseDirection,C=e.tooltipDimension,a=e.viewBox,D=e.viewBoxDimension;if(y&&rr(y[o]))return y[o];var j=n[o]-C-h,B=n[o]+h;if(t[o])return w[o]?j:B;if(w[o]){var H=j,X=a[o];return H<X?Math.max(B,a[o]):Math.max(j,a[o])}var ie=B+C,Q=a[o]+D;return ie>Q?Math.max(j,a[o]):Math.max(B,a[o])}function Ate(e){var t=e.translateX,n=e.translateY,o=e.useTranslate3d;return{transform:o?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Tte(e){var t=e.allowEscapeViewBox,n=e.coordinate,o=e.offsetTopLeft,h=e.position,y=e.reverseDirection,w=e.tooltipBox,C=e.useTranslate3d,a=e.viewBox,D,j,B;return w.height>0&&w.width>0&&n?(j=UE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:o,position:h,reverseDirection:y,tooltipDimension:w.width,viewBox:a,viewBoxDimension:a.width}),B=UE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:o,position:h,reverseDirection:y,tooltipDimension:w.height,viewBox:a,viewBoxDimension:a.height}),D=Ate({translateX:j,translateY:B,useTranslate3d:C})):D=bte,{cssProperties:D,cssClasses:wte({translateX:j,translateY:B,coordinate:n})}}function e2(e){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e2(e)}function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function GE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(o){t_(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ete(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,vD(o.key),o)}}function Pte(e,t,n){return t&&Ete(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mte(e,t,n){return t=qp(t),Cte(e,_D()?Reflect.construct(t,n||[],qp(e).constructor):t.apply(e,n))}function Cte(e,t){if(t&&(e2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ite(e)}function Ite(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_D=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qp(e)}function Ote(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e_(e,t)}function e_(e,t){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},e_(e,t)}function t_(e,t,n){return t=vD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vD(e){var t=Rte(e,"string");return e2(t)=="symbol"?t:t+""}function Rte(e,t){if(e2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(e2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qE=1,Dte=function(e){function t(){var n;Ste(this,t);for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];return n=Mte(this,t,[].concat(h)),t_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),t_(n,"handleKeyDown",function(w){if(w.key==="Escape"){var C,a,D,j;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(C=(a=n.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&C!==void 0?C:0,y:(D=(j=n.props.coordinate)===null||j===void 0?void 0:j.y)!==null&&D!==void 0?D:0}})}}),n}return Ote(t,e),Pte(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.state.lastBoundingBox.width)>qE||Math.abs(o.height-this.state.lastBoundingBox.height)>qE)&&this.setState({lastBoundingBox:{width:o.width,height:o.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var o,h;this.props.active&&this.updateBBox(),this.state.dismissed&&(((o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==this.state.dismissedAtCoordinate.x||((h=this.props.coordinate)===null||h===void 0?void 0:h.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var o=this,h=this.props,y=h.active,w=h.allowEscapeViewBox,C=h.animationDuration,a=h.animationEasing,D=h.children,j=h.coordinate,B=h.hasPayload,H=h.isAnimationActive,X=h.offset,ie=h.position,Q=h.reverseDirection,ne=h.useTranslate3d,te=h.viewBox,K=h.wrapperStyle,se=Tte({allowEscapeViewBox:w,coordinate:j,offsetTopLeft:X,position:ie,reverseDirection:Q,tooltipBox:this.state.lastBoundingBox,useTranslate3d:ne,viewBox:te}),ve=se.cssClasses,le=se.cssProperties,fe=GE(GE({transition:H&&y?"transform ".concat(C,"ms ").concat(a):void 0},le),{},{pointerEvents:"none",visibility:!this.state.dismissed&&y&&B?"visible":"hidden",position:"absolute",top:0,left:0},K);return tt.createElement("div",{tabIndex:-1,className:ve,style:fe,ref:function(Ee){o.wrapperNode=Ee}},D)}}])}(ut.PureComponent),kte=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Cl={isSsr:kte(),get:function(t){return Cl[t]},set:function(t,n){if(typeof t=="string")Cl[t]=n;else{var o=Object.keys(t);o&&o.length&&o.forEach(function(h){Cl[h]=t[h]})}}};function t2(e){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t2(e)}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(o){Ex(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zte(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,bD(o.key),o)}}function Bte(e,t,n){return t&&zte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fte(e,t,n){return t=Wp(t),Nte(e,xD()?Reflect.construct(t,n||[],Wp(e).constructor):t.apply(e,n))}function Nte(e,t){if(t&&(t2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jte(e)}function jte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xD=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wp(e)}function $te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}function r_(e,t){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},r_(e,t)}function Ex(e,t,n){return t=bD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bD(e){var t=Ute(e,"string");return t2(t)=="symbol"?t:t+""}function Ute(e,t){if(t2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(t2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vte(e){return e.dataKey}function Gte(e,t){return tt.isValidElement(e)?tt.cloneElement(e,t):typeof e=="function"?tt.createElement(e,t):tt.createElement(_te,t)}var vl=function(e){function t(){return Lte(this,t),Fte(this,t,arguments)}return $te(t,e),Bte(t,[{key:"render",value:function(){var o=this,h=this.props,y=h.active,w=h.allowEscapeViewBox,C=h.animationDuration,a=h.animationEasing,D=h.content,j=h.coordinate,B=h.filterNull,H=h.isAnimationActive,X=h.offset,ie=h.payload,Q=h.payloadUniqBy,ne=h.position,te=h.reverseDirection,K=h.useTranslate3d,se=h.viewBox,ve=h.wrapperStyle,le=ie??[];B&&le.length&&(le=uD(ie.filter(function(Te){return Te.value!=null&&(Te.hide!==!0||o.props.includeHidden)}),Q,Vte));var fe=le.length>0;return tt.createElement(Dte,{allowEscapeViewBox:w,animationDuration:C,animationEasing:a,isAnimationActive:H,active:y,coordinate:j,hasPayload:fe,offset:X,position:ne,reverseDirection:te,useTranslate3d:K,viewBox:se,wrapperStyle:ve},Gte(D,HE(HE({},this.props),{},{payload:le})))}}])}(ut.PureComponent);Ex(vl,"displayName","Tooltip");Ex(vl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Cl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qte=Ys,Wte=function(){return qte.Date.now()},Hte=Wte,Zte=/\s/;function Xte(e){for(var t=e.length;t--&&Zte.test(e.charAt(t)););return t}var Yte=Xte,Kte=Yte,Jte=/^\s+/;function Qte(e){return e&&e.slice(0,Kte(e)+1).replace(Jte,"")}var ere=Qte,tre=ere,ZE=mc,rre=S2,XE=NaN,nre=/^[-+]0x[0-9a-f]+$/i,ire=/^0b[01]+$/i,ore=/^0o[0-7]+$/i,are=parseInt;function sre(e){if(typeof e=="number")return e;if(rre(e))return XE;if(ZE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ZE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=tre(e);var n=ire.test(e);return n||ore.test(e)?are(e.slice(2),n?2:8):nre.test(e)?XE:+e}var wD=sre,lre=mc,_g=Hte,YE=wD,cre="Expected a function",ure=Math.max,hre=Math.min;function fre(e,t,n){var o,h,y,w,C,a,D=0,j=!1,B=!1,H=!0;if(typeof e!="function")throw new TypeError(cre);t=YE(t)||0,lre(n)&&(j=!!n.leading,B="maxWait"in n,y=B?ure(YE(n.maxWait)||0,t):y,H="trailing"in n?!!n.trailing:H);function X(fe){var Te=o,Ee=h;return o=h=void 0,D=fe,w=e.apply(Ee,Te),w}function ie(fe){return D=fe,C=setTimeout(te,t),j?X(fe):w}function Q(fe){var Te=fe-a,Ee=fe-D,Ze=t-Te;return B?hre(Ze,y-Ee):Ze}function ne(fe){var Te=fe-a,Ee=fe-D;return a===void 0||Te>=t||Te<0||B&&Ee>=y}function te(){var fe=_g();if(ne(fe))return K(fe);C=setTimeout(te,Q(fe))}function K(fe){return C=void 0,H&&o?X(fe):(o=h=void 0,w)}function se(){C!==void 0&&clearTimeout(C),D=0,o=a=h=C=void 0}function ve(){return C===void 0?w:K(_g())}function le(){var fe=_g(),Te=ne(fe);if(o=arguments,h=this,a=fe,Te){if(C===void 0)return ie(a);if(B)return clearTimeout(C),C=setTimeout(te,t),X(a)}return C===void 0&&(C=setTimeout(te,t)),w}return le.cancel=se,le.flush=ve,le}var dre=fre,pre=dre,mre=mc,gre="Expected a function";function yre(e,t,n){var o=!0,h=!0;if(typeof e!="function")throw new TypeError(gre);return mre(n)&&(o="leading"in n?!!n.leading:o,h="trailing"in n?!!n.trailing:h),pre(e,t,{leading:o,maxWait:t,trailing:h})}var _re=yre;const AD=Cn(_re);function R5(e){"@babel/helpers - typeof";return R5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R5(e)}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(o){vre(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function vre(e,t,n){return t=xre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xre(e){var t=bre(e,"string");return R5(t)=="symbol"?t:t+""}function bre(e,t){if(R5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(R5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wre(e,t){return Ere(e)||Sre(e,t)||Tre(e,t)||Are()}function Are(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tre(e,t){if(e){if(typeof e=="string")return JE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(e,t)}}function JE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Sre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function Ere(e){if(Array.isArray(e))return e}var j0=ut.forwardRef(function(e,t){var n=e.aspect,o=e.initialDimension,h=o===void 0?{width:-1,height:-1}:o,y=e.width,w=y===void 0?"100%":y,C=e.height,a=C===void 0?"100%":C,D=e.minWidth,j=D===void 0?0:D,B=e.minHeight,H=e.maxHeight,X=e.children,ie=e.debounce,Q=ie===void 0?0:ie,ne=e.id,te=e.className,K=e.onResize,se=e.style,ve=se===void 0?{}:se,le=ut.useRef(null),fe=ut.useRef();fe.current=K,ut.useImperativeHandle(t,function(){return Object.defineProperty(le.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),le.current},configurable:!0})});var Te=ut.useState({containerWidth:h.width,containerHeight:h.height}),Ee=wre(Te,2),Ze=Ee[0],st=Ee[1],We=ut.useCallback(function(St,Mt){st(function(Pt){var ht=Math.round(St),kt=Math.round(Mt);return Pt.containerWidth===ht&&Pt.containerHeight===kt?Pt:{containerWidth:ht,containerHeight:kt}})},[]);ut.useEffect(function(){var St=function(Ct){var _t,Qt=Ct[0].contentRect,qt=Qt.width,gr=Qt.height;We(qt,gr),(_t=fe.current)===null||_t===void 0||_t.call(fe,qt,gr)};Q>0&&(St=AD(St,Q,{trailing:!0,leading:!1}));var Mt=new ResizeObserver(St),Pt=le.current.getBoundingClientRect(),ht=Pt.width,kt=Pt.height;return We(ht,kt),Mt.observe(le.current),function(){Mt.disconnect()}},[We,Q]);var Xe=ut.useMemo(function(){var St=Ze.containerWidth,Mt=Ze.containerHeight;if(St<0||Mt<0)return null;Ml(Eu(w)||Eu(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,w,a),Ml(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Pt=Eu(w)?St:w,ht=Eu(a)?Mt:a;n&&n>0&&(Pt?ht=Pt/n:ht&&(Pt=ht*n),H&&ht>H&&(ht=H)),Ml(Pt>0||ht>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Pt,ht,w,a,j,B,n);var kt=!Array.isArray(X)&&Pl(X.type).endsWith("Chart");return tt.Children.map(X,function(mt){return tt.isValidElement(mt)?ut.cloneElement(mt,Ld({width:Pt,height:ht},kt?{style:Ld({height:"100%",width:"100%",maxHeight:ht,maxWidth:Pt},mt.props.style)}:{})):mt})},[n,X,a,H,B,j,Ze,w]);return tt.createElement("div",{id:ne?"".concat(ne):void 0,className:tn("recharts-responsive-container",te),style:Ld(Ld({},ve),{},{width:w,height:a,minWidth:j,minHeight:B,maxHeight:H}),ref:le},Xe)}),$u=function(t){return null};$u.displayName="Cell";function D5(e){"@babel/helpers - typeof";return D5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D5(e)}function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(o){Pre(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Pre(e,t,n){return t=Mre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mre(e){var t=Cre(e,"string");return D5(t)=="symbol"?t:t+""}function Cre(e,t){if(D5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(D5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d0={widthCache:{},cacheCount:0},Ire=2e3,Ore={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eP="recharts_measurement_span";function Rre(e){var t=n_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var n5=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Cl.isSsr)return{width:0,height:0};var o=Rre(n),h=JSON.stringify({text:t,copyStyle:o});if(d0.widthCache[h])return d0.widthCache[h];try{var y=document.getElementById(eP);y||(y=document.createElement("span"),y.setAttribute("id",eP),y.setAttribute("aria-hidden","true"),document.body.appendChild(y));var w=n_(n_({},Ore),o);Object.assign(y.style,w),y.textContent="".concat(t);var C=y.getBoundingClientRect(),a={width:C.width,height:C.height};return d0.widthCache[h]=a,++d0.cacheCount>Ire&&(d0.cacheCount=0,d0.widthCache={}),a}catch{return{width:0,height:0}}},Dre=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function k5(e){"@babel/helpers - typeof";return k5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k5(e)}function Hp(e,t){return Bre(e)||zre(e,t)||Lre(e,t)||kre()}function kre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lre(e,t){if(e){if(typeof e=="string")return tP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(e,t)}}function tP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function zre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function Bre(e){if(Array.isArray(e))return e}function Fre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,jre(o.key),o)}}function Nre(e,t,n){return t&&rP(e.prototype,t),n&&rP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jre(e){var t=$re(e,"string");return k5(t)=="symbol"?t:t+""}function $re(e,t){if(k5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(k5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ure=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Vre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Gre=Object.keys(TD),M0="NaN";function qre(e,t){return e*TD[t]}var zd=function(){function e(t,n){Fre(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Ure.test(n)&&(this.num=NaN,this.unit=""),Gre.includes(n)&&(this.num=qre(t,n),this.unit="px")}return Nre(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var o,h=(o=Vre.exec(n))!==null&&o!==void 0?o:[],y=Hp(h,3),w=y[1],C=y[2];return new e(parseFloat(w),C??"")}}])}();function SD(e){if(e.includes(M0))return M0;for(var t=e;t.includes("*")||t.includes("/");){var n,o=(n=nP.exec(t))!==null&&n!==void 0?n:[],h=Hp(o,4),y=h[1],w=h[2],C=h[3],a=zd.parse(y??""),D=zd.parse(C??""),j=w==="*"?a.multiply(D):a.divide(D);if(j.isNaN())return M0;t=t.replace(nP,j.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var B,H=(B=iP.exec(t))!==null&&B!==void 0?B:[],X=Hp(H,4),ie=X[1],Q=X[2],ne=X[3],te=zd.parse(ie??""),K=zd.parse(ne??""),se=Q==="+"?te.add(K):te.subtract(K);if(se.isNaN())return M0;t=t.replace(iP,se.toString())}return t}var oP=/\(([^()]*)\)/;function Wre(e){for(var t=e;t.includes("(");){var n=oP.exec(t),o=Hp(n,2),h=o[1];t=t.replace(oP,SD(h))}return t}function Hre(e){var t=e.replace(/\s+/g,"");return t=Wre(t),t=SD(t),t}function Zre(e){try{return Hre(e)}catch{return M0}}function vg(e){var t=Zre(e.slice(5,-1));return t===M0?"":t}var Xre=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Yre=["dx","dy","angle","className","breakAll"];function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i_.apply(this,arguments)}function aP(e,t){if(e==null)return{};var n=Kre(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Kre(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function sP(e,t){return tne(e)||ene(e,t)||Qre(e,t)||Jre()}function Jre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qre(e,t){if(e){if(typeof e=="string")return lP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lP(e,t)}}function lP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ene(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function tne(e){if(Array.isArray(e))return e}var ED=/[ \f\n\r\t\v\u2028\u2029]+/,PD=function(t){var n=t.children,o=t.breakAll,h=t.style;try{var y=[];an(n)||(o?y=n.toString().split(""):y=n.toString().split(ED));var w=y.map(function(a){return{word:a,width:n5(a,h).width}}),C=o?0:n5("",h).width;return{wordsWithComputedWidth:w,spaceWidth:C}}catch{return null}},rne=function(t,n,o,h,y){var w=t.maxLines,C=t.children,a=t.style,D=t.breakAll,j=rr(w),B=C,H=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Pt.reduce(function(ht,kt){var mt=kt.word,Ct=kt.width,_t=ht[ht.length-1];if(_t&&(h==null||y||_t.width+Ct+o<Number(h)))_t.words.push(mt),_t.width+=Ct+o;else{var Qt={words:[mt],width:Ct};ht.push(Qt)}return ht},[])},X=H(n),ie=function(Pt){return Pt.reduce(function(ht,kt){return ht.width>kt.width?ht:kt})};if(!j)return X;for(var Q="",ne=function(Pt){var ht=B.slice(0,Pt),kt=PD({breakAll:D,style:a,children:ht+Q}).wordsWithComputedWidth,mt=H(kt),Ct=mt.length>w||ie(mt).width>Number(h);return[Ct,mt]},te=0,K=B.length-1,se=0,ve;te<=K&&se<=B.length-1;){var le=Math.floor((te+K)/2),fe=le-1,Te=ne(fe),Ee=sP(Te,2),Ze=Ee[0],st=Ee[1],We=ne(le),Xe=sP(We,1),St=Xe[0];if(!Ze&&!St&&(te=le+1),Ze&&St&&(K=le-1),!Ze&&St){ve=st;break}se++}return ve||X},cP=function(t){var n=an(t)?[]:t.toString().split(ED);return[{words:n}]},nne=function(t){var n=t.width,o=t.scaleToFit,h=t.children,y=t.style,w=t.breakAll,C=t.maxLines;if((n||o)&&!Cl.isSsr){var a,D,j=PD({breakAll:w,children:h,style:y});if(j){var B=j.wordsWithComputedWidth,H=j.spaceWidth;a=B,D=H}else return cP(h);return rne({breakAll:w,children:h,maxLines:C,style:y},a,D,n,o)}return cP(h)},uP="#808080",Uu=function(t){var n=t.x,o=n===void 0?0:n,h=t.y,y=h===void 0?0:h,w=t.lineHeight,C=w===void 0?"1em":w,a=t.capHeight,D=a===void 0?"0.71em":a,j=t.scaleToFit,B=j===void 0?!1:j,H=t.textAnchor,X=H===void 0?"start":H,ie=t.verticalAnchor,Q=ie===void 0?"end":ie,ne=t.fill,te=ne===void 0?uP:ne,K=aP(t,Xre),se=ut.useMemo(function(){return nne({breakAll:K.breakAll,children:K.children,maxLines:K.maxLines,scaleToFit:B,style:K.style,width:K.width})},[K.breakAll,K.children,K.maxLines,B,K.style,K.width]),ve=K.dx,le=K.dy,fe=K.angle,Te=K.className,Ee=K.breakAll,Ze=aP(K,Yre);if(!ki(o)||!ki(y))return null;var st=o+(rr(ve)?ve:0),We=y+(rr(le)?le:0),Xe;switch(Q){case"start":Xe=vg("calc(".concat(D,")"));break;case"middle":Xe=vg("calc(".concat((se.length-1)/2," * -").concat(C," + (").concat(D," / 2))"));break;default:Xe=vg("calc(".concat(se.length-1," * -").concat(C,")"));break}var St=[];if(B){var Mt=se[0].width,Pt=K.width;St.push("scale(".concat((rr(Pt)?Pt/Mt:1)/Mt,")"))}return fe&&St.push("rotate(".concat(fe,", ").concat(st,", ").concat(We,")")),St.length&&(Ze.transform=St.join(" ")),tt.createElement("text",i_({},zr(Ze,!0),{x:st,y:We,className:tn("recharts-text",Te),textAnchor:X,fill:te.includes("url")?uP:te}),se.map(function(ht,kt){var mt=ht.words.join(Ee?"":" ");return tt.createElement("tspan",{x:st,dy:kt===0?Xe:C,key:"".concat(mt,"-").concat(kt)},mt)}))};function lc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ine(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Px(e){let t,n,o;e.length!==2?(t=lc,n=(C,a)=>lc(e(C),a),o=(C,a)=>e(C)-a):(t=e===lc||e===ine?e:one,n=e,o=e);function h(C,a,D=0,j=C.length){if(D<j){if(t(a,a)!==0)return j;do{const B=D+j>>>1;n(C[B],a)<0?D=B+1:j=B}while(D<j)}return D}function y(C,a,D=0,j=C.length){if(D<j){if(t(a,a)!==0)return j;do{const B=D+j>>>1;n(C[B],a)<=0?D=B+1:j=B}while(D<j)}return D}function w(C,a,D=0,j=C.length){const B=h(C,a,D,j-1);return B>D&&o(C[B-1],a)>-o(C[B],a)?B-1:B}return{left:h,center:w,right:y}}function one(){return 0}function MD(e){return e===null?NaN:+e}function*ane(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const sne=Px(lc),x6=sne.right;Px(MD).center;class hP extends Map{constructor(t,n=une){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[o,h]of t)this.set(o,h)}get(t){return super.get(fP(this,t))}has(t){return super.has(fP(this,t))}set(t,n){return super.set(lne(this,t),n)}delete(t){return super.delete(cne(this,t))}}function fP({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):n}function lne({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):(e.set(o,n),n)}function cne({_intern:e,_key:t},n){const o=t(n);return e.has(o)&&(n=e.get(o),e.delete(o)),n}function une(e){return e!==null&&typeof e=="object"?e.valueOf():e}function hne(e=lc){if(e===lc)return CD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const o=e(t,n);return o||o===0?o:(e(n,n)===0)-(e(t,t)===0)}}function CD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const fne=Math.sqrt(50),dne=Math.sqrt(10),pne=Math.sqrt(2);function Zp(e,t,n){const o=(t-e)/Math.max(0,n),h=Math.floor(Math.log10(o)),y=o/Math.pow(10,h),w=y>=fne?10:y>=dne?5:y>=pne?2:1;let C,a,D;return h<0?(D=Math.pow(10,-h)/w,C=Math.round(e*D),a=Math.round(t*D),C/D<e&&++C,a/D>t&&--a,D=-D):(D=Math.pow(10,h)*w,C=Math.round(e/D),a=Math.round(t/D),C*D<e&&++C,a*D>t&&--a),a<C&&.5<=n&&n<2?Zp(e,t,n*2):[C,a,D]}function o_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const o=t<e,[h,y,w]=o?Zp(t,e,n):Zp(e,t,n);if(!(y>=h))return[];const C=y-h+1,a=new Array(C);if(o)if(w<0)for(let D=0;D<C;++D)a[D]=(y-D)/-w;else for(let D=0;D<C;++D)a[D]=(y-D)*w;else if(w<0)for(let D=0;D<C;++D)a[D]=(h+D)/-w;else for(let D=0;D<C;++D)a[D]=(h+D)*w;return a}function a_(e,t,n){return t=+t,e=+e,n=+n,Zp(e,t,n)[2]}function s_(e,t,n){t=+t,e=+e,n=+n;const o=t<e,h=o?a_(t,e,n):a_(e,t,n);return(o?-1:1)*(h<0?1/-h:h)}function dP(e,t){let n;for(const o of e)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);return n}function pP(e,t){let n;for(const o of e)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);return n}function ID(e,t,n=0,o=1/0,h){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),o=Math.floor(Math.min(e.length-1,o)),!(n<=t&&t<=o))return e;for(h=h===void 0?CD:hne(h);o>n;){if(o-n>600){const a=o-n+1,D=t-n+1,j=Math.log(a),B=.5*Math.exp(2*j/3),H=.5*Math.sqrt(j*B*(a-B)/a)*(D-a/2<0?-1:1),X=Math.max(n,Math.floor(t-D*B/a+H)),ie=Math.min(o,Math.floor(t+(a-D)*B/a+H));ID(e,t,X,ie,h)}const y=e[t];let w=n,C=o;for(kh(e,n,t),h(e[o],y)>0&&kh(e,n,o);w<C;){for(kh(e,w,C),++w,--C;h(e[w],y)<0;)++w;for(;h(e[C],y)>0;)--C}h(e[n],y)===0?kh(e,n,C):(++C,kh(e,C,o)),C<=t&&(n=C+1),t<=C&&(o=C-1)}return e}function kh(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function mne(e,t,n){if(e=Float64Array.from(ane(e)),!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return pP(e);if(t>=1)return dP(e);var o,h=(o-1)*t,y=Math.floor(h),w=dP(ID(e,y).subarray(0,y+1)),C=pP(e.subarray(y+1));return w+(C-w)*(h-y)}}function gne(e,t,n=MD){if(!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return+n(e[0],0,e);if(t>=1)return+n(e[o-1],o-1,e);var o,h=(o-1)*t,y=Math.floor(h),w=+n(e[y],y,e),C=+n(e[y+1],y+1,e);return w+(C-w)*(h-y)}}function yne(e,t,n){e=+e,t=+t,n=(h=arguments.length)<2?(t=e,e=0,1):h<3?1:+n;for(var o=-1,h=Math.max(0,Math.ceil((t-e)/n))|0,y=new Array(h);++o<h;)y[o]=e+o*n;return y}function Wa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const l_=Symbol("implicit");function Mx(){var e=new hP,t=[],n=[],o=l_;function h(y){let w=e.get(y);if(w===void 0){if(o!==l_)return o;e.set(y,w=t.push(y)-1)}return n[w%n.length]}return h.domain=function(y){if(!arguments.length)return t.slice();t=[],e=new hP;for(const w of y)e.has(w)||e.set(w,t.push(w)-1);return h},h.range=function(y){return arguments.length?(n=Array.from(y),h):n.slice()},h.unknown=function(y){return arguments.length?(o=y,h):o},h.copy=function(){return Mx(t,n).unknown(o)},Wa.apply(h,arguments),h}function L5(){var e=Mx().unknown(void 0),t=e.domain,n=e.range,o=0,h=1,y,w,C=!1,a=0,D=0,j=.5;delete e.unknown;function B(){var H=t().length,X=h<o,ie=X?h:o,Q=X?o:h;y=(Q-ie)/Math.max(1,H-a+D*2),C&&(y=Math.floor(y)),ie+=(Q-ie-y*(H-a))*j,w=y*(1-a),C&&(ie=Math.round(ie),w=Math.round(w));var ne=yne(H).map(function(te){return ie+y*te});return n(X?ne.reverse():ne)}return e.domain=function(H){return arguments.length?(t(H),B()):t()},e.range=function(H){return arguments.length?([o,h]=H,o=+o,h=+h,B()):[o,h]},e.rangeRound=function(H){return[o,h]=H,o=+o,h=+h,C=!0,B()},e.bandwidth=function(){return w},e.step=function(){return y},e.round=function(H){return arguments.length?(C=!!H,B()):C},e.padding=function(H){return arguments.length?(a=Math.min(1,D=+H),B()):a},e.paddingInner=function(H){return arguments.length?(a=Math.min(1,H),B()):a},e.paddingOuter=function(H){return arguments.length?(D=+H,B()):D},e.align=function(H){return arguments.length?(j=Math.max(0,Math.min(1,H)),B()):j},e.copy=function(){return L5(t(),[o,h]).round(C).paddingInner(a).paddingOuter(D).align(j)},Wa.apply(B(),arguments)}function OD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return OD(t())},e}function i5(){return OD(L5.apply(null,arguments).paddingInner(1))}function Cx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function RD(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function b6(){}var z5=.7,Xp=1/z5,$0="\\s*([+-]?\\d+)\\s*",B5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_ne=/^#([0-9a-f]{3,8})$/,vne=new RegExp(`^rgb\\(${$0},${$0},${$0}\\)$`),xne=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),bne=new RegExp(`^rgba\\(${$0},${$0},${$0},${B5}\\)$`),wne=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${B5}\\)$`),Ane=new RegExp(`^hsl\\(${B5},${Ws},${Ws}\\)$`),Tne=new RegExp(`^hsla\\(${B5},${Ws},${Ws},${B5}\\)$`),mP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cx(b6,F5,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gP,formatHex:gP,formatHex8:Sne,formatHsl:Ene,formatRgb:yP,toString:yP});function gP(){return this.rgb().formatHex()}function Sne(){return this.rgb().formatHex8()}function Ene(){return DD(this).formatHsl()}function yP(){return this.rgb().formatRgb()}function F5(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_ne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_P(t):n===3?new Wo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vne.exec(e))?new Wo(t[1],t[2],t[3],1):(t=xne.exec(e))?new Wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bne.exec(e))?Bd(t[1],t[2],t[3],t[4]):(t=wne.exec(e))?Bd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ane.exec(e))?bP(t[1],t[2]/100,t[3]/100,1):(t=Tne.exec(e))?bP(t[1],t[2]/100,t[3]/100,t[4]):mP.hasOwnProperty(e)?_P(mP[e]):e==="transparent"?new Wo(NaN,NaN,NaN,0):null}function _P(e){return new Wo(e>>16&255,e>>8&255,e&255,1)}function Bd(e,t,n,o){return o<=0&&(e=t=n=NaN),new Wo(e,t,n,o)}function Pne(e){return e instanceof b6||(e=F5(e)),e?(e=e.rgb(),new Wo(e.r,e.g,e.b,e.opacity)):new Wo}function c_(e,t,n,o){return arguments.length===1?Pne(e):new Wo(e,t,n,o??1)}function Wo(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Cx(Wo,c_,RD(b6,{brighter(e){return e=e==null?Xp:Math.pow(Xp,e),new Wo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?z5:Math.pow(z5,e),new Wo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wo(Du(this.r),Du(this.g),Du(this.b),Yp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vP,formatHex:vP,formatHex8:Mne,formatRgb:xP,toString:xP}));function vP(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}`}function Mne(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}${Pu((isNaN(this.opacity)?1:this.opacity)*255)}`}function xP(){const e=Yp(this.opacity);return`${e===1?"rgb(":"rgba("}${Du(this.r)}, ${Du(this.g)}, ${Du(this.b)}${e===1?")":`, ${e})`}`}function Yp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Du(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pu(e){return e=Du(e),(e<16?"0":"")+e.toString(16)}function bP(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _s(e,t,n,o)}function DD(e){if(e instanceof _s)return new _s(e.h,e.s,e.l,e.opacity);if(e instanceof b6||(e=F5(e)),!e)return new _s;if(e instanceof _s)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,h=Math.min(t,n,o),y=Math.max(t,n,o),w=NaN,C=y-h,a=(y+h)/2;return C?(t===y?w=(n-o)/C+(n<o)*6:n===y?w=(o-t)/C+2:w=(t-n)/C+4,C/=a<.5?y+h:2-y-h,w*=60):C=a>0&&a<1?0:w,new _s(w,C,a,e.opacity)}function Cne(e,t,n,o){return arguments.length===1?DD(e):new _s(e,t,n,o??1)}function _s(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Cx(_s,Cne,RD(b6,{brighter(e){return e=e==null?Xp:Math.pow(Xp,e),new _s(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?z5:Math.pow(z5,e),new _s(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,h=2*n-o;return new Wo(xg(e>=240?e-240:e+120,h,o),xg(e,h,o),xg(e<120?e+240:e-120,h,o),this.opacity)},clamp(){return new _s(wP(this.h),Fd(this.s),Fd(this.l),Yp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yp(this.opacity);return`${e===1?"hsl(":"hsla("}${wP(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wP(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function xg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ix=e=>()=>e;function Ine(e,t){return function(n){return e+n*t}}function One(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Rne(e){return(e=+e)==1?kD:function(t,n){return n-t?One(t,n,e):Ix(isNaN(t)?n:t)}}function kD(e,t){var n=t-e;return n?Ine(e,n):Ix(isNaN(e)?t:e)}const AP=function e(t){var n=Rne(t);function o(h,y){var w=n((h=c_(h)).r,(y=c_(y)).r),C=n(h.g,y.g),a=n(h.b,y.b),D=kD(h.opacity,y.opacity);return function(j){return h.r=w(j),h.g=C(j),h.b=a(j),h.opacity=D(j),h+""}}return o.gamma=e,o}(1);function Dne(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),h;return function(y){for(h=0;h<n;++h)o[h]=e[h]*(1-y)+t[h]*y;return o}}function kne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lne(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,h=new Array(o),y=new Array(n),w;for(w=0;w<o;++w)h[w]=D2(e[w],t[w]);for(;w<n;++w)y[w]=t[w];return function(C){for(w=0;w<o;++w)y[w]=h[w](C);return y}}function zne(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Kp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Bne(e,t){var n={},o={},h;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(h in t)h in e?n[h]=D2(e[h],t[h]):o[h]=t[h];return function(y){for(h in n)o[h]=n[h](y);return o}}var u_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(u_.source,"g");function Fne(e){return function(){return e}}function Nne(e){return function(t){return e(t)+""}}function jne(e,t){var n=u_.lastIndex=bg.lastIndex=0,o,h,y,w=-1,C=[],a=[];for(e=e+"",t=t+"";(o=u_.exec(e))&&(h=bg.exec(t));)(y=h.index)>n&&(y=t.slice(n,y),C[w]?C[w]+=y:C[++w]=y),(o=o[0])===(h=h[0])?C[w]?C[w]+=h:C[++w]=h:(C[++w]=null,a.push({i:w,x:Kp(o,h)})),n=bg.lastIndex;return n<t.length&&(y=t.slice(n),C[w]?C[w]+=y:C[++w]=y),C.length<2?a[0]?Nne(a[0].x):Fne(t):(t=a.length,function(D){for(var j=0,B;j<t;++j)C[(B=a[j]).i]=B.x(D);return C.join("")})}function D2(e,t){var n=typeof t,o;return t==null||n==="boolean"?Ix(t):(n==="number"?Kp:n==="string"?(o=F5(t))?(t=o,AP):jne:t instanceof F5?AP:t instanceof Date?zne:kne(t)?Dne:Array.isArray(t)?Lne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bne:Kp)(e,t)}function Ox(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function $ne(e,t){t===void 0&&(t=e,e=D2);for(var n=0,o=t.length-1,h=t[0],y=new Array(o<0?0:o);n<o;)y[n]=e(h,h=t[++n]);return function(w){var C=Math.max(0,Math.min(o-1,Math.floor(w*=o)));return y[C](w-C)}}function Une(e){return function(){return e}}function Jp(e){return+e}var TP=[0,1];function Ro(e){return e}function h_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Une(isNaN(t)?NaN:.5)}function Vne(e,t){var n;return e>t&&(n=e,e=t,t=n),function(o){return Math.max(e,Math.min(t,o))}}function Gne(e,t,n){var o=e[0],h=e[1],y=t[0],w=t[1];return h<o?(o=h_(h,o),y=n(w,y)):(o=h_(o,h),y=n(y,w)),function(C){return y(o(C))}}function qne(e,t,n){var o=Math.min(e.length,t.length)-1,h=new Array(o),y=new Array(o),w=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++w<o;)h[w]=h_(e[w],e[w+1]),y[w]=n(t[w],t[w+1]);return function(C){var a=x6(e,C,1,o)-1;return y[a](h[a](C))}}function w6(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x4(){var e=TP,t=TP,n=D2,o,h,y,w=Ro,C,a,D;function j(){var H=Math.min(e.length,t.length);return w!==Ro&&(w=Vne(e[0],e[H-1])),C=H>2?qne:Gne,a=D=null,B}function B(H){return H==null||isNaN(H=+H)?y:(a||(a=C(e.map(o),t,n)))(o(w(H)))}return B.invert=function(H){return w(h((D||(D=C(t,e.map(o),Kp)))(H)))},B.domain=function(H){return arguments.length?(e=Array.from(H,Jp),j()):e.slice()},B.range=function(H){return arguments.length?(t=Array.from(H),j()):t.slice()},B.rangeRound=function(H){return t=Array.from(H),n=Ox,j()},B.clamp=function(H){return arguments.length?(w=H?!0:Ro,j()):w!==Ro},B.interpolate=function(H){return arguments.length?(n=H,j()):n},B.unknown=function(H){return arguments.length?(y=H,B):y},function(H,X){return o=H,h=X,j()}}function Rx(){return x4()(Ro,Ro)}function Wne(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,o=e.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+e.slice(n+1)]}function r2(e){return e=Qp(Math.abs(e)),e?e[1]:NaN}function Hne(e,t){return function(n,o){for(var h=n.length,y=[],w=0,C=e[0],a=0;h>0&&C>0&&(a+C+1>o&&(C=Math.max(1,o-a)),y.push(n.substring(h-=C,h+C)),!((a+=C+1)>o));)C=e[w=(w+1)%e.length];return y.reverse().join(t)}}function Zne(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Xne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function N5(e){if(!(t=Xne.exec(e)))throw new Error("invalid format: "+e);var t;return new Dx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}N5.prototype=Dx.prototype;function Dx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yne(e){e:for(var t=e.length,n=1,o=-1,h;n<t;++n)switch(e[n]){case".":o=h=n;break;case"0":o===0&&(o=n),h=n;break;default:if(!+e[n])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(h+1):e}var LD;function Kne(e,t){var n=Qp(e,t);if(!n)return e+"";var o=n[0],h=n[1],y=h-(LD=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,w=o.length;return y===w?o:y>w?o+new Array(y-w+1).join("0"):y>0?o.slice(0,y)+"."+o.slice(y):"0."+new Array(1-y).join("0")+Qp(e,Math.max(0,t+y-1))[0]}function SP(e,t){var n=Qp(e,t);if(!n)return e+"";var o=n[0],h=n[1];return h<0?"0."+new Array(-h).join("0")+o:o.length>h+1?o.slice(0,h+1)+"."+o.slice(h+1):o+new Array(h-o.length+2).join("0")}const EP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Wne,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>SP(e*100,t),r:SP,s:Kne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PP(e){return e}var MP=Array.prototype.map,CP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jne(e){var t=e.grouping===void 0||e.thousands===void 0?PP:Hne(MP.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",h=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?PP:Zne(MP.call(e.numerals,String)),w=e.percent===void 0?"%":e.percent+"",C=e.minus===void 0?"":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function D(B){B=N5(B);var H=B.fill,X=B.align,ie=B.sign,Q=B.symbol,ne=B.zero,te=B.width,K=B.comma,se=B.precision,ve=B.trim,le=B.type;le==="n"?(K=!0,le="g"):EP[le]||(se===void 0&&(se=12),ve=!0,le="g"),(ne||H==="0"&&X==="=")&&(ne=!0,H="0",X="=");var fe=Q==="$"?n:Q==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",Te=Q==="$"?o:/[%p]/.test(le)?w:"",Ee=EP[le],Ze=/[defgprs%]/.test(le);se=se===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function st(We){var Xe=fe,St=Te,Mt,Pt,ht;if(le==="c")St=Ee(We)+St,We="";else{We=+We;var kt=We<0||1/We<0;if(We=isNaN(We)?a:Ee(Math.abs(We),se),ve&&(We=Yne(We)),kt&&+We==0&&ie!=="+"&&(kt=!1),Xe=(kt?ie==="("?ie:C:ie==="-"||ie==="("?"":ie)+Xe,St=(le==="s"?CP[8+LD/3]:"")+St+(kt&&ie==="("?")":""),Ze){for(Mt=-1,Pt=We.length;++Mt<Pt;)if(ht=We.charCodeAt(Mt),48>ht||ht>57){St=(ht===46?h+We.slice(Mt+1):We.slice(Mt))+St,We=We.slice(0,Mt);break}}}K&&!ne&&(We=t(We,1/0));var mt=Xe.length+We.length+St.length,Ct=mt<te?new Array(te-mt+1).join(H):"";switch(K&&ne&&(We=t(Ct+We,Ct.length?te-St.length:1/0),Ct=""),X){case"<":We=Xe+We+St+Ct;break;case"=":We=Xe+Ct+We+St;break;case"^":We=Ct.slice(0,mt=Ct.length>>1)+Xe+We+St+Ct.slice(mt);break;default:We=Ct+Xe+We+St;break}return y(We)}return st.toString=function(){return B+""},st}function j(B,H){var X=D((B=N5(B),B.type="f",B)),ie=Math.max(-8,Math.min(8,Math.floor(r2(H)/3)))*3,Q=Math.pow(10,-ie),ne=CP[8+ie/3];return function(te){return X(Q*te)+ne}}return{format:D,formatPrefix:j}}var Nd,kx,zD;Qne({thousands:",",grouping:[3],currency:["$",""]});function Qne(e){return Nd=Jne(e),kx=Nd.format,zD=Nd.formatPrefix,Nd}function eie(e){return Math.max(0,-r2(Math.abs(e)))}function tie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(r2(t)/3)))*3-r2(Math.abs(e)))}function rie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,r2(t)-r2(e))+1}function BD(e,t,n,o){var h=s_(e,t,n),y;switch(o=N5(o??",f"),o.type){case"s":{var w=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(y=tie(h,w))&&(o.precision=y),zD(o,w)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(y=rie(h,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=y-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(y=eie(h))&&(o.precision=y-(o.type==="%")*2);break}}return kx(o)}function yc(e){var t=e.domain;return e.ticks=function(n){var o=t();return o_(o[0],o[o.length-1],n??10)},e.tickFormat=function(n,o){var h=t();return BD(h[0],h[h.length-1],n??10,o)},e.nice=function(n){n==null&&(n=10);var o=t(),h=0,y=o.length-1,w=o[h],C=o[y],a,D,j=10;for(C<w&&(D=w,w=C,C=D,D=h,h=y,y=D);j-- >0;){if(D=a_(w,C,n),D===a)return o[h]=w,o[y]=C,t(o);if(D>0)w=Math.floor(w/D)*D,C=Math.ceil(C/D)*D;else if(D<0)w=Math.ceil(w*D)/D,C=Math.floor(C*D)/D;else break;a=D}return e},e}function e9(){var e=Rx();return e.copy=function(){return w6(e,e9())},Wa.apply(e,arguments),yc(e)}function FD(e){var t;function n(o){return o==null||isNaN(o=+o)?t:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(e=Array.from(o,Jp),n):e.slice()},n.unknown=function(o){return arguments.length?(t=o,n):t},n.copy=function(){return FD(e).unknown(t)},e=arguments.length?Array.from(e,Jp):[0,1],yc(n)}function ND(e,t){e=e.slice();var n=0,o=e.length-1,h=e[n],y=e[o],w;return y<h&&(w=n,n=o,o=w,w=h,h=y,y=w),e[n]=t.floor(h),e[o]=t.ceil(y),e}function IP(e){return Math.log(e)}function OP(e){return Math.exp(e)}function nie(e){return-Math.log(-e)}function iie(e){return-Math.exp(-e)}function oie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aie(e){return e===10?oie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RP(e){return(t,n)=>-e(-t,n)}function Lx(e){const t=e(IP,OP),n=t.domain;let o=10,h,y;function w(){return h=sie(o),y=aie(o),n()[0]<0?(h=RP(h),y=RP(y),e(nie,iie)):e(IP,OP),t}return t.base=function(C){return arguments.length?(o=+C,w()):o},t.domain=function(C){return arguments.length?(n(C),w()):n()},t.ticks=C=>{const a=n();let D=a[0],j=a[a.length-1];const B=j<D;B&&([D,j]=[j,D]);let H=h(D),X=h(j),ie,Q;const ne=C==null?10:+C;let te=[];if(!(o%1)&&X-H<ne){if(H=Math.floor(H),X=Math.ceil(X),D>0){for(;H<=X;++H)for(ie=1;ie<o;++ie)if(Q=H<0?ie/y(-H):ie*y(H),!(Q<D)){if(Q>j)break;te.push(Q)}}else for(;H<=X;++H)for(ie=o-1;ie>=1;--ie)if(Q=H>0?ie/y(-H):ie*y(H),!(Q<D)){if(Q>j)break;te.push(Q)}te.length*2<ne&&(te=o_(D,j,ne))}else te=o_(H,X,Math.min(X-H,ne)).map(y);return B?te.reverse():te},t.tickFormat=(C,a)=>{if(C==null&&(C=10),a==null&&(a=o===10?"s":","),typeof a!="function"&&(!(o%1)&&(a=N5(a)).precision==null&&(a.trim=!0),a=kx(a)),C===1/0)return a;const D=Math.max(1,o*C/t.ticks().length);return j=>{let B=j/y(Math.round(h(j)));return B*o<o-.5&&(B*=o),B<=D?a(j):""}},t.nice=()=>n(ND(n(),{floor:C=>y(Math.floor(h(C))),ceil:C=>y(Math.ceil(h(C)))})),t}function jD(){const e=Lx(x4()).domain([1,10]);return e.copy=()=>w6(e,jD()).base(e.base()),Wa.apply(e,arguments),e}function DP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zx(e){var t=1,n=e(DP(t),kP(t));return n.constant=function(o){return arguments.length?e(DP(t=+o),kP(t)):t},yc(n)}function $D(){var e=zx(x4());return e.copy=function(){return w6(e,$D()).constant(e.constant())},Wa.apply(e,arguments)}function LP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function lie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function cie(e){return e<0?-e*e:e*e}function Bx(e){var t=e(Ro,Ro),n=1;function o(){return n===1?e(Ro,Ro):n===.5?e(lie,cie):e(LP(n),LP(1/n))}return t.exponent=function(h){return arguments.length?(n=+h,o()):n},yc(t)}function Fx(){var e=Bx(x4());return e.copy=function(){return w6(e,Fx()).exponent(e.exponent())},Wa.apply(e,arguments),e}function uie(){return Fx.apply(null,arguments).exponent(.5)}function zP(e){return Math.sign(e)*e*e}function hie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function UD(){var e=Rx(),t=[0,1],n=!1,o;function h(y){var w=hie(e(y));return isNaN(w)?o:n?Math.round(w):w}return h.invert=function(y){return e.invert(zP(y))},h.domain=function(y){return arguments.length?(e.domain(y),h):e.domain()},h.range=function(y){return arguments.length?(e.range((t=Array.from(y,Jp)).map(zP)),h):t.slice()},h.rangeRound=function(y){return h.range(y).round(!0)},h.round=function(y){return arguments.length?(n=!!y,h):n},h.clamp=function(y){return arguments.length?(e.clamp(y),h):e.clamp()},h.unknown=function(y){return arguments.length?(o=y,h):o},h.copy=function(){return UD(e.domain(),t).round(n).clamp(e.clamp()).unknown(o)},Wa.apply(h,arguments),yc(h)}function VD(){var e=[],t=[],n=[],o;function h(){var w=0,C=Math.max(1,t.length);for(n=new Array(C-1);++w<C;)n[w-1]=gne(e,w/C);return y}function y(w){return w==null||isNaN(w=+w)?o:t[x6(n,w)]}return y.invertExtent=function(w){var C=t.indexOf(w);return C<0?[NaN,NaN]:[C>0?n[C-1]:e[0],C<n.length?n[C]:e[e.length-1]]},y.domain=function(w){if(!arguments.length)return e.slice();e=[];for(let C of w)C!=null&&!isNaN(C=+C)&&e.push(C);return e.sort(lc),h()},y.range=function(w){return arguments.length?(t=Array.from(w),h()):t.slice()},y.unknown=function(w){return arguments.length?(o=w,y):o},y.quantiles=function(){return n.slice()},y.copy=function(){return VD().domain(e).range(t).unknown(o)},Wa.apply(y,arguments)}function GD(){var e=0,t=1,n=1,o=[.5],h=[0,1],y;function w(a){return a!=null&&a<=a?h[x6(o,a,0,n)]:y}function C(){var a=-1;for(o=new Array(n);++a<n;)o[a]=((a+1)*t-(a-n)*e)/(n+1);return w}return w.domain=function(a){return arguments.length?([e,t]=a,e=+e,t=+t,C()):[e,t]},w.range=function(a){return arguments.length?(n=(h=Array.from(a)).length-1,C()):h.slice()},w.invertExtent=function(a){var D=h.indexOf(a);return D<0?[NaN,NaN]:D<1?[e,o[0]]:D>=n?[o[n-1],t]:[o[D-1],o[D]]},w.unknown=function(a){return arguments.length&&(y=a),w},w.thresholds=function(){return o.slice()},w.copy=function(){return GD().domain([e,t]).range(h).unknown(y)},Wa.apply(yc(w),arguments)}function qD(){var e=[.5],t=[0,1],n,o=1;function h(y){return y!=null&&y<=y?t[x6(e,y,0,o)]:n}return h.domain=function(y){return arguments.length?(e=Array.from(y),o=Math.min(e.length,t.length-1),h):e.slice()},h.range=function(y){return arguments.length?(t=Array.from(y),o=Math.min(e.length,t.length-1),h):t.slice()},h.invertExtent=function(y){var w=t.indexOf(y);return[e[w-1],e[w]]},h.unknown=function(y){return arguments.length?(n=y,h):n},h.copy=function(){return qD().domain(e).range(t).unknown(n)},Wa.apply(h,arguments)}const wg=new Date,Ag=new Date;function Li(e,t,n,o){function h(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return h.floor=y=>(e(y=new Date(+y)),y),h.ceil=y=>(e(y=new Date(y-1)),t(y,1),e(y),y),h.round=y=>{const w=h(y),C=h.ceil(y);return y-w<C-y?w:C},h.offset=(y,w)=>(t(y=new Date(+y),w==null?1:Math.floor(w)),y),h.range=(y,w,C)=>{const a=[];if(y=h.ceil(y),C=C==null?1:Math.floor(C),!(y<w)||!(C>0))return a;let D;do a.push(D=new Date(+y)),t(y,C),e(y);while(D<y&&y<w);return a},h.filter=y=>Li(w=>{if(w>=w)for(;e(w),!y(w);)w.setTime(w-1)},(w,C)=>{if(w>=w)if(C<0)for(;++C<=0;)for(;t(w,-1),!y(w););else for(;--C>=0;)for(;t(w,1),!y(w););}),n&&(h.count=(y,w)=>(wg.setTime(+y),Ag.setTime(+w),e(wg),e(Ag),Math.floor(n(wg,Ag))),h.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?h.filter(o?w=>o(w)%y===0:w=>h.count(0,w)%y===0):h)),h}const t9=Li(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);t9.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Li(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):t9);t9.range;const Tl=1e3,Fa=Tl*60,Sl=Fa*60,Ll=Sl*24,Nx=Ll*7,BP=Ll*30,Tg=Ll*365,Mu=Li(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getUTCSeconds());Mu.range;const jx=Li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tl)},(e,t)=>{e.setTime(+e+t*Fa)},(e,t)=>(t-e)/Fa,e=>e.getMinutes());jx.range;const $x=Li(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fa)},(e,t)=>(t-e)/Fa,e=>e.getUTCMinutes());$x.range;const Ux=Li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tl-e.getMinutes()*Fa)},(e,t)=>{e.setTime(+e+t*Sl)},(e,t)=>(t-e)/Sl,e=>e.getHours());Ux.range;const Vx=Li(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Sl)},(e,t)=>(t-e)/Sl,e=>e.getUTCHours());Vx.range;const A6=Li(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fa)/Ll,e=>e.getDate()-1);A6.range;const b4=Li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ll,e=>e.getUTCDate()-1);b4.range;const WD=Li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ll,e=>Math.floor(e/Ll));WD.range;function Xu(e){return Li(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fa)/Nx)}const w4=Xu(0),r9=Xu(1),fie=Xu(2),die=Xu(3),n2=Xu(4),pie=Xu(5),mie=Xu(6);w4.range;r9.range;fie.range;die.range;n2.range;pie.range;mie.range;function Yu(e){return Li(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Nx)}const A4=Yu(0),n9=Yu(1),gie=Yu(2),yie=Yu(3),i2=Yu(4),_ie=Yu(5),vie=Yu(6);A4.range;n9.range;gie.range;yie.range;i2.range;_ie.range;vie.range;const Gx=Li(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Gx.range;const qx=Li(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qx.range;const zl=Li(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Li(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});zl.range;const Bl=Li(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Li(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bl.range;function HD(e,t,n,o,h,y){const w=[[Mu,1,Tl],[Mu,5,5*Tl],[Mu,15,15*Tl],[Mu,30,30*Tl],[y,1,Fa],[y,5,5*Fa],[y,15,15*Fa],[y,30,30*Fa],[h,1,Sl],[h,3,3*Sl],[h,6,6*Sl],[h,12,12*Sl],[o,1,Ll],[o,2,2*Ll],[n,1,Nx],[t,1,BP],[t,3,3*BP],[e,1,Tg]];function C(D,j,B){const H=j<D;H&&([D,j]=[j,D]);const X=B&&typeof B.range=="function"?B:a(D,j,B),ie=X?X.range(D,+j+1):[];return H?ie.reverse():ie}function a(D,j,B){const H=Math.abs(j-D)/B,X=Px(([,,ne])=>ne).right(w,H);if(X===w.length)return e.every(s_(D/Tg,j/Tg,B));if(X===0)return t9.every(Math.max(s_(D,j,B),1));const[ie,Q]=w[H/w[X-1][2]<w[X][2]/H?X-1:X];return ie.every(Q)}return[C,a]}const[xie,bie]=HD(Bl,qx,A4,WD,Vx,$x),[wie,Aie]=HD(zl,Gx,w4,A6,Ux,jx);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Eg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Lh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Tie(e){var t=e.dateTime,n=e.date,o=e.time,h=e.periods,y=e.days,w=e.shortDays,C=e.months,a=e.shortMonths,D=zh(h),j=Bh(h),B=zh(y),H=Bh(y),X=zh(w),ie=Bh(w),Q=zh(C),ne=Bh(C),te=zh(a),K=Bh(a),se={a:kt,A:mt,b:Ct,B:_t,c:null,d:VP,e:VP,f:Hie,g:noe,G:ooe,H:Gie,I:qie,j:Wie,L:ZD,m:Zie,M:Xie,p:Qt,q:qt,Q:WP,s:HP,S:Yie,u:Kie,U:Jie,V:Qie,w:eoe,W:toe,x:null,X:null,y:roe,Y:ioe,Z:aoe,"%":qP},ve={a:gr,A:Gt,b:vn,B:cn,c:null,d:GP,e:GP,f:uoe,g:xoe,G:woe,H:soe,I:loe,j:coe,L:YD,m:hoe,M:foe,p:Ln,q:ii,Q:WP,s:HP,S:doe,u:poe,U:moe,V:goe,w:yoe,W:_oe,x:null,X:null,y:voe,Y:boe,Z:Aoe,"%":qP},le={a:st,A:We,b:Xe,B:St,c:Mt,d:$P,e:$P,f:jie,g:jP,G:NP,H:UP,I:UP,j:zie,L:Nie,m:Lie,M:Bie,p:Ze,q:kie,Q:Uie,s:Vie,S:Fie,u:Cie,U:Iie,V:Oie,w:Mie,W:Rie,x:Pt,X:ht,y:jP,Y:NP,Z:Die,"%":$ie};se.x=fe(n,se),se.X=fe(o,se),se.c=fe(t,se),ve.x=fe(n,ve),ve.X=fe(o,ve),ve.c=fe(t,ve);function fe(er,Cr){return function(Pe){var Nt=[],gn=-1,Vr=0,vt=er.length,Tn,un,wi;for(Pe instanceof Date||(Pe=new Date(+Pe));++gn<vt;)er.charCodeAt(gn)===37&&(Nt.push(er.slice(Vr,gn)),(un=FP[Tn=er.charAt(++gn)])!=null?Tn=er.charAt(++gn):un=Tn==="e"?" ":"0",(wi=Cr[Tn])&&(Tn=wi(Pe,un)),Nt.push(Tn),Vr=gn+1);return Nt.push(er.slice(Vr,gn)),Nt.join("")}}function Te(er,Cr){return function(Pe){var Nt=Lh(1900,void 0,1),gn=Ee(Nt,er,Pe+="",0),Vr,vt;if(gn!=Pe.length)return null;if("Q"in Nt)return new Date(Nt.Q);if("s"in Nt)return new Date(Nt.s*1e3+("L"in Nt?Nt.L:0));if(Cr&&!("Z"in Nt)&&(Nt.Z=0),"p"in Nt&&(Nt.H=Nt.H%12+Nt.p*12),Nt.m===void 0&&(Nt.m="q"in Nt?Nt.q:0),"V"in Nt){if(Nt.V<1||Nt.V>53)return null;"w"in Nt||(Nt.w=1),"Z"in Nt?(Vr=Eg(Lh(Nt.y,0,1)),vt=Vr.getUTCDay(),Vr=vt>4||vt===0?n9.ceil(Vr):n9(Vr),Vr=b4.offset(Vr,(Nt.V-1)*7),Nt.y=Vr.getUTCFullYear(),Nt.m=Vr.getUTCMonth(),Nt.d=Vr.getUTCDate()+(Nt.w+6)%7):(Vr=Sg(Lh(Nt.y,0,1)),vt=Vr.getDay(),Vr=vt>4||vt===0?r9.ceil(Vr):r9(Vr),Vr=A6.offset(Vr,(Nt.V-1)*7),Nt.y=Vr.getFullYear(),Nt.m=Vr.getMonth(),Nt.d=Vr.getDate()+(Nt.w+6)%7)}else("W"in Nt||"U"in Nt)&&("w"in Nt||(Nt.w="u"in Nt?Nt.u%7:"W"in Nt?1:0),vt="Z"in Nt?Eg(Lh(Nt.y,0,1)).getUTCDay():Sg(Lh(Nt.y,0,1)).getDay(),Nt.m=0,Nt.d="W"in Nt?(Nt.w+6)%7+Nt.W*7-(vt+5)%7:Nt.w+Nt.U*7-(vt+6)%7);return"Z"in Nt?(Nt.H+=Nt.Z/100|0,Nt.M+=Nt.Z%100,Eg(Nt)):Sg(Nt)}}function Ee(er,Cr,Pe,Nt){for(var gn=0,Vr=Cr.length,vt=Pe.length,Tn,un;gn<Vr;){if(Nt>=vt)return-1;if(Tn=Cr.charCodeAt(gn++),Tn===37){if(Tn=Cr.charAt(gn++),un=le[Tn in FP?Cr.charAt(gn++):Tn],!un||(Nt=un(er,Pe,Nt))<0)return-1}else if(Tn!=Pe.charCodeAt(Nt++))return-1}return Nt}function Ze(er,Cr,Pe){var Nt=D.exec(Cr.slice(Pe));return Nt?(er.p=j.get(Nt[0].toLowerCase()),Pe+Nt[0].length):-1}function st(er,Cr,Pe){var Nt=X.exec(Cr.slice(Pe));return Nt?(er.w=ie.get(Nt[0].toLowerCase()),Pe+Nt[0].length):-1}function We(er,Cr,Pe){var Nt=B.exec(Cr.slice(Pe));return Nt?(er.w=H.get(Nt[0].toLowerCase()),Pe+Nt[0].length):-1}function Xe(er,Cr,Pe){var Nt=te.exec(Cr.slice(Pe));return Nt?(er.m=K.get(Nt[0].toLowerCase()),Pe+Nt[0].length):-1}function St(er,Cr,Pe){var Nt=Q.exec(Cr.slice(Pe));return Nt?(er.m=ne.get(Nt[0].toLowerCase()),Pe+Nt[0].length):-1}function Mt(er,Cr,Pe){return Ee(er,t,Cr,Pe)}function Pt(er,Cr,Pe){return Ee(er,n,Cr,Pe)}function ht(er,Cr,Pe){return Ee(er,o,Cr,Pe)}function kt(er){return w[er.getDay()]}function mt(er){return y[er.getDay()]}function Ct(er){return a[er.getMonth()]}function _t(er){return C[er.getMonth()]}function Qt(er){return h[+(er.getHours()>=12)]}function qt(er){return 1+~~(er.getMonth()/3)}function gr(er){return w[er.getUTCDay()]}function Gt(er){return y[er.getUTCDay()]}function vn(er){return a[er.getUTCMonth()]}function cn(er){return C[er.getUTCMonth()]}function Ln(er){return h[+(er.getUTCHours()>=12)]}function ii(er){return 1+~~(er.getUTCMonth()/3)}return{format:function(er){var Cr=fe(er+="",se);return Cr.toString=function(){return er},Cr},parse:function(er){var Cr=Te(er+="",!1);return Cr.toString=function(){return er},Cr},utcFormat:function(er){var Cr=fe(er+="",ve);return Cr.toString=function(){return er},Cr},utcParse:function(er){var Cr=Te(er+="",!0);return Cr.toString=function(){return er},Cr}}}var FP={"-":"",_:" ",0:"0"},qi=/^\s*\d+/,Sie=/^%/,Eie=/[\\^$*+?|[\]().{}]/g;function xn(e,t,n){var o=e<0?"-":"",h=(o?-e:e)+"",y=h.length;return o+(y<n?new Array(n-y+1).join(t)+h:h)}function Pie(e){return e.replace(Eie,"\\$&")}function zh(e){return new RegExp("^(?:"+e.map(Pie).join("|")+")","i")}function Bh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Mie(e,t,n){var o=qi.exec(t.slice(n,n+1));return o?(e.w=+o[0],n+o[0].length):-1}function Cie(e,t,n){var o=qi.exec(t.slice(n,n+1));return o?(e.u=+o[0],n+o[0].length):-1}function Iie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.U=+o[0],n+o[0].length):-1}function Oie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.V=+o[0],n+o[0].length):-1}function Rie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.W=+o[0],n+o[0].length):-1}function NP(e,t,n){var o=qi.exec(t.slice(n,n+4));return o?(e.y=+o[0],n+o[0].length):-1}function jP(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function Die(e,t,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function kie(e,t,n){var o=qi.exec(t.slice(n,n+1));return o?(e.q=o[0]*3-3,n+o[0].length):-1}function Lie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.m=o[0]-1,n+o[0].length):-1}function $P(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.d=+o[0],n+o[0].length):-1}function zie(e,t,n){var o=qi.exec(t.slice(n,n+3));return o?(e.m=0,e.d=+o[0],n+o[0].length):-1}function UP(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.H=+o[0],n+o[0].length):-1}function Bie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.M=+o[0],n+o[0].length):-1}function Fie(e,t,n){var o=qi.exec(t.slice(n,n+2));return o?(e.S=+o[0],n+o[0].length):-1}function Nie(e,t,n){var o=qi.exec(t.slice(n,n+3));return o?(e.L=+o[0],n+o[0].length):-1}function jie(e,t,n){var o=qi.exec(t.slice(n,n+6));return o?(e.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function $ie(e,t,n){var o=Sie.exec(t.slice(n,n+1));return o?n+o[0].length:-1}function Uie(e,t,n){var o=qi.exec(t.slice(n));return o?(e.Q=+o[0],n+o[0].length):-1}function Vie(e,t,n){var o=qi.exec(t.slice(n));return o?(e.s=+o[0],n+o[0].length):-1}function VP(e,t){return xn(e.getDate(),t,2)}function Gie(e,t){return xn(e.getHours(),t,2)}function qie(e,t){return xn(e.getHours()%12||12,t,2)}function Wie(e,t){return xn(1+A6.count(zl(e),e),t,3)}function ZD(e,t){return xn(e.getMilliseconds(),t,3)}function Hie(e,t){return ZD(e,t)+"000"}function Zie(e,t){return xn(e.getMonth()+1,t,2)}function Xie(e,t){return xn(e.getMinutes(),t,2)}function Yie(e,t){return xn(e.getSeconds(),t,2)}function Kie(e){var t=e.getDay();return t===0?7:t}function Jie(e,t){return xn(w4.count(zl(e)-1,e),t,2)}function XD(e){var t=e.getDay();return t>=4||t===0?n2(e):n2.ceil(e)}function Qie(e,t){return e=XD(e),xn(n2.count(zl(e),e)+(zl(e).getDay()===4),t,2)}function eoe(e){return e.getDay()}function toe(e,t){return xn(r9.count(zl(e)-1,e),t,2)}function roe(e,t){return xn(e.getFullYear()%100,t,2)}function noe(e,t){return e=XD(e),xn(e.getFullYear()%100,t,2)}function ioe(e,t){return xn(e.getFullYear()%1e4,t,4)}function ooe(e,t){var n=e.getDay();return e=n>=4||n===0?n2(e):n2.ceil(e),xn(e.getFullYear()%1e4,t,4)}function aoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xn(t/60|0,"0",2)+xn(t%60,"0",2)}function GP(e,t){return xn(e.getUTCDate(),t,2)}function soe(e,t){return xn(e.getUTCHours(),t,2)}function loe(e,t){return xn(e.getUTCHours()%12||12,t,2)}function coe(e,t){return xn(1+b4.count(Bl(e),e),t,3)}function YD(e,t){return xn(e.getUTCMilliseconds(),t,3)}function uoe(e,t){return YD(e,t)+"000"}function hoe(e,t){return xn(e.getUTCMonth()+1,t,2)}function foe(e,t){return xn(e.getUTCMinutes(),t,2)}function doe(e,t){return xn(e.getUTCSeconds(),t,2)}function poe(e){var t=e.getUTCDay();return t===0?7:t}function moe(e,t){return xn(A4.count(Bl(e)-1,e),t,2)}function KD(e){var t=e.getUTCDay();return t>=4||t===0?i2(e):i2.ceil(e)}function goe(e,t){return e=KD(e),xn(i2.count(Bl(e),e)+(Bl(e).getUTCDay()===4),t,2)}function yoe(e){return e.getUTCDay()}function _oe(e,t){return xn(n9.count(Bl(e)-1,e),t,2)}function voe(e,t){return xn(e.getUTCFullYear()%100,t,2)}function xoe(e,t){return e=KD(e),xn(e.getUTCFullYear()%100,t,2)}function boe(e,t){return xn(e.getUTCFullYear()%1e4,t,4)}function woe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?i2(e):i2.ceil(e),xn(e.getUTCFullYear()%1e4,t,4)}function Aoe(){return"+0000"}function qP(){return"%"}function WP(e){return+e}function HP(e){return Math.floor(+e/1e3)}var p0,JD,QD;Toe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Toe(e){return p0=Tie(e),JD=p0.format,p0.parse,QD=p0.utcFormat,p0.utcParse,p0}function Soe(e){return new Date(e)}function Eoe(e){return e instanceof Date?+e:+new Date(+e)}function Wx(e,t,n,o,h,y,w,C,a,D){var j=Rx(),B=j.invert,H=j.domain,X=D(".%L"),ie=D(":%S"),Q=D("%I:%M"),ne=D("%I %p"),te=D("%a %d"),K=D("%b %d"),se=D("%B"),ve=D("%Y");function le(fe){return(a(fe)<fe?X:C(fe)<fe?ie:w(fe)<fe?Q:y(fe)<fe?ne:o(fe)<fe?h(fe)<fe?te:K:n(fe)<fe?se:ve)(fe)}return j.invert=function(fe){return new Date(B(fe))},j.domain=function(fe){return arguments.length?H(Array.from(fe,Eoe)):H().map(Soe)},j.ticks=function(fe){var Te=H();return e(Te[0],Te[Te.length-1],fe??10)},j.tickFormat=function(fe,Te){return Te==null?le:D(Te)},j.nice=function(fe){var Te=H();return(!fe||typeof fe.range!="function")&&(fe=t(Te[0],Te[Te.length-1],fe??10)),fe?H(ND(Te,fe)):j},j.copy=function(){return w6(j,Wx(e,t,n,o,h,y,w,C,a,D))},j}function Poe(){return Wa.apply(Wx(wie,Aie,zl,Gx,w4,A6,Ux,jx,Mu,JD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Moe(){return Wa.apply(Wx(xie,bie,Bl,qx,A4,b4,Vx,$x,Mu,QD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function T4(){var e=0,t=1,n,o,h,y,w=Ro,C=!1,a;function D(B){return B==null||isNaN(B=+B)?a:w(h===0?.5:(B=(y(B)-n)*h,C?Math.max(0,Math.min(1,B)):B))}D.domain=function(B){return arguments.length?([e,t]=B,n=y(e=+e),o=y(t=+t),h=n===o?0:1/(o-n),D):[e,t]},D.clamp=function(B){return arguments.length?(C=!!B,D):C},D.interpolator=function(B){return arguments.length?(w=B,D):w};function j(B){return function(H){var X,ie;return arguments.length?([X,ie]=H,w=B(X,ie),D):[w(0),w(1)]}}return D.range=j(D2),D.rangeRound=j(Ox),D.unknown=function(B){return arguments.length?(a=B,D):a},function(B){return y=B,n=B(e),o=B(t),h=n===o?0:1/(o-n),D}}function _c(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ek(){var e=yc(T4()(Ro));return e.copy=function(){return _c(e,ek())},Vl.apply(e,arguments)}function tk(){var e=Lx(T4()).domain([1,10]);return e.copy=function(){return _c(e,tk()).base(e.base())},Vl.apply(e,arguments)}function rk(){var e=zx(T4());return e.copy=function(){return _c(e,rk()).constant(e.constant())},Vl.apply(e,arguments)}function Hx(){var e=Bx(T4());return e.copy=function(){return _c(e,Hx()).exponent(e.exponent())},Vl.apply(e,arguments)}function Coe(){return Hx.apply(null,arguments).exponent(.5)}function nk(){var e=[],t=Ro;function n(o){if(o!=null&&!isNaN(o=+o))return t((x6(e,o,1)-1)/(e.length-1))}return n.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let h of o)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(lc),n},n.interpolator=function(o){return arguments.length?(t=o,n):t},n.range=function(){return e.map((o,h)=>t(h/(e.length-1)))},n.quantiles=function(o){return Array.from({length:o+1},(h,y)=>mne(e,y/o))},n.copy=function(){return nk(t).domain(e)},Vl.apply(n,arguments)}function S4(){var e=0,t=.5,n=1,o=1,h,y,w,C,a,D=Ro,j,B=!1,H;function X(Q){return isNaN(Q=+Q)?H:(Q=.5+((Q=+j(Q))-y)*(o*Q<o*y?C:a),D(B?Math.max(0,Math.min(1,Q)):Q))}X.domain=function(Q){return arguments.length?([e,t,n]=Q,h=j(e=+e),y=j(t=+t),w=j(n=+n),C=h===y?0:.5/(y-h),a=y===w?0:.5/(w-y),o=y<h?-1:1,X):[e,t,n]},X.clamp=function(Q){return arguments.length?(B=!!Q,X):B},X.interpolator=function(Q){return arguments.length?(D=Q,X):D};function ie(Q){return function(ne){var te,K,se;return arguments.length?([te,K,se]=ne,D=$ne(Q,[te,K,se]),X):[D(0),D(.5),D(1)]}}return X.range=ie(D2),X.rangeRound=ie(Ox),X.unknown=function(Q){return arguments.length?(H=Q,X):H},function(Q){return j=Q,h=Q(e),y=Q(t),w=Q(n),C=h===y?0:.5/(y-h),a=y===w?0:.5/(w-y),o=y<h?-1:1,X}}function ik(){var e=yc(S4()(Ro));return e.copy=function(){return _c(e,ik())},Vl.apply(e,arguments)}function ok(){var e=Lx(S4()).domain([.1,1,10]);return e.copy=function(){return _c(e,ok()).base(e.base())},Vl.apply(e,arguments)}function ak(){var e=zx(S4());return e.copy=function(){return _c(e,ak()).constant(e.constant())},Vl.apply(e,arguments)}function Zx(){var e=Bx(S4());return e.copy=function(){return _c(e,Zx()).exponent(e.exponent())},Vl.apply(e,arguments)}function Ioe(){return Zx.apply(null,arguments).exponent(.5)}const ZP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:L5,scaleDiverging:ik,scaleDivergingLog:ok,scaleDivergingPow:Zx,scaleDivergingSqrt:Ioe,scaleDivergingSymlog:ak,scaleIdentity:FD,scaleImplicit:l_,scaleLinear:e9,scaleLog:jD,scaleOrdinal:Mx,scalePoint:i5,scalePow:Fx,scaleQuantile:VD,scaleQuantize:GD,scaleRadial:UD,scaleSequential:ek,scaleSequentialLog:tk,scaleSequentialPow:Hx,scaleSequentialQuantile:nk,scaleSequentialSqrt:Coe,scaleSequentialSymlog:rk,scaleSqrt:uie,scaleSymlog:$D,scaleThreshold:qD,scaleTime:Poe,scaleUtc:Moe,tickFormat:BD},Symbol.toStringTag,{value:"Module"}));var Ooe=S2;function Roe(e,t,n){for(var o=-1,h=e.length;++o<h;){var y=e[o],w=t(y);if(w!=null&&(C===void 0?w===w&&!Ooe(w):n(w,C)))var C=w,a=y}return a}var E4=Roe;function Doe(e,t){return e>t}var sk=Doe,koe=E4,Loe=sk,zoe=R2;function Boe(e){return e&&e.length?koe(e,zoe,Loe):void 0}var Foe=Boe;const P4=Cn(Foe);function Noe(e,t){return e<t}var lk=Noe,joe=E4,$oe=lk,Uoe=R2;function Voe(e){return e&&e.length?joe(e,Uoe,$oe):void 0}var Goe=Voe;const M4=Cn(Goe);var qoe=sx,Woe=gc,Hoe=gD,Zoe=Yo;function Xoe(e,t){var n=Zoe(e)?qoe:Hoe;return n(e,Woe(t))}var Yoe=Xoe,Koe=pD,Joe=Yoe;function Qoe(e,t){return Koe(Joe(e,t),1)}var eae=Qoe;const tae=Cn(eae);var rae=Ax;function nae(e,t){return rae(e,t)}var iae=nae;const C4=Cn(iae);var k2=1e9,oae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yx,ni=!0,Va="[DecimalError] ",ku=Va+"Invalid argument: ",Xx=Va+"Exponent out of range: ",L2=Math.floor,bu=Math.pow,aae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ha,$i=1e7,Jn=7,ck=9007199254740991,i9=L2(ck/Jn),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,n,o,h,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(o=y.d.length,h=e.d.length,t=0,n=o<h?o:h;t<n;++t)if(y.d[t]!==e.d[t])return y.d[t]>e.d[t]^y.s<0?1:-1;return o===h?0:o>h^y.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Jn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};dr.dividedBy=dr.div=function(e){return Il(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,n=t.constructor;return Nn(Il(t,new n(e),0,1),n.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return Pi(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,n=this,o=n.constructor,h=o.precision,y=h+5;if(e===void 0)e=new o(10);else if(e=new o(e),e.s<1||e.eq(ha))throw Error(Va+"NaN");if(n.s<1)throw Error(Va+(n.s?"NaN":"-Infinity"));return n.eq(ha)?new o(0):(ni=!1,t=Il(j5(n,y),j5(e,y),y),ni=!0,Nn(t,h))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fk(t,e):uk(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,n=this,o=n.constructor,h=o.precision;if(e=new o(e),!e.s)throw Error(Va+"NaN");return n.s?(ni=!1,t=Il(n,e,0,1).times(e),ni=!0,n.minus(t)):Nn(new o(n),h)};dr.naturalExponential=dr.exp=function(){return hk(this)};dr.naturalLogarithm=dr.ln=function(){return j5(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uk(t,e):fk(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,n,o,h=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ku+e);if(t=Pi(h)+1,o=h.d.length-1,n=o*Jn+1,o=h.d[o],o){for(;o%10==0;o/=10)n--;for(o=h.d[0];o>=10;o/=10)n++}return e&&t>n?t:n};dr.squareRoot=dr.sqrt=function(){var e,t,n,o,h,y,w,C=this,a=C.constructor;if(C.s<1){if(!C.s)return new a(0);throw Error(Va+"NaN")}for(e=Pi(C),ni=!1,h=Math.sqrt(+C),h==0||h==1/0?(t=Us(C.d),(t.length+e)%2==0&&(t+="0"),h=Math.sqrt(t),e=L2((e+1)/2)-(e<0||e%2),h==1/0?t="5e"+e:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),o=new a(t)):o=new a(h.toString()),n=a.precision,h=w=n+3;;)if(y=o,o=y.plus(Il(C,y,w+2)).times(.5),Us(y.d).slice(0,w)===(t=Us(o.d)).slice(0,w)){if(t=t.slice(w-3,w+1),h==w&&t=="4999"){if(Nn(y,n+1,0),y.times(y).eq(C)){o=y;break}}else if(t!="9999")break;w+=4}return ni=!0,Nn(o,n)};dr.times=dr.mul=function(e){var t,n,o,h,y,w,C,a,D,j=this,B=j.constructor,H=j.d,X=(e=new B(e)).d;if(!j.s||!e.s)return new B(0);for(e.s*=j.s,n=j.e+e.e,a=H.length,D=X.length,a<D&&(y=H,H=X,X=y,w=a,a=D,D=w),y=[],w=a+D,o=w;o--;)y.push(0);for(o=D;--o>=0;){for(t=0,h=a+o;h>o;)C=y[h]+X[o]*H[h-o-1]+t,y[h--]=C%$i|0,t=C/$i|0;y[h]=(y[h]+t)%$i|0}for(;!y[--w];)y.pop();return t?++n:y.shift(),e.d=y,e.e=n,ni?Nn(e,B.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var n=this,o=n.constructor;return n=new o(n),e===void 0?n:(Xs(e,0,k2),t===void 0?t=o.rounding:Xs(t,0,8),Nn(n,e+Pi(n)+1,t))};dr.toExponential=function(e,t){var n,o=this,h=o.constructor;return e===void 0?n=Vu(o,!0):(Xs(e,0,k2),t===void 0?t=h.rounding:Xs(t,0,8),o=Nn(new h(o),e+1,t),n=Vu(o,!0,e+1)),n};dr.toFixed=function(e,t){var n,o,h=this,y=h.constructor;return e===void 0?Vu(h):(Xs(e,0,k2),t===void 0?t=y.rounding:Xs(t,0,8),o=Nn(new y(h),e+Pi(h)+1,t),n=Vu(o.abs(),!1,e+Pi(o)+1),h.isneg()&&!h.isZero()?"-"+n:n)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return Nn(new t(e),Pi(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,n,o,h,y,w,C=this,a=C.constructor,D=12,j=+(e=new a(e));if(!e.s)return new a(ha);if(C=new a(C),!C.s){if(e.s<1)throw Error(Va+"Infinity");return C}if(C.eq(ha))return C;if(o=a.precision,e.eq(ha))return Nn(C,o);if(t=e.e,n=e.d.length-1,w=t>=n,y=C.s,w){if((n=j<0?-j:j)<=ck){for(h=new a(ha),t=Math.ceil(o/Jn+4),ni=!1;n%2&&(h=h.times(C),YP(h.d,t)),n=L2(n/2),n!==0;)C=C.times(C),YP(C.d,t);return ni=!0,e.s<0?new a(ha).div(h):Nn(h,o)}}else if(y<0)throw Error(Va+"NaN");return y=y<0&&e.d[Math.max(t,n)]&1?-1:1,C.s=1,ni=!1,h=e.times(j5(C,o+D)),ni=!0,h=hk(h),h.s=y,h};dr.toPrecision=function(e,t){var n,o,h=this,y=h.constructor;return e===void 0?(n=Pi(h),o=Vu(h,n<=y.toExpNeg||n>=y.toExpPos)):(Xs(e,1,k2),t===void 0?t=y.rounding:Xs(t,0,8),h=Nn(new y(h),e,t),n=Pi(h),o=Vu(h,e<=n||n<=y.toExpNeg,e)),o};dr.toSignificantDigits=dr.tosd=function(e,t){var n=this,o=n.constructor;return e===void 0?(e=o.precision,t=o.rounding):(Xs(e,1,k2),t===void 0?t=o.rounding:Xs(t,0,8)),Nn(new o(n),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Pi(e),n=e.constructor;return Vu(e,t<=n.toExpNeg||t>=n.toExpPos)};function uk(e,t){var n,o,h,y,w,C,a,D,j=e.constructor,B=j.precision;if(!e.s||!t.s)return t.s||(t=new j(e)),ni?Nn(t,B):t;if(a=e.d,D=t.d,w=e.e,h=t.e,a=a.slice(),y=w-h,y){for(y<0?(o=a,y=-y,C=D.length):(o=D,h=w,C=a.length),w=Math.ceil(B/Jn),C=w>C?w+1:C+1,y>C&&(y=C,o.length=1),o.reverse();y--;)o.push(0);o.reverse()}for(C=a.length,y=D.length,C-y<0&&(y=C,o=D,D=a,a=o),n=0;y;)n=(a[--y]=a[y]+D[y]+n)/$i|0,a[y]%=$i;for(n&&(a.unshift(n),++h),C=a.length;a[--C]==0;)a.pop();return t.d=a,t.e=h,ni?Nn(t,B):t}function Xs(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ku+e)}function Us(e){var t,n,o,h=e.length-1,y="",w=e[0];if(h>0){for(y+=w,t=1;t<h;t++)o=e[t]+"",n=Jn-o.length,n&&(y+=W1(n)),y+=o;w=e[t],o=w+"",n=Jn-o.length,n&&(y+=W1(n))}else if(w===0)return"0";for(;w%10===0;)w/=10;return y+w}var Il=function(){function e(o,h){var y,w=0,C=o.length;for(o=o.slice();C--;)y=o[C]*h+w,o[C]=y%$i|0,w=y/$i|0;return w&&o.unshift(w),o}function t(o,h,y,w){var C,a;if(y!=w)a=y>w?1:-1;else for(C=a=0;C<y;C++)if(o[C]!=h[C]){a=o[C]>h[C]?1:-1;break}return a}function n(o,h,y){for(var w=0;y--;)o[y]-=w,w=o[y]<h[y]?1:0,o[y]=w*$i+o[y]-h[y];for(;!o[0]&&o.length>1;)o.shift()}return function(o,h,y,w){var C,a,D,j,B,H,X,ie,Q,ne,te,K,se,ve,le,fe,Te,Ee,Ze=o.constructor,st=o.s==h.s?1:-1,We=o.d,Xe=h.d;if(!o.s)return new Ze(o);if(!h.s)throw Error(Va+"Division by zero");for(a=o.e-h.e,Te=Xe.length,le=We.length,X=new Ze(st),ie=X.d=[],D=0;Xe[D]==(We[D]||0);)++D;if(Xe[D]>(We[D]||0)&&--a,y==null?K=y=Ze.precision:w?K=y+(Pi(o)-Pi(h))+1:K=y,K<0)return new Ze(0);if(K=K/Jn+2|0,D=0,Te==1)for(j=0,Xe=Xe[0],K++;(D<le||j)&&K--;D++)se=j*$i+(We[D]||0),ie[D]=se/Xe|0,j=se%Xe|0;else{for(j=$i/(Xe[0]+1)|0,j>1&&(Xe=e(Xe,j),We=e(We,j),Te=Xe.length,le=We.length),ve=Te,Q=We.slice(0,Te),ne=Q.length;ne<Te;)Q[ne++]=0;Ee=Xe.slice(),Ee.unshift(0),fe=Xe[0],Xe[1]>=$i/2&&++fe;do j=0,C=t(Xe,Q,Te,ne),C<0?(te=Q[0],Te!=ne&&(te=te*$i+(Q[1]||0)),j=te/fe|0,j>1?(j>=$i&&(j=$i-1),B=e(Xe,j),H=B.length,ne=Q.length,C=t(B,Q,H,ne),C==1&&(j--,n(B,Te<H?Ee:Xe,H))):(j==0&&(C=j=1),B=Xe.slice()),H=B.length,H<ne&&B.unshift(0),n(Q,B,ne),C==-1&&(ne=Q.length,C=t(Xe,Q,Te,ne),C<1&&(j++,n(Q,Te<ne?Ee:Xe,ne))),ne=Q.length):C===0&&(j++,Q=[0]),ie[D++]=j,C&&Q[0]?Q[ne++]=We[ve]||0:(Q=[We[ve]],ne=1);while((ve++<le||Q[0]!==void 0)&&K--)}return ie[0]||ie.shift(),X.e=a,Nn(X,w?y+Pi(X)+1:y)}}();function hk(e,t){var n,o,h,y,w,C,a=0,D=0,j=e.constructor,B=j.precision;if(Pi(e)>16)throw Error(Xx+Pi(e));if(!e.s)return new j(ha);for(t==null?(ni=!1,C=B):C=t,w=new j(.03125);e.abs().gte(.1);)e=e.times(w),D+=5;for(o=Math.log(bu(2,D))/Math.LN10*2+5|0,C+=o,n=h=y=new j(ha),j.precision=C;;){if(h=Nn(h.times(e),C),n=n.times(++a),w=y.plus(Il(h,n,C)),Us(w.d).slice(0,C)===Us(y.d).slice(0,C)){for(;D--;)y=Nn(y.times(y),C);return j.precision=B,t==null?(ni=!0,Nn(y,B)):y}y=w}}function Pi(e){for(var t=e.e*Jn,n=e.d[0];n>=10;n/=10)t++;return t}function Pg(e,t,n){if(t>e.LN10.sd())throw ni=!0,n&&(e.precision=n),Error(Va+"LN10 precision limit exceeded");return Nn(new e(e.LN10),t)}function W1(e){for(var t="";e--;)t+="0";return t}function j5(e,t){var n,o,h,y,w,C,a,D,j,B=1,H=10,X=e,ie=X.d,Q=X.constructor,ne=Q.precision;if(X.s<1)throw Error(Va+(X.s?"NaN":"-Infinity"));if(X.eq(ha))return new Q(0);if(t==null?(ni=!1,D=ne):D=t,X.eq(10))return t==null&&(ni=!0),Pg(Q,D);if(D+=H,Q.precision=D,n=Us(ie),o=n.charAt(0),y=Pi(X),Math.abs(y)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)X=X.times(e),n=Us(X.d),o=n.charAt(0),B++;y=Pi(X),o>1?(X=new Q("0."+n),y++):X=new Q(o+"."+n.slice(1))}else return a=Pg(Q,D+2,ne).times(y+""),X=j5(new Q(o+"."+n.slice(1)),D-H).plus(a),Q.precision=ne,t==null?(ni=!0,Nn(X,ne)):X;for(C=w=X=Il(X.minus(ha),X.plus(ha),D),j=Nn(X.times(X),D),h=3;;){if(w=Nn(w.times(j),D),a=C.plus(Il(w,new Q(h),D)),Us(a.d).slice(0,D)===Us(C.d).slice(0,D))return C=C.times(2),y!==0&&(C=C.plus(Pg(Q,D+2,ne).times(y+""))),C=Il(C,new Q(B),D),Q.precision=ne,t==null?(ni=!0,Nn(C,ne)):C;C=a,h+=2}}function XP(e,t){var n,o,h;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;t.charCodeAt(o)===48;)++o;for(h=t.length;t.charCodeAt(h-1)===48;)--h;if(t=t.slice(o,h),t){if(h-=o,n=n-o-1,e.e=L2(n/Jn),e.d=[],o=(n+1)%Jn,n<0&&(o+=Jn),o<h){for(o&&e.d.push(+t.slice(0,o)),h-=Jn;o<h;)e.d.push(+t.slice(o,o+=Jn));t=t.slice(o),o=Jn-t.length}else o-=h;for(;o--;)t+="0";if(e.d.push(+t),ni&&(e.e>i9||e.e<-i9))throw Error(Xx+n)}else e.s=0,e.e=0,e.d=[0];return e}function Nn(e,t,n){var o,h,y,w,C,a,D,j,B=e.d;for(w=1,y=B[0];y>=10;y/=10)w++;if(o=t-w,o<0)o+=Jn,h=t,D=B[j=0];else{if(j=Math.ceil((o+1)/Jn),y=B.length,j>=y)return e;for(D=y=B[j],w=1;y>=10;y/=10)w++;o%=Jn,h=o-Jn+w}if(n!==void 0&&(y=bu(10,w-h-1),C=D/y%10|0,a=t<0||B[j+1]!==void 0||D%y,a=n<4?(C||a)&&(n==0||n==(e.s<0?3:2)):C>5||C==5&&(n==4||a||n==6&&(o>0?h>0?D/bu(10,w-h):0:B[j-1])%10&1||n==(e.s<0?8:7))),t<1||!B[0])return a?(y=Pi(e),B.length=1,t=t-y-1,B[0]=bu(10,(Jn-t%Jn)%Jn),e.e=L2(-t/Jn)||0):(B.length=1,B[0]=e.e=e.s=0),e;if(o==0?(B.length=j,y=1,j--):(B.length=j+1,y=bu(10,Jn-o),B[j]=h>0?(D/bu(10,w-h)%bu(10,h)|0)*y:0),a)for(;;)if(j==0){(B[0]+=y)==$i&&(B[0]=1,++e.e);break}else{if(B[j]+=y,B[j]!=$i)break;B[j--]=0,y=1}for(o=B.length;B[--o]===0;)B.pop();if(ni&&(e.e>i9||e.e<-i9))throw Error(Xx+Pi(e));return e}function fk(e,t){var n,o,h,y,w,C,a,D,j,B,H=e.constructor,X=H.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new H(e),ni?Nn(t,X):t;if(a=e.d,B=t.d,o=t.e,D=e.e,a=a.slice(),w=D-o,w){for(j=w<0,j?(n=a,w=-w,C=B.length):(n=B,o=D,C=a.length),h=Math.max(Math.ceil(X/Jn),C)+2,w>h&&(w=h,n.length=1),n.reverse(),h=w;h--;)n.push(0);n.reverse()}else{for(h=a.length,C=B.length,j=h<C,j&&(C=h),h=0;h<C;h++)if(a[h]!=B[h]){j=a[h]<B[h];break}w=0}for(j&&(n=a,a=B,B=n,t.s=-t.s),C=a.length,h=B.length-C;h>0;--h)a[C++]=0;for(h=B.length;h>w;){if(a[--h]<B[h]){for(y=h;y&&a[--y]===0;)a[y]=$i-1;--a[y],a[h]+=$i}a[h]-=B[h]}for(;a[--C]===0;)a.pop();for(;a[0]===0;a.shift())--o;return a[0]?(t.d=a,t.e=o,ni?Nn(t,X):t):new H(0)}function Vu(e,t,n){var o,h=Pi(e),y=Us(e.d),w=y.length;return t?(n&&(o=n-w)>0?y=y.charAt(0)+"."+y.slice(1)+W1(o):w>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(h<0?"e":"e+")+h):h<0?(y="0."+W1(-h-1)+y,n&&(o=n-w)>0&&(y+=W1(o))):h>=w?(y+=W1(h+1-w),n&&(o=n-h-1)>0&&(y=y+"."+W1(o))):((o=h+1)<w&&(y=y.slice(0,o)+"."+y.slice(o)),n&&(o=n-w)>0&&(h+1===w&&(y+="."),y+=W1(o))),e.s<0?"-"+y:y}function YP(e,t){if(e.length>t)return e.length=t,!0}function dk(e){var t,n,o;function h(y){var w=this;if(!(w instanceof h))return new h(y);if(w.constructor=h,y instanceof h){w.s=y.s,w.e=y.e,w.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(ku+y);if(y>0)w.s=1;else if(y<0)y=-y,w.s=-1;else{w.s=0,w.e=0,w.d=[0];return}if(y===~~y&&y<1e7){w.e=0,w.d=[y];return}return XP(w,y.toString())}else if(typeof y!="string")throw Error(ku+y);if(y.charCodeAt(0)===45?(y=y.slice(1),w.s=-1):w.s=1,aae.test(y))XP(w,y);else throw Error(ku+y)}if(h.prototype=dr,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.clone=dk,h.config=h.set=sae,e===void 0&&(e={}),e)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<o.length;)e.hasOwnProperty(n=o[t++])||(e[n]=this[n]);return h.config(e),h}function sae(e){if(!e||typeof e!="object")throw Error(Va+"Object expected");var t,n,o,h=["precision",1,k2,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<h.length;t+=3)if((o=e[n=h[t]])!==void 0)if(L2(o)===o&&o>=h[t+1]&&o<=h[t+2])this[n]=o;else throw Error(ku+n+": "+o);if((o=e[n="LN10"])!==void 0)if(o==Math.LN10)this[n]=new this(o);else throw Error(ku+n+": "+o);return this}var Yx=dk(oae);ha=new Yx(1);const kn=Yx;function lae(e){return fae(e)||hae(e)||uae(e)||cae()}function cae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uae(e,t){if(e){if(typeof e=="string")return f_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f_(e,t)}}function hae(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function fae(e){if(Array.isArray(e))return f_(e)}function f_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var dae=function(t){return t},pk={"@@functional/placeholder":!0},mk=function(t){return t===pk},KP=function(t){return function n(){return arguments.length===0||arguments.length===1&&mk(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},pae=function e(t,n){return t===1?n:KP(function(){for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];var w=h.filter(function(C){return C!==pk}).length;return w>=t?n.apply(void 0,h):e(t-w,KP(function(){for(var C=arguments.length,a=new Array(C),D=0;D<C;D++)a[D]=arguments[D];var j=h.map(function(B){return mk(B)?a.shift():B});return n.apply(void 0,lae(j).concat(a))}))})},I4=function(t){return pae(t.length,t)},d_=function(t,n){for(var o=[],h=t;h<n;++h)o[h-t]=h;return o},mae=I4(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),gae=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!n.length)return dae;var h=n.reverse(),y=h[0],w=h.slice(1);return function(){return w.reduce(function(C,a){return a(C)},y.apply(void 0,arguments))}},p_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},gk=function(t){var n=null,o=null;return function(){for(var h=arguments.length,y=new Array(h),w=0;w<h;w++)y[w]=arguments[w];return n&&y.every(function(C,a){return C===n[a]})||(n=y,o=t.apply(void 0,y)),o}};function yae(e){var t;return e===0?t=1:t=Math.floor(new kn(e).abs().log(10).toNumber())+1,t}function _ae(e,t,n){for(var o=new kn(e),h=0,y=[];o.lt(t)&&h<1e5;)y.push(o.toNumber()),o=o.add(n),h++;return y}var vae=I4(function(e,t,n){var o=+e,h=+t;return o+n*(h-o)}),xae=I4(function(e,t,n){var o=t-+e;return o=o||1/0,(n-e)/o}),bae=I4(function(e,t,n){var o=t-+e;return o=o||1/0,Math.max(0,Math.min(1,(n-e)/o))});const O4={rangeStep:_ae,getDigitCount:yae,interpolateNumber:vae,uninterpolateNumber:xae,uninterpolateTruncation:bae};function m_(e){return Tae(e)||Aae(e)||yk(e)||wae()}function wae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aae(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Tae(e){if(Array.isArray(e))return g_(e)}function $5(e,t){return Pae(e)||Eae(e,t)||yk(e,t)||Sae()}function Sae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yk(e,t){if(e){if(typeof e=="string")return g_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g_(e,t)}}function g_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Eae(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],o=!0,h=!1,y=void 0;try{for(var w=e[Symbol.iterator](),C;!(o=(C=w.next()).done)&&(n.push(C.value),!(t&&n.length===t));o=!0);}catch(a){h=!0,y=a}finally{try{!o&&w.return!=null&&w.return()}finally{if(h)throw y}}return n}}function Pae(e){if(Array.isArray(e))return e}function _k(e){var t=$5(e,2),n=t[0],o=t[1],h=n,y=o;return n>o&&(h=o,y=n),[h,y]}function vk(e,t,n){if(e.lte(0))return new kn(0);var o=O4.getDigitCount(e.toNumber()),h=new kn(10).pow(o),y=e.div(h),w=o!==1?.05:.1,C=new kn(Math.ceil(y.div(w).toNumber())).add(n).mul(w),a=C.mul(h);return t?a:new kn(Math.ceil(a))}function Mae(e,t,n){var o=1,h=new kn(e);if(!h.isint()&&n){var y=Math.abs(e);y<1?(o=new kn(10).pow(O4.getDigitCount(e)-1),h=new kn(Math.floor(h.div(o).toNumber())).mul(o)):y>1&&(h=new kn(Math.floor(e)))}else e===0?h=new kn(Math.floor((t-1)/2)):n||(h=new kn(Math.floor(e)));var w=Math.floor((t-1)/2),C=gae(mae(function(a){return h.add(new kn(a-w).mul(o)).toNumber()}),d_);return C(0,t)}function xk(e,t,n,o){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new kn(0),tickMin:new kn(0),tickMax:new kn(0)};var y=vk(new kn(t).sub(e).div(n-1),o,h),w;e<=0&&t>=0?w=new kn(0):(w=new kn(e).add(t).div(2),w=w.sub(new kn(w).mod(y)));var C=Math.ceil(w.sub(e).div(y).toNumber()),a=Math.ceil(new kn(t).sub(w).div(y).toNumber()),D=C+a+1;return D>n?xk(e,t,n,o,h+1):(D<n&&(a=t>0?a+(n-D):a,C=t>0?C:C+(n-D)),{step:y,tickMin:w.sub(new kn(C).mul(y)),tickMax:w.add(new kn(a).mul(y))})}function Cae(e){var t=$5(e,2),n=t[0],o=t[1],h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,w=Math.max(h,2),C=_k([n,o]),a=$5(C,2),D=a[0],j=a[1];if(D===-1/0||j===1/0){var B=j===1/0?[D].concat(m_(d_(0,h-1).map(function(){return 1/0}))):[].concat(m_(d_(0,h-1).map(function(){return-1/0})),[j]);return n>o?p_(B):B}if(D===j)return Mae(D,h,y);var H=xk(D,j,w,y),X=H.step,ie=H.tickMin,Q=H.tickMax,ne=O4.rangeStep(ie,Q.add(new kn(.1).mul(X)),X);return n>o?p_(ne):ne}function Iae(e,t){var n=$5(e,2),o=n[0],h=n[1],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,w=_k([o,h]),C=$5(w,2),a=C[0],D=C[1];if(a===-1/0||D===1/0)return[o,h];if(a===D)return[a];var j=Math.max(t,2),B=vk(new kn(D).sub(a).div(j-1),y,0),H=[].concat(m_(O4.rangeStep(new kn(a),new kn(D).sub(new kn(.99).mul(B)),B)),[D]);return o>h?p_(H):H}var Oae=gk(Cae),Rae=gk(Iae),Dae="Invariant failed";function Gu(e,t){throw new Error(Dae)}var kae=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function o2(e){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o2(e)}function o9(){return o9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o9.apply(this,arguments)}function Lae(e,t){return Nae(e)||Fae(e,t)||Bae(e,t)||zae()}function zae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bae(e,t){if(e){if(typeof e=="string")return JP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(e,t)}}function JP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Fae(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function Nae(e){if(Array.isArray(e))return e}function jae(e,t){if(e==null)return{};var n=$ae(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function $ae(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Uae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ak(o.key),o)}}function Gae(e,t,n){return t&&Vae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qae(e,t,n){return t=a9(t),Wae(e,bk()?Reflect.construct(t,n||[],a9(e).constructor):t.apply(e,n))}function Wae(e,t){if(t&&(o2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hae(e)}function Hae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bk=function(){return!!e})()}function a9(e){return a9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a9(e)}function Zae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y_(e,t)}function y_(e,t){return y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},y_(e,t)}function wk(e,t,n){return t=Ak(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ak(e){var t=Xae(e,"string");return o2(t)=="symbol"?t:t+""}function Xae(e,t){if(o2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(o2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R4=function(e){function t(){return Uae(this,t),qae(this,t,arguments)}return Zae(t,e),Gae(t,[{key:"render",value:function(){var o=this.props,h=o.offset,y=o.layout,w=o.width,C=o.dataKey,a=o.data,D=o.dataPointFormatter,j=o.xAxis,B=o.yAxis,H=jae(o,kae),X=zr(H,!1);this.props.direction==="x"&&j.type!=="number"&&Gu();var ie=a.map(function(Q){var ne=D(Q,C),te=ne.x,K=ne.y,se=ne.value,ve=ne.errorVal;if(!ve)return null;var le=[],fe,Te;if(Array.isArray(ve)){var Ee=Lae(ve,2);fe=Ee[0],Te=Ee[1]}else fe=Te=ve;if(y==="vertical"){var Ze=j.scale,st=K+h,We=st+w,Xe=st-w,St=Ze(se-fe),Mt=Ze(se+Te);le.push({x1:Mt,y1:We,x2:Mt,y2:Xe}),le.push({x1:St,y1:st,x2:Mt,y2:st}),le.push({x1:St,y1:We,x2:St,y2:Xe})}else if(y==="horizontal"){var Pt=B.scale,ht=te+h,kt=ht-w,mt=ht+w,Ct=Pt(se-fe),_t=Pt(se+Te);le.push({x1:kt,y1:_t,x2:mt,y2:_t}),le.push({x1:ht,y1:Ct,x2:ht,y2:_t}),le.push({x1:kt,y1:Ct,x2:mt,y2:Ct})}return tt.createElement(Pn,o9({className:"recharts-errorBar",key:"bar-".concat(le.map(function(Qt){return"".concat(Qt.x1,"-").concat(Qt.x2,"-").concat(Qt.y1,"-").concat(Qt.y2)}))},X),le.map(function(Qt){return tt.createElement("line",o9({},Qt,{key:"line-".concat(Qt.x1,"-").concat(Qt.x2,"-").concat(Qt.y1,"-").concat(Qt.y2)}))}))});return tt.createElement(Pn,{className:"recharts-errorBars"},ie)}}])}(tt.Component);wk(R4,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});wk(R4,"displayName","ErrorBar");function U5(e){"@babel/helpers - typeof";return U5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U5(e)}function QP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function pu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(n),!0).forEach(function(o){Yae(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Yae(e,t,n){return t=Kae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kae(e){var t=Jae(e,"string");return U5(t)=="symbol"?t:t+""}function Jae(e,t){if(U5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(U5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tk=function(t){var n=t.children,o=t.formattedGraphicalItems,h=t.legendWidth,y=t.legendContent,w=ua(n,qs);if(!w)return null;var C=qs.defaultProps,a=C!==void 0?pu(pu({},C),w.props):{},D;return w.props&&w.props.payload?D=w.props&&w.props.payload:y==="children"?D=(o||[]).reduce(function(j,B){var H=B.item,X=B.props,ie=X.sectors||X.data||[];return j.concat(ie.map(function(Q){return{type:w.props.iconType||H.props.legendType,value:Q.name,color:Q.fill,payload:Q}}))},[]):D=(o||[]).map(function(j){var B=j.item,H=B.type.defaultProps,X=H!==void 0?pu(pu({},H),B.props):{},ie=X.dataKey,Q=X.name,ne=X.legendType,te=X.hide;return{inactive:te,dataKey:ie,type:a.iconType||ne||"square",color:Kx(B),value:Q||ie,payload:X}}),pu(pu(pu({},a),qs.getWithHeight(w,h)),{},{payload:D,item:w})};function V5(e){"@babel/helpers - typeof";return V5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V5(e)}function eM(e){return rse(e)||tse(e)||ese(e)||Qae()}function Qae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ese(e,t){if(e){if(typeof e=="string")return __(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return __(e,t)}}function tse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rse(e){if(Array.isArray(e))return __(e)}function __(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(n),!0).forEach(function(o){U0(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function U0(e,t,n){return t=nse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nse(e){var t=ise(e,"string");return V5(t)=="symbol"?t:t+""}function ise(e,t){if(V5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(V5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function go(e,t,n){return an(e)||an(t)?n:ki(t)?pa(e,t,n):Xr(t)?t(e):n}function o5(e,t,n,o){var h=tae(e,function(C){return go(C,t)});if(n==="number"){var y=h.filter(function(C){return rr(C)||parseFloat(C)});return y.length?[M4(y),P4(y)]:[1/0,-1/0]}var w=o?h.filter(function(C){return!an(C)}):h;return w.map(function(C){return ki(C)||C instanceof Date?C:""})}var ose=function(t){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2?arguments[2]:void 0,y=arguments.length>3?arguments[3]:void 0,w=-1,C=(n=o==null?void 0:o.length)!==null&&n!==void 0?n:0;if(C<=1)return 0;if(y&&y.axisType==="angleAxis"&&Math.abs(Math.abs(y.range[1]-y.range[0])-360)<=1e-6)for(var a=y.range,D=0;D<C;D++){var j=D>0?h[D-1].coordinate:h[C-1].coordinate,B=h[D].coordinate,H=D>=C-1?h[0].coordinate:h[D+1].coordinate,X=void 0;if(Io(B-j)!==Io(H-B)){var ie=[];if(Io(H-B)===Io(a[1]-a[0])){X=H;var Q=B+a[1]-a[0];ie[0]=Math.min(Q,(Q+j)/2),ie[1]=Math.max(Q,(Q+j)/2)}else{X=j;var ne=H+a[1]-a[0];ie[0]=Math.min(B,(ne+B)/2),ie[1]=Math.max(B,(ne+B)/2)}var te=[Math.min(B,(X+B)/2),Math.max(B,(X+B)/2)];if(t>te[0]&&t<=te[1]||t>=ie[0]&&t<=ie[1]){w=h[D].index;break}}else{var K=Math.min(j,H),se=Math.max(j,H);if(t>(K+B)/2&&t<=(se+B)/2){w=h[D].index;break}}}else for(var ve=0;ve<C;ve++)if(ve===0&&t<=(o[ve].coordinate+o[ve+1].coordinate)/2||ve>0&&ve<C-1&&t>(o[ve].coordinate+o[ve-1].coordinate)/2&&t<=(o[ve].coordinate+o[ve+1].coordinate)/2||ve===C-1&&t>(o[ve].coordinate+o[ve-1].coordinate)/2){w=o[ve].index;break}return w},Kx=function(t){var n,o=t,h=o.type.displayName,y=(n=t.type)!==null&&n!==void 0&&n.defaultProps?gi(gi({},t.type.defaultProps),t.props):t.props,w=y.stroke,C=y.fill,a;switch(h){case"Line":a=w;break;case"Area":case"Radar":a=w&&w!=="none"?w:C;break;default:a=C;break}return a},ase=function(t){var n=t.barSize,o=t.totalSize,h=t.stackGroups,y=h===void 0?{}:h;if(!y)return{};for(var w={},C=Object.keys(y),a=0,D=C.length;a<D;a++)for(var j=y[C[a]].stackGroups,B=Object.keys(j),H=0,X=B.length;H<X;H++){var ie=j[B[H]],Q=ie.items,ne=ie.cateAxisId,te=Q.filter(function(Te){return Pl(Te.type).indexOf("Bar")>=0});if(te&&te.length){var K=te[0].type.defaultProps,se=K!==void 0?gi(gi({},K),te[0].props):te[0].props,ve=se.barSize,le=se[ne];w[le]||(w[le]=[]);var fe=an(ve)?n:ve;w[le].push({item:te[0],stackList:te.slice(1),barSize:an(fe)?void 0:Oo(fe,o,0)})}}return w},sse=function(t){var n=t.barGap,o=t.barCategoryGap,h=t.bandSize,y=t.sizeList,w=y===void 0?[]:y,C=t.maxBarSize,a=w.length;if(a<1)return null;var D=Oo(n,h,0,!0),j,B=[];if(w[0].barSize===+w[0].barSize){var H=!1,X=h/a,ie=w.reduce(function(ve,le){return ve+le.barSize||0},0);ie+=(a-1)*D,ie>=h&&(ie-=(a-1)*D,D=0),ie>=h&&X>0&&(H=!0,X*=.9,ie=a*X);var Q=(h-ie)/2>>0,ne={offset:Q-D,size:0};j=w.reduce(function(ve,le){var fe={item:le.item,position:{offset:ne.offset+ne.size+D,size:H?X:le.barSize}},Te=[].concat(eM(ve),[fe]);return ne=Te[Te.length-1].position,le.stackList&&le.stackList.length&&le.stackList.forEach(function(Ee){Te.push({item:Ee,position:ne})}),Te},B)}else{var te=Oo(o,h,0,!0);h-2*te-(a-1)*D<=0&&(D=0);var K=(h-2*te-(a-1)*D)/a;K>1&&(K>>=0);var se=C===+C?Math.min(K,C):K;j=w.reduce(function(ve,le,fe){var Te=[].concat(eM(ve),[{item:le.item,position:{offset:te+(K+D)*fe+(K-se)/2,size:se}}]);return le.stackList&&le.stackList.length&&le.stackList.forEach(function(Ee){Te.push({item:Ee,position:Te[Te.length-1].position})}),Te},B)}return j},lse=function(t,n,o,h){var y=o.children,w=o.width,C=o.margin,a=w-(C.left||0)-(C.right||0),D=Tk({children:y,legendWidth:a});if(D){var j=h||{},B=j.width,H=j.height,X=D.align,ie=D.verticalAlign,Q=D.layout;if((Q==="vertical"||Q==="horizontal"&&ie==="middle")&&X!=="center"&&rr(t[X]))return gi(gi({},t),{},U0({},X,t[X]+(B||0)));if((Q==="horizontal"||Q==="vertical"&&X==="center")&&ie!=="middle"&&rr(t[ie]))return gi(gi({},t),{},U0({},ie,t[ie]+(H||0)))}return t},cse=function(t,n,o){return an(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||o==="x"?n==="xAxis":o==="y"?n==="yAxis":!0},Sk=function(t,n,o,h,y){var w=n.props.children,C=ja(w,R4).filter(function(D){return cse(h,y,D.props.direction)});if(C&&C.length){var a=C.map(function(D){return D.props.dataKey});return t.reduce(function(D,j){var B=go(j,o);if(an(B))return D;var H=Array.isArray(B)?[M4(B),P4(B)]:[B,B],X=a.reduce(function(ie,Q){var ne=go(j,Q,0),te=H[0]-Math.abs(Array.isArray(ne)?ne[0]:ne),K=H[1]+Math.abs(Array.isArray(ne)?ne[1]:ne);return[Math.min(te,ie[0]),Math.max(K,ie[1])]},[1/0,-1/0]);return[Math.min(X[0],D[0]),Math.max(X[1],D[1])]},[1/0,-1/0])}return null},use=function(t,n,o,h,y){var w=n.map(function(C){return Sk(t,C,o,y,h)}).filter(function(C){return!an(C)});return w&&w.length?w.reduce(function(C,a){return[Math.min(C[0],a[0]),Math.max(C[1],a[1])]},[1/0,-1/0]):null},Ek=function(t,n,o,h,y){var w=n.map(function(a){var D=a.props.dataKey;return o==="number"&&D&&Sk(t,a,D,h)||o5(t,D,o,y)});if(o==="number")return w.reduce(function(a,D){return[Math.min(a[0],D[0]),Math.max(a[1],D[1])]},[1/0,-1/0]);var C={};return w.reduce(function(a,D){for(var j=0,B=D.length;j<B;j++)C[D[j]]||(C[D[j]]=!0,a.push(D[j]));return a},[])},Pk=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Cu=function(t,n,o){if(!t)return null;var h=t.scale,y=t.duplicateDomain,w=t.type,C=t.range,a=t.realScaleType==="scaleBand"?h.bandwidth()/2:2,D=(n||o)&&w==="category"&&h.bandwidth?h.bandwidth()/a:0;if(D=t.axisType==="angleAxis"&&(C==null?void 0:C.length)>=2?Io(C[0]-C[1])*2*D:D,n&&(t.ticks||t.niceTicks)){var j=(t.ticks||t.niceTicks).map(function(B){var H=y?y.indexOf(B):B;return{coordinate:h(H)+D,value:B,offset:D}});return j.filter(function(B){return!_6(B.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(B,H){return{coordinate:h(B)+D,value:B,index:H,offset:D}}):h.ticks&&!o?h.ticks(t.tickCount).map(function(B){return{coordinate:h(B)+D,value:B,offset:D}}):h.domain().map(function(B,H){return{coordinate:h(B)+D,value:y?y[B]:B,index:H,offset:D}})},Mg=new WeakMap,jd=function(t,n){if(typeof n!="function")return t;Mg.has(t)||Mg.set(t,new WeakMap);var o=Mg.get(t);if(o.has(n))return o.get(n);var h=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return o.set(n,h),h},Mk=function(t,n,o){var h=t.scale,y=t.type,w=t.layout,C=t.axisType;if(h==="auto")return w==="radial"&&C==="radiusAxis"?{scale:L5(),realScaleType:"band"}:w==="radial"&&C==="angleAxis"?{scale:e9(),realScaleType:"linear"}:y==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!o)?{scale:i5(),realScaleType:"point"}:y==="category"?{scale:L5(),realScaleType:"band"}:{scale:e9(),realScaleType:"linear"};if(y6(h)){var a="scale".concat(d4(h));return{scale:(ZP[a]||i5)(),realScaleType:ZP[a]?a:"point"}}return Xr(h)?{scale:h}:{scale:i5(),realScaleType:"point"}},rM=1e-4,Ck=function(t){var n=t.domain();if(!(!n||n.length<=2)){var o=n.length,h=t.range(),y=Math.min(h[0],h[1])-rM,w=Math.max(h[0],h[1])+rM,C=t(n[0]),a=t(n[o-1]);(C<y||C>w||a<y||a>w)&&t.domain([n[0],n[o-1]])}},hse=function(t,n){if(!t)return null;for(var o=0,h=t.length;o<h;o++)if(t[o].item===n)return t[o].position;return null},fse=function(t,n){if(!n||n.length!==2||!rr(n[0])||!rr(n[1]))return t;var o=Math.min(n[0],n[1]),h=Math.max(n[0],n[1]),y=[t[0],t[1]];return(!rr(t[0])||t[0]<o)&&(y[0]=o),(!rr(t[1])||t[1]>h)&&(y[1]=h),y[0]>h&&(y[0]=h),y[1]<o&&(y[1]=o),y},dse=function(t){var n=t.length;if(!(n<=0))for(var o=0,h=t[0].length;o<h;++o)for(var y=0,w=0,C=0;C<n;++C){var a=_6(t[C][o][1])?t[C][o][0]:t[C][o][1];a>=0?(t[C][o][0]=y,t[C][o][1]=y+a,y=t[C][o][1]):(t[C][o][0]=w,t[C][o][1]=w+a,w=t[C][o][1])}},pse=function(t){var n=t.length;if(!(n<=0))for(var o=0,h=t[0].length;o<h;++o)for(var y=0,w=0;w<n;++w){var C=_6(t[w][o][1])?t[w][o][0]:t[w][o][1];C>=0?(t[w][o][0]=y,t[w][o][1]=y+C,y=t[w][o][1]):(t[w][o][0]=0,t[w][o][1]=0)}},mse={sign:dse,expand:DH,none:K0,silhouette:kH,wiggle:LH,positive:pse},gse=function(t,n,o){var h=n.map(function(C){return C.props.dataKey}),y=mse[o],w=RH().keys(h).value(function(C,a){return+go(C,a,0)}).order(Vy).offset(y);return w(t)},yse=function(t,n,o,h,y,w){if(!t)return null;var C=w?n.reverse():n,a={},D=C.reduce(function(B,H){var X,ie=(X=H.type)!==null&&X!==void 0&&X.defaultProps?gi(gi({},H.type.defaultProps),H.props):H.props,Q=ie.stackId,ne=ie.hide;if(ne)return B;var te=ie[o],K=B[te]||{hasStack:!1,stackGroups:{}};if(ki(Q)){var se=K.stackGroups[Q]||{numericAxisId:o,cateAxisId:h,items:[]};se.items.push(H),K.hasStack=!0,K.stackGroups[Q]=se}else K.stackGroups[v6("_stackId_")]={numericAxisId:o,cateAxisId:h,items:[H]};return gi(gi({},B),{},U0({},te,K))},a),j={};return Object.keys(D).reduce(function(B,H){var X=D[H];if(X.hasStack){var ie={};X.stackGroups=Object.keys(X.stackGroups).reduce(function(Q,ne){var te=X.stackGroups[ne];return gi(gi({},Q),{},U0({},ne,{numericAxisId:o,cateAxisId:h,items:te.items,stackedData:gse(t,te.items,y)}))},ie)}return gi(gi({},B),{},U0({},H,X))},j)},Ik=function(t,n){var o=n.realScaleType,h=n.type,y=n.tickCount,w=n.originalDomain,C=n.allowDecimals,a=o||n.scale;if(a!=="auto"&&a!=="linear")return null;if(y&&h==="number"&&w&&(w[0]==="auto"||w[1]==="auto")){var D=t.domain();if(!D.length)return null;var j=Oae(D,y,C);return t.domain([M4(j),P4(j)]),{niceTicks:j}}if(y&&h==="number"){var B=t.domain(),H=Rae(B,y,C);return{niceTicks:H}}return null},nM=function(t){var n=t.axis,o=t.ticks,h=t.offset,y=t.bandSize,w=t.entry,C=t.index;if(n.type==="category")return o[C]?o[C].coordinate+h:null;var a=go(w,n.dataKey,n.domain[C]);return an(a)?null:n.scale(a)-y/2+h},_se=function(t){var n=t.numericAxis,o=n.scale.domain();if(n.type==="number"){var h=Math.min(o[0],o[1]),y=Math.max(o[0],o[1]);return h<=0&&y>=0?0:y<0?y:h}return o[0]},vse=function(t,n){var o,h=(o=t.type)!==null&&o!==void 0&&o.defaultProps?gi(gi({},t.type.defaultProps),t.props):t.props,y=h.stackId;if(ki(y)){var w=n[y];if(w){var C=w.items.indexOf(t);return C>=0?w.stackedData[C]:null}}return null},xse=function(t){return t.reduce(function(n,o){return[M4(o.concat([n[0]]).filter(rr)),P4(o.concat([n[1]]).filter(rr))]},[1/0,-1/0])},Ok=function(t,n,o){return Object.keys(t).reduce(function(h,y){var w=t[y],C=w.stackedData,a=C.reduce(function(D,j){var B=xse(j.slice(n,o+1));return[Math.min(D[0],B[0]),Math.max(D[1],B[1])]},[1/0,-1/0]);return[Math.min(a[0],h[0]),Math.max(a[1],h[1])]},[1/0,-1/0]).map(function(h){return h===1/0||h===-1/0?0:h})},iM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,v_=function(t,n,o){if(Xr(t))return t(n,o);if(!Array.isArray(t))return n;var h=[];if(rr(t[0]))h[0]=o?t[0]:Math.min(t[0],n[0]);else if(iM.test(t[0])){var y=+iM.exec(t[0])[1];h[0]=n[0]-y}else Xr(t[0])?h[0]=t[0](n[0]):h[0]=n[0];if(rr(t[1]))h[1]=o?t[1]:Math.max(t[1],n[1]);else if(oM.test(t[1])){var w=+oM.exec(t[1])[1];h[1]=n[1]+w}else Xr(t[1])?h[1]=t[1](n[1]):h[1]=n[1];return h},s9=function(t,n,o){if(t&&t.scale&&t.scale.bandwidth){var h=t.scale.bandwidth();if(!o||h>0)return h}if(t&&n&&n.length>=2){for(var y=Sx(n,function(B){return B.coordinate}),w=1/0,C=1,a=y.length;C<a;C++){var D=y[C],j=y[C-1];w=Math.min((D.coordinate||0)-(j.coordinate||0),w)}return w===1/0?0:w}return o?void 0:0},aM=function(t,n,o){return!t||!t.length||C4(t,pa(o,"type.defaultProps.domain"))?n:t},Rk=function(t,n){var o=t.type.defaultProps?gi(gi({},t.type.defaultProps),t.props):t.props,h=o.dataKey,y=o.name,w=o.unit,C=o.formatter,a=o.tooltipType,D=o.chartType,j=o.hide;return gi(gi({},zr(t,!1)),{},{dataKey:h,unit:w,formatter:C,name:y||h,color:Kx(t),value:go(n,h),type:a,payload:n,chartType:D,hide:j})};function G5(e){"@babel/helpers - typeof";return G5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G5(e)}function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(n),!0).forEach(function(o){Dk(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Dk(e,t,n){return t=bse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bse(e){var t=wse(e,"string");return G5(t)=="symbol"?t:t+""}function wse(e,t){if(G5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(G5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ase(e,t){return Pse(e)||Ese(e,t)||Sse(e,t)||Tse()}function Tse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sse(e,t){if(e){if(typeof e=="string")return lM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lM(e,t)}}function lM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ese(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function Pse(e){if(Array.isArray(e))return e}var l9=Math.PI/180,Mse=function(t){return t*180/Math.PI},Wn=function(t,n,o,h){return{x:t+Math.cos(-l9*h)*o,y:n+Math.sin(-l9*h)*o}},kk=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(o.left||0)-(o.right||0)),Math.abs(n-(o.top||0)-(o.bottom||0)))/2},Cse=function(t,n,o,h,y){var w=t.width,C=t.height,a=t.startAngle,D=t.endAngle,j=Oo(t.cx,w,w/2),B=Oo(t.cy,C,C/2),H=kk(w,C,o),X=Oo(t.innerRadius,H,0),ie=Oo(t.outerRadius,H,H*.8),Q=Object.keys(n);return Q.reduce(function(ne,te){var K=n[te],se=K.domain,ve=K.reversed,le;if(an(K.range))h==="angleAxis"?le=[a,D]:h==="radiusAxis"&&(le=[X,ie]),ve&&(le=[le[1],le[0]]);else{le=K.range;var fe=le,Te=Ase(fe,2);a=Te[0],D=Te[1]}var Ee=Mk(K,y),Ze=Ee.realScaleType,st=Ee.scale;st.domain(se).range(le),Ck(st);var We=Ik(st,xl(xl({},K),{},{realScaleType:Ze})),Xe=xl(xl(xl({},K),We),{},{range:le,radius:ie,realScaleType:Ze,scale:st,cx:j,cy:B,innerRadius:X,outerRadius:ie,startAngle:a,endAngle:D});return xl(xl({},ne),{},Dk({},te,Xe))},{})},Ise=function(t,n){var o=t.x,h=t.y,y=n.x,w=n.y;return Math.sqrt(Math.pow(o-y,2)+Math.pow(h-w,2))},Ose=function(t,n){var o=t.x,h=t.y,y=n.cx,w=n.cy,C=Ise({x:o,y:h},{x:y,y:w});if(C<=0)return{radius:C};var a=(o-y)/C,D=Math.acos(a);return h>w&&(D=2*Math.PI-D),{radius:C,angle:Mse(D),angleInRadian:D}},Rse=function(t){var n=t.startAngle,o=t.endAngle,h=Math.floor(n/360),y=Math.floor(o/360),w=Math.min(h,y);return{startAngle:n-w*360,endAngle:o-w*360}},Dse=function(t,n){var o=n.startAngle,h=n.endAngle,y=Math.floor(o/360),w=Math.floor(h/360),C=Math.min(y,w);return t+C*360},cM=function(t,n){var o=t.x,h=t.y,y=Ose({x:o,y:h},n),w=y.radius,C=y.angle,a=n.innerRadius,D=n.outerRadius;if(w<a||w>D)return!1;if(w===0)return!0;var j=Rse(n),B=j.startAngle,H=j.endAngle,X=C,ie;if(B<=H){for(;X>H;)X-=360;for(;X<B;)X+=360;ie=X>=B&&X<=H}else{for(;X>B;)X-=360;for(;X<H;)X+=360;ie=X>=H&&X<=B}return ie?xl(xl({},n),{},{radius:w,angle:Dse(X,n)}):null},Lk=function(t){return!ut.isValidElement(t)&&!Xr(t)&&typeof t!="boolean"?t.className:""};function q5(e){"@babel/helpers - typeof";return q5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q5(e)}var kse=["offset"];function Lse(e){return Nse(e)||Fse(e)||Bse(e)||zse()}function zse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bse(e,t){if(e){if(typeof e=="string")return x_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x_(e,t)}}function Fse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nse(e){if(Array.isArray(e))return x_(e)}function x_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function jse(e,t){if(e==null)return{};var n=$se(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function $se(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(o){Use(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Use(e,t,n){return t=Vse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vse(e){var t=Gse(e,"string");return q5(t)=="symbol"?t:t+""}function Gse(e,t){if(q5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(q5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},W5.apply(this,arguments)}var qse=function(t){var n=t.value,o=t.formatter,h=an(t.children)?n:t.children;return Xr(o)?o(h):h},Wse=function(t,n){var o=Io(n-t),h=Math.min(Math.abs(n-t),360);return o*h},Hse=function(t,n,o){var h=t.position,y=t.viewBox,w=t.offset,C=t.className,a=y,D=a.cx,j=a.cy,B=a.innerRadius,H=a.outerRadius,X=a.startAngle,ie=a.endAngle,Q=a.clockWise,ne=(B+H)/2,te=Wse(X,ie),K=te>=0?1:-1,se,ve;h==="insideStart"?(se=X+K*w,ve=Q):h==="insideEnd"?(se=ie-K*w,ve=!Q):h==="end"&&(se=ie+K*w,ve=Q),ve=te<=0?ve:!ve;var le=Wn(D,j,ne,se),fe=Wn(D,j,ne,se+(ve?1:-1)*359),Te="M".concat(le.x,",").concat(le.y,`
    A`).concat(ne,",").concat(ne,",0,1,").concat(ve?0:1,`,
    `).concat(fe.x,",").concat(fe.y),Ee=an(t.id)?v6("recharts-radial-line-"):t.id;return tt.createElement("text",W5({},o,{dominantBaseline:"central",className:tn("recharts-radial-bar-label",C)}),tt.createElement("defs",null,tt.createElement("path",{id:Ee,d:Te})),tt.createElement("textPath",{xlinkHref:"#".concat(Ee)},n))},Zse=function(t){var n=t.viewBox,o=t.offset,h=t.position,y=n,w=y.cx,C=y.cy,a=y.innerRadius,D=y.outerRadius,j=y.startAngle,B=y.endAngle,H=(j+B)/2;if(h==="outside"){var X=Wn(w,C,D+o,H),ie=X.x,Q=X.y;return{x:ie,y:Q,textAnchor:ie>=w?"start":"end",verticalAnchor:"middle"}}if(h==="center")return{x:w,y:C,textAnchor:"middle",verticalAnchor:"middle"};if(h==="centerTop")return{x:w,y:C,textAnchor:"middle",verticalAnchor:"start"};if(h==="centerBottom")return{x:w,y:C,textAnchor:"middle",verticalAnchor:"end"};var ne=(a+D)/2,te=Wn(w,C,ne,H),K=te.x,se=te.y;return{x:K,y:se,textAnchor:"middle",verticalAnchor:"middle"}},Xse=function(t){var n=t.viewBox,o=t.parentViewBox,h=t.offset,y=t.position,w=n,C=w.x,a=w.y,D=w.width,j=w.height,B=j>=0?1:-1,H=B*h,X=B>0?"end":"start",ie=B>0?"start":"end",Q=D>=0?1:-1,ne=Q*h,te=Q>0?"end":"start",K=Q>0?"start":"end";if(y==="top"){var se={x:C+D/2,y:a-B*h,textAnchor:"middle",verticalAnchor:X};return Oi(Oi({},se),o?{height:Math.max(a-o.y,0),width:D}:{})}if(y==="bottom"){var ve={x:C+D/2,y:a+j+H,textAnchor:"middle",verticalAnchor:ie};return Oi(Oi({},ve),o?{height:Math.max(o.y+o.height-(a+j),0),width:D}:{})}if(y==="left"){var le={x:C-ne,y:a+j/2,textAnchor:te,verticalAnchor:"middle"};return Oi(Oi({},le),o?{width:Math.max(le.x-o.x,0),height:j}:{})}if(y==="right"){var fe={x:C+D+ne,y:a+j/2,textAnchor:K,verticalAnchor:"middle"};return Oi(Oi({},fe),o?{width:Math.max(o.x+o.width-fe.x,0),height:j}:{})}var Te=o?{width:D,height:j}:{};return y==="insideLeft"?Oi({x:C+ne,y:a+j/2,textAnchor:K,verticalAnchor:"middle"},Te):y==="insideRight"?Oi({x:C+D-ne,y:a+j/2,textAnchor:te,verticalAnchor:"middle"},Te):y==="insideTop"?Oi({x:C+D/2,y:a+H,textAnchor:"middle",verticalAnchor:ie},Te):y==="insideBottom"?Oi({x:C+D/2,y:a+j-H,textAnchor:"middle",verticalAnchor:X},Te):y==="insideTopLeft"?Oi({x:C+ne,y:a+H,textAnchor:K,verticalAnchor:ie},Te):y==="insideTopRight"?Oi({x:C+D-ne,y:a+H,textAnchor:te,verticalAnchor:ie},Te):y==="insideBottomLeft"?Oi({x:C+ne,y:a+j-H,textAnchor:K,verticalAnchor:X},Te):y==="insideBottomRight"?Oi({x:C+D-ne,y:a+j-H,textAnchor:te,verticalAnchor:X},Te):E2(y)&&(rr(y.x)||Eu(y.x))&&(rr(y.y)||Eu(y.y))?Oi({x:C+Oo(y.x,D),y:a+Oo(y.y,j),textAnchor:"end",verticalAnchor:"end"},Te):Oi({x:C+D/2,y:a+j/2,textAnchor:"middle",verticalAnchor:"middle"},Te)},Yse=function(t){return"cx"in t&&rr(t.cx)};function Vi(e){var t=e.offset,n=t===void 0?5:t,o=jse(e,kse),h=Oi({offset:n},o),y=h.viewBox,w=h.position,C=h.value,a=h.children,D=h.content,j=h.className,B=j===void 0?"":j,H=h.textBreakAll;if(!y||an(C)&&an(a)&&!ut.isValidElement(D)&&!Xr(D))return null;if(ut.isValidElement(D))return ut.cloneElement(D,h);var X;if(Xr(D)){if(X=ut.createElement(D,h),ut.isValidElement(X))return X}else X=qse(h);var ie=Yse(y),Q=zr(h,!0);if(ie&&(w==="insideStart"||w==="insideEnd"||w==="end"))return Hse(h,X,Q);var ne=ie?Zse(h):Xse(h);return tt.createElement(Uu,W5({className:tn("recharts-label",B)},Q,ne,{breakAll:H}),X)}Vi.displayName="Label";var zk=function(t){var n=t.cx,o=t.cy,h=t.angle,y=t.startAngle,w=t.endAngle,C=t.r,a=t.radius,D=t.innerRadius,j=t.outerRadius,B=t.x,H=t.y,X=t.top,ie=t.left,Q=t.width,ne=t.height,te=t.clockWise,K=t.labelViewBox;if(K)return K;if(rr(Q)&&rr(ne)){if(rr(B)&&rr(H))return{x:B,y:H,width:Q,height:ne};if(rr(X)&&rr(ie))return{x:X,y:ie,width:Q,height:ne}}return rr(B)&&rr(H)?{x:B,y:H,width:0,height:0}:rr(n)&&rr(o)?{cx:n,cy:o,startAngle:y||h||0,endAngle:w||h||0,innerRadius:D||0,outerRadius:j||a||C||0,clockWise:te}:t.viewBox?t.viewBox:{}},Kse=function(t,n){return t?t===!0?tt.createElement(Vi,{key:"label-implicit",viewBox:n}):ki(t)?tt.createElement(Vi,{key:"label-implicit",viewBox:n,value:t}):ut.isValidElement(t)?t.type===Vi?ut.cloneElement(t,{key:"label-implicit",viewBox:n}):tt.createElement(Vi,{key:"label-implicit",content:t,viewBox:n}):Xr(t)?tt.createElement(Vi,{key:"label-implicit",content:t,viewBox:n}):E2(t)?tt.createElement(Vi,W5({viewBox:n},t,{key:"label-implicit"})):null:null},Jse=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&o&&!t.label)return null;var h=t.children,y=zk(t),w=ja(h,Vi).map(function(a,D){return ut.cloneElement(a,{viewBox:n||y,key:"label-".concat(D)})});if(!o)return w;var C=Kse(t.label,n||y);return[C].concat(Lse(w))};Vi.parseViewBox=zk;Vi.renderCallByParent=Jse;function Qse(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ele=Qse;const tle=Cn(ele);function H5(e){"@babel/helpers - typeof";return H5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H5(e)}var rle=["valueAccessor"],nle=["data","dataKey","clockWise","id","textBreakAll"];function ile(e){return lle(e)||sle(e)||ale(e)||ole()}function ole(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ale(e,t){if(e){if(typeof e=="string")return b_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b_(e,t)}}function sle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lle(e){if(Array.isArray(e))return b_(e)}function b_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c9(){return c9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c9.apply(this,arguments)}function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function fM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(o){cle(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function cle(e,t,n){return t=ule(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ule(e){var t=hle(e,"string");return H5(t)=="symbol"?t:t+""}function hle(e,t){if(H5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(H5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dM(e,t){if(e==null)return{};var n=fle(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function fle(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var dle=function(t){return Array.isArray(t.value)?tle(t.value):t.value};function Hs(e){var t=e.valueAccessor,n=t===void 0?dle:t,o=dM(e,rle),h=o.data,y=o.dataKey,w=o.clockWise,C=o.id,a=o.textBreakAll,D=dM(o,nle);return!h||!h.length?null:tt.createElement(Pn,{className:"recharts-label-list"},h.map(function(j,B){var H=an(y)?n(j,B):go(j&&j.payload,y),X=an(C)?{}:{id:"".concat(C,"-").concat(B)};return tt.createElement(Vi,c9({},zr(j,!0),D,X,{parentViewBox:j.parentViewBox,value:H,textBreakAll:a,viewBox:Vi.parseViewBox(an(w)?j:fM(fM({},j),{},{clockWise:w})),key:"label-".concat(B),index:B}))}))}Hs.displayName="LabelList";function ple(e,t){return e?e===!0?tt.createElement(Hs,{key:"labelList-implicit",data:t}):tt.isValidElement(e)||Xr(e)?tt.createElement(Hs,{key:"labelList-implicit",data:t,content:e}):E2(e)?tt.createElement(Hs,c9({data:t},e,{key:"labelList-implicit"})):null:null}function mle(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var o=e.children,h=ja(o,Hs).map(function(w,C){return ut.cloneElement(w,{data:t,key:"labelList-".concat(C)})});if(!n)return h;var y=ple(e.label,t);return[y].concat(ile(h))}Hs.renderCallByParent=mle;function Z5(e){"@babel/helpers - typeof";return Z5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z5(e)}function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w_.apply(this,arguments)}function pM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function mM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(n),!0).forEach(function(o){gle(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function gle(e,t,n){return t=yle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yle(e){var t=_le(e,"string");return Z5(t)=="symbol"?t:t+""}function _le(e,t){if(Z5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Z5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vle=function(t,n){var o=Io(n-t),h=Math.min(Math.abs(n-t),359.999);return o*h},$d=function(t){var n=t.cx,o=t.cy,h=t.radius,y=t.angle,w=t.sign,C=t.isExternal,a=t.cornerRadius,D=t.cornerIsExternal,j=a*(C?1:-1)+h,B=Math.asin(a/j)/l9,H=D?y:y+w*B,X=Wn(n,o,j,H),ie=Wn(n,o,h,H),Q=D?y-w*B:y,ne=Wn(n,o,j*Math.cos(B*l9),Q);return{center:X,circleTangency:ie,lineTangency:ne,theta:B}},Bk=function(t){var n=t.cx,o=t.cy,h=t.innerRadius,y=t.outerRadius,w=t.startAngle,C=t.endAngle,a=vle(w,C),D=w+a,j=Wn(n,o,y,w),B=Wn(n,o,y,D),H="M ".concat(j.x,",").concat(j.y,`
    A `).concat(y,",").concat(y,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(w>D),`,
    `).concat(B.x,",").concat(B.y,`
  `);if(h>0){var X=Wn(n,o,h,w),ie=Wn(n,o,h,D);H+="L ".concat(ie.x,",").concat(ie.y,`
            A `).concat(h,",").concat(h,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(w<=D),`,
            `).concat(X.x,",").concat(X.y," Z")}else H+="L ".concat(n,",").concat(o," Z");return H},xle=function(t){var n=t.cx,o=t.cy,h=t.innerRadius,y=t.outerRadius,w=t.cornerRadius,C=t.forceCornerRadius,a=t.cornerIsExternal,D=t.startAngle,j=t.endAngle,B=Io(j-D),H=$d({cx:n,cy:o,radius:y,angle:D,sign:B,cornerRadius:w,cornerIsExternal:a}),X=H.circleTangency,ie=H.lineTangency,Q=H.theta,ne=$d({cx:n,cy:o,radius:y,angle:j,sign:-B,cornerRadius:w,cornerIsExternal:a}),te=ne.circleTangency,K=ne.lineTangency,se=ne.theta,ve=a?Math.abs(D-j):Math.abs(D-j)-Q-se;if(ve<0)return C?"M ".concat(ie.x,",").concat(ie.y,`
        a`).concat(w,",").concat(w,",0,0,1,").concat(w*2,`,0
        a`).concat(w,",").concat(w,",0,0,1,").concat(-w*2,`,0
      `):Bk({cx:n,cy:o,innerRadius:h,outerRadius:y,startAngle:D,endAngle:j});var le="M ".concat(ie.x,",").concat(ie.y,`
    A`).concat(w,",").concat(w,",0,0,").concat(+(B<0),",").concat(X.x,",").concat(X.y,`
    A`).concat(y,",").concat(y,",0,").concat(+(ve>180),",").concat(+(B<0),",").concat(te.x,",").concat(te.y,`
    A`).concat(w,",").concat(w,",0,0,").concat(+(B<0),",").concat(K.x,",").concat(K.y,`
  `);if(h>0){var fe=$d({cx:n,cy:o,radius:h,angle:D,sign:B,isExternal:!0,cornerRadius:w,cornerIsExternal:a}),Te=fe.circleTangency,Ee=fe.lineTangency,Ze=fe.theta,st=$d({cx:n,cy:o,radius:h,angle:j,sign:-B,isExternal:!0,cornerRadius:w,cornerIsExternal:a}),We=st.circleTangency,Xe=st.lineTangency,St=st.theta,Mt=a?Math.abs(D-j):Math.abs(D-j)-Ze-St;if(Mt<0&&w===0)return"".concat(le,"L").concat(n,",").concat(o,"Z");le+="L".concat(Xe.x,",").concat(Xe.y,`
      A`).concat(w,",").concat(w,",0,0,").concat(+(B<0),",").concat(We.x,",").concat(We.y,`
      A`).concat(h,",").concat(h,",0,").concat(+(Mt>180),",").concat(+(B>0),",").concat(Te.x,",").concat(Te.y,`
      A`).concat(w,",").concat(w,",0,0,").concat(+(B<0),",").concat(Ee.x,",").concat(Ee.y,"Z")}else le+="L".concat(n,",").concat(o,"Z");return le},ble={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Fk=function(t){var n=mM(mM({},ble),t),o=n.cx,h=n.cy,y=n.innerRadius,w=n.outerRadius,C=n.cornerRadius,a=n.forceCornerRadius,D=n.cornerIsExternal,j=n.startAngle,B=n.endAngle,H=n.className;if(w<y||j===B)return null;var X=tn("recharts-sector",H),ie=w-y,Q=Oo(C,ie,0,!0),ne;return Q>0&&Math.abs(j-B)<360?ne=xle({cx:o,cy:h,innerRadius:y,outerRadius:w,cornerRadius:Math.min(Q,ie/2),forceCornerRadius:a,cornerIsExternal:D,startAngle:j,endAngle:B}):ne=Bk({cx:o,cy:h,innerRadius:y,outerRadius:w,startAngle:j,endAngle:B}),tt.createElement("path",w_({},zr(n,!0),{className:X,d:ne,role:"img"}))};function X5(e){"@babel/helpers - typeof";return X5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X5(e)}function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A_.apply(this,arguments)}function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function yM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(o){wle(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function wle(e,t,n){return t=Ale(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ale(e){var t=Tle(e,"string");return X5(t)=="symbol"?t:t+""}function Tle(e,t){if(X5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(X5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _M={curveBasisClosed:bH,curveBasisOpen:wH,curveBasis:xH,curveBumpX:aH,curveBumpY:sH,curveLinearClosed:AH,curveLinear:m4,curveMonotoneX:TH,curveMonotoneY:SH,curveNatural:EH,curveStep:PH,curveStepAfter:CH,curveStepBefore:MH},Ud=function(t){return t.x===+t.x&&t.y===+t.y},Fh=function(t){return t.x},Nh=function(t){return t.y},Sle=function(t,n){if(Xr(t))return t;var o="curve".concat(d4(t));return(o==="curveMonotone"||o==="curveBump")&&n?_M["".concat(o).concat(n==="vertical"?"Y":"X")]:_M[o]||m4},Ele=function(t){var n=t.type,o=n===void 0?"linear":n,h=t.points,y=h===void 0?[]:h,w=t.baseLine,C=t.layout,a=t.connectNulls,D=a===void 0?!1:a,j=Sle(o,C),B=D?y.filter(function(Q){return Ud(Q)}):y,H;if(Array.isArray(w)){var X=D?w.filter(function(Q){return Ud(Q)}):w,ie=B.map(function(Q,ne){return yM(yM({},Q),{},{base:X[ne]})});return C==="vertical"?H=Rd().y(Nh).x1(Fh).x0(function(Q){return Q.base.x}):H=Rd().x(Fh).y1(Nh).y0(function(Q){return Q.base.y}),H.defined(Ud).curve(j),H(ie)}return C==="vertical"&&rr(w)?H=Rd().y(Nh).x1(Fh).x0(w):rr(w)?H=Rd().x(Fh).y1(Nh).y0(w):H=kR().x(Fh).y(Nh),H.defined(Ud).curve(j),H(B)},T_=function(t){var n=t.className,o=t.points,h=t.path,y=t.pathRef;if((!o||!o.length)&&!h)return null;var w=o&&o.length?Ele(t):h;return tt.createElement("path",A_({},zr(t,!1),kp(t),{className:tn("recharts-curve",n),d:w,ref:y}))},Nk={exports:{}},Ple="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mle=Ple,Cle=Mle;function jk(){}function $k(){}$k.resetWarningCache=jk;var Ile=function(){function e(o,h,y,w,C,a){if(a!==Cle){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$k,resetWarningCache:jk};return n.PropTypes=n,n};Nk.exports=Ile();var Ole=Nk.exports;const Zr=Cn(Ole);var Rle=Object.getOwnPropertyNames,Dle=Object.getOwnPropertySymbols,kle=Object.prototype.hasOwnProperty;function vM(e,t){return function(o,h,y){return e(o,h,y)&&t(o,h,y)}}function Vd(e){return function(n,o,h){if(!n||!o||typeof n!="object"||typeof o!="object")return e(n,o,h);var y=h.cache,w=y.get(n),C=y.get(o);if(w&&C)return w===o&&C===n;y.set(n,o),y.set(o,n);var a=e(n,o,h);return y.delete(n),y.delete(o),a}}function xM(e){return Rle(e).concat(Dle(e))}var Uk=Object.hasOwn||function(e,t){return kle.call(e,t)};function z2(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Vk="_owner",bM=Object.getOwnPropertyDescriptor,wM=Object.keys;function Lle(e,t,n){var o=e.length;if(t.length!==o)return!1;for(;o-- >0;)if(!n.equals(e[o],t[o],o,o,e,t,n))return!1;return!0}function zle(e,t){return z2(e.getTime(),t.getTime())}function AM(e,t,n){if(e.size!==t.size)return!1;for(var o={},h=e.entries(),y=0,w,C;(w=h.next())&&!w.done;){for(var a=t.entries(),D=!1,j=0;(C=a.next())&&!C.done;){var B=w.value,H=B[0],X=B[1],ie=C.value,Q=ie[0],ne=ie[1];!D&&!o[j]&&(D=n.equals(H,Q,y,j,e,t,n)&&n.equals(X,ne,H,Q,e,t,n))&&(o[j]=!0),j++}if(!D)return!1;y++}return!0}function Ble(e,t,n){var o=wM(e),h=o.length;if(wM(t).length!==h)return!1;for(var y;h-- >0;)if(y=o[h],y===Vk&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Uk(t,y)||!n.equals(e[y],t[y],y,y,e,t,n))return!1;return!0}function jh(e,t,n){var o=xM(e),h=o.length;if(xM(t).length!==h)return!1;for(var y,w,C;h-- >0;)if(y=o[h],y===Vk&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Uk(t,y)||!n.equals(e[y],t[y],y,y,e,t,n)||(w=bM(e,y),C=bM(t,y),(w||C)&&(!w||!C||w.configurable!==C.configurable||w.enumerable!==C.enumerable||w.writable!==C.writable)))return!1;return!0}function Fle(e,t){return z2(e.valueOf(),t.valueOf())}function Nle(e,t){return e.source===t.source&&e.flags===t.flags}function TM(e,t,n){if(e.size!==t.size)return!1;for(var o={},h=e.values(),y,w;(y=h.next())&&!y.done;){for(var C=t.values(),a=!1,D=0;(w=C.next())&&!w.done;)!a&&!o[D]&&(a=n.equals(y.value,w.value,y.value,w.value,e,t,n))&&(o[D]=!0),D++;if(!a)return!1}return!0}function jle(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var $le="[object Arguments]",Ule="[object Boolean]",Vle="[object Date]",Gle="[object Map]",qle="[object Number]",Wle="[object Object]",Hle="[object RegExp]",Zle="[object Set]",Xle="[object String]",Yle=Array.isArray,SM=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,EM=Object.assign,Kle=Object.prototype.toString.call.bind(Object.prototype.toString);function Jle(e){var t=e.areArraysEqual,n=e.areDatesEqual,o=e.areMapsEqual,h=e.areObjectsEqual,y=e.arePrimitiveWrappersEqual,w=e.areRegExpsEqual,C=e.areSetsEqual,a=e.areTypedArraysEqual;return function(j,B,H){if(j===B)return!0;if(j==null||B==null||typeof j!="object"||typeof B!="object")return j!==j&&B!==B;var X=j.constructor;if(X!==B.constructor)return!1;if(X===Object)return h(j,B,H);if(Yle(j))return t(j,B,H);if(SM!=null&&SM(j))return a(j,B,H);if(X===Date)return n(j,B,H);if(X===RegExp)return w(j,B,H);if(X===Map)return o(j,B,H);if(X===Set)return C(j,B,H);var ie=Kle(j);return ie===Vle?n(j,B,H):ie===Hle?w(j,B,H):ie===Gle?o(j,B,H):ie===Zle?C(j,B,H):ie===Wle?typeof j.then!="function"&&typeof B.then!="function"&&h(j,B,H):ie===$le?h(j,B,H):ie===Ule||ie===qle||ie===Xle?y(j,B,H):!1}}function Qle(e){var t=e.circular,n=e.createCustomConfig,o=e.strict,h={areArraysEqual:o?jh:Lle,areDatesEqual:zle,areMapsEqual:o?vM(AM,jh):AM,areObjectsEqual:o?jh:Ble,arePrimitiveWrappersEqual:Fle,areRegExpsEqual:Nle,areSetsEqual:o?vM(TM,jh):TM,areTypedArraysEqual:o?jh:jle};if(n&&(h=EM({},h,n(h))),t){var y=Vd(h.areArraysEqual),w=Vd(h.areMapsEqual),C=Vd(h.areObjectsEqual),a=Vd(h.areSetsEqual);h=EM({},h,{areArraysEqual:y,areMapsEqual:w,areObjectsEqual:C,areSetsEqual:a})}return h}function e1e(e){return function(t,n,o,h,y,w,C){return e(t,n,C)}}function t1e(e){var t=e.circular,n=e.comparator,o=e.createState,h=e.equals,y=e.strict;if(o)return function(a,D){var j=o(),B=j.cache,H=B===void 0?t?new WeakMap:void 0:B,X=j.meta;return n(a,D,{cache:H,equals:h,meta:X,strict:y})};if(t)return function(a,D){return n(a,D,{cache:new WeakMap,equals:h,meta:void 0,strict:y})};var w={cache:void 0,equals:h,meta:void 0,strict:y};return function(a,D){return n(a,D,w)}}var r1e=vc();vc({strict:!0});vc({circular:!0});vc({circular:!0,strict:!0});vc({createInternalComparator:function(){return z2}});vc({strict:!0,createInternalComparator:function(){return z2}});vc({circular:!0,createInternalComparator:function(){return z2}});vc({circular:!0,createInternalComparator:function(){return z2},strict:!0});function vc(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,o=e.createInternalComparator,h=e.createState,y=e.strict,w=y===void 0?!1:y,C=Qle(e),a=Jle(C),D=o?o(a):e1e(a);return t1e({circular:n,comparator:a,createState:h,equals:D,strict:w})}function n1e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function PM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,o=function h(y){n<0&&(n=y),y-n>t?(e(y),n=-1):n1e(h)};requestAnimationFrame(o)}function S_(e){"@babel/helpers - typeof";return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S_(e)}function i1e(e){return l1e(e)||s1e(e)||a1e(e)||o1e()}function o1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(e,t){if(e){if(typeof e=="string")return MM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MM(e,t)}}function MM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l1e(e){if(Array.isArray(e))return e}function c1e(){var e={},t=function(){return null},n=!1,o=function h(y){if(!n){if(Array.isArray(y)){if(!y.length)return;var w=y,C=i1e(w),a=C[0],D=C.slice(1);if(typeof a=="number"){PM(h.bind(null,D),a);return}h(a),PM(h.bind(null,D));return}S_(y)==="object"&&(e=y,t(e)),typeof y=="function"&&y()}};return{stop:function(){n=!0},start:function(y){n=!1,o(y)},subscribe:function(y){return t=y,function(){t=function(){return null}}}}}function Y5(e){"@babel/helpers - typeof";return Y5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y5(e)}function CM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function IM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CM(Object(n),!0).forEach(function(o){Gk(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Gk(e,t,n){return t=u1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u1e(e){var t=h1e(e,"string");return Y5(t)==="symbol"?t:String(t)}function h1e(e,t){if(Y5(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Y5(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f1e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(o,h){return o.filter(function(y){return h.includes(y)})})},d1e=function(t){return t},p1e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},a5=function(t,n){return Object.keys(n).reduce(function(o,h){return IM(IM({},o),{},Gk({},h,t(h,n[h])))},{})},OM=function(t,n,o){return t.map(function(h){return"".concat(p1e(h)," ").concat(n,"ms ").concat(o)}).join(",")};function m1e(e,t){return _1e(e)||y1e(e,t)||qk(e,t)||g1e()}function g1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function _1e(e){if(Array.isArray(e))return e}function v1e(e){return w1e(e)||b1e(e)||qk(e)||x1e()}function x1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qk(e,t){if(e){if(typeof e=="string")return E_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(e,t)}}function b1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w1e(e){if(Array.isArray(e))return E_(e)}function E_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var u9=1e-4,Wk=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},Hk=function(t,n){return t.map(function(o,h){return o*Math.pow(n,h)}).reduce(function(o,h){return o+h})},RM=function(t,n){return function(o){var h=Wk(t,n);return Hk(h,o)}},A1e=function(t,n){return function(o){var h=Wk(t,n),y=[].concat(v1e(h.map(function(w,C){return w*C}).slice(1)),[0]);return Hk(y,o)}},DM=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var h=n[0],y=n[1],w=n[2],C=n[3];if(n.length===1)switch(n[0]){case"linear":h=0,y=0,w=1,C=1;break;case"ease":h=.25,y=.1,w=.25,C=1;break;case"ease-in":h=.42,y=0,w=1,C=1;break;case"ease-out":h=.42,y=0,w=.58,C=1;break;case"ease-in-out":h=0,y=0,w=.58,C=1;break;default:{var a=n[0].split("(");if(a[0]==="cubic-bezier"&&a[1].split(")")[0].split(",").length===4){var D=a[1].split(")")[0].split(",").map(function(ne){return parseFloat(ne)}),j=m1e(D,4);h=j[0],y=j[1],w=j[2],C=j[3]}}}var B=RM(h,w),H=RM(y,C),X=A1e(h,w),ie=function(te){return te>1?1:te<0?0:te},Q=function(te){for(var K=te>1?1:te,se=K,ve=0;ve<8;++ve){var le=B(se)-K,fe=X(se);if(Math.abs(le-K)<u9||fe<u9)return H(se);se=ie(se-le/fe)}return H(se)};return Q.isStepper=!1,Q},T1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,o=n===void 0?100:n,h=t.damping,y=h===void 0?8:h,w=t.dt,C=w===void 0?17:w,a=function(j,B,H){var X=-(j-B)*o,ie=H*y,Q=H+(X-ie)*C/1e3,ne=H*C/1e3+j;return Math.abs(ne-B)<u9&&Math.abs(Q)<u9?[B,0]:[ne,Q]};return a.isStepper=!0,a.dt=C,a},S1e=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var h=n[0];if(typeof h=="string")switch(h){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DM(h);case"spring":return T1e();default:if(h.split("(")[0]==="cubic-bezier")return DM(h)}return typeof h=="function"?h:null};function K5(e){"@babel/helpers - typeof";return K5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K5(e)}function kM(e){return M1e(e)||P1e(e)||Zk(e)||E1e()}function E1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M1e(e){if(Array.isArray(e))return M_(e)}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(o){P_(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function P_(e,t,n){return t=C1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C1e(e){var t=I1e(e,"string");return K5(t)==="symbol"?t:String(t)}function I1e(e,t){if(K5(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(K5(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O1e(e,t){return k1e(e)||D1e(e,t)||Zk(e,t)||R1e()}function R1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zk(e,t){if(e){if(typeof e=="string")return M_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M_(e,t)}}function M_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function D1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function k1e(e){if(Array.isArray(e))return e}var h9=function(t,n,o){return t+(n-t)*o},C_=function(t){var n=t.from,o=t.to;return n!==o},L1e=function e(t,n,o){var h=a5(function(y,w){if(C_(w)){var C=t(w.from,w.to,w.velocity),a=O1e(C,2),D=a[0],j=a[1];return eo(eo({},w),{},{from:D,velocity:j})}return w},n);return o<1?a5(function(y,w){return C_(w)?eo(eo({},w),{},{velocity:h9(w.velocity,h[y].velocity,o),from:h9(w.from,h[y].from,o)}):w},n):e(t,h,o-1)};const z1e=function(e,t,n,o,h){var y=f1e(e,t),w=y.reduce(function(ne,te){return eo(eo({},ne),{},P_({},te,[e[te],t[te]]))},{}),C=y.reduce(function(ne,te){return eo(eo({},ne),{},P_({},te,{from:e[te],velocity:0,to:t[te]}))},{}),a=-1,D,j,B=function(){return null},H=function(){return a5(function(te,K){return K.from},C)},X=function(){return!Object.values(C).filter(C_).length},ie=function(te){D||(D=te);var K=te-D,se=K/n.dt;C=L1e(n,C,se),h(eo(eo(eo({},e),t),H())),D=te,X()||(a=requestAnimationFrame(B))},Q=function(te){j||(j=te);var K=(te-j)/o,se=a5(function(le,fe){return h9.apply(void 0,kM(fe).concat([n(K)]))},w);if(h(eo(eo(eo({},e),t),se)),K<1)a=requestAnimationFrame(B);else{var ve=a5(function(le,fe){return h9.apply(void 0,kM(fe).concat([n(1)]))},w);h(eo(eo(eo({},e),t),ve))}};return B=n.isStepper?ie:Q,function(){return requestAnimationFrame(B),function(){cancelAnimationFrame(a)}}};function a2(e){"@babel/helpers - typeof";return a2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a2(e)}var B1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function F1e(e,t){if(e==null)return{};var n=N1e(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function N1e(e,t){if(e==null)return{};var n={},o=Object.keys(e),h,y;for(y=0;y<o.length;y++)h=o[y],!(t.indexOf(h)>=0)&&(n[h]=e[h]);return n}function Cg(e){return V1e(e)||U1e(e)||$1e(e)||j1e()}function j1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $1e(e,t){if(e){if(typeof e=="string")return I_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I_(e,t)}}function U1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V1e(e){if(Array.isArray(e))return I_(e)}function I_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(n),!0).forEach(function(o){Hh(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Hh(e,t,n){return t=Xk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q1e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Xk(o.key),o)}}function W1e(e,t,n){return t&&q1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xk(e){var t=H1e(e,"string");return a2(t)==="symbol"?t:String(t)}function H1e(e,t){if(a2(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(a2(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O_(e,t)}function O_(e,t){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},O_(e,t)}function X1e(e){var t=Y1e();return function(){var o=f9(e),h;if(t){var y=f9(this).constructor;h=Reflect.construct(o,arguments,y)}else h=o.apply(this,arguments);return R_(this,h)}}function R_(e,t){if(t&&(a2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D_(e)}function D_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f9(e){return f9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},f9(e)}var Fl=function(e){Z1e(n,e);var t=X1e(n);function n(o,h){var y;G1e(this,n),y=t.call(this,o,h);var w=y.props,C=w.isActive,a=w.attributeName,D=w.from,j=w.to,B=w.steps,H=w.children,X=w.duration;if(y.handleStyleChange=y.handleStyleChange.bind(D_(y)),y.changeStyle=y.changeStyle.bind(D_(y)),!C||X<=0)return y.state={style:{}},typeof H=="function"&&(y.state={style:j}),R_(y);if(B&&B.length)y.state={style:B[0].style};else if(D){if(typeof H=="function")return y.state={style:D},R_(y);y.state={style:a?Hh({},a,D):D}}else y.state={style:{}};return y}return W1e(n,[{key:"componentDidMount",value:function(){var h=this.props,y=h.isActive,w=h.canBegin;this.mounted=!0,!(!y||!w)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(h){var y=this.props,w=y.isActive,C=y.canBegin,a=y.attributeName,D=y.shouldReAnimate,j=y.to,B=y.from,H=this.state.style;if(C){if(!w){var X={style:a?Hh({},a,j):j};this.state&&H&&(a&&H[a]!==j||!a&&H!==j)&&this.setState(X);return}if(!(r1e(h.to,j)&&h.canBegin&&h.isActive)){var ie=!h.canBegin||!h.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var Q=ie||D?B:h.to;if(this.state&&H){var ne={style:a?Hh({},a,Q):Q};(a&&H[a]!==Q||!a&&H!==Q)&&this.setState(ne)}this.runAnimation(fs(fs({},this.props),{},{from:Q,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var h=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),h&&h()}},{key:"handleStyleChange",value:function(h){this.changeStyle(h)}},{key:"changeStyle",value:function(h){this.mounted&&this.setState({style:h})}},{key:"runJSAnimation",value:function(h){var y=this,w=h.from,C=h.to,a=h.duration,D=h.easing,j=h.begin,B=h.onAnimationEnd,H=h.onAnimationStart,X=z1e(w,C,S1e(D),a,this.changeStyle),ie=function(){y.stopJSAnimation=X()};this.manager.start([H,j,ie,a,B])}},{key:"runStepAnimation",value:function(h){var y=this,w=h.steps,C=h.begin,a=h.onAnimationStart,D=w[0],j=D.style,B=D.duration,H=B===void 0?0:B,X=function(Q,ne,te){if(te===0)return Q;var K=ne.duration,se=ne.easing,ve=se===void 0?"ease":se,le=ne.style,fe=ne.properties,Te=ne.onAnimationEnd,Ee=te>0?w[te-1]:ne,Ze=fe||Object.keys(le);if(typeof ve=="function"||ve==="spring")return[].concat(Cg(Q),[y.runJSAnimation.bind(y,{from:Ee.style,to:le,duration:K,easing:ve}),K]);var st=OM(Ze,K,ve),We=fs(fs(fs({},Ee.style),le),{},{transition:st});return[].concat(Cg(Q),[We,K,Te]).filter(d1e)};return this.manager.start([a].concat(Cg(w.reduce(X,[j,Math.max(H,C)])),[h.onAnimationEnd]))}},{key:"runAnimation",value:function(h){this.manager||(this.manager=c1e());var y=h.begin,w=h.duration,C=h.attributeName,a=h.to,D=h.easing,j=h.onAnimationStart,B=h.onAnimationEnd,H=h.steps,X=h.children,ie=this.manager;if(this.unSubscribe=ie.subscribe(this.handleStyleChange),typeof D=="function"||typeof X=="function"||D==="spring"){this.runJSAnimation(h);return}if(H.length>1){this.runStepAnimation(h);return}var Q=C?Hh({},C,a):a,ne=OM(Object.keys(Q),w,D);ie.start([j,y,fs(fs({},Q),{},{transition:ne}),w,B])}},{key:"render",value:function(){var h=this.props,y=h.children;h.begin;var w=h.duration;h.attributeName,h.easing;var C=h.isActive;h.steps,h.from,h.to,h.canBegin,h.onAnimationEnd,h.shouldReAnimate,h.onAnimationReStart;var a=F1e(h,B1e),D=ut.Children.count(y),j=this.state.style;if(typeof y=="function")return y(j);if(!C||D===0||w<=0)return y;var B=function(X){var ie=X.props,Q=ie.style,ne=Q===void 0?{}:Q,te=ie.className,K=ut.cloneElement(X,fs(fs({},a),{},{style:fs(fs({},ne),j),className:te}));return K};return D===1?B(ut.Children.only(y)):tt.createElement("div",null,ut.Children.map(y,function(H){return B(H)}))}}]),n}(ut.PureComponent);Fl.displayName="Animate";Fl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fl.propTypes={from:Zr.oneOfType([Zr.object,Zr.string]),to:Zr.oneOfType([Zr.object,Zr.string]),attributeName:Zr.string,duration:Zr.number,begin:Zr.number,easing:Zr.oneOfType([Zr.string,Zr.func]),steps:Zr.arrayOf(Zr.shape({duration:Zr.number.isRequired,style:Zr.object.isRequired,easing:Zr.oneOfType([Zr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Zr.func]),properties:Zr.arrayOf("string"),onAnimationEnd:Zr.func})),children:Zr.oneOfType([Zr.node,Zr.func]),isActive:Zr.bool,canBegin:Zr.bool,onAnimationEnd:Zr.func,shouldReAnimate:Zr.bool,onAnimationStart:Zr.func,onAnimationReStart:Zr.func};Zr.object,Zr.object,Zr.object,Zr.element;Zr.object,Zr.object,Zr.object,Zr.oneOfType([Zr.array,Zr.element]),Zr.any;function J5(e){"@babel/helpers - typeof";return J5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J5(e)}function d9(){return d9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d9.apply(this,arguments)}function K1e(e,t){return tce(e)||ece(e,t)||Q1e(e,t)||J1e()}function J1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q1e(e,t){if(e){if(typeof e=="string")return BM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BM(e,t)}}function BM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ece(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function tce(e){if(Array.isArray(e))return e}function FM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function NM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FM(Object(n),!0).forEach(function(o){rce(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function rce(e,t,n){return t=nce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nce(e){var t=ice(e,"string");return J5(t)=="symbol"?t:t+""}function ice(e,t){if(J5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(J5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jM=function(t,n,o,h,y){var w=Math.min(Math.abs(o)/2,Math.abs(h)/2),C=h>=0?1:-1,a=o>=0?1:-1,D=h>=0&&o>=0||h<0&&o<0?1:0,j;if(w>0&&y instanceof Array){for(var B=[0,0,0,0],H=0,X=4;H<X;H++)B[H]=y[H]>w?w:y[H];j="M".concat(t,",").concat(n+C*B[0]),B[0]>0&&(j+="A ".concat(B[0],",").concat(B[0],",0,0,").concat(D,",").concat(t+a*B[0],",").concat(n)),j+="L ".concat(t+o-a*B[1],",").concat(n),B[1]>0&&(j+="A ".concat(B[1],",").concat(B[1],",0,0,").concat(D,`,
        `).concat(t+o,",").concat(n+C*B[1])),j+="L ".concat(t+o,",").concat(n+h-C*B[2]),B[2]>0&&(j+="A ".concat(B[2],",").concat(B[2],",0,0,").concat(D,`,
        `).concat(t+o-a*B[2],",").concat(n+h)),j+="L ".concat(t+a*B[3],",").concat(n+h),B[3]>0&&(j+="A ".concat(B[3],",").concat(B[3],",0,0,").concat(D,`,
        `).concat(t,",").concat(n+h-C*B[3])),j+="Z"}else if(w>0&&y===+y&&y>0){var ie=Math.min(w,y);j="M ".concat(t,",").concat(n+C*ie,`
            A `).concat(ie,",").concat(ie,",0,0,").concat(D,",").concat(t+a*ie,",").concat(n,`
            L `).concat(t+o-a*ie,",").concat(n,`
            A `).concat(ie,",").concat(ie,",0,0,").concat(D,",").concat(t+o,",").concat(n+C*ie,`
            L `).concat(t+o,",").concat(n+h-C*ie,`
            A `).concat(ie,",").concat(ie,",0,0,").concat(D,",").concat(t+o-a*ie,",").concat(n+h,`
            L `).concat(t+a*ie,",").concat(n+h,`
            A `).concat(ie,",").concat(ie,",0,0,").concat(D,",").concat(t,",").concat(n+h-C*ie," Z")}else j="M ".concat(t,",").concat(n," h ").concat(o," v ").concat(h," h ").concat(-o," Z");return j},oce=function(t,n){if(!t||!n)return!1;var o=t.x,h=t.y,y=n.x,w=n.y,C=n.width,a=n.height;if(Math.abs(C)>0&&Math.abs(a)>0){var D=Math.min(y,y+C),j=Math.max(y,y+C),B=Math.min(w,w+a),H=Math.max(w,w+a);return o>=D&&o<=j&&h>=B&&h<=H}return!1},ace={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jx=function(t){var n=NM(NM({},ace),t),o=ut.useRef(),h=ut.useState(-1),y=K1e(h,2),w=y[0],C=y[1];ut.useEffect(function(){if(o.current&&o.current.getTotalLength)try{var ve=o.current.getTotalLength();ve&&C(ve)}catch{}},[]);var a=n.x,D=n.y,j=n.width,B=n.height,H=n.radius,X=n.className,ie=n.animationEasing,Q=n.animationDuration,ne=n.animationBegin,te=n.isAnimationActive,K=n.isUpdateAnimationActive;if(a!==+a||D!==+D||j!==+j||B!==+B||j===0||B===0)return null;var se=tn("recharts-rectangle",X);return K?tt.createElement(Fl,{canBegin:w>0,from:{width:j,height:B,x:a,y:D},to:{width:j,height:B,x:a,y:D},duration:Q,animationEasing:ie,isActive:K},function(ve){var le=ve.width,fe=ve.height,Te=ve.x,Ee=ve.y;return tt.createElement(Fl,{canBegin:w>0,from:"0px ".concat(w===-1?1:w,"px"),to:"".concat(w,"px 0px"),attributeName:"strokeDasharray",begin:ne,duration:Q,isActive:te,easing:ie},tt.createElement("path",d9({},zr(n,!0),{className:se,d:jM(Te,Ee,le,fe,H),ref:o})))}):tt.createElement("path",d9({},zr(n,!0),{className:se,d:jM(a,D,j,B,H)}))},sce=["points","className","baseLinePoints","connectNulls"];function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C0.apply(this,arguments)}function lce(e,t){if(e==null)return{};var n=cce(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function cce(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function $M(e){return dce(e)||fce(e)||hce(e)||uce()}function uce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(e,t){if(e){if(typeof e=="string")return k_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k_(e,t)}}function fce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dce(e){if(Array.isArray(e))return k_(e)}function k_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var UM=function(t){return t&&t.x===+t.x&&t.y===+t.y},pce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(o){UM(o)?n[n.length-1].push(o):n[n.length-1].length>0&&n.push([])}),UM(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},s5=function(t,n){var o=pce(t);n&&(o=[o.reduce(function(y,w){return[].concat($M(y),$M(w))},[])]);var h=o.map(function(y){return y.reduce(function(w,C,a){return"".concat(w).concat(a===0?"M":"L").concat(C.x,",").concat(C.y)},"")}).join("");return o.length===1?"".concat(h,"Z"):h},mce=function(t,n,o){var h=s5(t,o);return"".concat(h.slice(-1)==="Z"?h.slice(0,-1):h,"L").concat(s5(n.reverse(),o).slice(1))},gce=function(t){var n=t.points,o=t.className,h=t.baseLinePoints,y=t.connectNulls,w=lce(t,sce);if(!n||!n.length)return null;var C=tn("recharts-polygon",o);if(h&&h.length){var a=w.stroke&&w.stroke!=="none",D=mce(n,h,y);return tt.createElement("g",{className:C},tt.createElement("path",C0({},zr(w,!0),{fill:D.slice(-1)==="Z"?w.fill:"none",stroke:"none",d:D})),a?tt.createElement("path",C0({},zr(w,!0),{fill:"none",d:s5(n,y)})):null,a?tt.createElement("path",C0({},zr(w,!0),{fill:"none",d:s5(h,y)})):null)}var j=s5(n,y);return tt.createElement("path",C0({},zr(w,!0),{fill:j.slice(-1)==="Z"?w.fill:"none",className:C,d:j}))};function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},L_.apply(this,arguments)}var Qx=function(t){var n=t.cx,o=t.cy,h=t.r,y=t.className,w=tn("recharts-dot",y);return n===+n&&o===+o&&h===+h?tt.createElement("circle",L_({},zr(t,!1),kp(t),{className:w,cx:n,cy:o,r:h})):null};function Q5(e){"@babel/helpers - typeof";return Q5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q5(e)}var yce=["x","y","top","left","width","height","className"];function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},z_.apply(this,arguments)}function VM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function _ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VM(Object(n),!0).forEach(function(o){vce(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function vce(e,t,n){return t=xce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xce(e){var t=bce(e,"string");return Q5(t)=="symbol"?t:t+""}function bce(e,t){if(Q5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Q5(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wce(e,t){if(e==null)return{};var n=Ace(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Ace(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var Tce=function(t,n,o,h,y,w){return"M".concat(t,",").concat(y,"v").concat(h,"M").concat(w,",").concat(n,"h").concat(o)},Sce=function(t){var n=t.x,o=n===void 0?0:n,h=t.y,y=h===void 0?0:h,w=t.top,C=w===void 0?0:w,a=t.left,D=a===void 0?0:a,j=t.width,B=j===void 0?0:j,H=t.height,X=H===void 0?0:H,ie=t.className,Q=wce(t,yce),ne=_ce({x:o,y,top:C,left:D,width:B,height:X},Q);return!rr(o)||!rr(y)||!rr(B)||!rr(X)||!rr(C)||!rr(D)?null:tt.createElement("path",z_({},zr(ne,!0),{className:tn("recharts-cross",ie),d:Tce(o,y,B,X,C,D)}))},Ece=E4,Pce=sk,Mce=gc;function Cce(e,t){return e&&e.length?Ece(e,Mce(t),Pce):void 0}var Ice=Cce;const Oce=Cn(Ice);var Rce=E4,Dce=gc,kce=lk;function Lce(e,t){return e&&e.length?Rce(e,Dce(t),kce):void 0}var zce=Lce;const Bce=Cn(zce);var Fce=["cx","cy","angle","ticks","axisLine"],Nce=["ticks","tick","angle","tickFormatter","stroke"];function s2(e){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s2(e)}function l5(){return l5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l5.apply(this,arguments)}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(n),!0).forEach(function(o){D4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function qM(e,t){if(e==null)return{};var n=jce(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function jce(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function $ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Kk(o.key),o)}}function Uce(e,t,n){return t&&WM(e.prototype,t),n&&WM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vce(e,t,n){return t=p9(t),Gce(e,Yk()?Reflect.construct(t,n||[],p9(e).constructor):t.apply(e,n))}function Gce(e,t){if(t&&(s2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qce(e)}function qce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yk=function(){return!!e})()}function p9(e){return p9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p9(e)}function Wce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B_(e,t)}function B_(e,t){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},B_(e,t)}function D4(e,t,n){return t=Kk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kk(e){var t=Hce(e,"string");return s2(t)=="symbol"?t:t+""}function Hce(e,t){if(s2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(s2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k4=function(e){function t(){return $ce(this,t),Vce(this,t,arguments)}return Wce(t,e),Uce(t,[{key:"getTickValueCoord",value:function(o){var h=o.coordinate,y=this.props,w=y.angle,C=y.cx,a=y.cy;return Wn(C,a,h,w)}},{key:"getTickTextAnchor",value:function(){var o=this.props.orientation,h;switch(o){case"left":h="end";break;case"right":h="start";break;default:h="middle";break}return h}},{key:"getViewBox",value:function(){var o=this.props,h=o.cx,y=o.cy,w=o.angle,C=o.ticks,a=Oce(C,function(j){return j.coordinate||0}),D=Bce(C,function(j){return j.coordinate||0});return{cx:h,cy:y,startAngle:w,endAngle:w,innerRadius:D.coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var o=this.props,h=o.cx,y=o.cy,w=o.angle,C=o.ticks,a=o.axisLine,D=qM(o,Fce),j=C.reduce(function(ie,Q){return[Math.min(ie[0],Q.coordinate),Math.max(ie[1],Q.coordinate)]},[1/0,-1/0]),B=Wn(h,y,j[0],w),H=Wn(h,y,j[1],w),X=mu(mu(mu({},zr(D,!1)),{},{fill:"none"},zr(a,!1)),{},{x1:B.x,y1:B.y,x2:H.x,y2:H.y});return tt.createElement("line",l5({className:"recharts-polar-radius-axis-line"},X))}},{key:"renderTicks",value:function(){var o=this,h=this.props,y=h.ticks,w=h.tick,C=h.angle,a=h.tickFormatter,D=h.stroke,j=qM(h,Nce),B=this.getTickTextAnchor(),H=zr(j,!1),X=zr(w,!1),ie=y.map(function(Q,ne){var te=o.getTickValueCoord(Q),K=mu(mu(mu(mu({textAnchor:B,transform:"rotate(".concat(90-C,", ").concat(te.x,", ").concat(te.y,")")},H),{},{stroke:"none",fill:D},X),{},{index:ne},te),{},{payload:Q});return tt.createElement(Pn,l5({className:tn("recharts-polar-radius-axis-tick",Lk(w)),key:"tick-".concat(Q.coordinate)},ju(o.props,Q,ne)),t.renderTickItem(w,K,a?a(Q.value,ne):Q.value))});return tt.createElement(Pn,{className:"recharts-polar-radius-axis-ticks"},ie)}},{key:"render",value:function(){var o=this.props,h=o.ticks,y=o.axisLine,w=o.tick;return!h||!h.length?null:tt.createElement(Pn,{className:tn("recharts-polar-radius-axis",this.props.className)},y&&this.renderAxisLine(),w&&this.renderTicks(),Vi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(o,h,y){var w;return tt.isValidElement(o)?w=tt.cloneElement(o,h):Xr(o)?w=o(h):w=tt.createElement(Uu,l5({},h,{className:"recharts-polar-radius-axis-tick-value"}),y),w}}])}(ut.PureComponent);D4(k4,"displayName","PolarRadiusAxis");D4(k4,"axisType","radiusAxis");D4(k4,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function l2(e){"@babel/helpers - typeof";return l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l2(e)}function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wu.apply(this,arguments)}function HM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(n),!0).forEach(function(o){L4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Zce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZM(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Qk(o.key),o)}}function Xce(e,t,n){return t&&ZM(e.prototype,t),n&&ZM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yce(e,t,n){return t=m9(t),Kce(e,Jk()?Reflect.construct(t,n||[],m9(e).constructor):t.apply(e,n))}function Kce(e,t){if(t&&(l2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jce(e)}function Jce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jk=function(){return!!e})()}function m9(e){return m9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m9(e)}function Qce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F_(e,t)}function F_(e,t){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},F_(e,t)}function L4(e,t,n){return t=Qk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qk(e){var t=eue(e,"string");return l2(t)=="symbol"?t:t+""}function eue(e,t){if(l2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(l2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tue=Math.PI/180,XM=1e-5,z4=function(e){function t(){return Zce(this,t),Yce(this,t,arguments)}return Qce(t,e),Xce(t,[{key:"getTickLineCoord",value:function(o){var h=this.props,y=h.cx,w=h.cy,C=h.radius,a=h.orientation,D=h.tickSize,j=D||8,B=Wn(y,w,C,o.coordinate),H=Wn(y,w,C+(a==="inner"?-1:1)*j,o.coordinate);return{x1:B.x,y1:B.y,x2:H.x,y2:H.y}}},{key:"getTickTextAnchor",value:function(o){var h=this.props.orientation,y=Math.cos(-o.coordinate*tue),w;return y>XM?w=h==="outer"?"start":"end":y<-XM?w=h==="outer"?"end":"start":w="middle",w}},{key:"renderAxisLine",value:function(){var o=this.props,h=o.cx,y=o.cy,w=o.radius,C=o.axisLine,a=o.axisLineType,D=gu(gu({},zr(this.props,!1)),{},{fill:"none"},zr(C,!1));if(a==="circle")return tt.createElement(Qx,wu({className:"recharts-polar-angle-axis-line"},D,{cx:h,cy:y,r:w}));var j=this.props.ticks,B=j.map(function(H){return Wn(h,y,w,H.coordinate)});return tt.createElement(gce,wu({className:"recharts-polar-angle-axis-line"},D,{points:B}))}},{key:"renderTicks",value:function(){var o=this,h=this.props,y=h.ticks,w=h.tick,C=h.tickLine,a=h.tickFormatter,D=h.stroke,j=zr(this.props,!1),B=zr(w,!1),H=gu(gu({},j),{},{fill:"none"},zr(C,!1)),X=y.map(function(ie,Q){var ne=o.getTickLineCoord(ie),te=o.getTickTextAnchor(ie),K=gu(gu(gu({textAnchor:te},j),{},{stroke:"none",fill:D},B),{},{index:Q,payload:ie,x:ne.x2,y:ne.y2});return tt.createElement(Pn,wu({className:tn("recharts-polar-angle-axis-tick",Lk(w)),key:"tick-".concat(ie.coordinate)},ju(o.props,ie,Q)),C&&tt.createElement("line",wu({className:"recharts-polar-angle-axis-tick-line"},H,ne)),w&&t.renderTickItem(w,K,a?a(ie.value,Q):ie.value))});return tt.createElement(Pn,{className:"recharts-polar-angle-axis-ticks"},X)}},{key:"render",value:function(){var o=this.props,h=o.ticks,y=o.radius,w=o.axisLine;return y<=0||!h||!h.length?null:tt.createElement(Pn,{className:tn("recharts-polar-angle-axis",this.props.className)},w&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(o,h,y){var w;return tt.isValidElement(o)?w=tt.cloneElement(o,h):Xr(o)?w=o(h):w=tt.createElement(Uu,wu({},h,{className:"recharts-polar-angle-axis-tick-value"}),y),w}}])}(ut.PureComponent);L4(z4,"displayName","PolarAngleAxis");L4(z4,"axisType","angleAxis");L4(z4,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var rue=iD,nue=rue(Object.getPrototypeOf,Object),iue=nue,oue=$l,aue=iue,sue=Ul,lue="[object Object]",cue=Function.prototype,uue=Object.prototype,eL=cue.toString,hue=uue.hasOwnProperty,fue=eL.call(Object);function due(e){if(!sue(e)||oue(e)!=lue)return!1;var t=aue(e);if(t===null)return!0;var n=hue.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&eL.call(n)==fue}var pue=due;const mue=Cn(pue);var gue=$l,yue=Ul,_ue="[object Boolean]";function vue(e){return e===!0||e===!1||yue(e)&&gue(e)==_ue}var xue=vue;const bue=Cn(xue);function e6(e){"@babel/helpers - typeof";return e6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e6(e)}function g9(){return g9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g9.apply(this,arguments)}function wue(e,t){return Eue(e)||Sue(e,t)||Tue(e,t)||Aue()}function Aue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tue(e,t){if(e){if(typeof e=="string")return YM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YM(e,t)}}function YM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Sue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function Eue(e){if(Array.isArray(e))return e}function KM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function JM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KM(Object(n),!0).forEach(function(o){Pue(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Pue(e,t,n){return t=Mue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mue(e){var t=Cue(e,"string");return e6(t)=="symbol"?t:t+""}function Cue(e,t){if(e6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(e6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QM=function(t,n,o,h,y){var w=o-h,C;return C="M ".concat(t,",").concat(n),C+="L ".concat(t+o,",").concat(n),C+="L ".concat(t+o-w/2,",").concat(n+y),C+="L ".concat(t+o-w/2-h,",").concat(n+y),C+="L ".concat(t,",").concat(n," Z"),C},Iue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Oue=function(t){var n=JM(JM({},Iue),t),o=ut.useRef(),h=ut.useState(-1),y=wue(h,2),w=y[0],C=y[1];ut.useEffect(function(){if(o.current&&o.current.getTotalLength)try{var se=o.current.getTotalLength();se&&C(se)}catch{}},[]);var a=n.x,D=n.y,j=n.upperWidth,B=n.lowerWidth,H=n.height,X=n.className,ie=n.animationEasing,Q=n.animationDuration,ne=n.animationBegin,te=n.isUpdateAnimationActive;if(a!==+a||D!==+D||j!==+j||B!==+B||H!==+H||j===0&&B===0||H===0)return null;var K=tn("recharts-trapezoid",X);return te?tt.createElement(Fl,{canBegin:w>0,from:{upperWidth:0,lowerWidth:0,height:H,x:a,y:D},to:{upperWidth:j,lowerWidth:B,height:H,x:a,y:D},duration:Q,animationEasing:ie,isActive:te},function(se){var ve=se.upperWidth,le=se.lowerWidth,fe=se.height,Te=se.x,Ee=se.y;return tt.createElement(Fl,{canBegin:w>0,from:"0px ".concat(w===-1?1:w,"px"),to:"".concat(w,"px 0px"),attributeName:"strokeDasharray",begin:ne,duration:Q,easing:ie},tt.createElement("path",g9({},zr(n,!0),{className:K,d:QM(Te,Ee,ve,le,fe),ref:o})))}):tt.createElement("g",null,tt.createElement("path",g9({},zr(n,!0),{className:K,d:QM(a,D,j,B,H)})))},Rue=["option","shapeType","propTransformer","activeClassName","isActive"];function t6(e){"@babel/helpers - typeof";return t6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t6(e)}function Due(e,t){if(e==null)return{};var n=kue(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function kue(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function y9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(o){Lue(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Lue(e,t,n){return t=zue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zue(e){var t=Bue(e,"string");return t6(t)=="symbol"?t:t+""}function Bue(e,t){if(t6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(t6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fue(e,t){return y9(y9({},t),e)}function Nue(e,t){return e==="symbols"}function tC(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return tt.createElement(Jx,n);case"trapezoid":return tt.createElement(Oue,n);case"sector":return tt.createElement(Fk,n);case"symbols":if(Nue(t))return tt.createElement(gx,n);break;default:return null}}function jue(e){return ut.isValidElement(e)?e.props:e}function tL(e){var t=e.option,n=e.shapeType,o=e.propTransformer,h=o===void 0?Fue:o,y=e.activeClassName,w=y===void 0?"recharts-active-shape":y,C=e.isActive,a=Due(e,Rue),D;if(ut.isValidElement(t))D=ut.cloneElement(t,y9(y9({},a),jue(t)));else if(Xr(t))D=t(a);else if(mue(t)&&!bue(t)){var j=h(t,a);D=tt.createElement(tC,{shapeType:n,elementProps:j})}else{var B=a;D=tt.createElement(tC,{shapeType:n,elementProps:B})}return C?tt.createElement(Pn,{className:w},D):D}function B4(e,t){return t!=null&&"trapezoids"in e.props}function F4(e,t){return t!=null&&"sectors"in e.props}function r6(e,t){return t!=null&&"points"in e.props}function $ue(e,t){var n,o,h=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,y=e.y===(t==null||(o=t.labelViewBox)===null||o===void 0?void 0:o.y)||e.y===t.y;return h&&y}function Uue(e,t){var n=e.endAngle===t.endAngle,o=e.startAngle===t.startAngle;return n&&o}function Vue(e,t){var n=e.x===t.x,o=e.y===t.y,h=e.z===t.z;return n&&o&&h}function Gue(e,t){var n;return B4(e,t)?n=$ue:F4(e,t)?n=Uue:r6(e,t)&&(n=Vue),n}function que(e,t){var n;return B4(e,t)?n="trapezoids":F4(e,t)?n="sectors":r6(e,t)&&(n="points"),n}function Wue(e,t){if(B4(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(F4(e,t)){var o;return(o=t.tooltipPayload)===null||o===void 0||(o=o[0])===null||o===void 0||(o=o.payload)===null||o===void 0?void 0:o.payload}return r6(e,t)?t.payload:{}}function Hue(e){var t=e.activeTooltipItem,n=e.graphicalItem,o=e.itemData,h=que(n,t),y=Wue(n,t),w=o.filter(function(a,D){var j=C4(y,a),B=n.props[h].filter(function(ie){var Q=Gue(n,t);return Q(ie,t)}),H=n.props[h].indexOf(B[B.length-1]),X=D===H;return j&&X}),C=o.indexOf(w[w.length-1]);return C}var ip;function c2(e){"@babel/helpers - typeof";return c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c2(e)}function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},I0.apply(this,arguments)}function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(o){za(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Zue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,nL(o.key),o)}}function Xue(e,t,n){return t&&nC(e.prototype,t),n&&nC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yue(e,t,n){return t=_9(t),Kue(e,rL()?Reflect.construct(t,n||[],_9(e).constructor):t.apply(e,n))}function Kue(e,t){if(t&&(c2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jue(e)}function Jue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rL=function(){return!!e})()}function _9(e){return _9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_9(e)}function Que(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}function N_(e,t){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},N_(e,t)}function za(e,t,n){return t=nL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nL(e){var t=e7e(e,"string");return c2(t)=="symbol"?t:t+""}function e7e(e,t){if(c2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(c2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ga=function(e){function t(n){var o;return Zue(this,t),o=Yue(this,t,[n]),za(o,"pieRef",null),za(o,"sectorRefs",[]),za(o,"id",v6("recharts-pie-")),za(o,"handleAnimationEnd",function(){var h=o.props.onAnimationEnd;o.setState({isAnimationFinished:!0}),Xr(h)&&h()}),za(o,"handleAnimationStart",function(){var h=o.props.onAnimationStart;o.setState({isAnimationFinished:!1}),Xr(h)&&h()}),o.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},o}return Que(t,e),Xue(t,[{key:"isActiveIndex",value:function(o){var h=this.props.activeIndex;return Array.isArray(h)?h.indexOf(o)!==-1:o===h}},{key:"hasActiveIndex",value:function(){var o=this.props.activeIndex;return Array.isArray(o)?o.length!==0:o||o===0}},{key:"renderLabels",value:function(o){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var y=this.props,w=y.label,C=y.labelLine,a=y.dataKey,D=y.valueKey,j=zr(this.props,!1),B=zr(w,!1),H=zr(C,!1),X=w&&w.offsetRadius||20,ie=o.map(function(Q,ne){var te=(Q.startAngle+Q.endAngle)/2,K=Wn(Q.cx,Q.cy,Q.outerRadius+X,te),se=Vn(Vn(Vn(Vn({},j),Q),{},{stroke:"none"},B),{},{index:ne,textAnchor:t.getTextAnchor(K.x,Q.cx)},K),ve=Vn(Vn(Vn(Vn({},j),Q),{},{fill:"none",stroke:Q.fill},H),{},{index:ne,points:[Wn(Q.cx,Q.cy,Q.outerRadius,te),K]}),le=a;return an(a)&&an(D)?le="value":an(a)&&(le=D),tt.createElement(Pn,{key:"label-".concat(Q.startAngle,"-").concat(Q.endAngle,"-").concat(Q.midAngle,"-").concat(ne)},C&&t.renderLabelLineItem(C,ve,"line"),t.renderLabelItem(w,se,go(Q,le)))});return tt.createElement(Pn,{className:"recharts-pie-labels"},ie)}},{key:"renderSectorsStatically",value:function(o){var h=this,y=this.props,w=y.activeShape,C=y.blendStroke,a=y.inactiveShape;return o.map(function(D,j){if((D==null?void 0:D.startAngle)===0&&(D==null?void 0:D.endAngle)===0&&o.length!==1)return null;var B=h.isActiveIndex(j),H=a&&h.hasActiveIndex()?a:null,X=B?w:H,ie=Vn(Vn({},D),{},{stroke:C?D.fill:D.stroke,tabIndex:-1});return tt.createElement(Pn,I0({ref:function(ne){ne&&!h.sectorRefs.includes(ne)&&h.sectorRefs.push(ne)},tabIndex:-1,className:"recharts-pie-sector"},ju(h.props,D,j),{key:"sector-".concat(D==null?void 0:D.startAngle,"-").concat(D==null?void 0:D.endAngle,"-").concat(D.midAngle,"-").concat(j)}),tt.createElement(tL,I0({option:X,isActive:B,shapeType:"sector"},ie)))})}},{key:"renderSectorsWithAnimation",value:function(){var o=this,h=this.props,y=h.sectors,w=h.isAnimationActive,C=h.animationBegin,a=h.animationDuration,D=h.animationEasing,j=h.animationId,B=this.state,H=B.prevSectors,X=B.prevIsAnimationActive;return tt.createElement(Fl,{begin:C,duration:a,isActive:w,easing:D,from:{t:0},to:{t:1},key:"pie-".concat(j,"-").concat(X),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(ie){var Q=ie.t,ne=[],te=y&&y[0],K=te.startAngle;return y.forEach(function(se,ve){var le=H&&H[ve],fe=ve>0?pa(se,"paddingAngle",0):0;if(le){var Te=q1(le.endAngle-le.startAngle,se.endAngle-se.startAngle),Ee=Vn(Vn({},se),{},{startAngle:K+fe,endAngle:K+Te(Q)+fe});ne.push(Ee),K=Ee.endAngle}else{var Ze=se.endAngle,st=se.startAngle,We=q1(0,Ze-st),Xe=We(Q),St=Vn(Vn({},se),{},{startAngle:K+fe,endAngle:K+Xe+fe});ne.push(St),K=St.endAngle}}),tt.createElement(Pn,null,o.renderSectorsStatically(ne))})}},{key:"attachKeyboardHandlers",value:function(o){var h=this;o.onkeydown=function(y){if(!y.altKey)switch(y.key){case"ArrowLeft":{var w=++h.state.sectorToFocus%h.sectorRefs.length;h.sectorRefs[w].focus(),h.setState({sectorToFocus:w});break}case"ArrowRight":{var C=--h.state.sectorToFocus<0?h.sectorRefs.length-1:h.state.sectorToFocus%h.sectorRefs.length;h.sectorRefs[C].focus(),h.setState({sectorToFocus:C});break}case"Escape":{h.sectorRefs[h.state.sectorToFocus].blur(),h.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var o=this.props,h=o.sectors,y=o.isAnimationActive,w=this.state.prevSectors;return y&&h&&h.length&&(!w||!C4(w,h))?this.renderSectorsWithAnimation():this.renderSectorsStatically(h)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var o=this,h=this.props,y=h.hide,w=h.sectors,C=h.className,a=h.label,D=h.cx,j=h.cy,B=h.innerRadius,H=h.outerRadius,X=h.isAnimationActive,ie=this.state.isAnimationFinished;if(y||!w||!w.length||!rr(D)||!rr(j)||!rr(B)||!rr(H))return null;var Q=tn("recharts-pie",C);return tt.createElement(Pn,{tabIndex:this.props.rootTabIndex,className:Q,ref:function(te){o.pieRef=te}},this.renderSectors(),a&&this.renderLabels(w),Vi.renderCallByParent(this.props,null,!1),(!X||ie)&&Hs.renderCallByParent(this.props,w,!1))}}],[{key:"getDerivedStateFromProps",value:function(o,h){return h.prevIsAnimationActive!==o.isAnimationActive?{prevIsAnimationActive:o.isAnimationActive,prevAnimationId:o.animationId,curSectors:o.sectors,prevSectors:[],isAnimationFinished:!0}:o.isAnimationActive&&o.animationId!==h.prevAnimationId?{prevAnimationId:o.animationId,curSectors:o.sectors,prevSectors:h.curSectors,isAnimationFinished:!0}:o.sectors!==h.curSectors?{curSectors:o.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(o,h){return o>h?"start":o<h?"end":"middle"}},{key:"renderLabelLineItem",value:function(o,h,y){if(tt.isValidElement(o))return tt.cloneElement(o,h);if(Xr(o))return o(h);var w=tn("recharts-pie-label-line",typeof o!="boolean"?o.className:"");return tt.createElement(T_,I0({},h,{key:y,type:"linear",className:w}))}},{key:"renderLabelItem",value:function(o,h,y){if(tt.isValidElement(o))return tt.cloneElement(o,h);var w=y;if(Xr(o)&&(w=o(h),tt.isValidElement(w)))return w;var C=tn("recharts-pie-label-text",typeof o!="boolean"&&!Xr(o)?o.className:"");return tt.createElement(Uu,I0({},h,{alignmentBaseline:"middle",className:C}),w)}}])}(ut.PureComponent);ip=Ga;za(Ga,"displayName","Pie");za(Ga,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Cl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});za(Ga,"parseDeltaAngle",function(e,t){var n=Io(t-e),o=Math.min(Math.abs(t-e),360);return n*o});za(Ga,"getRealPieData",function(e){var t=e.data,n=e.children,o=zr(e,!1),h=ja(n,$u);return t&&t.length?t.map(function(y,w){return Vn(Vn(Vn({payload:y},o),y),h&&h[w]&&h[w].props)}):h&&h.length?h.map(function(y){return Vn(Vn({},o),y.props)}):[]});za(Ga,"parseCoordinateOfPie",function(e,t){var n=t.top,o=t.left,h=t.width,y=t.height,w=kk(h,y),C=o+Oo(e.cx,h,h/2),a=n+Oo(e.cy,y,y/2),D=Oo(e.innerRadius,w,0),j=Oo(e.outerRadius,w,w*.8),B=e.maxRadius||Math.sqrt(h*h+y*y)/2;return{cx:C,cy:a,innerRadius:D,outerRadius:j,maxRadius:B}});za(Ga,"getComposedData",function(e){var t=e.item,n=e.offset,o=t.type.defaultProps!==void 0?Vn(Vn({},t.type.defaultProps),t.props):t.props,h=ip.getRealPieData(o);if(!h||!h.length)return null;var y=o.cornerRadius,w=o.startAngle,C=o.endAngle,a=o.paddingAngle,D=o.dataKey,j=o.nameKey,B=o.valueKey,H=o.tooltipType,X=Math.abs(o.minAngle),ie=ip.parseCoordinateOfPie(o,n),Q=ip.parseDeltaAngle(w,C),ne=Math.abs(Q),te=D;an(D)&&an(B)?(Ml(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),te="value"):an(D)&&(Ml(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),te=B);var K=h.filter(function(Ee){return go(Ee,te,0)!==0}).length,se=(ne>=360?K:K-1)*a,ve=ne-K*X-se,le=h.reduce(function(Ee,Ze){var st=go(Ze,te,0);return Ee+(rr(st)?st:0)},0),fe;if(le>0){var Te;fe=h.map(function(Ee,Ze){var st=go(Ee,te,0),We=go(Ee,j,Ze),Xe=(rr(st)?st:0)/le,St;Ze?St=Te.endAngle+Io(Q)*a*(st!==0?1:0):St=w;var Mt=St+Io(Q)*((st!==0?X:0)+Xe*ve),Pt=(St+Mt)/2,ht=(ie.innerRadius+ie.outerRadius)/2,kt=[{name:We,value:st,payload:Ee,dataKey:te,type:H}],mt=Wn(ie.cx,ie.cy,ht,Pt);return Te=Vn(Vn(Vn({percent:Xe,cornerRadius:y,name:We,tooltipPayload:kt,midAngle:Pt,middleRadius:ht,tooltipPosition:mt},Ee),ie),{},{value:go(Ee,te),startAngle:St,endAngle:Mt,payload:Ee,paddingAngle:Io(Q)*a}),Te})}return Vn(Vn({},ie),{},{sectors:fe,data:h})});var t7e=Math.ceil,r7e=Math.max;function n7e(e,t,n,o){for(var h=-1,y=r7e(t7e((t-e)/(n||1)),0),w=Array(y);y--;)w[o?y:++h]=e,e+=n;return w}var i7e=n7e,o7e=wD,iC=1/0,a7e=17976931348623157e292;function s7e(e){if(!e)return e===0?e:0;if(e=o7e(e),e===iC||e===-iC){var t=e<0?-1:1;return t*a7e}return e===e?e:0}var l7e=s7e,c7e=i7e,u7e=v4,Ig=l7e;function h7e(e){return function(t,n,o){return o&&typeof o!="number"&&u7e(t,n,o)&&(n=o=void 0),t=Ig(t),n===void 0?(n=t,t=0):n=Ig(n),o=o===void 0?t<n?1:-1:Ig(o),c7e(t,n,o,e)}}var f7e=h7e,d7e=f7e,p7e=d7e(),m7e=p7e;const v9=Cn(m7e);function n6(e){"@babel/helpers - typeof";return n6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n6(e)}function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function aC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(o){iL(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function iL(e,t,n){return t=g7e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g7e(e){var t=y7e(e,"string");return n6(t)=="symbol"?t:t+""}function y7e(e,t){if(n6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(n6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _7e=["Webkit","Moz","O","ms"],v7e=function(t,n){var o=t.replace(/(\w)/,function(y){return y.toUpperCase()}),h=_7e.reduce(function(y,w){return aC(aC({},y),{},iL({},w+o,n))},{});return h[t]=n,h};function u2(e){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u2(e)}function x9(){return x9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x9.apply(this,arguments)}function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Og(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(o){la(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function x7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,aL(o.key),o)}}function b7e(e,t,n){return t&&lC(e.prototype,t),n&&lC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w7e(e,t,n){return t=b9(t),A7e(e,oL()?Reflect.construct(t,n||[],b9(e).constructor):t.apply(e,n))}function A7e(e,t){if(t&&(u2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T7e(e)}function T7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oL=function(){return!!e})()}function b9(e){return b9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},b9(e)}function S7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j_(e,t)}function j_(e,t){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},j_(e,t)}function la(e,t,n){return t=aL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aL(e){var t=E7e(e,"string");return u2(t)=="symbol"?t:t+""}function E7e(e,t){if(u2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(u2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P7e=function(t){var n=t.data,o=t.startIndex,h=t.endIndex,y=t.x,w=t.width,C=t.travellerWidth;if(!n||!n.length)return{};var a=n.length,D=i5().domain(v9(0,a)).range([y,y+w-C]),j=D.domain().map(function(B){return D(B)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:D(o),endX:D(h),scale:D,scaleValues:j}},cC=function(t){return t.changedTouches&&!!t.changedTouches.length},h2=function(e){function t(n){var o;return x7e(this,t),o=w7e(this,t,[n]),la(o,"handleDrag",function(h){o.leaveTimer&&(clearTimeout(o.leaveTimer),o.leaveTimer=null),o.state.isTravellerMoving?o.handleTravellerMove(h):o.state.isSlideMoving&&o.handleSlideDrag(h)}),la(o,"handleTouchMove",function(h){h.changedTouches!=null&&h.changedTouches.length>0&&o.handleDrag(h.changedTouches[0])}),la(o,"handleDragEnd",function(){o.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var h=o.props,y=h.endIndex,w=h.onDragEnd,C=h.startIndex;w==null||w({endIndex:y,startIndex:C})}),o.detachDragEndListener()}),la(o,"handleLeaveWrapper",function(){(o.state.isTravellerMoving||o.state.isSlideMoving)&&(o.leaveTimer=window.setTimeout(o.handleDragEnd,o.props.leaveTimeOut))}),la(o,"handleEnterSlideOrTraveller",function(){o.setState({isTextActive:!0})}),la(o,"handleLeaveSlideOrTraveller",function(){o.setState({isTextActive:!1})}),la(o,"handleSlideDragStart",function(h){var y=cC(h)?h.changedTouches[0]:h;o.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:y.pageX}),o.attachDragEndListener()}),o.travellerDragStartHandlers={startX:o.handleTravellerDragStart.bind(o,"startX"),endX:o.handleTravellerDragStart.bind(o,"endX")},o.state={},o}return S7e(t,e),b7e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(o){var h=o.startX,y=o.endX,w=this.state.scaleValues,C=this.props,a=C.gap,D=C.data,j=D.length-1,B=Math.min(h,y),H=Math.max(h,y),X=t.getIndexInRange(w,B),ie=t.getIndexInRange(w,H);return{startIndex:X-X%a,endIndex:ie===j?j:ie-ie%a}}},{key:"getTextOfTick",value:function(o){var h=this.props,y=h.data,w=h.tickFormatter,C=h.dataKey,a=go(y[o],C,o);return Xr(w)?w(a,o):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(o){var h=this.state,y=h.slideMoveStartX,w=h.startX,C=h.endX,a=this.props,D=a.x,j=a.width,B=a.travellerWidth,H=a.startIndex,X=a.endIndex,ie=a.onChange,Q=o.pageX-y;Q>0?Q=Math.min(Q,D+j-B-C,D+j-B-w):Q<0&&(Q=Math.max(Q,D-w,D-C));var ne=this.getIndex({startX:w+Q,endX:C+Q});(ne.startIndex!==H||ne.endIndex!==X)&&ie&&ie(ne),this.setState({startX:w+Q,endX:C+Q,slideMoveStartX:o.pageX})}},{key:"handleTravellerDragStart",value:function(o,h){var y=cC(h)?h.changedTouches[0]:h;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:o,brushMoveStartX:y.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(o){var h=this.state,y=h.brushMoveStartX,w=h.movingTravellerId,C=h.endX,a=h.startX,D=this.state[w],j=this.props,B=j.x,H=j.width,X=j.travellerWidth,ie=j.onChange,Q=j.gap,ne=j.data,te={startX:this.state.startX,endX:this.state.endX},K=o.pageX-y;K>0?K=Math.min(K,B+H-X-D):K<0&&(K=Math.max(K,B-D)),te[w]=D+K;var se=this.getIndex(te),ve=se.startIndex,le=se.endIndex,fe=function(){var Ee=ne.length-1;return w==="startX"&&(C>a?ve%Q===0:le%Q===0)||C<a&&le===Ee||w==="endX"&&(C>a?le%Q===0:ve%Q===0)||C>a&&le===Ee};this.setState(la(la({},w,D+K),"brushMoveStartX",o.pageX),function(){ie&&fe()&&ie(se)})}},{key:"handleTravellerMoveKeyboard",value:function(o,h){var y=this,w=this.state,C=w.scaleValues,a=w.startX,D=w.endX,j=this.state[h],B=C.indexOf(j);if(B!==-1){var H=B+o;if(!(H===-1||H>=C.length)){var X=C[H];h==="startX"&&X>=D||h==="endX"&&X<=a||this.setState(la({},h,X),function(){y.props.onChange(y.getIndex({startX:y.state.startX,endX:y.state.endX}))})}}}},{key:"renderBackground",value:function(){var o=this.props,h=o.x,y=o.y,w=o.width,C=o.height,a=o.fill,D=o.stroke;return tt.createElement("rect",{stroke:D,fill:a,x:h,y,width:w,height:C})}},{key:"renderPanorama",value:function(){var o=this.props,h=o.x,y=o.y,w=o.width,C=o.height,a=o.data,D=o.children,j=o.padding,B=ut.Children.only(D);return B?tt.cloneElement(B,{x:h,y,width:w,height:C,margin:j,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(o,h){var y,w,C=this,a=this.props,D=a.y,j=a.travellerWidth,B=a.height,H=a.traveller,X=a.ariaLabel,ie=a.data,Q=a.startIndex,ne=a.endIndex,te=Math.max(o,this.props.x),K=Og(Og({},zr(this.props,!1)),{},{x:te,y:D,width:j,height:B}),se=X||"Min value: ".concat((y=ie[Q])===null||y===void 0?void 0:y.name,", Max value: ").concat((w=ie[ne])===null||w===void 0?void 0:w.name);return tt.createElement(Pn,{tabIndex:0,role:"slider","aria-label":se,"aria-valuenow":o,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[h],onTouchStart:this.travellerDragStartHandlers[h],onKeyDown:function(le){["ArrowLeft","ArrowRight"].includes(le.key)&&(le.preventDefault(),le.stopPropagation(),C.handleTravellerMoveKeyboard(le.key==="ArrowRight"?1:-1,h))},onFocus:function(){C.setState({isTravellerFocused:!0})},onBlur:function(){C.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(H,K))}},{key:"renderSlide",value:function(o,h){var y=this.props,w=y.y,C=y.height,a=y.stroke,D=y.travellerWidth,j=Math.min(o,h)+D,B=Math.max(Math.abs(h-o)-D,0);return tt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:j,y:w,width:B,height:C})}},{key:"renderText",value:function(){var o=this.props,h=o.startIndex,y=o.endIndex,w=o.y,C=o.height,a=o.travellerWidth,D=o.stroke,j=this.state,B=j.startX,H=j.endX,X=5,ie={pointerEvents:"none",fill:D};return tt.createElement(Pn,{className:"recharts-brush-texts"},tt.createElement(Uu,x9({textAnchor:"end",verticalAnchor:"middle",x:Math.min(B,H)-X,y:w+C/2},ie),this.getTextOfTick(h)),tt.createElement(Uu,x9({textAnchor:"start",verticalAnchor:"middle",x:Math.max(B,H)+a+X,y:w+C/2},ie),this.getTextOfTick(y)))}},{key:"render",value:function(){var o=this.props,h=o.data,y=o.className,w=o.children,C=o.x,a=o.y,D=o.width,j=o.height,B=o.alwaysShowText,H=this.state,X=H.startX,ie=H.endX,Q=H.isTextActive,ne=H.isSlideMoving,te=H.isTravellerMoving,K=H.isTravellerFocused;if(!h||!h.length||!rr(C)||!rr(a)||!rr(D)||!rr(j)||D<=0||j<=0)return null;var se=tn("recharts-brush",y),ve=tt.Children.count(w)===1,le=v7e("userSelect","none");return tt.createElement(Pn,{className:se,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:le},this.renderBackground(),ve&&this.renderPanorama(),this.renderSlide(X,ie),this.renderTravellerLayer(X,"startX"),this.renderTravellerLayer(ie,"endX"),(Q||ne||te||K||B)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(o){var h=o.x,y=o.y,w=o.width,C=o.height,a=o.stroke,D=Math.floor(y+C/2)-1;return tt.createElement(tt.Fragment,null,tt.createElement("rect",{x:h,y,width:w,height:C,fill:a,stroke:"none"}),tt.createElement("line",{x1:h+1,y1:D,x2:h+w-1,y2:D,fill:"none",stroke:"#fff"}),tt.createElement("line",{x1:h+1,y1:D+2,x2:h+w-1,y2:D+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(o,h){var y;return tt.isValidElement(o)?y=tt.cloneElement(o,h):Xr(o)?y=o(h):y=t.renderDefaultTraveller(h),y}},{key:"getDerivedStateFromProps",value:function(o,h){var y=o.data,w=o.width,C=o.x,a=o.travellerWidth,D=o.updateId,j=o.startIndex,B=o.endIndex;if(y!==h.prevData||D!==h.prevUpdateId)return Og({prevData:y,prevTravellerWidth:a,prevUpdateId:D,prevX:C,prevWidth:w},y&&y.length?P7e({data:y,width:w,x:C,travellerWidth:a,startIndex:j,endIndex:B}):{scale:null,scaleValues:null});if(h.scale&&(w!==h.prevWidth||C!==h.prevX||a!==h.prevTravellerWidth)){h.scale.range([C,C+w-a]);var H=h.scale.domain().map(function(X){return h.scale(X)});return{prevData:y,prevTravellerWidth:a,prevUpdateId:D,prevX:C,prevWidth:w,startX:h.scale(o.startIndex),endX:h.scale(o.endIndex),scaleValues:H}}return null}},{key:"getIndexInRange",value:function(o,h){for(var y=o.length,w=0,C=y-1;C-w>1;){var a=Math.floor((w+C)/2);o[a]>h?C=a:w=a}return h>=o[C]?C:w}}])}(ut.PureComponent);la(h2,"displayName","Brush");la(h2,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var M7e=Tx;function C7e(e,t){var n;return M7e(e,function(o,h,y){return n=t(o,h,y),!n}),!!n}var I7e=C7e,O7e=YR,R7e=gc,D7e=I7e,k7e=Yo,L7e=v4;function z7e(e,t,n){var o=k7e(e)?O7e:D7e;return n&&L7e(e,t,n)&&(t=void 0),o(e,R7e(t))}var B7e=z7e;const F7e=Cn(B7e);var Zs=function(t,n){var o=t.alwaysShow,h=t.ifOverflow;return o&&(h="extendDomain"),h===n},uC=yD;function N7e(e,t,n){t=="__proto__"&&uC?uC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var j7e=N7e,$7e=j7e,U7e=mD,V7e=gc;function G7e(e,t){var n={};return t=V7e(t),U7e(e,function(o,h,y){$7e(n,h,t(o,h,y))}),n}var q7e=G7e;const W7e=Cn(q7e);function H7e(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}var Z7e=H7e,X7e=Tx;function Y7e(e,t){var n=!0;return X7e(e,function(o,h,y){return n=!!t(o,h,y),n}),n}var K7e=Y7e,J7e=Z7e,Q7e=K7e,e0e=gc,t0e=Yo,r0e=v4;function n0e(e,t,n){var o=t0e(e)?J7e:Q7e;return n&&r0e(e,t,n)&&(t=void 0),o(e,e0e(t))}var i0e=n0e;const o0e=Cn(i0e);var a0e=["x","y"];function i6(e){"@babel/helpers - typeof";return i6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i6(e)}function $_(){return $_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},$_.apply(this,arguments)}function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(o){s0e(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function s0e(e,t,n){return t=l0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l0e(e){var t=c0e(e,"string");return i6(t)=="symbol"?t:t+""}function c0e(e,t){if(i6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(i6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u0e(e,t){if(e==null)return{};var n=h0e(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function h0e(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function f0e(e,t){var n=e.x,o=e.y,h=u0e(e,a0e),y="".concat(n),w=parseInt(y,10),C="".concat(o),a=parseInt(C,10),D="".concat(t.height||h.height),j=parseInt(D,10),B="".concat(t.width||h.width),H=parseInt(B,10);return $h($h($h($h($h({},t),h),w?{x:w}:{}),a?{y:a}:{}),{},{height:j,width:H,name:t.name,radius:t.radius})}function fC(e){return tt.createElement(tL,$_({shapeType:"rectangle",propTransformer:f0e,activeClassName:"recharts-active-bar"},e))}var d0e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(o,h){if(typeof t=="number")return t;var y=typeof o=="number";return y?t(o,h):(y||Gu(),n)}},p0e=["value","background"],sL;function f2(e){"@babel/helpers - typeof";return f2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f2(e)}function m0e(e,t){if(e==null)return{};var n=g0e(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function g0e(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function w9(){return w9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w9.apply(this,arguments)}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(o){J1(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function y0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,cL(o.key),o)}}function _0e(e,t,n){return t&&pC(e.prototype,t),n&&pC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v0e(e,t,n){return t=A9(t),x0e(e,lL()?Reflect.construct(t,n||[],A9(e).constructor):t.apply(e,n))}function x0e(e,t){if(t&&(f2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b0e(e)}function b0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lL=function(){return!!e})()}function A9(e){return A9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A9(e)}function w0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U_(e,t)}function U_(e,t){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},U_(e,t)}function J1(e,t,n){return t=cL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cL(e){var t=A0e(e,"string");return f2(t)=="symbol"?t:t+""}function A0e(e,t){if(f2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(f2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xc=function(e){function t(){var n;y0e(this,t);for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];return n=v0e(this,t,[].concat(h)),J1(n,"state",{isAnimationFinished:!1}),J1(n,"id",v6("recharts-bar-")),J1(n,"handleAnimationEnd",function(){var w=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),w&&w()}),J1(n,"handleAnimationStart",function(){var w=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),w&&w()}),n}return w0e(t,e),_0e(t,[{key:"renderRectanglesStatically",value:function(o){var h=this,y=this.props,w=y.shape,C=y.dataKey,a=y.activeIndex,D=y.activeBar,j=zr(this.props,!1);return o&&o.map(function(B,H){var X=H===a,ie=X?D:w,Q=Si(Si(Si({},j),B),{},{isActive:X,option:ie,index:H,dataKey:C,onAnimationStart:h.handleAnimationStart,onAnimationEnd:h.handleAnimationEnd});return tt.createElement(Pn,w9({className:"recharts-bar-rectangle"},ju(h.props,B,H),{key:"rectangle-".concat(B==null?void 0:B.x,"-").concat(B==null?void 0:B.y,"-").concat(B==null?void 0:B.value)}),tt.createElement(fC,Q))})}},{key:"renderRectanglesWithAnimation",value:function(){var o=this,h=this.props,y=h.data,w=h.layout,C=h.isAnimationActive,a=h.animationBegin,D=h.animationDuration,j=h.animationEasing,B=h.animationId,H=this.state.prevData;return tt.createElement(Fl,{begin:a,duration:D,isActive:C,easing:j,from:{t:0},to:{t:1},key:"bar-".concat(B),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(X){var ie=X.t,Q=y.map(function(ne,te){var K=H&&H[te];if(K){var se=q1(K.x,ne.x),ve=q1(K.y,ne.y),le=q1(K.width,ne.width),fe=q1(K.height,ne.height);return Si(Si({},ne),{},{x:se(ie),y:ve(ie),width:le(ie),height:fe(ie)})}if(w==="horizontal"){var Te=q1(0,ne.height),Ee=Te(ie);return Si(Si({},ne),{},{y:ne.y+ne.height-Ee,height:Ee})}var Ze=q1(0,ne.width),st=Ze(ie);return Si(Si({},ne),{},{width:st})});return tt.createElement(Pn,null,o.renderRectanglesStatically(Q))})}},{key:"renderRectangles",value:function(){var o=this.props,h=o.data,y=o.isAnimationActive,w=this.state.prevData;return y&&h&&h.length&&(!w||!C4(w,h))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(h)}},{key:"renderBackground",value:function(){var o=this,h=this.props,y=h.data,w=h.dataKey,C=h.activeIndex,a=zr(this.props.background,!1);return y.map(function(D,j){D.value;var B=D.background,H=m0e(D,p0e);if(!B)return null;var X=Si(Si(Si(Si(Si({},H),{},{fill:"#eee"},B),a),ju(o.props,D,j)),{},{onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd,dataKey:w,index:j,className:"recharts-bar-background-rectangle"});return tt.createElement(fC,w9({key:"background-bar-".concat(j),option:o.props.background,isActive:j===C},X))})}},{key:"renderErrorBar",value:function(o,h){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var y=this.props,w=y.data,C=y.xAxis,a=y.yAxis,D=y.layout,j=y.children,B=ja(j,R4);if(!B)return null;var H=D==="vertical"?w[0].height/2:w[0].width/2,X=function(ne,te){var K=Array.isArray(ne.value)?ne.value[1]:ne.value;return{x:ne.x,y:ne.y,value:K,errorVal:go(ne,te)}},ie={clipPath:o?"url(#clipPath-".concat(h,")"):null};return tt.createElement(Pn,ie,B.map(function(Q){return tt.cloneElement(Q,{key:"error-bar-".concat(h,"-").concat(Q.props.dataKey),data:w,xAxis:C,yAxis:a,layout:D,offset:H,dataPointFormatter:X})}))}},{key:"render",value:function(){var o=this.props,h=o.hide,y=o.data,w=o.className,C=o.xAxis,a=o.yAxis,D=o.left,j=o.top,B=o.width,H=o.height,X=o.isAnimationActive,ie=o.background,Q=o.id;if(h||!y||!y.length)return null;var ne=this.state.isAnimationFinished,te=tn("recharts-bar",w),K=C&&C.allowDataOverflow,se=a&&a.allowDataOverflow,ve=K||se,le=an(Q)?this.id:Q;return tt.createElement(Pn,{className:te},K||se?tt.createElement("defs",null,tt.createElement("clipPath",{id:"clipPath-".concat(le)},tt.createElement("rect",{x:K?D:D-B/2,y:se?j:j-H/2,width:K?B:B*2,height:se?H:H*2}))):null,tt.createElement(Pn,{className:"recharts-bar-rectangles",clipPath:ve?"url(#clipPath-".concat(le,")"):null},ie?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ve,le),(!X||ne)&&Hs.renderCallByParent(this.props,y))}}],[{key:"getDerivedStateFromProps",value:function(o,h){return o.animationId!==h.prevAnimationId?{prevAnimationId:o.animationId,curData:o.data,prevData:h.curData}:o.data!==h.curData?{curData:o.data}:null}}])}(ut.PureComponent);sL=xc;J1(xc,"displayName","Bar");J1(xc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Cl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});J1(xc,"getComposedData",function(e){var t=e.props,n=e.item,o=e.barPosition,h=e.bandSize,y=e.xAxis,w=e.yAxis,C=e.xAxisTicks,a=e.yAxisTicks,D=e.stackedData,j=e.dataStartIndex,B=e.displayedData,H=e.offset,X=hse(o,n);if(!X)return null;var ie=t.layout,Q=n.type.defaultProps,ne=Q!==void 0?Si(Si({},Q),n.props):n.props,te=ne.dataKey,K=ne.children,se=ne.minPointSize,ve=ie==="horizontal"?w:y,le=D?ve.scale.domain():null,fe=_se({numericAxis:ve}),Te=ja(K,$u),Ee=B.map(function(Ze,st){var We,Xe,St,Mt,Pt,ht;D?We=fse(D[j+st],le):(We=go(Ze,te),Array.isArray(We)||(We=[fe,We]));var kt=d0e(se,sL.defaultProps.minPointSize)(We[1],st);if(ie==="horizontal"){var mt,Ct=[w.scale(We[0]),w.scale(We[1])],_t=Ct[0],Qt=Ct[1];Xe=nM({axis:y,ticks:C,bandSize:h,offset:X.offset,entry:Ze,index:st}),St=(mt=Qt??_t)!==null&&mt!==void 0?mt:void 0,Mt=X.size;var qt=_t-Qt;if(Pt=Number.isNaN(qt)?0:qt,ht={x:Xe,y:w.y,width:Mt,height:w.height},Math.abs(kt)>0&&Math.abs(Pt)<Math.abs(kt)){var gr=Io(Pt||kt)*(Math.abs(kt)-Math.abs(Pt));St-=gr,Pt+=gr}}else{var Gt=[y.scale(We[0]),y.scale(We[1])],vn=Gt[0],cn=Gt[1];if(Xe=vn,St=nM({axis:w,ticks:a,bandSize:h,offset:X.offset,entry:Ze,index:st}),Mt=cn-vn,Pt=X.size,ht={x:y.x,y:St,width:y.width,height:Pt},Math.abs(kt)>0&&Math.abs(Mt)<Math.abs(kt)){var Ln=Io(Mt||kt)*(Math.abs(kt)-Math.abs(Mt));Mt+=Ln}}return Si(Si(Si({},Ze),{},{x:Xe,y:St,width:Mt,height:Pt,value:D?We:We[1],payload:Ze,background:ht},Te&&Te[st]&&Te[st].props),{},{tooltipPayload:[Rk(n,Ze)],tooltipPosition:{x:Xe+Mt/2,y:St+Pt/2}})});return Si({data:Ee,layout:ie},H)});function o6(e){"@babel/helpers - typeof";return o6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o6(e)}function T0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,uL(o.key),o)}}function S0e(e,t,n){return t&&mC(e.prototype,t),n&&mC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(o){N4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function N4(e,t,n){return t=uL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uL(e){var t=E0e(e,"string");return o6(t)=="symbol"?t:t+""}function E0e(e,t){if(o6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(o6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P0e=function(t,n,o,h,y){var w=t.width,C=t.height,a=t.layout,D=t.children,j=Object.keys(n),B={left:o.left,leftMirror:o.left,right:w-o.right,rightMirror:w-o.right,top:o.top,topMirror:o.top,bottom:C-o.bottom,bottomMirror:C-o.bottom},H=!!ua(D,xc);return j.reduce(function(X,ie){var Q=n[ie],ne=Q.orientation,te=Q.domain,K=Q.padding,se=K===void 0?{}:K,ve=Q.mirror,le=Q.reversed,fe="".concat(ne).concat(ve?"Mirror":""),Te,Ee,Ze,st,We;if(Q.type==="number"&&(Q.padding==="gap"||Q.padding==="no-gap")){var Xe=te[1]-te[0],St=1/0,Mt=Q.categoricalDomain.sort();if(Mt.forEach(function(Gt,vn){vn>0&&(St=Math.min((Gt||0)-(Mt[vn-1]||0),St))}),Number.isFinite(St)){var Pt=St/Xe,ht=Q.layout==="vertical"?o.height:o.width;if(Q.padding==="gap"&&(Te=Pt*ht/2),Q.padding==="no-gap"){var kt=Oo(t.barCategoryGap,Pt*ht),mt=Pt*ht/2;Te=mt-kt-(mt-kt)/ht*kt}}}h==="xAxis"?Ee=[o.left+(se.left||0)+(Te||0),o.left+o.width-(se.right||0)-(Te||0)]:h==="yAxis"?Ee=a==="horizontal"?[o.top+o.height-(se.bottom||0),o.top+(se.top||0)]:[o.top+(se.top||0)+(Te||0),o.top+o.height-(se.bottom||0)-(Te||0)]:Ee=Q.range,le&&(Ee=[Ee[1],Ee[0]]);var Ct=Mk(Q,y,H),_t=Ct.scale,Qt=Ct.realScaleType;_t.domain(te).range(Ee),Ck(_t);var qt=Ik(_t,gs(gs({},Q),{},{realScaleType:Qt}));h==="xAxis"?(We=ne==="top"&&!ve||ne==="bottom"&&ve,Ze=o.left,st=B[fe]-We*Q.height):h==="yAxis"&&(We=ne==="left"&&!ve||ne==="right"&&ve,Ze=B[fe]-We*Q.width,st=o.top);var gr=gs(gs(gs({},Q),qt),{},{realScaleType:Qt,x:Ze,y:st,scale:_t,width:h==="xAxis"?o.width:Q.width,height:h==="yAxis"?o.height:Q.height});return gr.bandSize=s9(gr,qt),!Q.hide&&h==="xAxis"?B[fe]+=(We?-1:1)*gr.height:Q.hide||(B[fe]+=(We?-1:1)*gr.width),gs(gs({},X),{},N4({},ie,gr))},{})},hL=function(t,n){var o=t.x,h=t.y,y=n.x,w=n.y;return{x:Math.min(o,y),y:Math.min(h,w),width:Math.abs(y-o),height:Math.abs(w-h)}},M0e=function(t){var n=t.x1,o=t.y1,h=t.x2,y=t.y2;return hL({x:n,y:o},{x:h,y})},fL=function(){function e(t){T0e(this,e),this.scale=t}return S0e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=o.bandAware,y=o.position;if(n!==void 0){if(y)switch(y){case"start":return this.scale(n);case"middle":{var w=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+w}case"end":{var C=this.bandwidth?this.bandwidth():0;return this.scale(n)+C}default:return this.scale(n)}if(h){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}return this.scale(n)}}},{key:"isInRange",value:function(n){var o=this.range(),h=o[0],y=o[o.length-1];return h<=y?n>=h&&n<=y:n>=y&&n<=h}}],[{key:"create",value:function(n){return new e(n)}}])}();N4(fL,"EPS",1e-4);var eb=function(t){var n=Object.keys(t).reduce(function(o,h){return gs(gs({},o),{},N4({},h,fL.create(t[h])))},{});return gs(gs({},n),{},{apply:function(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=y.bandAware,C=y.position;return W7e(h,function(a,D){return n[D].apply(a,{bandAware:w,position:C})})},isInRange:function(h){return o0e(h,function(y,w){return n[w].isInRange(y)})}})};function C0e(e){return(e%180+180)%180}var I0e=function(t){var n=t.width,o=t.height,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=C0e(h),w=y*Math.PI/180,C=Math.atan(o/n),a=w>C&&w<Math.PI-C?o/Math.sin(w):n/Math.cos(w);return Math.abs(a)},O0e=JG(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),dL=ut.createContext(void 0),pL=ut.createContext(void 0),mL=ut.createContext(void 0),R0e=ut.createContext({}),gL=ut.createContext(void 0),yL=ut.createContext(0),_L=ut.createContext(0),yC=function(t){var n=t.state,o=n.xAxisMap,h=n.yAxisMap,y=n.offset,w=t.clipPathId,C=t.children,a=t.width,D=t.height,j=O0e(y);return tt.createElement(dL.Provider,{value:o},tt.createElement(pL.Provider,{value:h},tt.createElement(R0e.Provider,{value:y},tt.createElement(mL.Provider,{value:j},tt.createElement(gL.Provider,{value:w},tt.createElement(yL.Provider,{value:D},tt.createElement(_L.Provider,{value:a},C)))))))},D0e=function(){return ut.useContext(gL)},vL=function(t){var n=ut.useContext(dL);n==null&&Gu();var o=n[t];return o==null&&Gu(),o},xL=function(t){var n=ut.useContext(pL);n==null&&Gu();var o=n[t];return o==null&&Gu(),o},k0e=function(){var t=ut.useContext(mL);return t},bL=function(){return ut.useContext(_L)},wL=function(){return ut.useContext(yL)};function d2(e){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d2(e)}function L0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z0e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,TL(o.key),o)}}function B0e(e,t,n){return t&&z0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F0e(e,t,n){return t=T9(t),N0e(e,AL()?Reflect.construct(t,n||[],T9(e).constructor):t.apply(e,n))}function N0e(e,t){if(t&&(d2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j0e(e)}function j0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AL=function(){return!!e})()}function T9(e){return T9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T9(e)}function $0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V_(e,t)}function V_(e,t){return V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},V_(e,t)}function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(n),!0).forEach(function(o){tb(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function tb(e,t,n){return t=TL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TL(e){var t=U0e(e,"string");return d2(t)=="symbol"?t:t+""}function U0e(e,t){if(d2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(d2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V0e(e,t){return H0e(e)||W0e(e,t)||q0e(e,t)||G0e()}function G0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0e(e,t){if(e){if(typeof e=="string")return xC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xC(e,t)}}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function W0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function H0e(e){if(Array.isArray(e))return e}function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G_.apply(this,arguments)}var Z0e=function(t,n){var o;return tt.isValidElement(t)?o=tt.cloneElement(t,n):Xr(t)?o=t(n):o=tt.createElement("line",G_({},n,{className:"recharts-reference-line-line"})),o},X0e=function(t,n,o,h,y,w,C,a,D){var j=y.x,B=y.y,H=y.width,X=y.height;if(o){var ie=D.y,Q=t.y.apply(ie,{position:w});if(Zs(D,"discard")&&!t.y.isInRange(Q))return null;var ne=[{x:j+H,y:Q},{x:j,y:Q}];return a==="left"?ne.reverse():ne}if(n){var te=D.x,K=t.x.apply(te,{position:w});if(Zs(D,"discard")&&!t.x.isInRange(K))return null;var se=[{x:K,y:B+X},{x:K,y:B}];return C==="top"?se.reverse():se}if(h){var ve=D.segment,le=ve.map(function(fe){return t.apply(fe,{position:w})});return Zs(D,"discard")&&F7e(le,function(fe){return!t.isInRange(fe)})?null:le}return null};function Y0e(e){var t=e.x,n=e.y,o=e.segment,h=e.xAxisId,y=e.yAxisId,w=e.shape,C=e.className,a=e.alwaysShow,D=D0e(),j=vL(h),B=xL(y),H=k0e();if(!D||!H)return null;Ml(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var X=eb({x:j.scale,y:B.scale}),ie=ki(t),Q=ki(n),ne=o&&o.length===2,te=X0e(X,ie,Q,ne,H,e.position,j.orientation,B.orientation,e);if(!te)return null;var K=V0e(te,2),se=K[0],ve=se.x,le=se.y,fe=K[1],Te=fe.x,Ee=fe.y,Ze=Zs(e,"hidden")?"url(#".concat(D,")"):void 0,st=vC(vC({clipPath:Ze},zr(e,!0)),{},{x1:ve,y1:le,x2:Te,y2:Ee});return tt.createElement(Pn,{className:tn("recharts-reference-line",C)},Z0e(w,st),Vi.renderCallByParent(e,M0e({x1:ve,y1:le,x2:Te,y2:Ee})))}var rb=function(e){function t(){return L0e(this,t),F0e(this,t,arguments)}return $0e(t,e),B0e(t,[{key:"render",value:function(){return tt.createElement(Y0e,this.props)}}])}(tt.Component);tb(rb,"displayName","ReferenceLine");tb(rb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function q_(){return q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},q_.apply(this,arguments)}function p2(e){"@babel/helpers - typeof";return p2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p2(e)}function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function wC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(o){j4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function K0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J0e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,EL(o.key),o)}}function Q0e(e,t,n){return t&&J0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e2e(e,t,n){return t=S9(t),t2e(e,SL()?Reflect.construct(t,n||[],S9(e).constructor):t.apply(e,n))}function t2e(e,t){if(t&&(p2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r2e(e)}function r2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SL=function(){return!!e})()}function S9(e){return S9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S9(e)}function n2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}function W_(e,t){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},W_(e,t)}function j4(e,t,n){return t=EL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EL(e){var t=i2e(e,"string");return p2(t)=="symbol"?t:t+""}function i2e(e,t){if(p2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(p2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o2e=function(t){var n=t.x,o=t.y,h=t.xAxis,y=t.yAxis,w=eb({x:h.scale,y:y.scale}),C=w.apply({x:n,y:o},{bandAware:!0});return Zs(t,"discard")&&!w.isInRange(C)?null:C},$4=function(e){function t(){return K0e(this,t),e2e(this,t,arguments)}return n2e(t,e),Q0e(t,[{key:"render",value:function(){var o=this.props,h=o.x,y=o.y,w=o.r,C=o.alwaysShow,a=o.clipPathId,D=ki(h),j=ki(y);if(Ml(C===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!D||!j)return null;var B=o2e(this.props);if(!B)return null;var H=B.x,X=B.y,ie=this.props,Q=ie.shape,ne=ie.className,te=Zs(this.props,"hidden")?"url(#".concat(a,")"):void 0,K=wC(wC({clipPath:te},zr(this.props,!0)),{},{cx:H,cy:X});return tt.createElement(Pn,{className:tn("recharts-reference-dot",ne)},t.renderDot(Q,K),Vi.renderCallByParent(this.props,{x:H-w,y:X-w,width:2*w,height:2*w}))}}])}(tt.Component);j4($4,"displayName","ReferenceDot");j4($4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});j4($4,"renderDot",function(e,t){var n;return tt.isValidElement(e)?n=tt.cloneElement(e,t):Xr(e)?n=e(t):n=tt.createElement(Qx,q_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function H_(){return H_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H_.apply(this,arguments)}function m2(e){"@babel/helpers - typeof";return m2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m2(e)}function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function TC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(o){U4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function a2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s2e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ML(o.key),o)}}function l2e(e,t,n){return t&&s2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c2e(e,t,n){return t=E9(t),u2e(e,PL()?Reflect.construct(t,n||[],E9(e).constructor):t.apply(e,n))}function u2e(e,t){if(t&&(m2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h2e(e)}function h2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PL=function(){return!!e})()}function E9(e){return E9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E9(e)}function f2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},Z_(e,t)}function U4(e,t,n){return t=ML(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ML(e){var t=d2e(e,"string");return m2(t)=="symbol"?t:t+""}function d2e(e,t){if(m2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(m2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p2e=function(t,n,o,h,y){var w=y.x1,C=y.x2,a=y.y1,D=y.y2,j=y.xAxis,B=y.yAxis;if(!j||!B)return null;var H=eb({x:j.scale,y:B.scale}),X={x:t?H.x.apply(w,{position:"start"}):H.x.rangeMin,y:o?H.y.apply(a,{position:"start"}):H.y.rangeMin},ie={x:n?H.x.apply(C,{position:"end"}):H.x.rangeMax,y:h?H.y.apply(D,{position:"end"}):H.y.rangeMax};return Zs(y,"discard")&&(!H.isInRange(X)||!H.isInRange(ie))?null:hL(X,ie)},V4=function(e){function t(){return a2e(this,t),c2e(this,t,arguments)}return f2e(t,e),l2e(t,[{key:"render",value:function(){var o=this.props,h=o.x1,y=o.x2,w=o.y1,C=o.y2,a=o.className,D=o.alwaysShow,j=o.clipPathId;Ml(D===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var B=ki(h),H=ki(y),X=ki(w),ie=ki(C),Q=this.props.shape;if(!B&&!H&&!X&&!ie&&!Q)return null;var ne=p2e(B,H,X,ie,this.props);if(!ne&&!Q)return null;var te=Zs(this.props,"hidden")?"url(#".concat(j,")"):void 0;return tt.createElement(Pn,{className:tn("recharts-reference-area",a)},t.renderRect(Q,TC(TC({clipPath:te},zr(this.props,!0)),ne)),Vi.renderCallByParent(this.props,ne))}}])}(tt.Component);U4(V4,"displayName","ReferenceArea");U4(V4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});U4(V4,"renderRect",function(e,t){var n;return tt.isValidElement(e)?n=tt.cloneElement(e,t):Xr(e)?n=e(t):n=tt.createElement(Jx,H_({},t,{className:"recharts-reference-area-rect"})),n});function CL(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var o=[],h=0;h<e.length;h+=t)o.push(e[h]);return o}function m2e(e,t,n){var o={width:e.width+t.width,height:e.height+t.height};return I0e(o,n)}function g2e(e,t,n){var o=n==="width",h=e.x,y=e.y,w=e.width,C=e.height;return t===1?{start:o?h:y,end:o?h+w:y+C}:{start:o?h+w:y+C,end:o?h:y}}function P9(e,t,n,o,h){if(e*t<e*o||e*t>e*h)return!1;var y=n();return e*(t-e*y/2-o)>=0&&e*(t+e*y/2-h)<=0}function y2e(e,t){return CL(e,t+1)}function _2e(e,t,n,o,h){for(var y=(o||[]).slice(),w=t.start,C=t.end,a=0,D=1,j=w,B=function(){var ie=o==null?void 0:o[a];if(ie===void 0)return{v:CL(o,D)};var Q=a,ne,te=function(){return ne===void 0&&(ne=n(ie,Q)),ne},K=ie.coordinate,se=a===0||P9(e,K,te,j,C);se||(a=0,j=w,D+=1),se&&(j=K+e*(te()/2+h),a+=D)},H;D<=y.length;)if(H=B(),H)return H.v;return[]}function a6(e){"@babel/helpers - typeof";return a6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a6(e)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(o){v2e(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function v2e(e,t,n){return t=x2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x2e(e){var t=b2e(e,"string");return a6(t)=="symbol"?t:t+""}function b2e(e,t){if(a6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(a6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w2e(e,t,n,o,h){for(var y=(o||[]).slice(),w=y.length,C=t.start,a=t.end,D=function(H){var X=y[H],ie,Q=function(){return ie===void 0&&(ie=n(X,H)),ie};if(H===w-1){var ne=e*(X.coordinate+e*Q()/2-a);y[H]=X=po(po({},X),{},{tickCoord:ne>0?X.coordinate-ne*e:X.coordinate})}else y[H]=X=po(po({},X),{},{tickCoord:X.coordinate});var te=P9(e,X.tickCoord,Q,C,a);te&&(a=X.tickCoord-e*(Q()/2+h),y[H]=po(po({},X),{},{isShow:!0}))},j=w-1;j>=0;j--)D(j);return y}function A2e(e,t,n,o,h,y){var w=(o||[]).slice(),C=w.length,a=t.start,D=t.end;if(y){var j=o[C-1],B=n(j,C-1),H=e*(j.coordinate+e*B/2-D);w[C-1]=j=po(po({},j),{},{tickCoord:H>0?j.coordinate-H*e:j.coordinate});var X=P9(e,j.tickCoord,function(){return B},a,D);X&&(D=j.tickCoord-e*(B/2+h),w[C-1]=po(po({},j),{},{isShow:!0}))}for(var ie=y?C-1:C,Q=function(K){var se=w[K],ve,le=function(){return ve===void 0&&(ve=n(se,K)),ve};if(K===0){var fe=e*(se.coordinate-e*le()/2-a);w[K]=se=po(po({},se),{},{tickCoord:fe<0?se.coordinate-fe*e:se.coordinate})}else w[K]=se=po(po({},se),{},{tickCoord:se.coordinate});var Te=P9(e,se.tickCoord,le,a,D);Te&&(a=se.tickCoord+e*(le()/2+h),w[K]=po(po({},se),{},{isShow:!0}))},ne=0;ne<ie;ne++)Q(ne);return w}function T2e(e,t,n){var o=e.tick,h=e.ticks,y=e.viewBox,w=e.minTickGap,C=e.orientation,a=e.interval,D=e.tickFormatter,j=e.unit,B=e.angle;if(!h||!h.length||!o)return[];if(rr(a)||Cl.isSsr)return y2e(h,typeof a=="number"&&rr(a)?a:0);var H=[],X=C==="top"||C==="bottom"?"width":"height",ie=j&&X==="width"?n5(j,{fontSize:t,letterSpacing:n}):{width:0,height:0},Q=function(se,ve){var le=Xr(D)?D(se.value,ve):se.value;return X==="width"?m2e(n5(le,{fontSize:t,letterSpacing:n}),ie,B):n5(le,{fontSize:t,letterSpacing:n})[X]},ne=h.length>=2?Io(h[1].coordinate-h[0].coordinate):1,te=g2e(y,ne,X);return a==="equidistantPreserveStart"?_2e(ne,te,Q,h,w):(a==="preserveStart"||a==="preserveStartEnd"?H=A2e(ne,te,Q,h,w,a==="preserveStartEnd"):H=w2e(ne,te,Q,h,w),H.filter(function(K){return K.isShow}))}var S2e=["viewBox"],E2e=["viewBox"],P2e=["ticks"];function g2(e){"@babel/helpers - typeof";return g2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g2(e)}function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O0.apply(this,arguments)}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(o){nb(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Rg(e,t){if(e==null)return{};var n=M2e(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function M2e(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function C2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,OL(o.key),o)}}function I2e(e,t,n){return t&&PC(e.prototype,t),n&&PC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function O2e(e,t,n){return t=M9(t),R2e(e,IL()?Reflect.construct(t,n||[],M9(e).constructor):t.apply(e,n))}function R2e(e,t){if(t&&(g2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D2e(e)}function D2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IL=function(){return!!e})()}function M9(e){return M9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M9(e)}function k2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X_(e,t)}function X_(e,t){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},X_(e,t)}function nb(e,t,n){return t=OL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OL(e){var t=L2e(e,"string");return g2(t)=="symbol"?t:t+""}function L2e(e,t){if(g2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(g2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G4=function(e){function t(n){var o;return C2e(this,t),o=O2e(this,t,[n]),o.state={fontSize:"",letterSpacing:""},o}return k2e(t,e),I2e(t,[{key:"shouldComponentUpdate",value:function(o,h){var y=o.viewBox,w=Rg(o,S2e),C=this.props,a=C.viewBox,D=Rg(C,E2e);return!N0(y,a)||!N0(w,D)||!N0(h,this.state)}},{key:"componentDidMount",value:function(){var o=this.layerReference;if(o){var h=o.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];h&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}},{key:"getTickLineCoord",value:function(o){var h=this.props,y=h.x,w=h.y,C=h.width,a=h.height,D=h.orientation,j=h.tickSize,B=h.mirror,H=h.tickMargin,X,ie,Q,ne,te,K,se=B?-1:1,ve=o.tickSize||j,le=rr(o.tickCoord)?o.tickCoord:o.coordinate;switch(D){case"top":X=ie=o.coordinate,ne=w+ +!B*a,Q=ne-se*ve,K=Q-se*H,te=le;break;case"left":Q=ne=o.coordinate,ie=y+ +!B*C,X=ie-se*ve,te=X-se*H,K=le;break;case"right":Q=ne=o.coordinate,ie=y+ +B*C,X=ie+se*ve,te=X+se*H,K=le;break;default:X=ie=o.coordinate,ne=w+ +B*a,Q=ne+se*ve,K=Q+se*H,te=le;break}return{line:{x1:X,y1:Q,x2:ie,y2:ne},tick:{x:te,y:K}}}},{key:"getTickTextAnchor",value:function(){var o=this.props,h=o.orientation,y=o.mirror,w;switch(h){case"left":w=y?"start":"end";break;case"right":w=y?"end":"start";break;default:w="middle";break}return w}},{key:"getTickVerticalAnchor",value:function(){var o=this.props,h=o.orientation,y=o.mirror,w="end";switch(h){case"left":case"right":w="middle";break;case"top":w=y?"start":"end";break;default:w=y?"end":"start";break}return w}},{key:"renderAxisLine",value:function(){var o=this.props,h=o.x,y=o.y,w=o.width,C=o.height,a=o.orientation,D=o.mirror,j=o.axisLine,B=Mo(Mo(Mo({},zr(this.props,!1)),zr(j,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var H=+(a==="top"&&!D||a==="bottom"&&D);B=Mo(Mo({},B),{},{x1:h,y1:y+H*C,x2:h+w,y2:y+H*C})}else{var X=+(a==="left"&&!D||a==="right"&&D);B=Mo(Mo({},B),{},{x1:h+X*w,y1:y,x2:h+X*w,y2:y+C})}return tt.createElement("line",O0({},B,{className:tn("recharts-cartesian-axis-line",pa(j,"className"))}))}},{key:"renderTicks",value:function(o,h,y){var w=this,C=this.props,a=C.tickLine,D=C.stroke,j=C.tick,B=C.tickFormatter,H=C.unit,X=T2e(Mo(Mo({},this.props),{},{ticks:o}),h,y),ie=this.getTickTextAnchor(),Q=this.getTickVerticalAnchor(),ne=zr(this.props,!1),te=zr(j,!1),K=Mo(Mo({},ne),{},{fill:"none"},zr(a,!1)),se=X.map(function(ve,le){var fe=w.getTickLineCoord(ve),Te=fe.line,Ee=fe.tick,Ze=Mo(Mo(Mo(Mo({textAnchor:ie,verticalAnchor:Q},ne),{},{stroke:"none",fill:D},te),Ee),{},{index:le,payload:ve,visibleTicksCount:X.length,tickFormatter:B});return tt.createElement(Pn,O0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ve.value,"-").concat(ve.coordinate,"-").concat(ve.tickCoord)},ju(w.props,ve,le)),a&&tt.createElement("line",O0({},K,Te,{className:tn("recharts-cartesian-axis-tick-line",pa(a,"className"))})),j&&t.renderTickItem(j,Ze,"".concat(Xr(B)?B(ve.value,le):ve.value).concat(H||"")))});return tt.createElement("g",{className:"recharts-cartesian-axis-ticks"},se)}},{key:"render",value:function(){var o=this,h=this.props,y=h.axisLine,w=h.width,C=h.height,a=h.ticksGenerator,D=h.className,j=h.hide;if(j)return null;var B=this.props,H=B.ticks,X=Rg(B,P2e),ie=H;return Xr(a)&&(ie=H&&H.length>0?a(this.props):a(X)),w<=0||C<=0||!ie||!ie.length?null:tt.createElement(Pn,{className:tn("recharts-cartesian-axis",D),ref:function(ne){o.layerReference=ne}},y&&this.renderAxisLine(),this.renderTicks(ie,this.state.fontSize,this.state.letterSpacing),Vi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(o,h,y){var w;return tt.isValidElement(o)?w=tt.cloneElement(o,h):Xr(o)?w=o(h):w=tt.createElement(Uu,O0({},h,{className:"recharts-cartesian-axis-tick-value"}),y),w}}])}(ut.Component);nb(G4,"displayName","CartesianAxis");nb(G4,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function y2(e){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y2(e)}function z2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B2e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,kL(o.key),o)}}function F2e(e,t,n){return t&&B2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N2e(e,t,n){return t=C9(t),j2e(e,RL()?Reflect.construct(t,n||[],C9(e).constructor):t.apply(e,n))}function j2e(e,t){if(t&&(y2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $2e(e)}function $2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RL=function(){return!!e})()}function C9(e){return C9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C9(e)}function U2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y_(e,t)}function Y_(e,t){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},Y_(e,t)}function DL(e,t,n){return t=kL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kL(e){var t=V2e(e,"string");return y2(t)=="symbol"?t:t+""}function V2e(e,t){if(y2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(y2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K_.apply(this,arguments)}function G2e(e){var t=e.xAxisId,n=bL(),o=wL(),h=vL(t);return h==null?null:tt.createElement(G4,K_({},h,{className:tn("recharts-".concat(h.axisType," ").concat(h.axisType),h.className),viewBox:{x:0,y:0,width:n,height:o},ticksGenerator:function(w){return Cu(w,!0)}}))}var T6=function(e){function t(){return z2e(this,t),N2e(this,t,arguments)}return U2e(t,e),F2e(t,[{key:"render",value:function(){return tt.createElement(G2e,this.props)}}])}(tt.Component);DL(T6,"displayName","XAxis");DL(T6,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _2(e){"@babel/helpers - typeof";return _2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_2(e)}function q2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W2e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,BL(o.key),o)}}function H2e(e,t,n){return t&&W2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z2e(e,t,n){return t=I9(t),X2e(e,LL()?Reflect.construct(t,n||[],I9(e).constructor):t.apply(e,n))}function X2e(e,t){if(t&&(_2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(e)}function Y2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LL=function(){return!!e})()}function I9(e){return I9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I9(e)}function K2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J_(e,t)}function J_(e,t){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},J_(e,t)}function zL(e,t,n){return t=BL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BL(e){var t=J2e(e,"string");return _2(t)=="symbol"?t:t+""}function J2e(e,t){if(_2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(_2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Q_.apply(this,arguments)}var Q2e=function(t){var n=t.yAxisId,o=bL(),h=wL(),y=xL(n);return y==null?null:tt.createElement(G4,Q_({},y,{className:tn("recharts-".concat(y.axisType," ").concat(y.axisType),y.className),viewBox:{x:0,y:0,width:o,height:h},ticksGenerator:function(C){return Cu(C,!0)}}))},ib=function(e){function t(){return q2e(this,t),Z2e(this,t,arguments)}return K2e(t,e),H2e(t,[{key:"render",value:function(){return tt.createElement(Q2e,this.props)}}])}(tt.Component);zL(ib,"displayName","YAxis");zL(ib,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function MC(e){return n3e(e)||r3e(e)||t3e(e)||e3e()}function e3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t3e(e,t){if(e){if(typeof e=="string")return ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ev(e,t)}}function r3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n3e(e){if(Array.isArray(e))return ev(e)}function ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var tv=function(t,n,o,h,y){var w=ja(t,rb),C=ja(t,$4),a=[].concat(MC(w),MC(C)),D=ja(t,V4),j="".concat(h,"Id"),B=h[0],H=n;if(a.length&&(H=a.reduce(function(Q,ne){if(ne.props[j]===o&&Zs(ne.props,"extendDomain")&&rr(ne.props[B])){var te=ne.props[B];return[Math.min(Q[0],te),Math.max(Q[1],te)]}return Q},H)),D.length){var X="".concat(B,"1"),ie="".concat(B,"2");H=D.reduce(function(Q,ne){if(ne.props[j]===o&&Zs(ne.props,"extendDomain")&&rr(ne.props[X])&&rr(ne.props[ie])){var te=ne.props[X],K=ne.props[ie];return[Math.min(Q[0],te,K),Math.max(Q[1],te,K)]}return Q},H)}return y&&y.length&&(H=y.reduce(function(Q,ne){return rr(ne)?[Math.min(Q[0],ne),Math.max(Q[1],ne)]:Q},H)),H},FL={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function h(a,D,j){this.fn=a,this.context=D,this.once=j||!1}function y(a,D,j,B,H){if(typeof j!="function")throw new TypeError("The listener must be a function");var X=new h(j,B||a,H),ie=n?n+D:D;return a._events[ie]?a._events[ie].fn?a._events[ie]=[a._events[ie],X]:a._events[ie].push(X):(a._events[ie]=X,a._eventsCount++),a}function w(a,D){--a._eventsCount===0?a._events=new o:delete a._events[D]}function C(){this._events=new o,this._eventsCount=0}C.prototype.eventNames=function(){var D=[],j,B;if(this._eventsCount===0)return D;for(B in j=this._events)t.call(j,B)&&D.push(n?B.slice(1):B);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(j)):D},C.prototype.listeners=function(D){var j=n?n+D:D,B=this._events[j];if(!B)return[];if(B.fn)return[B.fn];for(var H=0,X=B.length,ie=new Array(X);H<X;H++)ie[H]=B[H].fn;return ie},C.prototype.listenerCount=function(D){var j=n?n+D:D,B=this._events[j];return B?B.fn?1:B.length:0},C.prototype.emit=function(D,j,B,H,X,ie){var Q=n?n+D:D;if(!this._events[Q])return!1;var ne=this._events[Q],te=arguments.length,K,se;if(ne.fn){switch(ne.once&&this.removeListener(D,ne.fn,void 0,!0),te){case 1:return ne.fn.call(ne.context),!0;case 2:return ne.fn.call(ne.context,j),!0;case 3:return ne.fn.call(ne.context,j,B),!0;case 4:return ne.fn.call(ne.context,j,B,H),!0;case 5:return ne.fn.call(ne.context,j,B,H,X),!0;case 6:return ne.fn.call(ne.context,j,B,H,X,ie),!0}for(se=1,K=new Array(te-1);se<te;se++)K[se-1]=arguments[se];ne.fn.apply(ne.context,K)}else{var ve=ne.length,le;for(se=0;se<ve;se++)switch(ne[se].once&&this.removeListener(D,ne[se].fn,void 0,!0),te){case 1:ne[se].fn.call(ne[se].context);break;case 2:ne[se].fn.call(ne[se].context,j);break;case 3:ne[se].fn.call(ne[se].context,j,B);break;case 4:ne[se].fn.call(ne[se].context,j,B,H);break;default:if(!K)for(le=1,K=new Array(te-1);le<te;le++)K[le-1]=arguments[le];ne[se].fn.apply(ne[se].context,K)}}return!0},C.prototype.on=function(D,j,B){return y(this,D,j,B,!1)},C.prototype.once=function(D,j,B){return y(this,D,j,B,!0)},C.prototype.removeListener=function(D,j,B,H){var X=n?n+D:D;if(!this._events[X])return this;if(!j)return w(this,X),this;var ie=this._events[X];if(ie.fn)ie.fn===j&&(!H||ie.once)&&(!B||ie.context===B)&&w(this,X);else{for(var Q=0,ne=[],te=ie.length;Q<te;Q++)(ie[Q].fn!==j||H&&!ie[Q].once||B&&ie[Q].context!==B)&&ne.push(ie[Q]);ne.length?this._events[X]=ne.length===1?ne[0]:ne:w(this,X)}return this},C.prototype.removeAllListeners=function(D){var j;return D?(j=n?n+D:D,this._events[j]&&w(this,j)):(this._events=new o,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=n,C.EventEmitter=C,e.exports=C})(FL);var i3e=FL.exports;const o3e=Cn(i3e);var Dg=new o3e,kg="recharts.syncMouseEvents";function s6(e){"@babel/helpers - typeof";return s6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s6(e)}function a3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s3e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,NL(o.key),o)}}function l3e(e,t,n){return t&&s3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lg(e,t,n){return t=NL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NL(e){var t=c3e(e,"string");return s6(t)=="symbol"?t:t+""}function c3e(e,t){if(s6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(s6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var u3e=function(){function e(){a3e(this,e),Lg(this,"activeIndex",0),Lg(this,"coordinateList",[]),Lg(this,"layout","horizontal")}return l3e(e,[{key:"setDetails",value:function(n){var o,h=n.coordinateList,y=h===void 0?null:h,w=n.container,C=w===void 0?null:w,a=n.layout,D=a===void 0?null:a,j=n.offset,B=j===void 0?null:j,H=n.mouseHandlerCallback,X=H===void 0?null:H;this.coordinateList=(o=y??this.coordinateList)!==null&&o!==void 0?o:[],this.container=C??this.container,this.layout=D??this.layout,this.offset=B??this.offset,this.mouseHandlerCallback=X??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,o;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var h=this.container.getBoundingClientRect(),y=h.x,w=h.y,C=h.height,a=this.coordinateList[this.activeIndex].coordinate,D=((n=window)===null||n===void 0?void 0:n.scrollX)||0,j=((o=window)===null||o===void 0?void 0:o.scrollY)||0,B=y+a+D,H=w+this.offset.top+C/2+j;this.mouseHandlerCallback({pageX:B,pageY:H})}}}])}();function h3e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var o=e==null?void 0:e[0],h=e==null?void 0:e[1];if(o&&h&&rr(o)&&rr(h))return!0}return!1}function f3e(e,t,n,o){var h=o/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-h:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-h,width:e==="horizontal"?o:n.width-1,height:e==="horizontal"?n.height-1:o}}function jL(e){var t=e.cx,n=e.cy,o=e.radius,h=e.startAngle,y=e.endAngle,w=Wn(t,n,o,h),C=Wn(t,n,o,y);return{points:[w,C],cx:t,cy:n,radius:o,startAngle:h,endAngle:y}}function d3e(e,t,n){var o,h,y,w;if(e==="horizontal")o=t.x,y=o,h=n.top,w=n.top+n.height;else if(e==="vertical")h=t.y,w=h,o=n.left,y=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var C=t.cx,a=t.cy,D=t.innerRadius,j=t.outerRadius,B=t.angle,H=Wn(C,a,D,B),X=Wn(C,a,j,B);o=H.x,h=H.y,y=X.x,w=X.y}else return jL(t);return[{x:o,y:h},{x:y,y:w}]}function l6(e){"@babel/helpers - typeof";return l6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l6(e)}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(o){p3e(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function p3e(e,t,n){return t=m3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m3e(e){var t=g3e(e,"string");return l6(t)=="symbol"?t:t+""}function g3e(e,t){if(l6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(l6(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y3e(e){var t,n,o=e.element,h=e.tooltipEventType,y=e.isActive,w=e.activeCoordinate,C=e.activePayload,a=e.offset,D=e.activeTooltipIndex,j=e.tooltipAxisBandSize,B=e.layout,H=e.chartName,X=(t=o.props.cursor)!==null&&t!==void 0?t:(n=o.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!o||!X||!y||!w||H!=="ScatterChart"&&h!=="axis")return null;var ie,Q=T_;if(H==="ScatterChart")ie=w,Q=Sce;else if(H==="BarChart")ie=f3e(B,w,a,j),Q=Jx;else if(B==="radial"){var ne=jL(w),te=ne.cx,K=ne.cy,se=ne.radius,ve=ne.startAngle,le=ne.endAngle;ie={cx:te,cy:K,startAngle:ve,endAngle:le,innerRadius:se,outerRadius:se},Q=Fk}else ie={points:d3e(B,w,a)},Q=T_;var fe=Gd(Gd(Gd(Gd({stroke:"#ccc",pointerEvents:"none"},a),ie),zr(X,!1)),{},{payload:C,payloadIndex:D,className:tn("recharts-tooltip-cursor",X.className)});return ut.isValidElement(X)?ut.cloneElement(X,fe):ut.createElement(Q,fe)}var _3e=["item"],v3e=["children","className","width","height","style","compact","title","desc"];function v2(e){"@babel/helpers - typeof";return v2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v2(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R0.apply(this,arguments)}function IC(e,t){return w3e(e)||b3e(e,t)||UL(e,t)||x3e()}function x3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b3e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,h,y,w,C=[],a=!0,D=!1;try{if(y=(n=n.call(e)).next,t!==0)for(;!(a=(o=y.call(n)).done)&&(C.push(o.value),C.length!==t);a=!0);}catch(j){D=!0,h=j}finally{try{if(!a&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(D)throw h}}return C}}function w3e(e){if(Array.isArray(e))return e}function OC(e,t){if(e==null)return{};var n=A3e(e,t),o,h;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(h=0;h<y.length;h++)o=y[h],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function A3e(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function T3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S3e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,VL(o.key),o)}}function E3e(e,t,n){return t&&S3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P3e(e,t,n){return t=O9(t),M3e(e,$L()?Reflect.construct(t,n||[],O9(e).constructor):t.apply(e,n))}function M3e(e,t){if(t&&(v2(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C3e(e)}function C3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($L=function(){return!!e})()}function O9(e){return O9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O9(e)}function I3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},rv(e,t)}function x2(e){return D3e(e)||R3e(e)||UL(e)||O3e()}function O3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UL(e,t){if(e){if(typeof e=="string")return nv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nv(e,t)}}function R3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D3e(e){if(Array.isArray(e))return nv(e)}function nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function RC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,o)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(n),!0).forEach(function(o){kr(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function kr(e,t,n){return t=VL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=k3e(e,"string");return v2(t)=="symbol"?t:t+""}function k3e(e,t){if(v2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(v2(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L3e={xAxis:["bottom","top"],yAxis:["left","right"]},z3e={width:"100%",height:"100%"},GL={x:0,y:0};function qd(e){return e}var B3e=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},F3e=function(t,n,o,h){var y=n.find(function(j){return j&&j.index===o});if(y){if(t==="horizontal")return{x:y.coordinate,y:h.y};if(t==="vertical")return{x:h.x,y:y.coordinate};if(t==="centric"){var w=y.coordinate,C=h.radius;return Rt(Rt(Rt({},h),Wn(h.cx,h.cy,C,w)),{},{angle:w,radius:C})}var a=y.coordinate,D=h.angle;return Rt(Rt(Rt({},h),Wn(h.cx,h.cy,a,D)),{},{angle:D,radius:a})}return GL},q4=function(t,n){var o=n.graphicalItems,h=n.dataStartIndex,y=n.dataEndIndex,w=(o??[]).reduce(function(C,a){var D=a.props.data;return D&&D.length?[].concat(x2(C),x2(D)):C},[]);return w.length>0?w:t&&t.length&&rr(h)&&rr(y)?t.slice(h,y+1):[]};function qL(e){return e==="number"?[0,"auto"]:void 0}var iv=function(t,n,o,h){var y=t.graphicalItems,w=t.tooltipAxis,C=q4(n,t);return o<0||!y||!y.length||o>=C.length?null:y.reduce(function(a,D){var j,B=(j=D.props.data)!==null&&j!==void 0?j:n;B&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=o&&(B=B.slice(t.dataStartIndex,t.dataEndIndex+1));var H;if(w.dataKey&&!w.allowDuplicatedCategory){var X=B===void 0?C:B;H=Ry(X,w.dataKey,h)}else H=B&&B[o]||C[o];return H?[].concat(x2(a),[Rk(D,H)]):a},[])},DC=function(t,n,o,h){var y=h||{x:t.chartX,y:t.chartY},w=B3e(y,o),C=t.orderedTooltipTicks,a=t.tooltipAxis,D=t.tooltipTicks,j=ose(w,C,D,a);if(j>=0&&D){var B=D[j]&&D[j].value,H=iv(t,n,j,B),X=F3e(o,C,j,y);return{activeTooltipIndex:j,activeLabel:B,activePayload:H,activeCoordinate:X}}return null},N3e=function(t,n){var o=n.axes,h=n.graphicalItems,y=n.axisType,w=n.axisIdKey,C=n.stackGroups,a=n.dataStartIndex,D=n.dataEndIndex,j=t.layout,B=t.children,H=t.stackOffset,X=Pk(j,y);return o.reduce(function(ie,Q){var ne,te=Q.type.defaultProps!==void 0?Rt(Rt({},Q.type.defaultProps),Q.props):Q.props,K=te.type,se=te.dataKey,ve=te.allowDataOverflow,le=te.allowDuplicatedCategory,fe=te.scale,Te=te.ticks,Ee=te.includeHidden,Ze=te[w];if(ie[Ze])return ie;var st=q4(t.data,{graphicalItems:h.filter(function(qt){var gr,Gt=w in qt.props?qt.props[w]:(gr=qt.type.defaultProps)===null||gr===void 0?void 0:gr[w];return Gt===Ze}),dataStartIndex:a,dataEndIndex:D}),We=st.length,Xe,St,Mt;h3e(te.domain,ve,K)&&(Xe=v_(te.domain,null,ve),X&&(K==="number"||fe!=="auto")&&(Mt=o5(st,se,"category")));var Pt=qL(K);if(!Xe||Xe.length===0){var ht,kt=(ht=te.domain)!==null&&ht!==void 0?ht:Pt;if(se){if(Xe=o5(st,se,K),K==="category"&&X){var mt=Xq(Xe);le&&mt?(St=Xe,Xe=v9(0,We)):le||(Xe=aM(kt,Xe,Q).reduce(function(qt,gr){return qt.indexOf(gr)>=0?qt:[].concat(x2(qt),[gr])},[]))}else if(K==="category")le?Xe=Xe.filter(function(qt){return qt!==""&&!an(qt)}):Xe=aM(kt,Xe,Q).reduce(function(qt,gr){return qt.indexOf(gr)>=0||gr===""||an(gr)?qt:[].concat(x2(qt),[gr])},[]);else if(K==="number"){var Ct=use(st,h.filter(function(qt){var gr,Gt,vn=w in qt.props?qt.props[w]:(gr=qt.type.defaultProps)===null||gr===void 0?void 0:gr[w],cn="hide"in qt.props?qt.props.hide:(Gt=qt.type.defaultProps)===null||Gt===void 0?void 0:Gt.hide;return vn===Ze&&(Ee||!cn)}),se,y,j);Ct&&(Xe=Ct)}X&&(K==="number"||fe!=="auto")&&(Mt=o5(st,se,"category"))}else X?Xe=v9(0,We):C&&C[Ze]&&C[Ze].hasStack&&K==="number"?Xe=H==="expand"?[0,1]:Ok(C[Ze].stackGroups,a,D):Xe=Ek(st,h.filter(function(qt){var gr=w in qt.props?qt.props[w]:qt.type.defaultProps[w],Gt="hide"in qt.props?qt.props.hide:qt.type.defaultProps.hide;return gr===Ze&&(Ee||!Gt)}),K,j,!0);if(K==="number")Xe=tv(B,Xe,Ze,y,Te),kt&&(Xe=v_(kt,Xe,ve));else if(K==="category"&&kt){var _t=kt,Qt=Xe.every(function(qt){return _t.indexOf(qt)>=0});Qt&&(Xe=_t)}}return Rt(Rt({},ie),{},kr({},Ze,Rt(Rt({},te),{},{axisType:y,domain:Xe,categoricalDomain:Mt,duplicateDomain:St,originalDomain:(ne=te.domain)!==null&&ne!==void 0?ne:Pt,isCategorical:X,layout:j})))},{})},j3e=function(t,n){var o=n.graphicalItems,h=n.Axis,y=n.axisType,w=n.axisIdKey,C=n.stackGroups,a=n.dataStartIndex,D=n.dataEndIndex,j=t.layout,B=t.children,H=q4(t.data,{graphicalItems:o,dataStartIndex:a,dataEndIndex:D}),X=H.length,ie=Pk(j,y),Q=-1;return o.reduce(function(ne,te){var K=te.type.defaultProps!==void 0?Rt(Rt({},te.type.defaultProps),te.props):te.props,se=K[w],ve=qL("number");if(!ne[se]){Q++;var le;return ie?le=v9(0,X):C&&C[se]&&C[se].hasStack?(le=Ok(C[se].stackGroups,a,D),le=tv(B,le,se,y)):(le=v_(ve,Ek(H,o.filter(function(fe){var Te,Ee,Ze=w in fe.props?fe.props[w]:(Te=fe.type.defaultProps)===null||Te===void 0?void 0:Te[w],st="hide"in fe.props?fe.props.hide:(Ee=fe.type.defaultProps)===null||Ee===void 0?void 0:Ee.hide;return Ze===se&&!st}),"number",j),h.defaultProps.allowDataOverflow),le=tv(B,le,se,y)),Rt(Rt({},ne),{},kr({},se,Rt(Rt({axisType:y},h.defaultProps),{},{hide:!0,orientation:pa(L3e,"".concat(y,".").concat(Q%2),null),domain:le,originalDomain:ve,isCategorical:ie,layout:j})))}return ne},{})},$3e=function(t,n){var o=n.axisType,h=o===void 0?"xAxis":o,y=n.AxisComp,w=n.graphicalItems,C=n.stackGroups,a=n.dataStartIndex,D=n.dataEndIndex,j=t.children,B="".concat(h,"Id"),H=ja(j,y),X={};return H&&H.length?X=N3e(t,{axes:H,graphicalItems:w,axisType:h,axisIdKey:B,stackGroups:C,dataStartIndex:a,dataEndIndex:D}):w&&w.length&&(X=j3e(t,{Axis:y,graphicalItems:w,axisType:h,axisIdKey:B,stackGroups:C,dataStartIndex:a,dataEndIndex:D})),X},U3e=function(t){var n=m0(t),o=Cu(n,!1,!0);return{tooltipTicks:o,orderedTooltipTicks:Sx(o,function(h){return h.coordinate}),tooltipAxis:n,tooltipAxisBandSize:s9(n,o)}},kC=function(t){var n=t.children,o=t.defaultShowTooltip,h=ua(n,h2),y=0,w=0;return t.data&&t.data.length!==0&&(w=t.data.length-1),h&&h.props&&(h.props.startIndex>=0&&(y=h.props.startIndex),h.props.endIndex>=0&&(w=h.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:y,dataEndIndex:w,activeTooltipIndex:-1,isTooltipActive:!!o}},V3e=function(t){return!t||!t.length?!1:t.some(function(n){var o=Pl(n&&n.type);return o&&o.indexOf("Bar")>=0})},LC=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},G3e=function(t,n){var o=t.props,h=t.graphicalItems,y=t.xAxisMap,w=y===void 0?{}:y,C=t.yAxisMap,a=C===void 0?{}:C,D=o.width,j=o.height,B=o.children,H=o.margin||{},X=ua(B,h2),ie=ua(B,qs),Q=Object.keys(a).reduce(function(le,fe){var Te=a[fe],Ee=Te.orientation;return!Te.mirror&&!Te.hide?Rt(Rt({},le),{},kr({},Ee,le[Ee]+Te.width)):le},{left:H.left||0,right:H.right||0}),ne=Object.keys(w).reduce(function(le,fe){var Te=w[fe],Ee=Te.orientation;return!Te.mirror&&!Te.hide?Rt(Rt({},le),{},kr({},Ee,pa(le,"".concat(Ee))+Te.height)):le},{top:H.top||0,bottom:H.bottom||0}),te=Rt(Rt({},ne),Q),K=te.bottom;X&&(te.bottom+=X.props.height||h2.defaultProps.height),ie&&n&&(te=lse(te,h,o,n));var se=D-te.left-te.right,ve=j-te.top-te.bottom;return Rt(Rt({brushBottom:K},te),{},{width:Math.max(se,0),height:Math.max(ve,0)})},q3e=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},WL=function(t){var n=t.chartName,o=t.GraphicalChild,h=t.defaultTooltipEventType,y=h===void 0?"axis":h,w=t.validateTooltipEventTypes,C=w===void 0?["axis"]:w,a=t.axisComponents,D=t.legendContent,j=t.formatAxisMap,B=t.defaultProps,H=function(te,K){var se=K.graphicalItems,ve=K.stackGroups,le=K.offset,fe=K.updateId,Te=K.dataStartIndex,Ee=K.dataEndIndex,Ze=te.barSize,st=te.layout,We=te.barGap,Xe=te.barCategoryGap,St=te.maxBarSize,Mt=LC(st),Pt=Mt.numericAxisName,ht=Mt.cateAxisName,kt=V3e(se),mt=[];return se.forEach(function(Ct,_t){var Qt=q4(te.data,{graphicalItems:[Ct],dataStartIndex:Te,dataEndIndex:Ee}),qt=Ct.type.defaultProps!==void 0?Rt(Rt({},Ct.type.defaultProps),Ct.props):Ct.props,gr=qt.dataKey,Gt=qt.maxBarSize,vn=qt["".concat(Pt,"Id")],cn=qt["".concat(ht,"Id")],Ln={},ii=a.reduce(function(_i,Wi){var zo=K["".concat(Wi.axisType,"Map")],Ha=qt["".concat(Wi.axisType,"Id")];zo&&zo[Ha]||Wi.axisType==="zAxis"||Gu();var mr=zo[Ha];return Rt(Rt({},_i),{},kr(kr({},Wi.axisType,mr),"".concat(Wi.axisType,"Ticks"),Cu(mr)))},Ln),er=ii[ht],Cr=ii["".concat(ht,"Ticks")],Pe=ve&&ve[vn]&&ve[vn].hasStack&&vse(Ct,ve[vn].stackGroups),Nt=Pl(Ct.type).indexOf("Bar")>=0,gn=s9(er,Cr),Vr=[],vt=kt&&ase({barSize:Ze,stackGroups:ve,totalSize:q3e(ii,ht)});if(Nt){var Tn,un,wi=an(Gt)?St:Gt,br=(Tn=(un=s9(er,Cr,!0))!==null&&un!==void 0?un:wi)!==null&&Tn!==void 0?Tn:0;Vr=sse({barGap:We,barCategoryGap:Xe,bandSize:br!==gn?br:gn,sizeList:vt[cn],maxBarSize:wi}),br!==gn&&(Vr=Vr.map(function(_i){return Rt(Rt({},_i),{},{position:Rt(Rt({},_i.position),{},{offset:_i.position.offset-br/2})})}))}var jn=Ct&&Ct.type&&Ct.type.getComposedData;jn&&mt.push({props:Rt(Rt({},jn(Rt(Rt({},ii),{},{displayedData:Qt,props:te,dataKey:gr,item:Ct,bandSize:gn,barPosition:Vr,offset:le,stackedData:Pe,layout:st,dataStartIndex:Te,dataEndIndex:Ee}))),{},kr(kr(kr({key:Ct.key||"item-".concat(_t)},Pt,ii[Pt]),ht,ii[ht]),"animationId",fe)),childIndex:aW(Ct,te.children),item:Ct})}),mt},X=function(te,K){var se=te.props,ve=te.dataStartIndex,le=te.dataEndIndex,fe=te.updateId;if(!eE({props:se}))return null;var Te=se.children,Ee=se.layout,Ze=se.stackOffset,st=se.data,We=se.reverseStackOrder,Xe=LC(Ee),St=Xe.numericAxisName,Mt=Xe.cateAxisName,Pt=ja(Te,o),ht=yse(st,Pt,"".concat(St,"Id"),"".concat(Mt,"Id"),Ze,We),kt=a.reduce(function(qt,gr){var Gt="".concat(gr.axisType,"Map");return Rt(Rt({},qt),{},kr({},Gt,$3e(se,Rt(Rt({},gr),{},{graphicalItems:Pt,stackGroups:gr.axisType===St&&ht,dataStartIndex:ve,dataEndIndex:le}))))},{}),mt=G3e(Rt(Rt({},kt),{},{props:se,graphicalItems:Pt}),K==null?void 0:K.legendBBox);Object.keys(kt).forEach(function(qt){kt[qt]=j(se,kt[qt],mt,qt.replace("Map",""),n)});var Ct=kt["".concat(Mt,"Map")],_t=U3e(Ct),Qt=H(se,Rt(Rt({},kt),{},{dataStartIndex:ve,dataEndIndex:le,updateId:fe,graphicalItems:Pt,stackGroups:ht,offset:mt}));return Rt(Rt({formattedGraphicalItems:Qt,graphicalItems:Pt,offset:mt,stackGroups:ht},_t),kt)},ie=function(ne){function te(K){var se,ve,le;return T3e(this,te),le=P3e(this,te,[K]),kr(le,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),kr(le,"accessibilityManager",new u3e),kr(le,"handleLegendBBoxUpdate",function(fe){if(fe){var Te=le.state,Ee=Te.dataStartIndex,Ze=Te.dataEndIndex,st=Te.updateId;le.setState(Rt({legendBBox:fe},X({props:le.props,dataStartIndex:Ee,dataEndIndex:Ze,updateId:st},Rt(Rt({},le.state),{},{legendBBox:fe}))))}}),kr(le,"handleReceiveSyncEvent",function(fe,Te,Ee){if(le.props.syncId===fe){if(Ee===le.eventEmitterSymbol&&typeof le.props.syncMethod!="function")return;le.applySyncEvent(Te)}}),kr(le,"handleBrushChange",function(fe){var Te=fe.startIndex,Ee=fe.endIndex;if(Te!==le.state.dataStartIndex||Ee!==le.state.dataEndIndex){var Ze=le.state.updateId;le.setState(function(){return Rt({dataStartIndex:Te,dataEndIndex:Ee},X({props:le.props,dataStartIndex:Te,dataEndIndex:Ee,updateId:Ze},le.state))}),le.triggerSyncEvent({dataStartIndex:Te,dataEndIndex:Ee})}}),kr(le,"handleMouseEnter",function(fe){var Te=le.getMouseInfo(fe);if(Te){var Ee=Rt(Rt({},Te),{},{isTooltipActive:!0});le.setState(Ee),le.triggerSyncEvent(Ee);var Ze=le.props.onMouseEnter;Xr(Ze)&&Ze(Ee,fe)}}),kr(le,"triggeredAfterMouseMove",function(fe){var Te=le.getMouseInfo(fe),Ee=Te?Rt(Rt({},Te),{},{isTooltipActive:!0}):{isTooltipActive:!1};le.setState(Ee),le.triggerSyncEvent(Ee);var Ze=le.props.onMouseMove;Xr(Ze)&&Ze(Ee,fe)}),kr(le,"handleItemMouseEnter",function(fe){le.setState(function(){return{isTooltipActive:!0,activeItem:fe,activePayload:fe.tooltipPayload,activeCoordinate:fe.tooltipPosition||{x:fe.cx,y:fe.cy}}})}),kr(le,"handleItemMouseLeave",function(){le.setState(function(){return{isTooltipActive:!1}})}),kr(le,"handleMouseMove",function(fe){fe.persist(),le.throttleTriggeredAfterMouseMove(fe)}),kr(le,"handleMouseLeave",function(fe){le.throttleTriggeredAfterMouseMove.cancel();var Te={isTooltipActive:!1};le.setState(Te),le.triggerSyncEvent(Te);var Ee=le.props.onMouseLeave;Xr(Ee)&&Ee(Te,fe)}),kr(le,"handleOuterEvent",function(fe){var Te=oW(fe),Ee=pa(le.props,"".concat(Te));if(Te&&Xr(Ee)){var Ze,st;/.*touch.*/i.test(Te)?st=le.getMouseInfo(fe.changedTouches[0]):st=le.getMouseInfo(fe),Ee((Ze=st)!==null&&Ze!==void 0?Ze:{},fe)}}),kr(le,"handleClick",function(fe){var Te=le.getMouseInfo(fe);if(Te){var Ee=Rt(Rt({},Te),{},{isTooltipActive:!0});le.setState(Ee),le.triggerSyncEvent(Ee);var Ze=le.props.onClick;Xr(Ze)&&Ze(Ee,fe)}}),kr(le,"handleMouseDown",function(fe){var Te=le.props.onMouseDown;if(Xr(Te)){var Ee=le.getMouseInfo(fe);Te(Ee,fe)}}),kr(le,"handleMouseUp",function(fe){var Te=le.props.onMouseUp;if(Xr(Te)){var Ee=le.getMouseInfo(fe);Te(Ee,fe)}}),kr(le,"handleTouchMove",function(fe){fe.changedTouches!=null&&fe.changedTouches.length>0&&le.throttleTriggeredAfterMouseMove(fe.changedTouches[0])}),kr(le,"handleTouchStart",function(fe){fe.changedTouches!=null&&fe.changedTouches.length>0&&le.handleMouseDown(fe.changedTouches[0])}),kr(le,"handleTouchEnd",function(fe){fe.changedTouches!=null&&fe.changedTouches.length>0&&le.handleMouseUp(fe.changedTouches[0])}),kr(le,"triggerSyncEvent",function(fe){le.props.syncId!==void 0&&Dg.emit(kg,le.props.syncId,fe,le.eventEmitterSymbol)}),kr(le,"applySyncEvent",function(fe){var Te=le.props,Ee=Te.layout,Ze=Te.syncMethod,st=le.state.updateId,We=fe.dataStartIndex,Xe=fe.dataEndIndex;if(fe.dataStartIndex!==void 0||fe.dataEndIndex!==void 0)le.setState(Rt({dataStartIndex:We,dataEndIndex:Xe},X({props:le.props,dataStartIndex:We,dataEndIndex:Xe,updateId:st},le.state)));else if(fe.activeTooltipIndex!==void 0){var St=fe.chartX,Mt=fe.chartY,Pt=fe.activeTooltipIndex,ht=le.state,kt=ht.offset,mt=ht.tooltipTicks;if(!kt)return;if(typeof Ze=="function")Pt=Ze(mt,fe);else if(Ze==="value"){Pt=-1;for(var Ct=0;Ct<mt.length;Ct++)if(mt[Ct].value===fe.activeLabel){Pt=Ct;break}}var _t=Rt(Rt({},kt),{},{x:kt.left,y:kt.top}),Qt=Math.min(St,_t.x+_t.width),qt=Math.min(Mt,_t.y+_t.height),gr=mt[Pt]&&mt[Pt].value,Gt=iv(le.state,le.props.data,Pt),vn=mt[Pt]?{x:Ee==="horizontal"?mt[Pt].coordinate:Qt,y:Ee==="horizontal"?qt:mt[Pt].coordinate}:GL;le.setState(Rt(Rt({},fe),{},{activeLabel:gr,activeCoordinate:vn,activePayload:Gt,activeTooltipIndex:Pt}))}else le.setState(fe)}),kr(le,"renderCursor",function(fe){var Te,Ee=le.state,Ze=Ee.isTooltipActive,st=Ee.activeCoordinate,We=Ee.activePayload,Xe=Ee.offset,St=Ee.activeTooltipIndex,Mt=Ee.tooltipAxisBandSize,Pt=le.getTooltipEventType(),ht=(Te=fe.props.active)!==null&&Te!==void 0?Te:Ze,kt=le.props.layout,mt=fe.key||"_recharts-cursor";return tt.createElement(y3e,{key:mt,activeCoordinate:st,activePayload:We,activeTooltipIndex:St,chartName:n,element:fe,isActive:ht,layout:kt,offset:Xe,tooltipAxisBandSize:Mt,tooltipEventType:Pt})}),kr(le,"renderPolarAxis",function(fe,Te,Ee){var Ze=pa(fe,"type.axisType"),st=pa(le.state,"".concat(Ze,"Map")),We=fe.type.defaultProps,Xe=We!==void 0?Rt(Rt({},We),fe.props):fe.props,St=st&&st[Xe["".concat(Ze,"Id")]];return ut.cloneElement(fe,Rt(Rt({},St),{},{className:tn(Ze,St.className),key:fe.key||"".concat(Te,"-").concat(Ee),ticks:Cu(St,!0)}))}),kr(le,"renderPolarGrid",function(fe){var Te=fe.props,Ee=Te.radialLines,Ze=Te.polarAngles,st=Te.polarRadius,We=le.state,Xe=We.radiusAxisMap,St=We.angleAxisMap,Mt=m0(Xe),Pt=m0(St),ht=Pt.cx,kt=Pt.cy,mt=Pt.innerRadius,Ct=Pt.outerRadius;return ut.cloneElement(fe,{polarAngles:Array.isArray(Ze)?Ze:Cu(Pt,!0).map(function(_t){return _t.coordinate}),polarRadius:Array.isArray(st)?st:Cu(Mt,!0).map(function(_t){return _t.coordinate}),cx:ht,cy:kt,innerRadius:mt,outerRadius:Ct,key:fe.key||"polar-grid",radialLines:Ee})}),kr(le,"renderLegend",function(){var fe=le.state.formattedGraphicalItems,Te=le.props,Ee=Te.children,Ze=Te.width,st=Te.height,We=le.props.margin||{},Xe=Ze-(We.left||0)-(We.right||0),St=Tk({children:Ee,formattedGraphicalItems:fe,legendWidth:Xe,legendContent:D});if(!St)return null;var Mt=St.item,Pt=OC(St,_3e);return ut.cloneElement(Mt,Rt(Rt({},Pt),{},{chartWidth:Ze,chartHeight:st,margin:We,onBBoxUpdate:le.handleLegendBBoxUpdate}))}),kr(le,"renderTooltip",function(){var fe,Te=le.props,Ee=Te.children,Ze=Te.accessibilityLayer,st=ua(Ee,vl);if(!st)return null;var We=le.state,Xe=We.isTooltipActive,St=We.activeCoordinate,Mt=We.activePayload,Pt=We.activeLabel,ht=We.offset,kt=(fe=st.props.active)!==null&&fe!==void 0?fe:Xe;return ut.cloneElement(st,{viewBox:Rt(Rt({},ht),{},{x:ht.left,y:ht.top}),active:kt,label:Pt,payload:kt?Mt:[],coordinate:St,accessibilityLayer:Ze})}),kr(le,"renderBrush",function(fe){var Te=le.props,Ee=Te.margin,Ze=Te.data,st=le.state,We=st.offset,Xe=st.dataStartIndex,St=st.dataEndIndex,Mt=st.updateId;return ut.cloneElement(fe,{key:fe.key||"_recharts-brush",onChange:jd(le.handleBrushChange,fe.props.onChange),data:Ze,x:rr(fe.props.x)?fe.props.x:We.left,y:rr(fe.props.y)?fe.props.y:We.top+We.height+We.brushBottom-(Ee.bottom||0),width:rr(fe.props.width)?fe.props.width:We.width,startIndex:Xe,endIndex:St,updateId:"brush-".concat(Mt)})}),kr(le,"renderReferenceElement",function(fe,Te,Ee){if(!fe)return null;var Ze=le,st=Ze.clipPathId,We=le.state,Xe=We.xAxisMap,St=We.yAxisMap,Mt=We.offset,Pt=fe.type.defaultProps||{},ht=fe.props,kt=ht.xAxisId,mt=kt===void 0?Pt.xAxisId:kt,Ct=ht.yAxisId,_t=Ct===void 0?Pt.yAxisId:Ct;return ut.cloneElement(fe,{key:fe.key||"".concat(Te,"-").concat(Ee),xAxis:Xe[mt],yAxis:St[_t],viewBox:{x:Mt.left,y:Mt.top,width:Mt.width,height:Mt.height},clipPathId:st})}),kr(le,"renderActivePoints",function(fe){var Te=fe.item,Ee=fe.activePoint,Ze=fe.basePoint,st=fe.childIndex,We=fe.isRange,Xe=[],St=Te.props.key,Mt=Te.item.type.defaultProps!==void 0?Rt(Rt({},Te.item.type.defaultProps),Te.item.props):Te.item.props,Pt=Mt.activeDot,ht=Mt.dataKey,kt=Rt(Rt({index:st,dataKey:ht,cx:Ee.x,cy:Ee.y,r:4,fill:Kx(Te.item),strokeWidth:2,stroke:"#fff",payload:Ee.payload,value:Ee.value},zr(Pt,!1)),kp(Pt));return Xe.push(te.renderActiveDot(Pt,kt,"".concat(St,"-activePoint-").concat(st))),Ze?Xe.push(te.renderActiveDot(Pt,Rt(Rt({},kt),{},{cx:Ze.x,cy:Ze.y}),"".concat(St,"-basePoint-").concat(st))):We&&Xe.push(null),Xe}),kr(le,"renderGraphicChild",function(fe,Te,Ee){var Ze=le.filterFormatItem(fe,Te,Ee);if(!Ze)return null;var st=le.getTooltipEventType(),We=le.state,Xe=We.isTooltipActive,St=We.tooltipAxis,Mt=We.activeTooltipIndex,Pt=We.activeLabel,ht=le.props.children,kt=ua(ht,vl),mt=Ze.props,Ct=mt.points,_t=mt.isRange,Qt=mt.baseLine,qt=Ze.item.type.defaultProps!==void 0?Rt(Rt({},Ze.item.type.defaultProps),Ze.item.props):Ze.item.props,gr=qt.activeDot,Gt=qt.hide,vn=qt.activeBar,cn=qt.activeShape,Ln=!!(!Gt&&Xe&&kt&&(gr||vn||cn)),ii={};st!=="axis"&&kt&&kt.props.trigger==="click"?ii={onClick:jd(le.handleItemMouseEnter,fe.props.onClick)}:st!=="axis"&&(ii={onMouseLeave:jd(le.handleItemMouseLeave,fe.props.onMouseLeave),onMouseEnter:jd(le.handleItemMouseEnter,fe.props.onMouseEnter)});var er=ut.cloneElement(fe,Rt(Rt({},Ze.props),ii));function Cr(Wi){return typeof St.dataKey=="function"?St.dataKey(Wi.payload):null}if(Ln)if(Mt>=0){var Pe,Nt;if(St.dataKey&&!St.allowDuplicatedCategory){var gn=typeof St.dataKey=="function"?Cr:"payload.".concat(St.dataKey.toString());Pe=Ry(Ct,gn,Pt),Nt=_t&&Qt&&Ry(Qt,gn,Pt)}else Pe=Ct==null?void 0:Ct[Mt],Nt=_t&&Qt&&Qt[Mt];if(cn||vn){var Vr=fe.props.activeIndex!==void 0?fe.props.activeIndex:Mt;return[ut.cloneElement(fe,Rt(Rt(Rt({},Ze.props),ii),{},{activeIndex:Vr})),null,null]}if(!an(Pe))return[er].concat(x2(le.renderActivePoints({item:Ze,activePoint:Pe,basePoint:Nt,childIndex:Mt,isRange:_t})))}else{var vt,Tn=(vt=le.getItemByXY(le.state.activeCoordinate))!==null&&vt!==void 0?vt:{graphicalItem:er},un=Tn.graphicalItem,wi=un.item,br=wi===void 0?fe:wi,jn=un.childIndex,_i=Rt(Rt(Rt({},Ze.props),ii),{},{activeIndex:jn});return[ut.cloneElement(br,_i),null,null]}return _t?[er,null,null]:[er,null]}),kr(le,"renderCustomized",function(fe,Te,Ee){return ut.cloneElement(fe,Rt(Rt({key:"recharts-customized-".concat(Ee)},le.props),le.state))}),kr(le,"renderMap",{CartesianGrid:{handler:qd,once:!0},ReferenceArea:{handler:le.renderReferenceElement},ReferenceLine:{handler:qd},ReferenceDot:{handler:le.renderReferenceElement},XAxis:{handler:qd},YAxis:{handler:qd},Brush:{handler:le.renderBrush,once:!0},Bar:{handler:le.renderGraphicChild},Line:{handler:le.renderGraphicChild},Area:{handler:le.renderGraphicChild},Radar:{handler:le.renderGraphicChild},RadialBar:{handler:le.renderGraphicChild},Scatter:{handler:le.renderGraphicChild},Pie:{handler:le.renderGraphicChild},Funnel:{handler:le.renderGraphicChild},Tooltip:{handler:le.renderCursor,once:!0},PolarGrid:{handler:le.renderPolarGrid,once:!0},PolarAngleAxis:{handler:le.renderPolarAxis},PolarRadiusAxis:{handler:le.renderPolarAxis},Customized:{handler:le.renderCustomized}}),le.clipPathId="".concat((se=K.id)!==null&&se!==void 0?se:v6("recharts"),"-clip"),le.throttleTriggeredAfterMouseMove=AD(le.triggeredAfterMouseMove,(ve=K.throttleDelay)!==null&&ve!==void 0?ve:1e3/60),le.state={},le}return I3e(te,ne),E3e(te,[{key:"componentDidMount",value:function(){var se,ve;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(se=this.props.margin.left)!==null&&se!==void 0?se:0,top:(ve=this.props.margin.top)!==null&&ve!==void 0?ve:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var se=this.props,ve=se.children,le=se.data,fe=se.height,Te=se.layout,Ee=ua(ve,vl);if(Ee){var Ze=Ee.props.defaultIndex;if(!(typeof Ze!="number"||Ze<0||Ze>this.state.tooltipTicks.length-1)){var st=this.state.tooltipTicks[Ze]&&this.state.tooltipTicks[Ze].value,We=iv(this.state,le,Ze,st),Xe=this.state.tooltipTicks[Ze].coordinate,St=(this.state.offset.top+fe)/2,Mt=Te==="horizontal",Pt=Mt?{x:Xe,y:St}:{y:Xe,x:St},ht=this.state.formattedGraphicalItems.find(function(mt){var Ct=mt.item;return Ct.type.name==="Scatter"});ht&&(Pt=Rt(Rt({},Pt),ht.props.points[Ze].tooltipPosition),We=ht.props.points[Ze].tooltipPayload);var kt={activeTooltipIndex:Ze,isTooltipActive:!0,activeLabel:st,activePayload:We,activeCoordinate:Pt};this.setState(kt),this.renderCursor(Ee),this.accessibilityManager.setIndex(Ze)}}}},{key:"getSnapshotBeforeUpdate",value:function(se,ve){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ve.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==se.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==se.margin){var le,fe;this.accessibilityManager.setDetails({offset:{left:(le=this.props.margin.left)!==null&&le!==void 0?le:0,top:(fe=this.props.margin.top)!==null&&fe!==void 0?fe:0}})}return null}},{key:"componentDidUpdate",value:function(se){ky([ua(se.children,vl)],[ua(this.props.children,vl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var se=ua(this.props.children,vl);if(se&&typeof se.props.shared=="boolean"){var ve=se.props.shared?"axis":"item";return C.indexOf(ve)>=0?ve:y}return y}},{key:"getMouseInfo",value:function(se){if(!this.container)return null;var ve=this.container,le=ve.getBoundingClientRect(),fe=Dre(le),Te={chartX:Math.round(se.pageX-fe.left),chartY:Math.round(se.pageY-fe.top)},Ee=le.width/ve.offsetWidth||1,Ze=this.inRange(Te.chartX,Te.chartY,Ee);if(!Ze)return null;var st=this.state,We=st.xAxisMap,Xe=st.yAxisMap,St=this.getTooltipEventType();if(St!=="axis"&&We&&Xe){var Mt=m0(We).scale,Pt=m0(Xe).scale,ht=Mt&&Mt.invert?Mt.invert(Te.chartX):null,kt=Pt&&Pt.invert?Pt.invert(Te.chartY):null;return Rt(Rt({},Te),{},{xValue:ht,yValue:kt})}var mt=DC(this.state,this.props.data,this.props.layout,Ze);return mt?Rt(Rt({},Te),mt):null}},{key:"inRange",value:function(se,ve){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,fe=this.props.layout,Te=se/le,Ee=ve/le;if(fe==="horizontal"||fe==="vertical"){var Ze=this.state.offset,st=Te>=Ze.left&&Te<=Ze.left+Ze.width&&Ee>=Ze.top&&Ee<=Ze.top+Ze.height;return st?{x:Te,y:Ee}:null}var We=this.state,Xe=We.angleAxisMap,St=We.radiusAxisMap;if(Xe&&St){var Mt=m0(Xe);return cM({x:Te,y:Ee},Mt)}return null}},{key:"parseEventsOfWrapper",value:function(){var se=this.props.children,ve=this.getTooltipEventType(),le=ua(se,vl),fe={};le&&ve==="axis"&&(le.props.trigger==="click"?fe={onClick:this.handleClick}:fe={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var Te=kp(this.props,this.handleOuterEvent);return Rt(Rt({},Te),fe)}},{key:"addListener",value:function(){Dg.on(kg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Dg.removeListener(kg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(se,ve,le){for(var fe=this.state.formattedGraphicalItems,Te=0,Ee=fe.length;Te<Ee;Te++){var Ze=fe[Te];if(Ze.item===se||Ze.props.key===se.key||ve===Pl(Ze.item.type)&&le===Ze.childIndex)return Ze}return null}},{key:"renderClipPath",value:function(){var se=this.clipPathId,ve=this.state.offset,le=ve.left,fe=ve.top,Te=ve.height,Ee=ve.width;return tt.createElement("defs",null,tt.createElement("clipPath",{id:se},tt.createElement("rect",{x:le,y:fe,height:Te,width:Ee})))}},{key:"getXScales",value:function(){var se=this.state.xAxisMap;return se?Object.entries(se).reduce(function(ve,le){var fe=IC(le,2),Te=fe[0],Ee=fe[1];return Rt(Rt({},ve),{},kr({},Te,Ee.scale))},{}):null}},{key:"getYScales",value:function(){var se=this.state.yAxisMap;return se?Object.entries(se).reduce(function(ve,le){var fe=IC(le,2),Te=fe[0],Ee=fe[1];return Rt(Rt({},ve),{},kr({},Te,Ee.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(se){var ve;return(ve=this.state.xAxisMap)===null||ve===void 0||(ve=ve[se])===null||ve===void 0?void 0:ve.scale}},{key:"getYScaleByAxisId",value:function(se){var ve;return(ve=this.state.yAxisMap)===null||ve===void 0||(ve=ve[se])===null||ve===void 0?void 0:ve.scale}},{key:"getItemByXY",value:function(se){var ve=this.state,le=ve.formattedGraphicalItems,fe=ve.activeItem;if(le&&le.length)for(var Te=0,Ee=le.length;Te<Ee;Te++){var Ze=le[Te],st=Ze.props,We=Ze.item,Xe=We.type.defaultProps!==void 0?Rt(Rt({},We.type.defaultProps),We.props):We.props,St=Pl(We.type);if(St==="Bar"){var Mt=(st.data||[]).find(function(mt){return oce(se,mt)});if(Mt)return{graphicalItem:Ze,payload:Mt}}else if(St==="RadialBar"){var Pt=(st.data||[]).find(function(mt){return cM(se,mt)});if(Pt)return{graphicalItem:Ze,payload:Pt}}else if(B4(Ze,fe)||F4(Ze,fe)||r6(Ze,fe)){var ht=Hue({graphicalItem:Ze,activeTooltipItem:fe,itemData:Xe.data}),kt=Xe.activeIndex===void 0?ht:Xe.activeIndex;return{graphicalItem:Rt(Rt({},Ze),{},{childIndex:kt}),payload:r6(Ze,fe)?Xe.data[ht]:Ze.props.data[ht]}}}return null}},{key:"render",value:function(){var se=this;if(!eE(this))return null;var ve=this.props,le=ve.children,fe=ve.className,Te=ve.width,Ee=ve.height,Ze=ve.style,st=ve.compact,We=ve.title,Xe=ve.desc,St=OC(ve,v3e),Mt=zr(St,!1);if(st)return tt.createElement(yC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},tt.createElement(zy,R0({},Mt,{width:Te,height:Ee,title:We,desc:Xe}),this.renderClipPath(),rE(le,this.renderMap)));if(this.props.accessibilityLayer){var Pt,ht;Mt.tabIndex=(Pt=this.props.tabIndex)!==null&&Pt!==void 0?Pt:0,Mt.role=(ht=this.props.role)!==null&&ht!==void 0?ht:"application",Mt.onKeyDown=function(mt){se.accessibilityManager.keyboardEvent(mt)},Mt.onFocus=function(){se.accessibilityManager.focus()}}var kt=this.parseEventsOfWrapper();return tt.createElement(yC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},tt.createElement("div",R0({className:tn("recharts-wrapper",fe),style:Rt({position:"relative",cursor:"default",width:Te,height:Ee},Ze)},kt,{ref:function(Ct){se.container=Ct}}),tt.createElement(zy,R0({},Mt,{width:Te,height:Ee,title:We,desc:Xe,style:z3e}),this.renderClipPath(),rE(le,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(ut.Component);kr(ie,"displayName",n),kr(ie,"defaultProps",Rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},B)),kr(ie,"getDerivedStateFromProps",function(ne,te){var K=ne.dataKey,se=ne.data,ve=ne.children,le=ne.width,fe=ne.height,Te=ne.layout,Ee=ne.stackOffset,Ze=ne.margin,st=te.dataStartIndex,We=te.dataEndIndex;if(te.updateId===void 0){var Xe=kC(ne);return Rt(Rt(Rt({},Xe),{},{updateId:0},X(Rt(Rt({props:ne},Xe),{},{updateId:0}),te)),{},{prevDataKey:K,prevData:se,prevWidth:le,prevHeight:fe,prevLayout:Te,prevStackOffset:Ee,prevMargin:Ze,prevChildren:ve})}if(K!==te.prevDataKey||se!==te.prevData||le!==te.prevWidth||fe!==te.prevHeight||Te!==te.prevLayout||Ee!==te.prevStackOffset||!N0(Ze,te.prevMargin)){var St=kC(ne),Mt={chartX:te.chartX,chartY:te.chartY,isTooltipActive:te.isTooltipActive},Pt=Rt(Rt({},DC(te,se,Te)),{},{updateId:te.updateId+1}),ht=Rt(Rt(Rt({},St),Mt),Pt);return Rt(Rt(Rt({},ht),X(Rt({props:ne},ht),te)),{},{prevDataKey:K,prevData:se,prevWidth:le,prevHeight:fe,prevLayout:Te,prevStackOffset:Ee,prevMargin:Ze,prevChildren:ve})}if(!ky(ve,te.prevChildren)){var kt,mt,Ct,_t,Qt=ua(ve,h2),qt=Qt&&(kt=(mt=Qt.props)===null||mt===void 0?void 0:mt.startIndex)!==null&&kt!==void 0?kt:st,gr=Qt&&(Ct=(_t=Qt.props)===null||_t===void 0?void 0:_t.endIndex)!==null&&Ct!==void 0?Ct:We,Gt=qt!==st||gr!==We,vn=!an(se),cn=vn&&!Gt?te.updateId:te.updateId+1;return Rt(Rt({updateId:cn},X(Rt(Rt({props:ne},te),{},{updateId:cn,dataStartIndex:qt,dataEndIndex:gr}),te)),{},{prevChildren:ve,dataStartIndex:qt,dataEndIndex:gr})}return null}),kr(ie,"renderActiveDot",function(ne,te,K){var se;return ut.isValidElement(ne)?se=ut.cloneElement(ne,te):Xr(ne)?se=ne(te):se=tt.createElement(Qx,te),tt.createElement(Pn,{className:"recharts-active-dot",key:K},se)});var Q=ut.forwardRef(function(te,K){return tt.createElement(ie,R0({},te,{ref:K}))});return Q.displayName=ie.displayName,Q},HL=WL({chartName:"BarChart",GraphicalChild:xc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:T6},{axisType:"yAxis",AxisComp:ib}],formatAxisMap:P0e}),R9=WL({chartName:"PieChart",GraphicalChild:Ga,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:z4},{axisType:"radiusAxis",AxisComp:k4}],formatAxisMap:Cse,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Iu=[{__comment1__:"  .",__comment2__:"      .",name:"",uv:1e3,pv:"3"},{name:"",uv:2e3,pv:"2"},{name:"",uv:4e3,pv:"1"}],W3e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABEZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAPCgAwAEAAAAAQAAAPAAAAAA1egqywAAAD9QTFRFTGlx/8w5/846Wmh4/8054cFa/8w4/8g2/8g1/8o3hJCe/40LhZKf/6MbhJGe/6Qb/8s4g5Cd/34AS1lq/4sJ2+ik8AAAABB0Uk5TAHAy3U0amMPZ6ZrmTb/O+0HLq4cAAAVfSURBVHja7d3bsps6DAZgcH2CAPGmef9nbXpud8MKsSRLjvRf9YJZnW9sC0OMPQwWi8ViseiM82OMKaU8TaVMU77/M8bRu/B20nCXpjvyKFO6u8PbYGMup5Jj/2gfU3kpqWe0j6UqyXdZoOJUqjNF19m4HXMBJo+ho8YtKOmkmbG430azfLJLBTXCC5hH5gonh1hIIrVjj4Uso8TBmwthslfSm//o16Juy34q9BHUr2Npkhg0jN6/RrJT050FdetYmoa7W4dcGoe3W7upNM/kdHnvYZuE+MIUJvFY2DIq896LtTIvg5jZ27xX+1JUiQV4m9ZqpvsvmzjI8Dabc7WfPx+K2zxJpCImScUNqfHt2BVR8VoKVrNhnIqwJEUDuMEwdkVgvKYO/e0tl6oOTfoYIa1C/wpVpY5CvVSV2hWxoalbWS44K6pYdDfjSTKYoG6JbmCKJpbdwPgPEcIbGH/2kaWDJ2UNjN3EWT4YtYl9KbqaOPUARpxRh9JFnKaShTv5yH2A0cqWK50E6ykx9gKOOqbR6H3al6KrT8d+wFFTjUbr06F0FKdrCOPMp2NP4KRrCKMM4q6GMMYgHvsCj7qGMMYgTn2Bs56J9I8oq1nwquV6A3tdRRpepmNv4KirSMPvS7k3MHRyWbpLMPBb34ahN2J1YNcf2Bv4bV9oKQWPuqbSBjawjWED28Tjtcc1VeDrbb/nevahOl9vt9uVFRzg3K+5nGnn/PPyG+drS4h3/53b80a+/HE54wsAwBDc91fEl78uB4DZXuLd9lfEl/9dXf3fQn9riRgd+rthOu+9Fzqut5Z44I/E/3jrwdD30iNSj/5QfHlwLRfYI4KPxNcHl1aXLehvSwET/Fj88MpqMHjNw4Q2hg/Ej703prtS/X0p7+fEj737halI11etaT8lPvDumalmAapWOiM+8tY2MMIqnvrHh/W5+NA7sdUsyA+mT8X4XozltIA1AE/E+F6UBdOQtzwfigm8KKtpQe8ADsU0XpwPxROJmMSLs/kB7GX8kZjCi/TNA/BF3trOi/WlVm4mBnqxvsWD/sC0NvKifZkGXuixtvHifU+bmojBXrwNauC/MK0NvJjfxE/0YrgXc3sahDW1K7kXc3cajPVpK7G3oG7NG2nFGF7cbdNQFqitlF7sXdMSoRjFi71pGs7ah5XMi7/XY6IS43jxd8VDWt6y0ngp9j3EaeJ/3s/j/FmKnS2dZDDJxpZRLphm69IgF0x0/sEoFUy2p3aWCabbYNrJBBNuIR4lgkk3ic/ywLQHHzh5YOKjLaI0MPnhJUkWOJMfyAPcGR8b3ODIJS8J3OTgtCgH3OgwwCQFnNp4QWeIYYJzs7OIAYULEdzyXN76cwDxwG3PIfb84MbnLntucPMziD0vmOHMZc8JZjlj2vOBmc7U9lxgtlPTK+5OGGA2b40YAczorZhlwsGs3tfFYDCz92UxFMzufVUMBAvwviiGgcdBRFwrcByEZGwDToOYxCZgJwd8fjEmADwK8p7v1PXgNIhKJgd7WWBPDRbWwKdHcTXYSwNHWnCW5j07+6gFR3HggRbs5IETJVhejx6GT58J88nABjawgQ1sYAMb2MAGNrCBDWxgAxuYI/N/hJkNbGADG9jAsCyU4MXAAkIJDhLBG513k+ilrFqzSPCibAhTDmKZXro+PQsFL8p6NFmd3qR6qZpYbAMTNbHcBh6GoGaWRVio50F0Nk0dmkK8BengoGgAE9yblmFQJe7CiyjuxHsfx5uOeoV7P56HrrKo6c6/ujWokecw9JeleiRvy9BnlqpWnnvlVpn71v4Yzcu8bc+797bNyxtoLRaLxQLJF347XoCgciNeAAAAAElFTkSuQmCC",H3e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwBAMAAADMe/ShAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABEZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAPCgAwAEAAAAAQAAAPAAAAAA1egqywAAACRQTFRFTGlx/8tY/81Y/7U3/8ZO/9Jb/8dQ/8lS/85Z/85Z/81Y/68xIltSqwAAAAp0Uk5TACmn2WgSikTnyExRkawAAAPiSURBVHja7dzPTxNBFAfwWeh26a1GjQQvJMZEe8If8eKlYBOSeqnEYJTLGjEmeNkDGlMuaJTEntCT9gRNgfbdDAgH/zlB4y/c3ZmdeW8eIe97N5/M7HxnZl2tUhKJRCKRICe8sNxoLDZmX3hVH8x8hl8ZfFz0hIfLV+FY3kx7cF92ISXDx8RsdAUyspZQzvIMZGfwjMwNapCbtRbRNHdBk+0qhXu/A9r0CB70PJhkmPC4hzLybJc6hjD0Wn7X1V8rDFEOCrgAb/HgJhTKZSz3YTEXBonvhfX7MeNs0DUonA8Y8CuwSB1hom1cjMlesoLdV/acnQtDx20k7FrC8NoNHgfrOJU5sndhxwVuO8AuQw46wDPkcQCWIbsN2GHIjgOGgeU1KHQcMMA7O7ji6sLQDq45wzDp71j6N30beAIBtmmU+9KyPCoqGK7N8lpCgYvfgQIcFzZ5ZtpirptIMMQ8M114rito8JBppguua5zdw+KIKuO5xV4qHiHC0PK/bRU+G0NMt0ihyqjwkOkRFzmUl3DhSZ5HXOAhl5Fh4yaPIcMD0ya3kWHj7bqGDa/yrC3jt7cSOtzzfQkoeE5M4MN1jn3LfO/q4sNbPIva8K0xIoB7HDu18bKuUMCJ/1uA+YtMkwJe5zgijrLBU2OzY4LCNSlyQAL3ePaPw9sP0/4BoP/71BEaOOHZuExO5DEaOObZMU2uAm0aeJ0L3uA5I0wuP0TwDscdkxXun1y4dsrgbYF9wT2BBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggR1gms/HoP+cWqGCdZ/a2lSw7vtPhwoesHwvP0rM8RH3KFscZdIWKgLCJBxl0hWqSQn3/fxngZRCtTjKlF+oCVp4k6NMuYWKgDgJR5nyCtWkhvscZcopVBnIE3OUKbtQXXp4yFKmrEKN+YBXOcqUUSj6MmUUqgxeEvu85uVf+Zp+4D5Hi9Ob3PEDD/z86+aUnByYbarZFhdbndg2ELYtM/TykNN+7mfcB5z2Ew6Bh0Kl/ybKHD2c8YtO859o2fdPM9/a7p3JyZ0b2tzM+/PnlWVWvmlzoChyUQ9/OV3wgh7+SgKP6uGp0wWX9XBMAkd6OCGBQz3cIoHVbZ27S+Oquzp4jwhe4KmxUiM6eJIIjngWtX51Ua0t7cF4QAaPcmyYP+6D+XCVDFbP89x9Ojd/rqcI4YBppnN3zT1KV5Wy4TopnL289mnd7GtITAxnDZl6wJlPuU4Oq7Np7jV6V4Upk73f8gCr6L/TcTdRXlI6Ju/WleKQ/bmHe/aTP+6tqvKZc5d+stenle8Ey43GbFVJJBKJRIKe74tZ2CY1tYkqAAAAAElFTkSuQmCC",Z3e=()=>{const[e,t]=ut.useState([]),n=jl();ut.useEffect(()=>{if(Iu&&Iu.length>0){const a=Iu.map(D=>({name:D.name,uv:D.uv,pv:D.pv})).sort((D,j)=>j.uv-D.uv);t(a)}},[]);const o=()=>{n("/home")},h=[{name:"",value:5},{name:"",value:5}],y=[{name:"10 ~ 20",value:5,color:"#FFBB28"},{name:"20 ~ 30",value:2,color:"#FF8042"},{name:"30 ~ 40",value:3,color:"#0088FE"},{name:"40 ~ 50",value:2,color:"#00C49F"},{name:"50 ~ 60",value:1,color:"#BA4C9D"}],w=Math.PI/180,C=({cx:a,cy:D,midAngle:j,innerRadius:B,outerRadius:H,percent:X,index:ie})=>{const Q=B+(H-B)*.5,ne=a+Q*Math.cos(-j*w),te=D+Q*Math.sin(-j*w);return Ne.jsx("text",{x:ne,y:te,fill:"white",textAnchor:ne>a?"start":"end",dominantBaseline:"central",children:`${(X*100).toFixed(0)}%`})};return Ne.jsxs("div",{className:"resultGraph_container",children:[Ne.jsx("div",{className:"backIcon",onClick:o,children:Ne.jsx("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ne.jsx("path",{d:"M23.75 15H6.25M6.25 15L15 23.75M6.25 15L15 6.25",stroke:"#1E1E1E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Ne.jsxs("div",{className:"resultGraph_wrapper",children:[Ne.jsx("h3",{className:"result_text",children:"  "}),Ne.jsx("div",{className:"graph_stick1_container",children:Ne.jsx(j0,{width:"100%",height:"100%",children:Ne.jsxs(HL,{data:e,children:[Ne.jsx(T6,{dataKey:"name",tick:{fontSize:21,fontFamily:"Pretendard Variable",fontWeight:500},tickLine:!1}),Ne.jsx(xc,{dataKey:"uv",fill:"#3182F6",children:Ne.jsx(Hs,{dataKey:"pv",position:"top",style:{fontSize:14,fontWeight:"bold",fill:"black"}})})]})})}),Ne.jsxs("div",{className:"jungbobogi1",children:[Ne.jsxs("div",{className:"bell_Text",children:[Ne.jsx("img",{src:H3e,style:{width:25,height:25,marginTop:13},alt:"bell icon"}),Ne.jsx("h3",{className:"activityText1",children:"   "})]}),Ne.jsxs("div",{className:"circleResult",children:[Ne.jsx("div",{className:"circles",children:Ne.jsx("p",{children:""})}),Ne.jsx("div",{className:"circles",children:Ne.jsx("p",{children:""})}),Ne.jsx("div",{className:"circles",children:Ne.jsx("p",{children:""})}),Ne.jsx("div",{className:"circles",children:Ne.jsx("p",{children:""})})]})]}),Ne.jsxs("div",{className:"jungbobogi2",children:[Ne.jsxs("div",{className:"bell_Text",children:[Ne.jsx("img",{src:W3e,style:{width:25,height:25,marginTop:13},alt:"light icon"}),Ne.jsx("h3",{className:"activityText1",children:"  "})]}),Ne.jsxs("div",{className:"ageBox",children:[Ne.jsx("p",{className:"minitext1",children:"<    >"}),Ne.jsx("div",{className:"pieChart",children:Ne.jsx(j0,{children:Ne.jsxs(R9,{children:[Ne.jsx(qs,{layout:"vertical",verticalAlign:"top",align:"top"}),Ne.jsx(Ga,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:C,outerRadius:120,fill:"#8884d8",dataKey:"value",children:y.map((a,D)=>Ne.jsx($u,{fill:a.color},`cell-${D}`))})]})})})," "]}),Ne.jsxs("div",{className:"genderBox",children:[Ne.jsx("p",{className:"minitext1",children:"<   >"}),Ne.jsx("div",{className:"pieChart",children:Ne.jsx(j0,{children:Ne.jsxs(R9,{children:[Ne.jsx(qs,{layout:"vertical",verticalAlign:"top",align:"top"}),Ne.jsx(Ga,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:C,outerRadius:120,fill:"#8884d8",dataKey:"value",children:y.map((a,D)=>Ne.jsx($u,{fill:a.color},`cell-${D}`))})]})})})," "]})]}),Ne.jsx("div",{className:"jungbobogi3",children:Ne.jsx("div",{className:"competitorBox"})})]})]})},X3e="/assets/Men-D8U_u-ty.png",Y3e="_wrapper_dtg2t_1",K3e="_background_dtg2t_7",J3e="_logo_dtg2t_14",Q3e="_text_container_dtg2t_20",ehe="_text1_dtg2t_28",the="_text2_dtg2t_35",rhe="_card_dtg2t_42",nhe="_expanded_dtg2t_58",ihe="_cardContent_dtg2t_67",ohe="_toggler_dtg2t_79",ahe="_profile_dtg2t_84",she="_profileTextContainer_dtg2t_90",lhe="_profileText_dtg2t_90",che="_result_text_dtg2t_103",uhe="_graph_stick1_container_dtg2t_115",hhe="_jungbobogi1_dtg2t_120",fhe="_appear_dtg2t_1",dhe="_appear_from_bottom_dtg2t_1",phe="_jungbobogi2_dtg2t_131",mhe="_activityText1_dtg2t_151",ghe="_activityText2_dtg2t_160",yhe="_circleResult_dtg2t_169",_he="_circles_dtg2t_177",vhe="_backIcon_dtg2t_197",xhe="_bell_Text_dtg2t_202",bhe="_pieChart_dtg2t_208",whe="_minitext1_dtg2t_214",Ahe="_minitext2_dtg2t_222",The="_ageBox_dtg2t_228",She="_genderBox_dtg2t_236",Ehe="_nextIconContainer_dtg2t_242",Phe="_jungbobogi3_dtg2t_251",Mhe="_competitorBox_dtg2t_265",pi={wrapper:Y3e,background:K3e,logo:J3e,text_container:Q3e,text1:ehe,text2:the,card:rhe,expanded:nhe,cardContent:ihe,toggler:ohe,profile:ahe,profileTextContainer:she,profileText:lhe,result_text:che,graph_stick1_container:uhe,jungbobogi1:hhe,appear:fhe,appear_from_bottom:dhe,jungbobogi2:phe,"recharts-surface":"_recharts-surface_dtg2t_147",activityText1:mhe,activityText2:ghe,circleResult:yhe,circles:_he,backIcon:vhe,bell_Text:xhe,pieChart:bhe,minitext1:whe,minitext2:Ahe,ageBox:The,genderBox:She,nextIconContainer:Ehe,jungbobogi3:Phe,competitorBox:Mhe},Che=()=>{const[e,t]=ut.useState(!1),[n,o]=ut.useState([]),h=jl(),y=()=>t(j=>!j);ut.useEffect(()=>{if(Iu&&Iu.length>0){const j=Iu.map(B=>({name:B.name,uv:B.uv,pv:B.pv})).sort((B,H)=>H.uv-B.uv);o(j)}},[Iu]);const w=[{name:"",value:5},{name:"",value:5}],C=[{name:"10 ~ 20",value:5,color:"#71C1D8"},{name:"20 ~ 30",value:2,color:"#51A2E7"},{name:"30 ~ 40",value:3,color:"#A1F0C1"},{name:"40 ~ 50",value:2,color:"#99B1A4"},{name:"50 ~ 60",value:1,color:"#E0C060"}],a=Math.PI/180,D=({cx:j,cy:B,midAngle:H,innerRadius:X,outerRadius:ie,percent:Q})=>{const ne=X+(ie-X)*.5,te=j+ne*Math.cos(-H*a),K=B+ne*Math.sin(-H*a);return Ne.jsx("text",{x:te,y:K,fill:"black",textAnchor:te>j?"start":"end",dominantBaseline:"central",children:`${(Q*100).toFixed(0)}%`})};return Ne.jsxs("div",{className:pi.wrapper,children:[Ne.jsxs("div",{className:pi.background,children:[Ne.jsx("div",{className:pi.logo,onClick:()=>h("/home"),children:Ne.jsx("img",{src:ex,alt:"Logo"})}),Ne.jsxs("div",{className:pi.text_container,children:[Ne.jsx("h3",{className:pi.text1,children:"   "}),Ne.jsx("h3",{className:pi.text2,children:" ."})]})]}),Ne.jsxs("div",{className:`${pi.card} ${e?pi.expanded:""}`,onClick:y,children:[Ne.jsx("div",{className:pi.toggler,children:Ne.jsx("svg",{width:"71",height:"8",viewBox:"0 0 71 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ne.jsx("rect",{width:"71",height:"8",rx:"4",fill:"#D9D9D9"})})}),Ne.jsxs("div",{className:pi.cardContent,children:[Ne.jsx("h3",{className:pi.result_text,children:"  "}),Ne.jsxs("div",{className:pi.profile,children:[Ne.jsx("img",{src:X3e,alt:"Profile",style:{height:50,width:50,marginBottom:50}}),Ne.jsx("div",{className:pi.profileTextContainer,children:Ne.jsx("h3",{className:pi.profileText,children:"  3    ."})})]}),Ne.jsx("div",{className:pi.graph_stick1_container,children:Ne.jsx(j0,{width:"100%",height:270,children:Ne.jsxs(HL,{data:n,children:[Ne.jsx(T6,{dataKey:"name",tick:{fontSize:21,fontFamily:"Pretendard Variable",fontWeight:500},tickLine:!1}),Ne.jsx(xc,{dataKey:"uv",fill:"#3182F6",children:Ne.jsx(Hs,{dataKey:"pv",position:"top",style:{fontSize:14,fontWeight:"bold",fill:"black"}})})]})})}),Ne.jsxs("div",{className:pi.jungbobogi1,children:[Ne.jsx("div",{className:"bell_Text",children:Ne.jsx("h3",{className:pi.activityText1,children:"   "})}),Ne.jsx("div",{className:pi.circleResult,children:["","","",""].map((j,B)=>Ne.jsx("div",{className:pi.circles,children:Ne.jsx("p",{children:j})},B))})]}),Ne.jsxs("div",{className:pi.jungbobogi2,children:[Ne.jsx("div",{className:pi.bell_Text,children:Ne.jsx("h3",{className:"activityText1",children:"  "})}),Ne.jsxs("div",{className:"ageBox",children:[Ne.jsx("div",{className:pi.minitextContainer,children:Ne.jsx("p",{className:"minitext1",children:"    "})}),Ne.jsx("div",{className:"pieChart",children:Ne.jsx(j0,{width:"100%",height:400,children:Ne.jsxs(R9,{fontSize:20,children:[Ne.jsx(qs,{layout:"vertical",verticalAlign:"top",align:"top"}),Ne.jsx(Ga,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:D,outerRadius:120,fill:"#71C1D8",dataKey:"value",children:C.map((j,B)=>Ne.jsx($u,{fill:j.color},`cell-${B}`))})]})})})]}),Ne.jsxs("div",{className:"genderBox",children:[Ne.jsx("p",{className:"minitext1",children:"   "}),Ne.jsx("div",{className:"pieChart",children:Ne.jsx(j0,{width:"100%",height:400,children:Ne.jsxs(R9,{fontSize:20,children:[Ne.jsx(qs,{layout:"vertical",verticalAlign:"top",align:"top"}),Ne.jsx(Ga,{data:C,cx:"50%",cy:"50%",labelLine:!1,label:D,outerRadius:120,fill:"#8884d8",dataKey:"value",children:C.map((j,B)=>Ne.jsx($u,{fill:j.color},`cell-${B}`))})]})})})]})]})]})]})]})},Ihe="_wrapper_r78vk_1",Ohe="_banner_r78vk_5",Rhe="_logo_r78vk_11",Dhe="_textContainer_r78vk_17",khe="_text1_r78vk_25",Lhe="_text2_r78vk_32",zhe="_titleContainer_r78vk_39",Bhe="_mediumTitle_r78vk_46",Fhe="_mediumTitleMini_r78vk_56",Nhe="_profileContainerWrapper_r78vk_66",jhe="_profileContainer_r78vk_66",$he="_profile_r78vk_66",Uhe="_profileInform_r78vk_84",Vhe="_contentWrapper_r78vk_94",Ghe="_contentContainer_r78vk_103",qhe="_contextContainer_r78vk_111",Whe="_context_r78vk_111",Hhe="_keywordContainer_r78vk_129",Zhe="_keyword_r78vk_129",Xhe="_miniTitleContainer_r78vk_166",Yhe="_miniTitle_r78vk_166",Khe="_miniTitleContainer2_r78vk_183",Jhe="_miniTitle2_r78vk_188",Qhe="_graph_r78vk_192",e5e="_contextContainer2_r78vk_197",t5e="_footer_r78vk_205",r5e="_footerContainer_r78vk_218",n5e="_footerSection_r78vk_226",i5e="_footerBottom_r78vk_258",ln={wrapper:Ihe,banner:Ohe,logo:Rhe,textContainer:Dhe,text1:khe,text2:Lhe,titleContainer:zhe,mediumTitle:Bhe,mediumTitleMini:Fhe,profileContainerWrapper:Nhe,profileContainer:jhe,profile:$he,profileInform:Uhe,contentWrapper:Vhe,contentContainer:Ghe,contextContainer:qhe,context:Whe,keywordContainer:Hhe,keyword:Zhe,miniTitleContainer:Xhe,miniTitle:Yhe,miniTitleContainer2:Khe,miniTitle2:Jhe,graph:Qhe,contextContainer2:e5e,footer:t5e,footerContainer:r5e,footerSection:n5e,footerBottom:i5e},o5e="/assets/analysist-DXvmLWxm.jpg",zg="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAOAA8DAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+2Nfi58MZNI8da/F468Mz6N8MrvU7Dx/qEGq209v4TvdHtVvNStNYMLu1tc2sDDfDtaR5Q9tEr3MbxL9NLgziyON4fy6fD2a08dxXRwuI4cw1TCVadTOaGNquhha2BU1FVaVaovdndRUHGrNxpSjN+OuIcjlh81xcc1wUsNklSvSzatCvCUMvq4aCqVqeJ5W3CdOL1jZtyThFOacV+Z3wb8WfG/8AbY/aE1X4y+G/GPjP4P8A7Ovwyt9e8I+BzohhivPHN5qCSW9xc3NjrFpe6Le3twv2HWtakv8AS9StvDy2ehaHp0basLvXIf6r44ybgHwG8NcHwPmmSZFxt4m8V1MuzrP1j+edHh+hhnCrTpUsRga1DHUKFN/WMDgY4fF4WrmbrZhmGJksH7HAT/E+HMfxP4m8X1+JMFmOZcO8HZJDF5flf1bljUzSpWUoTnOliKdTDVKs17LE4mVWhXhg1TwuFop4hVMVHE+Pf/BN231b4w6LcfCfx1L8OPhl8avEH9n/ABU8EWs+pRWyPpNvqHjaWXw9p9or6ZqFjdvoVzc6foutmKy8Oa8be701pdOkj07TO/w6+lFUwfBOOp8Y8PQ4o4r4Dy36zwhn9anhZ1ZRxtXDZDCGZYms1i8NiKKzClSxOPwHPXzTLvaUcUoYmEsTi+XizwZhiOIsNPIM0lkuScTYz2OfZZTnWjBPDwrZnKWDo006FalUeEnOlhsVy0sHi+SpRcqMlRofrL4F8D+Fvht4R0DwL4J0e10Hwt4ZsI9O0jS7RSIoIFZ5ZZJHYmS4u7y5lmvb+9neS6vr64uLy6lluJ5ZG/jfiDP834pzrMeIc+xtbMc3zXEyxWNxdZ3nUqNKEIxirRpUaNKFOhh6FNRpYfD06VCjCFKnCK/f8ryvAZLl+EyrLMNTwmBwVJUcPQpr3YRTcpSbd5TqVJylUq1Ztzq1ZzqVJSnKTYD/2Q==",a5e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAjACMDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/igD49/aU/bM+Fv7PGjak2pavY6j4hs1eOSwhlNzDYXWxylrdR2he5u9UbYTFodipvWVWe7ewg2zN+veHng9xFxxVo4mVCtgcnm1KOInDlrYyndXlhI1EoxoNOzxtX9ym7Uo4iSlCP5rxf4k5Vw7OeXYJ08zztXjLDU5p4fAvbmx1WL92cXr9Wi1Vf8Ay8lRUoOXw18GP+CtvhTx4PFOma5omsadrVvpeqXPhu21jSLDR9TutQh0+5n01YLC01e+stX0y6uY4VlWG/ttXsoGa5ns5rdt8X6rxj9GfMMLl/1zhWtDE4mjGaqYSWJdehiJw0dOOJqQpPDYpSvFRrL6tVlaHtaDTcvmeFPFzD4XiHKcF4hcuD4fx+Y5dDHZ1gqFWM8qy/E4ijGviq+GjSnUq4aOGnKtGrQpTqpK9OGKcowXjH7MH/BTv4z/ABv/AGvPgN8Gb/U9Hs/D/jTxB8QND+IHhO/8J2WneIdMl8O/Cbxz4vsIo7lUgv7C4g1vw/pzuXVlntDLEySRzLKP5Ang8/yrOMdlWd4arha2DvTqUK+HeHr0a0ZpOFWEoxlF8rTV9JJqSupI/wBrvE/6Lfgrkn0ZuMvGbgXFviOnh8t4Szbgzi3JuJ6ubZDmmDzri/JMmxFaMYVa+DxVOpgcfiqfutToYmFm6dWjUpL+g6uw/wAwT8N/jh/wVI0T4k3Op+Av2ZtSmu9N+1T6VL45tI5Rq3iRgzQMPCFsqm6sNLmbf5WrPGmrXcZSazj0tF825/uTw4+jNSyPA0uLfE2eFpulRjjY5NiKtNZflkElOM85rSl7LFYle7/sUJPC05Xp1XjJTVOl/JXiN4153mWaw4M8PcDjquIx1b6lHMMJRqVczzGrK8XRyqjBOeFoW5pSxk0sQ4J1YfVKdN1Knh3w2/Zhbxh4h0zxv8e9f0mxjffe6T4f8S6nY2iyRiRXklkt765jjkRJHQzIomDyMhvJJZCoG/G/i3KVDEZF4fYPFRwcF7DE5tg8NV+sV1ZxUMN7Km54OjKMXySfJiJQXuxoJTg/vvDzwmwfDNCjnPHtbB47Pqtq9HJHiKdbLcsqXUnPMKzm4Zvj4tpTpxUstw9TnUHjm6Ven6v+0N+x58JPExhbStf8P+FvGkMVq2ny22p6ba38zT4+wZszcwzXCzvt+y7FEjkj7NIGOa+D8PPFDivhbESrUsLi8zyeVSbxuBxFHEVMJU5P40lW9nNYavCPxVoaxaSrQqU06b/SeNuGeGfEDL/7PzydHBZlGl7PLM6w7oxzHAuf8Km4SnCOPwMm2ngcQ3SfPOWGlh68lXj+XU2qeJP2MP2k/hX8dfiB4NsvEPiX4XaprEvh/XZJ7qxs/E+jax4Y8QeEtY0i41W1QN9pTQ/FGqS6cl/bXDaZqwt9Q+x6haLcxX/9Z1PDzwr+k1w5Vr5dW/srifA4VJYqnToxzzJZtz9jTxuHcuTNcmliG58saihKMnGjicvxc58n8qUPHP6SX0Rcu4p8LKeYYnNvBrxOxWCWa8OVJ18bwbn+JyzNsnzulmmR1KsXV4W4tp/2PhKGJqU4QqVsLGpRxeGzbAUsLVj+7Pgz/gsx/wAE/fE3hfRtd1v412vgTWNQtPN1Pwh4l0LxHJregXscskFzYXs2jaRqel3G2WJpLa6s72aK6tJILjELStBH/FmffRT8Z8mzjMMsw3DlPO8Ng67p0M2y7Mcuhg8dRcYzp16NPGYrDYqnzQmlUpVqMJ0qqnTvNRU5fvmS+N3AWb5VgMyq4/E5XVxmHjVq5fjMDjJ4nCVG3GdGpUwtCth6nLKL5KlKpKNSDjO0XJwj7bpv7D37LXwg1DVPFHwt+D3hXwXrnifxPdeINc1Gy/tO9ke6vFu57i00eLV9Q1G38MaLJcTmceHfDEWjeH45I4Gj01Ps1uIvg8T4p8f8TYLCZPxBxPmWaZblmEhQwWDrSo06MVT5IQrYn6vSoyx+KhTi4RxuPlisWozqL21qlTm+7y7hrh/IMbjM0ynKMJg8xzFSp4nGUoN13TnL2k6VKVSU/q1Gc1GU6GGVKjNxg5QfJC3wH+3R4M0C++IWgXsPxC8G+Er9vhVfaMdH1/wp4y8RXaWEHioXaa6r+EvDHiRLOxkuLiSxxerYyST25+ym6Vbj7L+/eAOevLMPmSxPDGd8QUXnOErxnlOLyrDpVnhKsHh5xzPH4H2lRwiqidJ1Uoyaqezbhz/jXjjkmOzvBYGGD4oybhuqqWIVWtnDx0YTg5RtKE8FhsTL3ZN3U1C9rx5teXwr4leDNJuPibphi+K/ga3ku7f4Ci9W48FeOr27gGl+DvDOmWzfbrTwrdaTpx1y1s49U0211LWNNaytb23bVPsCbpa+84M4ljhMk4kdXgjiLHTqYvjmeGWGx2TQo4f63jcfWdKvCtmEMTN4CpU9jiamHwldVJ0qn1dVnaB8hxtwnjsdj+CI0OPOHcqoYPB8J08TLF/2mq2Y/V4YKEq+EVLDyozWNjBzw8cRiKX8WHtp01eR9feJfh54E+K3xm+GngL4h+F9H8X+DfFWs6vpev8Ah3WrVbrT9RspfC+vSbJEyskU0E0cVzZ3lvJDeWN5Db3tlPBdQQzJ/OGXZ/nfC+XY7PeHszxmUZvl1KlXwWYYGtKhiKFT6zRhLllHSVOpTlOlWo1FOjXozqUa1OdKc4S/sPG5Rlef8OZvlOdYDC5nluLw1NV8HjKUK9GpyYilUpz5Zp8tSlUhCpRqw5atGrCNSlOFSMZL678I/wDBN/8AYT8EeHtO8L6F+y18IpNK0pblbV/EXhtPGWsv9rvLi/na+8TeMJtd8SarIbm6mMcmqateSQQeVaQNHaW8EEXyGaeNHitnOPxOZ4/jziGWLxcozrPC415dQcoU4Uo+zwWXRwuCoLkhG8aGHpxlK85JzlKT+HwXA3CGX4WjgsJw/lsMPh4uFKNSj9YnGLk5WlWxLq16jvJ61Kk2lonZJL3f40eKtO8JeH9NvtTuYrWC51ZbNJJnCIZms7qYRhiQNxSGRguckIx7Gvj+HsJUxeKrQpxcpRoObSV3b2kI3+9rU+sVCpXfLTi5OPvNLV22v10u0n6n5XfH34f/AA7+OPiK28TXXxL1nwrf2/hSbwg8eiSaRLbz2D6q2rpOyXtvLIt1FcSSoSJTE8TIPKVkLP8A0b4a8e5t4cwxFOhw9l2dQr4yjjUsxeLpunVpUZUeWLw9SCcZxaequmt7Oy/NfEjwhh4j4XC4bFZvm2SrDRqw58up4ecqsatvjWJpTtyu7Vt767XPMvE/wK+HfiPxFa6zD8VvE9iUXwElzY28uhyJe/8ACBaNpehWbNK9jujfUrHSYHvTscLcyzyQLHE0cEf02QeLudZDgs3wy4VyTFzzWtn9ZV6/16Lwks/rYnEVY0qcMQlKGGq4mXsFKXM4QhGpKUk5vxOJfADB8SYnhyvV4g4gwNPhzDZJhoUcNDBS+uwyVYeFOWIqVMM+WpiYYeKrOnDlU5SlCCVoL6L8HX9tqP7SPwTNpMtwf+El1Rz5Z3nanhPxC7t8uflRAWY9FUFjgA1+MZnCVPhjPOdcq+q0tXpq8Xh0l6t6W76I/oajCUMux/MrfuIrX/r7T/V2P11r8UPnTO1TSNJ1y0NhrWl6dq9izpK1lqllbahaNJGSY5Db3cU0JeMklHKblJJUitKVatQn7ShVqUaiTSnSnKnOz3XNBqVn1V9SoTnTfNCcoS25oScXZ7q6aZzP/Cs/hwf+af8Agj/wlNB/+QK6v7UzP/oY47/wrxH/AMsNfrWJ/wCgmv8A+Dqn/wAkKvw1+HKkMvgDwSrA5DL4V0IEH1BFhkH6Uf2pmb3zHHf+FeI/+WB9ZxL3xFf/AMG1P/kjWsPCXhXSrqK+0zwz4f069hV0hvLDRtNs7qJJUMcixXFvbRyxrIhKOquA6EqwIOKyqYzGVoOnVxWJq0203CpXqzg2ndNxlJptPVXWj1IlVqyTjKpUlF2upTk07bXTdnbodBXMZgD/2Q==",s5e="/assets/trendgraph-ogvXACfR.jpg",l5e="/assets/trend2graph-pldpacxu.jpg",c5e=()=>{const e=jl();return Ne.jsxs(Ne.Fragment,{children:[Ne.jsx(Qv,{}),Ne.jsxs("div",{className:ln.wrapper,children:[Ne.jsxs("div",{className:ln.banner,children:[Ne.jsx("div",{className:ln.logo,onClick:()=>e("/home"),children:Ne.jsx("img",{src:ex,alt:"Logo"})}),Ne.jsxs("div",{className:ln.textContainer,children:[Ne.jsx("h3",{className:ln.text1,children:" "}),Ne.jsx("h3",{className:ln.text2,children:"2024  "})]})]}),Ne.jsx("div",{className:ln.contentWrapper,children:Ne.jsx("div",{className:ln.contentContainer,children:Ne.jsxs("div",{className:ln.titleContainer,children:[Ne.jsx("h3",{className:ln.mediumTitle,children:"   "}),Ne.jsx("h3",{className:ln.mediumTitleMini,children:"  ."}),Ne.jsx("div",{className:ln.profileContainerWrapper,children:Ne.jsxs("div",{className:ln.profileContainer,children:[Ne.jsx("img",{src:o5e,className:ln.profile}),Ne.jsxs("ul",{className:ln.profileInform,children:[Ne.jsx("li",{children:""}),Ne.jsx("li",{children:"- NICE "}),Ne.jsx("li",{children:"-   "})]})]})}),Ne.jsx("div",{className:ln.contextContainer,children:Ne.jsx("h3",{className:ln.context,children:"   ,     3   ."})}),Ne.jsx("div",{className:ln.keywordContainer,children:Ne.jsxs("ul",{className:ln.keyword,children:[Ne.jsxs("li",{children:[Ne.jsx("img",{src:zg})," (Slow Starter)"]}),Ne.jsxs("li",{children:[Ne.jsx("img",{src:zg}),"(Re-discovery)"]}),Ne.jsxs("li",{children:[Ne.jsx("img",{src:zg}),"(New Town)"]})]})}),Ne.jsx("div",{className:ln.contextContainer,children:Ne.jsx("h3",{className:ln.context,children:"  3  ,        ."})}),Ne.jsxs("div",{className:ln.miniTitleContainer,children:[Ne.jsx("img",{src:a5e}),Ne.jsx("h3",{className:ln.miniTitle,children:"'  '  "})]}),Ne.jsx("div",{className:ln.contextContainer,children:Ne.jsx("h3",{className:ln.context,children:"  ~  ,  19       .           .  ."})}),Ne.jsx("div",{className:ln.miniTitleContainer2,children:Ne.jsx("h3",{className:ln.miniTitle2,children:"    "})}),Ne.jsx("div",{className:ln.graph,children:Ne.jsx("img",{src:s5e})}),Ne.jsx("div",{className:ln.contextContainer2,children:Ne.jsx("h3",{className:ln.context,children:"2019 ,       . 19      ( )      ?         ,     .  , 19         .         .     ."})}),Ne.jsx("div",{className:ln.graph,children:Ne.jsx("img",{src:l5e})}),Ne.jsx("div",{className:ln.contextContainer2,children:Ne.jsx("h3",{className:ln.context,children:`                 .   2021    2022  19      .  19       ""      19       .      .  ''.            . 19                 .  ,      .`})})]})})}),Ne.jsx("footer",{className:ln.footer,children:Ne.jsx("div",{className:ln.footerContainer,children:Ne.jsxs("div",{className:ln.footerSection,children:[Ne.jsx("h4",{children:" "}),Ne.jsxs("ul",{children:[Ne.jsx("li",{children:Ne.jsx("a",{href:"#",children:" "})}),Ne.jsx("li",{children:Ne.jsx("a",{href:"#",children:" "})}),Ne.jsx("li",{children:Ne.jsx("a",{href:"#",children:"  "})})]})]})})})]})]})};Dp.accessToken="pk.eyJ1Ijoia2diNDg1NCIsImEiOiJjbTJ1NDlmZ2YwOWljMmtvaWltZjFlZXdkIn0.aLnwIt7wXc7ir6vjkogdnQ";function u5e(){const e=jl(),t=()=>{e("/home")};return Ne.jsx(Ne.Fragment,{children:Ne.jsxs("div",{className:"container",children:[Ne.jsxs("div",{className:"text-container",children:[Ne.jsx("p",{className:"p_style",children:"   "}),Ne.jsx("p",{className:"p_style",children:" "})]}),Ne.jsx("div",{className:"button_style",children:Ne.jsx("button",{className:"button_container",onClick:t,children:Ne.jsx("p",{className:"button_text",children:" "})})})]})})}function h5e(){return Ne.jsx(X$,{children:Ne.jsxs($$,{children:[Ne.jsx(ds,{path:"/",element:Ne.jsx(jS,{})})," ",Ne.jsx(ds,{path:"/Intro",element:Ne.jsx(jS,{})})," ",Ne.jsx(ds,{path:"/Main",element:Ne.jsx(u5e,{})})," ",Ne.jsx(ds,{path:"/home",element:Ne.jsx(sU,{})})," ",Ne.jsx(ds,{path:"/Question",element:Ne.jsxs(Ne.Fragment,{children:[Ne.jsx(Qv,{}),Ne.jsx(cU,{})]})})," ",Ne.jsx(ds,{path:"/Analysing",element:Ne.jsx(fU,{})})," ",Ne.jsx(ds,{path:"/AnalysingResult",element:Ne.jsx(mU,{})})," ",Ne.jsx(ds,{path:"/ResultGraph",element:Ne.jsx(Z3e,{})})," ",Ne.jsx(ds,{path:"/design",element:Ne.jsx(Che,{})})," ",Ne.jsx(ds,{path:"/trend",element:Ne.jsx(c5e,{})})," "]})})}ZO(document.getElementById("root")).render(Ne.jsx(ut.StrictMode,{children:Ne.jsx(h5e,{})}));
